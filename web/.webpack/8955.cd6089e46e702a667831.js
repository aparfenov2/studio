(self.webpackChunk=self.webpackChunk||[]).push([[8955],{72278:le=>{(function(){function C(d){return d[0]}var o={Lexer:void 0,ParserRules:[{name:"main$ebnf$1",symbols:["messagePath"],postprocess:C},{name:"main$ebnf$1",symbols:[],postprocess:function(d){return null}},{name:"main$ebnf$2",symbols:["modifier"],postprocess:C},{name:"main$ebnf$2",symbols:[],postprocess:function(d){return null}},{name:"main",symbols:["topicName","main$ebnf$1","main$ebnf$2"],postprocess:d=>({topicName:d[0].value,topicNameRepr:d[0].repr,messagePath:d[1]||[],modifier:d[2]})},{name:"id$ebnf$1",symbols:[/[a-zA-Z0-9_-]/]},{name:"id$ebnf$1",symbols:["id$ebnf$1",/[a-zA-Z0-9_-]/],postprocess:function(g){return g[0].concat([g[1]])}},{name:"id",symbols:["id$ebnf$1"],postprocess:d=>d[0].join("")},{name:"integer$ebnf$1",symbols:[{literal:"-"}],postprocess:C},{name:"integer$ebnf$1",symbols:[],postprocess:function(d){return null}},{name:"integer$ebnf$2",symbols:[/[0-9]/]},{name:"integer$ebnf$2",symbols:["integer$ebnf$2",/[0-9]/],postprocess:function(g){return g[0].concat([g[1]])}},{name:"integer",symbols:["integer$ebnf$1","integer$ebnf$2"],postprocess:d=>({value:BigInt((d[0]??"")+d[1].join("")),repr:(d[0]??"")+d[1].join("")})},{name:"string$ebnf$1",symbols:[]},{name:"string$ebnf$1",symbols:["string$ebnf$1",/[^']/],postprocess:function(g){return g[0].concat([g[1]])}},{name:"string",symbols:[{literal:"'"},"string$ebnf$1",{literal:"'"}],postprocess:d=>({value:d[1].join(""),repr:`'${d[1].join("")}'`})},{name:"string$ebnf$2",symbols:[]},{name:"string$ebnf$2",symbols:["string$ebnf$2",/[^"]/],postprocess:function(g){return g[0].concat([g[1]])}},{name:"string",symbols:[{literal:'"'},"string$ebnf$2",{literal:'"'}],postprocess:d=>({value:d[1].join(""),repr:`"${d[1].join("")}"`})},{name:"variable$ebnf$1",symbols:["id"],postprocess:C},{name:"variable$ebnf$1",symbols:[],postprocess:function(d){return null}},{name:"variable",symbols:[{literal:"$"},"variable$ebnf$1"],postprocess:(d,g)=>({value:{variableName:d[1]||"",startLoc:g},repr:`$${d[1]||""}`})},{name:"value",symbols:["integer"],postprocess:d=>d[0]},{name:"value",symbols:["string"],postprocess:d=>d[0]},{name:"value$string$1",symbols:[{literal:"t"},{literal:"r"},{literal:"u"},{literal:"e"}],postprocess:function(g){return g.join("")}},{name:"value",symbols:["value$string$1"],postprocess:d=>({value:!0,repr:"true"})},{name:"value$string$2",symbols:[{literal:"f"},{literal:"a"},{literal:"l"},{literal:"s"},{literal:"e"}],postprocess:function(g){return g.join("")}},{name:"value",symbols:["value$string$2"],postprocess:d=>({value:!1,repr:"false"})},{name:"value",symbols:["variable"],postprocess:d=>d[0]},{name:"topicName$ebnf$1",symbols:["slashID"]},{name:"topicName$ebnf$1",symbols:["topicName$ebnf$1","slashID"],postprocess:function(g){return g[0].concat([g[1]])}},{name:"topicName",symbols:["topicName$ebnf$1"],postprocess:d=>({value:d[0].join(""),repr:d[0].join("")})},{name:"topicName$ebnf$2",symbols:[]},{name:"topicName$ebnf$2",symbols:["topicName$ebnf$2","slashID"],postprocess:function(g){return g[0].concat([g[1]])}},{name:"topicName",symbols:["id","topicName$ebnf$2"],postprocess:d=>({value:d[0]+d[1].join(""),repr:d[0]+d[1].join("")})},{name:"topicName",symbols:["quotedString"],postprocess:C},{name:"slashID$ebnf$1",symbols:["id"],postprocess:C},{name:"slashID$ebnf$1",symbols:[],postprocess:function(d){return null}},{name:"slashID",symbols:[{literal:"/"},"slashID$ebnf$1"],postprocess:d=>d.join("")},{name:"quotedString$ebnf$1",symbols:[]},{name:"quotedString$ebnf$1$subexpression$1",symbols:[/[^"\\]/]},{name:"quotedString$ebnf$1$subexpression$1$string$1",symbols:[{literal:"\\"},{literal:"\\"}],postprocess:function(g){return g.join("")}},{name:"quotedString$ebnf$1$subexpression$1",symbols:["quotedString$ebnf$1$subexpression$1$string$1"],postprocess:d=>"\\"},{name:"quotedString$ebnf$1$subexpression$1$string$2",symbols:[{literal:"\\"},{literal:'"'}],postprocess:function(g){return g.join("")}},{name:"quotedString$ebnf$1$subexpression$1",symbols:["quotedString$ebnf$1$subexpression$1$string$2"],postprocess:d=>'"'},{name:"quotedString$ebnf$1",symbols:["quotedString$ebnf$1","quotedString$ebnf$1$subexpression$1"],postprocess:function(g){return g[0].concat([g[1]])}},{name:"quotedString",symbols:[{literal:'"'},"quotedString$ebnf$1",{literal:'"'}],postprocess:d=>({value:d[1].join(""),repr:`"${d[1].join("").replace(/[\\"]/g,g=>`\\${g}`)}"`})},{name:"messagePath$ebnf$1",symbols:[]},{name:"messagePath$ebnf$1",symbols:["messagePath$ebnf$1","messagePathElement"],postprocess:function(g){return g[0].concat([g[1]])}},{name:"messagePath$ebnf$2",symbols:[{literal:"."}],postprocess:C},{name:"messagePath$ebnf$2",symbols:[],postprocess:function(d){return null}},{name:"messagePath",symbols:["messagePath$ebnf$1","messagePath$ebnf$2"],postprocess:d=>d[0].reduce((g,v)=>g.concat(v),[]).concat(d[1]?[{type:"name",name:"",repr:""}]:[])},{name:"messagePathElement$ebnf$1",symbols:["slice"],postprocess:C},{name:"messagePathElement$ebnf$1",symbols:[],postprocess:function(d){return null}},{name:"messagePathElement$ebnf$2",symbols:["filter"],postprocess:C},{name:"messagePathElement$ebnf$2",symbols:[],postprocess:function(d){return null}},{name:"messagePathElement",symbols:[{literal:"."},"name","messagePathElement$ebnf$1","messagePathElement$ebnf$2"],postprocess:d=>[d[1],d[2],d[3]].filter(g=>g!==null)},{name:"messagePathElement",symbols:["filter"],postprocess:C},{name:"name",symbols:["id"],postprocess:d=>({type:"name",name:d[0],repr:d[0]})},{name:"name",symbols:["quotedString"],postprocess:d=>({type:"name",name:d[0].value,repr:d[0].repr})},{name:"sliceVal",symbols:["integer"],postprocess:d=>Number(d[0].value)},{name:"sliceVal",symbols:["variable"],postprocess:d=>d[0].value},{name:"slice",symbols:[{literal:"["},"sliceVal",{literal:"]"}],postprocess:d=>({type:"slice",start:d[1],end:d[1]})},{name:"slice$ebnf$1",symbols:["sliceVal"],postprocess:C},{name:"slice$ebnf$1",symbols:[],postprocess:function(d){return null}},{name:"slice$ebnf$2",symbols:["sliceVal"],postprocess:C},{name:"slice$ebnf$2",symbols:[],postprocess:function(d){return null}},{name:"slice",symbols:[{literal:"["},"slice$ebnf$1",{literal:":"},"slice$ebnf$2",{literal:"]"}],postprocess:d=>({type:"slice",start:d[1]===null?0:d[1],end:d[3]===null?1/0:d[3]})},{name:"simplePath$ebnf$1",symbols:[]},{name:"simplePath$ebnf$1$subexpression$1",symbols:[{literal:"."},"id"]},{name:"simplePath$ebnf$1",symbols:["simplePath$ebnf$1","simplePath$ebnf$1$subexpression$1"],postprocess:function(g){return g[0].concat([g[1]])}},{name:"simplePath",symbols:["id","simplePath$ebnf$1"],postprocess:d=>[d[0]].concat(d[1].map(g=>g[1]))},{name:"filter$ebnf$1",symbols:["simplePath"],postprocess:C},{name:"filter$ebnf$1",symbols:[],postprocess:function(d){return null}},{name:"filter",symbols:[{literal:"{"},"filter$ebnf$1",{literal:"}"}],postprocess:(d,g)=>({type:"filter",path:d[1]||[],value:void 0,nameLoc:g+1,valueLoc:g+1,repr:(d[1]||[]).join(".")})},{name:"filter$ebnf$2",symbols:["simplePath"],postprocess:C},{name:"filter$ebnf$2",symbols:[],postprocess:function(d){return null}},{name:"filter$string$1",symbols:[{literal:"="},{literal:"="}],postprocess:function(g){return g.join("")}},{name:"filter",symbols:[{literal:"{"},"filter$ebnf$2","filter$string$1","value",{literal:"}"}],postprocess:(d,g)=>({type:"filter",path:d[1]||[],value:d[3].value,nameLoc:g+1,valueLoc:g+1+(d[1]||[]).join(".").length+d[2].length,repr:`${(d[1]||[]).join(".")}==${d[3].repr}`})},{name:"modifier$string$1",symbols:[{literal:"."},{literal:"@"}],postprocess:function(g){return g.join("")}},{name:"modifier$ebnf$1",symbols:["id"],postprocess:C},{name:"modifier$ebnf$1",symbols:[],postprocess:function(d){return null}},{name:"modifier",symbols:["modifier$string$1","modifier$ebnf$1"],postprocess:d=>d[1]||""}],ParserStart:"main"};typeof le.exports<"u"?le.exports=o:window.grammar=o})()},57334:(le,C,o)=>{"use strict";o.d(C,{f:()=>d});class d{#e=[];async wait(){await new Promise(v=>{this.#e.push(v)})}notifyOne(){this.#e.shift()?.()}notifyAll(){for(const v of this.#e)v();this.#e.length=0}}},62531:(le,C,o)=>{"use strict";o.d(C,{Z:()=>g});var d=o(79044);class g{value;#e=new d.WU;constructor(l){this.value=l}async runExclusive(l){return await this.#e.runExclusive(async()=>await l(this.value))}}},72220:(le,C,o)=>{"use strict";o.d(C,{Z:()=>d});function d(g){let v=!1,l;const A=(...S)=>{v?l=S:b(S)};function b(S){v=!0,l=void 0,A.currentPromise=g(...S).finally(()=>{v=!1,A.currentPromise=void 0,l&&b(l)})}return A}},69363:(le,C,o)=>{"use strict";o.d(C,{HF:()=>g.Z,fQ:()=>l.f,jK:()=>d.Z,mN:()=>v.m,nK:()=>v.n});var d=o(62531),g=o(72220),v=o(43348),l=o(57334)},43348:(le,C,o)=>{"use strict";o.d(C,{m:()=>d,n:()=>g});class d extends Error{name="PromiseTimeoutError"}async function g(v,l){return await new Promise((A,b)=>{const S=setTimeout(()=>{b(new d(`Promise timed out after ${l}ms`))},l);v.then(A,b).finally(()=>{clearTimeout(S)})})}},8220:(le,C,o)=>{"use strict";o.d(C,{Z:()=>d});function d(g,v){const l=[];let A=0;for(const b of g){const S=v(b,A++);S&&l.push(S)}return l}},75845:(le,C,o)=>{"use strict";o.d(C,{Iq:()=>l.Z,O4:()=>b.Z,R5:()=>S.Z,UG:()=>D.U,Wk:()=>E.Z,de:()=>I.d,iY:()=>M.i,qe:()=>v.Z,t2:()=>H.t,vE:()=>g.Z,yV:()=>F.y});var d=o(50422),g=o(86193),v=o(37140),l=o(25348),A=o(77651),b=o(28690),S=o(26363),n=o(70415),E=o(88484),F=o(76097),I=o(90715),M=o(65656),D=o(46863),H=o(81448)},90715:(le,C,o)=>{"use strict";var d="../../packages/hooks/src/selectWithUnstableIdentityWarning.ts";o.d(C,{d:()=>l});var g=o(23503);const v=g.ZP.getLogger(d);function l(A,b){return b(A)}},50422:(le,C,o)=>{"use strict";var d=o(2784),g=o(88665),v=o.n(g);function l(A,{initiallyTrue:b}){const S=useRef(b?void 0:A),n=!shallowequal(S.current,A);return S.current=A,n}},65656:(le,C,o)=>{"use strict";o.d(C,{i:()=>v});var d=o(2784);function g(l,A){throw A}function v(){const[l,A]=(0,d.useReducer)(g,void 0);return A}},86193:(le,C,o)=>{"use strict";o.d(C,{Z:()=>l});var d=o(76635),g=o.n(d),v=o(2784);function l(A){const b=(0,v.useRef)(A);return(0,d.isEqual)(A,b.current)?b.current:(b.current=A,A)}},37140:(le,C,o)=>{"use strict";o.d(C,{Z:()=>g});var d=o(2784);function g(v,l){const A=(0,d.useContext)(v);if(A==null)throw new Error(`useGuaranteedContext got null for contextType${l!=null?`: '${l}'`:""}`);return A}},76097:(le,C,o)=>{"use strict";var d="../../packages/hooks/src/useMemoryInfo.ts";o.d(C,{y:()=>A});var g=o(2784),v=o(23503);const l=v.ZP.getLogger(d);function A(b){const{refreshIntervalMs:S}=b,[n,E]=(0,g.useState)(window.performance.memory);return(0,g.useEffect)(()=>{if(!window.performance.memory){l.info("No memory information available");return}const F=setInterval(()=>{E(window.performance.memory)},S);return()=>{clearInterval(F)}},[S]),n}},25348:(le,C,o)=>{"use strict";var d="../../packages/hooks/src/useMustNotChange.ts";o.d(C,{Z:()=>n});var g=o(2784),v=o(23503);const l=v.ZP.getLogger(d),A=E=>{const F=useRef(E);F.current!==E&&l.error("Value must not change",F.current),F.current=E},n=()=>{}},77651:(le,C,o)=>{"use strict";var d=o(2784);function g(v){const[l,A]=useState(void 0);return useCallback((...b)=>{try{return v(...b)}catch(S){A(()=>{throw S})}},[v])}},46863:(le,C,o)=>{"use strict";o.d(C,{U:()=>g});var d=o(2784);function g(v){const[l,A]=(0,d.useState)(sessionStorage.getItem(v)??void 0),b=(0,d.useCallback)(n=>{n?(sessionStorage.setItem(v,n),window.dispatchEvent(new StorageEvent("storage",{key:v,newValue:n,storageArea:sessionStorage}))):(sessionStorage.removeItem(v),window.dispatchEvent(new StorageEvent("storage",{key:v,newValue:void 0,storageArea:sessionStorage})))},[v]),S=(0,d.useCallback)(n=>{n.key===v&&A(n.newValue??void 0)},[v]);return(0,d.useEffect)(()=>(window.addEventListener("storage",S),()=>{window.removeEventListener("storage",S)}),[S]),[l??void 0,b]}},28690:(le,C,o)=>{"use strict";o.d(C,{Z:()=>l});var d=o(2784),g=o(88665),v=o.n(g);function l(A){const b=(0,d.useRef)(A);return v()(A,b.current)?b.current:(b.current=A,A)}},81448:(le,C,o)=>{"use strict";o.d(C,{t:()=>g});var d=o(2784);function g(){const v=(0,d.useRef)(!1),l=(0,d.useCallback)(()=>v.current,[]);return(0,d.useLayoutEffect)(()=>(v.current=!0,()=>{v.current=!1}),[]),l}},26363:(le,C,o)=>{"use strict";var d="../../packages/hooks/src/useValueChangedDebugLog.ts";o.d(C,{Z:()=>n});var g=o(2784),v=o(23503);const l=v.ZP.getLogger(d),A=()=>{};function b(E,F){const I=useRef(E);I.current!==E&&l.debug(`value changed: ${F}`),useLayoutEffect(()=>{I.current=E})}const n=A},70415:(le,C,o)=>{"use strict";var d=o(2784);function g(){const[v,l]=useState(document.visibilityState);return useEffect(()=>{l(document.visibilityState);const A=()=>{l(document.visibilityState)};return document.addEventListener("visibilitychange",A),()=>{document.removeEventListener("visibilitychange",A)}},[]),v}},88484:(le,C,o)=>{"use strict";var d="../../packages/hooks/src/useWarnImmediateReRender.ts";o.d(C,{Z:()=>b});var g=o(2784),v=o(23503);const l=v.ZP.getLogger(d),b=()=>{}},93455:(le,C,o)=>{"use strict";o.d(C,{o:()=>d});var d;(function(g){g.COLOR_SCHEME="colorScheme",g.TIMEZONE="timezone",g.TIME_FORMAT="time.format",g.MESSAGE_RATE="messageRate",g.UPDATES_ENABLED="updates.enabled",g.LANGUAGE="language",g.ROS_PACKAGE_PATH="ros.ros_package_path",g.TELEMETRY_ENABLED="telemetry.telemetryEnabled",g.CRASH_REPORTING_ENABLED="telemetry.crashReportingEnabled",g.SHOW_DEBUG_PANELS="showDebugPanels",g.HIDE_SIGN_IN_PROMPT="hideSignInPrompt",g.LAUNCH_PREFERENCE="launchPreference",g.SHOW_OPEN_DIALOG_ON_STARTUP="ui.open-dialog-startup",g.ENABLE_LAYOUT_DEBUGGING="enableLayoutDebugging",g.ENABLE_MEMORY_USE_INDICATOR="dev.memory-use-indicator"})(d||(d={}))},75785:(le,C,o)=>{"use strict";o.d(C,{CC:()=>g.C,PR:()=>l.P,Ui:()=>d.U,Um:()=>A.Z,V7:()=>v.V});var d=o(35045),g=o(38988),v=o(76545),l=o(99616),A=o(44481)},99616:(le,C,o)=>{"use strict";o.d(C,{P:()=>n});var d=o(5817),g=o.n(d),v=o(2784),l=o(91004),A=o(85026);const b=g()((E,F)=>{if(!E)return{};const I={};for(const M of F){const D=typeof M=="string"?M:M.topic,H=E.messagesByTopic[D];H&&(I[D]=H)}return I}),S=E=>{const[F]=(0,v.useState)(()=>(0,l.Z)()),I=(0,A.An)((0,v.useCallback)(({setSubscriptions:M})=>M,[]));(0,v.useEffect)(()=>{I(F,E)},[F,I,E]),(0,v.useEffect)(()=>()=>{I(F,[])},[F,I])};function n(E){const F=(0,v.useMemo)(()=>E.map(D=>D.topic),[E]);S(E);const I=(0,A.An)((0,v.useCallback)(D=>D.playerState.progress.messageCache?.blocks,[]));return(0,v.useMemo)(()=>I?I.map(D=>b(D,F)):[],[I,F])}},44481:(le,C,o)=>{"use strict";o.d(C,{Z:()=>l});var d=o(2784),g=o(98043),v=o(23571);function l(A){const{getCurrentLayoutState:b,savePanelConfigs:S}=(0,g._B)(),n=(0,d.useCallback)(I=>{if(A!=null)return(0,v.Y)(I.selectedLayout?.data?.configById?.[A])},[A]),E=(0,g.NS)(n),F=(0,d.useCallback)(I=>{if(A!=null)if(typeof I=="function"){const M=b().selectedLayout?.data?.configById[A];M&&S({configs:[{id:A,config:I(M)}]})}else S({configs:[{id:A,config:I}]})},[b,A,S]);return[E,F]}},35045:(le,C,o)=>{"use strict";o.d(C,{U:()=>n});var d=o(2784),g=o(85026);function v(E){return E.datatypes}function l(E){return E.sortedTopics}function A(E){return E.playerState.activeData?.startTime}function b(E){return E.playerState.capabilities}function S(E){return E.playerState.playerId}function n(){const E=(0,g.An)(v),F=(0,g.An)(l),I=(0,g.An)(A),M=(0,g.An)(b),D=(0,g.An)(S);return(0,d.useMemo)(()=>({topics:F,datatypes:E,capabilities:M,startTime:I,playerId:D}),[M,E,D,I,F])}},38988:(le,C,o)=>{"use strict";var d="../../packages/studio-base/src/PanelAPI/useMessageReducer.ts";o.d(C,{C:()=>F});var g=o(2784),v=o(91004),l=o(75845),A=o(23503),b=o(85026),S=o(77861);const n=A.ZP.getLogger(d);function E(I){return I.setSubscriptions}function F(I){const[M]=(0,g.useState)(()=>(0,v.Z)()),{restore:D,addMessage:H,addMessages:j,preloadType:L="partial"}=I;if([I.addMessage,I.addMessages].filter(Boolean).length!==1)throw new Error("useMessageReducer must be provided with exactly one of addMessage or addMessages");(0,S.Z)(I.restore,()=>{n.warn("useMessageReducer restore() is changing frequently. restore() will be called each time it changes, so a new function shouldn't be created on each render. (If you're using Hooks, try useCallback.)")}),(0,S.Z)(I.addMessage,()=>{n.warn("useMessageReducer addMessage() is changing frequently. addMessage() will be called each time it changes, so a new function shouldn't be created on each render. (If you're using Hooks, try useCallback.)")}),(0,S.Z)(I.addMessages,()=>{n.warn("useMessageReducer addMessages() is changing frequently. addMessages() will be called each time it changes, so a new function shouldn't be created on each render. (If you're using Hooks, try useCallback.)")});const P=(0,l.O4)(I.topics),B=(0,g.useMemo)(()=>P.map($=>typeof $=="string"?{topic:$,preloadType:L}:$),[L,P]),z=(0,b.An)(E);(0,g.useEffect)(()=>{z(M,B)},[M,z,B]),(0,g.useEffect)(()=>()=>{z(M,[])},[M,z]);const Y=(0,g.useRef)();return(0,b.An)((0,g.useCallback)(function(ve){const q=ve.messageEventsBySubscriberId.get(M),Pe=ve.playerState.activeData?.lastSeekTime;let ie;if(!Y.current||Pe!==Y.current.lastSeekTime?ie=D(void 0):D!==Y.current.restore||H!==Y.current.addMessage||j!==Y.current.addMessages?ie=D(Y.current.reducedValue):ie=Y.current.reducedValue,q&&q.length>0&&q!==Y.current?.messageEvents){if(j)q.length>0&&(ie=j(ie,q));else if(H)for(const fe of q)ie=H(ie,fe)}return Y.current={messageEvents:q,lastSeekTime:Pe,reducedValue:ie,restore:D,addMessage:H,addMessages:j},Y.current.reducedValue},[M,H,j,D]))}},76545:(le,C,o)=>{"use strict";o.d(C,{V:()=>S});var d=o(76635),g=o.n(d),v=o(2784),l=o(75845),A=o(86286),b=o(38988);function S(n){const{historySize:E,topics:F}=n,I=(0,l.vE)(F),M=(0,v.useCallback)((H,j)=>{const L=(0,d.groupBy)(j,"topic"),P={...H};return Object.entries(L).forEach(([B,z])=>{const Y=P[B];Y&&(P[B]=(0,A.Z)(Y,z,E))}),P},[E]),D=(0,v.useCallback)(H=>{const j={};for(const L of I){const P=typeof L=="string"?L:L.topic,B=H?.[P];j[P]=B?.slice(-E)??[]}return j},[I,E]);return(0,b.C)({topics:I,restore:D,addMessages:M})}},30280:(le,C,o)=>{"use strict";o.d(C,{h:()=>d});const d=44},90546:(le,C,o)=>{"use strict";o.d(C,{Z:()=>M});var d=o(52322),g=o(42713),v=o(98967),l=o(20379),A=o(87037),b=o(38677),S=o(68434),n=o(2784),E=o(28e3),F=o(2784);function I(D){const{children:H,className:j,color:L="primary",edge:P,size:B="medium",iconSize:z="medium",getText:Y}=D,[$,ve]=(0,n.useState)(!1),q=(0,n.useCallback)(()=>{E.Z.copy(Y()).then(()=>{ve(!0),setTimeout(()=>{ve(!1)},1500)}).catch(Pe=>{console.warn(Pe)})},[Y]);return H==null?(0,d.jsx)(l.Z,{arrow:!0,title:$?"Copied":"Copy to clipboard",children:(0,d.jsx)(A.Z,{edge:P,className:j,size:B,onClick:q,color:$?"success":L,children:$?(0,d.jsx)(g.Z,{fontSize:z}):(0,d.jsx)(v.Z,{fontSize:z})})}):(0,d.jsx)(b.Z,{size:B,color:"inherit",className:j,onClick:q,startIcon:$?(0,d.jsx)(g.Z,{fontSize:z,color:"success"}):(0,d.jsx)(v.Z,{fontSize:z,color:"primary"}),children:(0,d.jsx)(S.Z,{color:$?"text.primary":L,variant:"body2",children:H})})}const M=F.memo(I)},29796:(le,C,o)=>{"use strict";o.d(C,{v:()=>Pe});var d=o(52322),g=o(2784),v=o(16003),l=o(85026),A=o(44668),b=o(27332),S=o(24304);const n=new Map;function E(ie,fe){return .7*(ie??fe)+.3*fe}function F(ie,fe,x,R){if(fe==null||x==null){const ce=(0,A.toSec)(R);return ce>0?ie/ce:void 0}if(ie<2||(0,A.areEqual)(fe,x))return;const Q=(0,A.toSec)((0,b.Ai)(x,fe));if(Q>0)return(ie-1)/Q}function I(ie,fe){const x=(0,A.toSec)(fe);return x>0?ie/x:void 0}const M=({playerState:ie})=>ie.activeData?.currentTime,D=({playerState:ie})=>ie.activeData?.startTime,H=({playerState:ie})=>ie.activeData?.endTime,j=ie=>ie.playerState.activeData?.topicStats??n,L=ie=>ie.playerState.capabilities,P={};function B(){const ie=(0,l.An)(M),fe=(0,l.An)(D),x=(0,l.An)(H),R=(0,l.An)(j),Q=(0,l.An)(L),ce=(0,g.useMemo)(()=>x&&fe?(0,b.Ai)(x,fe):{sec:0,nsec:0},[x,fe]),T=(0,g.useRef)({}),Z=(0,g.useMemo)(()=>Q.includes(S.C.playbackControl),[Q]);return(0,g.useMemo)(()=>{if(!ie)return P;const we=(0,A.fromMillis)(Date.now()),Be={};for(const[Oe,V]of R)if(Z){const N=F(V.numMessages,V.firstMessageTime,V.lastMessageTime,ce);Be[Oe]=N}else{const N=T.current[Oe];if(N==null)T.current[Oe]={time:we,count:V.numMessages,frequency:void 0};else{const ee=V.numMessages-N.count;if(ee>0){const ae=(0,b.Ai)(we,N.time),me=I(ee,ae);if(me!=null){const de=E(N.frequency,me);N.frequency=de,N.count=V.numMessages,N.time=we}}Be[Oe]=N.frequency}}return Be},[ie,ce,Z,R])}const z="\u2014",Y=new Map,$=ie=>ie.playerState.activeData?.topicStats??Y,ve=ie=>ie.playerState.playerId,q=ie=>ie.playerState.capabilities;function Pe({interval:ie=1}){const fe=(0,l.An)($),x=(0,l.An)(q),R=(0,l.An)(ve),Q=(0,v.Z)(fe),ce=(0,g.useRef)(0),T=(0,g.useRef)(null),Z=(0,g.useRef)({}),ge=B(),we=(0,v.Z)(ge),Be=(0,g.useMemo)(()=>x.includes(S.C.playbackControl),[x]),Oe=(0,g.useCallback)(()=>{T.current&&T.current.parentElement?.querySelectorAll("[data-topic]").forEach(V=>{if(!(V instanceof HTMLElement)||!V.dataset.topic)return;const N=V.dataset.topic,ee=Q.current.get(N);if(V.dataset.topicStat==="count"&&(ee?V.innerText=ee.numMessages.toLocaleString():V.innerText=z),V.dataset.topicStat==="frequency"){const ae=we.current[N];V.innerText=ae!=null?`${ae.toFixed(2)} Hz`:z}})},[we,Q]);return(0,g.useEffect)(()=>{if(!T.current?.parentElement)return;const V=new MutationObserver(N=>{for(const ee of N)for(const ae of ee.addedNodes)if(ae instanceof HTMLElement&&ae.querySelector("[data-topic]")){Oe();return}});return V.observe(T.current.parentElement,{childList:!0,subtree:!0}),()=>{V.disconnect()}},[Oe]),(0,g.useEffect)(()=>{ce.current++%ie===0&&Oe()},[Oe,ie,fe,Be]),(0,g.useEffect)(()=>{Z.current={}},[R]),(0,g.useLayoutEffect)(()=>{Oe()},[Oe]),(0,d.jsx)("div",{ref:T,style:{display:"none"}})}},44449:(le,C,o)=>{"use strict";o.d(C,{v:()=>H});var d=o(52322),g=o(68434),v=o(63249),l=o(2784),A=o(8533),b=o(68588),S=o(28219),n=o(72970),E=o(39347),F=o(93812),I=o(98043),M=o(40301);const D=(0,n.ZL)()(j=>({root:{backgroundColor:j.palette.background.paper,width:"100%",height:"100%",overflowY:"auto"},dropTarget:{width:"100%",height:"100%",minHeight:0},isOver:{"&:after":{content:"''",borderColor:`1px solid ${j.palette.action.selected}`,backgroundColor:j.palette.action.focus,position:"absolute",top:0,right:0,left:0,bottom:0,zIndex:j.zIndex.appBar}}})),H=({tabId:j})=>{const{classes:L,cx:P}=D(),{addPanel:B}=(0,I._B)(),{t:z}=(0,b.$G)("addPanel"),[{isOver:Y},$]=(0,A.L)({accept:S.vv.WINDOW,drop:()=>({tabId:j}),collect:q=>({isOver:q.isOver()})}),ve=(0,l.useCallback)(({type:q,config:Pe,relatedConfigs:ie})=>{const fe=(0,M.nJ)(q);B({tabId:j,id:fe,config:Pe,relatedConfigs:ie})},[B,j]);return(0,d.jsx)("div",{ref:$,"data-testid":"empty-drop-target",className:P(L.dropTarget,{[L.isOver]:Y}),children:(0,d.jsx)("div",{className:L.root,children:(0,d.jsxs)(F.Z,{paddingBottom:2,children:[(0,d.jsxs)(g.Z,{variant:"body2",paddingX:2,paddingTop:2,children:[z("selectPanelToAddToLayout")," ",(0,d.jsx)(v.Z,{color:"primary",target:"_blank",href:"https://foxglove.dev/docs/studio/layouts",children:z("learnMore",{ns:"general"})})]}),(0,d.jsx)(E.B,{mode:"grid",onPanelSelect:ve})]})})})}},29268:(le,C,o)=>{"use strict";o.d(C,{Z:()=>b});var d=o(52322),g=o(68434),v=o(72970),l=o(93812);const A=(0,v.ZL)()(S=>({root:{whiteSpace:"pre-line",code:{color:S.palette.primary.main,background:"transparent",padding:0}}}));function b({children:S,className:n}){const{classes:E,cx:F}=A();return(0,d.jsx)(l.Z,{className:F(E.root,n),flex:"auto",alignItems:"center",justifyContent:"center",fullHeight:!0,paddingX:1,children:(0,d.jsx)(g.Z,{variant:"body2",color:"text.secondary",lineHeight:1.4,align:"center",children:S})})}},38256:(le,C,o)=>{"use strict";o.d(C,{Z:()=>F});var d=o(52322),g=o(38677),v=o(68434),l=o(63249),A=o(2784),b=o(93812),S=o(2661),n=o(53542),E=o(54329);class F extends A.Component{state={currentError:void 0};componentDidCatch(M,D){(0,S.e)(new n.g(M,D)),this.setState({currentError:{error:M,errorInfo:D}})}render(){if(this.state.currentError){const M=this.props.actions??(0,d.jsx)(b.Z,{fullHeight:!0,flex:"auto",alignItems:"flex-end",justifyContent:"flex-end",direction:"row",children:(0,d.jsx)(g.Z,{variant:"outlined",color:"secondary",onClick:()=>{this.setState({currentError:void 0})},children:"Dismiss"})});return(0,d.jsx)(E.Z,{showErrorDetails:this.props.showErrorDetails,hideErrorSourceLocations:this.props.hideErrorSourceLocations,error:this.state.currentError.error,errorInfo:this.state.currentError.errorInfo,content:(0,d.jsxs)(v.Z,{children:["Something went wrong."," ",(0,d.jsx)(l.Z,{color:"inherit",onClick:()=>{this.setState({currentError:void 0})},children:"Dismiss this error"})," ","to continue using the app. If the issue persists, try restarting the app."]}),actions:M})}return this.props.children}}},54329:(le,C,o)=>{"use strict";o.d(C,{Z:()=>M});var d=o(52322),g=o(68434),v=o(56961),l=o(63249),A=o(2784),b=o(72970),S=o(93812);const n=(0,b.ZL)()(D=>({grid:{display:"grid",gridTemplateRows:"auto 1fr auto",height:"100%",padding:D.spacing(2),overflowY:"auto"},errorDetailStack:{fontSize:D.typography.body2.fontSize,lineHeight:"1.3em",paddingLeft:D.spacing(2)},errorDetailContainer:{overflowY:"auto",background:D.palette.background.paper,padding:D.spacing(1),minHeight:D.spacing(10)},actions:{flex:"auto",paddingTop:D.spacing(2),textAlign:"right"}}));function E(D){return D.replace(/\s+\(.+\)$/gm,"").replace(/\s+https?:\/\/.+$/gm,"")}function F({stack:D,hideSourceLocations:H}){const{classes:j}=n(),L=(H?E(D):D).trim().replace(/^\s*at /gm,"").split(`
`).map(P=>P.trim());return(0,d.jsx)("pre",{className:j.errorDetailStack,children:L.map((P,B)=>{const z=/^(.+)\s(\(.+$)/.exec(P);return z?(0,d.jsxs)("span",{children:[(0,d.jsxs)("span",{children:[z[1]," "]}),(0,d.jsx)("span",{children:z[2]}),`
`]},B):P+`
`})})}function I(D){const{classes:H}=n(),{error:j,errorInfo:L,hideErrorSourceLocations:P=!1}=D,[B,z]=(0,A.useState)(D.showErrorDetails??!1),Y=(0,A.useMemo)(()=>{if(!B)return null;let $=j?.stack??"";const ve=j?.toString()??"";return $.startsWith(ve)&&($=$.substring(ve.length)),(0,d.jsxs)("div",{children:[(0,d.jsx)(g.Z,{fontWeight:"bold",children:"Error stack:"}),(0,d.jsx)(F,{stack:$,hideSourceLocations:P}),L&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.Z,{fontWeight:"bold",children:"Component stack:"}),(0,d.jsx)(F,{stack:L.componentStack,hideSourceLocations:P})]})]})},[j,L,P,B]);return(0,d.jsxs)("div",{className:H.grid,children:[(0,d.jsxs)(S.Z,{gap:2,paddingBottom:2,children:[(0,d.jsxs)(S.Z,{children:[(0,d.jsx)(g.Z,{variant:"h4",gutterBottom:!0,children:D.title??"The app encountered an unexpected error"}),(0,d.jsx)(g.Z,{variant:"body1",children:D.content})]}),(0,d.jsx)(v.Z,{}),(0,d.jsx)(g.Z,{variant:"subtitle2",component:"code",fontWeight:"bold",children:j?.message}),(0,d.jsxs)(l.Z,{color:"secondary",onClick:()=>{z(!B)},children:[B?"Hide":"Show"," details"]})]}),Y&&(0,d.jsx)("div",{className:H.errorDetailContainer,children:Y}),!Y&&(0,d.jsx)("div",{}),(0,d.jsx)("div",{className:H.actions,children:D.actions})]})}const M=I},16727:(le,C,o)=>{"use strict";o.d(C,{e:()=>A});var d=o(52322),g=o(2784),v=o(72970);const l=(0,v.ZL)()({root:{whiteSpace:"pre"}});function A(b){const{str:S,indices:n,offset:E=0}=b,{classes:F}=l(),I=(0,g.useMemo)(()=>S.split("").map((M,D)=>n.has(D+E)?(0,d.jsx)("mark",{children:M},D):M),[n,E,S]);return(0,d.jsx)("span",{className:F.root,children:I})}},76217:(le,C,o)=>{"use strict";o.d(C,{Z:()=>A});var d=o(52322),g=o(87037),v=o(2784);const l=(0,v.forwardRef)((b,S)=>{const{icon:n,activeIcon:E,color:F,activeColor:I,onMouseLeave:M,onMouseEnter:D,...H}=b,[j,L]=(0,v.useState)(!1),P=(0,v.useCallback)(z=>{D?.(z),b.disabled!==!0&&L(!0)},[D,b.disabled]),B=(0,v.useCallback)(z=>{M?.(z),L(!1)},[M]);return(0,v.useEffect)(()=>{b.disabled===!0&&L(!1)},[b.disabled]),(0,d.jsx)(g.Z,{ref:S,...H,component:"button",onMouseEnter:P,onMouseLeave:B,color:I!=null&&j?I:F,children:E!=null&&j?E:n})});l.displayName="HoverableIconButton";const A=l},47824:(le,C,o)=>{"use strict";o.d(C,{Z:()=>B});var d=o(52322),g=o(85321),v=o(68434),l=o(8739),A=o(76635),b=o(72970),S=o(93812),n=o(77075);const E=z=>typeof z=="string"?z:Object.keys(z).map(Y=>`${Y}: ${z[Y]}`).join(", ");var F=o(2784);const{useState:I,useCallback:M,useRef:D,useLayoutEffect:H,useEffect:j}=F,L=(0,b.ZL)()(z=>({editor:{backgroundColor:"transparent !important",font:"inherit !important",fontFamily:`${n.R.MONOSPACE} !important`,overflow:"auto"},error:{"*":{color:`${z.palette.error.main} !important`}}}));function P({dataTestId:z,dataValidator:Y=()=>{},onChange:$,onError:ve,parse:q,readOnly:Pe=!1,maxHeight:ie,stringify:fe,value:x}){const{classes:R,cx:Q}=L(),[ce,T]=I(""),[Z,ge]=I(""),we=D(""),Be=D(null),[Oe,V]=I(!1),N=M((ae,me)=>{let de,pe;if(ae.trim()==="")de=Array.isArray(x)?[]:{};else try{de=q(ae)}catch(ne){pe=ne.message}if(pe!=null){T(pe);return}T("");const oe=Y(de);if(oe!=null){T(E(oe));return}me&&me(de)},[Y,q,x]);H(()=>{if(!Oe&&x!==we.current){if((0,A.isEqual)(x,we.current))return;let ae="",me;try{ae=fe(x)}catch(de){me=`Error stringifying the new value, using "" as default. ${de.message}`}if(ge(ae),we.current=x,me!=null){T(me);return}N(ae)}},[x,fe,N,Oe]);const ee=M(ae=>{const me=ae.currentTarget.value;Oe||V(!0),ge(me),N(me,$)},[Oe,N,$]);return j(()=>{ve&&ce.length>0&&ve(ce)},[ce,ve]),H(()=>{if(!Oe){const ae=Be.current;ae&&(ae.scrollTop=ae.scrollHeight)}},[Oe,Z]),(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(l.Z,{className:Q(R.editor,{[R.error]:ce.length>0}),readOnly:Pe,"data-testid":z??`validated-input-${JSON.stringify(Z)}`,ref:Be,value:Z,onChange:ee,language:"json",onBlur:()=>{V(!1)},padding:12,style:{maxHeight:ie??300}}),ce.length>0&&(0,d.jsxs)(S.Z,{direction:"row",alignItems:"center",gap:.25,padding:.5,children:[(0,d.jsx)(g.Z,{fontSize:"inherit",color:"error"}),(0,d.jsx)(v.Z,{variant:"caption",color:"error.main",children:ce})]})]})}function B(z){function Y($){return $==='""'?$:JSON.stringify($,void 0,2)??""}return(0,d.jsx)(S.Z,{children:(0,d.jsx)(P,{parse:JSON.parse,stringify:Y,...z,maxHeight:"none"})})}},86451:(le,C,o)=>{"use strict";o.d(C,{Z:()=>l});var d=o(52322),g=o(2784);function v(A,b){if(A&&typeof A[b.key]=="function"){let S=!0;try{S=A[b.key]?.(b)??!0}finally{S&&b.preventDefault()}}}function l(A){const b=(0,g.useRef)(null),S=(0,g.useCallback)(n=>{if(!(n instanceof KeyboardEvent))return;const{target:E,type:F}=n;if(!(E instanceof HTMLInputElement||E instanceof HTMLTextAreaElement||E instanceof HTMLElement&&E.isContentEditable))switch(F){case"keydown":v(A.keyDownHandlers,n);break;case"keypress":v(A.keyPressHandlers,n);break;case"keyup":v(A.keyUpHandlers,n);break;default:break}},[A.keyDownHandlers,A.keyPressHandlers,A.keyUpHandlers]);return(0,g.useEffect)(()=>{const n=A.global===!0?document:b.current?.parentElement;return n?.addEventListener("keydown",S),n?.addEventListener("keypress",S),n?.addEventListener("keyup",S),()=>{n?.removeEventListener("keydown",S),n?.removeEventListener("keypress",S),n?.removeEventListener("keyup",S)}},[S,A.global]),(0,d.jsx)("div",{style:{display:"none"},ref:b})}},43684:(le,C,o)=>{"use strict";o.d(C,{ZP:()=>ae});var d=o(52322),g=o(73868),v=o(76635),l=o(2784),A=o(75785),b=o(43749),S=o(47591),n=o(23759),E=o(68234),F=o(80078),I=o(16037),M=o(62515),D=o(72970),H=o(16727),j=o(68434),L=o(8301),P=o(2784);const B=Object.freeze({LISTBOX_PADDING:8,ROW_HEIGHT:26});function z(me){const{data:de,index:pe,style:oe}=me,ne=de[pe],ue={...oe,top:oe.top+B.LISTBOX_PADDING};return(0,d.jsx)(j.Z,{component:"li",noWrap:!0,style:ue,children:ne})}const Y=P.createContext({}),$=P.forwardRef((me,de)=>{const pe=P.useContext(Y);return(0,d.jsx)("div",{ref:de,...me,...pe})});$.displayName="OuterElement";const ve=P.forwardRef(function(de,pe){const{children:oe,...ne}=de,ue=[];oe.forEach(he=>{ue.push(he),ue.push(...he.children??[])});const X=2*B.LISTBOX_PADDING+B.ROW_HEIGHT*(0,v.clamp)(ue.length,16);return(0,d.jsx)("div",{ref:pe,children:(0,d.jsx)(Y.Provider,{value:ne,children:(0,d.jsx)(L.t7,{height:X,itemCount:ue.length,itemData:ue,itemSize:B.ROW_HEIGHT,outerElementType:$,width:"100%",children:z})})})}),q=200,Pe=1e3,ie=(0,D.ZL)()(me=>({root:{".MuiInputBase-root.MuiInputBase-sizeSmall":{backgroundColor:"transparent",paddingInline:0,"&:focus-within":{backgroundColor:me.palette.mode==="dark"?"rgba(255, 255, 255, 0.09)":"rgba(0, 0, 0, 0.06)"},"&:hover, &:focus-within":{paddingRight:me.spacing(2.5)}}},clearIndicator:{marginRight:me.spacing(-.25),opacity:me.palette.action.disabledOpacity,":hover":{background:"transparent",opacity:1}},inputError:{input:{color:me.palette.error.main}},item:{padding:6,cursor:"pointer",minHeight:"100%",lineHeight:"calc(100% - 10px)",overflowWrap:"break-word",color:me.palette.text.primary,mark:{backgroundColor:"transparent",color:me.palette.info.main,fontWeight:700}},itemSelected:{backgroundColor:(0,S.Fq)(me.palette.primary.main,me.palette.action.selectedOpacity+me.palette.action.hoverOpacity)},itemHighlighted:{backgroundColor:me.palette.action.hover}}));function fe(me){return function(de){if(typeof de=="string")return de;if(de!=null&&typeof de=="object"&&typeof de.value=="string")return de.value;throw new Error(`you need to provide an implementation of ${me}`)}}const x=new Set;function R(me){return{item:me,score:0,positions:x,start:0,end:0}}const Q=l.forwardRef(function(de,pe){const oe=(0,l.useRef)(null),{classes:ne,cx:ue}=ie(),[X,he]=(0,l.useState)(void 0),Ee=(0,l.useMemo)(()=>de.getItemText??fe("getItemText"),[de.getItemText]),ze=(0,l.useMemo)(()=>de.getItemValue??fe("getItemValue"),[de.getItemValue]),{selectedItem:be,value:Se=X??(be?Ee(be):void 0),disabled:Te,filterText:Re=Se??"",items:Ie,onBlur:Ce,onChange:De,onSelect:Ue,placeholder:Ke,readOnly:je,selectOnFocus:Ye,sortWhenFiltering:st=!0}=de,Ze=(0,l.useMemo)(()=>Ie.map(nt=>R(nt)),[Ie]),Ve=(0,l.useMemo)(()=>new I.Av(Ie,{fuzzy:Ie.length>Pe?"v1":"v2",sort:st,limit:q,selector:Ee}),[Ee,Ie,st]),lt=(0,l.useMemo)(()=>Re?Ve.find(Re):Ze,[Re,Ve,Ze]),Ne=Boolean(de.hasError??(lt.length===0&&Se?.length)),Je=be!=null?ze(be):void 0,We=(0,l.useCallback)((nt,_e)=>{oe.current?.focus(),oe.current?.setSelectionRange(nt,_e)},[]),dt=(0,l.useCallback)(()=>{oe.current?.focus()},[]),vt=(0,l.useCallback)(()=>{oe.current?.blur(),Ce?.()},[Ce]);(0,l.useImperativeHandle)(pe,()=>({setSelectionRange:We,focus:dt,blur:vt}),[We,dt,vt]);const Bt=(0,l.useCallback)((nt,_e)=>{De?nt&&De(nt,_e):he(_e)},[De]),ct=(0,l.useCallback)((nt,_e)=>{_e!=null&&typeof _e!="string"&&(he(void 0),Ue(_e.item,{setSelectionRange:We,focus:dt,blur:vt}))},[Ue,vt,dt,We]);(0,M.NB)({handleHeight:!1,onResize:()=>oe.current?.blur(),refreshMode:"debounce",refreshRate:0,skipOnMount:!0,targetRef:oe});const Le=(0,l.useCallback)(nt=>nt,[]);return(0,d.jsx)(n.Z,{className:ne.root,clearIcon:(0,d.jsx)(b.Z,{fontSize:"small"}),componentsProps:{paper:{elevation:8},clearIndicator:{size:"small",className:ne.clearIndicator}},disableCloseOnSelect:!0,disabled:Te,freeSolo:!0,fullWidth:!0,getOptionLabel:nt=>typeof nt=="string"?nt:ze(nt.item),filterOptions:Le,ListboxComponent:ve,onChange:ct,onInputChange:Bt,openOnFocus:!0,options:lt,readOnly:je,renderInput:nt=>(0,d.jsx)(E.Z,{...nt,variant:"filled",inputRef:oe,"data-testid":"autocomplete-textfield",placeholder:Ke,className:ue({[ne.inputError]:Ne}),size:"small"}),renderOption:(nt,_e,{selected:U})=>{const ot=ze(_e.item);return(0,l.createElement)(F.Z,{dense:!0,...nt,key:ot,component:"span","data-highlighted":U,"data-testid":"autocomplete-item",className:ue(ne.item,{[ne.itemHighlighted]:U,[ne.itemSelected]:Je!=null&&ot===Je})},(0,d.jsx)(H.e,{str:Ee(_e.item),indices:_e.positions}))},selectOnFocus:Ye,size:"small",value:Se??null})});var ce=o(36423),T=o(21337),Z=o(1012),ge=o(2784),we=o(67649).Z;function Be(me,de){const pe=new Map;for(const oe of me)oe.schemaName!=null&&Oe((0,Z.dH)(oe.name),oe.schemaName,de,[],pe);return pe}function Oe(me,de,pe,oe,ne){const ue=pe.get(de);if(ue){for(const X of ue.definitions)if(!oe.includes(X.type)&&X.isConstant!==!0){const he=`${me}.${(0,Z.UY)(X.name)}`;ne.set(he,X),X.isComplex===!0&&Oe(he,X.type,pe,[...oe,X.type],ne)}}}function V(me,de){const oe=new Map().get(me);return oe?(de({[me]:oe}),!0):!1}function N(me,de,pe){const{messagePath:oe}=me,ne=Object.keys(de);return(0,v.flatMap)(oe,ue=>{const X=[];if(ue.type==="filter"&&typeof ue.value=="object"&&!ne.includes(ue.value.variableName)){const[he,Ee]=[ue.value.variableName,ue.valueLoc];X.push({variableName:he,loc:Ee})}else if(ue.type==="slice"){if(typeof ue.start=="object"&&!ne.includes(ue.start.variableName)){const[he,Ee]=[ue.start.variableName,ue.start.startLoc];X.push({variableName:he,loc:Ee})}if(typeof ue.end=="object"&&!ne.includes(ue.end.variableName)){const[he,Ee]=[ue.end.variableName,ue.end.startLoc];X.push({variableName:he,loc:Ee})}}return X}).filter(({variableName:ue})=>!V(ue,pe))[0]}function ee(me){switch(me){case"string":return'""';case"bool":return"true";case"float32":case"float64":case"uint8":case"uint16":case"uint32":case"uint64":case"int8":case"int16":case"int32":case"int64":return"0"}}const ae=ge.memo(function(de){const{globalVariables:pe,setGlobalVariables:oe}=(0,ce.Z)(),{datatypes:ne,topics:ue}=A.Ui(),{supportsMathModifiers:X,path:he,prioritizedDatatype:Ee,validTypes:ze,autoSize:be,placeholder:Se,noMultiSlices:Te,inputStyle:Re,disableAutocomplete:Ie=!1}=de,Ce=(0,l.useMemo)(()=>Be(ue,ne),[ne,ue]),De=de.onChange,Ue=(0,l.useCallback)((U,ot)=>{let He=ot;if(U.nativeEvent.data==="{"){const ut=U.target,Pt=ut.selectionEnd??0;He=`${He.slice(0,Pt)}}${He.slice(Pt)}`,we(()=>{ut.setSelectionRange(Pt,Pt)})}De(He,de.index)},[De,de.index]),Ke=(0,l.useCallback)((U,ot,He,ut)=>{const Pt=he.slice(0,ut.start),xe=he.slice(ut.end),Gt=Pt+U+xe,Zt=Ce.get(Gt),pt=Zt!=null&&Zt.isComplex!==!0,qe=ze==null||ze.includes("message"),at=He==="topicName"&&!qe&&!pt,it=at?U+".":U;if(De(Pt+it+xe,de.index),at||it.includes("{")||he.includes("{")){const Lt=ut.start+it.length;we(()=>{ot.setSelectionRange(Lt,Lt)})}else ot.blur()},[De,he,de.index,Ce,ze]),je=(0,l.useMemo)(()=>(0,Z.ZP)(he),[he]),Ye=(0,l.useMemo)(()=>{if(!je)return;const{topicName:U}=je;return ue.find(({name:ot})=>ot===U)},[je,ue]),st=(0,l.useMemo)(()=>(0,T.pb)(ne),[ne]),Ze=(0,l.useMemo)(()=>{if(!(!Ye||!je?.messagePath))return Ye.schemaName==null?{valid:!0,msgPathPart:void 0,structureItem:{structureType:"message",nextByName:{},datatype:""}}:(0,T.eT)(st[Ye.schemaName],je.messagePath)},[st,je?.messagePath,Ye]),Ve=(0,l.useMemo)(()=>{if(je)return N(je,pe,oe)},[pe,je,oe]),lt=(0,l.useMemo)(()=>ue.map(({name:U})=>(0,Z.dH)(U)),[ue]),Ne=(0,l.useMemo)(()=>lt.concat(Array.from(Ce.keys())),[Ce,lt]),Je=(0,l.useMemo)(()=>{if(je)if(Ye){if(Ze==null||!Ze.valid||!(0,T.Ky)(Ze.structureItem,ze))return"messagePath"}else return"topicName";else return"topicName";if(Ve)return"globalVariables"},[Ve,Ze,ze,je,Ye]),We=(0,l.useMemo)(()=>(0,T.pb)(ne),[ne]),{autocompleteItems:dt,autocompleteFilterText:vt,autocompleteRange:Bt}=(0,l.useMemo)(()=>{if(Ie)return{autocompleteItems:[],autocompleteFilterText:"",autocompleteRange:{start:0,end:1/0}};if(Je==="topicName")return{autocompleteItems:he?Ne:lt,autocompleteFilterText:he,autocompleteRange:{start:0,end:1/0}};if(Je==="messagePath"&&Ye&&je)if(Ze&&!Ze.valid&&Ze.msgPathPart?.type==="filter"&&Ze.structureItem?.structureType==="message"){const{msgPathPart:U}=Ze,ot=[];for(const ut of Object.keys(Ze.structureItem.nextByName)){const Pt=Ze.structureItem.nextByName[ut];Pt?.structureType==="primitive"&&ot.push(`${ut}==${ee(Pt.primitiveType)}`)}const He=U.path.join(".");return{autocompleteItems:ot,autocompleteFilterText:He,autocompleteRange:{start:U.nameLoc,end:U.nameLoc+He.length}}}else{const U=je.messagePath[0]?.type==="filter"?je.messagePath[0].repr.length+2:0,ot=Ye.schemaName!=null?We[Ye.schemaName]:void 0;return{autocompleteItems:ot==null?[]:(0,T.wQ)(ot,{validTypes:ze,noMultiSlices:Te,messagePath:je.messagePath}).filter(He=>He!==""&&!He.endsWith(".header.seq")),autocompleteRange:{start:je.topicNameRepr.length+U,end:1/0},autocompleteFilterText:he.substring(je.topicNameRepr.length).replace(/\{[^}]*\}/g,"")}}else if(Ve)return{autocompleteItems:Object.keys(pe).map(U=>`$${U}`),autocompleteRange:{start:Ve.loc,end:Ve.loc+Ve.variableName.length+1},autocompleteFilterText:Ve.variableName};return{autocompleteItems:[],autocompleteFilterText:"",autocompleteRange:{start:0,end:1/0}}},[Ie,Je,Ye,je,Ve,he,Ne,lt,Ze,We,ze,Te,pe]),ct=(0,l.useMemo)(()=>(0,v.keyBy)(ue,({name:U})=>U),[ue]),Le=(0,l.useMemo)(()=>Ee==null?dt:(0,v.flatten)((0,v.partition)(dt,U=>ct[U]?.schemaName===Ee)),[dt,Ee,ct]),_e=(X==null||!X)&&he.includes(".@")||Je!=null&&!Ie&&he.length>0;return(0,d.jsx)(g.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",flexGrow:1,flexShrink:0,spacing:.25,children:(0,d.jsx)(Q,{items:Le,disabled:de.disabled,readOnly:de.readOnly,filterText:vt,value:he,onChange:Ue,onSelect:(U,ot)=>{Ke(U,ot,Je,Bt)},hasError:_e,placeholder:Se!=null&&Se!==""?Se:"/some/topic.msgs[0].field",autoSize:be,inputStyle:Re,disableAutoSelect:!0})})})},57733:(le,C,o)=>{"use strict";o.d(C,{N:()=>g});const g=Object.keys({bool:void 0,int8:void 0,uint8:void 0,int16:void 0,uint16:void 0,int32:void 0,uint32:void 0,int64:void 0,uint64:void 0,float32:void 0,float64:void 0,string:void 0})},60351:(le,C,o)=>{"use strict";o.d(C,{H:()=>d,Q:()=>v});const d=["id","_id","ID","Id","key"],g=/^id$|_id$|I[dD]$|^key$/;function v(l){return g.test(l)}},21337:(le,C,o)=>{"use strict";o.d(C,{Ky:()=>M,eT:()=>H,pb:()=>I,wQ:()=>D});var d=o(76635),g=o.n(d),v=o(60351),l=o(1012),A=o(10363),b=o(83352),S=o(57733);const n=["int8","uint8","int16","uint16","int32","uint32","int64","uint64"];function E(j){return S.N.includes(j)}function F(j){return j.structureType==="primitive"&&n.includes(j.primitiveType)}function I(j){const L=(0,d.memoize)((B,z)=>{const Y={},$=j.get(B);if(!$){if(B==="time"||B==="duration")return{structureType:"message",nextByName:{sec:{structureType:"primitive",primitiveType:"uint32",datatype:""},nsec:{structureType:"primitive",primitiveType:"uint32",datatype:""}},datatype:B};throw new Error(`datatype not found: "${B}"`)}for(const ve of $.definitions){if(ve.isConstant===!0||z.includes(ve.type))continue;const q=E(ve.type)?{structureType:"primitive",primitiveType:ve.type,datatype:B}:L(ve.type,[...z,ve.type]);ve.isArray===!0?Y[ve.name]={structureType:"array",next:q,datatype:B}:Y[ve.name]=q}return{structureType:"message",nextByName:Y,datatype:B}}),P={};for(const[B]of j)P[B]=L(B,[]);return P}function M(j,L){return!!j&&(!L||L.includes(j.structureType)||L.includes(j.datatype)||j.structureType==="primitive"&&L.includes(j.primitiveType))}function D(j,{validTypes:L,noMultiSlices:P,messagePath:B=[]}={}){let z=[...B];const Y=[];function $(ve,q){if(M(ve,L)&&Y.push(q),ve.structureType==="message")for(const[Pe,ie]of Object.entries(ve.nextByName))$(ie,`${q}.${(0,l.UY)(Pe)}`);else if(ve.structureType==="array")if(ve.next.structureType==="message"){const Pe=Object.entries(ve.next.nextByName).find(([ie])=>(0,v.Q)(ie));if(Pe){const[ie,fe]=Pe,x=z.find(R=>R.type==="filter"&&R.path[0]===ie);x?(z=z.filter(R=>R!==x),$(ve.next,`${q}[:]{${ie}==${typeof x.value=="object"?`$${x.value.variableName}`:x.value}}`)):F(fe)?$(ve.next,`${q}[:]{${ie}==0}`):$(ve.next,`${q}[0]`)}else $(ve.next,`${q}[0]`)}else P!==!0?$(ve.next,`${q}[:]`):$(ve.next,`${q}[0]`)}return $(j,""),Y.sort((0,b.Z)())}const H=(j,L)=>{let P=j;if(!P)return{valid:!1,msgPathPart:void 0,structureItem:void 0};for(const B of L){if(!P)return{valid:!1,msgPathPart:B,structureItem:P};if(B.type==="name"){if(P.structureType!=="message")return{valid:!1,msgPathPart:B,structureItem:P};P=P.nextByName[B.name]}else if(B.type==="slice"){if(P.structureType!=="array")return{valid:!1,msgPathPart:B,structureItem:P};P=P.next}else if(B.type==="filter"){if(P.structureType!=="message"||B.path.length===0||B.value==null)return{valid:!1,msgPathPart:B,structureItem:P};let z=P;for(const Y of B.path){if(z.structureType!=="message")return{valid:!1,msgPathPart:B,structureItem:P};if(z=z.nextByName[Y],z==null)return{valid:!1,msgPathPart:B,structureItem:P}}}else(0,A.v)(B,`Invalid msgPathPart.type: ${B.type}`)}return{valid:!0,msgPathPart:void 0,structureItem:P}}},1012:(le,C,o)=>{"use strict";o.d(C,{UY:()=>E,ZP:()=>I,dH:()=>n});var d=o(76635),g=o.n(d),v=o(43614),l=o.n(v),A=o(72278),b=o.n(A);const S=v.Grammar.fromCompiled(b());function n(M){return M.match(/^[a-zA-Z0-9_/-]+$/)?M:`"${M.replace(/[\\"]/g,D=>`\\${D}`)}"`}function E(M){return M.match(/^[a-zA-Z0-9_-]+$/)?M:`"${M.replace(/[\\"]/g,D=>`\\${D}`)}"`}const I=(0,d.memoize)(M=>{const D=new v.Parser(S);try{return D.feed(M).results[0]}catch{return}})},45587:(le,C,o)=>{"use strict";var d="../../packages/studio-base/src/components/MessagePipeline/MessageOrderTracker.ts";o.d(C,{Z:()=>F});var g=o(23503),v=o(44668),l=o.n(v),A=o(27999);const b=1,S=1,n=g.ZP.getLogger(d);class E{#e=[];#t;#n;#s;#i;#o;#a=!1;#c=[];update(M){if(!M.activeData)return[];const D=[],{messages:H,currentTime:j,lastSeekTime:L}=M.activeData;let P=!1;if(this.#i!==L&&(this.#i=L,this.#o&&(clearTimeout(this.#o),this.#o=void 0,this.#c=[]),this.#o=this.#n=this.#t=void 0,this.#e=[],P=!0),this.#e!==H||this.#t!==j){this.#e=H,this.#t=j;for(const B of H){const z=B.receiveTime;if(P||Math.abs((0,v.toSec)((0,v.subtract)(z,j)))>b&&(this.#a&&this.#c.push(B),this.#o||(this.#o=setTimeout(()=>{this.#o=void 0;const $={currentTime:j,lastSeekTime:L,messageTime:z,incorrectMessages:this.#a?this.#c:"not being tracked"};this.#c=[],n.warn("Message receiveTime very different from player.currentTime; without updating lastSeekTime",$)},S*1e3))),this.#n&&this.#s!=null&&(0,v.isLessThan)(z,this.#n)){const Y=(0,A.AB)(z),$=(0,A.AB)(this.#n),ve=`Processed a message on ${B.topic} at ${Y} which is earlier than last processed message on ${this.#s} at ${$}.`;D.push({severity:"warn",message:"Data went back in time",error:new Error(ve)})}this.#s=B.topic,this.#n=z}}return D}}const F=E},85026:(le,C,o)=>{"use strict";o.d(C,{An:()=>H,D2:()=>P,m7:()=>D});var d=o(52322),g=o(76635),v=o.n(g),l=o(2784),A=o(12294),b=o(75845),S=o(93455),n=o(27803),E=o(45587),F=o(80439),I=o(79210);const M=(0,l.createContext)(void 0);function D(){const Y=(0,b.qe)(M);return(0,l.useCallback)(()=>Y.getState().public,[Y])}function H(Y){const $=(0,b.qe)(M);return(0,A.oR)($,(0,l.useCallback)(ve=>Y(ve.public),[Y]))}const j=Y=>Y.renderDone,L=Y=>Y.public.subscriptions;function P({children:Y,player:$,globalVariables:ve}){const q=(0,l.useRef)([]),Pe=(0,l.useMemo)(()=>(0,I.eg)({promisesToWaitForRef:q,initialPlayer:$}),[$]),ie=(0,A.oR)(Pe,L),fe=(0,l.useMemo)(()=>(0,g.debounce)(ce=>{$?.setSubscriptions(ce)}),[$]);(0,l.useEffect)(()=>()=>{fe.cancel()},[fe]),(0,l.useEffect)(()=>fe(ie),[fe,ie]);const[x]=(0,n.b)(S.o.MESSAGE_RATE),R=(0,A.oR)(Pe,j);(0,l.useLayoutEffect)(()=>{R?.()},[R]);const Q=(0,l.useRef)(16);return Q.current=1e3/(x??60),(0,l.useEffect)(()=>{const ce=Pe.getState().dispatch;if(!$){ce({type:"update-player-state",playerState:(0,I.H2)(),renderDone:void 0});return}const{listener:T,cleanupListener:Z}=z({msPerFrameRef:Q,promisesToWaitForRef:q,store:Pe});return $.setListener(T),()=>{Z(),$.close(),ce({type:"update-player-state",playerState:(0,I.H2)(),renderDone:void 0})}},[$,Pe]),(0,l.useEffect)(()=>{$?.setGlobalVariables(ve)},[$,ve]),(0,d.jsx)(M.Provider,{value:Pe,children:Y})}function B(Y,$){return $.length===0?Y:{...Y,problems:$.concat(Y.problems??[])}}function z(Y){const{msPerFrameRef:$,promisesToWaitForRef:ve,store:q}=Y,Pe=q.getState().dispatch,ie=new E.Z;let fe=!1,x,R;return{listener:async ce=>{if(fe)return;if(R)throw new Error("New playerState was emitted before last playerState was rendered.");const T=ie.update(ce),Z=B(ce,T),ge=new Promise(V=>{R=()=>{R=void 0,V()}}),we=Date.now();let Be=!1;function Oe(){if(Be)return;Be=!0;const V=Date.now()-we,N=Math.max(0,$.current-V);setTimeout(async()=>{if(fe)return;const ee=ve.current;ee.length>0&&(ve.current=[],await(0,F._)(ee)),R&&R()},N)}x!=null&&ce.playerId!==x&&q.getState().reset(),x=ce.playerId,Pe({type:"update-player-state",playerState:Z,renderDone:Oe}),await ge},cleanupListener(){fe=!0,R=void 0}}}},80439:(le,C,o)=>{"use strict";o.d(C,{_:()=>l});var d=o(69363),g=o(42146);const v=5e3;async function l(A){try{await(0,d.nK)(Promise.all(A.map(async({promise:b})=>{await b})),v)}catch(b){if(!(b instanceof d.mN)){(0,g.ZP)("Player ",b,"app","error");return}}}},79210:(le,C,o)=>{"use strict";o.d(C,{H2:()=>I,eg:()=>M});var d=o(76635),g=o.n(d),v=o(88665),l=o.n(v),A=o(42893),b=o(69363),S=o(85266),n=o(24304),E=o(10363),F=o(61969);function I(){return{presence:n.m.NOT_PRESENT,progress:{},capabilities:[],profile:void 0,playerId:"",activeData:void 0}}function M({promisesToWaitForRef:L,initialPlayer:P}){return(0,A.M)((B,z)=>({player:P,publishersById:{},allPublishers:[],subscriptionMemoizer:(0,S.l)(),subscriptionsById:new Map,subscriberIdsByTopic:new Map,newTopicsBySubscriberId:new Map,lastMessageEventByTopic:new Map,lastCapabilities:[],dispatch(Y){B($=>j($,Y))},reset(){B(Y=>({...Y,publishersById:{},allPublishers:[],subscriptionMemoizer:(0,S.l)(),subscriptionsById:new Map,subscriberIdsByTopic:new Map,newTopicsBySubscriberId:new Map,lastMessageEventByTopic:new Map,lastCapabilities:[],public:{...Y.public,playerState:I(),messageEventsBySubscriberId:new Map,subscriptions:[],sortedTopics:[],datatypes:new Map,startPlayback:void 0,playUntil:void 0,pausePlayback:void 0,setPlaybackSpeed:void 0,seekPlayback:void 0}}))},public:{playerState:I(),messageEventsBySubscriberId:new Map,subscriptions:[],sortedTopics:[],datatypes:new Map,setSubscriptions(Y,$){z().dispatch({type:"update-subscriber",id:Y,payloads:$})},setPublishers(Y,$){z().dispatch({type:"set-publishers",id:Y,payloads:$}),z().player?.setPublishers(z().allPublishers)},setParameter(Y,$){z().player?.setParameter(Y,$)},publish(Y){z().player?.publish(Y)},async callService(Y,$){const ve=z().player;if(!ve)throw new Error("callService called when player is not present");return await ve.callService(Y,$)},async fetchAsset(Y,$){const{protocol:ve}=new URL(Y),q=z().player;if(q?.fetchAsset&&ve==="package:")try{return await q.fetchAsset(Y)}catch(ie){if(!(0,F.Z)())throw ie}const Pe=await fetch(Y,$);if(!Pe.ok){const ie=Pe.statusText;throw new Error(`Error ${Pe.status}${ie?` (${ie})`:""}`)}return{uri:Y,data:new Uint8Array(await Pe.arrayBuffer()),mediaType:Pe.headers.get("content-type")??void 0}},startPlayback:void 0,playUntil:void 0,pausePlayback:void 0,setPlaybackSpeed:void 0,seekPlayback:void 0,pauseFrame(Y){const $=new b.fQ;return L.current.push({name:Y,promise:$.wait()}),()=>{$.notifyAll()}}}}))}function D(L,P){const B=L.subscriptionsById,z=new Map(L.newTopicsBySubscriberId),Y=z.get(P.id);if(Y){const Pe=B.get(P.id),ie=new Set(Pe?.map(fe=>fe.topic)??[]);for(const{topic:fe}of P.payloads)ie.has(fe)||Y.add(fe)}else{const Pe=P.payloads.map(ie=>ie.topic);z.set(P.id,new Set(Pe))}const $=new Map(B);P.payloads.length===0?$.delete(P.id):$.set(P.id,P.payloads);const ve=new Map;for(const[Pe,ie]of $)for(const fe of ie){const x=fe.topic,R=ve.get(x)??[];R.push(Pe),ve.set(x,R)}const q=(0,S.I)(Array.from($.values()).flat());return{...L,subscriptionsById:$,subscriberIdsByTopic:ve,newTopicsBySubscriberId:z,public:{...L.public,subscriptions:q}}}function H(L,P){const B=P.playerState.activeData?.messages,z=new Set,Y=new Map,$=L.subscriptionsById,ve=L.subscriberIdsByTopic,q=L.lastMessageEventByTopic,Pe=new Map(L.newTopicsBySubscriberId);if(B&&B!==L.public.playerState.activeData?.messages)for(const Q of B){q.set(Q.topic,Q),z.add(Q.topic);const ce=ve.get(Q.topic);if(ce)for(const T of ce){let Z=Y.get(T);Z||(Z=[],Y.set(T,Z)),Z.push(Q)}}for(const Q of $.keys()){const ce=Pe.get(Q);if(ce){for(const T of ce){if(z.has(T))continue;const Z=q.get(T);if(Z){const ge=Y.get(Q)??[];ge.unshift(Z),Y.set(Q,ge)}}ce.clear()}}const ie={...L.public,playerState:P.playerState,messageEventsBySubscriberId:Y},fe=P.playerState.activeData?.topics;fe!==L.public.playerState.activeData?.topics&&(ie.sortedTopics=fe?[...fe].sort((Q,ce)=>Q.name.localeCompare(ce.name)):[]),P.playerState.activeData?.datatypes!==L.public.playerState.activeData?.datatypes&&(ie.datatypes=P.playerState.activeData?.datatypes??new Map);const x=P.playerState.capabilities,R=L.player;return R&&!l()(x,L.lastCapabilities)&&(ie.startPlayback=x.includes(n.C.playbackControl)?R.startPlayback?.bind(R):void 0,ie.playUntil=x.includes(n.C.playbackControl)?R.playUntil?.bind(R):void 0,ie.pausePlayback=x.includes(n.C.playbackControl)?R.pausePlayback?.bind(R):void 0,ie.setPlaybackSpeed=x.includes(n.C.setSpeed)?R.setPlaybackSpeed?.bind(R):void 0,ie.seekPlayback=x.includes(n.C.playbackControl)?R.seekPlayback?.bind(R):void 0),{...L,newTopicsBySubscriberId:Pe,renderDone:P.renderDone,public:ie,lastCapabilities:x,lastMessageEventByTopic:q}}function j(L,P){switch(P.type){case"update-player-state":return H(L,P);case"update-subscriber":return D(L,P);case"set-publishers":{const B={...L.publishersById,[P.id]:P.payloads};return{...L,publishersById:B,allPublishers:(0,d.flatten)(Object.values(B))}}}(0,E.v)(P,`Unhandled message pipeline action type ${P.type}`)}},85266:(le,C,o)=>{"use strict";o.d(C,{I:()=>S,l:()=>b});var d=o(76635),g=o.n(d),v=o(10973),l=o.n(v),A=o(8220);function b(){return l()(n=>n,{isDeepEqual:!0,maxSize:1/0})}function S(n){const E=new Map,F=new Map;for(const I of n){const M=I.preloadType==="full"?E:F,D=M.get(I.topic);if(D){if(D.fields!=null)if(I.fields==null)M.set(I.topic,I);else{const H=(0,A.Z)(I.fields,j=>{const L=j.trim();return L.length>0?L:void 0});H.length>0&&M.set(I.topic,{...I,fields:(0,d.union)(D.fields,H)})}}else(I.fields==null||I.fields.some(j=>j.trim().length>0))&&M.set(I.topic,I)}return[...E.values(),...F.values()]}},93723:(le,C,o)=>{"use strict";o.d(C,{x:()=>g});var d=o(2784);const g=(0,d.createContext)(void 0)},75017:(le,C,o)=>{"use strict";o.d(C,{Z:()=>pe});var d=o(52322),g=o(3896),v=o(75988),l=o(24957),A=o(76635),b=o(2784),S=o(28219),n=o(17568),E=o(87438),F=o(72970),I=o(75845),M=o(75785),D=o(86451),H=o(93723),j=o(82044),L=o(63249),P=o(38677),B=o(93812),z=o(2661),Y=o(53542),$=o(54329);class ve extends b.Component{state={currentError:void 0};componentDidCatch(ne,ue){(0,z.e)(new Y.g(ne,ue)),this.setState({currentError:{error:ne,errorInfo:ue}})}render(){return this.state.currentError?(0,d.jsx)($.Z,{title:"This panel encountered an unexpected error",error:this.state.currentError.error,errorInfo:this.state.currentError.errorInfo,showErrorDetails:this.props.showErrorDetails,hideErrorSourceLocations:this.props.hideErrorSourceLocations,content:(0,d.jsxs)("p",{children:["Something went wrong in this panel."," ",(0,d.jsx)(L.Z,{color:"inherit",onClick:()=>{this.setState({currentError:void 0})},children:"Dismiss this error"})," ","to continue using this panel. If the issue persists, try resetting the panel."]}),actions:(0,d.jsx)(d.Fragment,{children:(0,d.jsxs)(B.Z,{direction:"row-reverse",gap:1,children:[(0,d.jsx)(P.Z,{variant:"outlined",color:"secondary",onClick:()=>{this.setState({currentError:void 0})},children:"Dismiss"}),(0,d.jsx)(P.Z,{variant:"outlined",title:"Reset panel settings to default values",color:"error",onClick:()=>{this.setState({currentError:void 0}),this.props.onResetPanel()},children:"Reset Panel"}),(0,d.jsx)(P.Z,{variant:"text",title:"Remove this panel from the layout",color:"error",onClick:this.props.onRemovePanel,children:"Remove Panel"})]})})}):this.props.children}}var q=o(58997),Pe=o(99118),ie=o(96242),fe=o(53748),x=o(72283),R=o(1547),Q=o(84877),ce=o(76479);const T=(0,F.ZL)()((oe,ne,ue)=>{const X=(0,R.Z)(oe.palette.background.default).setAlpha(0).toRgbString(),he=(0,R.Z)(oe.palette.background.default).setAlpha(1-oe.palette.action.disabledOpacity).toRgbString(),Ee=(0,R.Z)(oe.palette.primary.main).setAlpha(oe.palette.action.hoverOpacity).toRgbString();return{backdrop:{position:"absolute",zIndex:oe.zIndex.modal-1,padding:oe.spacing(2),container:"backdrop / size",backgroundColor:X},invalidTarget:{backgroundColor:he},validTarget:{alignItems:"flex-end",backgroundColor:Ee},selected:{backgroundImage:`linear-gradient(to bottom, ${Ee}, ${Ee})`,backgroundColor:he},highlightActive:{[`.${Q.D}:not(:hover) &`]:{visibility:"hidden"}},highlightAll:{[`.${Q.D}:not(:hover) &`]:{[`.${ue.buttonGroup}`]:{visibility:"hidden"}}},buttonGroup:{display:"flex",flexDirection:"column",justifyContent:"center",gap:oe.spacing(1),"@container backdrop (max-height: 80px)":{flexDirection:"row"},"@container backdrop (min-height: 120px)":{marginTop:ce.B},"@container backdrop (min-width: 240px)":{flexDirection:"row"}},buttonPaper:{flex:"0 0 50%",minWidth:"50%"},button:{display:"flex",flexDirection:"column",justifyContent:"center",whiteSpace:"nowrap",textAlign:"left",[`.${q.Z.startIcon}`]:{position:"relative",margin:0,svg:{height:"1em",width:"1em",fontSize:32}}},buttonText:{"@container backdrop (max-width: 120px)":{display:"none"},"@container backdrop (max-height: 80px)":{display:"none"}},chip:{boxShadow:oe.shadows[2],paddingInline:oe.spacing(2)}}}),Z=(0,b.forwardRef)(function(ne,ue){const{actions:X,variant:he,highlightMode:Ee,dropMessage:ze,open:be,onClickAway:Se}=ne,{classes:Te,cx:Re}=T();return(0,d.jsx)(Pe.d,{onClickAway:Se||A.noop,children:(0,d.jsx)(ie.Z,{transitionDuration:0,unmountOnExit:!0,ref:ue,open:be,className:Re(Te.backdrop,{[Te.invalidTarget]:he==="invalidDropTarget",[Te.validTarget]:he==="validDropTarget",[Te.selected]:he==="selected",[Te.highlightActive]:Ee==="active",[Te.highlightAll]:Ee==="all"}),children:ze&&he==="validDropTarget"?(0,d.jsx)(fe.Z,{size:"small",color:"primary",label:ze,className:Te.chip}):X&&(0,d.jsx)("div",{className:Te.buttonGroup,children:X.map(Ie=>(0,d.jsx)(x.Z,{elevation:0,className:Te.buttonPaper,children:(0,d.jsx)(P.Z,{fullWidth:!0,variant:"outlined",className:Te.button,onClick:Ie.onClick,startIcon:Ie.icon,color:Ie.color,children:(0,d.jsx)("div",{className:Te.buttonText,children:Ie.text})})},Ie.key))})})})});var ge=o(98043),we=o(48105),Be=o(54490),Oe=o(42689);function V(oe){const{tabId:ne,panelId:ue,onDragStart:X,onDragEnd:he}=oe,{mosaicWindowActions:Ee}=(0,b.useContext)(S.Jy),ze=(0,ge.Sr)(),{getCurrentLayoutState:be,startDrag:Se,endDrag:Te}=(0,ge._B)(),[,Re,Ie]=(0,Oe.c)({type:S.vv.WINDOW,item:()=>{X&&X();const{selectedLayout:Ce}=be();if(!Ce?.data)return null;const{layout:De,configById:Ue}=Ce.data,Ke=Ee.getPath(),je=(0,A.defer)(()=>{Se({path:Ke,sourceTabId:ne})});return{mosaicId:ze,deferredHide:je,originalLayout:De,originalConfigById:Ue}},end:(Ce,De)=>{if(he&&he(),Ce.originalLayout==null)return;window.clearTimeout(Ce.deferredHide);const Ue=Ee.getPath(),Ke=De.getDropResult()??{},{position:je,path:Ye,tabId:st}=Ke;ue!=null&&Te({originalLayout:Ce.originalLayout,originalSavedProps:Ce.originalConfigById,panelId:ue,sourceTabId:ne,targetTabId:st,position:je,destinationPath:Ye,ownPath:Ue})}});return[Re,Ie]}var N=o(43234),ee=o(11701),ae=o(40301);const me=(0,F.ZL)()(oe=>({perfInfo:{position:"absolute",bottom:2,left:3,whiteSpace:"pre-line",fontSize:"0.75em",fontFeatureSettings:`${oe.typography.fontFeatureSettings}, 'zero'`,opacity:.7,userSelect:"none",mixBlendMode:"difference"},tabCount:{alignItems:"center",justifyContent:"center",position:"absolute",display:"flex",inset:0,textAlign:"center",letterSpacing:"-0.125em",paddingTop:1,paddingLeft:5,paddingRight:11,fontSize:`${oe.typography.subtitle2.fontSize} !important`,fontWeight:600}})),de="$unknown_id";function pe(oe){function ne(ue){const{childId:X=de,overrideConfig:he,tabId:Ee,...ze}=ue,{classes:be,cx:Se,theme:Te}=me(),Re=(0,E.Z)(),{mosaicActions:Ie}=(0,b.useContext)(S.DF),{mosaicWindowActions:Ce}=(0,b.useContext)(S.Jy),{selectedPanelIds:De,setSelectedPanelIds:Ue,selectAllPanels:Ke,togglePanelSelected:je,getSelectedPanelIds:Ye}=(0,ge.iy)(),st=(0,b.useMemo)(()=>De.includes(X),[X,De]),Ze=(0,b.useMemo)(()=>st?De.length:0,[st,De]),{savePanelConfigs:Ve,updatePanelConfigs:lt,createTabPanel:Ne,closePanel:Je,swapPanel:We,getCurrentLayoutState:dt}=(0,ge._B)(),[vt,Bt]=(0,b.useState)(!1),[ct,Le]=(0,b.useState)(!1),[nt,_e]=(0,b.useState)(void 0),[U,ot]=(0,b.useState)(!1),He=(0,b.useRef)(null),ut=(0,we.v)(),Pt=(0,b.useContext)(H.x),xe=Pt!=null&&Pt.length===0&&Ee==null,Gt=(0,b.useContext)(j.Z),Zt=oe.panelType,pt=(0,b.useMemo)(()=>ut.getPanelByType(Zt)?.title??"",[ut,Zt]),qe=oe.defaultConfig,[at,it]=(0,M.Um)(X),Lt=(0,b.useCallback)(()=>{it(qe)},[qe,it]),Me=(0,b.useRef)(!1);(0,b.useLayoutEffect)(()=>{Me.current||(!at||Object.keys(at).length===0?(Me.current=!0,it(qe)):Object.entries(qe).some(([Xe,It])=>It!=null&&!(Xe in at))&&(Me.current=!0,it({...qe,...at})))},[qe,it,at]);const Vt=(0,b.useMemo)(()=>({...qe,...at,...he}),[at,qe,he]),An=(0,b.useCallback)(async({panelType:Xe,siblingConfigCreator:It,updateIfExists:xn})=>{const pn=dt().selectedLayout?.data;if(!pn)return;let nn={};const wn=ut.getPanelByType(Xe);if(wn){const Nt=await wn.module();if(!Re())return;nn=Nt.default.defaultConfig}const En=Ce.getPath();if(xn){const Nt=(0,A.last)(En),so=Nt!=null?(0,S.Gv)(Nt):"second",Is=En.slice(0,-1).concat(so),Rn=(0,S.PC)(Ie.getRoot(),Is);if(typeof Rn=="string"&&(0,ae.$k)(Rn)===Xe){const Vn={...nn,...pn.configById[Rn]};Ve({configs:[{id:Rn,config:It(Vn),defaultConfig:nn}]});return}}const no=En.concat("second"),Hn=It(nn);Ce.split({type:Xe,panelConfig:Hn}).then(()=>{const Nt=(0,S.PC)(Ie.getRoot(),no);Ve({configs:[{id:Nt,config:Hn,defaultConfig:nn}]})})},[dt,Re,Ie,Ce,ut,Ve]),Qn=(0,b.useCallback)((Xe,It)=>{We({tabId:Ee,originalId:X,type:Xe,root:Ie.getRoot(),path:Ce.getPath(),config:It})},[X,Ie,Ce,We,Ee]),en=(0,Be.Q)(Be.VI.selectPanelSettingsOpen),Ft=(0,b.useCallback)(Xe=>{en?(Xe.stopPropagation(),Ue([X])):(Xe.metaKey||Xe.shiftKey||st)&&(Xe.stopPropagation(),je(X,Ee))},[X,Ee,je,st,Ue,en]),Mn=(0,b.useCallback)(()=>{const Xe=dt().selectedLayout?.data?.layout;Xe!=null&&Ne({idToReplace:X,layout:Xe,idsToRemove:Ye(),singleTab:!0})},[dt,Ye,Ne,X]),Yn=(0,b.useCallback)(()=>{const Xe=dt().selectedLayout?.data?.layout;Xe!=null&&Ne({idToReplace:X,layout:Xe,idsToRemove:Ye(),singleTab:!1})},[dt,Ye,Ne,X]),tn=(0,b.useCallback)(()=>{Je({path:Ce.getPath(),root:Ie.getRoot(),tabId:Ee})},[Je,Ie,Ce,Ee]),ln=(0,b.useCallback)(()=>{const Xe=dt().selectedLayout?.data?.configById;if(!Xe)return;const It=Ee!=null?Xe[Ee]:void 0;if(Ee!=null&&It!=null){const xn=(0,ae.nJ)(oe.panelType),pn=It.tabs[It.activeTabIdx]?.layout;if(pn==null)return;const nn=(0,ae.p9)(X,pn),wn=(0,S.Xw)(pn,[{path:nn,spec:{$set:{first:X,second:xn,direction:"row"}}}]),En=(0,ae.p1)(wn,It);Ve({configs:[{id:Ee,config:En},{id:xn,config:Vt}]})}else Ce.split({type:oe.panelType})},[X,dt,Ce,Vt,Ve,Ee]),{enterFullscreen:Qe,exitFullscreen:Ot}=(0,b.useMemo)(()=>({enterFullscreen:()=>{_e(He.current?.getBoundingClientRect()),Le(!0),Gt?.setHasFullscreenDescendant(!0)},exitFullscreen:()=>{Le(!1)}}),[Gt]),bn=(0,b.useCallback)(Xe=>{ot(Xe),Gt?.setHasFullscreenDescendant(Xe)},[Gt]),{isDragging:Jt,isOver:cn,isValidTarget:dn,connectMessagePathDropTarget:ke,dropMessage:yt,setMessagePathDropConfig:Fe}=(0,N.o)(),{keyUpHandlers:et,keyDownHandlers:wt}=(0,b.useMemo)(()=>({keyUpHandlers:{"`":()=>{Bt(!1)},"~":()=>{Bt(!1)}},keyDownHandlers:{a:Xe=>{Xe.preventDefault(),Xe.metaKey&&Ke()},"`":()=>{Bt(!0)},"~":()=>{Bt(!0)},Escape:()=>{Ze>1&&Ue([])}}}),[Ke,Ze,Ue]),Et=(0,b.useMemo)(()=>({Escape:()=>{Ot()}}),[Ot]),un=(0,I.O4)(ze),Ss=(0,b.useMemo)(()=>({config:Vt,saveConfig:it,...un}),[un,Vt,it]),$s=(0,b.useMemo)(()=>(0,d.jsx)(oe,{...Ss}),[Ss]),Js=(0,b.useRef)(0),Ts=(0,b.useRef)(null),Ps=(0,b.useRef)(null),us=(0,b.useCallback)(()=>{const Xe=Ps.current;Xe&&(Xe.style.opacity="0",setTimeout(()=>Xe.style.opacity="1",0))},[]),Dn={tabId:Ee,panelId:X,onDragStart:us},[Bn,qs]=V(Dn),[_s,eo]=V(Dn),to=(0,b.useMemo)(()=>{const Xe={open:Jt||vt||st&&Ze>1,variant:void 0,highlightMode:void 0,actions:void 0,dropMessage:yt};return Jt&&!dn&&(Xe.variant="invalidDropTarget"),Jt&&cn&&(Xe.variant="validDropTarget"),st&&Ze>1&&(Xe.onClickAway=()=>{Ue([])},Xe.variant="selected",Xe.highlightMode="all",Xe.actions=[{key:"group",text:"Group in tab",icon:(0,d.jsx)(g.D9i,{}),onClick:Mn},{key:"create-tabs",text:"Create tabs",icon:(0,d.jsxs)(d.Fragment,{children:[(0,d.jsxs)("span",{className:be.tabCount,children:[Ze<=99?Ze:""," "]}),(0,d.jsx)(g.W9$,{})]}),onClick:Yn}]),Zt!==ee.bm&&vt&&(Xe.variant="selected",Xe.highlightMode="active"),vt&&(Xe.actions=[{key:"split",text:"Split panel",icon:(0,d.jsx)(v.nms,{}),onClick:ln},{key:"remove",text:"Remove panel",icon:(0,d.jsx)(l.Kx2,{}),color:"error",onClick:tn}]),Xe},[be.tabCount,Yn,yt,Mn,Jt,cn,st,dn,Ze,vt,tn,Ue,ln,Zt]);return(0,d.jsx)(b.Profiler,{id:X,onRender:(Xe,It,xn,pn,nn,wn,En)=>{Ts.current&&(Ts.current.innerText=`${++Js.current}
${xn.toFixed(1)}ms`)},children:(0,d.jsxs)(j.Z.Provider,{value:{type:Zt,id:X,title:pt,config:Vt,saveConfig:it,updatePanelConfigs:lt,openSiblingPanel:An,replacePanel:Qn,enterFullscreen:Qe,exitFullscreen:Ot,setHasFullscreenDescendant:bn,isFullscreen:ct,tabId:Ee,connectToolbarDragHandle:xe?void 0:_s,setMessagePathDropConfig:Fe},children:[(0,d.jsx)(D.Z,{global:!0,keyUpHandlers:et,keyDownHandlers:wt}),ct&&(0,d.jsx)(D.Z,{global:!0,keyDownHandlers:Et}),(0,d.jsx)(n.ZP,{in:ct,onExited:()=>{bn(!1)},nodeRef:He,timeout:{exit:Te.transitions.duration.shorter},children:Xe=>(0,d.jsxs)(Q.O,{onClick:Ft,hasFullscreenDescendant:U,fullscreenState:Xe,sourceRect:nt,selected:st||Jt&&dn&&cn,"data-testid":Se("panel-mouseenter-container",X),ref:It=>{He.current=It,xe||(qs(It),eo(It)),ke(It)},children:[!ct&&Zt!==ee.bm&&(0,d.jsx)(Z,{...to,ref:It=>{Ps.current=It,xe||Bn(It)}}),(0,d.jsx)(ve,{onRemovePanel:tn,onResetPanel:Lt,children:(0,d.jsx)(b.StrictMode,{children:$s})}),!1]})})]})})}return Object.assign(b.memo(ne),{defaultConfig:oe.defaultConfig,panelType:oe.panelType,displayName:`Panel(${oe.displayName??oe.name})`})}},39347:(le,C,o)=>{"use strict";o.d(C,{B:()=>oe});var d=o(52322),g=o(43749),v=o(31563),l=o(68234),A=o(87037),b=o(88601),S=o.n(b),n=o(76635),E=o(2784),F=o(68588),I=o(72970),M=o(29268),D=o(93812),H=o(48105),j=o(36537),L=o(41939),P=o(96027),B=o(35109),z=o(13843),Y=o(49565),$=o(68434);const ve=(0,I.ZL)()(ne=>({root:{".TextHighlight-highlight":{color:ne.palette.primary.main,fontWeight:"bold"}}}));function q({targetStr:ne="",searchText:ue=""}){const{classes:X}=ve();if(ue.length===0)return(0,d.jsx)(d.Fragment,{children:ne});const he=S().single(ue,ne),Ee=he?S().highlight(he,"<span class='TextHighlight-highlight'>","</span>"):void 0;return(0,d.jsx)("span",{className:X.root,children:Ee!=null&&Ee.length>0?(0,d.jsx)("span",{dangerouslySetInnerHTML:{__html:Ee}}):ne})}const Pe=(0,I.ZL)()(ne=>({fullHeight:{height:"100%"},imagePlaceholder:{paddingBottom:`${200/280*100}%`,backgroundColor:ne.palette.background.default},cardContent:{flex:"auto"}}));function ie(ne){const{searchQuery:ue,panel:X,onClick:he}=ne,{classes:Ee}=Pe(),ze=X.extensionNamespace?`${X.title} [${X.extensionNamespace}]`:X.title,be=(0,E.useCallback)(Se=>{Se.stopPropagation(),he()},[he]);return(0,d.jsx)(P.Z,{className:Ee.fullHeight,children:(0,d.jsx)(B.Z,{onClick:be,className:Ee.fullHeight,children:(0,d.jsxs)(D.Z,{fullHeight:!0,children:[X.thumbnail!=null?(0,d.jsx)(z.Z,{component:"img",image:X.thumbnail,alt:X.title}):(0,d.jsx)("div",{className:Ee.imagePlaceholder}),(0,d.jsxs)(Y.Z,{className:Ee.cardContent,children:[(0,d.jsx)($.Z,{variant:"subtitle2",gutterBottom:!0,children:(0,d.jsx)("span",{"data-testid":`panel-menu-item ${X.title}`,children:(0,d.jsx)(q,{targetStr:ze,searchText:ue})})}),(0,d.jsx)($.Z,{variant:"body2",color:"text.secondary",children:(0,d.jsx)(q,{targetStr:X.description??"",searchText:ue})})]})]})})})}const fe=(0,I.ZL)()(ne=>({grid:{display:"grid !important",gridTemplateColumns:"repeat(auto-fill, minmax(240px, 1fr))",gap:ne.spacing(2)}}));function x(ne){const{filteredPanels:ue,onPanelSelect:X,searchQuery:he=""}=ne,{classes:Ee}=fe(),ze=(0,E.useCallback)(be=>{const{title:Se,type:Te,config:Re,relatedConfigs:Ie}=be;return(0,d.jsx)(ie,{panel:be,searchQuery:he,onClick:()=>{X({type:Te,config:Re,relatedConfigs:Ie})}},`${Te}-${Se}`)},[X,he]);return(0,d.jsx)(L.Z,{className:Ee.grid,maxWidth:!1,children:ue.map(ze)})}var R=o(81774),Q=o(98043),ce=o(72994),T=o(20379),Z=o(17055),ge=o(15400),we=o(14117),Be=o(82056),Oe=o(42689),V=o(28219);const N=(0,I.ZL)()((ne,ue,X)=>({listItemButton:{height:ne.spacing(4),cursor:"grab",[`&:not(:hover) .${X.dragIcon}`]:{visibility:"hidden"}},dragIcon:{cursor:"grab",marginRight:ne.spacing(-1),color:ne.palette.text.disabled}}));function ee(ne){const{searchQuery:ue,panel:X,onClick:he,onDragStart:Ee,onDrop:ze,checked:be=!1,highlighted:Se=!1,mosaicId:Te}=ne,{classes:Re}=N(),Ie=(0,E.useRef)(null),[,Ce]=(0,Oe.c)({type:V.vv.WINDOW,item:()=>(Ee?.(),{mosaicId:Te}),options:{dropEffect:"copy"},end:(je,Ye)=>{const st=Ye.getDropResult()??{},{position:Ze,path:Ve,tabId:lt}=st;if((Ze==null||Ve==null)&&lt==null){he();return}const{type:Ne,config:Je,relatedConfigs:We}=X;ze({type:Ne,config:Je,relatedConfigs:We,position:Ze,path:Ve,tabId:lt})}});(0,E.useEffect)(()=>{if(Se&&Ie.current){const je=Ie.current.getBoundingClientRect(),Ye=Ie.current.parentElement?.parentElement?.parentElement;if(Ye){const st=Ye.getBoundingClientRect().top;je.top>=0&&je.top>=st&&je.top+50<=window.innerHeight||Ie.current.scrollIntoView()}}},[Se]);const De=(0,E.useCallback)(je=>{Ce(je),Ie.current=je},[Ce,Ie]),Ue=X.extensionNamespace?`${X.title} [${X.extensionNamespace}]`:X.title,Ke=(0,E.useCallback)(je=>{je.stopPropagation(),he()},[he]);return(0,d.jsx)(T.Z,{placement:"right",enterDelay:500,leaveDelay:0,TransitionComponent:Z.Z,title:(0,d.jsxs)(D.Z,{paddingTop:.25,style:{width:200},children:[X.thumbnail!=null&&(0,d.jsx)("img",{src:X.thumbnail,alt:X.title}),(0,d.jsxs)(D.Z,{padding:1,gap:.5,children:[(0,d.jsx)($.Z,{variant:"body2",fontWeight:"bold",children:X.title}),(0,d.jsx)($.Z,{variant:"body2",style:{opacity:.6},children:X.description})]})]}),children:(0,d.jsx)(ge.ZP,{dense:!0,disablePadding:!0,children:(0,d.jsxs)(we.Z,{selected:Se,className:Re.listItemButton,disabled:be,ref:De,onClick:Ke,children:[(0,d.jsx)(Be.Z,{children:(0,d.jsx)("span",{"data-testid":`panel-menu-item ${X.title}`,children:(0,d.jsx)(q,{targetStr:Ue,searchText:ue})})}),(0,d.jsx)(ce.WeO,{className:Re.dragIcon})]})})})}function ae(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function me(ne){const{filteredPanels:ue,highlightedPanelIdx:X,onDragStart:he,onPanelSelect:Ee,selectedPanelType:ze,searchQuery:be=""}=ne,{dropPanel:Se}=(0,Q._B)(),Te=(0,Q.Sr)(),Re=(0,E.useCallback)(({config:De,relatedConfigs:Ue,type:Ke,position:je,path:Ye,tabId:st})=>{Se({newPanelType:Ke,destinationPath:Ye,position:je,tabId:st,config:De,relatedConfigs:Ue}),ae()},[Se]),Ie=(0,E.useMemo)(()=>X!=null?ue[X]:void 0,[ue,X]),Ce=(0,E.useCallback)(De=>{const{title:Ue,type:Ke,config:je,relatedConfigs:Ye}=De;return(0,d.jsx)(ee,{mosaicId:Te,panel:De,onDragStart:he,onDrop:Re,onClick:()=>{Ee({type:Ke,config:je,relatedConfigs:Ye}),ae()},checked:Ke===ze,highlighted:Ie?.title===Ue,searchQuery:be},`${Ke}-${Ue}`)},[Ie?.title,Te,he,Re,Ee,be,ze]);return(0,d.jsx)(R.Z,{dense:!0,disablePadding:!0,children:ue.map(Ce)})}const de=(0,I.ZL)()(ne=>{const{spacing:ue,palette:X}=ne;return{toolbar:{position:"sticky",top:-.5,zIndex:100,display:"flex",justifyContent:"stretch",padding:ne.spacing(1.5),backgroundImage:`linear-gradient(to top, transparent, ${X.background.paper} ${ue(1.5)}) !important`},toolbarMenu:{backgroundImage:`linear-gradient(to top, transparent, ${X.background.menu} ${ue(1.5)}) !important`},toolbarGrid:{padding:ne.spacing(2)}}});function pe(ne){const ue=new Map;for(const X of ne){const{title:he,type:Ee,config:ze}=(0,j.N)(X),be=he??Ee??"<unnamed>";if(Ee==null||Ee.length===0)throw new Error(`Panel component ${he} must declare a unique \`static panelType\``);const Se=(0,j.N)(ue.get(Ee));if(Se&&(0,n.isEmpty)(Se.config)&&(0,n.isEmpty)(ze)){const Re=Se.title??Se.type??"<unnamed>";throw new Error(`Two components have the same panelType ('${Ee}') and no preset configs: ${Re} and ${be}`)}ue.set(Ee,X)}}const oe=(0,E.forwardRef)(function(ue,X){const{isMenu:he=!1,onDragStart:Ee,onPanelSelect:ze,selectedPanelType:be,mode:Se="list"}=ue,{classes:Te,cx:Re}=de(),{t:Ie}=(0,F.$G)("addPanel"),[Ce,De]=(0,E.useState)(""),[Ue,Ke]=(0,E.useState)(),je=(0,E.useCallback)(ct=>{const Le=ct.target.value;De(Le),Ke(Le?0:void 0)},[]),Ye=(0,H.v)(),st=(0,E.useMemo)(()=>{const ct=Ye.getPanels(),Le=(0,n.countBy)(ct,nt=>nt.title);return ct.map(nt=>(Le[nt.title]??0)>1?nt:{...nt,namespace:void 0})},[Ye]),{allRegularPanels:Ze,allPreconfiguredPanels:Ve}=(0,E.useMemo)(()=>{const ct=st,Le=ct.filter(U=>!U.config),nt=ct.filter(U=>U.config),_e=(U,ot)=>U.title.localeCompare(ot.title,void 0,{ignorePunctuation:!0,sensitivity:"base"});return{allRegularPanels:[...Le].sort(_e),allPreconfiguredPanels:[...nt].sort(_e)}},[st]);(0,E.useEffect)(()=>{pe([...Ze,...Ve])},[Ze,Ve]);const lt=(0,E.useCallback)(ct=>Ce.length>0?S().go(Ce,ct,{keys:["title","description"],scoreFn:Le=>Math.max(Le[0]?Le[0].score:-1e3,Le[1]?Le[1].score-100:-1e3),threshold:-900}).map(Le=>Le.obj):ct,[Ce]),{filteredRegularPanels:Ne,filteredPreconfiguredPanels:Je}=(0,E.useMemo)(()=>({filteredRegularPanels:lt(Ze),filteredPreconfiguredPanels:lt(Ve)}),[lt,Ze,Ve]),We=(0,E.useMemo)(()=>[...Je,...Ne],[Je,Ne]),dt=(0,E.useMemo)(()=>Ue!=null?We[Ue]:void 0,[We,Ue]),vt=We.length===0,Bt=(0,E.useCallback)(ct=>{ct.key!=="Escape"&&ct.stopPropagation(),Se!=="grid"&&(ct.key==="ArrowDown"?Ke(Le=>Le==null?0:(Le+1)%We.length):ct.key==="ArrowUp"?Ke(Le=>{if(!(We.length<=0))return Le==null?We.length-1:(Le-1+We.length)%We.length}):ct.key==="Enter"&&dt&&ze({type:dt.type,config:dt.config,relatedConfigs:dt.relatedConfigs}))},[We.length,dt,Se,ze]);return(0,d.jsxs)(D.Z,{fullHeight:!0,ref:X,children:[(0,d.jsx)("div",{className:Re(Te.toolbar,{[Te.toolbarMenu]:he,[Te.toolbarGrid]:Se==="grid"}),children:(0,d.jsx)(l.Z,{fullWidth:!0,variant:"filled",placeholder:Ie("searchPanels"),value:Ce,onChange:je,onKeyDown:Bt,autoFocus:!0,"data-testid":"panel-list-textfield",InputProps:{startAdornment:(0,d.jsx)(v.Z,{fontSize:"small"}),endAdornment:Ce&&(0,d.jsx)(A.Z,{size:"small",edge:"end",onClick:()=>{De("")},children:(0,d.jsx)(g.Z,{fontSize:"small"})})}})}),Se==="grid"?(0,d.jsx)(x,{searchQuery:Ce,filteredPanels:We,onPanelSelect:ze}):(0,d.jsx)(me,{searchQuery:Ce,filteredPanels:We,selectedPanelType:be,highlightedPanelIdx:Ue,onDragStart:Ee,onPanelSelect:ze}),vt&&(0,d.jsx)(D.Z,{padding:2,children:(0,d.jsx)(M.Z,{children:Ie("noPanelsMatchSearchCriteria")})})]})})},82044:(le,C,o)=>{"use strict";o.d(C,{R:()=>v,Z:()=>l});var d=o(2784);const g=d.createContext(void 0);g.displayName="PanelContext";function v(){const A=d.useContext(g);if(!A)throw new Error("Tried to use PanelContext outside a <PanelContext.Provider />");return A}const l=g},14123:(le,C,o)=>{"use strict";o.d(C,{_:()=>ze});var d=o(52322),g=o(47746),v=o(2784),l=o(16003),A=o(91004),b=o(75845),S=o(23503),n=o(44668),E=o(85026),F=o(82044),I=o(76479),M=o(82799),D=o(51390),H=o(86495),j=o(36423),L=o(24304),P=o(39367),B=o(10363),z=o(72283),Y=o(96027),$=o(49565),ve=o(68434),q=o(68588),Pe=o(72970);const ie=(0,Pe.ZL)()({root:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}});function fe(){const{t:be}=(0,q.$G)("panelConfigVersionGuard"),{classes:Se}=ie();return(0,d.jsx)(z.Z,{className:Se.root,children:(0,d.jsx)(Y.Z,{children:(0,d.jsxs)($.Z,{children:[(0,d.jsx)(ve.Z,{variant:"subtitle1",children:be("warning")}),(0,d.jsx)(ve.Z,{variant:"subtitle1",children:be("instructions")})]})})})}var x=o(5817),R=o.n(x),Q=o(8220),ce=o(76635);function T(be,Se){return be+`
`+Se}function Z(be,Se,Te){const Re=T(be.topic,be.schemaName),Ie=Se.get(Re);for(const Ce of Ie??[]){const De=Ce.converter(be.message,be);Te.push({topic:be.topic,schemaName:Ce.toSchemaName,receiveTime:be.receiveTime,message:De,originalMessageEvent:be,sizeInBytes:be.sizeInBytes})}}function ge(be,Se){const Te=new Map;for(const[Re,Ie]of be.entries()){const Ce=(0,ce.difference)(Ie,Se?.get(Re)??[]);Ce.length>0&&Te.set(Re,Ce)}return Te}function we(be,Se,Te){const Re=new Map,Ie=new Set;for(const Ce of be){if(!Ce.convertTo){Ie.add(Ce.topic);continue}const De=Se.find(Ze=>Ze.name===Ce.topic&&Ze.schemaName===Ce.convertTo);if(De){Ie.add(De.name);continue}const Ue=Se.find(Ze=>Ze.name===Ce.topic);if(!Ue)continue;const Ke=T(Ce.topic,Ue.schemaName??"<no-schema>");let je=Re.get(Ke);if(je?.find(Ze=>Ze.toSchemaName===Ce.convertTo))continue;const st=Te?.find(Ze=>Ze.fromSchemaName===Ue.schemaName&&Ze.toSchemaName===Ce.convertTo);st&&(je??=[],je.push(st),Re.set(Ke,je))}return{unconvertedSubscriptionTopics:Ie,topicSchemaConverters:Re}}function Be(be,Se,Te){const Re=Array(be.length).fill(0);if(be.length!==0)for(;;){let Ie;for(let De=0;De<Re.length;De++){const Ue=Re[De],Ke=be[De];if(Ue>=Ke.length)continue;const je=Ke[Ue];if(Ie==null)Ie=De;else{const Ye=be[Ie][Re[Ie]];Se(je,Ye)<0&&(Ie=De)}}if(Ie==null)break;const Ce=be[Ie][Re[Ie]];if(Ce!=null)Te(Ce),Re[Ie]++;else break}}const Oe=new Map;function V(){let be=j.X,Se,Te,Re,Ie,Ce,De,Ue;const Ke=new Map,je=R()(ge),Ye=R()(we),st={};return function(Ve){const{appSettings:lt,colorScheme:Ne,currentFrame:Je,globalVariables:We,hoverValue:dt,messageConverters:vt,playerState:Bt,sharedPanelState:ct,sortedTopics:Le,subscriptions:nt,watchedFields:_e}=Ve;let U=!1;const ot=Bt?.activeData,He=st,ut=Ye(nt,Le,vt),{unconvertedSubscriptionTopics:Pt,topicSchemaConverters:xe}=ut,Gt=Ue!==ut,Zt=je(xe,Ue?.topicSchemaConverters);if(Te!==ot?.lastSeekTime&&Ke.clear(),_e.has("didSeek")){const pt=Te!==ot?.lastSeekTime;pt!==He.didSeek&&(He.didSeek=pt,U=!0),Te=ot?.lastSeekTime}if(_e.has("parameters")){const pt=ot?.parameters??Oe;pt!==He.parameters&&(U=!0,He.parameters=pt)}if(_e.has("sharedPanelState")&&ct!==Ce&&(U=!0,Ce=ct,He.sharedPanelState=ct),_e.has("variables")&&We!==be&&(U=!0,be=We,He.variables=new Map(Object.entries(We))),_e.has("topics")&&(Le!==Re||Ie!==vt)){U=!0;const pt=Le.map(qe=>{const at={name:qe.name,datatype:qe.schemaName??"",schemaName:qe.schemaName??""};if(vt){const it=[];for(const Lt of vt)Lt.fromSchemaName===qe.schemaName&&(it.includes(Lt.toSchemaName)||it.push(Lt.toSchemaName));it.length>0&&(at.convertibleTo=it)}return at});He.topics=pt,Re=Le}if(_e.has("currentFrame")){if(Je&&Je!==De){const pt=[];for(const qe of Je)Pt.has(qe.topic)&&pt.push(qe),Z(qe,xe,pt),Ke.set(qe.topic,qe);He.currentFrame=pt,U=!0}else if(Gt){const pt=[];for(const qe of Ke.values())Z(qe,Zt,pt);He.currentFrame=pt,U=!0}else Je!==De&&(He.currentFrame=Je,U=!0);De=Je}if(_e.has("allFrames")){const pt=Bt?.progress.messageCache?.blocks;if(pt!=null&&Se!==pt||Gt){U=!0;const qe=pt??Se??[],at=He.allFrames=[],it=Array.from(new Set((0,Q.Z)(nt,Lt=>Lt.preload===!0?Lt.topic:void 0)));for(const Lt of qe)Lt&&Be(it.map(Me=>Lt.messagesByTopic[Me]??[]),(Me,Vt)=>(0,n.compare)(Me.receiveTime,Vt.receiveTime),Me=>{Pt.has(Me.topic)&&at.push(Me),Z(Me,xe,at)})}Se=pt}if(_e.has("currentTime")&&He.currentTime!==ot?.currentTime&&(He.currentTime=ot?.currentTime,U=!0),_e.has("startTime")&&He.startTime!==ot?.startTime&&(He.startTime=ot?.startTime,U=!0),_e.has("endTime")&&He.endTime!==ot?.endTime&&(He.endTime=ot?.endTime,U=!0),_e.has("previewTime")){const pt=ot?.startTime;if(pt!=null&&dt!=null){const qe=(0,n.toSec)(pt)+dt.value;qe!==He.previewTime&&(U=!0),He.previewTime=qe}else He.previewTime!=null&&(U=!0),He.previewTime=void 0}if(_e.has("colorScheme")&&Ne!==He.colorScheme&&(U=!0,He.colorScheme=Ne),_e.has("appSettings")&&He.appSettings!==lt&&(U=!0,He.appSettings=lt),Ie=vt,Ue=ut,!!U)return He}}var N=o(98043),ee=o(40301);const ae=Object.freeze({}),me=be=>be.sharedPanelState??ae;function de(){const be=(0,N.NS)(me),{updateSharedPanelState:Se}=(0,N._B)(),Te=(0,F.R)().id,Re=(0,v.useMemo)(()=>(0,ee.$k)(Te),[Te]),Ie=(0,v.useMemo)(()=>be[Re],[Re,be]),Ce=(0,v.useCallback)(De=>{Se(Re,De)},[Re,Se]);return[Ie,Ce]}var pe="../../packages/studio-base/src/components/PanelExtensionAdapter/PanelExtensionAdapter.tsx";const oe=S.ZP.getLogger(pe),ne="foxgloveConfigVersion";function ue(be){return be!=null&&typeof be=="object"&&ne in be&&typeof be[ne]=="number"}function X(be){return be}function he(be){return be.installedMessageConverters}function Ee(be){const{initPanel:Se,config:Te,saveConfig:Re,highestSupportedConfigVersion:Ie}=be,Ce=(0,l.Z)(Te),De=(0,E.An)(X),{playerState:Ue,pauseFrame:Ke,setSubscriptions:je,seekPlayback:Ye,sortedTopics:st}=De,{capabilities:Ze,profile:Ve}=Ue,{openSiblingPanel:lt,setMessagePathDropConfig:Ne}=(0,F.R)(),[Je]=(0,v.useState)(()=>(0,A.Z)()),We=(0,b.t2)(),[dt,vt]=(0,v.useState)(),[Bt,ct]=(0,v.useState)(new Set),Le=(0,D.I)(he),[nt,_e]=(0,v.useState)([]),[U,ot]=(0,v.useState)(new Map),[He,ut]=(0,v.useState)([]),[Pt,xe]=(0,v.useState)(),Gt=(0,v.useRef)(!1),[Zt,pt]=(0,v.useState)(!1),[,qe]=(0,P._N)(),{globalVariables:at,setGlobalVariables:it}=(0,j.Z)(),Lt=(0,H.hx)({componentId:`PanelExtensionAdapter:${Je}`,isPlaybackSeconds:!0}),Me=(0,H.D4)(),Vt=(0,H.Js)(),An=(0,v.useRef)(new Map),{palette:{mode:Qn}}=(0,g.Z)(),en=(0,M.H)(),Ft=(0,E.m7)(),[Mn,Yn]=(0,v.useState)(()=>V()),[tn,ln]=de();(0,v.useEffect)(()=>{const yt=new Map;for(const et of He){const wt=Et=>{ot(un=>(un.set(et,Et),new Map(un)))};yt.set(et,wt),en.addChangeListener(et,wt)}const Fe=new Map;for(const et of He)Fe.set(et,en.get(et));return ot(Fe),()=>{for(const[et,wt]of yt.entries())en.removeChangeListener(et,wt)}},[en,He]);const Qe=(0,v.useMemo)(()=>De.messageEventsBySubscriberId.get(Je),[De.messageEventsBySubscriberId,Je]),Ot=(0,v.useRef)(!1);(0,v.useLayoutEffect)(()=>{if(!Pt||!Gt.current)return;const yt=Mn({appSettings:U,colorScheme:Qn,currentFrame:Qe,globalVariables:at,hoverValue:Lt,messageConverters:Le,playerState:Ue,sharedPanelState:tn,sortedTopics:st,subscriptions:nt,watchedFields:Bt});if(!yt)return;if(Ot.current){pt(!0);return}pt(!1);const Fe=Ke(Je);Ot.current=!0;try{vt(void 0);let et=!1;Pt(yt,()=>{if(et){oe.warn(`${Je} called render done function twice`);return}et=!0,Fe(),Ot.current=!1})}catch(et){vt(et)}},[U,Mn,Qn,at,Lt,nt,Le,Qe,Je,Ke,Ue,Pt,tn,st,Bt]);const bn=(0,P.W0)(),Jt=(0,v.useMemo)(()=>{const yt={addPanel({position:Fe,type:et,updateIfExists:wt,getState:Et}){if(We())switch(Fe){case"sibling":lt({panelType:et,updateIfExists:wt,siblingConfigCreator:un=>Et(un)});return;default:(0,B.v)(Fe,`Unsupported position for addPanel: ${Fe}`)}}};return{initialState:Ce.current,saveState:Fe=>{We()&&Re(Fe)},layout:yt,seekPlayback:Ye?Fe=>{if(!We())return;const et=typeof Fe=="object"?Fe:(0,n.fromSec)(Fe);Ye(et)}:void 0,dataSourceProfile:Ve,setParameter:(Fe,et)=>{We()&&Ft().setParameter(Fe,et)},setVariable:(Fe,et)=>{We()&&it({[Fe]:et})},setPreviewTime:Fe=>{if(We())if(Fe==null)Vt("PanelExtensionAdatper");else{const wt=Ft().playerState.activeData?.startTime;if(!wt)return;const Et=Fe-(0,n.toSec)(wt);Me({type:"PLAYBACK_SECONDS",componentId:"PanelExtensionAdatper",value:Et})}},setSharedPanelState:ln,watch:Fe=>{We()&&ct(et=>{if(et.has(Fe))return et;const wt=new Set(et);return wt.add(Fe),wt})},subscribe:Fe=>{if(!We())return;const et=Fe.map(Et=>typeof Et=="string"?{topic:Et,preloadType:"full"}:{topic:Et.topic,convertTo:Et.convertTo,preloadType:Et.preload===!0?"full":"partial"}),wt=Fe.map(Et=>typeof Et=="string"?{topic:Et,preload:!0}:Et);_e(wt),je(Je,et)},advertise:Ze.includes(L.C.advertise)?(Fe,et,wt)=>{if(!We())return;const Et={topic:Fe,schemaName:et,options:wt};An.current.set(Fe,Et),Ft().setPublishers(Je,Array.from(An.current.values()))}:void 0,unadvertise:Ze.includes(L.C.advertise)?Fe=>{We()&&(An.current.delete(Fe),Ft().setPublishers(Je,Array.from(An.current.values())))}:void 0,publish:Ze.includes(L.C.advertise)?(Fe,et)=>{We()&&Ft().publish({topic:Fe,msg:et})}:void 0,callService:Ze.includes(L.C.callServices)?async(Fe,et)=>{if(!We())throw new Error("Service call after panel was unmounted");return await Ft().callService(Fe,et)}:void 0,unstable_fetchAsset:async(Fe,et)=>{if(!We())throw new Error("Asset fetch after panel was unmounted");return await Ft().fetchAsset(Fe,et)},unsubscribeAll:()=>{We()&&(_e([]),je(Je,[]))},subscribeAppSettings:Fe=>{We()&&ut(Fe)},updatePanelSettingsEditor:Fe=>{We()&&bn(Fe)},setDefaultPanelTitle:Fe=>{We()&&qe(Fe)},EXPERIMENTAL_setMessagePathDropConfig(Fe){Ne(Fe)}}},[Ze,Vt,Ve,Ft,Ce,We,lt,Je,Re,Ye,qe,it,Me,ln,je,bn,Ne]),cn=(0,v.useRef)(null);(0,b.R5)(Se,"initPanel"),(0,b.R5)(Je,"panelId"),(0,b.R5)(Jt,"partialExtensionContext");const dn=(0,v.useMemo)(()=>{const yt=Ce.current;return ue(yt)&&Ie!=null&&yt[ne]>Ie},[Ce,Ie]);(0,v.useLayoutEffect)(()=>{if(!cn.current)throw new Error("Expected panel container to be mounted");if(dn)return;xe(void 0),Ot.current=!1,pt(!1),Yn(()=>V());const yt=document.createElement("div");yt.style.width="100%",yt.style.height="100%",yt.style.overflow="hidden",cn.current.appendChild(yt),oe.info(`Init panel ${Je}`);const Fe=Se({panelElement:yt,...Jt,set onRender(et){xe(()=>et)}});return Gt.current=!0,()=>{Fe&&Fe(),Gt.current=!1,yt.remove(),Ft().setSubscriptions(Je,[]),Ft().setPublishers(Je,[])}},[Se,Je,Jt,Ft,dn]);const ke={};if(Zt&&(ke.borderColor="orange",ke.borderWidth="1px",ke.borderStyle="solid"),dt)throw dt;return(0,d.jsxs)("div",{style:{alignItems:"stretch",display:"flex",flexDirection:"column",height:"100%",overflow:"hidden",width:"100%",zIndex:0,...ke},children:[(0,d.jsx)(I.Z,{}),dn&&(0,d.jsx)(fe,{}),be.children,(0,d.jsx)("div",{style:{flex:1,overflow:"hidden"},ref:cn})]})}const ze=Ee},13688:(le,C,o)=>{"use strict";o.d(C,{D:()=>fe,Z:()=>ce});var d=o(52322),g=o(3104),v=o(2784),l=o(8533),A=o(28219),b=o(72970),S=o(44449),n=o(29268),E=o(15116),F=o(98043),I=o(51390),M=o(48105),D=o(40301),H=o(38256),j=o(93723),L=o(96715);function P({children:T,id:Z,tabId:ge}){const we=(0,v.useCallback)(Oe=>Oe.sequenceNumbers[Z]??0,[Z]),Be=(0,L.J)(we);return(0,d.jsx)(v.Fragment,{children:T},`${Z}${ge??""}${Be}`)}var B=o(75017),z=o(76479),Y=o(93812);function $(T){const{config:Z,saveConfig:ge}=T;return(0,d.jsxs)(Y.Z,{flex:"auto",alignItems:"center",justifyContent:"center","data-testid":Z.id,children:[(0,d.jsx)(z.Z,{isUnknownPanel:!0}),(0,d.jsxs)(n.Z,{children:["Unknown panel type: ",Z.type,"."]})]})}$.panelType="unknown",$.defaultConfig={};const ve=(0,B.Z)($);var q=o(24426);const Pe=(0,b.ZL)()({hideTopLevelDropTargets:{margin:0,".mosaic-root + .drop-target-container":{display:"none !important"},"& > .mosaic-window > .drop-target-container":{display:"none !important"}}});function ie({tabId:T,children:Z}){const{classes:ge,cx:we}=Pe(),[,Be]=(0,l.L)({accept:A.vv.WINDOW,drop:(Oe,V)=>{const N=V.getDropResult();if(N)return{tabId:T,...N}}});return(0,d.jsx)("div",{className:we(ge.hideTopLevelDropTargets,"mosaic-tile"),ref:Be,children:Z})}function fe(T){const{savePanelConfigs:Z}=(0,F._B)(),ge=(0,F.Sr)(),{layout:we,onChange:Be,tabId:Oe}=T,V=(0,v.useCallback)(de=>{const pe="RosOut",oe=de?.type?de.type:pe,ne=(0,D.nJ)(oe);return de?.panelConfig&&Z({configs:[{id:ne,config:de.panelConfig}]}),ne},[Z]),N=(0,M.v)(),ee=(0,v.useMemo)(()=>new Map(N.getPanels().map(de=>[de.type,v.lazy(de.module)])),[N]),ae=(0,v.useCallback)((de,pe)=>{if(de==null||typeof de!="string")return(0,d.jsx)(d.Fragment,{});const oe=(0,D.$k)(de);let ne;const ue=ee.get(oe);ue?ne=(0,d.jsx)(ue,{childId:de,tabId:Oe}):ne=(0,d.jsx)(ve,{childId:de,tabId:Oe,overrideConfig:{type:oe,id:de}});const X=(0,d.jsx)(A.h1,{title:"",path:pe,createNode:V,renderPreview:()=>{},children:(0,d.jsx)(v.Suspense,{fallback:(0,d.jsx)(n.Z,{children:(0,d.jsx)(g.Z,{size:28})}),children:(0,d.jsx)(j.x.Provider,{value:pe,children:(0,d.jsx)(P,{id:de,tabId:Oe,children:ne})})})},de);return oe==="Tab"?(0,d.jsx)(ie,{tabId:de,children:X}):X},[ee,V,Oe]),me=(0,v.useMemo)(()=>we!=null?(0,d.jsx)(A.wB,{renderTile:ae,className:"mosaic-foxglove-theme",resize:{minimumPaneSizePercentage:2},value:we,onChange:de=>{Be(de??void 0)},mosaicId:ge}):(0,d.jsx)(S.v,{tabId:Oe}),[we,ge,Be,ae,Oe]);return(0,d.jsx)(H.Z,{children:me})}function x(){return(0,d.jsx)(n.Z,{children:(0,d.jsx)(g.Z,{size:28})})}const R=T=>T.selectedLayout?.data!=null,Q=T=>T.selectedLayout?.data?.layout;function ce(){const{layoutEmptyState:T}=(0,E.b)(),{changePanelLayout:Z}=(0,F._B)(),ge=(0,F.NS)(R),we=(0,F.NS)(Q),Be=(0,I.I)(V=>V.installedExtensions),Oe=(0,v.useCallback)(V=>{V!=null&&Z({layout:V})},[Z]);return Be==null?(0,d.jsx)(x,{}):ge?(0,d.jsx)(fe,{layout:we,onChange:Oe}):T||(0,d.jsx)(d.Fragment,{})}},84877:(le,C,o)=>{"use strict";o.d(C,{D:()=>b,O:()=>n});var d=o(52322),g=o(47591),v=o(2784),l=o(72970),A=o(30280);const b="FoxglovePanelRoot-root",S=(0,l.ZL)()((E,F)=>{const{palette:I,transitions:M}=E,{sourceRect:D,hasFullscreenDescendant:H}=F,j=M.duration.shorter;return{root:{display:"flex",flexDirection:"column",flex:"1 1 auto",overflow:"hidden",backgroundColor:I.background.default,border:`0px solid ${(0,g.Fq)(I.primary.main,.67)}`,transition:M.create("border-width",{duration:j}),"::after":{content:"''",top:0,left:0,right:0,bottom:0,inset:1,opacity:0,border:`1px solid ${I.primary.main}`,position:"absolute",pointerEvents:"none",transition:"opacity 0.05s ease-out",zIndex:1e4+1}},rootSelected:{"::after":{opacity:1,transition:"opacity 0.125s ease-out"}},entering:{position:"fixed",top:D?.top??0,left:D?.left??0,right:D?window.innerWidth-D.right:0,bottom:D?window.innerHeight-D.bottom:0,zIndex:1e4},entered:{borderWidth:4,position:"fixed",top:A.h,left:0,right:0,bottom:77,zIndex:1e4,transition:M.create(["border-width","top","right","bottom","left"],{duration:j})},exiting:{position:"fixed",top:D?.top??0,left:D?.left??0,right:D?window.innerWidth-D.right:0,bottom:D?window.innerHeight-D.bottom:0,zIndex:1e4,transition:M.create(["border-width","top","right","bottom","left"],{duration:j})},exited:{position:"relative",top:0,left:0,right:0,bottom:0,zIndex:H?"auto":1}}}),n=(0,v.forwardRef)(function(F,I){const{className:M,fullscreenState:D,hasFullscreenDescendant:H,selected:j,sourceRect:L,...P}=F,{classes:B,cx:z}=S({sourceRect:L,hasFullscreenDescendant:H}),Y=z(b,M,B.root,{[B.entering]:D==="entering",[B.entered]:D==="entered",[B.exiting]:D==="exiting",[B.exited]:D==="exited",[B.rootSelected]:j});return(0,d.jsx)("div",{ref:I,className:Y,...P,children:F.children})})},49318:(le,C,o)=>{"use strict";o.d(C,{Z:()=>b});var d=o(52322),g=o(87037),v=o(2784),l=o(72970);const A=(0,l.ZL)()(S=>({root:{padding:S.spacing(.375),fontSize:"0.875rem",".MuiSvgIcon-root, svg:not(.MuiSvgIcon-root)":{height:"1em",width:"1em",fontSize:"inherit"}}})),b=(0,v.forwardRef)(function(n,E){const{className:F,...I}=n,{classes:M,cx:D}=A();return(0,d.jsx)(g.Z,{ref:E,className:D(M.root,F),...I})})},76479:(le,C,o)=>{"use strict";o.d(C,{B:()=>de,Z:()=>oe});var d=o(52322),g=o(63436),v=o(68434),l=o(2784),A=o(72970),b=o(82044),S=o(49318),n=o(39367),E=o(40301),F=o(13264),I=o(93812),M=o(98043),D=o(48105),H=o(96715),j=o(26775),L=o(3896),P=o(78404),B=o(24957),z=o(72994),Y=o(28319),$=o(50985),ve=o(3925),q=o(80078),Pe=o(56961),ie=o(28219),fe=o(62280),x=o(6693),R=o(72283),Q=o(99118),ce=o(39347);const T=(0,A.ZL)()(ne=>({paper:{backgroundColor:ne.palette.background.menu,maxHeight:`calc(100vh - ${ne.spacing(12)})`,overflow:"auto",WebkitOverflowScrolling:"touch"}}));function Z({tabId:ne,anchorEl:ue,onClose:X}){const{classes:he}=T(),Ee=(0,l.useContext)(b.Z),{mosaicActions:ze}=(0,l.useContext)(ie.DF),{mosaicWindowActions:be}=(0,l.useContext)(ie.Jy),{swapPanel:Se}=(0,M._B)(),Te=Boolean(ue),Re=(0,l.useCallback)(Ce=>({type:De,config:Ue,relatedConfigs:Ke})=>{if(De===Ee?.type){X();return}Se({tabId:ne,originalId:Ce??"",type:De,root:ze.getRoot(),path:be.getPath(),config:Ue??{},relatedConfigs:Ke})},[X,ze,be,Ee?.type,Se,ne]),Ie={};return(0,d.jsx)(fe.Z,{...Ie,id:"change-panel-menu",open:Te,role:void 0,anchorEl:ue,transition:!0,placement:"right-start",style:{zIndex:1e4},popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["right-start","left-start"]}}]},children:({TransitionProps:Ce,placement:De})=>(0,d.jsx)(x.Z,{...Ce,style:{transformOrigin:De==="right-start"?"top left":"top right"},children:(0,d.jsx)(R.Z,{elevation:8,className:he.paper,children:(0,d.jsx)(Q.d,{onClickAway:X,children:(0,d.jsx)(ce.B,{mode:"list",isMenu:!0,selectedPanelType:Ee?.type,onPanelSelect:Re(Ee?.id)})})})})})}function ge(ne,ue){if(!ne||!ue)return;const X=(0,ie.PC)(ue.getRoot(),ne.getPath());if(typeof X!="string")throw new Error(`Used getPanelTypeFromMosaic on non-leaf node: ${JSON.stringify(X)}`);return(0,E.$k)(X)}var we=o(2784);const Be=(0,A.ZL)()(ne=>({error:{color:ne.palette.error.main},icon:{marginRight:ne.spacing(-1)},menuItem:{display:"flex",gap:ne.spacing(1),alignItems:"center",".root-span":{display:"flex",marginLeft:ne.spacing(-.25)},"&.Mui-selected":{backgroundColor:ne.palette.action.hover,"&:hover":{backgroundColor:ne.palette.action.hover}}}}));function Oe({isUnknownPanel:ne}){const{classes:ue,cx:X}=Be(),[he,Ee]=(0,l.useState)(void 0),[ze,be]=(0,l.useState)(void 0),Se=Boolean(he),Te=Boolean(ze),Re=(0,l.useContext)(b.Z),Ie=Re?.tabId,{mosaicActions:Ce}=(0,l.useContext)(ie.DF),{mosaicWindowActions:De}=(0,l.useContext)(ie.Jy),{getCurrentLayoutState:Ue,closePanel:Ke,splitPanel:je}=(0,M._B)(),Ye=(0,l.useCallback)(()=>ge(De,Ce),[Ce,De]),st=Le=>{be(void 0),Ee(Le.currentTarget)},Ze=()=>{be(void 0),Ee(void 0)},Ve=Le=>{ze!==Le.currentTarget&&be(Le.currentTarget),Ee(void 0)},lt=(0,l.useCallback)(()=>{be(void 0)},[]),Ne=Le=>{be(Le.currentTarget)},Je=(0,l.useCallback)(()=>{Ke({tabId:Ie,root:Ce.getRoot(),path:De.getPath()}),Ze()},[Ke,Ce,De,Ie]),We=(0,l.useCallback)((Le,nt)=>{const _e=Ye();if(Le==null||_e==null)throw new Error("Trying to split unknown panel!");const U=Ue().selectedLayout?.data?.configById[Le]??{};je({id:Le,tabId:Ie,direction:nt,root:Ce.getRoot(),path:De.getPath(),config:U}),Ze()},[Ue,Ye,Ce,De,je,Ie]),dt=(0,l.useCallback)(()=>{Re?.enterFullscreen(),Ze()},[Re]),vt=(0,l.useMemo)(()=>{const Le=[];return ne||Le.push({key:"vsplit",text:"Split right",icon:(0,d.jsx)(L.dzo,{}),onClick:()=>{We(Re?.id,"row")}},{key:"hsplit",text:"Split down",icon:(0,d.jsx)(L.Kqs,{}),onClick:()=>{We(Re?.id,"column")}}),Re?.isFullscreen!==!0&&Le.push({key:"enter-fullscreen",text:"Fullscreen",icon:(0,d.jsx)(P.gW,{}),onClick:dt,"data-testid":"panel-menu-fullscreen"}),Le.push({key:"divider",type:"divider"}),Le.push({key:"remove",text:"Remove panel",icon:(0,d.jsx)(B.Kx2,{}),onClick:Je,"data-testid":"panel-menu-remove",className:ue.error}),Le},[ue.error,Je,dt,ne,Re?.id,Re?.isFullscreen,We]),Bt=(0,l.useRef)(null);return Ye()==null?(0,d.jsx)(d.Fragment,{}):(0,d.jsxs)("div",{ref:Bt,children:[(0,d.jsx)(S.Z,{id:"panel-menu-button","aria-controls":Se?"panel-menu":void 0,"aria-haspopup":"true","aria-expanded":Se?"true":void 0,onClick:st,"data-testid":"panel-menu",title:"More",children:(0,d.jsx)($.Z,{})}),(0,d.jsxs)(ve.Z,{id:"panel-menu",anchorEl:he,open:Se,onClose:Ze,anchorOrigin:{vertical:"bottom",horizontal:"left"},MenuListProps:{"aria-labelledby":"panel-menu-button",dense:!0},children:[(0,d.jsxs)(q.Z,{className:ue.menuItem,selected:Te,id:"change-panel-button","aria-controls":Te?"change-panel-menu":void 0,"aria-haspopup":"true","aria-expanded":Te?"true":void 0,onClick:Ve,onMouseEnter:Ne,children:[(0,d.jsx)(z.rpi,{}),"Change panel",(0,d.jsx)(Y.Z,{className:ue.icon,fontSize:"small"})]}),(0,d.jsx)(Z,{anchorEl:ze,onClose:lt,tabId:Ie}),(0,d.jsx)(Pe.Z,{variant:"middle"}),vt.map((Le,nt)=>Le.type==="divider"?(0,d.jsx)(Pe.Z,{variant:"middle"},`divider-${nt}`):(0,d.jsxs)(q.Z,{onClick:_e=>{_e.stopPropagation(),Le.onClick?.()},onMouseEnter:()=>{be(void 0)},className:X(ue.menuItem,Le.className),"data-testid":Le["data-testid"],children:[Le.icon,Le.text]},Le.key))]})]})}const V=we.memo(Oe);var N=o(2784);const ee=(0,l.forwardRef)((ne,ue)=>{const{additionalIcons:X,isUnknownPanel:he}=ne,{id:Ee,type:ze}=(0,l.useContext)(b.Z)??{},be=(0,l.useContext)(D.Z),{setSelectedPanelIds:Se}=(0,M.iy)(),{openPanelSettings:Te}=(0,j.W)(),Re=(0,l.useCallback)(Ke=>Ee?Ke.settingsTrees[Ee]!=null:!1,[Ee]),Ie=(0,l.useMemo)(()=>ze!=null?be?.getPanelByType(ze):void 0,[be,ze]),Ce=(0,H.J)(Re),De=(0,l.useCallback)(async()=>{Ee&&(Se([Ee]),Te())},[Ee,Se,Te]),Ue=Ie?.hasCustomToolbar!==!0||Ce;return(0,d.jsxs)(I.Z,{direction:"row",alignItems:"center",paddingLeft:1,ref:ue,children:[X,Ue&&(0,d.jsx)(S.Z,{title:"Settings",onClick:De,children:(0,d.jsx)(F.Z,{})}),(0,d.jsx)(V,{isUnknownPanel:he})]})});ee.displayName="PanelToolbarControls";const ae=N.memo(ee);var me=o(2784);const de=30,pe=(0,A.ZL)()(ne=>({root:{transition:"transform 80ms ease-in-out, opacity 80ms ease-in-out",cursor:"auto",flex:"0 0 auto",alignItems:"center",justifyContent:"flex-end",padding:ne.spacing(.25,.75),display:"flex",minHeight:de,backgroundColor:ne.palette.background.paper,width:"100%",left:0,zIndex:ne.zIndex.appBar}})),oe=me.memo(function({additionalIcons:ue,backgroundColor:X,children:he,className:Ee,isUnknownPanel:ze=!1}){const{classes:be,cx:Se}=pe(),{isFullscreen:Te,exitFullscreen:Re,config:{[E.xS]:Ie=void 0}={}}=(0,l.useContext)(b.Z)??{},Ce=(0,l.useContext)(b.Z),De=(0,l.useMemo)(()=>(0,d.jsxs)(d.Fragment,{children:[ue,Te===!0&&(0,d.jsx)(S.Z,{value:"exit-fullscreen",title:"Exit fullscreen",onClick:Re,children:(0,d.jsx)(g.Z,{})})]}),[ue,Te,Re]),Ue=ze||he!=null?void 0:Ce?.connectToolbarDragHandle,Ke=ze||he==null?void 0:Ce?.connectToolbarDragHandle,[je]=(0,n._N)(),st=(Ie!=null&&typeof Ie=="string"&&Ie.length>0?Ie:je)??Ce?.title;return(0,d.jsxs)("header",{className:Se(be.root,Ee),"data-testid":"mosaic-drag-handle",ref:Ue,style:{backgroundColor:X,cursor:Ue!=null?"grab":"auto"},children:[he??(st&&(0,d.jsx)(v.Z,{noWrap:!0,variant:"body2",color:"text.secondary",flex:"auto",children:st})),(0,d.jsx)(ae,{additionalIcons:De,isUnknownPanel:!!ze,ref:Ke})]})})},23144:(le,C,o)=>{"use strict";o.d(C,{Z:()=>A});var d=o(52322),g=o(86495),v=o(63718),l=o(2784);const A=l.memo(function({children:S,componentId:n,isPlaybackSeconds:E,scales:F}){const I=(0,g.hx)({componentId:n,isPlaybackSeconds:E});return(0,d.jsx)(v.G,{scales:F,xValue:I?.value,children:S})})},63718:(le,C,o)=>{"use strict";o.d(C,{G:()=>A});var d=o(52322),g=o(2784),v=o(72970);const l=(0,v.ZL)()(()=>({root:{top:0,bottom:0,position:"absolute",pointerEvents:"none",willChange:"transform",visibility:"hidden"}}));function A({children:b,scales:S,xValue:n}){const{classes:E}=l(),F=(0,g.useMemo)(()=>{const M=S?.x;if(!M||n==null)return;const D=M.pixelMax-M.pixelMin,H=M.max-M.min;if(D===0||H===0)return;const j=(n-M.min)/(H/D)+M.pixelMin;if(!(j<M.pixelMin||j>M.pixelMax))return j},[S?.x,n]),I=(0,g.useMemo)(()=>F==null||isNaN(F)?{visibility:"hidden",transform:void 0}:{visibility:"visible",transform:`translateX(${F}px)`},[F]);return(0,d.jsx)("div",{className:E.root,style:I,children:b})}},80204:(le,C,o)=>{"use strict";o.d(C,{Z:()=>A,z:()=>l});var d=o(2784);class g{logEvent(){}}const v=(0,d.createContext)(new g);v.displayName="AnalyticsContext";function l(){return(0,d.useContext)(v)}const A=v},82799:(le,C,o)=>{"use strict";o.d(C,{H:()=>v,Z:()=>l});var d=o(2784);const g=(0,d.createContext)(void 0);g.displayName="AppConfigurationContext";function v(){const A=(0,d.useContext)(g);if(!A)throw new Error("An AppConfigurationContext provider is required to useAppConfiguration");return A}const l=g},15116:(le,C,o)=>{"use strict";o.d(C,{b:()=>v});var d=o(2784);const g=(0,d.createContext)({});g.displayName="AppContext";function v(){return(0,d.useContext)(g)}},98043:(le,C,o)=>{"use strict";var d="../../packages/studio-base/src/context/CurrentLayoutContext/index.ts";o.d(C,{NS:()=>M,Sr:()=>F,ZP:()=>H,_B:()=>I,iy:()=>D});var g=o(2784),v=o(28219),l=o(75845),A=o(23503),b=o(77861),S=o(32614);const n=A.ZP.getLogger(d),E=(0,g.createContext)(void 0);E.displayName="CurrentLayoutContext";function F(){return(0,l.qe)(E).mosaicId}function I(){return(0,l.qe)(E).actions}function M(j){const L=(0,l.qe)(E),[P,B]=(0,g.useReducer)(Y=>Y+1,0);(0,b.Z)(j,()=>{n.warn("useCurrentLayoutSelector is changing frequently. Rewrite your selector as a stable function.")});const z=(0,g.useRef)(void 0);return(!z.current||j!==z.current.selector)&&(z.current={value:(0,l.de)(L.actions.getCurrentLayoutState(),j),selector:j}),(0,g.useLayoutEffect)(()=>{let Y=!0;const $=ve=>{if(!Y)return;const q=(0,l.de)(ve,j);q!==z.current?.value&&(z.current={value:q,selector:j},B())};return $(L.actions.getCurrentLayoutState()),L.addLayoutStateListener($),()=>{Y=!1,L.removeLayoutStateListener($)}},[L,j]),z.current.value}function D(){const j=(0,l.qe)(E),[L,P]=(0,g.useState)(()=>j.getSelectedPanelIds());(0,g.useLayoutEffect)(()=>{const q=Pe=>{P(Pe)};return j.addSelectedPanelIdsListener(q),()=>{j.removeSelectedPanelIdsListener(q)}},[j]);const B=(0,l.qe)(E).setSelectedPanelIds,z=(0,l.qe)(E).getSelectedPanelIds,{getCurrentLayoutState:Y}=I(),$=(0,g.useCallback)(()=>{const q=(0,v.fY)(Y().selectedLayout?.data?.layout??null);B(q)},[Y,B]),ve=(0,g.useCallback)((q,Pe)=>{B(ie=>{const{selectedLayout:fe}=Y();return fe?.data?(0,S.Z)(q,Pe,fe.data.configById,ie):ie})},[B,Y]);return(0,l.O4)({getSelectedPanelIds:z,selectedPanelIds:L,setSelectedPanelIds:B,selectAllPanels:$,togglePanelSelected:ve})}const H=E},51390:(le,C,o)=>{"use strict";o.d(C,{I:()=>A,d:()=>l});var d=o(2784),g=o(12294),v=o(75845);const l=(0,d.createContext)(void 0);function A(b){const S=(0,v.qe)(l);return(0,g.oR)(S,b)}},48105:(le,C,o)=>{"use strict";o.d(C,{Z:()=>l,v:()=>v});var d=o(2784);const g=(0,d.createContext)(void 0);g.displayName="PanelCatalogContext";function v(){const A=(0,d.useContext)(g);if(!A)throw new Error("A PanelCatalogContext provider is required to usePanelCatalog");return A}const l=g},96715:(le,C,o)=>{"use strict";o.d(C,{J:()=>A,c:()=>l});var d=o(2784),g=o(12294),v=o(75845);const l=(0,d.createContext)(void 0);function A(b){const S=(0,v.qe)(l);return(0,g.oR)(S,b)}},39471:(le,C,o)=>{"use strict";o.d(C,{Z:()=>l,n:()=>v});var d=o(2784);const g=(0,d.createContext)({selectSource:()=>{},selectRecent:()=>{},availableSources:[],recentSources:[]});g.displayName="PlayerSelectionContext";function v(){return(0,d.useContext)(g)}const l=g},86495:(le,C,o)=>{"use strict";o.d(C,{D4:()=>n,Gu:()=>l,Js:()=>b,hx:()=>F,oA:()=>I});var d=o(2784),g=o(12294),v=o(75845);const l=(0,d.createContext)(void 0),A=M=>M.clearHoverValue;function b(){return I(A)}const S=M=>M.setHoverValue;function n(){return I(S)}const E=()=>{};function F(M){const D=M?.disableUpdates!==!0,H=M?.componentId,j=M?.isPlaybackSeconds??!1,L=(0,d.useCallback)(P=>{if(P.hoverValue!=null)return P.hoverValue.type==="PLAYBACK_SECONDS"&&j||H==null||P.hoverValue.componentId===H?P.hoverValue:void 0},[H,j]);return I(D?L:E)}function I(M){const D=(0,v.qe)(l);return(0,g.oR)(D,M)}},31748:(le,C,o)=>{"use strict";o.d(C,{B:()=>n,V:()=>S});var d=o(52322),g=o(2784),v=o(75845),l=o(1375),A=o(23621);const b=(0,g.createContext)(void 0);b.displayName="UserNodeStateContext";function S({children:E}){const[F,I]=(0,g.useState)({rosLib:A.k,typesLib:(0,l.ym)(),nodeStates:{}}),M=(0,g.useCallback)((B,z)=>{I(Y=>({...Y,nodeStates:{...Y.nodeStates,[B]:{logs:[],...Y.nodeStates[B],diagnostics:z}}}))},[]),D=(0,g.useCallback)((B,z)=>{I(Y=>({...Y,nodeStates:{...Y.nodeStates,[B]:{diagnostics:[],...Y.nodeStates[B],logs:(Y.nodeStates[B]?.logs??[]).concat(z)}}}))},[]),H=(0,g.useCallback)(B=>{I(z=>({...z,nodeStates:{...z.nodeStates,[B]:{diagnostics:[],...z.nodeStates[B],logs:[]}}}))},[]),j=(0,g.useCallback)(B=>{I(z=>({...z,rosLib:B}))},[]),L=(0,g.useCallback)(B=>{I(z=>({...z,typesLib:B}))},[]),P=(0,v.O4)({state:F,setUserNodeDiagnostics:M,addUserNodeLogs:D,clearUserNodeLogs:H,setUserNodeRosLib:j,setUserNodeTypesLib:L});return(0,d.jsx)(b.Provider,{value:P,children:E})}function n(){return(0,v.qe)(b,"UserNodeStateContext")}},54490:(le,C,o)=>{"use strict";o.d(C,{C5:()=>n,G4:()=>I,Q:()=>F,VI:()=>E,gx:()=>b,q2:()=>S});var d=o(2784),g=o(41110),v=o(12294),l=o(92532),A=o(75845);const b=["panel-settings","topics","problems"],S=["events","variables","studio-logs-settings"],n=(0,d.createContext)(void 0);n.displayName="WorkspaceContext";const E={selectPanelSettingsOpen:M=>M.sidebars.left.open&&M.sidebars.left.item==="panel-settings"};function F(M){const D=(0,A.qe)(n);return(0,v.oR)(D,M)}function I(M){const D=(0,A.qe)(n);return(0,g.useSyncExternalStoreWithSelector)(D.subscribe,D.getState,D.getState,M,l.X)}},26775:(le,C,o)=>{"use strict";o.d(C,{W:()=>z});var d=o(67067),g=o(76635),v=o(2784),l=o(87438),A=o(75845),b=o(80204),S=o(15116),n=o(98043),E=o(39471),F=o(5227),I=o(28904),M=o(55433),D=o(54490),H=o(21023),j=o.n(H);async function L(Y){try{return await window.showOpenFilePicker(Y)}catch($){if($.name==="AbortError")return[];throw $}}function P(Y){const{selectSource:$}=(0,E.n)(),ve=(0,v.useMemo)(()=>Y.reduce((q,Pe)=>Pe.supportedFileTypes?[...q,...Pe.supportedFileTypes]:q,[]),[Y]);return(0,v.useCallback)(async()=>{const[q]=await L({types:[{description:ve.join(", "),accept:{"application/octet-stream":ve}}]});if(!q)return;const Pe=await q.getFile(),ie=Y.filter(x=>{if(!x.supportedFileTypes||x.type!=="file")return!1;const R=j().extname(Pe.name);return x.supportedFileTypes.includes(R)});if(ie.length>1)throw new Error(`Multiple source matched ${Pe.name}. This is not supported.`);const fe=ie[0];if(!fe)throw new Error(`Cannot find source to handle ${Pe.name}`);$(fe.id,{type:"file",handle:q})},[ve,$,Y])}function B(Y,$){return Y instanceof Function?Y($):Y}function z(){const{setState:Y}=(0,A.qe)(D.C5),{availableSources:$}=(0,E.n)(),ve=(0,b.z)(),q=(0,S.b)(),Pe=(0,l.Z)(),{getCurrentLayoutState:ie,setCurrentLayout:fe}=(0,n._B)(),x=P($),R=(0,v.useCallback)(T=>{Y((0,d.Uy)(T))},[Y]),Q=(0,F.Z)(async()=>{const T=await showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!1,types:[{description:"JSON Files",accept:{"application/json":[".json"]}}]});if(!Pe())return;const Z=await T[0].getFile(),ge=await Z.text();if(!Pe())return;let we;try{we=JSON.parse(ge)}catch(Oe){throw new Error(`${Z.name} is not a valid layout: ${Oe.message}`)}if(typeof we!="object"||!we)throw new Error(`${Z.name} is not a valid layout`);const Be=we;if(q.importLayoutFile){await q.importLayoutFile(Z.name,Be);return}fe({data:Be}),ve.logEvent(I.q.LAYOUT_IMPORT)},[ve,q,Pe,fe]),ce=(0,v.useCallback)(()=>{const T=ie().selectedLayout?.data;if(!T)return;const Z=ie().selectedLayout?.name??"foxglove-layout",ge=JSON.stringify(T,void 0,2)??"";(0,M.W)(ge,`${Z}.json`),ve.logEvent(I.q.LAYOUT_EXPORT)},[ve,ie]);return(0,v.useMemo)(()=>({dialogActions:{dataSource:{close:()=>{R(T=>{T.dialogs.dataSource={activeDataSource:void 0,item:void 0,open:!1}})},open:(T,Z)=>{R(ge=>{ge.dialogs.dataSource.activeDataSource=Z,ge.dialogs.dataSource.item=T,ge.dialogs.dataSource.open=!0})}},openFile:{open:x},preferences:{close:()=>{R(T=>{T.dialogs.preferences={open:!1,initialTab:void 0}})},open:T=>{R(Z=>{Z.dialogs.preferences={open:!0,initialTab:T}})}}},featureTourActions:{startTour:T=>{R(Z=>{Z.featureTours.active=T})},finishTour:T=>{R(Z=>{Z.featureTours.active=void 0,Z.featureTours.shown=(0,g.union)(Z.featureTours.shown,[T])})}},openPanelSettings:()=>{R(T=>{T.sidebars.left.item="panel-settings",T.sidebars.left.open=!0})},playbackControlActions:{setRepeat:T=>{R(Z=>{const ge=B(T,Z.playbackControls.repeat);Z.playbackControls.repeat=ge})}},sidebarActions:{left:{selectItem:T=>{R(Z=>{Z.sidebars.left.item=T,Z.sidebars.left.open=T!=null})},setOpen:T=>{R(Z=>{const ge=B(T,Z.sidebars.left.open);if(ge){const we=D.gx.find(Be=>Be===Z.sidebars.left.item);Z.sidebars.left.open=ge,Z.sidebars.left.item=we??"panel-settings"}else Z.sidebars.left.open=!1})},setSize:T=>{R(Z=>{Z.sidebars.left.size=T})}},right:{selectItem:T=>{R(Z=>{Z.sidebars.right.item=T,Z.sidebars.right.open=T!=null})},setOpen:T=>{R(Z=>{const ge=B(T,Z.sidebars.right.open),we=D.q2.find(Be=>Be===Z.sidebars.right.item);ge?(Z.sidebars.right.open=ge,Z.sidebars.right.item=we??"variables"):Z.sidebars.right.open=!1})},setSize:T=>{R(Z=>{Z.sidebars.right.size=T})}}},layoutActions:{importFromFile:Q,exportToFile:ce}}),[ce,Q,x,R])}},74602:(le,C,o)=>{"use strict";o.d(C,{b:()=>d.b,v:()=>n});var d=o(27803),g=o(54764),v=o.n(g),l=o(2784),A=o(93455),b=o(59635),S=o(27999);function n(){const[E,F]=(0,d.b)(A.o.TIME_FORMAT),[I]=(0,d.b)(A.o.TIMEZONE),M=(0,l.useMemo)(()=>E==="SEC"?"SEC":"TOD",[E]),D=(0,l.useCallback)(L=>(0,b.p6)(L,I),[I]),H=(0,l.useCallback)(L=>M==="TOD"?(0,b.mr)(L,I):(0,S.Eo)(L),[M,I]),j=(0,l.useCallback)(L=>M==="TOD"?v().duration(L.sec*1e3).format("h:mm:ss",{trim:!1})+`.${L.nsec}`:(0,S.Eo)(L),[M]);return{formatDate:D,formatTime:H,formatDuration:j,setTimeFormat:F,timeFormat:M,timeZone:I}}},27803:(le,C,o)=>{"use strict";o.d(C,{b:()=>v});var d=o(2784),g=o(82799);function v(l){const A=(0,g.H)(),[b,S]=(0,d.useState)(()=>{const E=A.get(l);if(!(typeof E=="string"&&E.length===0))return E});(0,d.useEffect)(()=>{const E=F=>{S(F)};return A.addChangeListener(l,E),()=>{A.removeChangeListener(l,E)}},[l,A]);const n=(0,d.useCallback)(async E=>{S(E),await A.set(l,E)},[A,l]);return[b,n]}},5227:(le,C,o)=>{"use strict";var d="../../packages/studio-base/src/hooks/useCallbackWithToast.ts";o.d(C,{Z:()=>b});var g=o(74595),v=o(2784),l=o(23503);const A=l.ZP.getLogger(d);function b(S,n){const{enqueueSnackbar:E}=(0,g.Ds)();return(0,v.useCallback)(async(...F)=>{try{await S(...F);return}catch(I){A.error(I),E(I.toString(),{variant:"error"})}},[E,...n])}},36423:(le,C,o)=>{"use strict";o.d(C,{X:()=>g,Z:()=>l});var d=o(98043);const g=Object.freeze({}),v=A=>A.selectedLayout?.data?.globalVariables??g;function l(){const{setGlobalVariables:A,overwriteGlobalVariables:b}=(0,d._B)(),S=(0,d.NS)(v);return{setGlobalVariables:A,overwriteGlobalVariables:b,globalVariables:S}}},77861:(le,C,o)=>{"use strict";o.d(C,{Z:()=>g});var d=o(2784);function g(v,l){const A=(0,d.useRef)(v),b=(0,d.useRef)(v),S=(0,d.useRef)(Date.now());return v!==A.current&&A.current!==b.current&&Date.now()-S.current<200&&l(),b.current=A.current,A.current=v,S.current=Date.now(),v}},17512:(le,C,o)=>{"use strict";o.d(C,{gV:()=>tg,oQ:()=>ee.o,Gm:()=>Lm,sl:()=>cm,z8:()=>I0,s6:()=>A0,EU:()=>n0,Yc:()=>i0,w0:()=>h0,VO:()=>B0,Vu:()=>m0,initI18n:()=>_g,installDevtoolsFormatters:()=>rg,overwriteFetch:()=>lg.Z,waitForFonts:()=>cg});var d={};o.r(d),o.d(d,{addPanel:()=>ug,appBar:()=>pg,appSettings:()=>fg,dataSourceInfo:()=>hg,desktopWindow:()=>Pg,general:()=>gg,incompatibleLayoutVersion:()=>mg,log:()=>yg,openDialog:()=>vg,panelConfigVersionGuard:()=>Ag,panelSettings:()=>xg,panels:()=>bg,plot:()=>Eg,settingsEditor:()=>Cg,stateTransitions:()=>Sg,threeDee:()=>Tg});var g={};o.r(g),o.d(g,{addPanel:()=>Bg,appBar:()=>Zg,appSettings:()=>Ig,dataSourceInfo:()=>Lg,general:()=>Mg,log:()=>Rg,openDialog:()=>Og,panelSettings:()=>wg,panels:()=>Dg,plot:()=>jg,settingsEditor:()=>Ng,threeDee:()=>kg});var v={};o.r(v),o.d(v,{addPanel:()=>Wg,appBar:()=>$g,appSettings:()=>Fg,dataSourceInfo:()=>Hg,general:()=>Ug,log:()=>Qg,openDialog:()=>Vg,panelSettings:()=>Gg,panels:()=>zg,plot:()=>Yg,settingsEditor:()=>Kg,threeDee:()=>Xg});var l=o(2784);const A=(0,l.createContext)(void 0);A.displayName="DialogHostIdContext";function b(){return useContext(A)}const S=null;var n=o(52322),E=o(12238),F=o(78683),I=o(47746),M=o(91897);function D(){const e=(0,I.Z)();return(0,n.jsx)(M.Z,{styles:{"html, body":{boxSizing:"border-box",margin:0,padding:0,height:"100%",width:"100%",lineHeight:1.15},"*, *:before, *:after":{boxSizing:"inherit"},body:{background:e.palette.background.default,color:e.palette.text.primary,font:"inherit",fontFamily:e.typography.body2.fontFamily,fontFeatureSettings:e.typography.body2.fontFeatureSettings,fontSize:e.typography.body2.fontSize,fontWeight:e.typography.body2.fontWeight,overscrollBehavior:"none"},"#root":{height:"100%",width:"100%",display:"flex",flexDirection:"column",position:"relative",flex:"1 1 100%",outline:"none",overflow:"hidden",zIndex:0}}})}var H=o(42893),j=o(12294),L=o(75845);const P=(0,l.createContext)(void 0);function B(e){const t=(0,L.qe)(P);return(0,j.oR)(t,e)}const z=[];function Y(){return(0,H.M)(e=>({eventFetchCount:0,events:{loading:!1,value:z},filter:"",selectedEventId:void 0,eventsSupported:!1,deviceId:void 0,refreshEvents:()=>{e(t=>({eventFetchCount:t.eventFetchCount+1}))},selectEvent:t=>{e({selectedEventId:t})},setEvents:t=>{e({events:t,selectedEventId:void 0})},setFilter:t=>{e({filter:t})},setEventsSupported:t=>{e({eventsSupported:t})},setDeviceId:t=>{e({deviceId:t})}}))}function $({children:e}){const[t]=(0,l.useState)(Y);return(0,n.jsx)(P.Provider,{value:t,children:e})}var ve=o(76940),q=o(23503);const Pe=(0,l.createContext)(void 0);function ie(){const e=(0,L.qe)(Pe);return(0,j.oR)(e)}var fe="../../packages/studio-base/src/providers/StudioLogsSettingsProvider/store.ts";const x=q.ZP.getLogger(fe),R="warn";function Q(e){const t=(0,q.A_)(e?.globalLevel??R),s=e?.disabledChannels??[];x.debug(`Initializing log Config. ${s.length} disabled channels.`);const a=[],i=new Map,r=q.ZP.channels().sort((u,p)=>u.name().localeCompare(p.name()));for(const u of r){const p=u.name()?u.name():"<root>";s.includes(p)?u.setLevel("warn"):u.setLevel(t),i.has(p)||a.push({name:p,enabled:u.isLevelOn(t)});const h=i.get(p)??[];h.push(u),i.set(p,h)}function c(u,p){const h=u().globalLevel;let f=!1;for(const m of a){const y=i.get(m.name);if(!y)continue;const w=y[0];w&&w.isLevelOn(h)!==m.enabled&&(m.enabled=!m.enabled,f=!0)}f&&p({channels:[...a]})}return(0,H.M)((u,p)=>({globalLevel:t,channels:a,setGlobalLevel(h){x.debug(`Set global level: ${h}`);for(const[f,m]of i)for(const y of m)y.setLevel(h);u({globalLevel:h}),c(p,u)},enableChannel(h){x.debug(`Enable channel: ${h}`);const f=i.get(h)??[];for(const m of f)m.setLevel("debug");c(p,u)},disableChannel(h){x.debug(`Disable channel: ${h}`);const f=i.get(h)??[];for(const m of f)m.setLevel("warn");c(p,u)},enablePrefix(h){x.debug(`Enable prefix ${h}`);for(const[f,m]of i)if(f.startsWith(h))for(const y of m)y.setLevel("debug");c(p,u)},disablePrefix(h){x.debug(`Disable prefix ${h}`);for(const[f,m]of i)if(f.startsWith(h))for(const y of m)y.setLevel("warn");c(p,u)}}))}function ce(e){const[t,s]=(0,ve.Z)("fox.studio-logs-settings",{}),[a,i]=(0,l.useState)(()=>Q(t)),r=(0,l.useRef)(t);return(0,l.useEffect)(()=>{r.current=t}),(0,l.useEffect)(()=>{const c=a.getState().channels.length,u=setInterval(()=>{c!==q.ZP.channels().length&&i(Q(r.current))},1e3);return()=>{clearInterval(u)}},[a,t]),(0,l.useEffect)(()=>a.subscribe(c=>{const u=[];for(const p of c.channels)p.enabled||u.push(p.name);s({globalLevel:c.globalLevel,disabledChannels:u})}),[a,s]),(0,n.jsx)(Pe.Provider,{value:a,children:e.children})}var T=o(76635),Z=o(86495);function ge(){return(0,H.M)(e=>({eventsAtHoverValue:{},globalBounds:void 0,hoveredEvent:void 0,hoverValue:void 0,clearHoverValue:t=>{e(s=>({hoverValue:s.hoverValue?.componentId===t?void 0:s.hoverValue}))},setEventsAtHoverValue:t=>{e({eventsAtHoverValue:(0,T.keyBy)(t,s=>s.event.id)})},setGlobalBounds:t=>{e(typeof t=="function"?s=>({globalBounds:t(s.globalBounds)}):{globalBounds:t})},setHoveredEvent:t=>{e(t?{hoveredEvent:t,hoverValue:{componentId:`event_${t.event.id}`,type:"PLAYBACK_SECONDS",value:t.secondsSinceStart}}:{hoveredEvent:void 0,hoverValue:void 0})},setHoverValue:t=>{e(s=>({hoverValue:(0,T.isEqual)(t,s.hoverValue)?s.hoverValue:t}))}}))}function we({children:e}){const[t]=(0,l.useState)(ge());return(0,n.jsx)(Z.Gu.Provider,{value:t,children:e})}var Be=o(74595),Oe=o(21023),V=o.n(Oe),N=o(72970),ee=o(93455),ae=o(85108),me=o(3896),de=o(29022),pe=o(87037),oe=o(38677),ne=o(20379),ue=o(77668),X=o(68588),he=o(1547);const Ee=(0,N.ZL)()(e=>({tooltip:{marginTop:`${e.spacing(.5)} !important`},iconButton:{borderRadius:0,fontSize:24,padding:e.spacing(1.25),"svg:not(.MuiSvgIcon-root)":{fontSize:"1em"},"&:hover":{backgroundColor:(0,he.Z)(e.palette.common.white).setAlpha(.08).toRgbString()},"&.Mui-selected":{backgroundColor:e.palette.appBar.primary},"&.Mui-disabled":{color:"currentColor",opacity:e.palette.action.disabledOpacity}}})),ze=(0,l.forwardRef)((e,t)=>{const{title:s,className:a,children:i,color:r="inherit",...c}=e,{classes:u,cx:p}=Ee();return(0,n.jsx)(ne.Z,{disableInteractive:!0,classes:{tooltip:u.tooltip},title:s,arrow:!1,enterDelay:200,children:(0,n.jsx)(pe.Z,{color:r,ref:t,className:p(u.iconButton,a),...c,children:i})})});ze.displayName="AppBarIconButton";var be=o(3925),Se=o(56961),Te=o(80078);const Re=16,Ie=(0,N.ZL)()(()=>({root:{display:"flex",justifyContent:"flex-start",overflow:"hidden"},start:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flexShrink:1},end:{whiteSpace:"nowrap",flexBasis:"content",flexGrow:0,flexShrink:0,maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"}}));function Ce({text:e,endTextLength:t,className:s,style:a}){const{classes:i,cx:r}=Ie();let c=Math.max(0,e.length-(t==null||t===0?Re:t));for(;c<e.length&&e.charAt(c).match(/\s/);)c+=2;const u=e.substring(0,c),p=e.substring(c),h=(0,l.useCallback)(f=>{f.preventDefault(),f.stopPropagation(),f.clipboardData.setData("text/plain",e)},[e]);return u?(0,n.jsxs)("div",{"data-testid":"text-middle-truncate",className:r(s,i.root),title:e,style:a,onCopy:h,children:[(0,n.jsx)("div",{className:i.start,children:u}),(0,n.jsx)("div",{className:i.end,children:p})]}):(0,n.jsx)("div",{className:r(i.end,s),style:a,children:p})}var De=o(80204),Ue=o(15116);const Ke=(0,l.createContext)({currentUser:void 0});Ke.displayName="CurrentUserContext";function je(){return(0,l.useContext)(Ke)}function Ye(){const e=je();return e.currentUser==null?"unauthenticated":e.currentUser.org.isEnterprise?"authenticated-enterprise":e.currentUser.orgPaid===!0?"authenticated-team":"authenticated-free"}const st=null;var Ze=o(39471),Ve=o(54490),lt=o(26775),Ne=o(28904);const Je=(0,N.ZL)()((e,t,s)=>({menu:{pointerEvents:"none"},paper:{pointerEvents:"auto",marginTop:e.spacing(-1)},menuItem:{justifyContent:"space-between",cursor:"pointer",gap:e.spacing(2),"&.Mui-selected, &.Mui-selected:hover":{backgroundColor:e.palette.action.hover},[`:not(:hover, :focus) .${s.endIcon}`]:{opacity:.6},kbd:{font:"inherit",color:e.palette.text.disabled}},menuList:{minWidth:180,maxWidth:220},endIcon:{marginRight:e.spacing(-.75)}}));function We(e){const{classes:t}=Je(),{children:s,items:a,open:i,onPointerEnter:r,id:c}=e,[u,p]=(0,l.useState)(void 0),h=()=>{c&&r(c)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Te.Z,{id:c,ref:f=>{p(f??void 0)},selected:i,className:t.menuItem,onPointerEnter:h,"data-testid":c,children:[s,(0,n.jsx)(ae.l7K,{className:t.endIcon})]}),(0,n.jsx)(be.Z,{classes:{root:t.menu,paper:t.paper},open:i,disablePortal:!0,anchorEl:u,onClose:()=>{p(void 0)},onMouseLeave:()=>{p(void 0)},anchorOrigin:{vertical:"top",horizontal:"right"},MenuListProps:{dense:!0,className:t.menuList},autoFocus:!1,disableAutoFocus:!0,disableEnforceFocus:!0,hideBackdrop:!0,children:a.map((f,m)=>f.type!=="divider"?(0,n.jsxs)(Te.Z,{className:t.menuItem,onClick:f.onClick,disabled:f.disabled,children:[f.label,f.shortcut?(0,n.jsx)("kbd",{children:f.shortcut}):void 0]},f.key):(0,n.jsx)(Se.Z,{variant:"middle"},`${m}-divider`))})]})}const dt=(0,N.ZL)()({menuList:{minWidth:180,maxWidth:220},truncate:{alignSelf:"center !important"}}),vt=e=>e;function Bt(e){const{open:t,handleClose:s,anchorEl:a,anchorReference:i,anchorPosition:r,disablePortal:c}=e,{classes:u}=dt(),{t:p}=(0,X.$G)("appBar"),{appBarMenuItems:h}=(0,Ue.b)(),[f,m]=(0,l.useState)(),y=Ye(),w=(0,De.z)(),{recentSources:k,selectRecent:W}=(0,Ze.n)(),{sidebars:{left:{open:G},right:{open:J}}}=(0,Ve.G4)(vt),{sidebarActions:K,dialogActions:ye,layoutActions:re}=(0,lt.W)(),se=(0,l.useCallback)(()=>{m(void 0),s()},[s]),_=(0,l.useCallback)(rt=>{m(rt)},[]),O=(0,l.useCallback)(rt=>{w.logEvent(Ne.q.APP_MENU_CLICK,{user:y,cta:rt})},[w,y]),Ae=(0,l.useMemo)(()=>{const rt=[{type:"item",label:p("open"),key:"open",onClick:()=>{ye.dataSource.open("start"),O("open-data-source-dialog"),se()}},{type:"item",label:p("openLocalFile"),key:"open-file",onClick:()=>{O("open-file"),se(),ye.openFile.open().catch(console.error)}},{type:"item",label:p("openConnection"),key:"open-connection",onClick:()=>{ye.dataSource.open("connection"),O("open-connection"),se()}},{type:"divider"},{type:"item",label:p("recentDataSources"),key:"recent-sources",disabled:!0}];return k.slice(0,5).map(ht=>{rt.push({type:"item",key:ht.id,onClick:()=>{O("open-recent"),W(ht.id),se()},label:(0,n.jsx)(Ce,{text:ht.title,className:u.truncate})})}),rt},[u.truncate,ye.dataSource,ye.openFile,O,se,k,W,p]),tt=(0,l.useMemo)(()=>[{type:"item",label:p(G?"hideLeftSidebar":"showLeftSidebar"),key:"left-sidebar",shortcut:"[",onClick:()=>{K.left.setOpen(!G),se()}},{type:"item",label:p(J?"hideRightSidebar":"showRightSidebar"),key:"right-sidebar",shortcut:"]",onClick:()=>{K.right.setOpen(!J),se()}},{type:"divider"},{type:"item",label:p("importLayoutFromFile"),key:"import-layout",onClick:()=>{re.importFromFile(),se()}},{type:"item",label:p("exportLayoutToFile"),key:"export-layout",onClick:()=>{re.exportToFile(),se()}}],[se,re,G,J,K.left,K.right,p]),At=(0,l.useCallback)(()=>{ye.preferences.open("about"),O("about"),se()},[ye.preferences,O,se]),bt=(0,l.useCallback)(()=>{O("docs"),window.open("https://foxglove.dev/docs","_blank"),se()},[O,se]),Ct=(0,l.useCallback)(()=>{O("join-slack"),window.open("https://foxglove.dev/slack","_blank"),se()},[O,se]),gt=(0,l.useCallback)(()=>{ye.dataSource.open("demo"),O("demo"),se()},[ye.dataSource,O,se]),Dt=(0,l.useMemo)(()=>[{type:"item",key:"about",label:p("about"),onClick:At},{type:"divider"},{type:"item",key:"docs",label:p("viewOurDocs"),onClick:bt,external:!0},{type:"item",key:"join-slack",label:p("joinOurSlack"),onClick:Ct,external:!0},{type:"divider"},{type:"item",key:"demo",label:p("exploreSampleData"),onClick:gt}],[At,gt,bt,Ct,p]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(be.Z,{anchorEl:a,anchorReference:i,anchorPosition:r,disablePortal:c,id:"app-menu",open:t,disableAutoFocusItem:!0,onClose:se,MenuListProps:{"aria-labelledby":"app-menu-button",dense:!0,className:u.menuList},PaperProps:{"data-tourid":"app-menu"},children:[(h??[]).map((rt,ht)=>rt.type==="divider"?(0,n.jsx)(Se.Z,{},`divider${ht}`):(0,n.jsx)(Te.Z,{onClick:rt.onClick,onPointerEnter:()=>{m(void 0)},children:rt.label},rt.key)),(0,n.jsx)(We,{onPointerEnter:_,items:Ae,open:f==="app-menu-file",id:"app-menu-file",children:p("file")}),(0,n.jsx)(We,{onPointerEnter:_,items:tt,open:f==="app-menu-view",id:"app-menu-view",children:p("view")}),(0,n.jsx)(We,{onPointerEnter:_,items:Dt,open:f==="app-menu-help",id:"app-menu-help",children:p("help")})]})})}var ct=o(22499),Le=o(92679),nt=o(38875),_e=o(63832),U=o(93812);const ot=(0,N.ZL)()(e=>({closeButton:{":hover":{backgroundColor:e.palette.error.main}}}));function He({isMaximized:e=!1,onMinimizeWindow:t,onMaximizeWindow:s,onUnmaximizeWindow:a,onCloseWindow:i}){const{classes:r}=ot();return(0,n.jsxs)(U.Z,{direction:"row",gap:1,paddingX:1,children:[(0,n.jsx)(pe.Z,{size:"small",color:"inherit",onClick:t,"data-testid":"win-minimize",children:(0,n.jsx)(_e.Z,{fontSize:"inherit",color:"inherit"})}),(0,n.jsx)(pe.Z,{size:"small",color:"inherit",onClick:e?a:s,"data-testid":"win-maximize",children:e?(0,n.jsx)(nt.Z,{fontSize:"inherit",color:"inherit"}):(0,n.jsx)(ct.Z,{fontSize:"inherit",color:"inherit"})}),(0,n.jsx)(pe.Z,{className:r.closeButton,size:"small",color:"inherit",onClick:i,"data-testid":"win-close",children:(0,n.jsx)(Le.Z,{fontSize:"inherit",color:"inherit"})})]})}var ut=o(15328);function Pt(e){return(0,n.jsxs)(ut.Z,{viewBox:"0 0 400 400",...e,children:[(0,n.jsx)("title",{children:"Foxglove"}),(0,n.jsxs)("g",{fill:"currentColor",children:[(0,n.jsx)("ellipse",{cx:"143.854",cy:"297.143",rx:"38.839",ry:"38.8571"}),(0,n.jsx)("ellipse",{opacity:"0.5",cx:"255.89",cy:"297.143",rx:"38.839",ry:"38.8571"}),(0,n.jsx)("ellipse",{opacity:"0.5",cx:"311.161",cy:"200",rx:"38.839",ry:"38.8571"}),(0,n.jsx)("path",{d:"M143.899 64C153.005 64 161.384 67.1164 168.028 72.3414C176.674 79.3821 187.705 83.603 199.722 83.603C211.739 83.603 222.77 79.3821 231.416 72.3414C238.06 67.1164 246.438 64 255.545 64C277.126 64 294.621 81.5031 294.621 103.094C294.621 124.685 277.126 142.189 255.545 142.189C246.438 142.189 238.06 139.072 231.416 133.847C222.77 126.806 211.739 122.586 199.722 122.586C187.705 122.586 176.674 126.806 168.028 133.847C161.384 139.072 153.005 142.189 143.899 142.189C122.318 142.189 104.823 124.685 104.823 103.094C104.823 81.5031 122.318 64 143.899 64Z"}),(0,n.jsx)("path",{d:"M88.0761 161.177C97.1825 161.177 105.561 164.294 112.205 169.519C120.851 176.559 131.882 180.78 143.899 180.78C155.916 180.78 166.947 176.559 175.593 169.519C182.237 164.294 190.616 161.177 199.722 161.177C221.303 161.177 238.798 178.68 238.798 200.272C238.798 221.863 221.303 239.366 199.722 239.366C190.616 239.366 182.237 236.249 175.593 231.024C166.947 223.984 155.916 219.763 143.899 219.763C131.882 219.763 120.851 223.984 112.205 231.024C105.561 236.249 97.1825 239.366 88.0761 239.366C66.495 239.366 49 221.863 49 200.272C49 178.68 66.495 161.177 88.0761 161.177Z"})]})]})}var xe=o(68434);const Gt=(0,N.ZL)()(e=>({root:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",position:"relative",width:50,flex:"1 0 50px",fontSize:e.typography.caption.fontSize,overflow:"hidden"},label:{fontWeight:"bold"},text:{lineHeight:1.1}}));function Zt(e){return e/1024/1024}function pt(){const e=(0,L.yV)({refreshIntervalMs:5e3}),{classes:t,cx:s}=Gt();if(!e)return(0,n.jsx)(n.Fragment,{});const a=e.usedJSHeapSize/e.jsHeapSizeLimit*100,i=Zt(e.usedJSHeapSize).toLocaleString(),r=Zt(e.jsHeapSizeLimit).toLocaleString();return(0,n.jsx)(ne.Z,{arrow:!1,title:`Used (MB): ${i} / ${r}`,placement:"bottom",children:(0,n.jsxs)("div",{className:t.root,children:[(0,n.jsx)(xe.Z,{className:s(t.label,t.text),variant:"caption",children:"MEM"}),(0,n.jsxs)(xe.Z,{className:t.text,variant:"caption",children:[a.toFixed(2),"%"]})]})})}var qe=o(98043),at=o(74602),it=o(77075),Lt=o(39347),Me=o(40301);function Vt(){const{addPanel:e}=(0,qe._B)();return(0,l.useCallback)(({type:t,config:s,relatedConfigs:a})=>{const i=(0,Me.nJ)(t);e({id:i,config:s,relatedConfigs:a})},[e])}const An=(0,N.ZL)()(e=>({menuList:{minWidth:270,paddingBottom:e.spacing(1)}}));function Qn(e){const{classes:t}=An(),{anchorEl:s,anchorPosition:a,anchorReference:i,disablePortal:r,handleClose:c,open:u}=e,p=Vt();return(0,n.jsx)(be.Z,{id:"add-panel-menu",anchorEl:s,anchorPosition:a,anchorReference:i,disablePortal:r,open:u,onClose:c,MenuListProps:{dense:!0,disablePadding:!0,"aria-labelledby":"add-panel-button",className:t.menuList},anchorOrigin:{horizontal:"left",vertical:"bottom"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{"data-tourid":"add-panel-menu"},children:(0,n.jsx)(Lt.B,{isMenu:!0,onDragStart:c,onPanelSelect:h=>{p(h),c()}})})}var en=o(6989),Ft=o(30280);const Mn=(0,N.ZL)()(e=>({root:{gridArea:"appbar",boxShadow:"none",backgroundColor:e.palette.appBar.main,borderBottom:"none",color:e.palette.common.white,height:Ft.h,paddingRight:"calc(100% - env(titlebar-area-x) - env(titlebar-area-width))",WebkitAppRegion:"drag"}}));function Yn(e){const{children:t,leftInset:s,onDoubleClick:a}=e,{classes:i}=Mn(),r=(0,l.useMemo)(()=>({paddingLeft:s}),[s]),c=(0,l.useCallback)(u=>{u.stopPropagation(),u.preventDefault(),a?.()},[a]);return(0,n.jsx)(en.Z,{className:i.root,style:r,position:"relative",color:"inherit",elevation:0,onDoubleClick:c,"data-tourid":"app-bar",children:t})}var tn=o(52498),ln=o(3104),Qe=o(85026),Ot=o(38642),bn=o(73868);const Jt=o.p+"fa1041107bbf6dc79fdc.png",cn=(0,N.ZL)()({image:{maxWidth:"24rem"}});function dn(e){const{playerProblems:t}=e,{classes:s}=cn(),[a,i]=(0,l.useState)(!0),[r,c]=(0,l.useState)(!1),u=()=>{i(!1),c(!0)},p=t?.find(h=>h.severity==="error"&&h.message==="Insecure WebSocket connection");return r||!p?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)(Ot.Z,{open:a,onClose:u,children:[(0,n.jsxs)(bn.Z,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",paddingX:3,paddingTop:2,children:[(0,n.jsx)(xe.Z,{variant:"h3",paddingTop:1,children:"WebSocket SSL Error"}),(0,n.jsx)(pe.Z,{onClick:()=>{i(!1)},edge:"end",children:(0,n.jsx)(Le.Z,{})})]}),(0,n.jsxs)(bn.Z,{paddingX:3,paddingY:2,rowGap:2,children:[(0,n.jsxs)(xe.Z,{variant:"body1",color:"text.secondary",children:["By default, Chrome prevents a secure ",(0,n.jsx)("code",{children:"https://"})," page from connecting to an insecure ",(0,n.jsx)("code",{children:"ws://"}),' WebSocket server. To allow the connection, enable "Unsafe Scripts" for this page.']}),(0,n.jsx)(xe.Z,{variant:"body1",color:"text.secondary",children:'Click the shield icon at the end of your address bar, and then click "Load Unsafe Scripts."'}),(0,n.jsx)("img",{src:Jt,alt:"WSS screenshot",className:s.image})]})]})}var ke=o(24304),yt=o(59635),Fe=o(27999);const et=e=>e.playerState.activeData?.endTime;function wt(){const e=(0,Qe.An)(et),[t]=(0,at.b)(ee.o.TIMEZONE),{timeFormat:s}=(0,at.v)(),a=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(!a.current)return;if(e==null){a.current.innerText="";return}const i=(0,yt.WU)(e,t),r=(0,Fe.Eo)(e);a.current.innerText=s==="SEC"||!(0,Fe.D3)(e)?r:i},[e,s,t]),(0,n.jsx)("div",{style:{fontFeatureSettings:`${it.R.SANS_SERIF_FEATURE_SETTINGS}, "zero"`},ref:a})}const Et=18,un=(0,N.ZL)()((e,t,s)=>({sourceName:{font:"inherit",fontSize:e.typography.body2.fontSize,display:"flex",alignItems:"center",gap:e.spacing(.5),padding:e.spacing(1.5),paddingInlineEnd:e.spacing(.75),whiteSpace:"nowrap",minWidth:0},adornment:{display:"flex",flex:"none",alignItems:"center",justifyContent:"center",position:"relative",color:e.palette.appBar.primary,width:Et,height:Et},adornmentError:{color:e.palette.error.main},spinner:{position:"absolute",top:0,right:0,left:0,bottom:0,margin:"auto"},textTruncate:{maxWidth:"30vw",overflow:"hidden"},iconButton:{padding:0,position:"relative",zIndex:1,fontSize:Et-2,"svg:not(.MuiSvgIcon-root)":{fontSize:"1rem"}}})),Ss=e=>e.playerState.name,$s=e=>e.playerState.presence,Js=e=>e.playerState.problems,Ts=e=>e.seekPlayback;function Ps(){const{t:e}=(0,X.$G)("appBar"),{classes:t,cx:s}=un(),a=(0,Qe.An)(Ss),i=(0,Qe.An)($s),r=(0,Qe.An)(Js)??[],c=(0,Qe.An)(Ts),{sidebarActions:u}=(0,lt.W)(),p=c==null,h=i===ke.m.RECONNECTING,f=i===ke.m.INITIALIZING,m=i===ke.m.ERROR||r.some(k=>k.severity==="error"),y=h||f,w=f&&a==null?"Initializing...":a;return i===ke.m.NOT_PRESENT?(0,n.jsx)("div",{className:t.sourceName,children:e("noDataSource")}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(dn,{playerProblems:r}),(0,n.jsxs)(U.Z,{direction:"row",alignItems:"center",children:[(0,n.jsxs)("div",{className:t.sourceName,children:[(0,n.jsx)("div",{className:t.textTruncate,children:(0,n.jsx)(Ce,{text:w??`<${e("unknown")}>`})}),p&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"/"}),(0,n.jsx)(wt,{})]})]}),(0,n.jsxs)("div",{className:s(t.adornment,{[t.adornmentError]:m}),children:[y&&(0,n.jsx)(ln.Z,{size:Et,color:"inherit",className:t.spinner,variant:"indeterminate"}),m&&(0,n.jsx)(pe.Z,{color:"inherit",className:t.iconButton,onClick:()=>{u.left.setOpen(!0),u.left.selectItem("problems")},children:(0,n.jsx)(tn.VaY,{})})]})]})]})}var us=o(35936),Dn=o(48907),Bn=o(60189),qs=o(78107);function _s(e){const t=e.onComplete,s=(0,l.useRef)(!1),a=(0,l.useCallback)(r=>{s.current||(s.current=!0,t(r))},[t]);(0,qs.Z)("Enter",()=>{a("ok")}),(0,l.useEffect)(()=>()=>{a("cancel")},[a]);const i=[e.cancel!==!1&&(0,n.jsx)(oe.Z,{size:"large",variant:"outlined",color:"inherit",onClick:()=>{a("cancel")},children:e.cancel??"Cancel"},"cancel"),(0,n.jsx)(oe.Z,{variant:"contained",size:"large",color:e.variant==="danger"?"error":"primary",type:"submit",children:e.ok??"OK"},"confirm")];return e.variant==="danger"&&i.reverse(),(0,n.jsx)(Ot.Z,{open:!0,onClose:()=>{a("cancel")},maxWidth:"xs",fullWidth:!0,children:(0,n.jsxs)("form",{onSubmit:r=>{r.preventDefault(),a("ok")},children:[(0,n.jsx)(us.Z,{children:e.title}),(0,n.jsx)(Dn.Z,{children:e.prompt}),(0,n.jsx)(Bn.Z,{children:i})]})})}function eo(){const[e,t]=(0,l.useState)();return[(0,l.useCallback)(async a=>await new Promise(i=>{t((0,n.jsx)(_s,{...a,onComplete:r=>{i(r),t(void 0)}}))}),[]),e]}var to="../../packages/studio-base/src/components/AppBar/UserMenu.tsx",Xe=o(63136).Z;const It=q.ZP.getLogger(to),xn=(0,N.ZL)()({menuList:{minWidth:200}});function pn({anchorEl:e,anchorReference:t,anchorPosition:s,disablePortal:a,handleClose:i,open:r}){const{classes:c}=xn(),{currentUser:u,signIn:p,signOut:h}=je(),f=Ye(),m=(0,De.z)(),{enqueueSnackbar:y}=(0,Be.Ds)(),[w,k]=eo(),{dialogActions:W}=(0,lt.W)(),G=(0,l.useCallback)(async()=>{try{await h?.()}catch(O){It.error(O),y(O.toString(),{variant:"error"})}},[y,h]),J=(0,l.useCallback)(()=>{w({title:"Are you sure you want to sign out?",ok:"Sign out"}).then(O=>{O==="ok"&&G()})},[G,w]),K=(0,l.useCallback)(()=>{m.logEvent(Ne.q.APP_BAR_CLICK_CTA,{user:f,cta:"sign-in"}),p?.()},[m,f,p]),ye=(0,l.useCallback)(O=>{m.logEvent(Ne.q.APP_BAR_CLICK_CTA,{user:f,cta:"app-settings-dialog"}),W.preferences.open(O)},[m,f,W.preferences]),re=(0,l.useCallback)(()=>{m.logEvent(Ne.q.APP_BAR_CLICK_CTA,{user:f,cta:"profile"}),window.open(Xe.env.FOXGLOVE_ACCOUNT_PROFILE_URL,"_blank")},[m,f]),se=(0,l.useCallback)(()=>{m.logEvent(Ne.q.APP_BAR_CLICK_CTA,{user:f,cta:"docs"}),window.open("https://foxglove.dev/docs","_blank")},[m,f]),_=(0,l.useCallback)(()=>{m.logEvent(Ne.q.APP_BAR_CLICK_CTA,{user:f,cta:"join-slack"}),window.open("https://foxglove.dev/slack","_blank")},[m,f]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(be.Z,{anchorEl:e,anchorReference:t,anchorPosition:s,disablePortal:a,id:"user-menu",open:r,onClose:i,onClick:i,MenuListProps:{className:c.menuList,dense:!0},PaperProps:{"data-tourid":"user-menu"},children:[u&&(0,n.jsx)(Te.Z,{disabled:!0,children:u.email}),(0,n.jsx)(Te.Z,{onClick:()=>{ye()},children:"Settings"}),(0,n.jsx)(Te.Z,{onClick:()=>{ye("extensions")},children:"Extensions"}),u&&(0,n.jsx)(Te.Z,{onClick:re,children:"User profile"}),(0,n.jsx)(Se.Z,{variant:"middle"}),(0,n.jsx)(Te.Z,{onClick:se,children:"Documentation"}),(0,n.jsx)(Te.Z,{onClick:_,children:"Join Slack community"}),p!=null&&(0,n.jsx)(Se.Z,{variant:"middle"}),u?(0,n.jsx)(Te.Z,{onClick:J,children:"Sign out"}):p!=null?(0,n.jsx)(Te.Z,{onClick:K,children:"Sign in"}):void 0]}),k]})}const nn=(0,N.ZL)()((e,{debugDragRegion:t=!1},s)=>{const a={WebkitAppRegion:"no-drag"};return t&&(a.backgroundColor="red"),{toolbar:{display:"grid",width:"100%",gridTemplateAreas:'"start middle end"',gridTemplateColumns:"1fr auto 1fr",alignItems:"center"},logo:{padding:e.spacing(.75,.5),fontSize:"2rem",color:e.palette.appBar.primary,borderRadius:0,"svg:not(.MuiSvgIcon-root)":{fontSize:"1em"},"&:hover":{backgroundColor:(0,he.Z)(e.palette.common.white).setAlpha(.08).toRgbString()},"&.Mui-selected":{backgroundColor:e.palette.appBar.primary,color:e.palette.common.white},"&.Mui-disabled":{color:"currentColor",opacity:e.palette.action.disabledOpacity}},dropDownIcon:{fontSize:"12px !important"},start:{gridArea:"start",display:"flex",flex:1,alignItems:"center"},startInner:{display:"flex",alignItems:"center",...a},middle:{gridArea:"middle",justifySelf:"center",overflow:"hidden",maxWidth:"100%",...a},end:{gridArea:"end",flex:1,display:"flex",justifyContent:"flex-end"},endInner:{display:"flex",alignItems:"center",...a},keyEquivalent:{fontFamily:it.R.MONOSPACE,background:(0,he.Z)(e.palette.common.white).darken(45).toString(),padding:e.spacing(0,.5),aspectRatio:1,borderRadius:e.shape.borderRadius,marginLeft:e.spacing(1)},tooltip:{marginTop:`${e.spacing(.5)} !important`},avatar:{color:e.palette.common.white,backgroundColor:(0,he.Z)(e.palette.appBar.main).lighten().toString(),height:e.spacing(3.5),width:e.spacing(3.5)},iconButton:{padding:e.spacing(1),borderRadius:0,"&:hover":{backgroundColor:(0,he.Z)(e.palette.common.white).setAlpha(.08).toString(),[`.${s.avatar}`]:{backgroundColor:(0,he.Z)(e.palette.appBar.main).lighten(20).toString()}},"&.Mui-selected":{backgroundColor:e.palette.appBar.primary,[`.${s.avatar}`]:{backgroundColor:(0,he.Z)(e.palette.appBar.main).setAlpha(.3).toString()}}},button:{marginInline:e.spacing(1),backgroundColor:e.palette.appBar.primary,"&:hover":{backgroundColor:e.palette.augmentColor({color:{main:e.palette.appBar.primary}}).dark}}}}),wn=e=>e.selectedLayout!=null,En=e=>e;function no(e){const{debugDragRegion:t,disableSignIn:s=!1,isMaximized:a,leftInset:i,onCloseWindow:r,onDoubleClick:c,onMaximizeWindow:u,onMinimizeWindow:p,onUnmaximizeWindow:h,showCustomWindowControls:f=!1}=e,{classes:m,cx:y,theme:w}=nn({debugDragRegion:t}),{currentUser:k,signIn:W}=je(),{t:G}=(0,X.$G)("appBar"),{appBarLayoutButton:J}=(0,Ue.b)(),K=(0,De.z)(),[ye=!1]=(0,at.b)(ee.o.ENABLE_MEMORY_USE_INDICATOR),re=(0,qe.NS)(wn),{sidebars:{left:{open:se},right:{open:_}}}=(0,Ve.G4)(En),{sidebarActions:O}=(0,lt.W)(),[Ae,tt]=(0,l.useState)(void 0),[At,bt]=(0,l.useState)(void 0),[Ct,gt]=(0,l.useState)(void 0),Dt=Boolean(Ae),rt=Boolean(At),ht=Boolean(Ct);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Yn,{onDoubleClick:c,leftInset:i,children:(0,n.jsxs)("div",{className:m.toolbar,children:[(0,n.jsx)("div",{className:m.start,children:(0,n.jsxs)("div",{className:m.startInner,children:[(0,n.jsxs)(pe.Z,{className:y(m.logo,{"Mui-selected":Dt}),color:"inherit",id:"app-menu-button",title:"Menu","aria-controls":Dt?"app-menu":void 0,"aria-haspopup":"true","aria-expanded":Dt?"true":void 0,"data-tourid":"app-menu-button",onClick:Tt=>{tt(Tt.currentTarget)},children:[(0,n.jsx)(Pt,{fontSize:"inherit",color:"inherit"}),(0,n.jsx)(ae.Xqf,{className:m.dropDownIcon,primaryFill:w.palette.common.white})]}),(0,n.jsx)(Bt,{open:Dt,anchorEl:Ae,handleClose:()=>{tt(void 0)}}),(0,n.jsx)(ze,{className:y({"Mui-selected":ht}),color:"inherit",disabled:!re,id:"add-panel-button","data-tourid":"add-panel-button",title:"Add panel","aria-label":"Add panel button","aria-controls":ht?"add-panel-menu":void 0,"aria-haspopup":"true","aria-expanded":ht?"true":void 0,onClick:Tt=>{gt(Tt.currentTarget)},children:(0,n.jsx)(me.xcP,{})})]})}),(0,n.jsx)("div",{className:m.middle,children:(0,n.jsx)(Ps,{})}),(0,n.jsx)("div",{className:m.end,children:(0,n.jsxs)("div",{className:m.endInner,children:[ye&&(0,n.jsx)(pt,{}),J,(0,n.jsxs)(U.Z,{direction:"row",alignItems:"center","data-tourid":"sidebar-button-group",children:[(0,n.jsx)(ze,{title:(0,n.jsxs)(n.Fragment,{children:[se?"Hide":"Show"," left sidebar"," ",(0,n.jsx)("kbd",{className:m.keyEquivalent,children:"["})]}),"aria-label":`${se?"Hide":"Show"} left sidebar`,onClick:()=>{O.left.setOpen(!se)},"data-tourid":"left-sidebar-button",children:se?(0,n.jsx)(de.JaP,{}):(0,n.jsx)(de.iek,{})}),(0,n.jsx)(ze,{title:(0,n.jsxs)(n.Fragment,{children:[_?"Hide":"Show"," right sidebar"," ",(0,n.jsx)("kbd",{className:m.keyEquivalent,children:"]"})]}),"aria-label":`${_?"Hide":"Show"} right sidebar`,onClick:()=>{O.right.setOpen(!_)},"data-tourid":"right-sidebar-button",children:_?(0,n.jsx)(de.heV,{}):(0,n.jsx)(de.K1j,{})})]}),!s&&!k&&W!=null&&(0,n.jsx)(oe.Z,{variant:"contained",color:"primary",className:m.button,size:"small",onClick:()=>{W(),K.logEvent(Ne.q.APP_BAR_CLICK_CTA,{user:"unauthenticated",cta:"sign-in"})},children:G("signIn")}),(0,n.jsx)(ne.Z,{classes:{tooltip:m.tooltip},title:k?.email??"Profile",arrow:!1,children:(0,n.jsx)(pe.Z,{className:y(m.iconButton,{"Mui-selected":rt}),"aria-label":"User profile menu button",color:"inherit",id:"user-button","data-tourid":"user-button","aria-controls":rt?"user-menu":void 0,"aria-haspopup":"true","aria-expanded":rt?"true":void 0,onClick:Tt=>{bt(Tt.currentTarget)},"data-testid":"user-button",children:(0,n.jsx)(ue.Z,{src:k?.avatarImageUrl??void 0,className:m.avatar,variant:"rounded"})})}),f&&(0,n.jsx)(He,{onMinimizeWindow:p,isMaximized:a,onUnmaximizeWindow:h,onMaximizeWindow:u,onCloseWindow:r})]})})]})}),(0,n.jsx)(Qn,{anchorEl:Ct,open:ht,handleClose:()=>{gt(void 0)}}),(0,n.jsx)(pn,{anchorEl:At,open:rt,handleClose:()=>{bt(void 0)}})]})}var Hn=o(87438),Nt=o(96995);const so=(0,N.ZL)()({container:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}});function Is({effect:e}){const{classes:t}=so(),s=(0,l.useRef)(null);return(0,l.useLayoutEffect)(()=>{let a;const i=s.current;if(!i)return;const r=new Nt.xsS,c=new Nt.iKG,u=e==="snow"?75:100,p=new Float32Array(u*3),h=new Float32Array(u*3),f=new Float32Array(u),m=new Float32Array(u),y=new Nt.Pa4,w=new Nt.Ilk;for(let _=0;_<u;_++)y.x=Math.random(),y.y=Math.random(),y.z=-1,y.toArray(p,_*3),e==="snow"?w.setRGB(1,1,1):w.setHSL(Math.random(),1,.5),w.toArray(h,_*3),f[_]=Math.random(),m[_]=Math.random()*Math.PI;const k=new Nt.u9r;k.setAttribute("position",new Nt.TlE(p,3)),k.setAttribute("color",new Nt.TlE(h,3)),k.setAttribute("size",new Nt.TlE(f,1)),k.setAttribute("phase",new Nt.TlE(m,1));const W=new Nt.jyz({uniforms:{time:{value:1},yspeed:{value:e==="snow"?.1:.2},wind:{value:e==="snow"?.02:0}},vertexShader:`
      uniform float time;
      uniform float yspeed;
      uniform float wind;
      attribute vec3 color;
      attribute float size;
      attribute float phase;
      const float xspeed = 10.0;
      const float amplitude = 0.03;
      const float minsize = 5.0;
      const float maxsize = 12.0;
      varying vec4 vcolor;
      void main() {
        vcolor = vec4(color, 1.0);
        float x = mix(-1.0, 1.0, mod(
          position.x + sin(phase + time * xspeed * yspeed) * amplitude + time * xspeed * yspeed * wind,
          1.0));
				float y = mix(-1.0, 1.0, mod(position.y - time * yspeed * mix(0.2, 1.0, size), 1.0));
				gl_PointSize = mix(minsize, maxsize, size);
        gl_Position = projectionMatrix * modelViewMatrix * vec4(x, y, position.z, 1.0);
			}
      `,fragmentShader:`
      varying vec4 vcolor;
			void main() {
        if (length(gl_PointCoord * 2.0 - 1.0) > 1.0) {
          discard;
        }
				gl_FragColor = vcolor;
			}
      `}),G=new Nt.woe(k,W);r.add(G);const J=new Nt.CP7({alpha:!0});J.setPixelRatio(window.devicePixelRatio),J.setSize(i.clientWidth,i.clientHeight),i.appendChild(J.domElement);const K=new Date;function ye(){const _=(new Date().getTime()-K.getTime())/1e3;W.uniforms.time={value:_},J.render(r,c)}let re=!0;function se(){re&&(a=requestAnimationFrame(se),ye())}return se(),()=>{re=!1,k.dispose(),W.dispose(),J.dispose(),i.removeChild(J.domElement),cancelAnimationFrame(a)}},[e]),(0,n.jsx)("div",{className:t.container,ref:s})}var Rn=o(86432),Vn=o(96437),fn=o(41574),jn=o(88687),sn=o(63249),ps=o(2043),Bi=o(75988),oo=o(71092),Ln=o(24957),oa=o(78404),ao=o(72994);function wi(e){return(0,n.jsx)(ut.Z,{...e,children:(0,n.jsxs)("g",{fill:"currentColor",children:[(0,n.jsx)("rect",{x:"8.07",y:"5.38",width:"7.87",height:"7.87",rx:"2"}),(0,n.jsx)("path",{d:"M12,1.53A10.5,10.5,0,1,0,22.5,12,10.51,10.51,0,0,0,12,1.53ZM18.41,19l-1.67-2.61a2.47,2.47,0,0,0-2-1H9.26a2.48,2.48,0,0,0-2,1L5.59,19a9.5,9.5,0,1,1,12.82,0Z"})]})})}function Ri(e){return(0,n.jsx)(ut.Z,{...e,children:(0,n.jsxs)("g",{fill:"currentColor",children:[(0,n.jsx)("path",{d:"M22.5,12A10.5,10.5,0,1,0,5.08,19.87l0,0,.35.28a10,10,0,0,0,1.55,1l.24.12.6.29.4.16.48.17.45.14.48.13c.15,0,.3.07.46.09a5,5,0,0,0,.56.09l.39.05c.32,0,.65.05,1,.05s.66,0,1-.05l.39-.05a5,5,0,0,0,.56-.09,3.41,3.41,0,0,0,.46-.1,3.59,3.59,0,0,0,.47-.12l.47-.14.46-.17.42-.17.55-.26.29-.15a9.84,9.84,0,0,0,1.54-1l.35-.28,0,0A10.44,10.44,0,0,0,22.5,12Zm-5.12,7.82-.15.11-.58.34-.2.12-.61.29a1,1,0,0,1-.18.08,6.77,6.77,0,0,1-.75.28l-.35.1-.48.12-.37.08-.53.08-.31,0c-.29,0-.58,0-.87,0s-.58,0-.87,0l-.31,0-.53-.08-.37-.08-.48-.12L9.09,21a6.77,6.77,0,0,1-.75-.28,1,1,0,0,1-.18-.08l-.61-.29-.2-.12c-.2-.11-.39-.22-.58-.35l-.15-.1-.22-.17L8.06,17a1.51,1.51,0,0,1,1.22-.62h5.44a1.51,1.51,0,0,1,1.21.6l1.67,2.65A1.84,1.84,0,0,1,17.38,19.82Zm-.63-3.38a2.49,2.49,0,0,0-2-1H9.28a2.5,2.5,0,0,0-2,1.07L5.62,19a9.5,9.5,0,1,1,12.76,0Z"}),(0,n.jsx)("path",{d:"M14,5.36h-3.9a2,2,0,0,0-2,2v3.9a2,2,0,0,0,2,2H14a2,2,0,0,0,2-2V7.36A2,2,0,0,0,14,5.36Zm1,5.9a1,1,0,0,1-1,1h-3.9a1,1,0,0,1-1-1V7.36a1,1,0,0,1,1-1H14a1,1,0,0,1,1,1Z"})]})})}var aa;function io(){return io=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},io.apply(this,arguments)}var ji=function(t){return l.createElement("svg",io({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},t),aa||(aa=l.createElement("g",{fill:"currentColor"},l.createElement("path",{d:"m22.6 19.07-1.07-.83c.02-.16.04-.32.04-.49s-.01-.33-.04-.49l1.06-.83a.26.26 0 0 0 .06-.32l-1-1.73c-.06-.11-.19-.15-.31-.11l-1.24.5c-.26-.2-.54-.37-.85-.49l-.19-1.32c-.01-.12-.12-.21-.24-.21h-2c-.12 0-.23.09-.25.21l-.19 1.32c-.3.13-.59.29-.85.49l-1.24-.5c-.11-.04-.24 0-.31.11l-1 1.73c-.06.11-.04.24.06.32l1.06.83a3.908 3.908 0 0 0 0 .98l-1.06.83a.26.26 0 0 0-.06.32l1 1.73c.06.11.19.15.31.11l1.24-.5c.26.2.54.37.85.49l.19 1.32c.02.12.12.21.25.21h2c.12 0 .23-.09.25-.21l.19-1.32c.3-.13.59-.29.84-.49l1.25.5c.11.04.24 0 .31-.11l1-1.73a.26.26 0 0 0-.06-.32Zm-4.78.18c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5Z"}),l.createElement("path",{d:"M4 6v12c0 .69.32 1.29.77 1.78.45.48 1.08.88 1.79 1.2 1.43.64 3.35 1.02 5.43 1.02.51 0 .53-.02 1.01-.07-.42-.52-.46-.84-.88-1.43-1.87-.01-3.78-.36-4.95-.89-.6-.27-1.04-.57-1.32-.86-.28-.29-.37-.54-.37-.75V8.39c.32.22.68.42 1.07.59C7.98 9.62 9.9 10 11.98 10s4-.38 5.43-1.02c.39-.17.75-.37 1.07-.59v3.43h.75c.49 0 .75.56.75.56V6.01c0-.69-.32-1.29-.77-1.78-.45-.48-1.08-.88-1.79-1.2-1.43-.64-3.35-1.02-5.43-1.02s-4 .38-5.43 1.02c-.71.32-1.34.72-1.79 1.2C4.31 4.72 4 5.32 4 6.01Zm1.5 0c0-.21.09-.46.36-.75.28-.3.72-.6 1.32-.86 1.2-.54 2.9-.89 4.82-.89s3.62.35 4.82.89c.6.27 1.04.57 1.32.86.27.29.36.54.36.75s-.09.46-.36.75c-.28.3-.72.6-1.32.86-1.19.54-2.9.89-4.82.89s-3.62-.35-4.82-.89c-.6-.27-1.04-.57-1.32-.86-.27-.29-.36-.54-.36-.75Z"}))))};const Li=ji;var ia;function ro(){return ro=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ro.apply(this,arguments)}var Oi=function(t){return l.createElement("svg",ro({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},t),ia||(ia=l.createElement("path",{fill:"currentColor",d:"M19.25 4H4.75C3.23 4 2 5.23 2 6.75v10.5C2 18.77 3.23 20 4.75 20h14.5c1.52 0 2.75-1.23 2.75-2.75V6.75C22 5.23 20.77 4 19.25 4Zm1.25 2.75v4.5h-3.27V5.5h2.02c.69 0 1.25.56 1.25 1.25Zm-8.06 6h3.29v5.75h-3.29v-5.75Zm0-1.5V5.5h3.29v5.75h-3.29Zm-8.94 6V6.75c0-.69.56-1.25 1.25-1.25h6.19v13H4.75c-.69 0-1.25-.56-1.25-1.25Zm15.75 1.25h-2.02v-5.75h3.27v4.5c0 .69-.56 1.25-1.25 1.25Z"})))};const Ni=Oi;var ra;function lo(){return lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},lo.apply(this,arguments)}var ki=function(t){return l.createElement("svg",lo({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},t),ra||(ra=l.createElement("g",{fill:"currentColor"},l.createElement("path",{d:"M4.75 18.5c-.69 0-1.25-.56-1.25-1.25V6.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v4.98c.55.29 1.05.65 1.5 1.08V6.75C22 5.23 20.77 4 19.25 4H4.75C3.23 4 2 5.23 2 6.75v10.5C2 18.77 3.23 20 4.75 20h6.75c-.2-.47-.34-.98-.42-1.5H4.75Z"}),l.createElement("path",{d:"m22.28 18.82-1.07-.83c.02-.16.04-.32.04-.49s-.01-.33-.04-.49l1.06-.83a.26.26 0 0 0 .06-.32l-1-1.73c-.06-.11-.19-.15-.31-.11l-1.24.5c-.26-.2-.54-.37-.85-.49l-.19-1.32c-.01-.12-.12-.21-.24-.21h-2c-.12 0-.23.09-.25.21l-.19 1.32c-.3.13-.59.29-.85.49l-1.24-.5c-.11-.04-.24 0-.31.11l-1 1.73c-.06.11-.04.24.06.32l1.06.83a3.908 3.908 0 0 0 0 .98l-1.06.83a.26.26 0 0 0-.06.32l1 1.73c.06.11.19.15.31.11l1.24-.5c.26.2.54.37.85.49l.19 1.32c.02.12.12.21.25.21h2c.12 0 .23-.09.25-.21l.19-1.32c.3-.13.59-.29.84-.49l1.25.5c.11.04.24 0 .31-.11l1-1.73a.26.26 0 0 0-.06-.32ZM17.5 19c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5Z"}))))};const Zi=ki,Fi={Add:(0,n.jsx)(ps.F1F,{}),AddIn:(0,n.jsx)(ps.OPr,{}),BacklogList:(0,n.jsx)(Bi.HHE,{}),Blockhead:(0,n.jsx)(Ri,{}),BlockheadFilled:(0,n.jsx)(wi,{}),BookStar:(0,n.jsx)(oo.M02,{}),Cancel:(0,n.jsx)(Ln.a3k,{}),DatabaseSettings:(0,n.jsx)(Li,{}),Delete:(0,n.jsx)(Ln.tlh,{}),Edit:(0,n.jsx)(tn.Np1,{}),ErrorBadge:(0,n.jsx)(Ln.w2A,{}),FileASPX:(0,n.jsx)(Ln.nkr,{}),FiveTileGrid:(0,n.jsx)(Ni,{}),Flow:(0,n.jsx)(oa.AIp,{}),GenericScan:(0,n.jsx)(oo.Y$Z,{}),OpenFile:(0,n.jsx)(Ln.rQu,{}),PanelSettings:(0,n.jsx)(Zi,{}),RectangularClipping:(0,n.jsx)(me.xcP,{}),Settings:(0,n.jsx)(ao.zTZ,{}),Sparkle:(0,n.jsx)(me.iu5,{}),Variable2:(0,n.jsx)(oo.Xni,{}),ROS:(0,n.jsx)(oa.Jw2,{})};function Ui(e){return e.name==null?(0,n.jsx)(n.Fragment,{}):Fi[e.name]}var Rt=o(68234),zi=o(89745);function Wi(e){const[t,s]=(0,l.useState)(),a=e.field,i=r=>{s(void 0);const c=a.validate?.(r.target.value);if(c instanceof Error){s(c.message),e.onError(c.message);return}e.onChange(r.target.value)};return(0,n.jsxs)("div",{children:[(0,n.jsx)(Rt.Z,{fullWidth:!0,disabled:e.disabled,label:a.label,error:t!=null,helperText:t,FormHelperTextProps:{variant:"standard"},placeholder:a.placeholder,defaultValue:a.defaultValue,onChange:i,variant:"outlined",InputProps:{notched:!1},InputLabelProps:{shrink:!0}},a.label),(0,n.jsx)(zi.Z,{children:a.description})]})}var co=o(49001);const Gi=(0,N.ZL)()(e=>({content:{display:"flex",flexDirection:"column",flexGrow:1,height:"100%",justifyContent:"space-between",gap:e.spacing(2),overflowY:"auto"}}));function Qi(e){const{onOpen:t}=e,{classes:s}=Gi(),{dialogActions:a}=(0,lt.W)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:s.content,children:e.children}),(0,n.jsxs)(U.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",paddingX:4,paddingBottom:4,paddingTop:2,children:[(0,n.jsx)(oe.Z,{startIcon:(0,n.jsx)(co.Z,{fontSize:"large"}),onClick:()=>{a.dataSource.open("start")},size:"large",children:"Back"}),(0,n.jsxs)(U.Z,{direction:"row",gap:2,children:[(0,n.jsx)(oe.Z,{size:"large",color:"inherit",variant:"outlined",onClick:()=>{a.dataSource.close()},children:"Cancel"}),(0,n.jsx)(oe.Z,{size:"large",variant:"contained",onClick:t,disabled:t==null,children:"Open"})]})]})]})}const Yi=(0,N.ZL)()(e=>({grid:{padding:e.spacing(4,4,0),columnGap:e.spacing(4),rowGap:e.spacing(2),[e.breakpoints.up("md")]:{overflow:"hidden",display:"grid",padding:e.spacing(4,4,0,4),gridTemplateAreas:`
        "header header"
        "sidebar form"
      `,gridTemplateColumns:"240px 1fr",gridTemplateRows:"auto auto"}},header:{gridArea:"header"},form:{gridArea:"form",overflowY:"auto"},formInner:{[e.breakpoints.up("md")]:{height:e.spacing(43)}},sidebar:{gridArea:"sidebar",overflowY:"auto"},tab:{"> svg:not(.MuiSvgIcon-root)":{display:"flex",flex:"none",color:e.palette.primary.main,marginRight:e.spacing(1.5)},[e.breakpoints.up("md")]:{textAlign:"right",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",minHeight:"auto",paddingTop:e.spacing(1.5),paddingBottom:e.spacing(1.5)}},indicator:{[e.breakpoints.up("md")]:{right:0,width:"100%",backgroundColor:e.palette.action.hover,borderRadius:e.shape.borderRadius}}})),Hi=e=>e.dialogs.dataSource;function Vi(){const{classes:e}=Yi(),t=(0,I.Z)(),s=(0,Rn.Z)(t.breakpoints.up("md")),{activeDataSource:a}=(0,Ve.Q)(Hi),{dialogActions:i}=(0,lt.W)(),{availableSources:r,selectSource:c}=(0,Ze.n)(),u=(0,De.z)(),p=(0,l.useMemo)(()=>r.filter(re=>re.type==="connection"&&re.hidden!==!0),[r]),h=(0,l.useMemo)(()=>{const re=p.filter(_=>_.disabledReason==null),se=p.filter(_=>_.disabledReason);return[...re,...se]},[p]),[f,m]=(0,l.useState)(()=>{const re=p.findIndex(_=>_===a),se=re<0?0:re;return u.logEvent(Ne.q.DIALOG_SELECT_VIEW,{type:"live",data:h[se]?.id}),se}),y=(0,l.useMemo)(()=>h[f],[h,f]),[w,k]=(0,l.useState)(new Map),[W,G]=(0,l.useState)({});(0,l.useLayoutEffect)(()=>{const re=p.findIndex(se=>se===a);re>=0&&m(re)},[a,p]),(0,l.useLayoutEffect)(()=>{const re={};for(const se of y?.formConfig?.fields??[])se.defaultValue!=null&&(re[se.id]=se.defaultValue);G(re)},[y]);const J=(0,l.useCallback)(()=>{y&&(c(y.id,{type:"connection",params:W}),u.logEvent(Ne.q.DIALOG_CLOSE,{activeDataSource:a}),i.dataSource.close())},[y,c,W,u,a,i.dataSource]),K=y?.disabledReason!=null||w.size>0,ye=(0,l.useCallback)(re=>{re.preventDefault(),K||J()},[K,J]);return(0,n.jsx)(Qi,{onOpen:K?void 0:J,children:(0,n.jsxs)(U.Z,{className:e.grid,children:[(0,n.jsx)("header",{className:e.header,children:(0,n.jsx)(xe.Z,{variant:"h3",fontWeight:600,gutterBottom:!0,children:"Open a new connection"})}),(0,n.jsx)("div",{className:e.sidebar,children:(0,n.jsx)(Vn.Z,{classes:{indicator:e.indicator},variant:"scrollable",textColor:"inherit",orientation:s?"vertical":"horizontal",onChange:(re,se)=>{m(se),u.logEvent(Ne.q.DIALOG_SELECT_VIEW,{type:"live",data:h[se]?.id})},value:f,children:h.map((re,se)=>{const{id:_,iconName:O,displayName:Ae}=re;return(0,n.jsx)(fn.Z,{value:se,icon:s?(0,n.jsx)(Ui,{name:O??"Flow"}):void 0,label:Ae,className:e.tab},_)})})}),(0,n.jsx)(U.Z,{className:e.form,flex:"1 0",children:(0,n.jsx)("form",{onSubmit:ye,children:(0,n.jsxs)(U.Z,{className:e.formInner,gap:2,children:[y?.disabledReason==null&&y?.warning!=null&&(0,n.jsx)(jn.Z,{severity:"warning",children:y.warning}),y?.disabledReason!=null&&(0,n.jsx)(jn.Z,{severity:"warning",children:y.disabledReason}),y?.description&&(0,n.jsx)(xe.Z,{children:y.description}),y?.formConfig!=null&&(0,n.jsx)(U.Z,{flexGrow:1,justifyContent:"space-between",children:(0,n.jsx)(U.Z,{gap:2,children:y.formConfig.fields.map(re=>(0,n.jsx)(Wi,{field:re,disabled:y.disabledReason!=null,onError:se=>{k(_=>(_.set(re.id,se),new Map(_)))},onChange:se=>{k(_=>(_.delete(re.id),new Map(_))),G(_=>({..._,[re.id]:se}))}},re.id))})}),(0,n.jsx)(U.Z,{direction:"row",gap:1,children:(y?.docsLinks??[]).map(re=>(0,n.jsx)(sn.Z,{color:"primary",href:re.url,target:"_blank",rel:"noreferrer",children:re.label?`View docs for ${re.label}`:"View docs"},re.url))})]})})},y?.id)]})})}var fs=o(81774),hs=o(15400),uo=o(14117);function la(e){return(0,n.jsxs)(ut.Z,{viewBox:"0 0 909 204",...e,children:[(0,n.jsx)("title",{children:"Foxglove"}),(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M313.65 92.55H295.05V156H269.85V92.55H258.15V80.25L270.15 73.8V69.9C270.15 59.3 272.55 51.9 277.35 47.7C282.15 43.4 289.25 41.25 298.65 41.25C302.95 41.25 306.85 41.6 310.35 42.3C313.95 43 317.25 43.85 320.25 44.85L314.25 62.25C312.75 61.85 311.05 61.45 309.15 61.05C307.25 60.65 305.15 60.45 302.85 60.45C300.15 60.45 298.15 61.3 296.85 63C295.65 64.6 295.05 66.9 295.05 69.9V73.65H313.65V92.55ZM402.362 114.6C402.362 128.4 398.712 139 391.412 146.4C384.212 153.8 374.312 157.5 361.712 157.5C353.912 157.5 346.962 155.85 340.862 152.55C334.862 149.15 330.112 144.3 326.612 138C323.212 131.6 321.512 123.8 321.512 114.6C321.512 101 325.112 90.55 332.312 83.25C339.612 75.85 349.562 72.15 362.162 72.15C369.962 72.15 376.862 73.8 382.862 77.1C388.962 80.4 393.712 85.2 397.112 91.5C400.612 97.8 402.362 105.5 402.362 114.6ZM347.162 114.6C347.162 122.3 348.312 128.15 350.612 132.15C352.912 136.05 356.712 138 362.012 138C367.212 138 370.962 136.05 373.262 132.15C375.562 128.15 376.712 122.3 376.712 114.6C376.712 107 375.562 101.3 373.262 97.5C370.962 93.6 367.162 91.65 361.862 91.65C356.662 91.65 352.912 93.6 350.612 97.5C348.312 101.3 347.162 107 347.162 114.6ZM434.075 114L408.125 73.65H436.775L451.175 98.4L465.725 73.65H494.375L468.125 114L495.575 156H466.925L451.175 129.3L435.425 156H406.775L434.075 114ZM533.61 72.15C539.01 72.15 543.61 73.2 547.41 75.3C551.21 77.4 554.36 80.3 556.86 84H557.46L559.41 73.65H581.01V156.15C581.01 167.85 577.46 176.75 570.36 182.85C563.36 188.95 552.76 192 538.56 192C532.36 192 526.76 191.65 521.76 190.95C516.76 190.25 511.86 189 507.06 187.2V166.65C512.16 168.75 517.16 170.3 522.06 171.3C526.96 172.4 532.46 172.95 538.56 172.95C550.06 172.95 555.81 167.7 555.81 157.2V155.55C555.81 154.15 555.86 152.55 555.96 150.75C556.16 148.85 556.36 147.05 556.56 145.35H555.81C553.41 149.25 550.31 152.25 546.51 154.35C542.81 156.45 538.36 157.5 533.16 157.5C523.86 157.5 516.46 153.8 510.96 146.4C505.56 139 502.86 128.5 502.86 114.9C502.86 101.2 505.61 90.65 511.11 83.25C516.71 75.85 524.21 72.15 533.61 72.15ZM542.46 92.1C533.16 92.1 528.51 99.85 528.51 115.35C528.51 123.05 529.66 128.75 531.96 132.45C534.36 136.05 537.96 137.85 542.76 137.85C548.06 137.85 551.86 136.3 554.16 133.2C556.46 130.1 557.61 125 557.61 117.9V114.75C557.61 107.05 556.46 101.35 554.16 97.65C551.96 93.95 548.06 92.1 542.46 92.1ZM628.064 156H602.714V42H628.064V156ZM726.386 114.6C726.386 128.4 722.736 139 715.436 146.4C708.236 153.8 698.336 157.5 685.736 157.5C677.936 157.5 670.986 155.85 664.886 152.55C658.886 149.15 654.136 144.3 650.636 138C647.236 131.6 645.536 123.8 645.536 114.6C645.536 101 649.136 90.55 656.336 83.25C663.636 75.85 673.586 72.15 686.186 72.15C693.986 72.15 700.886 73.8 706.886 77.1C712.986 80.4 717.736 85.2 721.136 91.5C724.636 97.8 726.386 105.5 726.386 114.6ZM671.186 114.6C671.186 122.3 672.336 128.15 674.636 132.15C676.936 136.05 680.736 138 686.036 138C691.236 138 694.986 136.05 697.286 132.15C699.586 128.15 700.736 122.3 700.736 114.6C700.736 107 699.586 101.3 697.286 97.5C694.986 93.6 691.186 91.65 685.886 91.65C680.686 91.65 676.936 93.6 674.636 97.5C672.336 101.3 671.186 107 671.186 114.6ZM761.399 156L730.049 73.65H756.449L771.449 121.35C771.949 123.05 772.399 125.15 772.799 127.65C773.299 130.05 773.599 132.25 773.699 134.25H774.299C774.399 132.15 774.649 129.95 775.049 127.65C775.549 125.35 776.099 123.3 776.699 121.5L791.999 73.65H818.249L786.899 156H761.399ZM864.582 72.15C876.182 72.15 885.382 75.35 892.182 81.75C898.982 88.05 902.382 97.35 902.382 109.65V121.35H850.332C850.532 126.75 852.282 131.05 855.582 134.25C858.882 137.45 863.582 139.05 869.682 139.05C874.882 139.05 879.632 138.55 883.932 137.55C888.332 136.55 892.832 134.95 897.432 132.75V151.5C893.332 153.6 888.982 155.1 884.382 156C879.882 157 874.282 157.5 867.582 157.5C859.282 157.5 851.882 156 845.382 153C838.982 150 833.932 145.4 830.232 139.2C826.632 132.9 824.832 124.95 824.832 115.35C824.832 105.65 826.482 97.6 829.782 91.2C833.082 84.8 837.682 80.05 843.582 76.95C849.582 73.75 856.582 72.15 864.582 72.15ZM865.032 89.7C861.132 89.7 857.882 90.95 855.282 93.45C852.782 95.85 851.282 99.7 850.782 105H879.132C879.032 100.7 877.832 97.1 875.532 94.2C873.232 91.2 869.732 89.7 865.032 89.7Z",fill:"currentColor"}),(0,n.jsx)("circle",{cx:"63.4983",cy:"166",r:"26",fill:"currentColor"}),(0,n.jsx)("circle",{opacity:"0.5",cx:"138.498",cy:"166",r:"26",fill:"currentColor"}),(0,n.jsx)("circle",{opacity:"0.5",cx:"175.498",cy:"101",r:"26",fill:"currentColor"}),(0,n.jsx)("path",{d:"M63.5281 10C69.6242 10 75.2332 12.0853 79.6808 15.5814C85.4685 20.2924 92.8532 23.1167 100.898 23.1167C108.942 23.1167 116.327 20.2924 122.114 15.5814C126.562 12.0853 132.171 10 138.267 10C152.714 10 164.426 21.7116 164.426 36.1587C164.426 50.6057 152.714 62.3174 138.267 62.3174C132.171 62.3174 126.562 60.2321 122.114 56.736C116.327 52.0249 108.942 49.2007 100.898 49.2007C92.8532 49.2007 85.4685 52.0249 79.6808 56.736C75.2332 60.2321 69.6242 62.3174 63.5281 62.3174C49.081 62.3174 37.3694 50.6057 37.3694 36.1587C37.3694 21.7116 49.081 10 63.5281 10Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M26.1587 75.023C32.2548 75.023 37.8638 77.1083 42.3114 80.6044C48.0991 85.3155 55.4838 88.1397 63.5282 88.1397C71.5726 88.1397 78.9574 85.3155 84.745 80.6044C89.1927 77.1083 94.8017 75.023 100.898 75.023C115.345 75.023 127.056 86.7347 127.056 101.182C127.056 115.629 115.345 127.34 100.898 127.34C94.8017 127.34 89.1927 125.255 84.745 121.759C78.9574 117.048 71.5726 114.224 63.5282 114.224C55.4838 114.224 48.0991 117.048 42.3114 121.759C37.8638 125.255 32.2548 127.34 26.1587 127.34C11.7116 127.34 0 115.629 0 101.182C0 86.7347 11.7116 75.023 26.1587 75.023Z",fill:"currentColor"})]})]})}const po=(0,N.ZL)()(e=>({logo:{width:212,height:"auto",marginLeft:e.spacing(-1)},grid:{[e.breakpoints.up("md")]:{display:"grid",gridTemplateAreas:`
        "header spacer"
        "content sidebar"
      `,gridTemplateRows:"content auto",gridTemplateColumns:"1fr 375px"}},header:{padding:e.spacing(6),gridArea:"header",[e.breakpoints.down("md")]:{padding:e.spacing(4)},[`@media (max-height: ${e.breakpoints.values.sm})`]:{display:"none"}},content:{padding:e.spacing(0,6,6),overflow:"hidden",gridArea:"content",[e.breakpoints.down("md")]:{padding:e.spacing(0,4,4)},[`@media (max-height: ${e.breakpoints.values.sm})`]:{paddingTop:e.spacing(6)}},spacer:{gridArea:"spacer",backgroundColor:(0,he.Z)(e.palette.text.primary).setAlpha(.04).toRgbString(),[`@media (max-height: ${e.breakpoints.values.sm})`]:{display:"none"}},sidebar:{gridArea:"sidebar",backgroundColor:(0,he.Z)(e.palette.text.primary).setAlpha(.04).toRgbString(),padding:e.spacing(0,5,5),[e.breakpoints.down("md")]:{padding:e.spacing(4)},[`@media (max-height: ${e.breakpoints.values.sm})`]:{paddingTop:e.spacing(6)}},button:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},connectionButton:{textAlign:"left",justifyContent:"flex-start",padding:e.spacing(2,3),gap:e.spacing(1.5),borderColor:e.palette.divider,".MuiButton-startIcon .MuiSvgIcon-fontSizeLarge":{fontSize:28}},recentListItemButton:{overflow:"hidden",color:e.palette.primary.main,"&:hover":{backgroundColor:"transparent",color:e.palette.primary[e.palette.mode==="dark"?"light":"dark"]}},recentSourceSecondary:{color:"inherit"},featureList:{paddingLeft:e.spacing(1.5),"li:not(:last-of-type)":{marginBottom:e.spacing(.5)}}}));function Ki(e){const{icon:t,onClick:s,text:a,secondaryText:i,href:r,target:c}=e,{classes:u}=po(),p=(0,n.jsx)(oe.Z,{className:u.connectionButton,fullWidth:!0,color:"inherit",variant:"outlined",size:"large",startIcon:t,onClick:s,children:(0,n.jsxs)(U.Z,{flex:"auto",zeroMinWidth:!0,children:[(0,n.jsx)(xe.Z,{variant:"subtitle1",color:"text.primary",children:a}),(0,n.jsx)(xe.Z,{variant:"body2",color:"text.secondary",noWrap:!0,children:i})]})});return r?(0,n.jsx)(sn.Z,{href:r,target:c,style:{textDecoration:"none"},children:p}):p}function Xi(e){const{onSelectView:t}=e,{signIn:s}=je(),a=Ye(),i=(0,De.z)(),{classes:r}=po(),{t:c}=(0,X.$G)("openDialog"),{freeUser:u,teamOrEnterpriseUser:p}=(0,l.useMemo)(()=>{const f={id:"new",title:c("newToFoxgloveStudio"),text:c("newToFoxgloveStudioDescription"),actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(oe.Z,{onClick:()=>{t("demo"),i.logEvent(Ne.q.DIALOG_SELECT_VIEW,{type:"demo"}),i.logEvent(Ne.q.DIALOG_CLICK_CTA,{user:a,cta:"demo"})},className:r.button,variant:"outlined",children:c("exploreSampleData")}),(0,n.jsx)(oe.Z,{href:"https://foxglove.dev/docs/studio/connection/data-sources",target:"_blank",className:r.button,onClick:()=>{i.logEvent(Ne.q.DIALOG_CLICK_CTA,{user:a,cta:"docs"})},children:c("viewOurDocs")})]})};return{freeUser:[f],teamOrEnterpriseUser:[f,{id:"join-community",title:c("joinOurCommunity"),text:c("joinOurCommunityDescription"),actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(oe.Z,{href:"https://foxglove.dev/slack",target:"_blank",className:r.button,variant:"outlined",onClick:()=>{i.logEvent(Ne.q.DIALOG_CLICK_CTA,{user:a,cta:"join-slack"})},children:c("joinOurSlack")}),(0,n.jsx)(oe.Z,{href:"https://github.com/foxglove/studio/issues/new/choose",target:"_blank",className:r.button,onClick:()=>{i.logEvent(Ne.q.DIALOG_CLICK_CTA,{user:a,cta:"go-to-github"})},children:c("openAGitHubIssue")})]})},{id:"need-help",title:c("needHelp"),text:c("needHelpDescription"),actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(oe.Z,{href:"https://foxglove.dev/docs/studio",target:"_blank",className:r.button,variant:"outlined",onClick:()=>{i.logEvent(Ne.q.DIALOG_CLICK_CTA,{user:a,cta:"docs"})},children:c("viewOurDocs")}),(0,n.jsx)(oe.Z,{href:"https://foxglove.dev/tutorials",target:"_blank",className:r.button,onClick:()=>{i.logEvent(Ne.q.DIALOG_CLICK_CTA,{user:a,cta:"tutorials"})},children:c("seeTutorials")})]})}]}},[i,r.button,a,t,c]),h=(0,l.useMemo)(()=>{switch(a){case"unauthenticated":return[...u,{id:"collaborate",title:c("collaborateTitle"),text:(0,n.jsxs)("ul",{className:r.featureList,children:[(0,n.jsx)("li",{children:c("secureStorageOfData")}),(0,n.jsx)("li",{children:c("convenientWebInterface")}),(0,n.jsx)("li",{children:c("canBeShared")})]}),actions:s?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(oe.Z,{className:r.button,variant:"outlined",onClick:()=>{i.logEvent(Ne.q.DIALOG_CLICK_CTA,{user:a,cta:"create-account"}),s()},children:c("createAFreeAccount")}),(0,n.jsx)(oe.Z,{className:r.button,onClick:()=>{i.logEvent(Ne.q.DIALOG_CLICK_CTA,{user:a,cta:"sign-in"}),s()},children:c("signIn")})]}):(0,n.jsx)(oe.Z,{href:"https://foxglove.dev/data-platform",target:"_blank",className:r.button,variant:"outlined",onClick:()=>{i.logEvent(Ne.q.DIALOG_CLICK_CTA,{user:a,cta:"create-account"})},children:c("learnMore")})}];case"authenticated-free":return[{id:"start-collaborating",title:c("startCollaborating"),text:c("startCollaboratingDescription"),actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(oe.Z,{href:"https://console.foxglove.dev/recordings",target:"_blank",variant:"outlined",className:r.button,onClick:()=>{i.logEvent(Ne.q.DIALOG_CLICK_CTA,{user:a,cta:"upload-to-dp"})},children:c("uploadToDataPlatform")}),(0,n.jsx)(oe.Z,{href:"https://foxglove.dev/docs/studio/layouts#team-layouts",target:"_blank",className:r.button,children:c("shareLayouts")})]})},...u];case"authenticated-team":return p;case"authenticated-enterprise":return p}},[i,r.button,r.featureList,a,u,s,p,c]);return(0,n.jsx)(n.Fragment,{children:h.map(f=>(0,n.jsxs)(U.Z,{children:[(0,n.jsx)(xe.Z,{variant:"h5",gutterBottom:!0,children:f.title}),(0,n.jsx)(xe.Z,{variant:"body2",color:"text.secondary",children:f.text}),f.actions!=null&&(0,n.jsx)(U.Z,{direction:"row",flexWrap:"wrap",alignItems:"center",gap:1,paddingTop:1.5,children:f.actions})]},f.id))})}function $i(){const{recentSources:e,selectRecent:t}=(0,Ze.n)(),{classes:s}=po(),a=(0,De.z)(),{t:i}=(0,X.$G)("openDialog"),{dialogActions:r}=(0,lt.W)(),c=(0,l.useMemo)(()=>[{key:"open-local-file",text:i("openLocalFile"),secondaryText:i("openLocalFileDescription"),icon:(0,n.jsx)(ut.Z,{fontSize:"large",color:"primary",viewBox:"0 0 2048 2048",children:(0,n.jsx)("path",{d:"M1955 1533l-163-162v677h-128v-677l-163 162-90-90 317-317 317 317-90 90zM256 1920h1280v128H128V0h1115l549 549v475h-128V640h-512V128H256v1792zM1280 512h293l-293-293v293z"})}),onClick:()=>{r.dataSource.open("file"),a.logEvent(Ne.q.DIALOG_SELECT_VIEW,{type:"local"})}},{key:"open-url",text:i("openUrl"),secondaryText:i("openUrlDescription"),icon:(0,n.jsx)(ut.Z,{fontSize:"large",color:"primary",viewBox:"0 0 2048 2048",children:(0,n.jsx)("path",{d:"M256 1920h512v128H128V0h1115l549 549v91h-640V128H256v1792zM1280 512h293l-293-293v293zm128 256q133 0 249 50t204 137 137 203 50 250q0 133-50 249t-137 204-203 137-250 50q-133 0-249-50t-204-137-137-203-50-250q0-133 50-249t137-204 203-137 250-50zm0 1152q21 0 37-14t28-38 21-53 15-57 9-53 6-41h-230q2 14 5 39t10 53 16 58 21 52 27 39 35 15zm126-384q1-32 1-64t1-64q0-63-3-128h-250q-3 65-3 128 0 64 3 128h251zm-638-128q0 32 4 64t12 64h243q-3-64-3-128 0-63 3-128H912q-8 32-12 64t-4 64zm512-512q-19 0-34 15t-27 39-21 53-15 57-10 53-6 39h225q-2-13-6-37t-11-53-16-58-20-54-27-39-32-15zm253 384q3 65 3 128v64q0 32-2 64h242q8-32 12-64t4-64q0-32-4-64t-12-64h-243zm190-128q-43-75-108-131t-145-88q21 52 32 107t19 112h202zm-637-218q-78 32-142 88t-107 130h200q13-111 49-218zm-249 730q42 73 106 129t142 88q-21-51-31-106t-17-111H965zm642 215q77-32 139-87t105-128h-198q-5 51-15 109t-31 106z"})}),iconProps:{iconName:"FileASPX"},href:"https://console.foxglove.dev/recordings",onClick:()=>{a.logEvent(Ne.q.DIALOG_SELECT_VIEW,{type:"data-platform"})}},{key:"open-connection",text:i("openConnection"),secondaryText:i("openConnectionDescription"),icon:(0,n.jsx)(ut.Z,{fontSize:"large",color:"primary",viewBox:"0 0 2048 2048",children:(0,n.jsx)("path",{d:"M1408 256h640v640h-640V640h-120l-449 896H640v256H0v-640h640v256h120l449-896h199V256zM512 1664v-384H128v384h384zm1408-896V384h-384v384h384z"})}),onClick:()=>{r.dataSource.open("connection"),a.logEvent(Ne.q.DIALOG_SELECT_VIEW,{type:"live"})}}],[a,r.dataSource,i]);return(0,n.jsxs)(U.Z,{className:s.grid,children:[(0,n.jsx)("header",{className:s.header,children:(0,n.jsx)(la,{color:"primary",className:s.logo})}),(0,n.jsx)(U.Z,{className:s.content,children:(0,n.jsxs)(U.Z,{gap:4,children:[(0,n.jsxs)(U.Z,{gap:1,children:[(0,n.jsx)(xe.Z,{variant:"h5",gutterBottom:!0,children:i("openDataSource")}),c.map(u=>(0,n.jsx)(Ki,{text:u.text,secondaryText:u.secondaryText,icon:u.icon,onClick:u.onClick,href:u.href,target:"_blank"},u.key))]}),e.length>0&&(0,n.jsxs)(U.Z,{gap:1,children:[(0,n.jsx)(xe.Z,{variant:"h5",gutterBottom:!0,children:i("recentDataSources")}),(0,n.jsx)(fs.Z,{disablePadding:!0,children:e.slice(0,5).map(u=>(0,n.jsx)(hs.ZP,{disablePadding:!0,id:u.id,children:(0,n.jsx)(uo.Z,{disableGutters:!0,onClick:()=>{t(u.id)},className:s.recentListItemButton,children:(0,n.jsx)(Ce,{className:s.recentSourceSecondary,text:u.title})})},u.id))})]})]})}),(0,n.jsx)("div",{className:s.spacer}),(0,n.jsx)(U.Z,{gap:4,className:s.sidebar,children:(0,n.jsx)(Xi,{onSelectView:r.dataSource.open})})]})}const j0=null,Ji=(0,N.ZL)()(e=>({paper:{maxWidth:`calc(min(${e.breakpoints.values.md}px, 100% - ${e.spacing(4)}))`},closeButton:{position:"absolute",right:0,top:0,margin:e.spacing(3)}})),qi=e=>e.dialogs.dataSource;function _i(e){const{backdropAnimation:t}=e,{classes:s}=Ji(),{availableSources:a,selectSource:i}=(0,Ze.n)(),{dialogActions:r}=(0,lt.W)(),{activeDataSource:c,item:u}=(0,Ve.Q)(qi),p=(0,Hn.Z)(),h=(0,l.useMemo)(()=>a.find(k=>k.type==="sample"),[a]),f=(0,De.z)(),m=(0,l.useCallback)(()=>{f.logEvent(Ne.q.DIALOG_CLOSE,{activeDataSource:c}),r.dataSource.close()},[f,c,r.dataSource]);(0,l.useLayoutEffect)(()=>{u==="file"?r.openFile.open().catch(k=>{console.error(k)}).finally(()=>{p()&&r.dataSource.open("start")}):u==="demo"&&h&&i(h.id)},[u,r,h,p,i]);const y=(0,l.useMemo)(()=>{const k=new Date;if(t!==!1){if(k>=new Date(k.getFullYear(),11,25))return(0,n.jsx)(Is,{effect:"snow"});if(k<new Date(k.getFullYear(),0,2))return(0,n.jsx)(Is,{effect:"confetti"})}},[t]),w=(0,l.useMemo)(()=>{switch(u){case"demo":return{title:"",component:(0,n.jsx)(n.Fragment,{})};case"connection":return{title:"Open new connection",component:(0,n.jsx)(Vi,{})};default:return{title:"Get started",component:(0,n.jsx)($i,{})}}},[u]);return(0,n.jsxs)(Ot.Z,{open:!0,onClose:m,fullWidth:!0,maxWidth:"lg",BackdropProps:{children:y},PaperProps:{square:!1,elevation:4,className:s.paper},children:[(0,n.jsx)(pe.Z,{className:s.closeButton,onClick:m,edge:"end",children:(0,n.jsx)(Le.Z,{})}),(0,n.jsx)(U.Z,{flexGrow:1,fullHeight:!0,justifyContent:"space-between",overflow:u==="connection"?"hidden":void 0,children:w.component})]})}var On=o(47591);const er=(0,N.ZL)()(e=>({outer:{background:(0,On.Fq)(e.palette.background.paper,.84),backgroundImage:`linear-gradient(${e.palette.action.hover}, ${e.palette.action.hover})`,pointerEvents:"none",padding:e.spacing(5),boxShadow:"none",maxHeight:"none"},inner:{borderRadius:16,height:"100%",border:`2px dashed ${e.palette.text.primary}`,display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",justifyContent:"center",fontWeight:800,padding:e.spacing(5),lineHeight:"normal"}}));function tr(e){const{classes:t}=er();return(0,n.jsx)(Ot.Z,{fullScreen:!0,open:e.open,style:{zIndex:1e7},classes:{paperFullScreen:t.outer},children:(0,n.jsx)("div",{className:t.inner,children:(0,n.jsx)(xe.Z,{variant:"h1",align:"center",children:e.children})})})}const nr=tr;var sr="../../packages/studio-base/src/components/DocumentDropListener.tsx";const or=q.ZP.getLogger(sr);function ar(e){const[t,s]=(0,l.useState)(!1),{onDrop:a,allowedExtensions:i}=e,{enqueueSnackbar:r}=(0,Be.Ds)(),c=(0,l.useCallback)(async h=>{if(s(!1),!h.dataTransfer||!i)return;let f=[];const m=[],y=[],w=[],k=h.dataTransfer.items;for(const J of Array.from(k)){window.isSecureContext&&"getAsFileSystemHandle"in J?m.push(J.getAsFileSystemHandle()):or.info("getAsFileSystemHandle not available on a dropped item. Features requiring handles will not be available for the item",J);const K=J.webkitGetAsEntry();if(K?.isFile===!0){const ye=J.getAsFile();ye&&y.push(ye)}else K?.isDirectory===!0&&w.push(K)}if(w.length===0)for(const J of m){const K=await J;K instanceof FileSystemFileHandle&&f.push(K)}if(y.length===0&&w.length===0&&f.length===0)return;for(const J of w){const K=await new Promise((ye,re)=>{J.createReader().readEntries(ye,re)});for(const ye of K)if(ye.isFile){const re=await new Promise((se,_)=>{ye.file(se,_)});y.push(re)}}(w.length>0||f.length===0)&&(f=void 0);const W=y.filter(J=>i.includes((0,Oe.extname)(J.name))),G=f?.filter(J=>i.includes((0,Oe.extname)(J.name)));if(W.length===0&&G?.length===0){r("The file format is unsupported.",{variant:"error"});return}h.preventDefault(),h.stopPropagation(),a?.({files:W,handles:G})},[r,a,i]),u=(0,l.useCallback)(h=>{if(!i)return;const{dataTransfer:f}=h;f?.types.includes("Files")===!0&&(h.stopPropagation(),h.preventDefault(),f.dropEffect="copy",s(!0))},[i]),p=(0,l.useCallback)(()=>{s(!1)},[]);return(0,l.useLayoutEffect)(()=>(document.addEventListener("dragover",u),document.addEventListener("drop",c),document.addEventListener("dragleave",p),()=>{document.removeEventListener("dragover",u),document.removeEventListener("drop",c),document.removeEventListener("dragleave",p)}),[p,u,c]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"file",style:{display:"none"},onChange:h=>{h.target.files&&e.onDrop?.({files:Array.from(h.target.files)})},"data-puppeteer-file-upload":!0,multiple:!0}),(0,n.jsx)(nr,{open:t,children:"Drop a file here"})]})}var fo=o(54675),Ms=o(31563);function ho({text:e,highlight:t}){if(!t?.trim())return(0,n.jsx)("span",{children:e});const s=new RegExp(`(${(0,T.escapeRegExp)(t)})`,"gi"),a=e.split(s);return(0,n.jsx)("span",{children:a.filter(i=>i).map((i,r)=>s.test(i)?(0,n.jsx)("mark",{children:i},r):(0,n.jsx)("span",{children:i},r))})}var ir=o(2784);const rr=(0,N.ZL)()((e,t,s)=>({spacer:{cursor:"default",height:e.spacing(1),gridColumn:"span 2"},event:{display:"contents",cursor:"pointer","&:hover":{[`.${s.eventMetadata}`]:{backgroundColor:(0,On.Fq)(e.palette.info.main,e.palette.action.hoverOpacity),borderColor:e.palette.info.main}}},eventSelected:{[`.${s.eventMetadata}`]:{backgroundColor:(0,On.Fq)(e.palette.info.main,e.palette.action.activatedOpacity),borderColor:e.palette.info.main,boxShadow:`0 0 0 1px ${e.palette.info.main}`}},eventHovered:{[`.${s.eventMetadata}`]:{backgroundColor:(0,On.Fq)(e.palette.info.main,e.palette.action.hoverOpacity),borderColor:e.palette.info.main}},eventMetadata:{padding:e.spacing(1),backgroundColor:e.palette.background.default,borderRight:`1px solid ${e.palette.divider}`,borderBottom:`1px solid ${e.palette.divider}`,"&:nth-of-type(odd)":{borderLeft:`1px solid ${e.palette.divider}`},"&:first-of-type":{borderTop:`1px solid ${e.palette.divider}`,borderTopLeftRadius:e.shape.borderRadius},"&:nth-of-type(2)":{borderTop:`1px solid ${e.palette.divider}`,borderTopRightRadius:e.shape.borderRadius},"&:nth-last-of-type(2)":{borderBottomRightRadius:e.shape.borderRadius},"&:nth-last-of-type(3)":{borderBottomLeftRadius:e.shape.borderRadius}}}));function lr(e){if(e.durationNanos==="0")return"-";if(!e.durationNanos)return"";const t=BigInt(e.durationNanos);return t>=BigInt(1e9)?`${Number(t/BigInt(1e9))}s`:t>=BigInt(1e6)?`${Number(t/BigInt(1e6))}ms`:t>=BigInt(1e3)?`${Number(t/BigInt(1e3))}\xB5s`:`${e.durationNanos}ns`}function cr(e){const{event:t,filter:s,formattedTime:a,isHovered:i,isSelected:r,onClick:c,onHoverStart:u,onHoverEnd:p}=e,{classes:h,cx:f}=rr(),m=(0,T.compact)([["timestamp",a],Number(t.event.durationNanos)>0&&["duration",lr(t.event)],...Object.entries(t.event.metadata)]);return(0,n.jsxs)("div",{"data-testid":"sidebar-event",className:f(h.event,{[h.eventSelected]:r,[h.eventHovered]:i}),onClick:()=>{c(t)},onMouseEnter:()=>{u(t)},onMouseLeave:()=>{p(t)},children:[m.map(([y,w])=>(0,n.jsxs)(l.Fragment,{children:[(0,n.jsx)("div",{className:h.eventMetadata,children:(0,n.jsx)(ho,{text:y??"",highlight:s})}),(0,n.jsx)("div",{className:h.eventMetadata,children:(0,n.jsx)(ho,{text:w??"",highlight:s})})]},y)),(0,n.jsx)("div",{className:h.spacer})]})}const dr=ir.memo(cr),ur=(0,N.ZL)()(e=>({appBar:{top:-1,zIndex:e.zIndex.appBar-1,display:"flex",flexDirection:"row",padding:e.spacing(1),gap:e.spacing(1),alignItems:"center",borderBottom:`1px solid ${e.palette.divider}`},grid:{display:"grid",flexShrink:1,gridTemplateColumns:"auto 1fr",overflowY:"auto",padding:e.spacing(1)},root:{backgroundColor:e.palette.background.paper,maxHeight:"100%"}})),pr=e=>e.seekPlayback,fr=e=>e.filter,hr=e=>e.setFilter,gr=e=>e.events,mr=e=>e.hoveredEvent,yr=e=>e.setHoveredEvent,vr=e=>e.eventsAtHoverValue,Ar=e=>e.selectedEventId,br=e=>e.selectEvent;function xr(){const e=B(gr),t=B(Ar),s=B(br),{formatTime:a}=(0,at.v)(),i=(0,Qe.An)(pr),r=(0,Z.oA)(vr),c=(0,Z.oA)(mr),u=(0,Z.oA)(yr),p=B(fr),h=B(hr),f=(0,l.useMemo)(()=>(e.value??[]).map(G=>({...G,formattedTime:a(G.event.startTime)})),[e,a]),m=(0,l.useCallback)(()=>{h("")},[h]),y=(0,l.useCallback)(G=>{G.event.id===t?s(void 0):s(G.event.id),i&&i(G.event.startTime)},[i,s,t]),w=(0,l.useCallback)(()=>{u(void 0)},[u]),k=(0,l.useCallback)(G=>{u(G)},[u]),{classes:W}=ur();return(0,n.jsxs)(U.Z,{className:W.root,fullHeight:!0,children:[(0,n.jsx)(en.Z,{className:W.appBar,position:"sticky",color:"inherit",elevation:0,children:(0,n.jsx)(Rt.Z,{variant:"filled",fullWidth:!0,value:p,onChange:G=>{h(G.currentTarget.value)},placeholder:"Search by key, value, or key:value",InputProps:{startAdornment:(0,n.jsx)(Ms.Z,{fontSize:"small"}),endAdornment:p!==""&&(0,n.jsx)(pe.Z,{edge:"end",onClick:m,size:"small",children:(0,n.jsx)(fo.Z,{fontSize:"small"})})}})}),e.loading&&(0,n.jsx)(U.Z,{flex:"auto",padding:2,fullHeight:!0,alignItems:"center",justifyContent:"center",children:(0,n.jsx)(ln.Z,{})}),e.error&&(0,n.jsx)(U.Z,{flex:"auto",padding:2,fullHeight:!0,alignItems:"center",justifyContent:"center",children:(0,n.jsx)(xe.Z,{align:"center",color:"error",children:"Error loading events."})}),e.value&&e.value.length===0&&(0,n.jsx)(U.Z,{flex:"auto",padding:2,fullHeight:!0,alignItems:"center",justifyContent:"center",children:(0,n.jsx)(xe.Z,{align:"center",color:"text.secondary",children:"No Events"})}),(0,n.jsx)("div",{className:W.grid,children:f.map(G=>(0,n.jsx)(dr,{event:G,filter:p,formattedTime:G.formattedTime,isHovered:c?G.event.id===c.event.id:r[G.event.id]!=null,isSelected:G.event.id===t,onClick:y,onHoverStart:k,onHoverEnd:w},G.event.id))})]})}var ca=o(86451),Er=o(13688),Cr=o(70714),go=o(75785),Kn=o(29268),mo=o(50985),Sr=o(2784);const Tr=(0,N.ZL)()(e=>({iconButtonSmall:{padding:e.spacing(.91125),borderRadius:0}}));function Pr({allowShare:e,onReset:t,onShare:s,fontSize:a="medium"}){const{classes:i,cx:r}=Tr(),[c,u]=Sr.useState(),{t:p}=(0,X.$G)("panelSettings"),h=Boolean(c),f=y=>{u(y.currentTarget)},m=()=>{u(void 0)};return(0,n.jsxs)("div",{children:[(0,n.jsx)(pe.Z,{className:r({[i.iconButtonSmall]:a==="small"}),id:"basic-button","aria-controls":h?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":h?"true":void 0,onClick:f,children:(0,n.jsx)(mo.Z,{fontSize:a})}),(0,n.jsxs)(be.Z,{id:"basic-menu",anchorEl:c,open:h,onClose:m,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,n.jsx)(Te.Z,{disabled:!e,onClick:()=>{s(),m()},children:p("importOrExportSettingsWithEllipsis")}),(0,n.jsx)(Te.Z,{onClick:()=>{t(),m()},children:p("resetToDefaults")})]})]})}var yo=o(43749),Ir=o(5817),Yt=o.n(Ir),vo=o(85321),da=o(23759),Mr=o(80051),Xn=o(50799),Ht=o(75254),Ao=o(29800),Kt=o(91004),Dr=o(43684),bo=o(74352),Br=o(86635),ua=o(14648),Ds=o(94225);const wr=(0,N.ZL)()(e=>({container:{padding:e.spacing(2)},picker:{"&.react-colorful":{width:"100%",gap:e.spacing(.75)},".react-colorful__last-control":{borderRadius:0},".react-colorful__saturation":{borderRadius:0},".react-colorful__hue":{order:-1},".react-colorful__hue-pointer":{zIndex:4}}}));function xo(e){const{alphaType:t,onChange:s,value:a,onEnterKey:i}=e,{classes:r}=wr(),{swatchColor:c,updatePrefixedColor:u,editedValueIsInvalid:p,editedValue:h,updateEditedValue:f,onInputBlur:m}=jr({alphaType:t,onChange:s,value:a});return(0,n.jsxs)(U.Z,{className:r.container,gap:1,children:[t==="alpha"?(0,n.jsx)(ua.L_,{className:r.picker,color:c,onChange:u}):(0,n.jsx)(ua.gW,{className:r.picker,color:c,onChange:u}),(0,n.jsx)(Rt.Z,{size:"small",error:p,InputProps:{onFocus:y=>{y.target.select()},role:"input",startAdornment:(0,n.jsx)(Br.Z,{fontSize:"small"}),style:{fontFamily:it.R.MONOSPACE}},placeholder:t==="alpha"?"RRGGBBAA":"RRGGBB",value:h,onKeyDown:y=>y.key==="Enter"&&i?.(),onChange:y=>{f(y.target.value)},onBlur:m})]})}const Rr=/^#?([0-9A-F]{3,8})$/i;function pa(e,t){const a=Rr.exec(e)?.[1]?.length??0;return a===3||a===6||t==="alpha"&&(a===4||a===8)}function jr(e){const{alphaType:t,onChange:s,value:a}=e,i=(0,l.useMemo)(()=>a?(0,he.Z)(a):void 0,[a]),r=t==="alpha"?i?.toHex8():i?.toHex(),u=(t==="alpha"?i?.toHex8String():i?.toHexString())??"#00000044",[p,h]=(0,l.useState)(r??""),f=p.length>0&&!pa(p,t),m=(0,Ds.y1)(W=>{s(`#${W}`),h(W)}),y=(0,l.useCallback)(W=>{const G=(0,he.Z)(W);m(t==="alpha"?G.toHex8():G.toHex())},[t,m]),w=(0,l.useCallback)(W=>{if(h(W),pa(W,t)){const G=(0,he.Z)(W),J=t==="alpha"?G.toHex8String():G.toHexString();s(J)}},[t,s]),k=(0,l.useCallback)(()=>{h(r??"")},[r]);return{swatchColor:u,updatePrefixedColor:y,editedValueIsInvalid:f,editedValue:p,updateEditedValue:w,onInputBlur:k}}function Lr(e,t){const s=(0,he.Z)(t);return s.isValid()?e.palette.getContrastText(s.toHexString()):e.palette.text.primary}const Or=(0,N.ZL)()(e=>({root:{backgroundImage:"linear-gradient(to bottom right, white 50%, black 50%)",borderRadius:e.shape.borderRadius,display:"inline-flex",aspectRatio:"1/1",flexShrink:0},swatch:{aspectRatio:"1/1"},sizeSmall:{height:e.spacing(2),width:e.spacing(2)},sizeMedium:{height:e.spacing(2),width:e.spacing(2)},sizeLarge:{height:e.spacing(3),width:e.spacing(3)}}));function Eo(e){const{color:t,size:s="medium",className:a,...i}=e,{classes:r,cx:c,theme:u}=Or();return(0,n.jsx)("div",{className:c(r.root,{[r.sizeSmall]:s==="small",[r.sizeMedium]:s==="medium",[r.sizeLarge]:s==="large"},a),...i,children:(0,n.jsx)("div",{title:t,className:r.swatch,style:{backgroundColor:t,border:`1px solid ${Lr(u,t)}`}})})}const Nr=(0,N.ZL)()((e,t,s)=>({root:{position:"relative"},rootDisabled:{pointerEvents:"none"},textField:{".MuiInputBase-formControl.MuiInputBase-root":{padding:0},".MuiInputBase-root":{fontFamily:`${it.R.MONOSPACE}`,cursor:"pointer",[`:not(:hover) .${s.iconButton}`]:{visibility:"hidden"}},".MuiInputBase-input":{alignItems:"center",fontFeatureSettings:`${it.R.SANS_SERIF_FEATURE_SETTINGS}, "zero"`}},iconButton:{marginRight:e.spacing(.25),opacity:e.palette.action.disabledOpacity,":hover":{background:"transparent",opacity:1}},colorSwatch:{marginLeft:e.spacing(.75)}}));function fa(e){const{alphaType:t,disabled:s,onChange:a,readOnly:i,hideClearButton:r,value:c}=e,{classes:u,cx:p}=Nr(),[h,f]=(0,l.useState)(void 0),m=(0,l.useMemo)(()=>c?(0,he.Z)(c):void 0,[c]),y=t==="alpha"?m?.toHex8String():m?.toHexString(),w=y??"#00000044",k=(0,l.useCallback)(ye=>{f(ye.currentTarget)},[]),W=(0,l.useCallback)(()=>{f(void 0)},[]),G=(0,l.useCallback)(()=>{a(void 0)},[a]),J=Boolean(h),K=(y??"")===""||(r??!1);return(0,n.jsxs)(U.Z,{className:p(u.root,{[u.rootDisabled]:s===!0||i===!0}),children:[(0,n.jsx)(Rt.Z,{className:u.textField,fullWidth:!0,disabled:s,placeholder:e.placeholder,size:"small",value:y??"",variant:"filled",InputProps:{readOnly:!0,startAdornment:(0,n.jsx)(Eo,{className:u.colorSwatch,color:w,onClick:k,size:"small"}),endAdornment:!K&&(0,n.jsx)(pe.Z,{size:"small",className:u.iconButton,onClick:G,disabled:s,children:(0,n.jsx)(yo.Z,{})})}}),(0,n.jsx)(bo.ZP,{open:J,anchorEl:h,onClose:W,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,n.jsx)(xo,{alphaType:t,value:c,onChange:a,onEnterKey:W})})]})}function kr({colors:e,disabled:t=!1,onChange:s,readOnly:a=!1}){const[i,r]=(0,l.useState)(void 0),[c,u]=(0,l.useState)(void 0),p=(0,l.useCallback)(G=>{a||(r(G.currentTarget),u(void 0))},[a]),h=(0,l.useCallback)(G=>{a||(r(void 0),u(G.currentTarget))},[a]),f=(0,l.useCallback)(()=>{r(void 0),u(void 0)},[]),m=e?.[0]??"#000000",y=e?.[1]??"#FFFFFF",w=(0,he.Z)(m).isValid()?m:"#000000",k=(0,he.Z)(y).isValid()?y:"#FFFFFF",W=(0,I.Z)();return(0,n.jsxs)(U.Z,{direction:"row",alignItems:"center",position:"relative",paddingX:.75,style:{opacity:t?.5:1,pointerEvents:t?"none":"auto",background:`linear-gradient(to right, ${w}, ${k}), repeating-conic-gradient(transparent 0 90deg, ${W.palette.action.disabled} 90deg 180deg) top left/10px 10px repeat`},children:[(0,n.jsx)(Eo,{color:w,onClick:p}),(0,n.jsx)(Rt.Z,{variant:"filled",size:"small",fullWidth:!0,value:`${m} / ${y}`,style:{visibility:"hidden"}}),(0,n.jsx)(Eo,{color:k,onClick:h}),(0,n.jsx)(bo.ZP,{open:i!=null,anchorEl:i,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,n.jsx)(xo,{value:m,alphaType:"alpha",onChange:G=>{s([G,y])},onEnterKey:f})}),(0,n.jsx)(bo.ZP,{open:c!=null,anchorEl:c,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,n.jsx)(xo,{value:y,alphaType:"alpha",onChange:G=>{s([m,G])},onEnterKey:f})})]})}var Zr=o(28319),gs=o(16003);const Fr={ScrubPrecision:4},Ur=(0,N.ZL)()(e=>({iconButton:{"&.MuiIconButton-edgeStart":{marginLeft:e.spacing(-.75),borderTopRightRadius:0,borderBottomRightRadius:0},"&.MuiIconButton-edgeEnd":{marginRight:e.spacing(-.75),borderTopLeftRadius:0,borderBottomLeftRadius:0}},textField:{".MuiInputBase-formControl.MuiInputBase-root":{paddingTop:0,paddingBottom:0},".MuiInputBase-input":{textAlign:"center",fontFamily:it.R.MONOSPACE,cursor:"ew-resize","&::-webkit-outer-spin-button, &::-webkit-inner-spin-button":{appearance:"none",margin:0}},"@media (pointer: fine)":{".MuiIconButton-root":{visibility:"hidden"},"&:hover .MuiIconButton-root":{visibility:"visible"}}},textFieldReadonly:{".MuiInputBase-input":{cursor:"auto"}}}));function $n(e){const{classes:t,cx:s}=Ur(),{value:a,iconDown:i,iconUp:r,step:c=1,min:u,max:p,onChange:h,disabled:f,readOnly:m,precision:y=100}=e,w=(0,l.useRef)(null),k=(0,l.useRef)(0),W=(0,gs.Z)(a),G=(0,T.isFinite)(Number(e.placeholder))?Number(e.placeholder):void 0,J=(0,l.useCallback)(O=>{if(f===!0||m===!0)return;const Ae=O==null?void 0:(0,T.clamp)(O,u??Number.NEGATIVE_INFINITY,p??Number.POSITIVE_INFINITY);h(Ae!=null?(0,T.round)(Ae,y):Ae)},[f,m,u,p,h,y]),K=(0,l.useRef)(!1),ye=(0,l.useCallback)(O=>{K.current=!0,O.currentTarget.setPointerCapture(O.pointerId);const Ae=W.current??G??0;k.current=(0,T.isFinite)(Ae)?Ae:0},[W,G]),re=(0,l.useCallback)(O=>{K.current=!1,O.currentTarget.releasePointerCapture(O.pointerId)},[]),se=(0,l.useCallback)(O=>{if(O.buttons!==1||!K.current)return;O.preventDefault(),O.currentTarget.blur();const Ae=O.shiftKey?10:1,tt=Math.sign(O.movementX)*Math.pow(Math.abs(O.movementX),1.5)*.1*c*Ae;k.current=(0,T.round)(k.current+tt,Fr.ScrubPrecision),J(k.current)},[c,J]),_=w.current===document.activeElement?a:a!=null?(0,T.round)(a,y):void 0;return(0,n.jsx)(Rt.Z,{...e,value:_??"",onChange:O=>{J(O.target.value.length>0?Number(O.target.value):void 0)},type:"number",className:s(t.textField,{[t.textFieldReadonly]:m}),inputProps:{ref:w,step:c,onPointerDown:ye,onPointerUp:re,onPointerMove:se},InputProps:{readOnly:m,startAdornment:(0,n.jsx)(pe.Z,{className:t.iconButton,size:"small",edge:"start",tabIndex:-1,onClick:O=>{J((a??G??0)-(O.shiftKey?c*10:c))},children:i??(0,n.jsx)(co.Z,{fontSize:"small"})}),endAdornment:(0,n.jsx)(pe.Z,{className:t.iconButton,size:"small",edge:"end",tabIndex:-1,onClick:O=>{J((a??G??0)+(O.shiftKey?c*10:c))},children:r??(0,n.jsx)(Zr.Z,{fontSize:"small"})})}})}function zr(e){const{disabled:t=!1,onChange:s,precision:a,readOnly:i=!1,step:r,value:c,min:u,max:p,placeholder:h}=e,f=(0,l.useCallback)((m,y)=>{const w=[...c??[0,0]];w[m]=y,s(w)},[s,c]);return(0,n.jsxs)(U.Z,{gap:.25,children:[(0,n.jsx)($n,{size:"small",disabled:t,readOnly:i,variant:"filled",fullWidth:!0,precision:a,step:r,placeholder:h?.[0],value:c?.[0],min:u,max:p,onChange:m=>{f(0,m)}}),(0,n.jsx)($n,{size:"small",disabled:t,readOnly:i,variant:"filled",fullWidth:!0,precision:a,step:r,placeholder:h?.[1],value:c?.[1],min:u,max:p,onChange:m=>{f(1,m)}})]})}function Wr(e){const{disabled:t=!1,onChange:s,precision:a,readOnly:i=!1,step:r,value:c,min:u,max:p,placeholder:h}=e,f=(0,l.useCallback)((m,y)=>{const w=[...c??[0,0,0]];w[m]=y,s(w)},[s,c]);return(0,n.jsxs)(U.Z,{gap:.25,children:[(0,n.jsx)($n,{size:"small",disabled:t,readOnly:i,variant:"filled",fullWidth:!0,precision:a,step:r,placeholder:h?.[0],value:c?.[0],min:u,max:p,onChange:m=>{f(0,m)}}),(0,n.jsx)($n,{size:"small",disabled:t,readOnly:i,variant:"filled",fullWidth:!0,precision:a,step:r,placeholder:h?.[1],value:c?.[1],min:u,max:p,onChange:m=>{f(1,m)}}),(0,n.jsx)($n,{size:"small",disabled:t,readOnly:i,variant:"filled",fullWidth:!0,precision:a,step:r,placeholder:h?.[2],value:c?.[2],min:u,max:p,onChange:m=>{f(2,m)}})]})}var Gr=o(2784);const Nn=(0,Kt.Z)(),ha=(0,Kt.Z)(),Co=(0,N.ZL)()((e,t,s)=>{const a=e.palette.mode==="dark",i=a?"rgba(255, 255, 255, 0.09)":"rgba(0, 0, 0, 0.06)";return{autocomplete:{".MuiInputBase-root.MuiInputBase-sizeSmall":{paddingInline:0,paddingBlock:e.spacing(.3125)}},clearIndicator:{marginRight:e.spacing(-.25),opacity:e.palette.action.disabledOpacity,":hover":{background:"transparent",opacity:1}},error:{},fieldLabel:{color:e.palette.text.secondary,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},fieldWrapper:{minWidth:e.spacing(14),marginRight:e.spacing(.5),[`&.${s.error} .MuiInputBase-root, .MuiInputBase-root.${s.error}`]:{outline:`1px ${e.palette.error.main} solid`,outlineOffset:-1}},multiLabelWrapper:{display:"grid",gridTemplateColumns:"1fr auto",columnGap:e.spacing(.5),height:"100%",width:"100%",alignItems:"center",textAlign:"end"},pseudoInputWrapper:{borderRadius:e.shape.borderRadius,fontSize:"0.75em",backgroundColor:i,input:{height:"1.77em"},"&:hover":{backgroundColor:a?"rgba(255, 255, 255, 0.13)":"rgba(0, 0, 0, 0.09)","@media (hover: none)":{backgroundColor:i}},"&:focus-within":{backgroundColor:i}},styledToggleButtonGroup:{backgroundColor:e.palette.action.hover,gap:e.spacing(.25),overflowX:"auto","& .MuiToggleButtonGroup-grouped":{margin:e.spacing(.55),borderRadius:e.shape.borderRadius,paddingTop:0,paddingBottom:0,borderColor:"transparent !important",lineHeight:1.75,"&.Mui-selected":{background:e.palette.background.paper,borderColor:"transparent","&:hover":{borderColor:e.palette.action.active}},"&:not(:first-of-type)":{borderRadius:e.shape.borderRadius},"&:first-of-type":{borderRadius:e.shape.borderRadius}}}}});function Qr({actionHandler:e,field:t,path:s}){const{classes:a,cx:i}=Co();switch(t.input){case"autocomplete":return(0,n.jsx)(da.Z,{className:a.autocomplete,size:"small",freeSolo:!0,value:t.value,disabled:t.disabled,readOnly:t.readonly,ListboxComponent:Mr.Z,ListboxProps:{dense:!0},renderOption:(r,c,{selected:u})=>(0,n.jsx)(Te.Z,{selected:u,...r,children:c}),componentsProps:{clearIndicator:{size:"small",className:a.clearIndicator}},clearIcon:(0,n.jsx)(yo.Z,{fontSize:"small"}),renderInput:r=>(0,n.jsx)(Rt.Z,{...r,variant:"filled",size:"small",placeholder:t.placeholder}),onInputChange:(r,c,u)=>{u==="input"&&e({action:"update",payload:{path:s,input:"autocomplete",value:c}})},onChange:(r,c)=>{e({action:"update",payload:{path:s,input:"autocomplete",value:c??void 0}})},options:t.items});case"number":return(0,n.jsx)($n,{size:"small",variant:"filled",value:t.value,disabled:t.disabled,readOnly:t.readonly,placeholder:t.placeholder,fullWidth:!0,max:t.max,min:t.min,precision:t.precision,step:t.step,onChange:r=>{e({action:"update",payload:{path:s,input:"number",value:r}})}});case"toggle":return(0,n.jsx)(Xn.Z,{className:a.styledToggleButtonGroup,fullWidth:!0,value:t.value??Nn,exclusive:!0,disabled:t.disabled,size:"small",onChange:(r,c)=>{c!=null&&t.readonly!==!0&&e({action:"update",payload:{path:s,input:"toggle",value:c===Nn?void 0:c}})},children:t.options.map(r=>(0,n.jsx)(Ht.Z,{value:(typeof r=="object"?r.value:r)??Nn,children:typeof r=="object"?r.label:r},(typeof r=="object"?r.value:r)??Nn))});case"string":return(0,n.jsx)(Rt.Z,{variant:"filled",size:"small",fullWidth:!0,disabled:t.disabled,value:t.value??"",placeholder:t.placeholder,InputProps:{readOnly:t.readonly},onChange:r=>{e({action:"update",payload:{path:s,input:"string",value:r.target.value}})}});case"boolean":return(0,n.jsxs)(Xn.Z,{className:a.styledToggleButtonGroup,fullWidth:!0,value:t.value??!1,exclusive:!0,disabled:t.disabled,size:"small",onChange:(r,c)=>{c!=null&&t.readonly!==!0&&e({action:"update",payload:{path:s,input:"boolean",value:c}})},children:[(0,n.jsx)(Ht.Z,{value:!1,children:"Off"}),(0,n.jsx)(Ht.Z,{value:!0,children:"On"})]});case"rgb":return(0,n.jsx)(fa,{alphaType:"none",disabled:t.disabled,readOnly:t.readonly,placeholder:t.placeholder,value:t.value?.toString(),onChange:r=>{e({action:"update",payload:{path:s,input:"rgb",value:r}})},hideClearButton:t.hideClearButton});case"rgba":return(0,n.jsx)(fa,{alphaType:"alpha",disabled:t.disabled,readOnly:t.readonly,placeholder:t.placeholder,value:t.value?.toString(),onChange:r=>{e({action:"update",payload:{path:s,input:"rgba",value:r}})}});case"messagepath":return(0,n.jsx)(U.Z,{className:a.pseudoInputWrapper,direction:"row",children:(0,n.jsx)(Dr.ZP,{path:t.value??"",disabled:t.disabled,readOnly:t.readonly,supportsMathModifiers:t.supportsMathModifiers,onChange:r=>{e({action:"update",payload:{path:s,input:"messagepath",value:r}})},validTypes:t.validTypes})});case"select":{const r=t.options.findIndex(f=>f.value===t.value),c=t.options[r],u=t.options.length===0;let p=t.value;c?p==null&&(p=Nn):p=ha;const h=!c&&(!u||t.value!=null);return(0,n.jsxs)(Ao.Z,{className:i({[a.error]:h}),size:"small",displayEmpty:!0,fullWidth:!0,disabled:t.disabled,readOnly:t.readonly,variant:"filled",value:p,renderValue:f=>{const m=t.value;for(const y of t.options)if(y.value===m)return y.label.trim();return m},onChange:f=>{e({action:"update",payload:{path:s,input:"select",value:f.target.value===Nn?void 0:f.target.value}})},MenuProps:{MenuListProps:{dense:!0}},children:[t.options.map(({label:f,value:m=Nn,disabled:y})=>(0,n.jsx)(Te.Z,{value:m,disabled:y,children:f},m)),u&&(0,n.jsx)(Te.Z,{disabled:!0,children:"No options"}),!c&&(0,n.jsx)(Te.Z,{style:{display:"none"},value:ha})]})}case"gradient":return(0,n.jsx)(kr,{colors:t.value,disabled:t.disabled,readOnly:t.readonly,onChange:r=>{e({action:"update",payload:{path:s,input:"gradient",value:r}})}});case"vec3":return(0,n.jsx)(Wr,{step:t.step,placeholder:t.placeholder,value:t.value,precision:t.precision,disabled:t.disabled,readOnly:t.readonly,min:t.min,max:t.max,onChange:r=>{e({action:"update",payload:{path:s,input:"vec3",value:r}})}});case"vec2":return(0,n.jsx)(zr,{step:t.step,value:t.value,placeholder:t.placeholder,precision:t.precision,disabled:t.disabled,readOnly:t.readonly,min:t.min,max:t.max,onChange:r=>{e({action:"update",payload:{path:s,input:"vec2",value:r}})}})}}function Yr({field:e}){const{classes:t}=Co();if(e.input==="vec2"){const s=e.labels??["X","Y"];return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:t.multiLabelWrapper,children:[(0,n.jsx)(xe.Z,{title:e.label,variant:"subtitle2",color:"text.secondary",noWrap:!0,flex:"auto",children:e.label}),s.map((a,i)=>(0,n.jsx)(xe.Z,{title:e.label,variant:"subtitle2",color:"text.secondary",noWrap:!0,style:{gridColumn:i===0?"span 1":"2 / span 1"},flex:"auto",children:a},a))]})})}else if(e.input==="vec3"){const s=e.labels??["X","Y","Z"];return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:t.multiLabelWrapper,children:[(0,n.jsx)(xe.Z,{title:e.label,variant:"subtitle2",color:"text.secondary",noWrap:!0,flex:"auto",children:e.label}),s.map((a,i)=>(0,n.jsx)(xe.Z,{title:e.label,variant:"subtitle2",color:"text.secondary",noWrap:!0,style:{gridColumn:i===0?"span 1":"2 / span 1"},flex:"auto",children:a},a))]})})}else return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(xe.Z,{className:t.fieldLabel,title:e.help??e.label,variant:"subtitle2",children:e.label})})}function Hr({actionHandler:e,field:t,path:s}){const i=.75+2*(Math.min(s.length,4)-1),{classes:r,cx:c}=Co();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(U.Z,{direction:"row",alignItems:"center",justifyContent:"flex-end",gap:.5,paddingLeft:i,fullHeight:!0,children:[t.error&&(0,n.jsx)(ne.Z,{arrow:!0,placement:"top",title:(0,n.jsx)(xe.Z,{variant:"subtitle2",children:t.error}),children:(0,n.jsx)(vo.Z,{color:"error",fontSize:"small"})}),(0,n.jsx)(Yr,{field:t})]}),(0,n.jsx)("div",{className:c(r.fieldWrapper,{[r.error]:t.error!=null}),children:(0,n.jsx)(Qr,{actionHandler:e,field:t,path:s})}),(0,n.jsx)(U.Z,{paddingBottom:.25,style:{gridColumn:"span 2"}})]})}const So=Gr.memo(Hr);var To=o(48105),Po=o(96715),Jn=o(65643),Vr=o(89507),Bs=o(42713),Kr=o(29754),ga=o(33209),ma=o(60705),on=o(8220),Io=o(83993),kn=o(82056),Xr=o(14118),ws=o(93553),$r=o(55505),Jr=o(29113),qr=o(66177),_r=o(6163),el=o(47743),tl=o(80516),nl=o(46772),sl=o(3602),ol=o(61024),al=o(88182),il=o(14734),rl=o(83808),ll=o(66714),cl=o(3567),dl=o(97730),ul=o(31384),pl=o(57156),fl=o(77653),hl=o(5918),gl=o(21262),ml=o(23324),yl=o(39773),vl=o(48882),Al=o(13264),bl=o(16522),xl=o(78393),El=o(17713),Cl=o(91316),Sl=o(37727),Tl=o(26029),Pl=o(6377),Il=o(46309),Ml=o(81198),Dl=o(10212);const Mo={Add:ws.Z,Addchart:$r.Z,Background:ll.Z,Camera:ml.Z,Cells:Il.Z,Check:Bs.Z,Circle:qr.Z,Clear:fo.Z,Clock:Xr.Z,Collapse:Tl.Z,Cube:Ml.Z,Delete:_r.Z,Expand:Pl.Z,Flag:tl.Z,Folder:nl.Z,FolderOpen:sl.Z,Grid:ol.Z,Hive:al.Z,ImageProjection:Dl.Z,Map:cl.Z,Move:gl.Z,MoveDown:dl.Z,MoveUp:ul.Z,NorthWest:pl.Z,Note:hl.Z,NoteFilled:fl.Z,Points:Jr.Z,PrecisionManufacturing:yl.Z,Radar:vl.Z,Settings:Al.Z,Shapes:il.Z,Share:bl.Z,SouthEast:xl.Z,Star:El.Z,Timeline:Cl.Z,Topic:Sl.Z,Walk:el.Z,World:rl.Z};function Bl({actions:e,onSelectAction:t}){const[s,a]=(0,l.useState)(void 0),i=Boolean(s),r=p=>{a(p.currentTarget)},c=p=>{t(p),a(void 0)},u=e.some(p=>p.type==="action"&&p.icon);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(pe.Z,{title:"More actions","aria-controls":i?"node-actions-menu":void 0,"aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:r,"data-testid":"node-actions-menu-button",size:"small",children:(0,n.jsx)(mo.Z,{fontSize:"small"})}),(0,n.jsx)(be.Z,{id:"basic-menu",anchorEl:s,open:i,onClose:()=>{a(void 0)},MenuListProps:{"aria-label":"node actions button",dense:!0},children:e.map((p,h)=>{if(p.type==="divider")return(0,n.jsx)(Se.Z,{variant:u?"inset":"fullWidth"},`divider_${h}`);const f=p.icon?Mo[p.icon]:void 0;return(0,n.jsxs)(Te.Z,{onClick:()=>{c(p.id)},children:[f&&(0,n.jsx)(Io.Z,{children:(0,n.jsx)(f,{fontSize:"small"})}),(0,n.jsx)(kn.Z,{inset:!f&&u,disableTypography:!0,children:p.label})]},p.id)})})]})}var qn=o(41518);const wl=(0,N.ZL)()(e=>({checkbox:{borderRadius:e.shape.borderRadius,padding:e.spacing(1),"&:hover":{backgroundColor:e.palette.action.hover}},checkboxSizeSmall:{padding:e.spacing(.625)}}));function Rl(e){const{className:t,onChange:s,...a}=e,{classes:i,cx:r}=wl(),c=(u,p)=>{s?.(u,p),u.currentTarget.blur()};return(0,n.jsx)(qn.Z,{className:r(t,i.checkbox,{[i.checkboxSizeSmall]:e.size==="small"}),onChange:c,...a,title:"Toggle visibility",icon:(0,n.jsx)(ut.Z,{fontSize:"small",viewBox:"0 0 16 16",color:"disabled",children:(0,n.jsx)("path",{fill:"currentColor",d:"M13.508 7.801c.556-.527 1.036-1.134 1.422-1.801h-1.185C12.48 7.814 10.378 9 8 9 5.622 9 3.52 7.814 2.254 6H1.07c.386.667.866 1.274 1.421 1.801L.896 9.396l.708.707L3.26 8.446c.71.523 1.511.932 2.374 1.199l-.617 2.221.964.268.626-2.255C7.06 9.96 7.525 10 8 10c.475 0 .94-.041 1.392-.12l.626 2.254.964-.268-.617-2.221c.863-.267 1.663-.676 2.374-1.2l1.657 1.658.708-.707-1.595-1.595z",fillRule:"nonzero"})}),checkedIcon:(0,n.jsx)(ut.Z,{fontSize:"small",viewBox:"0 0 16 16",children:(0,n.jsxs)("g",{fill:"currentColor",children:[(0,n.jsx)("path",{d:"M8 10c1.105 0 2-.895 2-2 0-1.105-.895-2-2-2-1.104 0-2 .895-2 2 0 1.105.896 2 2 2z",fillRule:"nonzero"}),(0,n.jsx)("path",{d:"M8 4c2.878 0 5.378 1.621 6.635 4-1.257 2.379-3.757 4-6.635 4-2.878 0-5.377-1.621-6.635-4C2.623 5.621 5.122 4 8 4zm0 7c-2.3 0-4.322-1.194-5.478-3C3.678 6.194 5.7 5 8 5c2.3 0 4.322 1.194 5.479 3C12.322 9.806 10.3 11 8 11z",fillRule:"evenodd"})]})})})}function ya(e){return(0,T.sortBy)(Object.entries(e).filter(t=>t[1]!=null),t=>t[1].order)}function va(e,t){const s={};return Object.entries(e).forEach(([a,i])=>{if(i==null)return;const r=va(i.children??{},t);Object.values(r).length>0&&(s[a]={...i,children:r}),(i.label??a).toLocaleLowerCase().includes(t.toLocaleLowerCase())&&(s[a]=i)}),s}var jl=o(2784);const Ll=35,Aa=(0,N.ZL)()(e=>({actionButton:{padding:e.spacing(.5)},editNameField:{font:"inherit",gridColumn:"span 2",width:"100%",".MuiInputBase-input":{fontSize:"0.75rem",padding:e.spacing(.75,1)}},focusedNode:{animation:`
      ${(0,ga.F4)`
      from {
        background-color: ${(0,he.Z)(e.palette.primary.main).setAlpha(.3).toRgbString()};
      }
      to {
        background-color: transparent;
      }`}
      0.5s ease-in-out
    `},fieldPadding:{gridColumn:"span 2",height:e.spacing(.5)},iconWrapper:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",left:0,transform:"translate(-97.5%, -50%)"},nodeHeader:{display:"flex",gridColumn:"span 2",paddingRight:e.spacing(.5),minHeight:Ll,"@media (pointer: fine)":{".MuiCheckbox-root":{visibility:"visible"},"[data-node-function=edit-label]":{visibility:"hidden"},"&:hover":{backgroundColor:e.palette.action.hover,".MuiCheckbox-root":{visibility:"visible"},"[data-node-function=edit-label]":{visibility:"visible"}}}},nodeHeaderVisible:{"@media (pointer: fine)":{".MuiCheckbox-root":{visibility:"hidden"},"&:hover":{".MuiCheckbox-root":{visibility:"visible"}}}},nodeHeaderToggle:{display:"grid",alignItems:"center",gridTemplateColumns:"auto 1fr auto",opacity:.6,position:"relative",userSelect:"none",width:"100%"},nodeHeaderToggleHasProperties:{cursor:"pointer"},nodeHeaderToggleVisible:{opacity:1},errorTooltip:{whiteSpace:"pre-line",maxHeight:"15vh",overflowY:"auto"}}));function Ol({expanded:e}){const{classes:t}=Aa(),s=e?Jn.Z:Vr.Z;return(0,n.jsx)("div",{className:t.iconWrapper,children:(0,n.jsx)(s,{})})}const Do=Yt()((e,t)=>[...e,t]),Nl=e=>[{label:e("listAll"),value:"all"},{label:e("listVisible"),value:"visible"},{label:e("listInvisible"),value:"invisible"}];function kl(e){return e.visible!==!1}function Zl(e){return e.visible!==!0}const Fl=e=>({input:"select",label:e("filterList"),help:e("filterListHelp"),options:Nl(e)});function Ul(e){const{actionHandler:t,defaultOpen:s=!0,filter:a,focusedPath:i,settings:r={}}=e,[c,u]=(0,ma.x)({editing:!1,focusedPath:void 0,open:s,visibilityFilter:"all"}),{t:p}=(0,X.$G)("settingsEditor"),{classes:h,cx:f,theme:m}=Aa(),y=e.path.length,w=e.settings?.visible!=null,k=e.settings?.visible!==!1,W=e.settings?.enableVisibilityFilter===!0,G=Ge=>{Ge.action==="update"&&Ge.payload.input==="select"&&u(ft=>{ft.visibilityFilter=Ge.payload.value})},J=()=>{t({action:"update",payload:{input:"boolean",path:[...e.path,"visible"],value:!k}})},K=Ge=>{t({action:"perform-node-action",payload:{id:Ge,path:e.path}})},ye=(0,T.isEqual)(i,e.path);(0,l.useEffect)(()=>{i!=null&&(0,T.isEqual)(e.path,i.slice(0,e.path.length))&&u(ft=>{ft.open=!0}),ye&&Ae.current?.scrollIntoView()},[i,ye,e.path,u]);const{fields:re,children:se}=r,_=se!=null&&Object.keys(se).length>0,O=re!=null||_,Ae=(0,l.useRef)(null),tt=(0,on.Z)(Object.entries(re??{}),([Ge,ft])=>ft?(0,n.jsx)(So,{field:ft,path:Do(e.path,Ge),actionHandler:t},Ge):void 0),At=c.visibilityFilter==="visible"?kl:c.visibilityFilter==="invisible"?Zl:void 0,bt=(0,on.Z)(ya(se??{}),([Ge,ft])=>!At||At(ft)?(0,n.jsx)(ba,{actionHandler:t,defaultOpen:ft.defaultExpansionState!=="collapsed",filter:a,focusedPath:i,settings:ft,path:Do(e.path,Ge)},Ge):void 0),Ct=r.icon?Mo[r.icon]:void 0,gt=(0,l.useCallback)(Ge=>{r.renamable===!0&&t({action:"update",payload:{path:[...e.path,"label"],input:"string",value:Ge.target.value}})},[t,e.path,r.renamable]),Dt=(0,l.useCallback)(()=>{u(Ge=>{Ge.editing=!Ge.editing})},[u]),rt=(0,l.useCallback)(()=>{u(Ge=>{Ge.editing||(Ge.open=!Ge.open)})},[u]),ht=(0,l.useCallback)(Ge=>{(Ge.key==="Enter"||Ge.key==="Escape")&&Dt()},[Dt]),[Tt,xt]=(0,l.useMemo)(()=>(0,T.partition)(r.actions,Ge=>Ge.type==="action"&&Ge.display==="inline"),[r.actions]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:f(h.nodeHeader,{[h.focusedNode]:ye,[h.nodeHeaderVisible]:k}),ref:Ae,children:[(0,n.jsxs)("div",{className:f(h.nodeHeaderToggle,{[h.nodeHeaderToggleHasProperties]:O,[h.nodeHeaderToggleVisible]:k}),style:{marginLeft:m.spacing(.75+2*y)},onClick:rt,"data-testid":`settings__nodeHeaderToggle__${e.path.join("-")}`,children:[O&&(0,n.jsx)(Ol,{expanded:c.open}),Ct&&(0,n.jsx)(Ct,{fontSize:"small",color:"inherit",style:{marginRight:m.spacing(.5),opacity:.8}}),c.editing?(0,n.jsx)(Rt.Z,{className:h.editNameField,autoFocus:!0,variant:"filled",onChange:gt,value:r.label,onBlur:Dt,onKeyDown:ht,onFocus:Ge=>{Ge.target.select()},InputProps:{endAdornment:(0,n.jsx)(pe.Z,{className:h.actionButton,title:"Rename","data-node-function":"edit-label",color:"primary",onClick:Ge=>{Ge.stopPropagation(),Dt()},children:(0,n.jsx)(Bs.Z,{fontSize:"small"})})}}):(0,n.jsx)(xe.Z,{noWrap:!0,flex:"auto",variant:"subtitle2",fontWeight:y<2?600:400,color:k?"text.primary":"text.disabled",children:(0,n.jsx)(ho,{text:r.label??p("general"),highlight:a})})]}),(0,n.jsxs)(U.Z,{alignItems:"center",direction:"row",children:[r.renamable===!0&&!c.editing&&(0,n.jsx)(pe.Z,{className:h.actionButton,title:"Rename","data-node-function":"edit-label",color:"primary",onClick:Ge=>{Ge.stopPropagation(),Dt()},children:(0,n.jsx)(Kr.Z,{fontSize:"small"})}),r.visible!=null&&(0,n.jsx)(Rl,{size:"small",checked:k,onChange:J,style:{opacity:w?1:0},disabled:!w}),Tt.map(Ge=>{const ft=Ge.icon?Mo[Ge.icon]:void 0,Xt=()=>{t({action:"perform-node-action",payload:{id:Ge.id,path:e.path}})};return ft?(0,n.jsx)(pe.Z,{onClick:Xt,title:Ge.label,className:h.actionButton,children:(0,n.jsx)(ft,{fontSize:"small"})},Ge.id):(0,n.jsx)(oe.Z,{onClick:Xt,size:"small",color:"inherit",className:h.actionButton,children:Ge.label},Ge.id)}),e.settings?.error&&(0,n.jsx)(ne.Z,{arrow:!0,title:(0,n.jsx)(xe.Z,{variant:"subtitle2",className:h.errorTooltip,children:e.settings.error}),children:(0,n.jsx)(pe.Z,{size:"small",color:"error",children:(0,n.jsx)(vo.Z,{fontSize:"small"})})}),xt.length>0&&(0,n.jsx)(Bl,{actions:xt,onSelectAction:K})]})]}),c.open&&tt.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:h.fieldPadding}),tt,(0,n.jsx)("div",{className:h.fieldPadding})]}),c.open&&W&&_&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.Z,{paddingBottom:.5,style:{gridColumn:"span 2"}}),(0,n.jsx)(So,{field:{...Fl(p),value:c.visibilityFilter},path:Do(e.path,"visibilityFilter"),actionHandler:G},"visibilityFilter")]}),c.open&&bt,y===1&&(0,n.jsx)(Se.Z,{style:{gridColumn:"span 2"}})]})}const ba=jl.memo(Ul),zl=(0,N.ZL)()(e=>({appBar:{top:0,marginRight:1,zIndex:e.zIndex.appBar,padding:e.spacing(.5),position:"sticky",backgroundColor:e.palette.background.paper},fieldGrid:{display:"grid",gridTemplateColumns:"minmax(20%, 20ch) auto",columnGap:e.spacing(1)},textField:{".MuiOutlinedInput-notchedOutline":{border:"none"}},startAdornment:{display:"flex"}})),Wl=Yt()(e=>[e]);function xa({variant:e,settings:t}){const{classes:s}=zl(),{actionHandler:a,focusedPath:i}=t,[r,c]=(0,l.useState)(""),{t:u}=(0,X.$G)("settingsEditor"),p=(0,l.useMemo)(()=>r.length>0?va(t.nodes,r):t.nodes,[t.nodes,r]),h=(0,l.useMemo)(()=>ya(p),[p]),{selectedPanelIds:f}=(0,qe.iy)(),m=(0,l.useMemo)(()=>f.length===1?f[0]:void 0,[f]),y=(0,To.v)(),w=(0,l.useMemo)(()=>m!=null?(0,Me.$k)(m):void 0,[m]),k=(0,l.useMemo)(()=>w!=null?y.getPanelByType(w):void 0,[y,w]),[W,G]=(0,go.Um)(m),J=(0,Po.J)(_=>m?_.defaultTitles[m]:void 0),K=typeof W?.[Me.xS]=="string"?W[Me.xS]:void 0,ye=(0,l.useMemo)(()=>({input:"string",label:u("title"),placeholder:J??k?.title,value:K}),[K,J,k?.title,u]),re=(0,l.useCallback)(_=>{_.action==="update"&&_.payload.path[0]===Me.xS&&G({[Me.xS]:_.payload.value})},[G]),se=r.length===0&&k?.hasCustomToolbar!==!0;return(0,n.jsxs)(U.Z,{fullHeight:!0,children:[t.enableFilter===!0&&(0,n.jsx)("header",{className:s.appBar,children:(0,n.jsx)(Rt.Z,{id:`${e}-settings-filter`,variant:"filled",onChange:_=>{c(_.target.value)},value:r,className:s.textField,fullWidth:!0,placeholder:u("searchPanelSettings"),inputProps:{"data-testid":`${e}-settings-filter-input`},InputProps:{size:"small",startAdornment:(0,n.jsx)("label",{className:s.startAdornment,htmlFor:"settings-filter",children:(0,n.jsx)(Ms.Z,{fontSize:"small"})}),endAdornment:r&&(0,n.jsx)(pe.Z,{size:"small",title:u("clearSearch"),onClick:()=>{c("")},edge:"end",children:(0,n.jsx)(yo.Z,{fontSize:"small"})})}})}),(0,n.jsxs)("div",{className:s.fieldGrid,children:[se&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(U.Z,{paddingBottom:.5,style:{gridColumn:"span 2"}}),(0,n.jsx)(So,{field:ye,path:[Me.xS],actionHandler:re})]}),h.map(([_,O])=>(0,n.jsx)(ba,{actionHandler:a,defaultOpen:O.defaultExpansionState!=="collapsed",filter:r,focusedPath:i,path:Wl(_),settings:O},_))]})]})}var Gl=o(50334),Ql=o(16554),Bo=o(90546),Zn=o(76217),Yl=o(55433);const Hl=(0,N.ZL)()(e=>({textarea:{[`.${Ql.Z.root}`]:{backgroundColor:e.palette.action.hover,fontFamily:it.R.MONOSPACE,maxHeight:"60vh",overflowY:"auto",padding:e.spacing(.25)}}}));function Vl({initialValue:e={},onChange:t,onRequestClose:s,title:a}){const{classes:i}=Hl(),[r,c]=(0,l.useState)(JSON.stringify(e,void 0,2)??""),{decodedValue:u,error:p}=(0,l.useMemo)(()=>{try{return{decodedValue:JSON.parse(r===""?"{}":r),error:void 0}}catch(y){return{decodedValue:void 0,error:y}}},[r]),h=(0,l.useCallback)(()=>{t(u),s()},[u,t,s]),f=(0,l.useCallback)(()=>{(0,Yl.W)(r,"layout.json")},[r]),m=(0,l.useCallback)(()=>r,[r]);return(0,n.jsxs)(Ot.Z,{open:!0,onClose:s,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsxs)(U.Z,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",paddingX:3,paddingTop:2,children:[(0,n.jsx)(U.Z,{children:(0,n.jsx)(xe.Z,{variant:"h4",fontWeight:600,gutterBottom:!0,children:a})}),(0,n.jsx)(pe.Z,{onClick:s,edge:"end",children:(0,n.jsx)(Le.Z,{})})]}),(0,n.jsx)(Dn.Z,{children:(0,n.jsx)(Rt.Z,{className:i.textarea,fullWidth:!0,multiline:!0,rows:10,value:r,onChange:y=>{c(y.target.value)},autoFocus:!0,error:p!=null,helperText:p?"The JSON provided is invalid.":" ",inputProps:{"data-testid":"share-json-input"},FormHelperTextProps:{variant:"standard"},spellCheck:!1})}),(0,n.jsxs)(Bn.Z,{children:[(0,n.jsxs)(U.Z,{direction:"row",gap:1,children:[(0,n.jsx)(pe.Z,{onClick:f,title:"Download","aria-label":"Download",children:(0,n.jsx)(ps.oVw,{})}),(0,n.jsx)(Bo.Z,{color:"default",getText:m}),(0,n.jsx)(Zn.Z,{activeColor:"error",onClick:()=>{c("{}")},title:"Clear","aria-label":"Clear",icon:(0,n.jsx)(Gl.Z,{})})]}),(0,n.jsx)(U.Z,{flex:"auto"}),(0,n.jsx)(oe.Z,{disabled:p!=null,variant:"contained",size:"large",onClick:h,children:"Apply"})]})]})}var Cn=o(11701);const Kl=e=>typeof e.selectedLayout?.data?.layout=="string"?e.selectedLayout.data.layout:void 0,Xl=e=>e.incrementSequenceNumber,$l=Object.freeze({actionHandler:()=>{},nodes:{}});function Jl({selectedPanelIdsForTests:e}){const{t}=(0,X.$G)("panelSettings"),s=(0,qe.NS)(Kl),{selectedPanelIds:a,setSelectedPanelIds:i,selectAllPanels:r}=(0,qe.iy)(),c=e??a;(0,l.useEffect)(()=>{c.length===0&&s!=null&&r()},[r,c,s]);const u=(0,l.useMemo)(()=>c.length===1?c[0]:void 0,[c]);(0,Cr.Z)(()=>{u!=null&&i([])});const p=(0,To.v)(),{getCurrentLayoutState:h,savePanelConfigs:f}=(0,qe._B)(),m=(0,l.useMemo)(()=>u!=null?(0,Me.$k)(u):void 0,[u]),y=(0,l.useMemo)(()=>m!=null?p.getPanelByType(m):void 0,[p,m]),w=(0,Po.J)(Xl),[k,W]=(0,l.useState)(!1),G=(0,l.useMemo)(()=>{const _=h().selectedLayout?.data?.configById;return u==null||!k||!_?null:(0,n.jsx)(Vl,{onRequestClose:()=>{W(!1)},initialValue:_[u]??{},onChange:O=>{f({configs:[{id:u,config:O,override:!0}]}),w(u)},title:t("importOrExportSettings")})},[h,u,k,f,w,t]),[J]=(0,go.Um)(u),K=(0,Po.J)(_=>u?_.settingsTrees[u]:void 0),ye=(0,l.useCallback)(()=>{u&&(f({configs:[{id:u,config:{},override:!0}]}),w(u))},[w,f,u]);if(u==null)return(0,n.jsx)(Kn.Z,{children:t("selectAPanelToEditItsSettings")});if(!J)return(0,n.jsx)(Kn.Z,{children:t("loadingPanelSettings")});const re=y!=null&&y.hasCustomToolbar!==!0,se=y?.title??t("unknown");return(0,n.jsxs)(U.Z,{fullHeight:!0,flex:"auto",gap:1,children:[G,(0,n.jsx)(U.Z,{gap:2,justifyContent:"flex-start",flex:"auto",children:(0,n.jsxs)(U.Z,{flex:"auto",children:[K&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(U.Z,{paddingLeft:.75,direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,n.jsx)(xe.Z,{variant:"subtitle2",children:t("panelName",{title:se})}),(0,n.jsx)(Pr,{fontSize:"small",allowShare:m!==Cn.bm,onReset:ye,onShare:()=>{W(!0)}},1)]}),(0,n.jsx)(Se.Z,{})]}),K!=null||re?(0,n.jsx)(xa,{variant:"panel",settings:K??$l},u):(0,n.jsx)(U.Z,{flex:"auto",alignItems:"center",justifyContent:"center",paddingX:1,children:(0,n.jsx)(xe.Z,{variant:"body2",color:"text.secondary",align:"center",children:t("panelDoesNotHaveSettings")})})]})})]})}var Rs=o(93004),js=o(69802),te=o(44668),ql=o(63079),Ea=o(48982),Fn=o(50553),Ca=o(51160),Sa=o(66088),_l="../../packages/studio-base/src/components/CreateEventDialog.tsx";const ec=q.ZP.getLogger(_l),tc=(0,ga.F4)`
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
`,nc=(0,N.ZL)()((e,t,s)=>({grid:{alignItems:"center",display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:e.spacing(1),overflow:"auto",alignContent:"flex-start"},row:{animation:`${tc} 0.2s ease-in-out`,display:"contents"},toggleButton:{border:"none",lineHeight:1},toggleButtonGroup:{marginRight:e.spacing(-1),gap:e.spacing(.25),[`.${s.toggleButton}`]:{borderRadius:`${e.shape.borderRadius}px !important`,marginLeft:"0px !important",borderLeft:"none !important"}}})),sc=e=>e.playerState.activeData?.currentTime,oc=e=>e.refreshEvents,ac=e=>e.deviceId;function ic(e){const{onClose:t}=e,{classes:s}=nc(),a=B(oc),i=(0,Qe.An)(sc),[r,c]=(0,ma.x)({startTime:i?(0,te.toDate)(i):void 0,duration:0,durationUnit:"sec",metadataEntries:[{key:"",value:""}]}),u=(0,l.useCallback)((re,se,_)=>{c(O=>{const Ae=O.metadataEntries[re];Ae&&(Ae[se]=_,re===O.metadataEntries.length-1&&Ae.key.length>0&&Ae.value.length>0&&O.metadataEntries.push({key:"",value:""}))})},[c]),{formatTime:p}=(0,at.v)(),{createEvent:h}=(0,Ue.b)(),f=(0,T.countBy)(r.metadataEntries,re=>re.key),m=Object.entries(f).find(([re,se])=>re.length>0&&se>1),y=r.startTime!=null&&r.duration!=null&&!m,w=B(ac),[k,W]=(0,Sa.Z)(async()=>{if(r.startTime==null||r.duration==null||w==null)return;const re=r.metadataEntries.filter(_=>_.key.length>0&&_.value.length>0),se=Object.fromEntries(re.map(_=>[_.key.trim(),_.value.trim()]));await h?.({deviceId:w,timestamp:r.startTime.toISOString(),durationNanos:(0,te.toNanoSec)(r.durationUnit==="sec"?{sec:r.duration,nsec:0}:{sec:0,nsec:r.duration}).toString(),metadata:se}),t(),a()},[h,w,r,t,a]),G=(0,l.useCallback)(re=>{re.key==="Enter"&&W().catch(se=>{ec.error(se)})},[W]),J=(0,l.useCallback)(re=>{c(se=>{se.metadataEntries.splice(re+1,0,{key:"",value:""})})},[c]),K=(0,l.useCallback)(re=>{c(se=>{se.metadataEntries.length>1&&se.metadataEntries.splice(re,1)})},[c]),ye=i?p(i):"-";return(0,n.jsxs)(Ot.Z,{open:!0,onClose:t,fullWidth:!0,maxWidth:"sm",children:[(0,n.jsx)(U.Z,{paddingX:3,paddingTop:2,children:(0,n.jsx)(xe.Z,{variant:"h2",children:"Create event"})}),(0,n.jsx)(U.Z,{paddingX:3,paddingTop:2,children:(0,n.jsxs)("div",{className:s.grid,children:[(0,n.jsxs)(Ea.Z,{children:[(0,n.jsx)(Fn.Z,{children:"Start Time"}),(0,n.jsx)(xe.Z,{paddingY:1,children:ye})]}),(0,n.jsx)(Rt.Z,{value:r.duration??"",fullWidth:!0,label:"Duration",onChange:re=>{const se=Number(re.currentTarget.value);c(_=>({..._,duration:se>0?se:void 0}))},type:"number",InputProps:{endAdornment:(0,n.jsxs)(Xn.Z,{className:s.toggleButtonGroup,size:"small",exclusive:!0,value:r.durationUnit,onChange:(re,se)=>{r.durationUnit!==se&&c(_=>({..._,durationUnit:se}))},children:[(0,n.jsx)(Ht.Z,{className:s.toggleButton,tabIndex:-1,value:"sec",children:"sec"}),(0,n.jsx)(Ht.Z,{className:s.toggleButton,tabIndex:-1,value:"nsec",children:"nsec"})]})}}),(0,n.jsxs)(Ca.Z,{style:{visibility:"hidden"},children:[(0,n.jsx)(pe.Z,{tabIndex:-1,"data-testid":"add",children:(0,n.jsx)(ws.Z,{})}),(0,n.jsx)(pe.Z,{tabIndex:-1,children:(0,n.jsx)(ws.Z,{})})]})]})}),(0,n.jsxs)(U.Z,{paddingX:3,paddingTop:2,children:[(0,n.jsx)(Fn.Z,{children:"Metadata"}),(0,n.jsx)("div",{className:s.grid,children:r.metadataEntries.map(({key:re,value:se},_)=>{const O=((re.length>0?f[re]:void 0)??0)>1;return(0,n.jsxs)("div",{className:s.row,children:[(0,n.jsx)(Rt.Z,{fullWidth:!0,value:re,autoFocus:_===0,placeholder:"Key (string)",error:O,onKeyDown:G,onChange:Ae=>{u(_,"key",Ae.currentTarget.value)}}),(0,n.jsx)(Rt.Z,{fullWidth:!0,value:se,placeholder:"Value (string)",error:O,onKeyDown:G,onChange:Ae=>{u(_,"value",Ae.currentTarget.value)}}),(0,n.jsxs)(Ca.Z,{children:[(0,n.jsx)(pe.Z,{tabIndex:-1,onClick:()=>{J(_)},children:(0,n.jsx)(ws.Z,{})}),(0,n.jsx)(pe.Z,{tabIndex:-1,onClick:()=>{K(_)},style:{visibility:r.metadataEntries.length>1?"visible":"hidden"},children:(0,n.jsx)(ql.Z,{})})]})]},_)})})]}),(0,n.jsxs)(Bn.Z,{children:[(0,n.jsx)(oe.Z,{variant:"outlined",size:"large",onClick:t,children:"Cancel"}),(0,n.jsxs)(oe.Z,{variant:"contained",size:"large",onClick:W,disabled:!y||k.loading,children:[k.loading&&(0,n.jsx)(ln.Z,{color:"inherit",size:"1rem",style:{marginRight:"0.5rem"}}),"Create Event"]})]}),m&&(0,n.jsxs)(jn.Z,{severity:"error",children:["Duplicate key ",m[0]]}),k.error?.message&&(0,n.jsx)(jn.Z,{severity:"error",children:k.error.message})]})}var _n=o(90454);const rc=(0,N.ZL)()({numericValue:{fontFeatureSettings:`${it.R.SANS_SERIF_FEATURE_SETTINGS}, "zero"`}});function lc(e){const{classes:t}=rc(),{disableDate:s=!1,horizontal:a=!1,time:i,title:r}=e,{formatDate:c,formatTime:u}=(0,at.v)(),p=(0,l.useMemo)(()=>u(i),[i,u]),h=(0,l.useMemo)(()=>(0,Fe.Eo)(i),[i]),f=(0,l.useMemo)(()=>c(i),[c,i]);return(0,Fe.D3)(i)?(0,n.jsxs)(U.Z,{title:r,gap:a?0:1,flexWrap:a?"nowrap":"wrap",direction:a?"row":"column",alignItems:a?"center":"flex-start",justifyContent:a?"flex-start":"center",children:[!s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(xe.Z,{className:t.numericValue,noWrap:!0,fontWeight:a?void 0:700,variant:"inherit",children:f}),a&&(0,n.jsx)(n.Fragment,{children:"\xA0"})]}),(0,n.jsx)(U.Z,{direction:"row",alignItems:"center",flexShrink:0,gap:.5,children:(0,n.jsx)(xe.Z,{variant:"inherit",className:t.numericValue,children:p})})]}):(0,n.jsx)(U.Z,{title:r,direction:"row",alignItems:"center",flexGrow:0,children:(0,n.jsx)(xe.Z,{className:t.numericValue,variant:"inherit",children:h})})}var cc=o(27332);function dc(e){const{text:t}=e;return(0,n.jsx)(n.Fragment,{children:t.split(`
`).map(s=>(0,n.jsx)(Ce,{text:s},s))})}var uc=o(2784);const pc=(0,N.ZL)()({overline:{opacity:.6},numericValue:{fontFeatureSettings:`${it.R.SANS_SERIF_FEATURE_SETTINGS}, "zero"`}}),fc=e=>e.playerState.activeData?.startTime,hc=e=>e.playerState.activeData?.endTime,gc=e=>e.playerState.name,mc=({playerState:e})=>e.presence,yc=e=>e.seekPlayback;function vc(e){const{disableSource:t=!1,durationRef:s,endTimeRef:a,playerName:i,playerPresence:r,startTime:c}=e,{classes:u}=pc(),{t:p}=(0,X.$G)("dataSourceInfo"),h=e.isLiveConnection;return(0,n.jsxs)(U.Z,{gap:1.5,children:[!t&&(0,n.jsxs)(U.Z,{children:[(0,n.jsx)(xe.Z,{className:u.overline,display:"block",variant:"overline",children:p("currentSource")}),r===ke.m.INITIALIZING?(0,n.jsx)(xe.Z,{variant:"inherit",children:(0,n.jsx)(_n.Z,{animation:"wave",width:"40%"})}):r===ke.m.RECONNECTING?(0,n.jsx)(xe.Z,{variant:"inherit",children:p("waitingForConnection")}):i?(0,n.jsx)(xe.Z,{variant:"inherit",component:"span",children:(0,n.jsx)(dc,{text:i})}):(0,n.jsx)(xe.Z,{className:u.numericValue,variant:"inherit",children:"\u2014"})]}),(0,n.jsxs)(U.Z,{children:[(0,n.jsx)(xe.Z,{className:u.overline,variant:"overline",children:p("startTime")}),r===ke.m.INITIALIZING?(0,n.jsx)(_n.Z,{animation:"wave",width:"50%"}):c?(0,n.jsx)(lc,{horizontal:!0,time:c}):(0,n.jsx)(xe.Z,{className:u.numericValue,variant:"inherit",children:"\u2014"})]}),!h&&(0,n.jsxs)(U.Z,{children:[(0,n.jsx)(xe.Z,{className:u.overline,variant:"overline",children:p("endTime")}),r===ke.m.INITIALIZING?(0,n.jsx)(_n.Z,{animation:"wave",width:"50%"}):(0,n.jsx)(xe.Z,{className:u.numericValue,variant:"inherit",ref:a,children:"\u2014"})]}),(0,n.jsxs)(U.Z,{children:[(0,n.jsx)(xe.Z,{className:u.overline,variant:"overline",children:p("duration")}),r===ke.m.INITIALIZING?(0,n.jsx)(_n.Z,{animation:"wave",width:100}):(0,n.jsx)(xe.Z,{className:u.numericValue,variant:"inherit",ref:s,children:"\u2014"})]})]})}const Ac=uc.memo(vc),Ta="\u2014";function bc({disableSource:e}){const t=(0,Qe.An)(fc),s=(0,Qe.An)(hc),a=(0,Qe.An)(gc),i=(0,Qe.An)(mc),r=(0,Qe.An)(yc),c=(0,l.useRef)(null),u=(0,l.useRef)(null),{formatDate:p,formatTime:h}=(0,at.v)();return(0,l.useEffect)(()=>{if(c.current){const f=s&&t?(0,cc.Ai)(s,t):void 0;if(f){const m=(0,yt.LU)(f);c.current.innerText=m}else c.current.innerText=Ta}if(u.current)if(s){const f=p(s);u.current.innerText=(0,Fe.D3)(s)?`${f} ${h(s)}`:`${(0,Fe.Eo)(s)}`}else u.current.innerHTML=Ta},[s,h,t,i,p]),(0,n.jsx)(Ac,{disableSource:e,durationRef:c,endTimeRef:u,playerName:a,playerPresence:i,startTime:t,isLiveConnection:r==null})}function xc(e){return(0,n.jsx)(ut.Z,{...e,children:(0,n.jsx)("path",{d:"M18.03,3.03H6.03c-.55,0-1,.45-1,1v3h0v9.42c0,.36,.18,.69,.5,.87l6.5,3.71,6.5-3.71c.31-.18,.5-.51,.5-.87V4.03c0-.55-.45-1-1-1Z"})})}function Ec(e){return(0,n.jsx)(ut.Z,{...e,children:(0,n.jsx)("path",{d:"M17.03,5.03V15.87l-5,2.85-5-2.85V5.03h10m1-2H6.03c-.55,0-1,.45-1,1v12.42c0,.36,.18,.69,.5,.87l6.5,3.71,6.5-3.71c.31-.18,.5-.51,.5-.87V4.03c0-.55-.45-1-1-1h0Z"})})}const Cc=[.01,.02,.05,.1,.2,.5,.8,1,2,3,5],Pa=e=>`${e<.1?e.toFixed(2):e}\xD7`,Sc=e=>e.selectedLayout?.data?.playbackConfig.speed,Tc=(0,N.ZL)()(e=>({button:{padding:e.spacing(.625,.5),backgroundColor:"transparent",":hover":{backgroundColor:e.palette.action.hover}}}));function Pc(){const{classes:e}=Tc(),[t,s]=(0,l.useState)(void 0),a=Boolean(t),i=(0,qe.NS)(Sc),r=(0,Qe.An)((0,l.useCallback)(({playerState:y})=>y.activeData?.speed,[])),c=(0,Qe.An)((0,l.useCallback)(y=>y.setPlaybackSpeed,[])),{setPlaybackConfig:u}=(0,qe._B)(),p=(0,l.useCallback)(y=>{u({speed:y}),c?.(y)},[u,c]),h=y=>{s(y.currentTarget)},f=()=>{s(void 0)};(0,l.useEffect)(()=>{i!=null&&c?.(i)},[i,c]);const m=r??i;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(oe.Z,{className:e.button,id:"playback-speed-button","aria-controls":a?"playback-speed-menu":void 0,"aria-haspopup":"true","aria-expanded":a?"true":void 0,onClick:h,"data-testid":"PlaybackSpeedControls-Dropdown",disabled:c==null,disableRipple:!0,variant:"contained",color:"inherit",endIcon:(0,n.jsx)(Jn.Z,{}),children:m==null?"\u2013":Pa(m)}),(0,n.jsx)(be.Z,{id:"playback-speed-menu",anchorEl:t,open:a,onClose:f,MenuListProps:{"aria-labelledby":"playback-speed-button",dense:!0},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},children:Cc.map(y=>(0,n.jsxs)(Te.Z,{selected:m===y,onClick:()=>{p(y),f()},children:[m===y&&(0,n.jsx)(Io.Z,{children:(0,n.jsx)(Bs.Z,{fontSize:"small"})}),(0,n.jsx)(kn.Z,{inset:m!==y,primary:Pa(y),primaryTypographyProps:{variant:"inherit"}})]},y))})]})}var qt=o(27803),Ic=o(35296),Ia=o(87723),Ma=o(27728),Da=o(1309);const Mc=(0,N.ZL)()((e,{timeDisplayMethod:t})=>({textField:{borderRadius:e.shape.borderRadius,"&.Mui-disabled":{[`.${Ia.Z.root}`]:{backgroundColor:"transparent"}},"&:not(.Mui-disabled):hover":{backgroundColor:e.palette.action.hover,[`.${Ma.Z.root}`]:{visibility:"visible"}},[`.${Ia.Z.root}`]:{backgroundColor:"transparent",":hover":{backgroundColor:"transparent"}},[`.${Da.Z.input}`]:{fontFeatureSettings:`${e.typography.fontFeatureSettings}, 'zero' !important`,minWidth:t==="TOD"?"28ch":"20ch"},[`.${Ma.Z.root}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:`1px solid ${e.palette.background.paper}`,visibility:"hidden",marginRight:e.spacing(-1)}},textFieldError:{outline:`1px solid ${e.palette.error.main}`,outlineOffset:-1,[`.${Da.Z.root}`]:{color:e.palette.error.main,borderLeftColor:e.palette.error.main}}}));function Dc({timeFormat:e,timeRawString:t,timeOfDayString:s,setTimeFormat:a}){const[i,r]=(0,l.useState)(void 0),c=Boolean(i),u=h=>{r(h.currentTarget)},p=()=>{r(void 0)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(pe.Z,{id:"playback-time-display-toggle-button","aria-controls":c?"playback-time-display-toggle-menu":void 0,"aria-haspopup":"true","aria-expanded":c?"true":void 0,onClick:u,children:(0,n.jsx)(Jn.Z,{})}),(0,n.jsx)(be.Z,{id:"playback-time-display-toggle-menu",anchorEl:i,open:c,onClose:p,MenuListProps:{dense:!0,"aria-labelledby":"playback-time-display-toggle-button"},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:[{key:"TOD",label:s??"Time of Day"},{key:"SEC",label:t??"Seconds"}].map(h=>(0,n.jsxs)(Te.Z,{selected:e===h.key,onClick:async()=>{await a(h.key),p()},children:[e===h.key&&(0,n.jsx)(Io.Z,{children:(0,n.jsx)(Bs.Z,{fontSize:"small"})}),(0,n.jsx)(kn.Z,{inset:e!==h.key,primary:h.label,primaryTypographyProps:{variant:"inherit"}})]},h.key))})]})}function Bc({appTimeFormat:e,currentTime:t,startTime:s,endTime:a,timezone:i,onSeek:r,onPause:c,isPlaying:u}){const{classes:p,cx:h}=Mc({timeDisplayMethod:e.timeFormat}),f=(0,l.useRef)(void 0),m=(0,l.useMemo)(()=>t?(0,Fe.Eo)(t):void 0,[t]),y=(0,l.useMemo)(()=>t?`${(0,yt.p6)(t,i)} ${(0,yt.mr)(t,i)}`:void 0,[t,i]),w=(0,l.useMemo)(()=>e.timeFormat==="SEC"?m:y,[e.timeFormat,m,y]),[k,W]=(0,l.useState)(!1),[G,J]=(0,l.useState)(w??void 0),[K,ye]=(0,l.useState)(!1),re=(0,l.useCallback)(se=>{if(se.preventDefault(),G==null||G.length===0||!s||!t||!a)return;const _=(0,yt._v)({text:G,timezone:i});if(_==null){ye(!0);return}ye(!1),_.time&&(0,te.isTimeInRangeInclusive)(_.time,s,a)&&(r(_.time),_.method!==e.timeFormat&&e.setTimeFormat(_.method))},[G,s,t,a,i,r,e]);return(0,l.useEffect)(()=>(K&&(G==null||G.length===0||u)&&(W(!1),ye(!1)),()=>{f.current!=null&&clearTimeout(f.current)}),[K,G,u]),(0,n.jsx)(U.Z,{direction:"row",alignItems:"center",flexGrow:0,gap:.5,children:t?(0,n.jsx)("form",{onSubmit:re,style:{width:"100%"},children:(0,n.jsx)(Rt.Z,{className:h(p.textField,{[p.textFieldError]:K}),"aria-label":"Playback Time Method","data-testid":"PlaybackTime-text",value:k?G:w,error:K,variant:"filled",size:"small",InputProps:{startAdornment:K?(0,n.jsx)(Ic.Z,{color:"error"}):void 0,endAdornment:(0,n.jsx)(Dc,{currentTime:t,timezone:i,timeOfDayString:y,timeRawString:m,timeFormat:e.timeFormat,setTimeFormat:e.setTimeFormat})},onFocus:se=>{c(),ye(!1),W(!0),J(w),se.target.select()},onBlur:se=>{re(se),W(!1),f.current=setTimeout(()=>{ye(!1)},600)},onChange:se=>{J(se.target.value)}})}):(0,n.jsx)(Rt.Z,{className:h(p.textField,"Mui-disabled"),disabled:!0,variant:"filled",size:"small",defaultValue:e.timeFormat==="SEC"?"0000000000.000000000":"0000-00-00 00:00:00.000",InputProps:{endAdornment:(0,n.jsx)(pe.Z,{edge:"end",disabled:!0,children:(0,n.jsx)(Jn.Z,{})})}})})}const wc=e=>e.playerState.activeData?.isPlaying,Rc=e=>e.playerState.activeData?.startTime,jc=e=>e.playerState.activeData?.endTime,Lc=e=>e.playerState.activeData?.currentTime;function Oc(e){const[t]=(0,qt.b)(ee.o.TIMEZONE),s=(0,Qe.An)(wc),a=(0,Qe.An)(Rc),i=(0,Qe.An)(jc),r=(0,Qe.An)(Lc),c=(0,at.v)();return(0,n.jsx)(Bc,{appTimeFormat:c,currentTime:r,startTime:a,endTime:i,onSeek:e.onSeek,onPause:e.onPause,isPlaying:s??!1,timezone:t})}function Nc(e){return e.playerState.activeData}function kc(e){const{play:t,seek:s,repeatEnabled:a}=e,i=(0,Qe.An)(Nc);return(0,l.useLayoutEffect)(()=>{if(!a)return;const r=i?.currentTime,c=i?.endTime,u=i?.startTime;u&&r&&c&&(0,te.compare)(r,c)>=0&&(s(u),t())},[i,t,a,s]),(0,n.jsx)(n.Fragment,{})}var Zc=o(17055),Fc=o(2784);const Ba=(0,N.ZL)()(({transitions:e,palette:t})=>({root:{inset:0,pointerEvents:"none",position:"absolute",display:"flex",alignItems:"center"},tick:{transition:e.create("height",{duration:e.duration.shortest}),backgroundBlendMode:"overlay",backgroundColor:(0,On.Fq)(t.info.main,.58),position:"absolute",height:6},tickHovered:{transition:e.create("height",{duration:e.duration.shortest}),backgroundColor:(0,On.Fq)(t.info.main,.58),border:`1px solid ${t.info.main}`,height:12},tickSelected:{transition:e.create("height",{duration:e.duration.shortest}),backgroundColor:(0,On.Fq)(t.info.main,.67),height:12}})),Uc=e=>e.events,zc=e=>e.hoveredEvent,Wc=e=>e.eventsAtHoverValue,Gc=e=>e.selectedEventId;function Qc({event:e}){const t=(0,Z.oA)(Wc),s=(0,Z.oA)(zc),a=B(Gc),{classes:i,cx:r}=Ba(),c=`calc(${(0,T.clamp)(e.startPosition,0,1)*100}% - 1px)`,u=`calc(100% - ${(0,T.clamp)(e.endPosition,0,1)*100}% - 1px)`;return(0,n.jsx)("div",{className:r(i.tick,{[i.tickHovered]:s?e.event.id===s.event.id:t[e.event.id]!=null,[i.tickSelected]:a===e.event.id}),style:{left:c,right:u}})}const Yc=Fc.memo(Qc);function Hc(){const e=B(Uc),{classes:t}=Ba();return(0,n.jsx)("div",{className:t.root,children:(e.value??[]).map(s=>(0,n.jsx)(Yc,{event:s},s.event.id))})}var Vc=o(62515),Kc=o(23144);const Xc=(0,N.ZL)()(e=>({tick:{position:"absolute",height:16,borderRadius:1,width:2,top:8,transform:"translate(-50%, 0)",backgroundColor:e.palette.warning.main},tooltip:{'&[data-popper-placement*="top"] .MuiTooltip-tooltip':{marginBottom:`${e.spacing(1)} !important`}}}));function $c(e){return e.playerState.activeData?.startTime}function Jc(e){return e.playerState.activeData?.endTime}function qc(e){const{componentId:t}=e,{classes:s}=Xc(),a=(0,Qe.An)($c),i=(0,Qe.An)(Jc),r=(0,Z.hx)({componentId:t,isPlaybackSeconds:!0}),{formatTime:c}=(0,at.v)(),{width:u,ref:p}=(0,Vc.NB)({handleHeight:!1,refreshMode:"debounce",refreshRate:0}),h=(0,l.useMemo)(()=>{if(!r||r.type!=="PLAYBACK_SECONDS"||!a||r.value<0)return;const y=(0,te.add)(a,(0,te.fromSec)(r.value));return c(y)},[c,r,a]),f=(0,l.useMemo)(()=>{if(!(a==null||i==null))return{x:{min:0,max:(0,te.toSec)(i)-(0,te.toSec)(a),pixelMin:0,pixelMax:u??0}}},[u,a,i]),m=r!=null&&r.componentId!==t;return(0,n.jsx)(U.Z,{ref:p,flex:"auto",children:f&&(0,n.jsx)(Kc.Z,{componentId:t,scales:f,isPlaybackSeconds:!0,children:(0,n.jsx)(ne.Z,{arrow:!0,classes:{popper:s.tooltip},placement:"top",disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,disableInteractive:!0,TransitionProps:{timeout:0},open:m,title:(0,n.jsx)(xe.Z,{align:"center",variant:"caption",fontFamily:it.R.MONOSPACE,noWrap:!0,children:h}),children:(0,n.jsx)("div",{className:s.tick})})})})}const _c=(0,N.ZL)()(e=>({tooltipDivider:{gridColumn:"span 2",marginBlock:e.spacing(.5),opacity:.5},tooltipWrapper:{fontFeatureSettings:`${e.typography.fontFeatureSettings}, "zero"`,fontFamily:it.R.SANS_SERIF,whiteSpace:"nowrap",columnGap:e.spacing(.5),display:"grid",alignItems:"center",gridTemplateColumns:"auto auto",width:"100%",flexDirection:"column"},itemKey:{fontSize:"0.7rem",opacity:.7,textAlign:"end",textTransform:"lowercase"}})),ed=e=>e.eventsAtHoverValue,td=e=>e.playerState.activeData?.startTime;function nd(e){const{stamp:t}=e,{timeFormat:s,formatTime:a,formatDate:i}=(0,at.v)(),r=(0,Z.oA)(ed),c=(0,Qe.An)(td),{classes:u}=_c();if(!c)return null;const p=(0,te.subtract)(t,c),h=[];switch((0,T.isEmpty)(r)||Object.values(r).forEach(({event:f})=>{h.push({type:"item",title:"Start",value:a(f.startTime)}),h.push({type:"item",title:"End",value:a(f.endTime)}),(0,T.isEmpty)(f.metadata)||Object.entries(f.metadata).forEach(([m,y])=>{h.push({type:"item",title:m,value:y})}),h.push({type:"divider"})}),s){case"TOD":h.push({type:"item",title:"Date",value:i(t)}),h.push({type:"item",title:"Time",value:a(t)});break;case"SEC":h.push({type:"item",title:"SEC",value:a(t)});break}return h.push({type:"item",title:"Elapsed",value:`${(0,te.toSec)(p).toFixed(9)} sec`}),(0,n.jsx)("div",{className:u.tooltipWrapper,children:h.map((f,m)=>f.type==="divider"?(0,n.jsx)(Se.Z,{className:u.tooltipDivider},`divider_${m}`):(0,n.jsxs)(l.Fragment,{children:[(0,n.jsx)(xe.Z,{className:u.itemKey,noWrap:!0,children:f.title}),(0,n.jsx)(xe.Z,{variant:"subtitle2",noWrap:!0,children:f.value})]},`${f.title}_${m}`))})}var sd=o(28165),wa=o(43345);const ms=8,od=(0,sd.F4)`
  0% { background-position: 0 0; }
  100% { background-position: ${ms*2}px 0; }
`,ad=(0,N.ZL)()(e=>({loadingIndicator:{label:"ProgressPlot-loadingIndicator",position:"absolute",width:"100%",height:"100%",animation:`${od} 300ms linear infinite`,backgroundRepeat:"repeat-x",backgroundSize:`${ms*2}px 100%`,backgroundImage:`repeating-linear-gradient(${["90deg",`${e.palette.background.paper}`,`${e.palette.background.paper} ${ms/2}px`,`transparent ${ms/2}px`,`transparent ${ms}px`].join(",")})`},range:{label:"ProgressPlot-range",position:"absolute",backgroundColor:e.palette.mode==="dark"?(0,he.Z)(e.palette.text.secondary).darken(25).toHexString():(0,he.Z)(e.palette.text.secondary).lighten(25).toHexString(),height:"100%"}}));function id(e){const{availableRanges:t,loading:s}=e,{classes:a}=ad(),i=(0,l.useMemo)(()=>{if(t)return t.map(c=>({start:(0,T.clamp)(c.start,0,1),end:(0,T.clamp)(c.end,0,1)}))},[t]),r=(0,l.useMemo)(()=>{if(!i)return(0,n.jsx)(n.Fragment,{});const c=(0,wa.og)(i);return(0,on.Z)(c,(u,p)=>{const h=u.end-u.start;if(h!==0)return(0,n.jsx)("div",{className:a.range,style:{width:`${h*100}%`,left:`${u.start*100}%`}},p)})},[i,a.range]);return(0,n.jsxs)(U.Z,{position:"relative",fullHeight:!0,children:[s&&(0,n.jsx)("div",{className:a.loadingIndicator}),r]})}function rd(e,t,s){return t+(s-t)*e}function ld(e,t,s,a,i){return rd((e-t)/(s-t),a,i)}const cd=(0,N.ZL)()(e=>({root:{label:"Slider-root",display:"flex",width:"100%",height:"100%",position:"relative",alignItems:"center",cursor:"pointer"},rootDisabled:{label:"Slider-rootDisabled",cursor:"not-allowed",opacity:e.palette.action.disabledOpacity},range:{label:"Slider-range",backgroundColor:e.palette.action.active,position:"absolute",height:"100%"}}));function dd(e,t){return e==null||isNaN(e)?null:(0,n.jsx)("div",{className:t,style:{width:`${e*100}%`}})}function ud(e){const{fraction:t,disabled:s=!1,renderSlider:a=dd,onHoverOver:i,onHoverOut:r,onChange:c}=e,{classes:u,cx:p}=cd(),h=(0,l.useRef)(null),f=(0,l.useCallback)(_=>{if(!h.current)return 0;const{left:O,right:Ae}=h.current.getBoundingClientRect(),tt=ld(_.clientX,O,Ae,0,1);return(0,T.clamp)(tt,0,1)},[]),[m,y]=(0,l.useState)(!1),w=(0,l.useRef)(m);(0,l.useLayoutEffect)(()=>{w.current=m},[m]);const[k,W]=(0,l.useState)(!1),G=(0,l.useRef)(k);(0,l.useLayoutEffect)(()=>{G.current=k},[k]);const J=(0,l.useCallback)(()=>{W(!0)},[]),K=(0,l.useCallback)(()=>{W(!1),w.current||r?.()},[r]),ye=(0,l.useCallback)(()=>{y(!1),G.current||r?.()},[r]),re=(0,l.useCallback)(_=>{if(w.current&&_.currentTarget!==window||s)return;const O=f(_);if(h.current){const Ae=h.current.getBoundingClientRect();i?.({fraction:O,clientX:_.clientX,clientY:Ae.y+Ae.height/2})}w.current&&c(O)},[s,f,c,i]),se=(0,l.useCallback)(_=>{s||(document.activeElement instanceof HTMLElement&&document.activeElement.blur(),_.preventDefault(),c(f(_)),y(!0))},[s,f,c]);return(0,l.useEffect)(()=>{if(m)return window.addEventListener("pointerup",ye),window.addEventListener("pointermove",re),()=>{window.removeEventListener("pointerup",ye),window.removeEventListener("pointermove",re)}},[m,re,ye]),(0,n.jsx)("div",{ref:h,onPointerDown:se,onPointerMove:re,onMouseEnter:J,onMouseLeave:K,className:p(u.root,{[u.rootDisabled]:s}),children:a(t,u.range)})}var pd=o(2784);const fd=(0,N.ZL)()(e=>({marker:{backgroundColor:e.palette.text.primary,position:"absolute",height:16,borderRadius:1,width:2,transform:"translate(-50%, 0)"},track:{position:"absolute",left:0,right:0,height:6,backgroundColor:e.palette.action.focus},trackDisabled:{opacity:e.palette.action.disabledOpacity}})),hd=e=>e.playerState.activeData?.startTime,gd=e=>e.playerState.activeData?.currentTime,md=e=>e.playerState.activeData?.endTime,yd=e=>e.playerState.progress.fullyLoadedFractionRanges,vd=e=>e.playerState.presence;function Ad(e){const{onSeek:t}=e,{classes:s,cx:a}=fd(),[i]=(0,l.useState)(()=>(0,Kt.Z)()),r=(0,Qe.An)(hd),c=(0,Qe.An)(gd),u=(0,Qe.An)(md),p=(0,Qe.An)(vd),h=(0,Qe.An)(yd),f=(0,Z.D4)(),[m,y]=(0,l.useState)(),w=(0,gs.Z)(m),k=(0,gs.Z)(r),W=(0,gs.Z)(u),G=(0,l.useCallback)(Ct=>{!k.current||!W.current||t((0,te.add)(k.current,(0,te.fromSec)(Ct*(0,te.toSec)((0,te.subtract)(W.current,k.current)))))},[t,W,k]),J=(0,l.useCallback)(({fraction:Ct,clientX:gt,clientY:Dt})=>{if(!k.current||!W.current)return;const rt=(0,te.toSec)((0,te.subtract)(W.current,k.current)),ht=(0,te.fromSec)(Ct*rt);y({stamp:(0,te.add)(k.current,ht),clientX:gt,clientY:Dt}),f({componentId:i,type:"PLAYBACK_SECONDS",value:(0,te.toSec)(ht)})},[i,W,k,f]),K=(0,Z.Js)(),ye=(0,l.useCallback)(()=>{K(i),y(void 0)},[K,i]);(0,l.useEffect)(()=>ye,[ye]);const re=(0,l.useCallback)(Ct=>{if(Ct!=null)return(0,n.jsx)("div",{className:s.marker,style:{left:`${Ct*100}%`}})},[s.marker]),se=r&&(0,te.toSec)(r),_=u&&(0,te.toSec)(u),O=c&&r&&u?(0,te.toSec)((0,te.subtract)(c,r))/(0,te.toSec)((0,te.subtract)(u,r)):void 0,Ae=p===ke.m.INITIALIZING||p===ke.m.BUFFERING,tt=pd.useRef(null),At=m!=null,bt=(0,l.useMemo)(()=>({open:At,popperRef:tt,modifiers:[{name:"computeStyles",options:{gpuAcceleration:!1}},{name:"offset",options:{offset:[0,4]}}],anchorEl:{getBoundingClientRect:()=>new DOMRect(w.current?.clientX??0,w.current?.clientY??0,0,0)}}),[At,w]);return(0,l.useEffect)(()=>{tt.current!=null&&tt.current.update()},[m]),(0,n.jsx)(ne.Z,{title:m!=null?(0,n.jsx)(nd,{stamp:m.stamp}):"",placement:"top",disableInteractive:!0,TransitionComponent:Zc.Z,TransitionProps:{timeout:0},PopperProps:bt,children:(0,n.jsxs)(U.Z,{direction:"row",flexGrow:1,alignItems:"center",position:"relative",style:{height:32},children:[(0,n.jsx)("div",{className:a(s.track,{[s.trackDisabled]:!r})}),(0,n.jsx)(U.Z,{position:"absolute",flex:"auto",fullWidth:!0,style:{height:6},children:(0,n.jsx)(id,{loading:Ae,availableRanges:h})}),(0,n.jsx)(U.Z,{fullHeight:!0,fullWidth:!0,position:"absolute",flex:1,children:(0,n.jsx)(ud,{disabled:se==null||_==null,fraction:O,onHoverOver:J,onHoverOut:ye,onChange:G,renderSlider:re})}),(0,n.jsx)(Hc,{}),(0,n.jsx)(qc,{componentId:i})]})})}const bd=500,xd=100,Ed=10,Ra={FORWARD:1,BACKWARD:-1},ja=(e,t,s)=>{const a=(0,te.toMillis)(t),i=s?.altKey===!0?bd:s?.shiftKey===!0?Ed:xd;return(0,te.fromMillis)(a+i*e)},Cd=(0,N.ZL)()(e=>({root:{display:"flex",flexDirection:"column",padding:e.spacing(.5,1,1,1),position:"relative",backgroundColor:e.palette.background.paper,borderTop:`1px solid ${e.palette.divider}`,zIndex:1e5},disabled:{opacity:e.palette.action.disabledOpacity},popper:{"&[data-popper-placement*=top] .MuiTooltip-tooltip":{margin:e.spacing(.5,.5,.75)}},dataSourceInfoButton:{cursor:"default"}})),Sd=e=>e.playerState.presence,Td=e=>e.eventsSupported,Pd=e=>e.playbackControls.repeat;function Id(e){const{play:t,pause:s,seek:a,isPlaying:i,getTimeInfo:r,playUntil:c}=e,u=(0,Qe.An)(Sd),{classes:p,cx:h}=Cd(),f=(0,Ve.Q)(Pd),[m,y]=(0,l.useState)(!1),{currentUser:w}=je(),k=B(Td),{playbackControlActions:{setRepeat:W}}=(0,lt.W)(),G=(0,l.useCallback)(()=>{W(O=>!O)},[W]),J=(0,l.useCallback)(()=>{if(i)s();else{const{startTime:O,endTime:Ae,currentTime:tt}=r();tt&&Ae&&O&&(0,te.compare)(tt,Ae)>=0&&a(O),t()}},[i,s,r,t,a]),K=(0,l.useCallback)(O=>{const{currentTime:Ae}=r();if(!Ae)return;const tt=ja(Ra.FORWARD,Ae,O);c?c(tt):a(tt)},[r,c,a]),ye=(0,l.useCallback)(O=>{const{currentTime:Ae}=r();Ae&&a(ja(Ra.BACKWARD,Ae,O))},[r,a]),re=(0,l.useMemo)(()=>({" ":J,ArrowLeft:O=>{ye(O)},ArrowRight:O=>{K(O)}}),[ye,K,J]),se=(0,l.useCallback)(()=>{s(),y(O=>!O)},[s]),_=u===ke.m.ERROR;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(kc,{play:t,seek:a,repeatEnabled:f}),(0,n.jsx)(ca.Z,{global:!0,keyDownHandlers:re}),(0,n.jsxs)("div",{className:p.root,children:[(0,n.jsx)(Ad,{onSeek:a}),(0,n.jsxs)(U.Z,{direction:"row",alignItems:"center",flex:1,gap:1,overflowX:"auto",children:[(0,n.jsxs)(U.Z,{direction:"row",flex:1,gap:.5,children:[w&&k&&(0,n.jsx)(Zn.Z,{size:"small",title:"Create event",icon:(0,n.jsx)(Ec,{}),activeIcon:(0,n.jsx)(xc,{}),onClick:se}),(0,n.jsx)(ne.Z,{disableFocusListener:!0,classes:{popper:p.popper},title:(0,n.jsx)(U.Z,{paddingY:.75,children:(0,n.jsx)(bc,{disableSource:!0})}),children:(0,n.jsx)(Zn.Z,{className:h(p.dataSourceInfoButton,{[p.disabled]:_}),size:"small",icon:(0,n.jsx)(Rs.Myy,{})})}),(0,n.jsx)(Oc,{onSeek:a,onPause:s})]}),(0,n.jsxs)(U.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,n.jsx)(Zn.Z,{disabled:_,size:"small",title:"Seek backward",icon:(0,n.jsx)(js.b6L,{}),activeIcon:(0,n.jsx)(js.tE8,{}),onClick:()=>{ye()}}),(0,n.jsx)(Zn.Z,{disabled:_,size:"small",title:i?"Pause":"Play",onClick:J,icon:i?(0,n.jsx)(de.EPH,{}):(0,n.jsx)(js.wNO,{}),activeIcon:i?(0,n.jsx)(de.nYY,{}):(0,n.jsx)(js._kM,{})}),(0,n.jsx)(Zn.Z,{disabled:_,size:"small",title:"Seek forward",icon:(0,n.jsx)(de.Jnl,{}),activeIcon:(0,n.jsx)(de.yI2,{}),onClick:()=>{K()}})]}),(0,n.jsxs)(U.Z,{direction:"row",flex:1,alignItems:"center",justifyContent:"flex-end",gap:.5,children:[(0,n.jsx)(Zn.Z,{size:"small",title:"Loop playback",color:f?"primary":"inherit",onClick:G,icon:f?(0,n.jsx)(ps.zst,{}):(0,n.jsx)(ps.lfW,{})}),(0,n.jsx)(Pc,{})]})]}),m&&k&&(0,n.jsx)(ic,{onClose:se})]})]})}var La=o(76100),wo=o(36952),Md=o(63355),Dd=o(63285),Bd=o(53711);const Ro=(0,N.ZL)()(e=>({acccordion:{background:"none",boxShadow:"none",borderBottom:`1px solid ${e.palette.divider}`,"&:before":{display:"none"},"&.Mui-expanded":{margin:0}},accordionDetails:{display:"flex",flexDirection:"column",fontFamily:it.R.MONOSPACE,fontSize:"0.6875rem",padding:e.spacing(1.125),gap:e.spacing(1)},acccordionSummary:{height:30,minHeight:"auto",padding:e.spacing(0,.5,0,.75),fontWeight:500,"&:hover":{backgroundColor:e.palette.action.hover},"&.Mui-expanded":{minHeight:"auto"},[`& .${wo.Z.content}`]:{gap:e.spacing(.5),overflow:"hidden",alignItems:"center",margin:"0 !important"},[`& .${wo.Z.expandIconWrapper}`]:{transform:"rotate(-90deg)"},[`& .${wo.Z.expandIconWrapper}.Mui-expanded`]:{transform:"rotate(0deg)"}},detailsText:{color:e.palette.text.primary,fontSize:e.typography.caption.fontSize,lineHeight:1.5,whiteSpace:"pre-wrap",maxHeight:"30vh",overflow:"auto",flex:1,backgroundColor:e.palette.action.hover,padding:e.spacing(1)},icon:{flex:"none"}})),wd=({playerState:e})=>e.problems;function Rd({severity:e}){const{palette:t}=(0,I.Z)(),{classes:s}=Ro();switch(e){case"warn":return(0,n.jsx)(La.kxT,{className:s.icon,primaryFill:t.warning.main});case"error":return(0,n.jsx)(tn.yf,{className:s.icon,primaryFill:t.error.main});case"info":return(0,n.jsx)(Rs.IZT,{className:s.icon,primaryFill:t.info.main});default:return(0,n.jsx)(n.Fragment,{})}}function jd(e){const{details:t,tip:s}=e,{classes:a}=Ro(),i=(0,l.useMemo)(()=>t instanceof Error?(0,n.jsx)("div",{className:a.detailsText,children:t.message}):t!=null&&t!==""?(0,n.jsx)(xe.Z,{style:{whiteSpace:"pre-line"},children:t}):s!=null&&s!==""?void 0:"No details provided",[a,t,s]);return(0,n.jsxs)(Md.Z,{className:a.accordionDetails,children:[s&&(0,n.jsx)("div",{children:s}),i]})}function Ld(){const{classes:e}=Ro(),t=(0,Qe.An)(wd);return t==null||t.length===0?(0,n.jsx)(Kn.Z,{children:"No problems found"}):(0,n.jsx)(U.Z,{fullHeight:!0,flex:"auto",overflow:"auto",children:t.map((s,a)=>(0,n.jsxs)(Dd.Z,{className:e.acccordion,TransitionProps:{unmountOnExit:!0},defaultExpanded:!0,children:[(0,n.jsxs)(Bd.Z,{className:e.acccordionSummary,expandIcon:(0,n.jsx)(Jn.Z,{}),title:s.message,children:[(0,n.jsx)(Rd,{severity:s.severity}),(0,n.jsx)(xe.Z,{variant:"inherit",noWrap:!0,children:s.message})]}),(0,n.jsx)(Se.Z,{}),(0,n.jsx)(jd,{details:s.error,tip:s.tip})]},`${a}.${s.severity}.${s.message}`))})}function Od(e){const t=(0,l.useCallback)(({children:s})=>(e.value,(0,n.jsx)(n.Fragment,{children:s})),[e.value]);return(0,n.jsx)(t,{children:e.children})}var Mt=o(28219),Ls=o(38256),Nd=o(71001);const kd=(0,N.ZL)()(e=>({root:{boxSizing:"content-box",backgroundColor:e.palette.background.paper},badgeRoot:{display:"flex",alignItems:"baseline",gap:e.spacing(1)},badge:{fontSize:e.typography.caption.fontSize,padding:e.spacing(.125,.75),borderRadius:8,transform:"none",position:"relative"},badgeInvisible:{display:"none"},anchorRight:{borderLeft:`1px solid ${e.palette.divider}`},anchorLeft:{borderRight:`1px solid ${e.palette.divider}`},tabs:{minHeight:"auto",flex:"1 1 auto",overflow:"hidden",paddingLeft:e.spacing(.25),".MuiTabs-indicator":{transform:"scaleX(0.5)",height:2},".MuiTab-root":{minHeight:30,minWidth:e.spacing(4),padding:e.spacing(0,1),color:e.palette.text.secondary,fontSize:"0.6875rem","&.Mui-selected":{color:e.palette.text.primary}}},iconButton:{padding:e.spacing(.91125),color:e.palette.text.secondary,borderRadius:0,":hover":{color:e.palette.text.primary}},tabContent:{flex:"auto",overflow:"auto"}}));function Zd(){return null}function Oa({items:e,anchor:t,onClose:s,activeTab:a,setActiveTab:i}){const{classes:r,cx:c}=kd(),u=(a&&e.get(a)?.component)??Zd;return(0,n.jsxs)(U.Z,{className:c(r.root,{[r.anchorLeft]:t==="left",[r.anchorRight]:t==="right"}),flexShrink:0,overflow:"hidden","data-tourid":`sidebar-${t}`,children:[(0,n.jsxs)(U.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsx)(Vn.Z,{className:r.tabs,textColor:"inherit",value:a??!1,onChange:(p,h)=>{h!==a&&i(h)},children:Array.from(e.entries(),([p,h])=>(0,n.jsx)(fn.Z,{label:(0,n.jsx)(Nd.Z,{invisible:h.badge==null,badgeContent:h.badge?.count,color:h.badge?.color,classes:{root:r.badgeRoot,badge:r.badge,invisible:r.badgeInvisible},children:h.title}),value:p,"data-testid":`${p}-${t}`},p))}),(0,n.jsx)(pe.Z,{className:r.iconButton,onClick:s,size:"small","data-testid":`sidebar-close-${t}`,children:(0,n.jsx)(Le.Z,{fontSize:"inherit"})})]}),(0,n.jsx)(Se.Z,{}),a!=null&&(0,n.jsx)("div",{className:r.tabContent,children:(0,n.jsx)(u,{})})]})}var L0=o(24426);const Fd=(0,N.ZL)()({mosaicWrapper:{flex:"1 1 100%","& > .mosaic > .drop-target-container":{display:"none !important"}}});function Os(e){if(typeof e=="object")return e.first==="leftbar"?e.splitPercentage:Os(e.first)??Os(e.second)}function Ns(e){if(typeof e=="object")return e.second==="rightbar"?e.splitPercentage:Ns(e.first)??Ns(e.second)}function Ud(e){const{children:t,leftItems:s,selectedLeftKey:a,onSelectLeftKey:i,leftSidebarSize:r,setLeftSidebarSize:c,rightItems:u,selectedRightKey:p,onSelectRightKey:h,rightSidebarSize:f,setRightSidebarSize:m}=e,[y,w]=(0,l.useState)("children"),{classes:k}=Fd(),W=a!=null&&s.has(a),G=p!=null&&u.has(p);(0,l.useEffect)(()=>{const re=100*(320/window.innerWidth),se=100*(1-320/window.innerWidth);w(_=>{let O="children";return G&&(O={direction:"row",first:O,second:"rightbar",splitPercentage:f??Ns(_)??se}),W&&(O={direction:"row",first:"leftbar",second:O,splitPercentage:r??Os(_)??re}),O})},[r,f,W,G]);const J=(0,l.useCallback)(K=>{K!=null&&(w(K),c(Os(K)),m(Ns(K)))},[c,m]);return(0,n.jsx)(U.Z,{direction:"row",fullHeight:!0,overflow:"hidden",children:(0,n.jsx)("div",{className:k.mosaicWrapper,children:(0,n.jsx)(Mt.wB,{className:"",value:y,onChange:J,renderTile:K=>{switch(K){case"children":return(0,n.jsx)(Ls.Z,{children:t});case"leftbar":return(0,n.jsx)(Ls.Z,{children:(0,n.jsx)(Oa,{anchor:"left",onClose:()=>{i(void 0)},items:s,activeTab:a,setActiveTab:i})});case"rightbar":return(0,n.jsx)(Ls.Z,{children:(0,n.jsx)(Oa,{anchor:"right",onClose:()=>{h(void 0)},items:u,activeTab:p,setActiveTab:h})})}},resize:{minimumPaneSizePercentage:10}})})})}var zd="../../packages/studio-base/src/components/StudioLogsSettings/useStudioLogsSettingsTree.ts";const Wd=q.ZP.getLogger(zd);function Gd(){const e=ie();return(0,l.useMemo)(()=>{const t=new Map,s={Settings:{label:"Settings",fields:{level:{label:"level",input:"select",value:e.globalLevel,options:[{label:"error",value:"error"},{label:"warn",value:"warn"},{label:"info",value:"info"},{label:"debug",value:"debug"}]}}}},a={label:"Misc",defaultExpansionState:"expanded",children:{}};for(const i of e.channels){const r=i.name,c=r.split("/"),u=/^(studio\/)/.test(r)?`${c.shift()}/`:"",[p,h,f,m,...y]=c;if(p!=="packages"){a.children[r]={label:r,visible:i.enabled},t.set(`misc/${r}`,{type:"channel",fullPath:i.name});continue}if(!h)continue;if(f!=="src"||!m){a.children[i.name]={label:i.name,visible:i.enabled},t.set(`misc/${r}`,{type:"channel",fullPath:i.name});continue}const w=s[h]??={label:h,visible:!1,children:{}};t.set(h,{type:"prefix",fullPath:`${u}packages/${h}`});const k=w.children[m]??={label:m,visible:!1};if(i.enabled&&(w.visible=!0,k.visible=!0),(0,Oe.extname)(m)){t.set(`${h}/${m}`,{type:"channel",fullPath:`${u}packages/${h}/src/${m}`});continue}if(t.set(`${h}/${m}`,{type:"prefix",fullPath:`${u}packages/${h}/src/${m}`}),y.length>0){k.children??={};const W=y.join("/");k.children[W]={label:W,visible:i.enabled},t.set(`${h}/${m}/${W}`,{type:"channel",fullPath:`${u}packages/${h}/src/${m}/${W}`})}}return s.misc=a,{enableFilter:!0,actionHandler:i=>{if(Wd.debug("action",i),i.action==="update"&&i.payload.path.join(".")==="Settings.level"){if(typeof i.payload.value!="string")return;e.setGlobalLevel((0,q.A_)(i.payload.value));return}if(i.action!=="update"||i.payload.input!=="boolean")return;const r=i.payload.path;if(r[r.length-1]!=="visible")return;const u=i.payload.value===!0,h=r.slice(0,r.length-1).join("/"),f=t.get(h);switch(f?.type){case"prefix":u?e.enablePrefix(f.fullPath):e.disablePrefix(f.fullPath);break;case"channel":u?e.enableChannel(f.fullPath):e.disableChannel(f.fullPath);break;default:break}},nodes:s}},[e])}function Qd(){const e=Gd();return(0,n.jsx)(xa,{variant:"log",settings:e})}var Yd=o(71696),Na=o.n(Yd);const Hd={speed:1};function Ut(e,{layout:t,trimConfigById:s=!0}){const a=(0,Mt.fY)(t??null).filter(c=>!(0,T.isEmpty)(c)),i=(0,Me.bP)(a,e.configById),r=s?(0,T.pick)(e.configById,[...i,...a]):e.configById;return{...e,configById:r,layout:t}}function kt(e,t){const{configs:s}=t,a=e.configById,i=s.reduce((c,{id:u,config:p,defaultConfig:h={},override:f=!1})=>{if(f)return{...c,[u]:p};const m=c[u],y={...h,...c[u],...p};return(0,T.isEqual)(m,y)?c:{...c,[u]:y}},e.configById);if(s.find(({id:c})=>(0,Me.$k)(c)===Cn.bm)){const c=(0,Mt.fY)(e.layout??null),u=(0,Me.bP)(c,i);return{...e,configById:(0,T.pick)(i,[...u,...c])}}return a===i?e:{...e,configById:i}}function Vd(e,t){const{panelType:s,perPanelFunc:a}=t,i={...e.configById},r=e.configById;for(const[c,u]of Object.entries(r))(0,Me.$k)(c)===s&&(i[c]=a(u));return{...e,configById:i}}const Kd=(e,{tabId:t,root:s,path:a})=>{if(t!=null){const c=e.configById[t],u=(0,Me.VJ)(a,c,t);return kt(e,u)}else if(typeof s=="string")return Ut(e,{layout:void 0});const i=(0,Mt.NO)(s,a),r=(0,Mt.Xw)(s,[i]);return Ut(e,{layout:r})},Xd=(e,{id:t,tabId:s,direction:a,config:i,root:r,path:c})=>{const u=(0,Me.$k)(t),p=(0,Me.nJ)(u);let h={...e};const{configById:f}=h;if(s!=null){const m=f[s],y=m.tabs[m.activeTabIdx]?.layout;if(y!=null){const w=(0,Mt.Xw)(y,[{path:(0,Me.p9)(t,y),spec:{$set:{first:t,second:p,direction:a}}}]),k=(0,Me.p1)(w,m);h=kt(h,{configs:[{id:s,config:k},{id:p,config:i}]})}}else{h=Ut(h,{layout:(0,Mt.Xw)(r,[{path:c,spec:{$set:{first:t,second:p,direction:a}}}]),trimConfigById:u!==Cn.bm});const m=u===Cn.bm?(0,Me.bP)([t],f).reduce((y,w)=>({...y,[w]:f[w]}),{}):void 0;h=kt(h,(0,Me.jQ)({id:p,config:i,relatedConfigs:m}))}return h},$d=(e,{tabId:t,originalId:s,type:a,config:i,relatedConfigs:r,root:c,path:u})=>{const p=(0,Me.nJ)(a);let h={...e};if(t!=null&&s!=null){const f=h.configById[t];if(f){const m=f.tabs[f.activeTabIdx]?.layout;if(m!=null){const y=(0,Me.fG)({originalId:s,newId:p},m),w=(0,Me.p1)(y,f);h=kt(h,{configs:[{id:t,config:w}]})}}}else h=Ut(h,{layout:(0,Mt.Xw)(c,[{path:u,spec:{$set:p}}]),trimConfigById:a!==Cn.bm});return h=kt(h,(0,Me.jQ)({id:p,config:i,relatedConfigs:r})),h},Jd=(e,{idToReplace:t,layout:s,idsToRemove:a})=>{const i=(0,Me.nJ)(Cn.bm),{configById:r}=e,c=(0,Me.IP)(s,r,a),u=(0,Me.CD)(s,r).filter(w=>!a.includes(w)),p=(0,Me.fG)({idsToRemove:u},c),h=(0,Me.fG)({originalId:t,newId:i,idsToRemove:a},s);let f=Ut(e,{layout:h??"",trimConfigById:!1});const m={id:i,config:{...Me.kY,tabs:[{title:"1",layout:p}]}},y=(0,Me.w$)(t,i,a,r);return f=kt(f,{configs:[m,...y]}),f},qd=(e,{idToReplace:t,layout:s,idsToRemove:a})=>{const{configById:i}=e,r=(0,Me.nJ)(Cn.bm),c=(0,Me.fG)({originalId:t,newId:r,idsToRemove:a},s);let u=Ut({...e},{layout:c??"",trimConfigById:!1});const p=a.map(m=>({title:(0,Me.$k)(m),layout:m})),h={id:r,config:{...Me.kY,tabs:p}},f=(0,Me.w$)(t,r,a,i);return u=kt(u,{configs:[h,...f]}),u},_d=(e,{source:t,target:s})=>{const a=t.panelId===s.panelId?(0,Me.A$)({source:t,target:s,savedProps:e.configById}):(0,Me.rZ)({source:t,target:s,savedProps:e.configById});return kt(e,a)},eu=(e,{tabId:t,id:s,config:a,relatedConfigs:i})=>{let r={...e},c={configs:[]};a&&(c=(0,Me.jQ)({id:s,config:a,relatedConfigs:i}));let u;if(t!=null){const f=e.configById[t];(0,Me.dr)(f)&&(u=f.tabs[f.activeTabIdx]?.layout)}else u=e.layout;const h={layout:(0,T.isEmpty)(u)?s:{direction:"row",first:s,second:u},trimConfigById:!i};return t!=null&&typeof h.layout=="string"?r=kt(r,{configs:[{id:t,config:(0,Me.p1)(h.layout,{...Me.kY,...e.configById[t]})}]}):r=Ut(r,h),r=kt(r,c),r},tu=(e,{newPanelType:t,destinationPath:s=[],position:a,tabId:i,config:r,relatedConfigs:c})=>{const u=(0,Me.nJ)(t),p=[];if(i!=null){const{configs:m}=(0,Me.th)(u,s,a,e.configById[i],i);p.push(...m)}const h=i!=null?e.layout:(0,Mt.Xw)(e.layout,(0,Me._f)(e.layout,u,s,a??"left"));if(r){const{configs:m}=(0,Me.jQ)({id:u,config:r,relatedConfigs:c});p.push(...m)}let f=Ut(e,{layout:h,trimConfigById:!c});return f=kt(f,{configs:p}),f},nu=(e,{originalLayout:t,sourceTabId:s,position:a,destinationPath:i,ownPath:r,sourceTabConfig:c,sourceTabChildConfigs:u})=>{const p=c.tabs[c.activeTabIdx]?.layout;let h={...e};if(typeof p=="string")h=Ut(e,{layout:t,trimConfigById:!1}),h=kt(h,{configs:[{id:s,config:(0,Me.p1)(p,c)},...u]});else if(p!=null){const f=(0,Mt.uz)(p,r,i,a),m=(0,Mt.Xw)(p,f);h=Ut(e,{layout:t,trimConfigById:!1}),h=kt(h,{configs:[{id:s,config:(0,Me.p1)(m,e.configById[s])},...u]})}return h},su=(e,{originalLayout:t,sourceTabId:s,position:a,destinationPath:i,ownPath:r,sourceTabConfig:c,sourceTabChildConfigs:u})=>{const p=c.tabs[c.activeTabIdx]?.layout;if(p==null)return e;const h=(0,Me.VJ)(r,e.configById[s],s),f={...h,configs:[...h.configs,...u]},m=(0,Mt.PC)(p,r);if(typeof m!="string")return e;const y=(0,Mt.Xw)(t,(0,Me._f)(t,m,i,a));let w=Ut(e,{layout:y,trimConfigById:!1});return w=kt(w,f),w},ou=(e,{originalLayout:t,panelId:s,targetTabId:a,position:i,destinationPath:r,ownPath:c,targetTabConfig:u,sourceTabChildConfigs:p})=>{const h=(0,Me.th)(s,r,i,u,a),f={...h,configs:[...h.configs,...p]},m=(0,Mt.NO)(t,c),y=(0,Mt.Xw)(t,[m]);let w=Ut(e,{layout:y,trimConfigById:!1});return w=kt(w,{configs:f.configs}),w},au=(e,{originalLayout:t,panelId:s,sourceTabId:a,targetTabId:i,position:r,destinationPath:c,ownPath:u,targetTabConfig:p,sourceTabConfig:h,sourceTabChildConfigs:f})=>{const{configs:m}=(0,Me.VJ)(u,h,a),{configs:y}=(0,Me.th)(s,c,r,p,i);let w=Ut(e,{layout:t,trimConfigById:!1});return w=kt(w,{configs:[...m,...y,...f.filter(({id:k})=>k!==i)]}),w},iu=(e,{path:t,sourceTabId:s})=>{if(t.length>0){if(s!=null){const a=e.configById[s],i=a.tabs[a.activeTabIdx]?.layout;if(i==null)return e;const r=(0,Mt.Xw)(i,[(0,Mt.kq)(t)]),c=(0,Me.p1)(r,a);return kt(e,{configs:[{id:s,config:c}]})}return Ut(e,{layout:(0,Mt.Xw)(e.layout??"",[(0,Mt.kq)(t)]),trimConfigById:!1})}else if(s!=null){const a=e.configById[s];return kt(e,{configs:[{id:s,config:(0,Me.p1)(void 0,a)}]})}throw new Error("Can't drag the top-level panel of a layout")},ru=(e,t)=>{const{originalLayout:s,originalSavedProps:a,panelId:i,sourceTabId:r,targetTabId:c,position:u,destinationPath:p,ownPath:h}=t,f=r!=null&&c==null,m=r==null&&c!=null,y=r!=null&&c!=null,w=r===c&&y,k=r!=null?a[r]:void 0,W=c!=null?a[c]:void 0,G=r!=null?(0,Me.bP)([r],a):[],J=(0,on.Z)(G,K=>{const ye=a[K];return ye?{id:K,config:ye}:void 0});if(w&&u==null&&p==null)return{...e,layout:s,configById:a};if(w&&k&&u!=null&&p!=null)return nu(e,{originalLayout:s,sourceTabId:r,position:u,destinationPath:p,ownPath:h,sourceTabConfig:k,sourceTabChildConfigs:J});if(f&&k&&u!=null&&p!=null)return su(e,{originalLayout:s,sourceTabId:r,position:u,destinationPath:p,ownPath:h,sourceTabConfig:k,sourceTabChildConfigs:J});if(m)return ou(e,{originalLayout:s,panelId:i,targetTabId:c,position:u,destinationPath:p,ownPath:h,targetTabConfig:W,sourceTabChildConfigs:J});if(y&&k)return au(e,{originalLayout:s,panelId:i,sourceTabId:r,targetTabId:c,position:u,destinationPath:p,ownPath:h,targetTabConfig:W,sourceTabConfig:k,sourceTabChildConfigs:J});if(u!=null&&p!=null&&!(0,T.isEqual)(p,h)){const K=(0,Mt.uz)(s,h,p,u),ye=(0,Mt.Xw)(s,K);return Ut(e,{layout:ye,trimConfigById:!1})}return{...e,layout:s,configById:a}};function lu(e,t){switch(t.type){case"CHANGE_PANEL_LAYOUT":return Ut(e,t.payload);case"SAVE_PANEL_CONFIGS":return kt(e,t.payload);case"SAVE_FULL_PANEL_CONFIG":return Vd(e,t.payload);case"CREATE_TAB_PANEL":return t.payload.singleTab?Jd(e,t.payload):qd(e,t.payload);case"OVERWRITE_GLOBAL_DATA":return{...e,globalVariables:t.payload};case"SET_GLOBAL_DATA":{const s={...e.globalVariables,...t.payload};return Object.keys(s).forEach(a=>{s[a]==null&&delete s[a]}),{...e,globalVariables:s}}case"SET_USER_NODES":{const s={...e.userNodes};for(const[a,i]of Object.entries(t.payload))i==null?delete s[a]:s[a]=i;return{...e,userNodes:s}}case"SET_PLAYBACK_CONFIG":return{...e,playbackConfig:{...e.playbackConfig,...t.payload}};case"CLOSE_PANEL":return Kd(e,t.payload);case"SPLIT_PANEL":return Xd(e,t.payload);case"SWAP_PANEL":return $d(e,t.payload);case"MOVE_TAB":return _d(e,t.payload);case"ADD_PANEL":return eu(e,t.payload);case"DROP_PANEL":return tu(e,t.payload);case"START_DRAG":return iu(e,t.payload);case"END_DRAG":return ru(e,t.payload);default:throw new Error("This reducer should only be used for panel actions")}return e}const cu=globalThis.FOXGLOVE_STUDIO_DEFAULT_LAYOUT??{configById:{"3D!18i6zy7":{layers:{"845139cb-26bc-40b3-8161-8ab60af4baf5":{visible:!0,frameLocked:!0,label:"Grid",instanceId:"845139cb-26bc-40b3-8161-8ab60af4baf5",layerId:"foxglove.Grid",size:10,divisions:10,lineWidth:1,color:"#248eff",position:[0,0,0],rotation:[0,0,0],order:1}}},"RawMessages!os6rgs":{},"Image!3mnp456":{}},globalVariables:{},userNodes:{},playbackConfig:{...Hd},layout:{first:"3D!18i6zy7",second:{first:"Image!3mnp456",second:"RawMessages!os6rgs",direction:"column",splitPercentage:30},direction:"row",splitPercentage:70}};var ka=o(74354);function ks(e,t,s){return typeof e=="string"?e===t?s:e:{...e,first:ks(e.first,t,s),second:ks(e.second,t,s)}}function Za(e,t,s,a){const i={...e,configById:{...e.configById,[s]:a}};if(delete i.configById[t],i.layout!=null){i.layout=ks(i.layout,t,s);const r=Object.keys(i.configById).filter(Me.lD);for(const c of r){const u=i.configById[c];(0,Me.dr)(u)&&(i.configById[c]={...u,tabs:u.tabs.map(p=>({...p,layout:p.layout!=null?ks(p.layout,t,s):void 0}))})}}return i}const es={type:"point",poseTopic:"/move_base_simple/goal",pointTopic:"/clicked_point",poseEstimateTopic:"/initialpose",poseEstimateXDeviation:.5,poseEstimateYDeviation:.5,poseEstimateThetaDeviation:(0,T.round)(Math.PI/12,8)};function du(e){return{followTf:e.followTf,followMode:e.followMode==="follow-orientation"?"follow-pose":e.followMode==="follow"?"follow-position":"follow-none",cameraState:{...ka.d,...e.cameraState,phi:(e.cameraState?.phi??Math.PI/3)*180/Math.PI,thetaOffset:(e.cameraState?.thetaOffset??0)*180/Math.PI,fovy:(e.cameraState?.fovy??Math.PI/4)*180/Math.PI},publish:{type:"point",poseTopic:e.clickToPublishPoseTopic??es.poseTopic,pointTopic:e.clickToPublishPointTopic??es.pointTopic,poseEstimateTopic:e.clickToPublishPoseEstimateTopic??es.poseEstimateTopic,poseEstimateXDeviation:e.clickToPublishPoseEstimateXDeviation??es.poseEstimateXDeviation,poseEstimateYDeviation:e.clickToPublishPoseEstimateYDeviation??es.poseEstimateYDeviation,poseEstimateThetaDeviation:e.clickToPublishPoseEstimateThetaDeviation??es.poseEstimateThetaDeviation},topics:Object.fromEntries((0,on.Z)(e.checkedKeys??[],t=>t.startsWith("t:")?[t.substring(2),{visible:!0}]:void 0)),scene:{},transforms:{},layers:{},imageMode:{}}}function uu(e){if(e.layout==null)return e;const t=(0,Me.CD)(e.layout,e.configById).filter(a=>(0,Me.$k)(a)==="3D Panel");let s=e;for(const a of t){const i=e.configById[a];i!=null&&(s=Za(s,a,(0,Me.nJ)("3D"),du(i)))}return s}var pu=o(86073);function fu(e){return{cameraState:ka.d,followMode:"follow-pose",followTf:void 0,scene:{},transforms:{},topics:{},layers:{},publish:pu.B,imageMode:{imageTopic:e.cameraTopic,calibrationTopic:void 0,synchronize:e.synchronize,rotation:e.rotation!=null&&[0,90,180,270].includes(e.rotation)?e.rotation:0,flipHorizontal:e.flipHorizontal,flipVertical:e.flipVertical,minValue:e.minValue,maxValue:e.maxValue,annotations:Object.fromEntries((e.enabledMarkerTopics??[]).map(t=>[t,{visible:!0}]))}}}function hu(e){if(e.layout==null)return e;const t=(0,Me.CD)(e.layout,e.configById).filter(a=>(0,Me.$k)(a)==="ImageViewPanel");let s=e;for(const a of t){const i=e.configById[a];i!=null&&(s=Za(s,a,(0,Me.nJ)("Image"),fu(i)))}return s}function gu(e){let t={...e,configById:e.configById??e.savedProps??{}};return delete t.savedProps,t=uu(t),t=hu(t),t}var mu="../../packages/studio-base/src/components/CurrentLayoutLocalStorageSyncAdapter.tsx";function yu(e){return e.selectedLayout?.data}const jo=q.ZP.getLogger(mu),Lo="studio.layout";function vu(){const{selectedSource:e}=(0,Ze.n)(),{setCurrentLayout:t}=(0,qe._B)(),s=(0,qe.NS)(yu);(0,l.useEffect)(()=>{e?.sampleLayout&&t({data:e.sampleLayout})},[e,t]);const[a]=(0,Ds.Nr)(s,250,{maxWait:500});return(0,l.useEffect)(()=>{if(!a)return;const i=JSON.stringify(a);Na()(i),localStorage.setItem(Lo,i)},[a]),(0,l.useEffect)(()=>{jo.debug(`Reading layout from local storage: ${Lo}`);const i=localStorage.getItem(Lo);i?jo.debug("Restoring layout from local storage"):jo.debug("No layout found in local storage. Using default layout.");const r=gu(i?JSON.parse(i):cu);t({data:r})},[t]),(0,n.jsx)(n.Fragment,{})}function Au(e,t){const s=new URL(e.href);return"time"in t&&(t.time?s.searchParams.set("time",(0,te.toRFC3339String)(t.time)):s.searchParams.delete("time")),"ds"in t&&(t.ds?s.searchParams.set("ds",t.ds):s.searchParams.delete("ds")),"dsParams"in t&&([...s.searchParams].forEach(([a,i])=>{a.startsWith("ds.")&&s.searchParams.delete(a)}),Object.entries(t.dsParams??"").forEach(([a,i])=>{s.searchParams.set("ds."+a,i)})),s.searchParams.sort(),s}function bu(e){const t=e.searchParams.get("ds")??void 0,s=e.searchParams.get("time"),a=s==null?void 0:(0,te.fromRFC3339String)(s),i={};e.searchParams.forEach((c,u)=>{if(u&&c&&u.startsWith("ds.")){const p=u.replace(/^ds./,"");i[p]=c}});const r=(0,T.omitBy)({time:a,ds:t,dsParams:(0,T.isEmpty)(i)?void 0:i},T.isEmpty);return(0,T.isEmpty)(r)?void 0:r}const xu=e=>e.playerState.capabilities.includes(ke.C.playbackControl),Eu=e=>e.playerState.activeData?.currentTime,Cu=e=>e.playerState.urlState,Su=e=>e.selectedEventId;function Fa(e){const t=Au(new URL(window.location.href),e);window.history.replaceState(void 0,"",t.href)}function Tu(){const e=(0,Qe.An)(Cu),t=(0,L.vE)(e),s=(0,Qe.An)(xu),a=(0,Qe.An)(Eu),[i]=(0,Ds.Nr)(a,500,{maxWait:500}),r=B(Su);(0,l.useEffect)(()=>{Fa({time:s?i:void 0})},[s,i]),(0,l.useEffect)(()=>{t!=null&&Fa({ds:t.sourceId,dsParams:(0,T.pickBy)({...t.parameters,eventId:r},T.isString)})},[r,t])}function Pu(){return Tu(),null}function Iu(){const{syncAdapters:e}=(0,Ue.b)();return(0,l.useMemo)(()=>e?(0,n.jsxs)(n.Fragment,{children:[...e]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Pu,{}),(0,n.jsx)(vu,{})]}),[e])}var Mu=o(68181),Du=o(8301),Bu=o(29796),Oo=o(16727),Ua=o(43234);const za=(0,N.ZL)()((e,t,s)=>({root:{containerType:"inline-size"},aliasedTopicName:{color:e.palette.primary.main,display:"block",textAlign:"start"},row:{whiteSpace:"nowrap",boxSizing:"border-box",[`:not(:hover) .${s.dragHandle}`]:{visibility:"hidden"},":focus":{outline:`1px solid ${e.palette.primary.main}`,outlineOffset:-1,[`.${s.dragHandle}`]:{visibility:"visible"}},position:"relative",display:"flex",alignItems:"center",height:"100%",gap:e.spacing(.75),paddingLeft:e.spacing(2),paddingRight:e.spacing(.75),backgroundColor:e.palette.background.paper,borderTop:`1px solid ${e.palette.action.selected}`,[`&.${s.isDragging}:active`]:{backgroundColor:(0,he.Z)(e.palette.primary.main).setAlpha(e.palette.action.hoverOpacity).toRgbString(),outline:`1px solid ${e.palette.primary.main}`,outlineOffset:-1,borderRadius:e.shape.borderRadius}},fieldRow:{borderTop:`1px solid ${e.palette.background.paper}`,backgroundColor:e.palette.action.hover},dragHandle:{opacity:.6,cursor:"grab"},isDragging:{}}));function wu({messagePathResult:e,style:t}){const{cx:s,classes:a}=za(),{fullPath:i,suffix:{pathSuffix:r,type:c,isLeaf:u},topic:p}=e.item,{connectDragSource:h,cursor:f,isDragging:m}=(0,Ua.W)({path:i,rootSchemaName:p.schemaName,isTopic:!1,isLeaf:u});return(0,n.jsxs)("div",{ref:h,className:s(a.row,a.fieldRow,{[a.isDragging]:m}),style:{...t,cursor:f},children:[(0,n.jsxs)(U.Z,{flex:"auto",direction:"row",gap:2,overflow:"hidden",children:[(0,n.jsx)(xe.Z,{variant:"body2",noWrap:!0,children:(0,n.jsx)(Oo.e,{str:r,indices:e.positions,offset:e.item.offset})}),(0,n.jsx)(xe.Z,{variant:"caption",color:"text.secondary",noWrap:!0,children:c})]}),(0,n.jsx)("div",{"data-testid":"TopicListDragHandle",style:{cursor:f},className:a.dragHandle,children:(0,n.jsx)(ao.TXB,{})})]})}var Ru=o(72283);const ju=(0,N.ZL)()(e=>({root:{display:"flex",borderColor:e.palette.action.selected,borderRadius:"1em",color:e.palette.text.secondary,backgroundColor:e.palette.background.paper,["@container (max-width: 320px)"]:{display:"none"}},stat:{whiteSpace:"nowrap",minWidth:"1em",textAlign:"center",fontSize:e.typography.caption.fontSize,color:e.palette.text.secondary,paddingBlock:e.spacing(.25),fontFeatureSettings:`${e.typography.fontFeatureSettings}, 'tnum'`,"&:nth-child(1)":{paddingInlineStart:e.spacing(.75)},"&:nth-last-child(1)":{paddingInlineEnd:e.spacing(.75)}},divider:{borderColor:e.palette.action.selected,marginInline:e.spacing(.5)}}));function Lu({topicName:e}){const{classes:t}=ju();return(0,n.jsxs)(Ru.Z,{variant:"outlined",className:t.root,children:[(0,n.jsx)("div",{className:t.stat,"data-topic":e,"data-topic-stat":"frequency",children:"\u2013"}),(0,n.jsx)(Se.Z,{className:t.divider,orientation:"vertical",flexItem:!0}),(0,n.jsx)("div",{className:t.stat,"data-topic":e,"data-topic-stat":"count",children:"\u2013"})]})}function Ou({topicResult:e,style:t}){const{cx:s,classes:a}=za(),i=e.item,{connectDragSource:r,connectDragPreview:c,cursor:u,isDragging:p}=(0,Ua.W)({path:i.name,rootSchemaName:i.schemaName,isTopic:!0,isLeaf:!1});return(0,n.jsxs)("div",{ref:c,className:s(a.row,{[a.isDragging]:p}),style:t,children:[(0,n.jsxs)(U.Z,{flex:"auto",overflow:"hidden",children:[(0,n.jsxs)(xe.Z,{variant:"body2",noWrap:!0,children:[(0,n.jsx)(Oo.e,{str:i.name,indices:e.positions}),i.aliasedFromName!=null&&(0,n.jsxs)(xe.Z,{variant:"caption",className:a.aliasedTopicName,children:["from ",i.aliasedFromName]})]}),(0,n.jsx)(xe.Z,{variant:"caption",color:"text.secondary",children:i.schemaName==null?"\u2014":(0,n.jsx)(Oo.e,{str:i.schemaName,indices:e.positions,offset:i.name.length+1})})]}),(0,n.jsx)(Lu,{topicName:i.name}),(0,n.jsx)("div",{"data-testid":"TopicListDragHandle",ref:r,style:{cursor:u},className:a.dragHandle,children:(0,n.jsx)(ao.TXB,{})})]})}var No=o(16037),Wa=o(1012);function*Ga(e,t,s,a){for(const{name:i,isArray:r,isConstant:c,isComplex:u,type:p}of e.definitions){if(c===!0)continue;const h=`${s}.${(0,Wa.UY)(i)}`;if(yield{pathSuffix:h,type:r===!0?`${p}[]`:p,isLeaf:u!==!0},u===!0){if(a.includes(p))continue;const f=t.get(p);if(!f)continue;yield*Ga(f,t,r===!0?`${h}[:]`:h,[...a,p])}}}function Nu(e,t){const s=[],a=new Map,i=(0,T.groupBy)(e.filter(r=>r.schemaName!=null),r=>r.schemaName);for(const[r,c]of Object.entries(i)){const u=t.get(r);if(u)for(const p of Ga(u,t,"",[r]))for(const h of c){const f=(0,Wa.dH)(h.name),m={topic:h,suffix:p,fullPath:f+p.pathSuffix,offset:f.length};s.push(m);let y=a.get(h.name);y||(y=[],a.set(h.name,y)),y.push(m)}}return{items:s,itemsByTopicName:a}}function Qa(e){return{item:e,score:0,positions:new Set,start:0,end:0}}function ku(e){const{topics:t,datatypes:s,filterText:a}=e,i=(0,l.useMemo)(()=>new No.Av(t,{selector:f=>`${f.name}|${f.schemaName}`}),[t]),r=(0,l.useMemo)(()=>Nu(t,s),[t,s]),c=(0,l.useMemo)(()=>new No.Av(r.items,{selector:f=>f.fullPath,match(f){return No.x8.call(this,f).filter(y=>y.end>y.item.offset+1)}}),[r]),u=(0,l.useMemo)(()=>a?i.find(a):t.map(Qa),[a,t,i]),p=(0,l.useMemo)(()=>a?c.find(a):[],[a,c]);return(0,l.useMemo)(()=>{const f=[],m=(0,T.groupBy)(p,W=>W.item.topic.name),y=new Map,w=new Map;for(const W of u)y.set(W.item.name,W.item),w.set(W.item.name,W);for(const{item:{topic:W}}of p)y.set(W.name,W);const k=Array.from(y.values()).sort((W,G)=>{const J=w.has(W.name),K=w.has(G.name);return J&&!K?-1:!J&&K?1:W.name.localeCompare(G.name)});for(const W of k){f.push({type:"topic",item:w.get(W.name)??Qa(W)});const G=m[W.name];if(G!=null)for(const J of G)f.push({type:"schema",item:J})}return f},[u,p])}const Zu=(0,N.ZL)()((e,t,s)=>({root:{width:"100%",height:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},appBar:{top:0,zIndex:e.zIndex.appBar,padding:e.spacing(.5),position:"sticky",backgroundColor:e.palette.background.paper},listItem:{backgroundColor:e.palette.background.paper,containerType:"inline-size",paddingRight:0,"&.isDragging:active":{backgroundColor:(0,he.Z)(e.palette.primary.main).setAlpha(e.palette.action.hoverOpacity).toRgbString(),outline:`1px solid ${e.palette.primary.main}`,outlineOffset:-1,borderRadius:e.shape.borderRadius},[`:not(:hover) .${s.dragHandle}`]:{visibility:"hidden"}},listItemText:{marginTop:e.spacing(.5),marginBottom:e.spacing(.5)},startAdornment:{display:"flex"},dragHandle:{opacity:.6,cursor:"grab"}})),Fu=({playerState:e})=>e.presence;function Uu(){const{classes:e,cx:t}=Zu(),[s,a]=(0,l.useState)(""),[i]=(0,Ds.Nr)(s,50),r=(0,Qe.An)(Fu),{topics:c,datatypes:u}=(0,go.Ui)(),p=(0,l.useRef)(null),h=ku({topics:c,datatypes:u,filterText:i});return(0,l.useEffect)(()=>{p.current?.resetAfterIndex(0)},[h]),r===ke.m.NOT_PRESENT?(0,n.jsx)(Kn.Z,{children:"No data source selected"}):r===ke.m.ERROR?(0,n.jsx)(Kn.Z,{children:"An error occurred"}):r===ke.m.INITIALIZING?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("header",{className:e.appBar,children:(0,n.jsx)(Rt.Z,{disabled:!0,variant:"filled",fullWidth:!0,placeholder:"Waiting for data...",InputProps:{size:"small",startAdornment:(0,n.jsx)(Ms.Z,{fontSize:"small"})}})}),(0,n.jsx)(fs.Z,{dense:!0,disablePadding:!0,children:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].map(f=>(0,n.jsx)(hs.ZP,{className:t(e.listItem,"loading"),divider:!0,children:(0,n.jsx)(kn.Z,{className:e.listItemText,primary:(0,n.jsx)(_n.Z,{animation:!1,width:"20%"}),secondary:(0,n.jsx)(_n.Z,{animation:"wave",width:"55%"}),secondaryTypographyProps:{variant:"caption"}})},f))},"loading")]}):(0,n.jsxs)("div",{className:e.root,children:[(0,n.jsx)("header",{className:e.appBar,children:(0,n.jsx)(Rt.Z,{id:"topic-filter",variant:"filled",disabled:r!==ke.m.PRESENT,onChange:f=>{a(f.target.value)},value:s,fullWidth:!0,placeholder:"Filter by topic or schema name\u2026",InputProps:{size:"small",startAdornment:(0,n.jsx)("label",{className:e.startAdornment,htmlFor:"topic-filter",children:(0,n.jsx)(Ms.Z,{fontSize:"small"})}),endAdornment:s&&(0,n.jsx)(pe.Z,{size:"small",title:"Clear filter",onClick:()=>{a("")},edge:"end",children:(0,n.jsx)(fo.Z,{fontSize:"small"})})}})}),h.length>0?(0,n.jsx)("div",{style:{flex:"1 1 100%"},children:(0,n.jsx)(Mu.qj,{children:({width:f,height:m})=>(0,n.jsx)(Du.S_,{ref:p,width:f,height:m,itemCount:h.length,itemSize:y=>h[y]?.type==="topic"?50:28,overscanCount:10,children:({index:y,style:w})=>{const k=h[y];switch(k.type){case"topic":return(0,n.jsx)(Ou,{style:w,topicResult:k.item});case"schema":return(0,n.jsx)(wu,{style:w,messagePathResult:k.item})}}})})}):(0,n.jsxs)(Kn.Z,{children:[r===ke.m.PRESENT&&s?`No topics or datatypes matching 
 \u201C${s}\u201D`:"No topics available. ",r===ke.m.RECONNECTING&&"Waiting for connection"]}),(0,n.jsx)(Bu.v,{interval:6})]})}var Ya=o(36423),zu=o(8640),Wu=o(47824),Gu=o(2784);const Qu=(0,N.ZL)()((e,t,s)=>({root:{"@media (pointer: fine)":{[`&:not(:hover) .${s.copyButton}`]:{visibility:"hidden"}}},copyButton:{top:0,right:0,zIndex:e.zIndex.mobileStepper,"&.MuiButton-root":{position:"absolute",paddingLeft:e.spacing(1),paddingRight:e.spacing(1),margin:e.spacing(.75),minWidth:"auto"}},input:{font:"inherit",flex:"auto",".MuiInputBase-input":{padding:0},"&.Mui-error":{color:e.palette.error.main}},edgeEnd:{marginRight:e.spacing(-1.625)},editorWrapper:{position:"relative",backgroundColor:e.palette.grey[50]},listItemButton:{"&:focus-within":{backgroundColor:"transparent"},"&.Mui-selected":{color:e.palette.primary.main,transition:"background-color 300ms ease-in-out"}},listItemText:{marginTop:e.spacing(.125),marginBottom:e.spacing(.125)}})),Yu=(e,t,s,a,i)=>{const r=Object.keys(s);i({...(0,T.pick)(s,r.slice(0,a)),[e]:s[t],...(0,T.pick)(s,r.slice(a+1))})};function Hu(e){const{name:t,selected:s=!1,index:a}=e,{classes:i}=Qu(),[r,c]=(0,l.useState)(),[u,p]=(0,l.useState)(!0),[h,f]=Gu.useState(void 0),[m,y]=(0,l.useState)(!1),w=Boolean(h),{globalVariables:k,setGlobalVariables:W,overwriteGlobalVariables:G}=(0,Ya.Z)(),J=gt=>{f(gt.currentTarget)},K=()=>{f(void 0)},ye=(0,De.z)(),re=(0,l.useCallback)(()=>{W({[t]:void 0}),ye.logEvent(Ne.q.VARIABLE_DELETE),K()},[ye,t,W]),se=(0,l.useMemo)(()=>k[t],[k,t]),_=(0,l.useCallback)(gt=>{W({[t]:gt}),y(!1)},[t,W]),O=()=>{r!=null&&k[r]==null&&t!==r&&Yu(r,t,k,a,G),c(void 0)},Ae=(0,l.useRef)(null),tt=Ae.current?.contains(document.activeElement)===!0,At=s&&!tt,bt=r!=null&&r!==t&&k[r]!=null,Ct=(0,l.useCallback)(()=>JSON.stringify(se,void 0,2)??"",[se]);return(0,n.jsxs)(U.Z,{className:i.root,ref:Ae,children:[(0,n.jsx)(hs.ZP,{dense:!0,disablePadding:!0,secondaryAction:(0,n.jsxs)(U.Z,{className:i.edgeEnd,direction:"row",alignItems:"center",gap:.25,children:[(0,n.jsx)(pe.Z,{size:"small",id:"variable-action-button","data-testid":"variable-action-button","aria-controls":u?"variable-action-menu":void 0,"aria-haspopup":"true","aria-expanded":u?"true":void 0,onClick:J,children:(0,n.jsx)(mo.Z,{fontSize:"small"})}),(0,n.jsx)(be.Z,{id:"variable-action-menu",anchorEl:h,open:w,onClose:K,MenuListProps:{"aria-labelledby":"variable-action-button",dense:!0},children:(0,n.jsx)(Te.Z,{onClick:re,children:(0,n.jsx)(xe.Z,{color:"error.main",variant:"inherit",children:"Delete variable"})})})]}),children:(0,n.jsx)(uo.Z,{className:i.listItemButton,selected:At,onClick:()=>{p(!u)},children:(0,n.jsx)(kn.Z,{className:i.listItemText,primary:(0,n.jsxs)(U.Z,{direction:"row",alignItems:"center",style:{marginLeft:-12},children:[(0,n.jsx)(Jn.Z,{style:{transform:u?void 0:"rotate(-90deg)"}}),(0,n.jsx)(zu.ZP,{className:i.input,autoFocus:t==="",error:bt,value:r??t,placeholder:"variable_name","data-testid":`global-variable-key-input-${t}`,onClick:gt=>{gt.stopPropagation()},onFocus:()=>{r===""&&p(!0)},onChange:gt=>{c(gt.target.value)},onBlur:O,endAdornment:bt&&(0,n.jsx)(ne.Z,{arrow:!0,title:"A variable with this name already exists. Please select a unique variable name to save changes.",children:(0,n.jsx)(vo.Z,{className:i.edgeEnd,fontSize:"small",color:"error"})})})]}),primaryTypographyProps:{component:"div",fontWeight:600,variant:"body2"}})})}),u&&(0,n.jsxs)("div",{className:i.editorWrapper,children:[(0,n.jsx)(Se.Z,{}),(0,n.jsx)(Bo.Z,{className:i.copyButton,size:"small",color:m?"primary":"inherit",getText:Ct,children:m?"Copied":"Copy"}),(0,n.jsx)(Wu.Z,{value:se,onChange:_})]}),(0,n.jsx)(Se.Z,{})]})}const Ha=1500;function Vu(){const{globalVariables:e,setGlobalVariables:t}=(0,Ya.Z)(),s=(0,l.useMemo)(()=>Object.keys(e),[e]),a=(0,l.useRef)(!0),i=(0,De.z)();(0,l.useEffect)(()=>{const p=setTimeout(()=>a.current=!1,Ha);return()=>{clearTimeout(p)}},[]);const r=(0,l.useRef)(e),[c,u]=(0,l.useState)([]);return(0,l.useEffect)(()=>{if(a.current){r.current=e;return}const p=(0,T.union)(Object.keys(e),Object.keys(r.current??{})).filter(f=>r.current?.[f]!==e[f]);u(p),r.current=e;const h=setTimeout(()=>{u([])},Ha);return()=>{clearTimeout(h)}},[e,a]),(0,n.jsxs)(U.Z,{flex:"auto",fullWidth:!0,overflowX:"auto",children:[s.map((p,h)=>(0,n.jsx)(Hu,{name:p,selected:!a.current&&c.includes(p),index:h},p)),(0,n.jsx)(U.Z,{direction:"row",padding:1,children:(0,n.jsx)(oe.Z,{color:"inherit",fullWidth:!0,"data-testid":"add-variable-button",variant:"contained",disabled:e[""]!=null,onClick:()=>{t({"":'""'}),i.logEvent(Ne.q.VARIABLE_ADD)},children:"Add variable"},"add-global-variable")})]})}var Ku=o(89025),Xu=o(13787),ys=o(2940);const Va=o.g.ctxbridge,$u=(0,N.ZL)()({checkbox:{"&.MuiCheckbox-root":{paddingTop:0}},formControlLabel:{"&.MuiFormControlLabel-root":{alignItems:"start"}}});function Ju(){const{t:e}=(0,X.$G)("appSettings");return[{key:ee.o.SHOW_DEBUG_PANELS,name:e("studioDebugPanels"),description:(0,n.jsx)(n.Fragment,{children:e("studioDebugPanelsDescription")})},{key:ee.o.ENABLE_MEMORY_USE_INDICATOR,name:e("memoryUseIndicator"),description:(0,n.jsx)(n.Fragment,{children:e("memoryUseIndicatorDescription")})}]}function qu(e){const{feature:t}=e,{classes:s}=$u(),a=(0,De.z)(),[i,r]=(0,qt.b)(t.key);return(0,n.jsx)(ys.Z,{className:s.formControlLabel,control:(0,n.jsx)(qn.Z,{className:s.checkbox,checked:i??!1,onChange:(c,u)=>{r(u),a.logEvent(Ne.q.EXPERIMENTAL_FEATURE_TOGGLE,{feature:t.key,checked:u})}}),label:(0,n.jsxs)(U.Z,{gap:.25,paddingLeft:.5,children:[(0,n.jsx)(xe.Z,{fontWeight:600,children:t.name}),(0,n.jsx)(xe.Z,{variant:"body2",color:"text.secondary",children:t.description})]})})}const _u=()=>{const e=Ju(),{t}=(0,X.$G)("appSettings");return(0,n.jsxs)(U.Z,{gap:2,children:[e.length===0&&(0,n.jsx)(xe.Z,{fontStyle:"italic",children:t("noExperimentalFeatures")}),e.map(s=>(0,n.jsx)(qu,{feature:s},s.key))]})};var ep=o(83717),ko=o(4812),tp=o(46964),np=o(49436);const Ka=(0,l.createContext)(()=>{});Ka.displayName="LinkHandlerContext";const sp=Ka,op=(0,N.ZL)()(({palette:e,shape:t,spacing:s,typography:a,shadows:i})=>({root:{fontFamily:a.body2.fontFamily,fontSize:a.body2.fontSize,fontWeight:a.body2.fontWeight,lineHeight:a.body2.lineHeight,backgroundColor:"transparent",color:e.text.secondary,"h1, h2, h3, h4, h5, h6":{color:e.text.primary,"&:first-child":{marginTop:0}},h1:{fontFamily:a.h4.fontFamily,fontSize:a.h4.fontSize,lineHeight:a.h4.lineHeight,marginBottom:s(1),fontWeight:500},h2:{fontFamily:a.h5.fontFamily,fontSize:a.h5.fontSize,lineHeight:a.h5.lineHeight,marginBottom:s(1),fontWeight:500},h3:{fontFamily:a.h6.fontFamily,fontSize:a.h6.fontSize,lineHeight:a.h6.lineHeight,marginBottom:s(1),color:e.text.secondary,fontWeight:500},h4:{fontFamily:a.subtitle1.fontFamily,fontSize:a.subtitle1.fontSize,lineHeight:a.subtitle1.lineHeight,marginBottom:s(.5),color:e.text.secondary,fontWeight:500},"h5, h6":{fontFamily:a.body1.fontFamily,fontSize:a.body1.fontSize,lineHeight:a.body1.lineHeight,marginBottom:s(.5),color:e.text.secondary,fontWeight:500},"ol, ul":{paddingLeft:s(2.5),marginBottom:s(2.5)},li:{margin:s(.5,0)},"b, strong":{fontWeight:"700 !important"},"p, ul":{margin:s(1,0),"&:only-child":{margin:s(.5,0)}},img:{maxWidth:"100%"},pre:{whiteSpace:"pre-wrap",fontFamily:it.R.MONOSPACE,backgroundColor:e.action.hover,padding:s(0,.5),borderRadius:i[2],code:{backgroundColor:"transparent",padding:0}},code:{fontFamily:it.R.MONOSPACE,backgroundColor:e.action.hover,borderRadius:"0.2em",padding:s(0,.5)},kbd:{display:"inline-flex",flex:"none",fontFamily:it.R.MONOSPACE,color:e.text.secondary,backgroundColor:e.background.default,boxShadow:`inset 0 1px 0 ${e.action.hover}`,borderRadius:t.borderRadius,fontSize:a.body2.fontSize,padding:s(0,.5),fontWeight:500,minWidth:20,alignItems:"center",justifyContent:"center"},table:{borderCollapse:"collapse",borderSpacing:0,margin:s(1,-.5),border:`1px solid ${e.divider}`},"td, th":{padding:s(.5),borderBottom:`1px solid ${e.divider}`,borderRight:`1px solid ${e.divider}`,"&:last-child":{borderRight:"none"}},th:{whiteSpace:"nowrap"},tr:{"&:last-child":{"td, th":{borderBottom:"none"}}}}}));function Xa(e){const{children:t,style:s,allowMarkdownHtml:a}=e,{classes:i}=op(),r=(0,l.useContext)(sp),c=(0,l.useCallback)(u=>(0,n.jsx)(sn.Z,{color:"primary",underline:"hover",variant:"inherit",href:u.href,rel:"noopener noreferrer",onClick:p=>{r(p,u.href??"")},target:"_blank",children:u.children}),[r]);return(0,n.jsx)("div",{className:i.root,style:s,children:typeof t=="string"?(0,n.jsx)(tp.D,{rehypePlugins:a===!0?[np.Z]:[],components:{a:c},children:t}):t})}var Sn=o(51390);const Zo=(0,l.createContext)(void 0);Zo.displayName="ExtensionMarketplaceContext";function $a(){const e=(0,l.useContext)(Zo);if(e==null)throw new Error("An ExtensionMarketplaceContext provider is required to useExtensionMarketplace");return e}const ap=Zo;var Un=o(61969);const ip=(0,N.ZL)()(e=>({backButton:{marginLeft:e.spacing(-1.5),marginBottom:e.spacing(1)},installButton:{minWidth:100}}));function rp({extension:e,onClose:t,installed:s}){const{classes:a}=ip(),[i,r]=(0,l.useState)(s),[c,u]=(0,l.useState)(0),p=(0,Hn.Z)(),h=(0,Sn.I)(O=>O.downloadExtension),f=(0,Sn.I)(O=>O.installExtension),m=(0,Sn.I)(O=>O.uninstallExtension),y=$a(),{enqueueSnackbar:w}=(0,Be.Ds)(),k=e.readme,W=e.changelog,G=e.foxe!=null,J=e.namespace!=="org",{value:K}=(0,ko.Z)(async()=>k!=null?await y.getMarkdown(k):"",[y,k]),{value:ye}=(0,ko.Z)(async()=>W!=null?await y.getMarkdown(W):"",[y,W]),re=(0,De.z)(),se=(0,l.useCallback)(async()=>{if(!(0,Un.Z)()){w("Download the desktop app to use marketplace extensions.",{variant:"error"});return}const O=e.foxe;try{if(O==null)throw new Error(`Cannot install extension ${e.id}, "foxe" URL is missing`);const Ae=await h(O);await f("local",Ae),p()&&(r(!0),re.logEvent(Ne.q.EXTENSION_INSTALL,{type:e.id}))}catch(Ae){w(`Failed to download extension ${e.id}. ${Ae.message}`,{variant:"error"})}},[re,h,w,e.foxe,e.id,f,p]),_=(0,l.useCallback)(async()=>{await m(e.namespace??"local",e.id),p()&&(r(!1),re.logEvent(Ne.q.EXTENSION_UNINSTALL,{type:e.id}))},[re,e.id,e.namespace,p,m]);return(0,n.jsxs)(U.Z,{fullHeight:!0,flex:"auto",gap:1,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(oe.Z,{className:a.backButton,onClick:t,size:"small",startIcon:(0,n.jsx)(co.Z,{}),children:"Back"}),(0,n.jsx)(xe.Z,{variant:"h3",fontWeight:500,children:e.name})]}),(0,n.jsxs)(U.Z,{gap:1,alignItems:"flex-start",children:[(0,n.jsxs)(U.Z,{gap:.5,paddingBottom:1,children:[(0,n.jsxs)(U.Z,{direction:"row",gap:1,alignItems:"baseline",children:[(0,n.jsx)(sn.Z,{variant:"body2",color:"primary",href:e.homepage,target:"_blank",underline:"hover",children:e.id}),(0,n.jsx)(xe.Z,{variant:"caption",color:"text.secondary",children:`v${e.version}`}),(0,n.jsx)(xe.Z,{variant:"caption",color:"text.secondary",children:e.license})]}),(0,n.jsx)(xe.Z,{variant:"subtitle2",gutterBottom:!0,children:e.publisher}),(0,n.jsx)(xe.Z,{variant:"body2",gutterBottom:!0,children:e.description})]}),i&&J?(0,n.jsx)(oe.Z,{className:a.installButton,size:"small",color:"inherit",variant:"contained",onClick:_,children:"Uninstall"},"uninstall"):G&&(0,n.jsx)(oe.Z,{className:a.installButton,size:"small",color:"inherit",variant:"contained",onClick:se,children:"Install"},"install")]}),(0,n.jsxs)(U.Z,{paddingTop:2,style:{marginLeft:-16,marginRight:-16},children:[(0,n.jsxs)(Vn.Z,{textColor:"inherit",value:c,onChange:(O,Ae)=>{u(Ae)},children:[(0,n.jsx)(fn.Z,{disableRipple:!0,label:"README",value:0}),(0,n.jsx)(fn.Z,{disableRipple:!0,label:"CHANGELOG",value:1})]}),(0,n.jsx)(Se.Z,{})]}),(0,n.jsxs)(U.Z,{flex:"auto",paddingY:2,children:[c===0&&(0,n.jsx)(Xa,{children:K}),c===1&&(0,n.jsx)(Xa,{children:ye})]})]})}var lp="../../packages/studio-base/src/components/ExtensionsSettings/index.tsx";const cp=q.ZP.getLogger(lp),dp=(0,N.ZL)()(e=>({listItemButton:{"&:hover":{color:e.palette.primary.main}}}));function up(e){switch(e){case"org":return"Organization";default:return e}}function Ja(e){const{entry:{id:t,description:s,name:a,publisher:i,version:r},onClick:c}=e,{classes:u}=dp();return(0,n.jsx)(hs.ZP,{disablePadding:!0,children:(0,n.jsx)(uo.Z,{className:u.listItemButton,onClick:c,children:(0,n.jsx)(kn.Z,{disableTypography:!0,primary:(0,n.jsxs)(U.Z,{direction:"row",alignItems:"baseline",gap:.5,children:[(0,n.jsx)(xe.Z,{variant:"subtitle2",fontWeight:600,children:a}),(0,n.jsx)(xe.Z,{variant:"caption",color:"text.secondary",children:r})]}),secondary:(0,n.jsxs)(U.Z,{gap:.5,children:[(0,n.jsx)(xe.Z,{variant:"body2",color:"text.secondary",children:s}),(0,n.jsx)(xe.Z,{color:"text.primary",variant:"body2",children:i})]})})})},t)}function pp(){const[e,t]=(0,l.useState)(void 0),s=(0,Sn.I)(f=>f.installedExtensions),a=$a(),[i,r]=(0,Sa.Z)(async()=>await a.getAvailableExtensions(),[a]),c=(0,l.useMemo)(()=>(0,T.keyBy)(i.value??[],f=>f.id),[i]),u=(0,l.useMemo)(()=>(s??[]).map(f=>{const m=c[f.id];return m!=null?{...m,namespace:f.namespace}:{id:f.id,installed:!0,name:f.displayName,displayName:f.displayName,description:f.description,publisher:f.publisher,homepage:f.homepage,license:f.license,version:f.version,keywords:f.keywords,namespace:f.namespace,qualifiedName:f.qualifiedName}}),[s,c]),p=(0,l.useMemo)(()=>(0,T.groupBy)(u,f=>f.namespace),[u]),h=(0,l.useMemo)(()=>(0,T.differenceWith)(i.value??[],s??[],(f,m)=>f.id===m.id&&f.namespace===m.namespace),[i,s]);return(0,l.useEffect)(()=>{r().catch(f=>{cp.error(f)})},[r]),e!=null?(0,n.jsx)(rp,{installed:e.installed,extension:e.entry,onClose:()=>{t(void 0)}}):(0,n.jsxs)(U.Z,{gap:1,children:[i.error&&(0,n.jsxs)(jn.Z,{severity:"error",action:(0,n.jsx)(oe.Z,{color:"inherit",onClick:async()=>await r(),children:"Retry"}),children:[(0,n.jsx)(ep.Z,{children:"Failed to retrieve the list of available marketplace extensions"}),"Check your internet connection and try again."]}),(0,T.isEmpty)(p)?(0,n.jsx)(fs.Z,{children:(0,n.jsx)(hs.ZP,{children:(0,n.jsx)(kn.Z,{primary:"No installed extensions"})})}):Object.entries(p).map(([f,m])=>(0,n.jsxs)(fs.Z,{children:[(0,n.jsx)(U.Z,{paddingY:.25,paddingX:2,children:(0,n.jsx)(xe.Z,{component:"li",variant:"overline",color:"text.secondary",children:up(f)})}),m.map(y=>(0,n.jsx)(Ja,{entry:y,onClick:()=>{t({installed:!0,entry:y})}},`${y.id}`))]},f)),(0,n.jsxs)(fs.Z,{children:[(0,n.jsx)(U.Z,{paddingY:.25,paddingX:2,children:(0,n.jsx)(xe.Z,{component:"li",variant:"overline",color:"text.secondary",children:"Available"})}),h.map(f=>(0,n.jsx)(Ja,{entry:f,onClick:()=>{t({installed:!1,entry:f})}},`${f.id}_${f.namespace}`))]})]})}var fp=o(27045),qa=o(86231),hp=o(10222),gp=o(85584),mp=o(55404),yp=o(54764),Zs=o.n(yp),_a=o(2661),St;(function(e){e.ASK="ask",e.WEB="web",e.DESKTOP="desktop"})(St||(St={}));const vp=[1,3,5,10,15,20,30,60],Ap=[{key:"en",value:"English"},{key:"zh",value:"\u4E2D\u6587"},{key:"ja",value:"\u65E5\u672C\u8A9E"}],Fs=(0,N.ZL)()(e=>({autocompleteInput:{"&.MuiOutlinedInput-input":{padding:0}},checkbox:{"&.MuiCheckbox-root":{paddingTop:0}},formControlLabel:{"&.MuiFormControlLabel-root":{alignItems:"start"}},toggleButton:{display:"flex !important",flexDirection:"column",gap:e.spacing(.75),lineHeight:"1 !important"}}));function Fo(e){const t=Zs().tz(e),s=t.zoneAbbr(),a=t.utcOffset(),i=(a>=0?"+":"")+Zs().duration(a,"minutes").format("hh:mm",{trim:!1});return e===s?`${s} (${i})`:`${e} (${s}, ${i})`}function bp(){const{classes:e}=Fs(),[t="system",s]=(0,qt.b)(ee.o.COLOR_SCHEME),{t:a}=(0,X.$G)("appSettings"),i=(0,l.useCallback)((r,c)=>{c!=null&&s(c)},[s]);return(0,n.jsxs)(U.Z,{children:[(0,n.jsxs)(Fn.Z,{children:[a("colorScheme"),":"]}),(0,n.jsxs)(Xn.Z,{color:"primary",size:"small",fullWidth:!0,exclusive:!0,value:t,onChange:i,children:[(0,n.jsxs)(Ht.Z,{className:e.toggleButton,value:"dark",children:[(0,n.jsx)(hp.Z,{})," ",a("dark")]}),(0,n.jsxs)(Ht.Z,{className:e.toggleButton,value:"light",children:[(0,n.jsx)(fp.Z,{})," ",a("light")]}),(0,n.jsxs)(Ht.Z,{className:e.toggleButton,value:"system",children:[(0,n.jsx)(qa.Z,{})," ",a("followSystem")]})]})]})}function xp(){const{classes:e}=Fs(),{t}=(0,X.$G)("appSettings"),[s,a]=(0,qt.b)(ee.o.TIMEZONE),i=(0,l.useMemo)(()=>({key:"detect",label:`Detect from system: ${Fo(Zs().tz.guess())}`,data:void 0}),[]),r=(0,l.useMemo)(()=>[i,{key:"zone:UTC",label:`${Fo("UTC")}`,data:"UTC"},{key:"sep",label:"",divider:!0}],[i]),c=(0,l.useMemo)(()=>(0,on.Z)(Zs().tz.names(),h=>{if(h!=="UTC")return{key:`zone:${h}`,label:Fo(h),data:h}}),[]),u=(0,l.useMemo)(()=>[...r,...c],[r,c]),p=(0,l.useMemo)(()=>s!=null?u.find(h=>h.data===s)??i:i,[u,i,s]);return(0,n.jsxs)(Ea.Z,{fullWidth:!0,children:[(0,n.jsxs)(xe.Z,{color:"text.secondary",marginBottom:.5,children:[t("displayTimestampsIn"),":"]}),(0,n.jsx)(da.Z,{options:[...r,...c],value:p,renderOption:(h,f)=>f.divider===!0?(0,n.jsx)(Se.Z,{},f.key):(0,l.createElement)("li",{...h,key:f.key},f.label),renderInput:h=>(0,n.jsx)(Rt.Z,{...h,inputProps:{...h.inputProps,className:e.autocompleteInput}}),onChange:(h,f)=>void a(f?.data)})]})}function Ep({orientation:e="vertical"}){const{timeFormat:t,setTimeFormat:s}=(0,at.v)(),{t:a}=(0,X.$G)("appSettings"),[i]=(0,qt.b)(ee.o.TIMEZONE),r={sec:946713600,nsec:0};return(0,n.jsxs)(U.Z,{children:[(0,n.jsxs)(Fn.Z,{children:[a("timestampFormat"),":"]}),(0,n.jsxs)(Xn.Z,{color:"primary",size:"small",orientation:e,fullWidth:!0,exclusive:!0,value:t,onChange:(c,u)=>u!=null&&void s(u),children:[(0,n.jsx)(Ht.Z,{value:"SEC","data-testid":"timeformat-seconds",children:(0,Fe.Eo)(r)}),(0,n.jsx)(Ht.Z,{value:"TOD","data-testid":"timeformat-local",children:(0,yt.mr)(r,i)})]})]})}function Cp(){const{classes:e}=Fs(),{t}=(0,X.$G)("appSettings"),[s,a]=(0,qt.b)(ee.o.LAUNCH_PREFERENCE);let i;switch(s){case St.WEB:case St.DESKTOP:case St.ASK:i=s;break;default:i=St.WEB}return(0,n.jsxs)(U.Z,{children:[(0,n.jsxs)(Fn.Z,{children:[t("openLinksIn"),":"]}),(0,n.jsxs)(Xn.Z,{color:"primary",size:"small",fullWidth:!0,exclusive:!0,value:i,onChange:(r,c)=>c!=null&&void a(c),children:[(0,n.jsxs)(Ht.Z,{value:St.WEB,className:e.toggleButton,children:[(0,n.jsx)(mp.Z,{})," ",t("webApp")]}),(0,n.jsxs)(Ht.Z,{value:St.DESKTOP,className:e.toggleButton,children:[(0,n.jsx)(qa.Z,{})," ",t("desktopApp")]}),(0,n.jsxs)(Ht.Z,{value:St.ASK,className:e.toggleButton,children:[(0,n.jsx)(gp.Z,{})," ",t("askEachTime")]})]})]})}function Sp(){const{t:e}=(0,X.$G)("appSettings"),[t,s]=(0,qt.b)(ee.o.MESSAGE_RATE),a=(0,l.useMemo)(()=>vp.map(i=>({key:i,text:`${i}`,data:i})),[]);return(0,n.jsxs)(U.Z,{children:[(0,n.jsxs)(Fn.Z,{children:[e("messageRate")," (Hz):"]}),(0,n.jsx)(Ao.Z,{value:t??60,fullWidth:!0,onChange:i=>void s(i.target.value),children:a.map(i=>(0,n.jsx)(Te.Z,{value:i.key,children:i.text},i.key))})]})}function Tp(){const[e=!0,t]=(0,qt.b)(ee.o.UPDATES_ENABLED),{classes:s}=Fs();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(xe.Z,{color:"text.secondary",marginBottom:.5,children:"Updates:"}),(0,n.jsx)(ys.Z,{className:s.formControlLabel,control:(0,n.jsx)(qn.Z,{className:s.checkbox,checked:e,onChange:(a,i)=>void t(i)}),label:"Automatically install updates"})]})}function Pp(){const[e,t]=(0,qt.b)(ee.o.ROS_PACKAGE_PATH),s=(0,l.useMemo)(()=>Va?.getEnvVar("ROS_PACKAGE_PATH"),[]);return(0,n.jsx)(Rt.Z,{fullWidth:!0,label:"ROS_PACKAGE_PATH",placeholder:s,value:e??"",onChange:a=>void t(a.target.value)})}function Ip(){const{t:e,i18n:t}=(0,X.$G)("appSettings"),[s="en",a]=(0,qt.b)(ee.o.LANGUAGE),i=(0,l.useCallback)(c=>{const u=c.target.value;a(u),t.changeLanguage(u).catch(p=>{console.error("Failed to switch languages",p),(0,_a.e)(p)})},[t,a]),r=(0,l.useMemo)(()=>Ap.map(c=>({key:c.key,text:`${c.value}`,data:c.key})),[]);return(0,n.jsxs)(U.Z,{children:[(0,n.jsxs)(Fn.Z,{children:[e("language"),":"]}),(0,n.jsx)(Ao.Z,{value:s,fullWidth:!0,onChange:i,children:r.map(c=>(0,n.jsx)(Te.Z,{value:c.key,children:c.text},c.key))})]})}const Mp=(0,N.ZL)()(e=>({layoutGrid:{display:"grid",gap:e.spacing(2),height:"70vh",paddingLeft:e.spacing(1),overflowY:"hidden",[e.breakpoints.up("sm")]:{gridTemplateColumns:"auto minmax(0, 1fr)"}},logo:{width:212,height:"auto",marginLeft:e.spacing(-1)},tabPanel:{display:"none",marginRight:"-100%",width:"100%",padding:e.spacing(0,4,4)},tabPanelActive:{display:"block"},checkbox:{"&.MuiCheckbox-root":{paddingTop:0}},dialogActions:{position:"sticky",backgroundColor:e.palette.background.paper,borderTop:`${e.palette.divider} 1px solid`,padding:e.spacing(1),bottom:0},formControlLabel:{"&.MuiFormControlLabel-root":{alignItems:"start"}},tab:{svg:{fontSize:"inherit"},"> span, > .MuiSvgIcon-root":{display:"flex",color:e.palette.primary.main,marginRight:e.spacing(1.5),height:e.typography.pxToRem(21),width:e.typography.pxToRem(21)},[e.breakpoints.up("sm")]:{textAlign:"right",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",minHeight:"auto",paddingTop:e.spacing(1.5),paddingBottom:e.spacing(1.5)}},indicator:{[e.breakpoints.up("sm")]:{right:0,width:"100%",backgroundColor:e.palette.action.hover,borderRadius:e.shape.borderRadius}}})),Us=new Map([["resources",{subheader:"External resources",links:[...(0,Un.Z)()?[]:[{title:"Desktop app",url:"https://foxglove.dev/download"}],{title:"Browse docs",url:"https://foxglove.dev/docs"},{title:"Join our community",url:"https://foxglove.dev/community"}]}],["products",{subheader:"Products",links:[{title:"Foxglove Studio",url:"https://foxglove.dev/studio"},{title:"Foxglove Data Platform",url:"https://foxglove.dev/data-platform"}]}],["contact",{subheader:"Contact",links:[{title:"Give feedback",url:"https://foxglove.dev/contact"},{title:"Schedule a demo",url:"https://foxglove.dev/demo"}]}],["legal",{subheader:"Legal",links:[{title:"License terms",url:"https://foxglove.dev/legal/studio-license"},{title:"Privacy policy",url:"https://foxglove.dev/legal/privacy"}]}]]),Dp=e=>e.dialogs.preferences.initialTab;function Bp(e){const{t}=(0,X.$G)("appSettings"),{activeTab:s}=e,a=(0,Ve.Q)(Dp),[i,r]=(0,l.useState)(s??a??"general"),[c,u]=(0,at.b)(ee.o.CRASH_REPORTING_ENABLED),[p,h]=(0,at.b)(ee.o.TELEMETRY_ENABLED),{classes:f,cx:m,theme:y}=Mp(),w=(0,Rn.Z)(y.breakpoints.up("sm")),k=(0,Un.Z)()&&Va?.platform!=="linux",W=(J,K)=>{r(K)},G=J=>{e.onClose!=null&&e.onClose(J,"backdropClick")};return(0,n.jsxs)(Ot.Z,{...e,fullWidth:!0,maxWidth:"md",children:[(0,n.jsxs)(U.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",paddingX:3,paddingY:2,children:[(0,n.jsx)(xe.Z,{variant:"h3",fontWeight:600,children:t("settings")}),(0,n.jsx)(pe.Z,{edge:"end",onClick:G,children:(0,n.jsx)(Le.Z,{})})]}),(0,n.jsxs)("div",{className:f.layoutGrid,children:[(0,n.jsxs)(Vn.Z,{classes:{indicator:f.indicator},value:i,orientation:w?"vertical":"horizontal",onChange:W,children:[(0,n.jsx)(fn.Z,{className:f.tab,label:t("general"),value:"general"}),(0,n.jsx)(fn.Z,{className:f.tab,label:t("privacy"),value:"privacy"}),(0,n.jsx)(fn.Z,{className:f.tab,label:t("extensions"),value:"extensions"}),(0,n.jsx)(fn.Z,{className:f.tab,label:t("experimentalFeatures"),value:"experimental-features"}),(0,n.jsx)(fn.Z,{className:f.tab,label:t("about"),value:"about"})]}),(0,n.jsxs)(U.Z,{direction:"row",fullHeight:!0,overflowY:"auto",children:[(0,n.jsx)("section",{className:m(f.tabPanel,{[f.tabPanelActive]:i==="general"}),children:(0,n.jsxs)(U.Z,{gap:2,children:[(0,n.jsx)(bp,{}),(0,n.jsx)(xp,{}),(0,n.jsx)(Ep,{orientation:w?"horizontal":"vertical"}),(0,n.jsx)(Sp,{}),(0,n.jsx)(Ip,{}),k&&(0,n.jsx)(Tp,{}),!(0,Un.Z)()&&(0,n.jsx)(Cp,{}),(0,Un.Z)()&&(0,n.jsx)(Pp,{})]})}),(0,n.jsx)("section",{className:m(f.tabPanel,{[f.tabPanelActive]:i==="privacy"}),children:(0,n.jsxs)(U.Z,{gap:2,children:[(0,n.jsx)(jn.Z,{color:"info",icon:(0,n.jsx)(Ku.Z,{}),children:t("privacyDescription")}),(0,n.jsxs)(U.Z,{gap:.5,paddingLeft:2,children:[(0,n.jsx)(ys.Z,{className:f.formControlLabel,control:(0,n.jsx)(qn.Z,{className:f.checkbox,checked:p??!0,onChange:(J,K)=>void h(K)}),label:t("sendAnonymizedUsageData")}),(0,n.jsx)(ys.Z,{className:f.formControlLabel,control:(0,n.jsx)(qn.Z,{className:f.checkbox,checked:c??!0,onChange:(J,K)=>void u(K)}),label:t("sendAnonymizedCrashReports")})]})]})}),(0,n.jsx)("section",{className:m(f.tabPanel,{[f.tabPanelActive]:i==="extensions"}),children:(0,n.jsx)(U.Z,{gap:2,children:(0,n.jsx)(pp,{})})}),(0,n.jsx)("section",{className:m(f.tabPanel,{[f.tabPanelActive]:i==="experimental-features"}),children:(0,n.jsxs)(U.Z,{gap:2,children:[(0,n.jsx)(jn.Z,{color:"warning",icon:(0,n.jsx)(Xu.Z,{}),children:t("experimentalFeaturesDescription")}),(0,n.jsx)(U.Z,{paddingLeft:2,children:(0,n.jsx)(_u,{})})]})}),(0,n.jsx)("section",{className:m(f.tabPanel,{[f.tabPanelActive]:i==="about"}),children:(0,n.jsxs)(U.Z,{gap:2,alignItems:"flex-start",children:[(0,n.jsx)("header",{children:(0,n.jsx)(la,{color:"primary",className:f.logo})}),(0,n.jsxs)(U.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,n.jsxs)(xe.Z,{variant:"body2",children:["Foxglove Studio version ","1.69.0"]}),(0,n.jsx)(Bo.Z,{size:"small",getText:()=>"1.69.0".toString()??""})]}),[Us.get("resources"),Us.get("products"),Us.get("contact"),Us.get("legal")].map(J=>(0,n.jsxs)(U.Z,{gap:1,children:[J?.subheader&&(0,n.jsx)(xe.Z,{children:J.subheader}),J?.links.map(K=>(0,n.jsx)(sn.Z,{variant:"body2",underline:"hover","data-testid":K.title,href:K.url,target:"_blank",children:K.title},K.title))]},J?.subheader))]})})]})]}),(0,n.jsx)(Bn.Z,{className:f.dialogActions,children:(0,n.jsx)(oe.Z,{onClick:G,children:"Done"})})]})}const wp=e=>e.dialogs.preferences.open;function Rp(){const e=(0,Ve.Q)(wp),{dialogActions:t}=(0,lt.W)();return(0,n.jsx)(n.Fragment,{children:e&&(0,n.jsx)(Bp,{id:"app-settings-dialog",open:!0,onClose:()=>{t.preferences.close()}})})}const jp=e=>e.playerState.urlState!=null;function Lp(){const e=(0,Qe.An)(jp),[t,s]=(0,L.UG)(ee.o.LAUNCH_PREFERENCE);(0,l.useEffect)(()=>{(0,Un.Z)()||e&&!t&&s(St.WEB)},[t,s,e])}var Op="../../packages/studio-base/src/hooks/useElectronFilesToOpen.ts";const Np=q.ZP.getLogger(Op);function kp(){const[e]=(0,l.useState)(()=>document.querySelector("#electron-open-file-input")),[t,s]=(0,l.useState)(e?.files??void 0);return(0,l.useEffect)(()=>{if(!e){Np.info("#electron-open-file-input not found - native open-file support will not be available");return}const a=()=>{s(e.files??void 0)};return e.addEventListener("change",a),()=>{e.removeEventListener("change",a)}},[e]),t}const Uo=(0,l.createContext)(void 0);Uo.displayName="NativeAppMenuContext";function Zp(){return(0,l.useContext)(Uo)}const Fp=Uo;function Tn(e,t){const s=Zp();(0,l.useEffect)(()=>{if(s)return s.on(e,t)},[e,t,s])}var Up=o(39367),zp=o(47832);function Wp(e,t){const s=e;return{dialogs:{dataSource:{activeDataSource:void 0,item:void 0,open:!1},preferences:{initialTab:void 0,open:!1}},featureTours:{active:void 0,shown:s.featureTours.shown},sidebars:{left:{item:s.leftSidebarItem,open:s.leftSidebarOpen,size:s.leftSidebarSize},right:{item:s.rightSidebarItem,open:s.rightSidebarOpen,size:s.rightSidebarSize}},playbackControls:{repeat:s.playbackControls.repeat}}}function Gp(){return{dialogs:{dataSource:{activeDataSource:void 0,item:void 0,open:!1},preferences:{initialTab:void 0,open:!1}},featureTours:{active:void 0,shown:[]},sidebars:{left:{item:"panel-settings",open:!0,size:void 0},right:{item:void 0,open:!1,size:void 0}},playbackControls:{repeat:!1}}}function Qp(e,t){const s=()=>({...Gp(),...e});return t?.disablePersistenceForStorybook===!0?(0,H.M)()(s):(0,H.M)()((0,zp.tJ)(s,{name:"fox.workspace",version:1,migrate:Wp,partialize:a=>(0,T.pick)(a,["featureTours","playbackControls","sidebars"])}))}function Yp(e){const{children:t,initialState:s,workspaceStoreCreator:a,disablePersistenceForStorybook:i}=e,[r]=(0,l.useState)(()=>a?a(s,{disablePersistenceForStorybook:i}):Qp(s,{disablePersistenceForStorybook:i}));return(0,n.jsx)(Ve.C5.Provider,{value:r,children:t})}var Hp="../../packages/studio-base/src/Workspace.tsx";const ts=q.ZP.getLogger(Hp),Vp=(0,N.ZL)()({container:{width:"100%",height:"100%",display:"flex",flexDirection:"column",position:"relative",flex:"1 1 100%",outline:"none",overflow:"hidden"}}),Kp=({playerState:e})=>e.presence,Xp=({playerState:e})=>e.presence!==ke.m.NOT_PRESENT,$p=({playerState:e})=>e.problems,Jp=e=>e.playerState.activeData?.isPlaying===!0,qp=e=>e.pausePlayback,_p=e=>e.startPlayback,ef=e=>e.seekPlayback,tf=e=>e.playUntil,nf=e=>e.playerState.playerId,sf=e=>e.eventsSupported,of=e=>e.selectEvent,af=e=>e.dialogs.dataSource,rf=e=>e.sidebars.left.item,lf=e=>e.sidebars.left.open,cf=e=>e.sidebars.left.size,df=e=>e.sidebars.right.item,uf=e=>e.sidebars.right.open,pf=e=>e.sidebars.right.size;function ff(e){const{classes:t}=Vp(),s=(0,l.useRef)(null),{availableSources:a,selectSource:i}=(0,Ze.n)(),r=(0,Qe.An)(Kp),c=(0,Qe.An)($p),u=(0,Ve.Q)(af),p=(0,Ve.Q)(rf),h=(0,Ve.Q)(lf),f=(0,Ve.Q)(cf),m=(0,Ve.Q)(df),y=(0,Ve.Q)(uf),w=(0,Ve.Q)(pf),{dialogActions:k,sidebarActions:W}=(0,lt.W)(),G=(0,l.useMemo)(()=>{const mt=[".foxe"];for(const Wt of a)Wt.type==="file"&&Wt.supportedFileTypes&&mt.push(...Wt.supportedFileTypes);return mt},[a]),J=(0,Qe.An)(nf),{currentUser:K}=je();Lp();const[ye=!1]=(0,at.b)(ee.o.SHOW_DEBUG_PANELS),{workspaceExtensions:re}=(0,Ue.b)();(0,l.useLayoutEffect)(()=>{(r===ke.m.PRESENT||r===ke.m.INITIALIZING)&&k.dataSource.close()},[k.dataSource,r]),(0,l.useEffect)(()=>{s.current&&s.current.focus()},[]),Tn("open",(0,l.useCallback)(async()=>{k.dataSource.open("start")},[k.dataSource])),Tn("open-file",(0,l.useCallback)(async()=>{await k.openFile.open()},[k.openFile])),Tn("open-connection",(0,l.useCallback)(()=>{k.dataSource.open("connection")},[k.dataSource])),Tn("open-demo",(0,l.useCallback)(()=>{k.dataSource.open("demo")},[k.dataSource])),Tn("open-help-about",(0,l.useCallback)(()=>{k.preferences.open("about")},[k.preferences])),Tn("open-help-general",(0,l.useCallback)(()=>{k.preferences.open("general")},[k.preferences])),Tn("open-help-docs",()=>{window.open("https://foxglove.dev/docs","_blank")}),Tn("open-help-slack",()=>{window.open("https://foxglove.dev/slack","_blank")});const{enqueueSnackbar:se}=(0,Be.Ds)(),_=(0,Sn.I)(mt=>mt.installExtension),O=(0,l.useCallback)(async mt=>{ts.debug("open handle",mt);const Wt=await mt.getFile();if(Wt.name.endsWith(".foxe"))try{const $t=await Wt.arrayBuffer(),Gn=new Uint8Array($t),Cs=await _("local",Gn);se(`Installed extension ${Cs.id}`,{variant:"success"})}catch($t){ts.error($t),se(`Failed to install extension ${Wt.name}: ${$t.message}`,{variant:"error"})}const rn=a.find($t=>{const Gn=(0,Oe.extname)(Wt.name);return $t.supportedFileTypes?.includes(Gn)});rn&&i(rn.id,{type:"file",handle:mt})},[a,se,_,i]),Ae=(0,l.useCallback)(async mt=>{const Wt=[];ts.debug("open files",mt);for(const rn of mt)if(rn.name.endsWith(".foxe"))try{const $t=await rn.arrayBuffer(),Gn=new Uint8Array($t),Cs=await _("local",Gn);se(`Installed extension ${Cs.id}`,{variant:"success"})}catch($t){ts.error($t),se(`Failed to install extension ${rn.name}: ${$t.message}`,{variant:"error"})}else Wt.push(rn);if(Wt.length>0){for(const rn of a)if(Wt.filter(Gn=>{const Cs=(0,Oe.extname)(Gn.name);return rn.supportedFileTypes?.includes(Cs)}).length>0){i(rn.id,{type:"file",files:Wt});break}}},[a,se,_,i]),tt=kp();(0,l.useEffect)(()=>{tt&&Ae(Array.from(tt))},[tt,Ae]);const At=(0,l.useCallback)(mt=>{const Wt=mt.handles?.[0];Wt&&mt.handles?.length===1?O(Wt):mt.files&&Ae(mt.files)},[Ae,O]),bt=B(sf),Ct=K!=null&&bt,gt=(0,l.useMemo)(()=>new Map([["panel-settings",{title:"Panel",component:Jl}],["topics",{title:"Topics",component:Uu}],["problems",{title:"Problems",component:Ld,badge:c&&c.length>0?{count:c.length,color:"error"}:void 0}]]),[c]),Dt=(0,l.useMemo)(()=>{const mt=new Map([["variables",{title:"Variables",component:Vu}]]);return ye&&mt.set("studio-logs-settings",{title:"Studio Logs",component:Qd}),Ct&&mt.set("events",{title:"Events",component:xr}),mt},[ye,Ct]),rt=(0,l.useMemo)(()=>({"[":()=>{W.left.setOpen(mt=>!mt)},"]":()=>{W.right.setOpen(mt=>!mt)}}),[W.left,W.right]),ht=(0,Qe.An)(_p),Tt=(0,Qe.An)(tf),xt=(0,Qe.An)(qp),Ge=(0,Qe.An)(ef),ft=(0,Qe.An)(Jp),Xt=(0,Qe.m7)(),ds=(0,l.useCallback)(()=>Xt().playerState.activeData??{},[Xt]),In=(0,l.useMemo)(()=>{const mt=e.deepLinks??[];return mt[0]?bu(new URL(mt[0])):void 0},[e.deepLinks]),[an,Mi]=(0,l.useState)(In?{ds:In.ds,dsParams:In.dsParams}:void 0),Di=B(of);(0,l.useEffect)(()=>{an&&an.ds&&(ts.debug("Initialising source from url",an),i(an.ds,{type:"connection",params:an.dsParams}),Di(an.dsParams?.eventId),Mi({ds:void 0,dsParams:void 0}))},[Di,i,an,Mi]);const[Xs,w0]=(0,l.useState)(In?{time:In.time}:void 0);return(0,l.useEffect)(()=>{Xs?.time==null||!Ge||r===ke.m.PRESENT&&(ts.debug("Seeking to url time:",Xs.time),Ge(Xs.time),w0({time:void 0}))},[r,Ge,Xs]),(0,n.jsxs)(Up.vv,{children:[u.open&&(0,n.jsx)(_i,{}),(0,n.jsx)(ar,{onDrop:At,allowedExtensions:G}),(0,n.jsx)(Iu,{}),(0,n.jsx)(ca.Z,{global:!0,keyDownHandlers:rt}),(0,n.jsxs)("div",{className:t.container,ref:s,tabIndex:0,children:[(0,n.jsx)(no,{leftInset:e.appBarLeftInset,onDoubleClick:e.onAppBarDoubleClick,showCustomWindowControls:e.showCustomWindowControls,isMaximized:e.isMaximized,onMinimizeWindow:e.onMinimizeWindow,onMaximizeWindow:e.onMaximizeWindow,onUnmaximizeWindow:e.onUnmaximizeWindow,onCloseWindow:e.onCloseWindow}),(0,n.jsx)(Ud,{leftItems:gt,selectedLeftKey:h?p:void 0,onSelectLeftKey:W.left.selectItem,leftSidebarSize:f,setLeftSidebarSize:W.left.setSize,rightItems:Dt,selectedRightKey:y?m:void 0,onSelectRightKey:W.right.selectItem,rightSidebarSize:w,setRightSidebarSize:W.right.setSize,children:(0,n.jsx)(Od,{value:J,children:(0,n.jsx)(U.Z,{children:(0,n.jsx)(Er.Z,{})})})}),ht&&xt&&Ge&&(0,n.jsx)("div",{style:{flexShrink:0},children:(0,n.jsx)(Id,{play:ht,pause:xt,seek:Ge,playUntil:Tt,isPlaying:ft,getTimeInfo:ds})})]}),re,(0,n.jsx)(Rp,{})]})}function hf(e){const[t=!0]=(0,at.b)(ee.o.SHOW_OPEN_DIALOG_ON_STARTUP),{workspaceStoreCreator:s}=(0,Ue.b)(),i=(0,Qe.An)(Xp)||!t?void 0:"start",r={dialogs:{dataSource:{activeDataSource:void 0,open:i!=null,item:i},preferences:{initialTab:void 0,open:!1}}};return(0,n.jsx)(Yp,{initialState:r,workspaceStoreCreator:s,disablePersistenceForStorybook:e.disablePersistenceForStorybook,children:(0,n.jsx)(ff,{...e})})}var gf=o(6917),mf=o(88724);function yf({children:e}){const[t="system"]=(0,at.b)(ee.o.COLOR_SCHEME),s=(0,gf.Z)("(prefers-color-scheme: dark)"),a=t==="dark"||t==="system"&&s;return(0,n.jsx)(mf.Z,{isDark:a,children:e})}var vf=o(98512);const Af=e=>e.playerState.name;function bf(){const e=(0,Qe.An)(Af);return(0,l.useEffect)(()=>{if(!e){window.document.title="Foxglove Studio";return}window.document.title=navigator.userAgent.includes("Mac")?e:`${e} \u2013 Foxglove Studio`},[e]),(0,n.jsx)(n.Fragment,{})}var xf=o(2784);function Ef({children:e,providers:t}){const s=t.reduceRight((a,i)=>xf.cloneElement(i,void 0,a),e);return(0,n.jsx)(n.Fragment,{children:s})}const zo=(0,l.createContext)(void 0);zo.displayName="NativeWindowContext";function Cf(){return(0,l.useContext)(zo)}const Sf=zo;var ei=o(31748),Wo=o(10186),Tf="../../packages/studio-base/src/hooks/useIndexedDbRecents.ts";const Pf=q.ZP.getLogger(Tf),ti="recents",ni=(0,Wo.MT)("foxglove-recents","recents");function If(){const{value:e,loading:t}=(0,ko.Z)(async()=>await(0,Wo.U2)(ti,ni),[]),[s,a]=(0,l.useState)([]),i=(0,l.useRef)([]),r=(0,l.useCallback)(async()=>{if(t)return;const u=[];for(const p of i.current){let h=!1;for(const f of u)h||(f.type==="file"&&p.type===f.type&&await f.handle.isSameEntry(p.handle)&&(h=!0),f.type==="connection"&&p.type===f.type&&f.sourceId===p.sourceId&&(0,T.isEqual)(p.extra,f.extra)&&(h=!0));!h&&u.length<5&&u.push(p)}a(u),(0,Wo.t8)(ti,u,ni).catch(p=>{Pf.error(p)})},[t]);(0,l.useLayoutEffect)(()=>{if(t)return;const u=i.current.length>0;e&&i.current.push(...e),u?r():a(i.current)},[t,e,r]);const c=(0,l.useCallback)(u=>{const p={id:(0,Kt.Z)(),...u};i.current.unshift(p),r()},[r]);return(0,l.useMemo)(()=>({recents:s,addRecent:c,save:r}),[c,s,r])}const Mf=If;var Df="../../packages/studio-base/src/players/AnalyticsMetricsCollector.ts";const Bf=q.ZP.getLogger(Df);class wf{#e={};#t;constructor(t){Bf.debug("New AnalyticsMetricsCollector"),this.#t=t}setProperty(t,s){this.#e[t]=s}logEvent(t,s){this.#t.logEvent(t,{...this.#e,...s})}playerConstructed(){this.logEvent(Ne.q.PLAYER_CONSTRUCTED)}play(t){this.logEvent(Ne.q.PLAYER_PLAY,{speed:t})}seek(t){}setSpeed(t){}pause(){this.logEvent(Ne.q.PLAYER_PAUSE)}close(){this.logEvent(Ne.q.PLAYER_CLOSE)}setSubscriptions(t){}recordBytesReceived(t){}recordPlaybackTime(t,s){}recordDataProviderPerformance(t){}recordUncachedRangeRequest(){}recordTimeToFirstMsgs(){}recordDataProviderInitializePerformance(t){}recordDataProviderStall(t){}}const _t=new Map;function Rf(e,t){return t===_t?e:e.map(s=>{if(s!=null)return{...s,messagesByTopic:(0,T.transform)(s.messagesByTopic,(a,i,r)=>{const c=t.get(r);if(c)for(const u of c)a[u]=i.map(p=>({...p,topic:u}));a[r]=i},{})}})}function jf(e,t){if(t===_t)return e;const s=[];for(const a of e){s.push(a);const i=t.get(a.topic);if(i)for(const r of i)s.push({...a,topic:r})}return s}function Lf(e,t){if(t===_t)return e;const s=new Map;for(const[a,i]of e){const r=[...i].flatMap(c=>t.get(c)??c);s.set(a,new Set([...i,...r]))}return s}function Of(e,t,s){if(t===_t)return e;const a=(0,T.groupBy)(s,r=>r.topic),i=new Map;for(const[r,c]of e){const u=[...c].flatMap(p=>{const h=t.get(p);return a[p]?[p,...h??[]]:h||p});i.set(r,new Set(u))}return i}function Nf(e,t){return t===_t||e.messageCache==null?e:{...e,messageCache:{...e.messageCache,blocks:hn.aliasBlocks(e.messageCache.blocks,t)}}}function kf(e,t){return t===_t?e:e.flatMap(s=>{const a=t.get(s.name);return a?[s,...a.map(i=>({...s,name:i,aliasedFromName:s.name}))]:s})}function Zf(e,t){if(t===_t)return e;const s=new Map;for(const[a,i]of e){s.set(a,i);const r=t.get(a);if(r)for(const c of r)s.set(c,i)}return s}function Ff(e){if(e===_t)return _t;const t=new Map;for(const[s,a]of e.entries())for(const i of a){const r=t.get(i)??[];r.push(s),t.set(i,r)}return t}function Uf(e,t){const s=new Map,a=[],i=new Map,r=t.topics??[];for(const{extensionId:c,aliases:u}of e)for(const{name:p,sourceTopicName:h}of u){const f=s.get(p);if(r.some(m=>m.name===p))a.push({severity:"error",message:"Disallowed topic alias",tip:`Extension ${c} aliased topic ${p} is already present in the data source.`});else if(f!=null&&f!==h)a.push({severity:"error",message:"Disallowed topic alias",tip:`Extension ${c} requested duplicate alias from topic ${h} to topic ${p}.`});else{s.set(p,h);const m=(0,T.uniq)(i.get(h)??[]).concat(p);i.set(h,m)}}return{aliasMap:i,problems:a.length>0?a:void 0}}function zf(e){const t=e.aliasFunctions.map(a=>({extensionId:a.extensionId,aliases:a.aliasFunction({topics:e.topics??[],globalVariables:e.variables})}));return t.some(a=>[...a.aliases].length>0)?Uf(t,e):{aliasMap:_t,problems:void 0}}const hn={buildAliases:Yt()(zf),aliasBlocks:Yt()(Rf),aliasMessages:Yt()(jf),aliasProgress:Yt()(Nf),aliasPublishedTopics:Yt()(Lf),aliasSubscribedTopics:Yt()(Of),aliasTopics:Yt()(kf),aliasTopicStats:Yt()(Zf)};function Wf(e,t,s){const a={...s,activeData:s.activeData?{...s.activeData}:void 0},{aliasMap:i,problems:r}=hn.buildAliases(e);return a.activeData&&(a.activeData.topics=hn.aliasTopics(a.activeData.topics,i),a.activeData.messages=hn.aliasMessages(a.activeData.messages,i),a.activeData.publishedTopics&&(a.activeData.publishedTopics=hn.aliasPublishedTopics(a.activeData.publishedTopics,i)),a.activeData.subscribedTopics&&(a.activeData.subscribedTopics=hn.aliasSubscribedTopics(a.activeData.subscribedTopics,i,t)),a.activeData.topicStats=hn.aliasTopicStats(a.activeData.topicStats,i)),a.progress.messageCache&&(a.progress=hn.aliasProgress(a.progress,i)),r!=null&&(a.problems=(a.problems??[]).concat(r)),a}const Gf=Yt()((e,t)=>{const{aliasMap:s}=hn.buildAliases(e);if(s===_t)return t;const a=Ff(s);return t.flatMap(i=>{const r=a.get(i.topic);return r?r.map(c=>({...i,topic:c})):i})});class Qf{#e;#t;#n;#s=[];#i;#o;constructor(t,s,a){this.#e=t,this.#i=s.length===0,this.#t={aliasFunctions:s,topics:void 0,variables:a}}setListener(t){this.#o=t,this.#e.setListener(async s=>{await this.#a(s)})}setAliasFunctions(t){this.#t={...this.#t,aliasFunctions:t},this.#i=t.length===0}close(){this.#e.close()}setSubscriptions(t){if(this.#s=t,this.#i)this.#e.setSubscriptions(t);else if(this.#t.topics!=null){const s=Gf(this.#t,t);this.#e.setSubscriptions(s),this.#n=void 0}else this.#n=t}setPublishers(t){this.#e.setPublishers(t)}setParameter(t,s){this.#e.setParameter(t,s)}publish(t){this.#e.publish(t)}async callService(t,s){return await this.#e.callService(t,s)}startPlayback(){this.#e.startPlayback?.()}pausePlayback(){this.#e.pausePlayback?.()}seekPlayback(t){this.#e.seekPlayback?.(t)}playUntil(t){if(this.#e.playUntil){this.#e.playUntil(t);return}this.#e.seekPlayback?.(t)}setPlaybackSpeed(t){this.#e.setPlaybackSpeed?.(t)}setGlobalVariables(t){this.#e.setGlobalVariables(t),this.#t={...this.#t,variables:t}}async fetchAsset(t){if(this.#e.fetchAsset)return await this.#e.fetchAsset(t);throw Error("Player does not support fetching assets")}async#a(t){if(this.#i){await this.#o?.(t);return}t.activeData?.topics!==this.#t.topics&&(this.#t={...this.#t,topics:t.activeData?.topics});const s=Wf(this.#t,this.#s,t);await this.#o?.(s),this.#n&&this.#t.topics&&this.setSubscriptions(this.#n)}}var Yf=o(79044),si=o(28316),Hf=o(88665),oi=o.n(Hf),zn=o(69363),Vf=o(85266);class ai{#e;#t;#n;#s;constructor(t){this.#n=t}async update(t){if(t.topics===this.#t&&t.datatypes===this.#e&&this.#s!=null)return{didUpdate:!1,lib:this.#s};const s=await this.#n(t);return this.#t=t.topics,this.#e=t.datatypes,this.#s=s,{didUpdate:!0,lib:s}}}var Kf=o(1375),zt=o(56924);const Xf=e=>e.diagnostics.some(({severity:t})=>t===zt.H_.Error);var ii=o(45243),vs=o(38215),ri=o(87472);const gn=new Map;for(const[e,t]of Object.entries(vs.ros2galactic))gn.set(e,t);for(const[e,t]of Object.entries(vs.ros1))gn.set(e,t);for(const e of Object.values(ri.foxgloveMessageSchemas)){const t=(0,ri.generateRosMsgDefinition)(e,{rosVersion:1});gn.set(t.rosMsgInterfaceName,{name:t.rosMsgInterfaceName,definitions:t.fields}),gn.set(`foxglove.${e.name}`,{name:`foxglove.${e.name}`,definitions:t.fields})}gn.set("foxglove_msgs/ImageMarkerArray",{definitions:[{name:"markers",type:"visualization_msgs/ImageMarker",isComplex:!0,isArray:!0}]});var $f="../../packages/studio-base/src/players/UserNodePlayer/index.ts",Go;const Wn=q.ZP.getLogger($f);function Jf(e){return typeof e=="object"&&e&&"toJSON"in e?e.toJSON():e}class li{#e;#t=[];#n=[];#s=[];#i={};#o;#a=[];#c;#r;#l;#y={};#u;#b;#x;#m;#f=new Map;#D=new Map;#P=new Set;#d=new zn.jK({userNodes:{},nodeRegistrations:[],nodeRegistrationCache:[],lastPlayerStateActiveData:void 0,inputsByOutputTopic:new Map});#Z=new Yf.WU;static CreateNodeTransformWorker=()=>new SharedWorker(new URL(o.p+o.u(1302),o.b),{name:(0,Kt.Z)()});static CreateNodeRuntimeWorker=()=>new SharedWorker(new URL(o.p+o.u(492),o.b),{name:(0,Kt.Z)()});constructor(t,s){this.#e=t,this.#u=s;const{setUserNodeDiagnostics:a,addUserNodeLogs:i}=s;this.#c=(r,c)=>{a(r,c)},this.#r=(r,c)=>{c.length>0&&i(r,c)},this.#x=new ai(async r=>(0,Kf.Wr)({topics:r.topics,datatypes:new Map([...gn,...r.datatypes])})),this.#b=new ai(async r=>await this.#p().send("generateRosLib",{topics:r.topics,datatypes:new Map([...gn,...r.datatypes])}))}#C=Yt()((t,s)=>[...t,...s]);#I=Yt()((t,s)=>s.reduce((a,i)=>new Map([...a,...i]),new Map([...gn,...t])));#v={result:[]};async#B(t,s,a){if(t.length===0)return[];const i=c=>c,r=[];for(const c of t){const u=[];for(const h of a)if(this.#i[h.output.name]&&h.inputs.includes(c.topic)){const f=h.processMessage(c,s);u.push(f)}const p=await Promise.all(u);r.push(...(0,on.Z)(p,i))}return r}async#S(t,s,a){if(oi()(this.#v.input,{blocks:t,globalVariables:s,nodeRegistrations:a}))return this.#v.result;const i=a.filter(u=>this.#i[u.output.name]?.preloadType==="full");if(i.length===0)return t;const r=(0,T.uniq)(i.flatMap(u=>u.inputs)),c=[];for(const u of t){if(!u){c.push(u);continue}const p={...u.messagesByTopic},h=r.flatMap(f=>p[f]??[]).sort((f,m)=>(0,te.compare)(f.receiveTime,m.receiveTime));for(const f of i){const m=f.output.name;p[m]!=null&&(p[m]=[]);for(const y of h)if(f.inputs.includes(y.topic)){const w=await f.processBlockMessage(y,s);w&&(p[m]||(p[m]=[]),p[m]?.push(w))}}c.push({messagesByTopic:p,needTopics:u.needTopics,sizeInBytes:u.sizeInBytes})}return this.#v={input:{blocks:t,globalVariables:s,nodeRegistrations:a},result:c},c}setGlobalVariables(t){this.#y=t}async setUserNodes(t){const s=await this.#d.runExclusive(async a=>{for(const u of Object.keys(t)){const p=a.userNodes[u],h=t[u];p&&h&&p.sourceCode!==h.sourceCode&&this.#P.add(u)}a.userNodes=t;const i=Object.keys(t).length+1;a.nodeRegistrationCache.splice(i),await this.#A(a),this.#j(this.#s,a);const r=this.#m,c=a.lastPlayerStateActiveData;if(r&&c?.isPlaying===!1)return{...r,activeData:{...c,messages:[]}}});s&&await this.#R(s)}async#U(t,s,a,i,r){for(const Ae of a.nodeRegistrationCache)if(t===Ae.nodeId&&(0,T.isEqual)(s,Ae.userNode))return Ae.result;const{topics:c=[],datatypes:u=new Map}=a.lastPlayerStateActiveData??{},p=new Map([...gn,...u]),{name:h,sourceCode:f}=s,m={name:h,sourceCode:f,topics:c,rosLib:i,typesLib:r,datatypes:p},w=await this.#p().send("transform",m),{inputTopics:k,outputTopic:W,transpiledCode:G,projectCode:J,outputDatatype:K}=w,ye=`node-id-${t}`,re=()=>{let Ae;return{registration:async(bt,Ct)=>{if(!Ae){if(Ae=this.#a.pop(),!Ae){const xt=Go.CreateNodeRuntimeWorker();xt.onerror=ft=>{Wn.error(ft),this.#f.set(ye,{message:`User script runtime error: ${ft.message}`,severity:"error"}),this.#g()};const Ge=xt.port;Ge.onmessageerror=ft=>{Wn.error(ft),this.#f.set(ye,{severity:"error",message:`User script runtime error: ${String(ft.data)}`}),this.#g()},Ge.start(),Ae=new ii.Z(Ge),Ae.receive("error",ft=>{Wn.error(ft),this.#f.set(ye,{severity:"error",message:`User script runtime error: ${ft}`}),this.#g()})}const{error:rt,userNodeDiagnostics:ht,userNodeLogs:Tt}=await Ae.send("registerNode",{projectCode:J,nodeCode:G});if(rt!=null){this.#c(t,[...ht,{source:zt.Fb.Runtime,severity:zt.H_.Error,message:rt,code:zt.SM.RUNTIME}]);return}this.#r(t,Tt)}const gt=await Ae.send("processMessage",{message:{topic:bt.topic,receiveTime:bt.receiveTime,message:Jf(bt.message),datatype:bt.schemaName},globalVariables:Ct}),Dt=gt.userNodeDiagnostics;if(gt.error&&Dt.push({source:zt.Fb.Runtime,severity:zt.H_.Error,message:gt.error,code:zt.SM.RUNTIME}),this.#r(t,gt.userNodeLogs),Dt.length>0){this.#f.set(ye,{severity:"error",message:`User Script ${t} encountered an error.`,tip:"Open the User Scripts panel and check the Problems tab for errors."}),this.#c(t,Dt);return}if(!gt.message){this.#f.set(ye,{severity:"warn",message:`User Script ${t} did not produce a message.`,tip:"Check that all code paths in the user script return a message."});return}return this.#f.delete(ye),{topic:W,receiveTime:bt.receiveTime,message:gt.message,sizeInBytes:bt.sizeInBytes,schemaName:K}},terminate:()=>{this.#f.delete(ye),Ae&&(this.#a.push(Ae),Ae=void 0)}}},se=re(),_=re(),O={nodeId:t,nodeData:w,inputs:k,output:{name:W,schemaName:K},processMessage:se.registration,processBlockMessage:_.registration,terminate:()=>{se.terminate(),_.terminate()}};return a.nodeRegistrationCache.push({nodeId:t,userNode:s,result:O}),O}#p(){if(!this.#l){const t=Go.CreateNodeTransformWorker();t.onerror=i=>{Wn.error(i),this.#f.set("worker-error",{severity:"error",message:`User Script error: ${i.message}`}),this.#g()};const s=t.port;s.onmessageerror=i=>{Wn.error(i),this.#f.set("worker-error",{severity:"error",message:`User Script error: ${String(i.data)}`}),this.#g()},s.start();const a=new ii.Z(s);a.receive("error",i=>{Wn.error(i),this.#f.set("worker-error",{severity:"error",message:`User Script error: ${i}`}),this.#g()}),this.#l=a}return this.#l}async#A(t){if(!t.lastPlayerStateActiveData||t.nodeRegistrations.length===0&&Object.entries(t.userNodes).length===0)return;for(const m of t.nodeRegistrations)m.terminate();t.nodeRegistrations=[];const s=await this.#w(t),a=await this.#N(t),i=await Promise.all(Object.entries(t.userNodes).map(async([m,y])=>await this.#U(m,y,t,s,a))),r=[],c=new Set(t.lastPlayerStateActiveData.topics.map(m=>m.name)),u=new Set(i.map(({nodeData:m})=>m.outputTopic));t.inputsByOutputTopic.clear();for(const m of i){const{nodeData:y,nodeId:w}=m;if(!y.outputTopic){this.#c(w,[...y.diagnostics,{severity:zt.H_.Error,message:"Output topic cannot be an empty string.",source:zt.Fb.OutputTopicChecker,code:zt.SM.OutputTopicChecker.NOT_UNIQUE}]);continue}if(t.inputsByOutputTopic.has(y.outputTopic)){this.#c(w,[...y.diagnostics,{severity:zt.H_.Error,message:`Output "${y.outputTopic}" must be unique`,source:zt.Fb.OutputTopicChecker,code:zt.SM.OutputTopicChecker.NOT_UNIQUE}]);continue}if(t.inputsByOutputTopic.set(y.outputTopic,y.inputTopics),c.has(y.outputTopic)){this.#c(w,[...y.diagnostics,{severity:zt.H_.Error,message:`Output topic "${y.outputTopic}" is already present in the data source`,source:zt.Fb.OutputTopicChecker,code:zt.SM.OutputTopicChecker.EXISTING_TOPIC}]);continue}if(Xf(y)){this.#c(w,y.diagnostics);continue}for(const k of y.inputTopics)if(u.has(k))throw new Error(`Input "${k}" cannot equal another node's output`);r.push(m)}let p=!1;t.nodeRegistrations=r;const h=t.nodeRegistrations.map(({output:m})=>m);(0,T.isEqual)(h,this.#n)||(this.#n=h,p=!0);const f=t.nodeRegistrations.map(({nodeData:{datatypes:m}})=>m);if((0,T.isEqual)(f,this.#t)||(this.#t=f,p=!0),si.unstable_batchedUpdates(()=>{for(const m of t.nodeRegistrations)this.#c(m.nodeId,[])}),p&&this.#m?.activeData){const m=(0,T.unionBy)(this.#m.activeData.topics,this.#n,w=>w.name),y=this.#I(this.#m.activeData.datatypes,this.#t);this.#m={...this.#m,activeData:{...this.#m.activeData,datatypes:y,topics:m}},await this.#g()}}async#w(t){if(!t.lastPlayerStateActiveData)throw new Error("_getRosLib was called before `_lastPlayerStateActiveData` set");const{topics:s,datatypes:a}=t.lastPlayerStateActiveData,{didUpdate:i,lib:r}=await this.#b.update({topics:s,datatypes:a});return i&&this.#u.setUserNodeRosLib(r),r}async#N(t){if(!t.lastPlayerStateActiveData)throw new Error("_getTypesLib was called before `_lastPlayerStateActiveData` set");const{topics:s,datatypes:a}=t.lastPlayerStateActiveData,{didUpdate:i,lib:r}=await this.#x.update({topics:s,datatypes:a});return i&&this.#u.setUserNodeTypesLib(r),r}async#R(t){try{const s=this.#y,{activeData:a}=t;if(!a){this.#m=t,await this.#g();return}const{messages:i,topics:r,datatypes:c}=a,u=await this.#d.runExclusive(async p=>{if(!p.lastPlayerStateActiveData)p.lastPlayerStateActiveData=a,await this.#A(p),this.#j(this.#s,p);else{let G=a.lastSeekTime!==p.lastPlayerStateActiveData.lastSeekTime;(a.topics!==p.lastPlayerStateActiveData.topics||a.datatypes!==p.lastPlayerStateActiveData.datatypes)&&(G=!0,p.nodeRegistrationCache=[]),p.lastPlayerStateActiveData=a,G&&await this.#A(p)}const h=this.#I(c,this.#t),f=new Set;for(const G of this.#P){const J=p.nodeRegistrations.find(({nodeId:ye})=>ye===G);if(!J)continue;const K=J.inputs;for(const ye of K)f.add(ye)}for(const G of i)f.delete(G.topic);const m=[];for(const G of f){const J=this.#D.get(G);J&&m.push(J)}this.#P.clear();for(const G of i)this.#D.set(G.topic,G);const y=await this.#B(i,s,p.nodeRegistrations),w=await this.#B(m,s,p.nodeRegistrations),k=i.concat(w).concat(y).sort((G,J)=>(0,te.compare)(G.receiveTime,J.receiveTime)),W={...t.progress};if(W.messageCache){const G=await this.#S(W.messageCache.blocks,s,p.nodeRegistrations);W.messageCache={startTime:W.messageCache.startTime,blocks:G}}return{...t,progress:W,activeData:{...a,messages:k,topics:this.#C(r,this.#n),datatypes:h}}});this.#m=u,this.#f.delete("player-state-update")}catch(s){this.#f.set("player-state-update",{severity:"error",message:s.message,error:s}),this.#m=t}finally{await this.#g()}}async#g(){await this.#Z.runExclusive(async()=>{if(!this.#m)return;let t=this.#m.problems;this.#f.size>0&&(t=(t??[]).concat(Array.from(this.#f.values())));const s={...this.#m,problems:t};this.#o&&await this.#o(s)})}setListener(t){this.#o=t,this.#e.setListener(async s=>{await this.#R(s)})}setSubscriptions(t){this.#s=t,this.#d.runExclusive(async s=>{this.#j(t,s)}).catch(s=>{Wn.error(s),(0,_a.e)(s)})}#j(t,s){const a={},i=[];for(const c of t){const u=s.inputsByOutputTopic.get(c.topic);if(!u){a[c.topic]=c,i.push(c);continue}if(u.length!==0){a[c.topic]=c;for(const p of u)i.push({topic:p,preloadType:c.preloadType??"partial"})}}this.#i=a;const r=(0,Vf.I)(i);this.#e.setSubscriptions(r)}close=()=>{this.#d.runExclusive(async t=>{for(const s of t.nodeRegistrations)s.terminate()}),this.#e.close(),this.#l&&this.#l.send("close")};setPublishers(t){this.#e.setPublishers(t)}setParameter(t,s){this.#e.setParameter(t,s)}publish(t){this.#e.publish(t)}async callService(t,s){return await this.#e.callService(t,s)}async fetchAsset(t){if(this.#e.fetchAsset)return await this.#e.fetchAsset(t);throw Error("Player does not support fetching assets")}startPlayback(){this.#e.startPlayback?.()}pausePlayback(){this.#e.pausePlayback?.()}playUntil(t){if(this.#e.playUntil){this.#e.playUntil(t);return}this.#e.seekPlayback?.(t)}setPlaybackSpeed(t){this.#e.setPlaybackSpeed?.(t)}seekPlayback(t){this.#e.seekPlayback?.(t)}}Go=li;const qf=li;var _f="../../packages/studio-base/src/components/PlayerManager.tsx";const eh=q.ZP.getLogger(_f),th=Object.freeze({}),nh=Object.freeze({}),sh=e=>e.selectedLayout?.data?.userNodes??th,oh=e=>e.selectedLayout?.data?.globalVariables??nh,ah=e=>e.installedTopicAliasFunctions;function ih(e){const{children:t,playerSources:s}=e;(0,L.Wk)();const{setUserNodeDiagnostics:a,addUserNodeLogs:i,setUserNodeRosLib:r,setUserNodeTypesLib:c}=(0,ei.B)(),u=(0,L.O4)({setUserNodeDiagnostics:a,addUserNodeLogs:i,setUserNodeRosLib:r,setUserNodeTypesLib:c}),p=Cf(),h=(0,Hn.Z)(),f=(0,De.z)(),m=(0,l.useMemo)(()=>new wf(f),[f]),[y,w]=(0,l.useState)(),k=(0,qe.NS)(sh),W=(0,qe.NS)(oh),G=(0,Sn.I)(ah),{recents:J,addRecent:K}=Mf(),ye=(0,gs.Z)(W),[re]=(0,l.useState)(G),[se]=(0,l.useState)(W),_=(0,l.useMemo)(()=>{if(y)return new Qf(y,re??[],se)},[y,se,re]);(0,l.useEffect)(()=>{G!==re&&_?.setAliasFunctions(G??[])},[re,_,G]),(0,l.useEffect)(()=>{W!==se&&_?.setGlobalVariables(W)},[W,se,_]);const O=(0,l.useMemo)(()=>{if(!_)return;const rt=new qf(_,u);return rt.setGlobalVariables(ye.current),rt},[ye,_,u]);(0,l.useLayoutEffect)(()=>void O?.setUserNodes(k),[O,k]);const{enqueueSnackbar:Ae}=(0,Be.Ds)(),[tt,At]=(0,l.useState)(),bt=(0,l.useCallback)(async(rt,ht)=>{eh.debug(`Select Source: ${rt}`),p?.setRepresentedFilename(void 0);const Tt=s.find(xt=>xt.id===rt||xt.legacyIds?.includes(rt));if(!Tt){Ae(`Unknown data source: ${rt}`,{variant:"warning"});return}if(m.setProperty("player",rt),At(Tt),Tt.type==="sample"){const xt=Tt.initialize({metricsCollector:m});w(xt);return}if(!ht){Ae("Unable to initialize player: no args",{variant:"error"}),At(void 0);return}try{switch(ht.type){case"connection":{const xt=Tt.initialize({metricsCollector:m,params:ht.params});w(xt),ht.params?.url&&K({type:"connection",sourceId:Tt.id,title:ht.params.url,label:Tt.displayName,extra:ht.params});return}case"file":{const xt=ht.handle,Ge=ht.files;if(Ge){let ft=Ge[0];const Xt=[];for(const an of Ge)ft??=an,Xt.push(an);const ds=Tt.supportsMultiFile===!0&&Xt.length>1,In=Tt.initialize({file:ds?void 0:ft,files:ds?Xt:void 0,metricsCollector:m});ft&&p?.setRepresentedFilename(ft.path),w(In);return}else if(xt){const ft=await xt.queryPermission({mode:"read"});if(!h())return;if(ft!=="granted"&&await xt.requestPermission({mode:"read"})!=="granted")throw new Error(`Permission denied: ${xt.name}`);const Xt=await xt.getFile();if(!h())return;p?.setRepresentedFilename(Xt.path);const ds=Tt.initialize({file:Xt,metricsCollector:m});w(ds),K({type:"file",title:xt.name,sourceId:Tt.id,handle:xt});return}}}Ae("Unable to initialize player",{variant:"error"})}catch(xt){Ae(xt.message,{variant:"error"})}},[s,m,Ae,h,K,p]),Ct=(0,l.useCallback)(rh(J,bt,Ae),[J,Ae,bt]),gt=(0,l.useMemo)(()=>J.map(rt=>({id:rt.id,title:rt.title,label:rt.label})),[J]),Dt={selectSource:bt,selectRecent:Ct,selectedSource:tt,availableSources:s,recentSources:gt};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Ze.Z.Provider,{value:Dt,children:(0,n.jsx)(Qe.D2,{player:O,globalVariables:ye.current,children:t})})})}function rh(e,t,s){return a=>{const i=e.find(r=>r.id===a);if(!i){s(`Failed to restore recent: ${a}`,{variant:"error"});return}switch(i.type){case"connection":{t(i.sourceId,{type:"connection",params:i.extra});break}case"file":t(i.sourceId,{type:"file",handle:i.handle})}}}const lh=(0,N.ZL)()(e=>({container:{alignItems:"stretch",display:"flex",flexDirection:"column",maxHeight:"50vw",marginBlockEnd:e.spacing(3),marginInline:e.spacing(3)},paper:{maxWidth:700,width:"70%"},text:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,fontSize:e.typography.body1.fontSize,flex:1,padding:e.spacing(1),overflowY:"auto",whiteSpace:"pre-wrap"},iconButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)}}));function ch({notification:{details:e,message:t,severity:s,subText:a},onRequestClose:i}){const{classes:r,theme:c}=lh(),u={error:c.palette.error.main,warn:c.palette.warning.main,info:c.palette.info.main},p=(0,l.useMemo)(()=>e instanceof Error?(0,n.jsx)("div",{className:r.text,children:e.stack}):e!=null&&e!==""?(0,n.jsx)(xe.Z,{style:{whiteSpace:"pre-line"},children:e}):a?void 0:"No details provided",[r,e,a]);return(0,n.jsxs)(Ot.Z,{classes:{paper:r.paper},fullWidth:!0,open:!0,onClose:()=>i?.(),children:[(0,n.jsx)(us.Z,{color:u[s],children:t}),(0,n.jsxs)("div",{className:r.container,children:[a&&(0,n.jsx)(xe.Z,{mb:3,children:a}),p]}),(0,n.jsx)(pe.Z,{"aria-label":"close",onClick:()=>i?.(),className:r.iconButton,children:(0,n.jsx)(Le.Z,{})})]})}var ci=o(42146);const dh=e=>{switch(e){case"error":return"error";case"warn":return"warning";case"info":return"default";default:return"default"}};function uh(){const{enqueueSnackbar:e}=(0,Be.Ds)(),[t,s]=(0,l.useState)(void 0);return(0,l.useLayoutEffect)(()=>((0,ci.tm)((a,i,r,c)=>{e((0,n.jsxs)("div",{children:[a," ",(0,n.jsx)(sn.Z,{onClick:()=>{s({message:a,details:i,severity:c})},variant:"inherit",fontStyle:"italic",color:"inherit",underline:"hover",children:"(see details)"})]}),{variant:dh(c),persist:c==="error"})}),()=>{(0,ci.X8)()}),[e]),t==null?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(ch,{notification:t,onRequestClose:()=>{s(void 0)}})}var ph=o(6693);const ns=e=>({"&.notistack-SnackbarContainer":{top:e==="top"?Ft.h:void 0}}),Qo=(0,N.ZL)()((e,t,s)=>({icon:{},dismissButton:{color:e.palette.common.white,"svg:not(.MuiSvgIcon-root)":{fontSize:16}},root:{"#notistack-snackbar":{padding:0,gap:e.spacing(.75)},"&.notistack-MuiContent":{padding:e.spacing(.5,1.5,.5,1),fontSize:e.typography.body2.fontSize},"&.notistack-MuiContent-default":{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,[`.${s.icon}`]:{color:e.palette.primary.main},[`.${s.dismissButton}`]:{color:e.palette.text.primary}},"&.notistack-MuiContent-success":{backgroundColor:e.palette.success.main},"&.notistack-MuiContent-error":{backgroundColor:e.palette.error.main},"&.notistack-MuiContent-info":{backgroundColor:e.palette.info.main},"&.notistack-MuiContent-warning":{backgroundColor:e.palette.warning.main}}})),fh=(0,N.ZL)()({containerAnchorOriginBottomCenter:ns("bottom"),containerAnchorOriginBottomRight:ns("bottom"),containerAnchorOriginBottomLeft:ns("bottom"),containerAnchorOriginTopCenter:ns("top"),containerAnchorOriginTopRight:ns("top"),containerAnchorOriginTopLeft:ns("top")}),hh=({id:e})=>{const{closeSnackbar:t}=(0,Be.Ds)(),{classes:s}=Qo();return(0,n.jsx)(pe.Z,{size:"small",className:s.dismissButton,onClick:()=>{t(e)},children:(0,n.jsx)(Ln.BkL,{})})},ss=(0,l.forwardRef)((e,t)=>{const{classes:s}=Qo();return(0,n.jsx)(Be.pk,{ref:t,...e,className:s.root})});ss.displayName="Snackbar";function gh({children:e}){const{classes:t}=fh(),{classes:s}=Qo();return(0,n.jsx)(Be.wT,{Components:{default:ss,error:ss,success:ss,warning:ss,info:ss},action:a=>(0,n.jsx)(hh,{id:a}),iconVariant:{default:(0,n.jsx)(Rs.qSj,{className:s.icon}),info:(0,n.jsx)(Rs.qSj,{className:s.icon}),error:(0,n.jsx)(Ln.AGC,{className:s.icon}),warning:(0,n.jsx)(La.ONB,{className:s.icon}),success:(0,n.jsx)(ae.KXr,{className:s.icon})},anchorOrigin:{vertical:"top",horizontal:"center"},maxSnack:5,preventDuplicate:!0,TransitionComponent:ph.Z,classes:t,children:e})}var mh=o(82799),di=o(52691);function yh(e){const{isDesktop:t,onClose:s}=e,{t:a}=(0,X.$G)("incompatibleLayoutVersion"),i=t??(0,Un.Z)();return(0,n.jsxs)(Ot.Z,{open:!0,onClose:s,children:[(0,n.jsx)(us.Z,{children:a("title")}),(0,n.jsxs)(Dn.Z,{children:[i&&(0,n.jsxs)(di.Z,{children:[a("desktopText"),(0,n.jsx)(sn.Z,{target:"_blank",href:"https://foxglove.dev/download",children:"https://foxglove.dev/download"}),"."]}),!i&&(0,n.jsx)(di.Z,{children:a("webText")})]}),(0,n.jsx)(Bn.Z,{children:(0,n.jsx)(oe.Z,{onClick:s,variant:"contained",children:"OK"})})]})}var vh="../../packages/studio-base/src/providers/CurrentLayoutProvider/index.tsx";const Ah=q.ZP.getLogger(vh),bh=1;function xh({children:e}){const t=(0,De.z)(),[s]=(0,l.useState)(()=>(0,Kt.Z)()),a=(0,l.useRef)(new Set),i=(0,l.useCallback)(O=>{a.current.add(O)},[]),r=(0,l.useCallback)(O=>{a.current.delete(O)},[]),[c,u]=(0,l.useState)({selectedLayout:void 0}),p=(0,l.useRef)(c),[h,f]=(0,l.useState)(!1),m=(0,l.useCallback)(O=>{const Ae=O.selectedLayout?.data?.version;if(Ae!=null&&Ae>bh){f(!0),u({selectedLayout:void 0});return}u(O),p.current=O;for(const tt of[...a.current])tt(O)},[]),y=(0,l.useRef)([]),w=(0,l.useRef)(new Set),k=(0,l.useCallback)(O=>{w.current.add(O)},[]),W=(0,l.useCallback)(O=>{w.current.delete(O)},[]),G=(0,l.useCallback)(()=>y.current,[]),J=(0,l.useCallback)(O=>{const Ae=typeof O=="function"?O(y.current):O;if(!oi()(Ae,y.current)){y.current=Ae;for(const tt of[...w.current])tt(y.current)}},[]),K=(0,l.useCallback)(O=>{if(p.current.selectedLayout?.data==null)return;const Ae=p.current.selectedLayout.data,tt=lu(Ae,O);if((0,T.isEqual)(Ae,tt)){Ah.warn("Panel action resulted in identical config:",O);return}const At=(0,T.uniq)(Object.keys(tt.configById).map(Me.$k));m({sharedPanelState:(0,T.pick)(p.current.sharedPanelState,At),selectedLayout:{data:tt,name:p.current.selectedLayout.name,edited:!0}})},[m]),ye=(0,l.useCallback)(O=>{m({sharedPanelState:{},selectedLayout:O})},[m]),re=(0,l.useCallback)((O,Ae)=>{p.current.selectedLayout?.data!=null&&m({...p.current,sharedPanelState:{...p.current.sharedPanelState,[O]:Ae}})},[m]),se=(0,l.useMemo)(()=>({getCurrentLayoutState:()=>p.current,setCurrentLayout:ye,updateSharedPanelState:re,savePanelConfigs:O=>{K({type:"SAVE_PANEL_CONFIGS",payload:O})},updatePanelConfigs:(O,Ae)=>{K({type:"SAVE_FULL_PANEL_CONFIG",payload:{panelType:O,perPanelFunc:Ae}})},createTabPanel:O=>{K({type:"CREATE_TAB_PANEL",payload:O}),J([]),t.logEvent(Ne.q.PANEL_ADD,{type:"Tab"})},changePanelLayout:O=>{K({type:"CHANGE_PANEL_LAYOUT",payload:O})},overwriteGlobalVariables:O=>{K({type:"OVERWRITE_GLOBAL_DATA",payload:O})},setGlobalVariables:O=>{K({type:"SET_GLOBAL_DATA",payload:O})},setUserNodes:O=>{K({type:"SET_USER_NODES",payload:O})},setPlaybackConfig:O=>{K({type:"SET_PLAYBACK_CONFIG",payload:O})},closePanel:O=>{K({type:"CLOSE_PANEL",payload:O});const Ae=(0,Mt.PC)(O.root,O.path);J(tt=>tt.filter(At=>At!==Ae)),t.logEvent(Ne.q.PANEL_DELETE,typeof Ae=="string"?{type:(0,Me.$k)(Ae)}:void 0)},splitPanel:O=>{K({type:"SPLIT_PANEL",payload:O})},swapPanel:O=>{const Ae=y.current.includes(O.originalId),tt=Object.keys(p.current.selectedLayout?.data?.configById??{});if(K({type:"SWAP_PANEL",payload:O}),Ae){const At=Object.keys(p.current.selectedLayout?.data?.configById??{});J((0,T.difference)(At,tt))}t.logEvent(Ne.q.PANEL_ADD,{type:O.type,action:"swap"}),t.logEvent(Ne.q.PANEL_DELETE,{type:(0,Me.$k)(O.originalId),action:"swap"})},moveTab:O=>{K({type:"MOVE_TAB",payload:O})},addPanel:O=>{K({type:"ADD_PANEL",payload:O}),t.logEvent(Ne.q.PANEL_ADD,{type:(0,Me.$k)(O.id)})},dropPanel:O=>{K({type:"DROP_PANEL",payload:O}),t.logEvent(Ne.q.PANEL_ADD,{type:O.newPanelType,action:"drop"})},startDrag:O=>{K({type:"START_DRAG",payload:O})},endDrag:O=>{K({type:"END_DRAG",payload:O})}}),[t,K,ye,J,re]),_=(0,L.O4)({addLayoutStateListener:i,removeLayoutStateListener:r,addSelectedPanelIdsListener:k,removeSelectedPanelIdsListener:W,mosaicId:s,getSelectedPanelIds:G,setSelectedPanelIds:J,actions:se});return(0,n.jsxs)(qe.ZP.Provider,{value:_,children:[e,h&&(0,n.jsx)(yh,{onClose:()=>{f(!1)}})]})}var Eh="../../packages/studio-base/src/providers/ExtensionCatalogProvider.tsx";const mn=q.ZP.getLogger(Eh);function Ch(e,t){const s={},a=[],i=[];mn.debug(`Activating extension ${e.qualifiedName}`);const r={exports:{}},c=h=>({react:l,"react-dom":si})[h],p={mode:"production",registerPanel:h=>{mn.debug(`Extension ${e.qualifiedName} registering panel: ${h.name}`);const f=`${e.qualifiedName}.${h.name}`;if(s[f]){mn.warn(`Panel ${f} is already registered`);return}s[f]={extensionName:e.qualifiedName,extensionNamespace:e.namespace,registration:h}},registerMessageConverter:h=>{mn.debug(`Extension ${e.qualifiedName} registering message converter from: ${h.fromSchemaName} to: ${h.toSchemaName}`),a.push(h)},registerTopicAliases:h=>{i.push({aliasFunction:h,extensionId:e.id})}};try{new Function("module","require",t)(r,c,{}),r.exports.activate(p)}catch(h){mn.error(h)}return{panels:s,messageConverters:a,topicAliasFunctions:i}}function Sh(e,t){return(0,H.M)((s,a)=>({downloadExtension:async i=>{const r=await fetch(i);return new Uint8Array(await r.arrayBuffer())},installExtension:async(i,r)=>{const c=e.find(p=>p.namespace===i);if(c==null)throw new Error("No extension loader found for namespace "+i);const u=await c.installExtension(r);return await a().refreshExtensions(),u},refreshExtensions:async()=>{if(e.length===0)return;const i=[],r={panels:{},messageConverters:[],topicAliasFunctions:[]};for(const c of e)try{for(const u of await c.getExtensions())try{i.push(u);const p=await c.loadExtension(u.id),h=Ch(u,p);Object.assign(r.panels,h.panels),r.messageConverters.push(...h.messageConverters),r.topicAliasFunctions.push(...h.topicAliasFunctions)}catch(p){mn.error("Error loading extension",p)}}catch(u){mn.error("Error loading extension list",u)}mn.debug(`Found ${i.length} extension(s)`),s({installedExtensions:i,installedPanels:r.panels,installedMessageConverters:r.messageConverters,installedTopicAliasFunctions:r.topicAliasFunctions})},installedExtensions:e.length===0?[]:void 0,installedPanels:{},installedMessageConverters:t??[],installedTopicAliasFunctions:[],uninstallExtension:async(i,r)=>{const c=e.find(u=>u.namespace===i);if(c==null)throw new Error("No extension loader found for namespace "+i);await c.uninstallExtension(r),await a().refreshExtensions()}}))}function Th({children:e,loaders:t,mockMessageConverters:s}){const[a]=(0,l.useState)(Sh(t,s)),i=a.getState().refreshExtensions;return(0,l.useEffect)(()=>{i().catch(r=>{mn.error(r)})},[i]),(0,n.jsx)(Sn.d.Provider,{value:a,children:e})}const Ph="https://raw.githubusercontent.com/foxglove/studio-extension-marketplace/main/extensions.json";function Ih({children:e}){const t=(0,l.useCallback)(async()=>await(await fetch(Ph)).json(),[]),s=(0,l.useCallback)(async i=>await(await fetch(i)).text(),[]),a=(0,L.O4)({getAvailableExtensions:t,getMarkdown:s});return(0,n.jsx)(ap.Provider,{value:a,children:e})}var Mh=o(75017),Dh=o(14123);const Bh="data:image/png;base64,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",wh=o.p+"e7bf3d07c33884215d85.png",Rh=o.p+"fb62755380433e4f4f1c.png",jh="data:image/png;base64,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",Lh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASjSURBVHgB7d3BTRtbAIXh4QkJdtRABbRCGSzZUQMdUAYdUQM7WL33nMhRQCYOeH7jO/4+KVJMIoWg6OQwPnPn5Orq6t8JIPDPBBARMEBGwACZ0/cfuLy8nEb09PT05vWofw/43ft/16PRYIDM6Ue/MEpybmsqo/8PwHFaSgPXYICMgAEyAgbICBggI2CAjIABMgIGyHy4g1nK+/AWvfB9NBggc+I8GKCiwQAZAQNkBAyQOfn/h2swQEKDATICBsgIGCDz4ZL37u7uzev7+/tpH25ubqaLi4tfrx8eHqbn5+cJGI8GA2ROt/2GfTWXtVVjWXnfoIDxHHyDeX19nYAxbW0w711fX0+Fx8fHjR9/eXl583rXZrNuZIfSkA7t81kKX9fdzPWdi2swQEbAABkBA2Q23ot0dnY23d7e/vj5vt9FWlt/7/xdfz6wu40N5vz8fALY1dZ3kVZNYrWkXe9Taq76w3K4BgNkhjsPZpT9ytJ3GKPuiexjGh9dK9VggIyAATICBsg4kxfIaDBARsAAGQEDZAQMkBEwQEbAABkBA2Q8FwnIaDBAxnORgIznIgGZo3su0lxGOw/GOSiNYzn356tcgwEyAgbICBgg47lIQMZzkYCM5yIBGddggIznIh05z3dyja+kwQAZAQNkBAyQ8VwkIKPBABkBA2QEDJD59Hkw380O5mv+du8Cc9JggIyAATICBsjYwQAZDQbICBggI2CAzHA7mG3sZOZlH8MuNBggI2CAjIABMnYwQEaDATICBsgIGCCzuB3MNnYy87KT4U80GCAjYICMgAEydjBARoMBMgIGyAgYIOM8GP7IzoVdaDBARsAAGQEDZOxggIwGA2QEDJARMEBmuB3MUncu9iYskQYDZAQMkBEwQMYOBshoMEBGwAAZAQNkBAyQETBARsAAGQEDZD68F+n9PT/7ulfm5uZmuri4+PX64eFhen5+noDxaDBAZuvd1Pu+y3fVWFY8HQDGd/AN5vX1dQLG9OnzYK6vr6fC4+Pjxo+/vLy8eb1rs1k3skNpSIf2+SzF0r+uo5wf5BoMkBEwQEbAAJmN58GcnZ1Nt7e3P37+Xd/rrb93dlYtjGtjgzk/P58AdrX1XaRVk1gtadf7lJp3U2A5XIMBMsOdyTvKfuVYdhij7Ylc09svDQbICBggI2CAjOciARkNBsgIGCAjYIDMp8+D+W6WvvNyHk3D3uYnDQbICBggI2CAjB0MkNFggIyAATICBsgIGCAjYIDMcEvev2WZOi/LVL5CgwEyAgbICBggY8kLZDQYICNggIyAATKL3cFsYyczLyfjNUbfH2kwQEbAABkBA2TsYICMBgNkBAyQETBA5mh3MB+x45iXc2SOmwYDZAQMkBEwQMYOBshoMEBGwAAZAQNknAfDLOxd2ESDATICBsgIGCBjBwNkNBggI2CAjIABMovdwdi5zMvOha/QYICMgAEyAgbI2MEAGQ0GyAgYICNggIyAATICBsgIGCAjYIDMcPciucdoXut7jHxd5+XerZ80GCAjYICMgAEy7kUCMhoMkBEwQEbAABkBA2QEDJARMEBGwAAZAQNkBAyQ+Q/etxTOEdcWZAAAAABJRU5ErkJggg==",Oh=o.p+"0513b23d545c2bbec05a.png",Nh="data:image/png;base64,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",kh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAORSURBVHgB7dxRTttAFEBRU7HALCLLyiKyw1b94BMCwdcznpzzXanBRFfPmuG9bdv2dwMI/NkAIgIDZAQGyAgMkBEYICMwQEZggMz7o39wu902Pne9XrdneK6s4NH33wQDZAQGyAgMkHnb/C0SEDHBABmBATICA2QEBsgIDJARGCAjMEBGYIDM++Vy2QAKbvICGa9IQEZggIzAABmBATICA2Qe7uR1jP21+/2+PcNz5b9nvz9nYYIBMgIDZAQGyLjJC2RMMEBGYICMwAAZgQEy9sEAGadIQMYrEpARGCAjMEBGYICMwACZ5ffBzLpv47fP9ePnmuX3M+vnYSwTDJARGCAjMEDGTV4gY4IBMgIDZAQGyAgMkLEPBsg4RQIyXpGAjMAAGYEBMgIDZAQGyCy/D+a7jt4f4noAIx31fTfBABmBATICA2Tc5AUyJhggIzBARmCAjMAAGftggIxTJCDjFQnICAyQERggIzBARmCAzOn2wRy9t6WyyvWAj9/Haj8P+zDBABmBATICA2Tc5AUyJhggIzBARmCAjMAAGftggIxTJCDjFQnICAyQERggIzBARmCAzOn2wext1P6Po5/rqL0to/9fxjLBABmBATICA2Tc5AUyJhggIzBARmCAjMAAGftggIxTJCDjFQnICAyQERggIzBARmCAzMvvg3mk2iviesDXRu2ROZvZ996YYICMwAAZgQEybvICGRMMkBEYICMwQEZggIx9MEDGKRKQ8YoEZAQGyAgMkBEYICMwQGbafTCz77n4raOf66j9Kq+y12X17+uzTDBARmCAjMAAGTd5gYwJBsgIDJARGCAjMEDGPhgg4xQJyHhFAjICA2QEBsgIDJARGCAz7T6Yo4za4+F6wM+8yl6ZvY3eU2OCATICA2QEBsi4yQtkTDBARmCAjMAAGYEBMvbBABmnSEDGKxKQERggIzBARmCAjMAAmWX2wYzee/FTr3o9YJa9LrN9jlWZYICMwAAZgQEybvICGRMMkBEYICMwQEZggIx9MEDGKRKQ8YoEZAQGyAgMkBEYICMwQGaZfTCVal+H6wH72Huvy+r7WY5mggEyAgNkBAbIuMkLZEwwQEZggIzAABmBATL2wQAZp0hAxisSkBEYICMwQEZggIzAAJmX2Qcz256Psz7XvfevHG2Vz38WJhggIzBARmCAjJu8QMYEA2QEBsgIDJARGCAjMEBGYICMwACZfyykld/DJR2SAAAAAElFTkSuQmCC",Zh="data:image/png;base64,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",ui="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAVmSURBVHgB7d2/a11lHAbwt6JcVDCLioII4iZx6KKDhYot/gVubjorxSWTk1MWF/dubv4FQtQOd+iiww3dilAKij+GW1AIDjVvaDAmhDQ373Pu+fH5QCiFkJssD8/5nvd7zqVSysMCEPBEAQgRMECMgAFiBAwQI2CAGAEDxAgYIEbAADECBogRMECMgAFiBAwQI2CAGAEDxAgYIObJ0sjm5ma5fv16mc1mBRim5XJZ5vN5WSwWpYVmDebKlSvCBQZuY2OjXLt2rbTSrMHUX6za3t4uwDBtbW01LQpmMECMgAFiBAwQ02wGc5Z6bXeUWQ2MnwYDxHTWYA5pLjAdGgwQE28wx2cvwHRoMECMgAFiBAwQEw+YetfInSOYJg0GiOk8YOpdJXeWYBo0GCCms5O85jAwPRoMECNggBgBA8QIGCBGwAAxAgaIETBATOdPtDuu9ane087bdPU5wH80GCBGwAAxAgaIWfsMpqtZRupzbty4cfAuXzMZOEmDuaCdnZ2yXC4LcNLaG8zQLRaLgy/gJA0GiBEwQIyAAWIEDBAjYICYwe8i2T2C/tJggBgBA8QIGCBmtLtIdo9g/TSYc7J7BI/PLtI52T2Cx6fBADECBogRMECMgAFiBAwQM7r3Ip3GzhJ0T4MBYgQMECNggJjJvBep68+3swQaTIydJbCLFGNnCTQYIEiDeeT4eRizE7g4DQaI0WCO0VygHQ0GiBnde5HO+nnn/X5gdRoMECNggBgBA8SMbhfpvD/v8PvNYqA9DQaIETDH1CajzUAbAgaIcZL3ESd4oT0NBogRMECMgAFiBAwQI2CAmMHcRep667o1d6mYIg0GiBEwQIyAAWIGM4NZ99Z1K974yJRoMB3zxkemxC5Sx7zxkSnRYIAYAQPECBggRsAAMQIGiLGLdEHOs8DpNBggRsAAMQIGiLGL1IgdIzhJg2nEjhGcZBepETtGcJIGA8QIGCBGwAAxAgaIETBAjF2kkXD+hj7SYIAYAQPECBggxi7SyNiJok80mJGxE0Wf2EUaGTtR9IkGA8QIGCBGwAAxa5/BHD9R6+4HjIcGA8SsPWBqY9FaYJw0GCCmdwFTZzJj23SGqdJggBgBA8QIGCCmd7tI7ijBeGgwQEzvTvIC46HBADFrbzBmLjBeGgwQI2CAGAEDxAgYIEbAADHxu0ieWAfTpcEAMfGA8cQ6mC4NBojpPGA8sQ6mQ4MBYgQMECNggJjOt6ndUYLp0GCAmM5P8gLTocEAMfEGY+YC06XBADECBogRMEBMsxnM3t5emc1m7hrBwC2Xy9JKswazs7PT9BcDuleLwnw+L61c2v96WAACzGCAGAEDxAgYIGbt76aGoXrmxefK5U/eLxuvvVCeenZWhu6X23fL7s1b5e/fHpRWDHlhBTVc3v3yw1EEy1H//LVXfvjs62Yh4xIJVrD50dXRhUtV/6bayloRMLCCl99+vYxVveRrRcAA/9OymQkYGLg6L/lj937pIwEDA1cDZv75N+Xed3dK3wgYGLjnN185GMz+9NW3vQsZ52BgBF59742Df2vIHP3/ugkYWIPDIGitns/pU8gIGFiH8PHWvpzRETCwBpc/bXeY7VCdv9z7/s7BPKYv53QMeWEEarjUS6MaLn2Zv1QCBgbuz937vQyXyiUSDNzT+4Pdd7744OB2dd8IGBi4eueofvWRSyRYQX2sAWcTMLCCBz//Xsbq19t3SysCBlbw4/5QdYwtpv5Ni5u3SiueaAcrqnOPNz++Wl56a/jPhqnBUltZDU6PzAQGwSUSECNggBgBA8QIGCBGwAAxAgaIETBAjIABYgQMECNggBgBA8QIGCBGwAAx/wLclk8IqQ/rwwAAAABJRU5ErkJggg==",Fh="data:image/png;base64,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",Uh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAVaSURBVHgB7d0/bttWAMfxp0BLTiF4KBzAcNwhS6dewTlDMhTw4LFnyNjBQAf1DPUVPHnxUNcwYMODwVt4Kus/AVSqQl06/IkU/fkAhJuXAnlglC+eSImvlFLqvo69vb3e/uyXHPXp5sx1E8+v+Y5vvm8KQIjAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPETAvfZH9/vwzZ1tZWGaLj4+PC+FnBADGTr08a53/449fz8v1Pe42xoa4Qhu729rYwftPz8/PSl/u4lT7//JdYnq/AvMyqv/dNez2Y7/Ncg+nY0dFR6dLBwUGBTeUaDBBjBdMxKw5YsIIBYqa785vSl7/uj91n/p/DclL68Gnn88rx+rT5649fmr/e3t4uQ3B9fV2GbPk8Pnn+AuT7y/5er8tWvX77er0OlRUMECMwQIzAADHTu+qiPHyU9+2s+W5yaONVVT3+nM1max0/u3r6+eFdWTm+bOjXPobqufO8PD7U121pvnx6e90OZfz+NvWkrDa0cfgnr9tNMLm/izTo7yIN7S7Sso9fhv1t6qH6/eeXfZt6SHeRVnEXqck1GCDGJ3k75rtIsGAFA8Q8XJnq7RrMpn3d/eHTp5MfmmNDf6LdUK16op3HH2T1MV8rGCDGNZiO+S4SLFjBADECA8QIDBBjV4EW7CrQHbsKvA52FWjJrgLdsKvA+rlNDYyKwAAxPgfTMd9FggUrGCDGCqZjVhywYAUDxFjBdMx3kWDBCgaIERggRmCAGNdgOubaByxYwQAxAgPECAwQ4xrMN1r1dPyh2MTHYTAuVjBAjMAAMQIDxAgMECMwQIxdBVpYtasA8N/qvo6vcduYoz7dnLlu4vk13/HN11skIEZggBiBAWIEBoiZ7M5v6sLa/LnzXYGu/XY5L0NkBQPECAwQIzBAzPSuunj8RMzb2W7jN4xnxstOY7icXT39/PDOuPGXjy+rqurx52w263V8en+dt6xmfD3jMF7uIq2Zu0gkuIsEvDoCA8QIDBBV93V4XIPza77jnq8VDBAjMECMwAAxAgPECAwQY1eBFuwqAO3VfR1uUzu/5jvu+XqLBMQIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMXYVaMGuAtBe3ddhVwHn13zHPV9vkYAYgQFiBAaIERggZjKfz+vCaP1Sfiysz2E5KSxYwQAxAgPECAwQM62q6vE/ZrNZ4zeMj2P8rrp4/MTT29mu8TWMl+bpf/Wvw2lh5CbGex1/3dxFGjl3kdbLXaQm12CAGIEBYgQGiKr7Ojyuwfk133HP1woGiBEYIEZggBiBAWIEBoixq0ALdhWA9uq+DrepnV/zHfd8vUUCYgQGiBEYIEZggBiBAWIEBogRGCBGYIAYgQFiBAaIERggRmCAGIEBYgQGiBEYIEZggBiBAWIEBogRGCBGYIAYuwq0YFcBaK/u67CrgPNrvuOer7dIQIzAADECA8QIDBAzmc/ndRmwTzufC3Tt/eVN6dJhOSn8mxUMECMwQIzAADFvqqoqD8eyoY2fXT0dxo13Od6VTfl3tO5xKxggxl0kXiV3kdbDCgaIERggRmCAqLqvw+ManF/zHfd8rWCAGIEBYgQGiBEYIEZggBi7CrRgVwFor+7rcJva+TXfcc/XWyQgRmCAGIEBYgQGiBEYIEZggBiBAWIEBogRGCBGYIAYgQFiBAaIERggRmCAGIEBYgQGiBEYIEZggBiBAWIEBogRGCBGYICYvwFzCRzd8/E02wAAAABJRU5ErkJggg==",zh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAReSURBVHgB7d3PKnRxHMfxHyHkX0hplCwsrOQK7LkG92DrLlyILVvXYGVB2ZBSLFgoqefpnPI0T8/QmScfc6Zer9JIpyxmznt+v++ZPyPb29u/CkDAaAEIERggRmCAGIEBYgQGiBEYIEZggJix0qfR0dEyPz9fJicn6x/a5+3trTw/P5eXl5cCg9RXYMbGxsrq6mp9S3tNTEyU5eXlsrCwUO7v78v7+3uBQehriyQuw+XjCaFadcIgNH7kzczMiMsQqu6zaksLg9A4MB6kw8usjEFpHJhqX89wEhgGxeYciBEYIEZggBiBAWIEBogRGCBGYIAYgaGxubm5MjU1VaApgWmJxcXFcnR0VNbW1j49Zm9vrxweHg7sJN/Z2SmdTqdAUwLTEq+vr/VtFZBekanisr+/X66urv4cC20nMC1RReP4+Lg8Pj7+E5mPuJydnZXT09MCw0JgWqRXZMSFYTbS9JsdNzY2Cj+jmrF0r2K+Iy43Nzd9Hb+yslIPdbutr6/Xn5L39PT019/v7u5s2+jJB7y0UHWyXlxc1IH5+P2nLS0t1ZHpNj4+XmZnZ/8ZMlfBERh6sYJpoY9t0fn5ednc3KxP9mrrdHt7W/5XvyuYXnZ3d+vVyvX1dYEmzGBapnvmcnJy8ungF4aBwLRIr4HuV1eXoO0EpiWqrdBnV4u6I3NwcFBgWJjBtEgVmeqFdJ+phqvT09N1aPr1HTOYra2t+n8/PDwUaMJVpBb5Ki6VaiUzyKs1l5eXBfphiwTECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAz0ul0Gr0XCaBfVjBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPE/Aa7QMSy8qBRaAAAAABJRU5ErkJggg==",Wh="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAO4SURBVHgB7dzBbVpBGEbRcUQXtEIRrwjKogiKoC+yjvVblnjvSg4+R5pFFGWRb3FFzGQ+1lrPBRD4swAiAgNkBAbICAyQERggIzBARmCAzOmr33g8Hv/8+nK5rFfcbrf1zq7X63qFXWZ2mf3UXb77+/gEA2QEBsgIDJD5WP4vEhDxCQbICAyQERggIzBARmCAjMAAGYEBMgIDZE7bti2AynPPOZ/Pu/78ux672MUu6+mfSEBGYICMwAAZgQEyAgNk8jd53/1r8Pv9vl5hl5ldZj91l+/+Pj7BABmBATICA6TcQAyOXexiFzd5gZDAABmBATICA2QEBsgIDJD52LbtuQAivr8Pjl3sYhf3YICQwAAZgQEyAgNkBAbInFbMC2Uzu8zsMvOiHcAn+Zu8wO/lEwyQyX8G8+q/Od+dXWZ2mf2vu/gEA2S+/ATjZy7AXj7BABmBATICA2QEBsh40Q5IeYkrOHaxi128aAeEBAbICAyQERggIzBAJn8PxgtlM7vM7DLzoh3AJwIDZAQGSLmBGBy72MUubvICIYEBMgIDZAQGyAgMkBEYIONFOyDl+/vg2MUudnEPBggJDJARGCAjMEBGYICMF+128nLbzC4zL9oBHERggIzAACk3EINjF7vYxU1eICQwQEZggIzAABmBATICA2S8aAekfH8fHLvYxS7uwQAhgQEyAgNkBAbICAyQ8aLdTl5um9ll5kU7gIMIDJARGCDlBmJw7GIXu7jJC4QEBsgIDJARGCAjMEBGYICMF+2AlO/vg2MXu9jFPRggJDBARmCAjMAAGYEBMl6028nLbTO7zLxoB3AQgQEyAgOk3EAMjl3sYhc3eYGQwAAZgQEyAgNkBAbICAyQ8aIdkPL9fXDsYhe7uAcDhAQGyAgMkBEYICMwQMaLdjt5uW1ml5kX7QAOIjBARmCAlBuIwbGLXeziJi8QEhggIzBARmCAjMAAGYEBMl60A1K+vw+OXexiF/dggJDAABmBATICA2QEBsh40W4nL7fN7DLzoh3AQQQGyAgMkHIDMTh2sYtd3OQFQgIDZAQGyAgMkBEYICMwQMaLdkDK9/fBsYtd7OIeDBASGCAjMEBGYICMwAAZL9rt5OW2mV1mXrQDOIjAABmBAVJuIAbHLnaxi5u8QEhggIzAABmBATICA2QEBsh40Q5I+f4+OHaxi13cgwFCAgNkBAbICAyQERgg40W7nbzcNrPLzIt2AAcRGCAjMEDKDcTg2MUudnGTFwgJDJARGCAjMEBGYIDMX00akEYmuJ9MAAAAAElFTkSuQmCC",pi="data:image/png;base64,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",Gh=o.p+"26c813b3e19fb7c31c1d.png",Qh="data:image/png;base64,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",Yh="data:image/png;base64,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",Hh="data:image/png;base64,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",Vh="data:image/png;base64,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",Kh=e=>[{title:e("3D"),type:"3D",description:e("3DPanelDescription"),thumbnail:Gh,module:async()=>await Promise.all([o.e(7984),o.e(650),o.e(4455),o.e(4248)]).then(o.bind(o,74248))},{title:e("ROSDiagnosticsDetail"),type:"DiagnosticStatusPanel",description:e("ROSDiagnosticsDetailDescription"),thumbnail:Hh,module:async()=>await Promise.all([o.e(7955),o.e(7984),o.e(6160),o.e(2806),o.e(3097),o.e(6289),o.e(4369),o.e(6750),o.e(2421),o.e(1234),o.e(1194)]).then(o.bind(o,97287)),hasCustomToolbar:!0},{title:e("ROSDiagnosticSummary"),type:"DiagnosticSummary",description:e("ROSDiagnosticSummaryDescription"),thumbnail:Vh,module:async()=>await o.e(8867).then(o.bind(o,48867)),hasCustomToolbar:!0},{title:e("image"),type:"Image",description:e("imageDescription"),thumbnail:Rh,module:async()=>await Promise.all([o.e(7984),o.e(650),o.e(4455),o.e(4248),o.e(2657)]).then(o.bind(o,72657))},{title:e("indicator"),type:"Indicator",description:e("indicatorDescription"),thumbnail:jh,module:async()=>await o.e(5807).then(o.bind(o,15807))},{title:e("gauge"),type:"Gauge",description:e("gaugeDescription"),thumbnail:wh,module:async()=>await o.e(9235).then(o.bind(o,9235))},{title:e("teleop"),type:"Teleop",description:e("teleopDescription"),thumbnail:pi,module:async()=>await o.e(5144).then(o.bind(o,55144))},{title:"Mower",type:"Mower",description:"Teleoperate a robot over a live connection.",thumbnail:pi,module:async()=>await o.e(4446).then(o.bind(o,24446))},{title:e("map"),type:"map",description:e("mapDescription"),thumbnail:Oh,module:async()=>await Promise.all([o.e(6699),o.e(6503)]).then(o.bind(o,6503))},{title:e("parameters"),type:"Parameters",description:e("parametersDescription"),thumbnail:kh,module:async()=>await Promise.all([o.e(6289),o.e(6060)]).then(o.bind(o,16060))},{title:e("plot"),type:"Plot",description:e("plotDescription"),thumbnail:Zh,module:async()=>await Promise.all([o.e(7955),o.e(7984),o.e(6160),o.e(2806),o.e(3097),o.e(6750),o.e(2421)]).then(o.bind(o,62421))},{title:e("publish"),type:"Publish",description:e("publishDescription"),thumbnail:ui,module:async()=>await o.e(1815).then(o.bind(o,11815))},{title:e("callService"),type:"CallService",description:e("callServiceDescription"),thumbnail:ui,module:async()=>await o.e(9701).then(o.bind(o,59701))},{title:e("rawMessages"),type:"RawMessages",description:e("rawMessagesDescription"),thumbnail:Fh,module:async()=>await Promise.all([o.e(7955),o.e(7984),o.e(6160),o.e(2806),o.e(650),o.e(3097),o.e(6750),o.e(2421),o.e(1234),o.e(3949)]).then(o.bind(o,52226)),hasCustomToolbar:!0},{title:e("log"),type:"RosOut",description:e("logDescription"),thumbnail:Lh,module:async()=>await o.e(7221).then(o.bind(o,87221)),hasCustomToolbar:!0},{title:e("stateTransitions"),type:"StateTransitions",description:e("stateTransitionsDescription"),thumbnail:Uh,module:async()=>await Promise.all([o.e(7955),o.e(7984),o.e(6160),o.e(2806),o.e(3097),o.e(6750),o.e(2421),o.e(1234),o.e(9839)]).then(o.bind(o,11234))},{title:e("table"),type:"Table",description:e("tableDescription"),thumbnail:Wh,module:async()=>await Promise.all([o.e(1340),o.e(4933)]).then(o.bind(o,44933)),hasCustomToolbar:!0},{title:e("topicGraph"),type:"TopicGraph",description:e("topicGraphDescription"),thumbnail:Qh,module:async()=>await Promise.all([o.e(1961),o.e(1015)]).then(o.bind(o,71015))},{title:e("dataSourceInfo"),type:"SourceInfo",description:e("dataSourceInfoDescription"),thumbnail:Bh,module:async()=>await o.e(1739).then(o.bind(o,31739))},{title:e("variableSlider"),type:"GlobalVariableSliderPanel",description:e("variableSliderDescription"),thumbnail:Yh,module:async()=>await Promise.all([o.e(1077),o.e(4585)]).then(o.bind(o,74585))},{title:e("userScripts"),type:"NodePlayground",description:e("userScriptsDescription"),thumbnail:Nh,module:async()=>await Promise.all([o.e(650),o.e(9308),o.e(7616),o.e(4942),o.e(1159)]).then(o.bind(o,66838))},{title:e("tab"),type:Cn.bm,description:e("tabDescription"),thumbnail:zh,module:async()=>await o.e(4216).then(o.bind(o,14216)),hasCustomToolbar:!0}],Xh=e=>[{title:e("studioPlaybackPerformance"),type:"PlaybackPerformance",description:e("studioPlaybackPerformanceDescription"),module:async()=>await o.e(6213).then(o.bind(o,86213))}];function $h(e){const[t=!1]=(0,qt.b)(ee.o.SHOW_DEBUG_PANELS),{t:s}=(0,X.$G)("panels"),a=(0,Sn.I)(f=>f.installedPanels),i=(0,l.useMemo)(()=>Object.values(a??{}).map(f=>{const m=`${f.extensionName}.${f.registration.name}`,y=w=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Dh._,{config:w.config,saveConfig:w.saveConfig,initPanel:f.registration.initPanel})});return y.panelType=m,y.defaultConfig={},{category:"misc",title:f.registration.name,type:m,module:async()=>({default:(0,Mh.Z)(y)}),extensionNamespace:f.extensionNamespace}}),[a]),r=(0,l.useMemo)(()=>({builtin:Kh(s),debug:Xh(s)}),[s]),c=(0,l.useMemo)(()=>[...r.builtin,...r.debug,...i],[i,r]),u=(0,l.useMemo)(()=>{const f=[...r.builtin];return t&&f.push(...r.debug),f.push(...i),f},[t,i,r]),p=(0,l.useMemo)(()=>{const f=new Map;for(const m of c){const y=m.type;f.set(y,m)}return f},[c]),h=(0,l.useMemo)(()=>({getPanels(){return u},getPanelByType(f){return p.get(f)}}),[p,u]);return(0,n.jsx)(To.Z.Provider,{value:h,children:e.children})}var Yo=o(33853);const Jh=(0,N.ZL)()(e=>({button:{textAlign:"left",justifyContent:"flex-start",padding:e.spacing(2),gap:e.spacing(1.5),borderColor:e.palette.divider,height:"100%"},paper:{maxWidth:480}}));function qh(){const{classes:e}=Jh(),[t,s]=(0,at.b)(ee.o.LAUNCH_PREFERENCE),[a,i]=(0,L.UG)(ee.o.LAUNCH_PREFERENCE),[r,c]=(0,l.useState)(t!=null);async function u(){i(St.WEB),await s(r?St.WEB:void 0)}async function p(){i(St.DESKTOP),await s(r?St.DESKTOP:void 0)}function h(){c(!r)}const f=[{key:St.WEB,primary:"Web",secondary:"Requires Chrome v76+",onClick:()=>void u()},{key:St.DESKTOP,primary:"Desktop App",secondary:"For Linux, Windows, and macOS",onClick:()=>void p()}];return(0,n.jsxs)(Ot.Z,{open:!0,classes:{paper:e.paper},children:[(0,n.jsx)(U.Z,{paddingX:2,paddingTop:3,children:(0,n.jsx)(xe.Z,{align:"center",variant:"h2",fontWeight:600,children:"Launch Foxglove Studio"})}),(0,n.jsx)(Dn.Z,{children:(0,n.jsxs)(Yo.ZP,{container:!0,spacing:1,children:[f.map(m=>(0,n.jsx)(Yo.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)(oe.Z,{className:e.button,fullWidth:!0,color:"inherit",variant:"outlined",size:"large",onClick:m.onClick,children:(0,n.jsxs)(U.Z,{flex:"auto",zeroMinWidth:!0,children:[(0,n.jsx)(xe.Z,{variant:"subtitle1",color:"text.primary",children:m.primary}),(0,n.jsx)(xe.Z,{variant:"body2",color:"text.secondary",children:m.secondary})]})})},m.key)),(0,n.jsx)(Yo.ZP,{item:!0,xs:12,children:(0,n.jsx)(ys.Z,{label:"Remember my preference",control:(0,n.jsx)(qn.Z,{color:"primary",checked:r,onChange:h})})})]})})]})}function _h(){const[,e]=(0,L.UG)(ee.o.LAUNCH_PREFERENCE),t=new URL(window.location.href);t.searchParams.delete("openIn");function s(){e(St.WEB),window.location.href=t.href}return(0,l.useEffect)(()=>{const a=new URL("foxglove://open");t.searchParams.forEach((i,r)=>{if(r&&i)switch(a.searchParams.set(r,i),r){case"ds":a.searchParams.set("type",i);break;case"ds.deviceId":a.searchParams.set("deviceId",i);break;case"ds.importId":a.searchParams.set("importId",i);break;case"ds.end":a.searchParams.set("end",i);break;case"ds.start":a.searchParams.set("start",i);break;case"ds.url":a.searchParams.set("url",i);break;case"time":a.searchParams.set("seekTo",i);break}}),window.location.href=a.href}),(0,n.jsx)(U.Z,{alignItems:"center",justifyContent:"center",fullHeight:!0,children:(0,n.jsxs)(U.Z,{alignItems:"center",justifyContent:"center",fullHeight:!0,gap:2.5,style:{maxWidth:480},children:[(0,n.jsx)(xe.Z,{align:"center",variant:"h2",fontWeight:600,children:"Launching Foxglove Studio\u2026"}),(0,n.jsx)(xe.Z,{align:"center",fontWeight:600,children:"We\u2019ve directed you to the desktop app."}),(0,n.jsxs)(U.Z,{gap:.5,children:[(0,n.jsxs)(xe.Z,{align:"center",children:["You can also"," ",(0,n.jsx)(sn.Z,{color:"primary",underline:"hover",onClick:s,children:"open this link in your browser"}),"."]}),(0,n.jsxs)(xe.Z,{align:"center",children:["Don\u2019t have the app installed?\xA0",(0,n.jsx)(sn.Z,{color:"primary",underline:"hover",href:"https://foxglove.dev/download",target:"_blank",children:"Download Foxglove Studio"})]})]})]})})}function eg(e){const[t]=(0,at.b)(ee.o.LAUNCH_PREFERENCE),[s]=(0,L.UG)(ee.o.LAUNCH_PREFERENCE),a=new URL(window.location.href);let i=s??a.searchParams.get("openIn")??t;switch(i){case St.WEB:case St.DESKTOP:case St.ASK:break;default:i=St.WEB}const r=Array.from(a.searchParams.entries()).length>0;return i===St.ASK&&r?(0,n.jsx)(qh,{}):i===St.DESKTOP&&r?(0,n.jsx)(_h,{}):(0,n.jsx)(n.Fragment,{children:e.children})}function fi(e){if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))return e.preventDefault(),!1}function tg(e){const{appConfiguration:t,dataSources:s,extensionLoaders:a,nativeAppMenu:i,nativeWindow:r,deepLinks:c,enableLaunchPreferenceScreen:u,enableGlobalCss:p=!1,extraProviders:h}=e,f=[(0,n.jsx)(we,{}),(0,n.jsx)(ei.V,{}),(0,n.jsx)(xh,{}),(0,n.jsx)(Ih,{}),(0,n.jsx)(Th,{loaders:a}),(0,n.jsx)(ih,{playerSources:s}),(0,n.jsx)($,{})];i&&f.push((0,n.jsx)(Fp.Provider,{value:i})),r&&f.push((0,n.jsx)(Sf.Provider,{value:r})),h&&f.unshift(...h),f.unshift((0,n.jsx)(gh,{})),f.unshift((0,n.jsx)(ce,{}));const m=u===!0?eg:l.Fragment;return(0,l.useEffect)(()=>(document.addEventListener("contextmenu",fi),()=>{document.removeEventListener("contextmenu",fi)}),[]),(0,n.jsx)(mh.Z.Provider,{value:t,children:(0,n.jsxs)(yf,{children:[p&&(0,n.jsx)(D,{}),(0,n.jsx)(vf.Z,{children:(0,n.jsx)(Ls.Z,{children:(0,n.jsx)(m,{children:(0,n.jsxs)(Ef,{providers:f,children:[(0,n.jsx)(bf,{}),(0,n.jsx)(uh,{}),(0,n.jsx)(E.W,{backend:F.PD,children:(0,n.jsx)(l.Suspense,{fallback:(0,n.jsx)(n.Fragment,{}),children:(0,n.jsx)($h,{children:(0,n.jsx)(hf,{deepLinks:c,appBarLeftInset:e.appBarLeftInset,onAppBarDoubleClick:e.onAppBarDoubleClick,showCustomWindowControls:e.showCustomWindowControls,isMaximized:e.isMaximized,onMinimizeWindow:e.onMinimizeWindow,onMaximizeWindow:e.onMaximizeWindow,onUnmaximizeWindow:e.onUnmaximizeWindow,onCloseWindow:e.onCloseWindow})})})})]})})})})]})})}var ng=o(1313),sg=o.n(ng),og=o(36537);const ag=null,ig=(()=>{function e(s){const a=["span",{}];let i=0,r=s.length%3;for(r===0&&(r=3);i<s.length;)a.push(["span",{style:r<s.length?"margin-right: 2px;":""},s.substring(i,r)]),i=r,r+=3;return a}return{header(s){const a=s;if(!(0,te.isTime)(s)||a.sec<0||a.nsec<0||a.nsec>=1e9||!Number.isInteger(a.sec)||!Number.isInteger(a.nsec))return ag;const i=a.nsec.toFixed().padStart(9,"0"),r=sg()(`${a.sec}.${i}`);return["span",{style:`color: hsl(${r()*360}deg, ${40+r()*60}%, ${20+r()*40}%);`},e(String(a.sec)),".",e(i)]},hasBody(){return!1}}})();function rg(){window.devtoolsFormatters=(0,og.N)(window).devtoolsFormatters??[],window.devtoolsFormatters.push(ig)}var lg=o(64578);async function cg(){return await Promise.all([...document.fonts].map(async e=>await e.load()))}var Ho=o(24991),dg=o(42754);const ug={addPanel:"Add panel",noLayoutSelected:"<selectLayoutLink>Select a layout</selectLayoutLink> to get started!",noPanelsMatchSearchCriteria:"No panels match search criteria.",searchPanels:"Search panels",selectPanelToAddToLayout:"Select a panel below to add it to your layout."},pg={about:"About",exploreSampleData:"Explore sample data",open:"Open\u2026",openLocalFile:"Open local file\u2026",openConnection:"Open connection\u2026",noDataSource:"No data source",joinOurSlack:"Join our Slack",recentDataSources:"Recent data sources",hideLeftSidebar:"Hide left sidebar",showLeftSidebar:"Show left sidebar",hideRightSidebar:"Hide right sidebar",showRightSidebar:"Show right sidebar",viewOurDocs:"View our docs",file:"File",view:"View",help:"Help",signIn:"Sign in",unknown:"unknown",importLayoutFromFile:"Import layout from file\u2026",exportLayoutToFile:"Export layout to file\u2026"},fg={settings:"Settings",colorScheme:"Color scheme",dark:"Dark",light:"Light",followSystem:"Follow system",language:"Language",displayTimestampsIn:"Display timestamps in",timestampFormat:"Timestamp format",messageRate:"Message rate",openLinksIn:"Open links in",webApp:"Web app",desktopApp:"Desktop app",askEachTime:"Ask each time",general:"General",ros:"ROS",privacy:"Privacy",privacyDescription:"Changes will take effect the next time Foxglove Studio is launched.",extensions:"Extensions",about:"About",sendAnonymizedUsageData:"Send anonymized usage data to help us improve Foxglove Studio",sendAnonymizedCrashReports:"Send anonymized crash reports",experimentalFeatures:"Experimental features",experimentalFeaturesDescription:"These features are unstable and not recommended for daily use.",noExperimentalFeatures:"Currently there are no experimental features.",studioDebugPanels:"Studio debug panels",studioDebugPanelsDescription:"Show Foxglove Studio debug panels in the \u201CAdd panel\u201D list.",memoryUseIndicator:"Memory use indicator",memoryUseIndicatorDescription:"Show the app memory use in the sidebar.",newNavigation:"New navigation",newNavigationDescription:"New top navigation bar.",restartTheAppForChangesToTakeEffect:" Restart the app for changes to take effect.",layoutDebugging:"Layout debugging",layoutDebuggingDescription:"Show extra controls for developing and debugging layout storage."},hg={dataSource:"Data source",currentSource:"Current source",waitingForConnection:"Waiting for connection\u2026",startTime:"Start time",endTime:"End time",duration:"Duration"},gg={foxglove:"Foxglove",learnMore:"Learn more"},mg={title:"Incompatible layout version",desktopText:"This layout was created with a newer version of Foxglove Studio. Please update to the latest version at ",webText:"This layout was created with a newer version of Foxglove Studio. Please refresh your browser."},yg={topicError:"Topic {{topic}} is not available",topic:"Topic"},vg={newToFoxgloveStudio:"New to Foxglove Studio?",newToFoxgloveStudioDescription:"Start by exploring a sample dataset or checking out our documentation.",exploreSampleData:"Explore sample data",viewOurDocs:"View our docs",joinOurCommunity:"Join our community",joinOurCommunityDescription:"Join us on Slack or GitHub to get help, make feature requests, and report bugs.",joinOurSlack:"Join our Slack",openAGitHubIssue:"Open a GitHub issue",needHelp:"Need help?",needHelpDescription:"View our documentation, or check out the tutorials on the Foxglove blog.",seeTutorials:"See tutorials",collaborateTitle:"Accelerate development with Foxglove Data Platform",secureStorageOfData:"Securely store petabytes of ROS or custom data",convenientWebInterface:"Use a convenient web interface to tag, search, and retrieve data at lightning speed",canBeShared:"Share data files, visualization layouts, and custom extensions with teammates",createAFreeAccount:"Create a free account",signIn:"Sign in",learnMore:"Learn more",startCollaborating:"Start collaborating with your Foxglove organization",startCollaboratingDescription:"Make the most of your Foxglove account \u2013 whether you want to dive deep on your data or share tools with your teammates.",uploadToDataPlatform:"Upload to Data Platform",shareLayouts:"Share layouts",openLocalFile:"Open local file",openLocalFileDescription:"Visualize data directly from your local filesystem.",openUrl:"Upload and share data",openUrlDescription:"Use Foxglove Data Platform to share data with your team.",openConnection:"Open connection",openConnectionDescription:"Connect to a live robot or server.",openDataSource:"Open data source",recentDataSources:"Recent data sources"},Ag={instructions:"Please update to the latest version of the app.",warning:"This layout requires a more recent version of this panel."},bg={"3D":"3D","3DPanelDescription":"Display markers, camera images, meshes, URDFs, and more in a 3D scene.",callService:"Call Service",callServiceDescription:"Call a service and view the service call result",dataSourceInfo:"Data Source Info",dataSourceInfoDescription:"View details like topics and timestamps for the current data source.",gauge:"Gauge",gaugeDescription:"Display a colored gauge based on a continuous value.",image:"Image",imageLegacy:"Image (Legacy)",imageDescription:"Display annotated images.",indicator:"Indicator",indicatorDescription:"Display a colored and/or textual indicator based on a threshold value.",log:"Log",logDescription:"Display logs by node and severity level.",map:"Map",mapDescription:"Display points on a map.",parameters:"Parameters",parametersDescription:"Read and set parameters for a data source.",plot:"Plot",plotDescription:"Plot numerical values over time or other values.",publish:"Publish",publishDescription:"Publish messages to the data source (live connections only).",rawMessages:"Raw Messages",rawMessagesDescription:"Inspect topic messages.",ROSDiagnosticsDetail:"Diagnostics \u2013 Detail (ROS)",ROSDiagnosticsDetailDescription:"Display ROS DiagnosticArray messages for a specific hardware_id.",ROSDiagnosticSummary:"Diagnostics \u2013 Summary (ROS)",ROSDiagnosticSummaryDescription:"Display a summary of all ROS DiagnosticArray messages.",stateTransitions:"State Transitions",stateTransitionsDescription:"Track when values change over time.",studioPlaybackPerformance:"Studio - Playback Performance",studioPlaybackPerformanceDescription:"Display playback and data-streaming performance statistics.",tab:"Tab",tabDescription:"Group panels together in a tabbed interface.",table:"Table",tableDescription:"Display topic messages in a tabular format.",teleop:"Teleop",teleopDescription:"Teleoperate a robot over a live connection.",topicGraph:"Topic Graph",topicGraphDescription:"Display a graph of active nodes, topics, and services.",userScripts:"User Scripts",userScriptsDescription:"Write custom data transformations in TypeScript. Previously known as Node Playground.",variableSlider:"Variable Slider",variableSliderDescription:"Update numerical variable values for a layout."},xg={importOrExportSettings:"Import/export settings",importOrExportSettingsWithEllipsis:"Import/export settings...",resetToDefaults:"Reset to defaults",panelSettings:"Panel settings",selectAPanelToEditItsSettings:"Select a panel to edit its settings.",loadingPanelSettings:"Loading panel settings...",currentSettingsPanelName:"{{title}} panel settings",panelName:"{{title}} panel",panelDoesNotHaveSettings:"This panel does not have any settings",unknown:"Unknown"},Eg={deleteSeries:"Delete series",messagePath:"Message path",label:"Label",color:"Color",timestamp:"Timestamp",receiveTime:"Receive Time",headerStamp:"Header Stamp",series:"Series",addSeries:"Add series",maxYError:"Y max must be greater than Y min.",maxXError:"X max must be greater than X min.",general:"General",syncWithOtherPlots:"Sync with other plots",legend:"Legend",position:"Position",floating:"Floating",left:"Left",top:"Top",hidden:"Hidden",showValues:"Show values",yAxis:"Y Axis",showLabels:"Show labels",showLine:"Show lines",min:"Min",max:"Max",xAxis:"X Axis",value:"Value",index:"Index",currentPath:"Path (current)",accumulatedPath:"Path (accumulated)",secondsRange:"Range (seconds)"},Cg={searchPanelSettings:"Search panel settings\u2026",title:"Title",clearSearch:"Clear search",labels:"Labels",showAll:"Show All",hideAll:"Hide All",filterList:"Filter list",filterListHelp:"Filter list by visibility",listAll:"List all",listVisible:"List visible",listInvisible:"List invisible",general:"General"},Sg={maxXError:"X max must be greater than X min.",min:"Min",max:"Max",xAxis:"X Axis",secondsRange:"Range (seconds)"},Tg={frame:"Frame",color:"Color",position:"Position",lineWidth:"Line width",rotation:"Rotation",reset:"Reset",displayFrame:"Display frame",displayFrameHelp:"The coordinate frame to place the camera in. The camera position and orientation will be relative to the origin of this frame.",followMode:"Follow mode",followModeHelp:"Change the camera behavior during playback to follow the display frame or not.",pose:"Pose",fixed:"Fixed",frameNotFound:"Frame {{frameId}} not found",noCoordinateFramesFound:"No coordinate frames found",enablePreloading:"Enable preloading",lineColor:"Line color",axisScale:"Axis scale",labelSize:"Label size",labels:"Labels",editable:"Editable",settings:"Settings",transforms:"Transforms",showAll:"Show All",hideAll:"Hide All",scene:"Scene",renderStats:"Render stats",debugPicking:"Debug picking",background:"Background",labelScale:"Label scale",labelScaleHelp:"Scale factor to apply to all labels",ignoreColladaUpAxis:"Ignore COLLADA <up_axis>",ignoreColladaUpAxisHelp:"Match the behavior of rviz by ignoring the <up_axis> tag in COLLADA files",takeEffectAfterReboot:"This setting requires a restart to take effect",meshUpAxis:"Mesh up axis",meshUpAxisHelp:"The direction to use as \u201Cup\u201D when loading meshes without orientation info (STL and OBJ)",YUp:"Y-up",ZUp:"Z-up",view:"View",distance:"Distance",perspective:"Perspective",target:"Target",theta:"Theta",phi:"Phi",fovy:"Y-Axis FOV",near:"Near",far:"Far",syncCamera:"Sync camera",syncCameraHelp:"Sync the camera with other panels that also have this setting enabled.",topics:"Topics",customLayers:"Custom layers",addURDF:"Add URDF",size:"Size",divisions:"Divisions",grid:"Grid",delete:"Delete",addGrid:"Add Grid",imageAnnotations:"Image annotations",resetView:"Reset view"},Pg={newWindow:"New Window",settings:"Settings\u2026",file:"File",edit:"Edit",view:"View",advanced:"Advanced",inspectSharedWorker:"Inspect Shared Worker\u2026",noSharedWorkers:"No Shared Workers",checkForUpdates:"Check for Updates\u2026"},Ig={settings:"\u8A2D\u5B9A",colorScheme:"\u30AB\u30E9\u30FC\u30B9\u30AD\u30FC\u30E0",dark:"\u30C0\u30FC\u30AF",light:"\u30E9\u30A4\u30C8",followSystem:"\u30B7\u30B9\u30C6\u30E0\u306B\u5F93\u3046",language:"\u8A00\u8A9E",displayTimestampsIn:"\u30BF\u30A4\u30E0\u30B9\u30BF\u30F3\u30D7\u3092\u8868\u793A",timestampFormat:"\u30BF\u30A4\u30E0\u30B9\u30BF\u30F3\u30D7\u5F62\u5F0F",messageRate:"\u30E1\u30C3\u30BB\u30FC\u30B8\u30EC\u30FC\u30C8",openLinksIn:"\u30EA\u30F3\u30AF\u3092\u958B\u304F",webApp:"\u30A6\u30A7\u30D6\u30A2\u30D7\u30EA",desktopApp:"\u30C7\u30B9\u30AF\u30C8\u30C3\u30D7\u30A2\u30D7\u30EA",askEachTime:"\u6BCE\u56DE\u78BA\u8A8D\u3059\u308B",general:"\u4E00\u822C",ros:"ROS",privacy:"\u30D7\u30E9\u30A4\u30D0\u30B7\u30FC",privacyDescription:"\u5909\u66F4\u306F\u6B21\u56DE\u306EFoxglove Studio\u8D77\u52D5\u6642\u306B\u6709\u52B9\u306B\u306A\u308A\u307E\u3059\u3002",extensions:"\u62E1\u5F35\u6A5F\u80FD",about:"\u60C5\u5831",sendAnonymizedUsageData:"\u533F\u540D\u5316\u3055\u308C\u305F\u4F7F\u7528\u30C7\u30FC\u30BF\u3092\u9001\u4FE1\u3057\u3066\u3001Foxglove Studio\u306E\u6539\u5584\u306B\u5F79\u7ACB\u3066\u308B",sendAnonymizedCrashReports:"\u533F\u540D\u5316\u3055\u308C\u305F\u30AF\u30E9\u30C3\u30B7\u30E5\u30EC\u30DD\u30FC\u30C8\u3092\u9001\u4FE1",experimentalFeatures:"\u5B9F\u9A13\u7684\u6A5F\u80FD",experimentalFeaturesDescription:"\u3053\u308C\u3089\u306E\u6A5F\u80FD\u306F\u6319\u52D5\u304C\u4E0D\u5B89\u5B9A\u306A\u305F\u3081\u3001\u65E5\u3005\u306E\u5229\u7528\u306F\u63A8\u5968\u3055\u308C\u307E\u305B\u3093\u3002",noExperimentalFeatures:"\u73FE\u5728\u3001\u5B9F\u9A13\u7684\u6A5F\u80FD\u306F\u3042\u308A\u307E\u305B\u3093\u3002",studioDebugPanels:"Studio\u30C7\u30D0\u30C3\u30B0\u30D1\u30CD\u30EB",studioDebugPanelsDescription:"\u300C\u30D1\u30CD\u30EB\u3092\u8FFD\u52A0\u300D\u30EA\u30B9\u30C8\u306BFoxglove Studio\u30C7\u30D0\u30C3\u30B0\u30D1\u30CD\u30EB\u3092\u8868\u793A\u3059\u308B\u3002",memoryUseIndicator:"\u30E1\u30E2\u30EA\u4F7F\u7528\u30A4\u30F3\u30B8\u30B1\u30FC\u30BF",memoryUseIndicatorDescription:"\u30B5\u30A4\u30C9\u30D0\u30FC\u306B\u30A2\u30D7\u30EA\u306E\u30E1\u30E2\u30EA\u4F7F\u7528\u91CF\u3092\u8868\u793A\u3059\u308B\u3002",newNavigation:"\u65B0\u3057\u3044\u30CA\u30D3\u30B2\u30FC\u30B7\u30E7\u30F3",newNavigationDescription:"\u65B0\u3057\u3044\u30C8\u30C3\u30D7\u30CA\u30D3\u30B2\u30FC\u30B7\u30E7\u30F3\u30D0\u30FC\u3002",restartTheAppForChangesToTakeEffect:"\u5909\u66F4\u3092\u53CD\u6620\u3059\u308B\u306B\u306F\u3001\u30A2\u30D7\u30EA\u3092\u518D\u8D77\u52D5\u3057\u3066\u304F\u3060\u3055\u3044\u3002",layoutDebugging:"\u30EC\u30A4\u30A2\u30A6\u30C8\u30C7\u30D0\u30C3\u30B0",layoutDebuggingDescription:"\u30EC\u30A4\u30A2\u30A6\u30C8\u30B9\u30C8\u30EC\u30FC\u30B8\u306E\u958B\u767A\u304A\u3088\u3073\u30C7\u30D0\u30C3\u30B0\u7528\u306E\u8FFD\u52A0\u30B3\u30F3\u30C8\u30ED\u30FC\u30EB\u3092\u8868\u793A\u3059\u308B\u3002"},Mg={foxglove:"Foxglove",learnMore:"\u3082\u3063\u3068\u5B66\u3076"},Dg={"3D":"3D","3DPanelDescription":"\u30DE\u30FC\u30AB\u30FC\u3084\u30AB\u30E1\u30E9\u6620\u50CF\u3001\u30E1\u30C3\u30B7\u30E5\u3001URDF\u306A\u3069\u30923D\u30B7\u30FC\u30F3\u3067\u8868\u793A\u3057\u307E\u3059\u3002",dataSourceInfo:"\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\u60C5\u5831",dataSourceInfoDescription:"\u73FE\u5728\u306E\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\u306B\u95A2\u3059\u308B\u30C8\u30D4\u30C3\u30AF\u3084\u30BF\u30A4\u30E0\u30B9\u30BF\u30F3\u30D7\u306A\u3069\u306E\u8A73\u7D30\u3092\u8868\u793A\u3057\u307E\u3059\u3002",gauge:"\u30B2\u30FC\u30B8",gaugeDescription:"\u9023\u7D9A\u5024\u306B\u57FA\u3065\u304F\u8272\u4ED8\u304D\u306E\u30B2\u30FC\u30B8\u3092\u8868\u793A\u3057\u307E\u3059\u3002",image:"\u753B\u50CF",imageLegacy:"\u753B\u50CF (Legacy)",imageDescription:"\u6CE8\u91C8\u4ED8\u304D\u306E\u753B\u50CF\u3092\u8868\u793A\u3057\u307E\u3059\u3002",indicator:"\u30A4\u30F3\u30B8\u30B1\u30FC\u30BF\u30FC",indicatorDescription:"\u95BE\u5024\u306B\u57FA\u3065\u3044\u305F\u8272\u3084\u30C6\u30AD\u30B9\u30C8\u3067\u8868\u793A\u3055\u308C\u308B\u30A4\u30F3\u30B8\u30B1\u30FC\u30BF\u30FC\u3092\u8868\u793A\u3057\u307E\u3059\u3002",log:"\u30ED\u30B0",logDescription:"\u30CE\u30FC\u30C9\u3068\u91CD\u8981\u5EA6\u30EC\u30D9\u30EB\u5225\u306B\u30ED\u30B0\u3092\u8868\u793A\u3057\u307E\u3059\u3002",map:"\u5730\u56F3",mapDescription:"\u5730\u56F3\u4E0A\u306B\u70B9\u3092\u8868\u793A\u3057\u307E\u3059\u3002",parameters:"\u30D1\u30E9\u30E1\u30FC\u30BF\u30FC",parametersDescription:"\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\u306E\u30D1\u30E9\u30E1\u30FC\u30BF\u30FC\u3092\u8AAD\u307F\u53D6\u308A\u3001\u8A2D\u5B9A\u3057\u307E\u3059\u3002",plot:"\u30D7\u30ED\u30C3\u30C8",plotDescription:"\u6642\u9593\u307E\u305F\u306F\u4ED6\u306E\u5024\u306B\u5BFE\u3059\u308B\u6570\u5024\u3092\u30D7\u30ED\u30C3\u30C8\u3057\u307E\u3059\u3002",publish:"\u30D1\u30D6\u30EA\u30C3\u30B7\u30E5",publishDescription:"\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\u306B\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u30D1\u30D6\u30EA\u30C3\u30B7\u30E5\u3057\u307E\u3059\uFF08\u30E9\u30A4\u30D6\u63A5\u7D9A\u306E\u307F\uFF09\u3002 ",rawMessages:"\u751F\u30C7\u30FC\u30BF\u306E\u30E1\u30C3\u30BB\u30FC\u30B8",rawMessagesDescription:"\u30C8\u30D4\u30C3\u30AF\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u691C\u67FB\u3057\u307E\u3059\u3002",ROSDiagnosticsDetail:"\u8A3A\u65AD - \u8A73\u7D30 (ROS)",ROSDiagnosticsDetailDescription:"\u7279\u5B9A\u306Ehardware_id\u306EROS DiagnosticArray\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3057\u307E\u3059\u3002",ROSDiagnosticSummary:"\u8A3A\u65AD - \u6982\u8981 (ROS)",ROSDiagnosticSummaryDescription:"\u3059\u3079\u3066\u306EROS DiagnosticArray\u30E1\u30C3\u30BB\u30FC\u30B8\u306E\u6982\u8981\u3092\u8868\u793A\u3057\u307E\u3059\u3002",stateTransitions:"\u30B9\u30C6\u30FC\u30C8\u30C8\u30E9\u30F3\u30B8\u30B7\u30E7\u30F3",stateTransitionsDescription:"\u6642\u9593\u3068\u3068\u3082\u306B\u5024\u304C\u5909\u5316\u3059\u308B\u3068\u304D\u3092\u8FFD\u8DE1\u3057\u307E\u3059\u3002",studioPlaybackPerformance:"Studio - \u518D\u751F\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9",studioPlaybackPerformanceDescription:"\u518D\u751F\u304A\u3088\u3073\u30C7\u30FC\u30BF\u30B9\u30C8\u30EA\u30FC\u30DF\u30F3\u30B0\u306E\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9\u7D71\u8A08\u60C5\u5831\u3092\u8868\u793A\u3057\u307E\u3059\u3002",tab:"\u30BF\u30D6",tabDescription:"\u8907\u6570\u306E\u30D1\u30CD\u30EB\u3092\u30BF\u30D6\u3067\u30B0\u30EB\u30FC\u30D7\u5316\u3057\u3066\u8868\u793A\u3057\u307E\u3059\u3002",table:"\u30C6\u30FC\u30D6\u30EB",tableDescription:"\u30C8\u30D4\u30C3\u30AF\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u5F62\u5F0F\u3067\u8868\u793A\u3057\u307E\u3059\u3002",teleop:"Teleop",teleopDescription:"\u30E9\u30A4\u30D6\u63A5\u7D9A\u3067\u30ED\u30DC\u30C3\u30C8\u3092\u64CD\u4F5C\u3057\u307E\u3059\u3002",topicGraph:"\u30C8\u30D4\u30C3\u30AF\u30B0\u30E9\u30D5",topicGraphDescription:"\u30A2\u30AF\u30C6\u30A3\u30D6\u306A\u30CE\u30FC\u30C9\u3001\u30C8\u30D4\u30C3\u30AF\u3001\u30B5\u30FC\u30D3\u30B9\u306E\u30B0\u30E9\u30D5\u3092\u8868\u793A\u3057\u307E\u3059\u3002",userScripts:"\u30E6\u30FC\u30B6\u30FC\u30B9\u30AF\u30EA\u30D7\u30C8",userScriptsDescription:"TypeScript\u3067\u30AB\u30B9\u30BF\u30E0\u30C7\u30FC\u30BF\u5909\u63DB\u3092\u8A18\u8FF0\u3057\u307E\u3059\u3002\u4EE5\u524D\u306FNode Playground\u3068\u3057\u3066\u77E5\u3089\u308C\u3066\u3044\u307E\u3057\u305F\u3002",variableSlider:"\u5909\u6570\u30B9\u30E9\u30A4\u30C0\u30FC",variableSliderDescription:"\u30EC\u30A4\u30A2\u30A6\u30C8\u306E\u6570\u5024\u5909\u6570\u3092\u66F4\u65B0\u3057\u307E\u3059\u3002"},Bg={addPanel:"\u30D1\u30CD\u30EB\u3092\u8FFD\u52A0",noLayoutSelected:"<selectLayoutLink>\u30EC\u30A4\u30A2\u30A6\u30C8\u3092\u9078\u629E</selectLayoutLink>\u3057\u3066\u59CB\u3081\u307E\u3057\u3087\u3046\uFF01",noPanelsMatchSearchCriteria:"\u691C\u7D22\u6761\u4EF6\u306B\u4E00\u81F4\u3059\u308B\u30D1\u30CD\u30EB\u304C\u3042\u308A\u307E\u305B\u3093\u3002",searchPanels:"\u30D1\u30CD\u30EB\u3092\u691C\u7D22",selectPanelToAddToLayout:"\u4E0B\u306E\u30D1\u30CD\u30EB\u3092\u9078\u629E\u3057\u3066\u30EC\u30A4\u30A2\u30A6\u30C8\u306B\u8FFD\u52A0\u3057\u3066\u304F\u3060\u3055\u3044\u3002"},wg={importOrExportSettings:"\u8A2D\u5B9A\u306E\u30A4\u30F3\u30DD\u30FC\u30C8/\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",importOrExportSettingsWithEllipsis:"\u8A2D\u5B9A\u306E\u30A4\u30F3\u30DD\u30FC\u30C8/\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8...",resetToDefaults:"\u30C7\u30D5\u30A9\u30EB\u30C8\u306B\u30EA\u30BB\u30C3\u30C8",panelSettings:"\u30D1\u30CD\u30EB\u8A2D\u5B9A",selectAPanelToEditItsSettings:"\u7DE8\u96C6\u3059\u308B\u30D1\u30CD\u30EB\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002",loadingPanelSettings:"\u30D1\u30CD\u30EB\u8A2D\u5B9A\u3092\u8AAD\u307F\u8FBC\u3093\u3067\u3044\u307E\u3059...",currentSettingsPanelName:"{{title}}\u30D1\u30CD\u30EB\u306E\u8A2D\u5B9A",panelName:"{{title}}\u30D1\u30CD\u30EB",panelDoesNotHaveSettings:"\u3053\u306E\u30D1\u30CD\u30EB\u306B\u306F\u8A2D\u5B9A\u304C\u3042\u308A\u307E\u305B\u3093\u3002",unknown:"\u4E0D\u660E"},Rg={topicError:"{{topic}}\u3068\u3044\u3046\u30C8\u30D4\u30C3\u30AF\u306F\u5229\u7528\u3067\u304D\u307E\u305B\u3093\u3002",topic:"\u30C8\u30D4\u30C3\u30AF"},jg={deleteSeries:"\u30B7\u30EA\u30FC\u30BA\u3092\u524A\u9664\u3059\u308B",messagePath:"\u30E1\u30C3\u30BB\u30FC\u30B8\u30D1\u30B9",label:"\u30E9\u30D9\u30EB",color:"\u30AB\u30E9\u30FC",timestamp:"\u30BF\u30A4\u30E0\u30B9\u30BF\u30F3\u30D7",receiveTime:"\u53D7\u4FE1\u6642\u9593",headerStamp:"\u30D8\u30C3\u30C0\u30FC\u30B9\u30BF\u30F3\u30D7",series:"\u30B7\u30EA\u30FC\u30BA",addSeries:"\u30B7\u30EA\u30FC\u30BA\u3092\u8FFD\u52A0\u3059\u308B",maxYError:"Y\u6700\u5927\u5024\u306F\u3001Y\u6700\u5C0F\u5024\u3088\u308A\u5927\u304D\u304F\u306A\u3051\u308C\u3070\u306A\u308A\u307E\u305B\u3093\u3002",maxXError:"X\u6700\u5927\u5024\u306F\u3001X\u6700\u5C0F\u5024\u3088\u308A\u5927\u304D\u304F\u306A\u3051\u308C\u3070\u306A\u308A\u307E\u305B\u3093\u3002",general:"\u4E00\u822C\u7684\u306A",syncWithOtherPlots:"\u4ED6\u306E\u30D7\u30ED\u30C3\u30C8\u3068\u540C\u671F\u3059\u308B",legend:"\u51E1\u4F8B",position:"\u30DD\u30B8\u30B7\u30E7\u30F3",floating:"\u30D5\u30ED\u30FC\u30C6\u30A3\u30F3\u30B0",left:"\u5DE6",top:"\u4E0A",hidden:"\u96A0\u3059",showValues:"\u5024\u3092\u8868\u793A\u3059\u308B",yAxis:"Y\u8EF8",showLabels:"\u30E9\u30D9\u30EB\u3092\u8868\u793A\u3059\u308B",min:"\u6700\u5C0F",max:"\u6700\u5927",xAxis:"X\u8EF8",value:"\u5024",index:"\u30A4\u30F3\u30C7\u30C3\u30AF\u30B9",currentPath:"\u30D1\u30B9\uFF08\u73FE\u5728\uFF09",accumulatedPath:"\u30D1\u30B9\uFF08\u7D2F\u7A4D\uFF09",secondsRange:"\u7BC4\u56F2\uFF08\u79D2\u6570\uFF09"},Lg={dataSource:"\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9",currentSource:"\u73FE\u5728\u306E\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9",waitingForConnection:"\u63A5\u7D9A\u5F85\u6A5F\u4E2D\u2026",startTime:"\u958B\u59CB\u6642\u523B",endTime:"\u7D42\u4E86\u6642\u523B",duration:"\u6240\u8981\u6642\u9593"},Og={newToFoxgloveStudio:"Foxglove Studio\u3092\u521D\u3081\u3066\u3054\u5229\u7528\u3067\u3059\u304B\uFF1F",newToFoxgloveStudioDescription:"\u30B5\u30F3\u30D7\u30EB\u30C7\u30FC\u30BF\u30BB\u30C3\u30C8\u3092\u63A2\u7D22\u3057\u305F\u308A\u3001\u30C9\u30AD\u30E5\u30E1\u30F3\u30C6\u30FC\u30B7\u30E7\u30F3\u3092\u30C1\u30A7\u30C3\u30AF\u3057\u3066\u958B\u59CB\u3057\u3066\u304F\u3060\u3055\u3044\u3002",exploreSampleData:"\u30B5\u30F3\u30D7\u30EB\u30C7\u30FC\u30BF\u3092\u63A2\u7D22\u3059\u308B",viewOurDocs:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C6\u30FC\u30B7\u30E7\u30F3\u3092\u898B\u308B",joinOurCommunity:"\u30B3\u30DF\u30E5\u30CB\u30C6\u30A3\u306B\u53C2\u52A0\u3059\u308B",joinOurCommunityDescription:"Slack\u3084GitHub\u306B\u53C2\u52A0\u3057\u3066\u3001\u30D8\u30EB\u30D7\u3092\u5F97\u305F\u308A\u3001\u6A5F\u80FD\u30EA\u30AF\u30A8\u30B9\u30C8\u3092\u884C\u3063\u305F\u308A\u3001\u30D0\u30B0\u3092\u5831\u544A\u3057\u307E\u3057\u3087\u3046\u3002",joinOurSlack:"Slack\u306B\u53C2\u52A0\u3059\u308B",openAGitHubIssue:"GitHub\u306E\u554F\u984C\u3092\u958B\u304F",needHelp:"\u30D8\u30EB\u30D7\u304C\u5FC5\u8981\u3067\u3059\u304B\uFF1F",needHelpDescription:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C6\u30FC\u30B7\u30E7\u30F3\u3092\u898B\u305F\u308A\u3001Foxglove\u30D6\u30ED\u30B0\u306E\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u3092\u30C1\u30A7\u30C3\u30AF\u3057\u3066\u307F\u307E\u3057\u3087\u3046\u3002",seeTutorials:"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u3092\u898B\u308B",collaborateTitle:"Foxglove Data Platform\u3067\u958B\u767A\u3092\u52A0\u901F\u3059\u308B",secureStorageOfData:"ROS\u307E\u305F\u306F\u30AB\u30B9\u30BF\u30E0\u30C7\u30FC\u30BF\u3092\u30DA\u30BF\u30D0\u30A4\u30C8\u5358\u4F4D\u3067\u5B89\u5168\u306B\u4FDD\u5B58",convenientWebInterface:"\u4FBF\u5229\u306AWeb\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u3092\u4F7F\u7528\u3057\u3066\u3001\u30C7\u30FC\u30BF\u3092\u30BF\u30B0\u4ED8\u3051\u3001\u691C\u7D22\u3001\u304A\u3088\u3073\u9AD8\u901F\u306B\u53D6\u5F97",canBeShared:"\u30C1\u30FC\u30E0\u30E1\u30A4\u30C8\u3068\u30C7\u30FC\u30BF\u30D5\u30A1\u30A4\u30EB\u3001\u53EF\u8996\u5316\u30EC\u30A4\u30A2\u30A6\u30C8\u3001\u304A\u3088\u3073\u30AB\u30B9\u30BF\u30E0\u62E1\u5F35\u5B50\u3092\u5171\u6709\u3067\u304D\u307E\u3059",createAFreeAccount:"\u7121\u6599\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u4F5C\u6210\u3059\u308B",signIn:"\u30ED\u30B0\u30A4\u30F3",learnMore:"\u8A73\u7D30\u3092\u898B\u308B",startCollaborating:"Foxglove\u306E\u7D44\u7E54\u3068\u30B3\u30E9\u30DC\u30EC\u30FC\u30B7\u30E7\u30F3\u3092\u958B\u59CB\u3059\u308B",startCollaboratingDescription:"Foxglove\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u6700\u5927\u9650\u306B\u6D3B\u7528\u3057\u307E\u3057\u3087\u3046\u3002\u305F\u3068\u3048\u3070\u3001\u30C7\u30FC\u30BF\u3092\u8A73\u7D30\u306B\u5206\u6790\u3057\u305F\u308A\u3001\u30C1\u30FC\u30E0\u30E1\u30A4\u30C8\u3068\u30C4\u30FC\u30EB\u3092\u5171\u6709\u3057\u305F\u308A\u3059\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002",uploadToDataPlatform:"Data Platform\u306B\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3059\u308B",shareLayouts:"\u30EC\u30A4\u30A2\u30A6\u30C8\u3092\u5171\u6709\u3059\u308B",openLocalFile:"\u30ED\u30FC\u30AB\u30EB\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u304F",openLocalFileDescription:"\u30ED\u30FC\u30AB\u30EB\u30D5\u30A1\u30A4\u30EB\u30B7\u30B9\u30C6\u30E0\u304B\u3089\u76F4\u63A5\u30C7\u30FC\u30BF\u3092\u53EF\u8996\u5316\u3057\u307E\u3059\u3002",openUrl:"\u30C7\u30FC\u30BF\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u5171\u6709\u3059\u308B",openUrlDescription:"Foxglove Data Platform\u3092\u4F7F\u7528\u3057\u3066\u3001\u30C1\u30FC\u30E0\u3068\u30C7\u30FC\u30BF\u3092\u5171\u6709\u3057\u307E\u3059\u3002",openConnection:"\u63A5\u7D9A\u3092\u958B\u304F",openConnectionDescription:"\u30E9\u30A4\u30D6\u30ED\u30DC\u30C3\u30C8\u307E\u305F\u306F\u30B5\u30FC\u30D0\u30FC\u306B\u63A5\u7D9A\u3057\u307E\u3059\u3002",openDataSource:"\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\u3092\u958B\u304F",recentDataSources:"\u6700\u8FD1\u306E\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9"},Ng={searchPanelSettings:"\u691C\u7D22\u30D1\u30CD\u30EB\u306E\u8A2D\u5B9A...",title:"\u30BF\u30A4\u30C8\u30EB",clearSearch:"\u691C\u7D22\u3092\u30AF\u30EA\u30A2\u3059\u308B",labels:"\u30E9\u30D9\u30EB",showAll:"\u3059\u3079\u3066\u8868\u793A",hideAll:"\u3059\u3079\u3066\u975E\u8868\u793A",filterList:"\u30EA\u30B9\u30C8\u3092\u30D5\u30A3\u30EB\u30BF\u30EA\u30F3\u30B0\u3059\u308B",filterListHelp:"\u53EF\u8996\u6027\u3067\u30EA\u30B9\u30C8\u3092\u30D5\u30A3\u30EB\u30BF\u30EA\u30F3\u30B0\u3059\u308B",listAll:"\u3059\u3079\u3066\u306E\u30EA\u30B9\u30C8",listVisible:"\u8868\u793A\u3055\u308C\u3066\u3044\u308B\u30EA\u30B9\u30C8",listInvisible:"\u975E\u8868\u793A\u306E\u30EA\u30B9\u30C8",general:"\u4E00\u822C\u7684\u306A"},kg={frame:"\u30D5\u30EC\u30FC\u30E0",color:"\u8272",position:"\u4F4D\u7F6E",lineWidth:"\u30E9\u30A4\u30F3\u5E45",rotation:"\u56DE\u8EE2",reset:"\u30EA\u30BB\u30C3\u30C8",displayFrame:"\u30D5\u30EC\u30FC\u30E0\u3092\u8868\u793A\u3059\u308B",displayFrameHelp:"\u30AB\u30E1\u30E9\u3092\u914D\u7F6E\u3059\u308B\u305F\u3081\u306E\u5EA7\u6A19\u30D5\u30EC\u30FC\u30E0\u3067\u3059\u3002\u30AB\u30E1\u30E9\u306E\u4F4D\u7F6E\u3068\u5411\u304D\u306F\u3001\u3053\u306E\u30D5\u30EC\u30FC\u30E0\u306E\u539F\u70B9\u3092\u57FA\u6E96\u3068\u3057\u305F\u76F8\u5BFE\u7684\u306A\u3082\u306E\u3068\u306A\u308A\u307E\u3059\u3002",followMode:"\u30D5\u30A9\u30ED\u30FC\u30E2\u30FC\u30C9",followModeHelp:"\u518D\u751F\u4E2D\u306E\u30AB\u30E1\u30E9\u306E\u52D5\u4F5C\u3092\u5909\u66F4\u3057\u3001\u8868\u793A\u30D5\u30EC\u30FC\u30E0\u3092\u30D5\u30A9\u30ED\u30FC\u3059\u308B\u304B\u3069\u3046\u304B\u3092\u9078\u629E\u3067\u304D\u307E\u3059\u3002",pose:"\u30DD\u30FC\u30BA",fixed:"\u56FA\u5B9A",frameNotFound:"\u30D5\u30EC\u30FC\u30E0 {{frameId}} \u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",noCoordinateFramesFound:"\u5EA7\u6A19\u30D5\u30EC\u30FC\u30E0\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",enablePreloading:"\u4E8B\u524D\u306E\u8AAD\u307F\u8FBC\u307F\u3092\u6709\u52B9\u306B\u3059\u308B",lineColor:"\u30E9\u30A4\u30F3\u306E\u8272",axisScale:"\u8EF8\u306E\u30B9\u30B1\u30FC\u30EB",labelSize:"\u30E9\u30D9\u30EB\u306E\u30B5\u30A4\u30BA",labels:"\u30E9\u30D9\u30EB",editable:"\u7DE8\u96C6\u53EF\u80FD",settings:"\u8A2D\u5B9A",transforms:"\u5909\u63DB",showAll:"\u3059\u3079\u3066\u8868\u793A",hideAll:"\u3059\u3079\u3066\u975E\u8868\u793A",scene:"\u30B7\u30FC\u30F3",renderStats:"\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u306E\u7D71\u8A08\u60C5\u5831",background:"\u80CC\u666F",labelScale:"\u30E9\u30D9\u30EB\u306E\u30B9\u30B1\u30FC\u30EB",labelScaleHelp:"\u3059\u3079\u3066\u306E\u30E9\u30D9\u30EB\u306B\u9069\u7528\u3059\u308B\u30B9\u30B1\u30FC\u30EB\u30D5\u30A1\u30AF\u30BF\u30FC",ignoreColladaUpAxis:"COLLADA <up_axis> \u3092\u7121\u8996",ignoreColladaUpAxisHelp:"COLLADA \u30D5\u30A1\u30A4\u30EB\u5185\u306E <up_axis> \u30BF\u30B0\u3092\u7121\u8996\u3059\u308B\u3053\u3068\u3067\u3001rviz \u306E\u52D5\u4F5C\u306B\u5408\u308F\u305B\u307E\u3059\u3002",takeEffectAfterReboot:"\u3053\u306E\u8A2D\u5B9A\u306F\u518D\u8D77\u52D5\u5F8C\u306B\u6709\u52B9\u306B\u306A\u308A\u307E\u3059\u3002",meshUpAxis:"\u30E1\u30C3\u30B7\u30E5\u306E\u4E0A\u8EF8",meshUpAxisHelp:"\u65B9\u5411\u3092\u4F7F\u7528\u3057\u3066\u30E1\u30C3\u30B7\u30E5\u3092\u8AAD\u307F\u8FBC\u3080\u3068\u304D\u306B '\u4E0A' \u3068\u3057\u3066\u4F7F\u7528\u3059\u308B\u65B9\u5411\uFF08STL \u304A\u3088\u3073 OBJ\uFF09",YUp:"Y-up",ZUp:"Z-up",view:"\u30D3\u30E5\u30FC",distance:"\u8DDD\u96E2",perspective:"\u9060\u8FD1\u6CD5",target:"\u30BF\u30FC\u30B2\u30C3\u30C8",theta:"Theta",phi:"Phi",fovy:"Y\u8EF8 FOV",near:"Near",far:"Far",syncCamera:"\u30AB\u30E1\u30E9\u3092\u540C\u671F\u3059\u308B",syncCameraHelp:"\u3053\u306E\u8A2D\u5B9A\u304C\u6709\u52B9\u306B\u306A\u3063\u3066\u3044\u308B\u4ED6\u306E\u30D1\u30CD\u30EB\u3068\u30AB\u30E1\u30E9\u3092\u540C\u671F\u3057\u307E\u3059\u3002",topics:"\u30C8\u30D4\u30C3\u30AF",customLayers:"\u30AB\u30B9\u30BF\u30E0\u30EC\u30A4\u30E4\u30FC",addURDF:"URDF \u3092\u8FFD\u52A0\u3059\u308B",size:"\u30B5\u30A4\u30BA",divisions:"\u5206\u5272\u6570",grid:"\u30B0\u30EA\u30C3\u30C9",delete:"\u524A\u9664",addGrid:"\u30B0\u30EA\u30C3\u30C9\u3092\u8FFD\u52A0\u3059\u308B"},Zg={about:"\u60C5\u5831",exploreSampleData:"\u30B5\u30F3\u30D7\u30EB\u30C7\u30FC\u30BF\u3092\u63A2\u7D22\u3059\u308B",open:"\u3092\u958B\u304F",openLocalFile:"\u30ED\u30FC\u30AB\u30EB\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u304F",openConnection:"\u63A5\u7D9A\u3092\u958B\u304F",noDataSource:void 0,joinOurSlack:"Slack\u306B\u53C2\u52A0\u3059\u308B",recentDataSources:"\u6700\u8FD1\u306E\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9",viewOurDocs:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C6\u30FC\u30B7\u30E7\u30F3\u3092\u898B\u308B",file:"\u30D5\u30A1\u30A4\u30EB",view:"\u8868\u793A",help:"\u30D8\u30EB\u30D7",signIn:"\u30ED\u30B0\u30A4\u30F3",unknown:"\u4E0D\u660E"},Fg={settings:"\u8BBE\u7F6E",colorScheme:"\u914D\u8272\u65B9\u6848",dark:"\u6697\u8272",light:"\u4EAE\u8272",followSystem:"\u8DDF\u968F\u7CFB\u7EDF",language:"\u8BED\u8A00",displayTimestampsIn:"\u663E\u793A\u65F6\u95F4\u6233\u5728",timestampFormat:"\u65F6\u95F4\u6233\u683C\u5F0F",messageRate:"\u6D88\u606F\u901F\u7387",openLinksIn:"\u6253\u5F00\u94FE\u63A5",webApp:"\u7F51\u9875\u5E94\u7528",desktopApp:"\u684C\u9762\u5E94\u7528",askEachTime:"\u6BCF\u6B21\u8BE2\u95EE",general:"\u901A\u7528",ros:"ROS",privacy:"\u9690\u79C1",privacyDescription:"\u66F4\u6539\u5C06\u5728\u4E0B\u6B21\u542F\u52A8 Foxglove Studio \u65F6\u751F\u6548",sendAnonymizedUsageData:"\u53D1\u9001\u533F\u540D\u4F7F\u7528\u6570\u636E\u4EE5\u5E2E\u52A9\u6211\u4EEC\u6539\u8FDB Foxglove Studio",sendAnonymizedCrashReports:"\u53D1\u9001\u533F\u540D\u5D29\u6E83\u62A5\u544A",experimentalFeatures:"\u5B9E\u9A8C\u6027\u529F\u80FD",experimentalFeaturesDescription:"\u8FD9\u4E9B\u529F\u80FD\u4E0D\u7A33\u5B9A\uFF0C\u4E0D\u5EFA\u8BAE\u65E5\u5E38\u4F7F\u7528\u3002",studioDebugPanels:"Studio \u8C03\u8BD5\u9762\u677F",studioDebugPanelsDescription:"\u5728\u201C\u6DFB\u52A0\u9762\u677F\u201D\u5217\u8868\u4E2D\u663E\u793A Foxglove Studio \u8C03\u8BD5\u9762\u677F\u3002",memoryUseIndicator:"\u5185\u5B58\u4F7F\u7528\u6307\u793A\u5668",memoryUseIndicatorDescription:"\u5728\u4FA7\u8FB9\u680F\u663E\u793A\u5E94\u7528\u7A0B\u5E8F\u7684\u5185\u5B58\u4F7F\u7528\u60C5\u51B5\u3002",newNavigation:"\u65B0\u7248\u5BFC\u822A\u680F",newNavigationDescription:"\u4F7F\u7528\u65B0\u7248\u5BFC\u822A\u680F\u3002",restartTheAppForChangesToTakeEffect:" \u91CD\u65B0\u542F\u52A8\u5E94\u7528\u7A0B\u5E8F\u4EE5\u4F7F\u66F4\u6539\u751F\u6548\u3002",layoutDebugging:"\u5E03\u5C40\u8C03\u8BD5",layoutDebuggingDescription:"\u663E\u793A\u7528\u4E8E\u5F00\u53D1\u548C\u8C03\u8BD5\u5E03\u5C40\u5B58\u50A8\u7684\u989D\u5916\u63A7\u4EF6\u3002",extensions:"\u6269\u5C55",about:"\u5173\u4E8E",noExperimentalFeatures:"\u76EE\u524D\u6CA1\u6709\u5B9E\u9A8C\u6027\u7684\u529F\u80FD\u3002"},Ug={foxglove:"Foxglove",learnMore:"\u4E86\u89E3\u66F4\u591A"},zg={"3D":"\u4E09\u7EF4","3DPanelDescription":"\u5728\u4E09\u7EF4\u573A\u666F\u4E2D\u663E\u793A\u6807\u8BB0\u3001\u76F8\u673A\u56FE\u50CF\u3001\u7F51\u683C\u3001URDF \u548C\u5176\u4ED6\u5185\u5BB9\u3002",dataSourceInfo:"\u6570\u636E\u6E90\u4FE1\u606F",dataSourceInfoDescription:"\u67E5\u770B\u5F53\u524D\u6570\u636E\u6E90\u7684\u4E3B\u9898\u548C\u65F6\u95F4\u6233\u7B49\u8BE6\u7EC6\u4FE1\u606F\u3002",gauge:"\u4EEA\u8868",gaugeDescription:"\u57FA\u4E8E\u8FDE\u7EED\u503C\u663E\u793A\u5F69\u8272\u4EEA\u8868\u3002",image:"\u56FE\u50CF",imageLegacy:"\u56FE\u50CF\uFF08Legacy\uFF09",imageDescription:"\u663E\u793A\u5E26\u6CE8\u91CA\u7684\u56FE\u50CF\u3002",indicator:"\u6307\u793A\u5668",indicatorDescription:"\u57FA\u4E8E\u9608\u503C\u503C\u663E\u793A\u5F69\u8272\u548C/\u6216\u6587\u672C\u6307\u793A\u5668\u3002",log:"\u65E5\u5FD7",logDescription:"\u6309\u8282\u70B9\u548C\u4E25\u91CD\u7A0B\u5EA6\u7EA7\u522B\u663E\u793A\u65E5\u5FD7\u3002",map:"\u5730\u56FE",mapDescription:"\u5728\u5730\u56FE\u4E0A\u663E\u793A\u70B9\u3002",parameters:"\u53C2\u6570",parametersDescription:"\u8BFB\u53D6\u548C\u8BBE\u7F6E\u6570\u636E\u6E90\u7684\u53C2\u6570\u3002",plot:"\u56FE\u8868",plotDescription:"\u7ED8\u5236\u968F\u65F6\u95F4\u6216\u5176\u4ED6\u503C\u53D8\u5316\u7684\u6570\u5B57\u503C\u3002",publish:"\u53D1\u5E03",publishDescription:"\u5411\u6570\u636E\u6E90\u53D1\u5E03\u6D88\u606F\uFF08\u4EC5\u9650\u5B9E\u65F6\u8FDE\u63A5\uFF09\u3002",rawMessages:"\u539F\u59CB\u6D88\u606F",rawMessagesDescription:"\u68C0\u67E5\u4E3B\u9898\u6D88\u606F\u3002",ROSDiagnosticsDetail:"\u8BCA\u65AD - \u8BE6\u7EC6\u4FE1\u606F\uFF08ROS\uFF09",ROSDiagnosticsDetailDescription:"\u663E\u793A\u7279\u5B9A hardware_id \u7684 ROS DiagnosticArray \u6D88\u606F\u3002",ROSDiagnosticSummary:"\u8BCA\u65AD - \u6982\u8981\uFF08ROS\uFF09",ROSDiagnosticSummaryDescription:"\u663E\u793A\u6240\u6709 ROS DiagnosticArray \u6D88\u606F\u7684\u6458\u8981\u3002",stateTransitions:"\u72B6\u6001\u8F6C\u6362",stateTransitionsDescription:"\u8DDF\u8E2A\u503C\u968F\u65F6\u95F4\u53D8\u5316\u7684\u60C5\u51B5\u3002",studioPlaybackPerformance:"Studio - \u64AD\u653E\u6027\u80FD",studioPlaybackPerformanceDescription:"\u663E\u793A\u56DE\u653E\u548C\u6570\u636E\u6D41\u5F0F\u5904\u7406\u6027\u80FD\u7EDF\u8BA1\u4FE1\u606F\u3002",tab:"\u9009\u9879\u5361",tabDescription:"\u5C06\u9762\u677F\u5206\u7EC4\u5728\u9009\u9879\u5361\u754C\u9762\u4E2D\u3002",table:"\u8868\u683C",tableDescription:"\u4EE5\u8868\u683C\u683C\u5F0F\u663E\u793A\u4E3B\u9898\u6D88\u606F\u3002",teleop:"\u8FDC\u7A0B\u64CD\u7EB5",teleopDescription:"\u901A\u8FC7\u5B9E\u65F6\u8FDE\u63A5\u8FDC\u7A0B\u64CD\u7EB5\u673A\u5668\u4EBA\u3002",topicGraph:"\u4E3B\u9898\u56FE",topicGraphDescription:"\u663E\u793A\u6D3B\u52A8\u8282\u70B9\u3001\u4E3B\u9898\u548C\u670D\u52A1\u7684\u56FE\u5F62\u3002",userScripts:"\u7528\u6237\u811A\u672C",userScriptsDescription:"\u4F7F\u7528 TypeScript \u7F16\u5199\u81EA\u5B9A\u4E49\u6570\u636E\u8F6C\u6362\u3002\u4EE5\u524D\u79F0\u4E3A Node Playground\u3002",variableSlider:"\u53D8\u91CF\u6ED1\u5757",variableSliderDescription:"\u66F4\u65B0\u5E03\u5C40\u7684\u6570\u5B57\u53D8\u91CF\u503C\u3002"},Wg={addPanel:"\u6DFB\u52A0\u9762\u677F",noLayoutSelected:"<selectLayoutLink>\u9009\u62E9\u4E00\u4E2A\u5E03\u5C40</selectLayoutLink>\u6765\u5F00\u59CB\u4F7F\u7528!",noPanelsMatchSearchCriteria:"\u6CA1\u6709\u7B26\u5408\u641C\u7D22\u6761\u4EF6\u7684\u9762\u677F\u3002",searchPanels:"\u641C\u7D22\u9762\u677F",selectPanelToAddToLayout:"\u5728\u4E0B\u9762\u9009\u62E9\u4E00\u4E2A\u9762\u677F\uFF0C\u5C06\u5176\u6DFB\u52A0\u5230\u4F60\u7684\u5E03\u5C40\u4E2D\u3002"},Gg={importOrExportSettings:"\u5BFC\u5165/\u5BFC\u51FA\u8BBE\u7F6E",importOrExportSettingsWithEllipsis:"\u5BFC\u5165/\u5BFC\u51FA\u8BBE\u7F6E\u2026\u2026",panelSettings:"\u9762\u677F\u8BBE\u7F6E",selectAPanelToEditItsSettings:"\u9009\u62E9\u4E00\u4E2A\u9762\u677F\u6765\u7F16\u8F91\u5176\u8BBE\u7F6E\u3002",loadingPanelSettings:"\u6B63\u5728\u52A0\u8F7D\u9762\u677F\u8BBE\u7F6E\u2026\u2026",currentSettingsPanelName:"{{title}}\u9762\u677F\u8BBE\u7F6E",panelName:"{{title}}\u9762\u677F",panelDoesNotHaveSettings:"\u6B64\u9762\u677F\u6CA1\u6709\u4EFB\u4F55\u8BBE\u7F6E",resetToDefaults:"\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u503C",unknown:"\u672A\u77E5"},Qg={topicError:"\u8BDD\u9898 {{topic}} \u4E0D\u53EF\u7528",topic:"\u8BDD\u9898"},Yg={deleteSeries:"\u5220\u9664\u6570\u636E\u7CFB\u5217",messagePath:"\u6D88\u606F\u5730\u5740",label:"\u6807\u7B7E",color:"\u989C\u8272",timestamp:"\u65F6\u95F4\u6233",receiveTime:"\u63A5\u6536\u65F6\u95F4",headerStamp:"\u5934\u65F6\u95F4\u6233",series:"\u6570\u636E\u7CFB\u5217",addSeries:"\u6DFB\u52A0\u6570\u636E\u7CFB\u5217",maxYError:"Y \u7684\u6700\u5927\u503C\u5FC5\u987B\u5927\u4E8E Y \u7684\u6700\u5C0F\u503C\u3002",maxXError:"X \u7684\u6700\u5927\u503C\u5FC5\u987B\u5927\u4E8E X \u7684\u6700\u5C0F\u503C\u3002",general:"\u901A\u7528",syncWithOtherPlots:"\u4E0E\u5176\u4ED6\u56FE\u8868\u540C\u6B65",legend:"\u56FE\u4F8B",position:"\u4F4D\u7F6E",floating:"\u6D6E\u52A8",left:"\u5DE6",top:"\u4E0A",hidden:"\u9690\u85CF",showValues:"\u663E\u793A\u503C",yAxis:"Y \u8F74",showLabels:"\u663E\u793A\u6807\u7B7E",min:"\u6700\u5C0F\u503C",max:"\u6700\u5927\u503C",xAxis:"X \u8F74",value:"\u503C",index:"\u7D22\u5F15",currentPath:"\u5730\u5740\uFF08\u5F53\u524D\uFF09",accumulatedPath:"\u5730\u5740\uFF08\u7D2F\u79EF\uFF09",secondsRange:"\u8303\u56F4\uFF08\u79D2\uFF09"},Hg={dataSource:"\u6570\u636E\u6E90",currentSource:"\u5F53\u524D\u6E90",waitingForConnection:"\u7B49\u5F85\u8FDE\u63A5\u2026\u2026",startTime:"\u5F00\u59CB\u65F6\u95F4",endTime:"\u7ED3\u675F\u65F6\u95F4",duration:"\u6301\u7EED\u65F6\u95F4"},Vg={newToFoxgloveStudio:"\u7B2C\u4E00\u6B21\u4F7F\u7528 Foxglove Studio\uFF1F",newToFoxgloveStudioDescription:"\u4ECE\u63A2\u7D22\u4E00\u4E2A\u6837\u672C\u6570\u636E\u96C6\u5F00\u59CB\uFF0C\u6216\u67E5\u770B\u6211\u4EEC\u7684\u6587\u6863\u3002",exploreSampleData:"\u63A2\u7D22\u6837\u672C\u6570\u636E",viewOurDocs:"\u67E5\u770B\u6211\u4EEC\u7684\u6587\u6863",joinOurCommunity:"\u52A0\u5165\u6211\u4EEC\u7684\u793E\u533A",joinOurCommunityDescription:"\u5728 Slack \u4E0A\u4E0E\u6211\u4EEC\u7684\u5F00\u53D1\u4EBA\u5458\u548C\u7528\u6237\u4EA4\u6D41\uFF0C\u6216\u5728 GitHub \u4E0A\u63D0\u51FA\u95EE\u9898\u3002",joinOurSlack:"\u52A0\u5165\u6211\u4EEC\u7684 Slack",openAGitHubIssue:"\u6253\u5F00 GitHub issue",needHelp:"\u9700\u8981\u5E2E\u52A9\uFF1F",needHelpDescription:"\u67E5\u770B\u6211\u4EEC\u7684\u6587\u6863\uFF0C\u6216\u67E5\u770B Foxglove \u535A\u5BA2\u4E0A\u7684\u6559\u7A0B\u3002",seeTutorials:"\u67E5\u770B\u6559\u7A0B",collaborateTitle:"\u4F7F\u7528 Foxglove \u6570\u636E\u5E73\u53F0\u52A0\u901F\u5F00\u53D1",secureStorageOfData:"\u5B89\u5168\u5730\u5B58\u50A8 PB \u7EA7\u7684 ROS \u6216\u81EA\u5B9A\u4E49\u6570\u636E",convenientWebInterface:"\u4F7F\u7528\u4E00\u4E2A\u65B9\u4FBF\u7684\u7F51\u7EDC\u754C\u9762\uFF0C\u4EE5\u95EA\u7535\u822C\u7684\u901F\u5EA6\u6807\u8BB0\u3001\u641C\u7D22\u548C\u68C0\u7D22\u6570\u636E",canBeShared:"\u4E0E\u961F\u53CB\u5206\u4EAB\u6570\u636E\u6587\u4EF6\u3001\u53EF\u89C6\u5316\u5E03\u5C40\u548C\u81EA\u5B9A\u4E49\u6269\u5C55\u7A0B\u5E8F",createAFreeAccount:"\u521B\u5EFA\u514D\u8D39\u5E10\u6237",signIn:"\u767B\u5F55",learnMore:"\u4E86\u89E3\u66F4\u591A",startCollaborating:"\u4E0E\u60A8\u7684 Foxglove \u7EC4\u7EC7\u5F00\u59CB\u5408\u4F5C",startCollaboratingDescription:"\u5145\u5206\u5229\u7528\u4F60\u7684 Foxglove \u8D26\u6237\u2014\u2014\u65E0\u8BBA\u4F60\u60F3\u6DF1\u5165\u7814\u7A76\u4F60\u7684\u6570\u636E\u8FD8\u662F\u4E0E\u4F60\u7684\u56E2\u961F\u6210\u5458\u5206\u4EAB\u5DE5\u5177\u3002",uploadToDataPlatform:"\u4E0A\u4F20\u5230\u6570\u636E\u5E73\u53F0",shareLayouts:"\u5206\u4EAB\u5E03\u5C40",openLocalFile:"\u6253\u5F00\u672C\u5730\u6587\u4EF6",openLocalFileDescription:"\u76F4\u63A5\u4ECE\u672C\u5730\u6587\u4EF6\u7CFB\u7EDF\u53EF\u89C6\u5316\u6570\u636E\u3002",openUrl:"\u4E0A\u4F20\u548C\u5171\u4EAB\u6570\u636E",openUrlDescription:"\u4F7F\u7528 Foxglove \u6570\u636E\u5E73\u53F0\u4E0E\u60A8\u7684\u56E2\u961F\u5171\u4EAB\u6570\u636E\u3002",openConnection:"\u6253\u5F00\u8FDE\u63A5",openConnectionDescription:"\u8FDE\u63A5\u5230\u5B9E\u65F6\u673A\u5668\u4EBA\u6216\u670D\u52A1\u5668\u3002",openDataSource:"\u6253\u5F00\u6570\u636E\u6E90",recentDataSources:"\u6700\u8FD1\u4F7F\u7528\u7684\u6570\u636E\u6E90"},Kg={searchPanelSettings:"\u641C\u7D22\u9762\u677F\u8BBE\u7F6E\u2026\u2026",title:"\u6807\u9898",clearSearch:"\u6E05\u7A7A\u641C\u7D22",labels:"\u6807\u7B7E",showAll:"\u663E\u793A\u5168\u90E8",hideAll:"\u9690\u85CF\u5168\u90E8",filterList:"\u8FC7\u6EE4\u5217\u8868",filterListHelp:"\u6309\u7167\u53EF\u89C1\u6027\u8FC7\u6EE4\u5217\u8868",listAll:"\u5217\u51FA\u5168\u90E8",listVisible:"\u5217\u51FA\u53EF\u89C1",listInvisible:"\u5217\u51FA\u4E0D\u53EF\u89C1",general:"\u901A\u7528"},Xg={frame:"\u53C2\u8003\u7CFB",reset:"\u91CD\u7F6E",color:"\u989C\u8272",position:"\u4F4D\u7F6E",lineWidth:"\u7EBF\u5BBD",rotation:"\u65CB\u8F6C",displayFrame:"\u5C55\u793A\u53C2\u8003\u7CFB",displayFrameHelp:"\u653E\u7F6E\u76F8\u673A\u7528\u4E8E\u663E\u793A\u5750\u6807\u7CFB\u3002\u76F8\u673A\u7684\u4F4D\u7F6E\u548C\u65B9\u5411\u5C06\u76F8\u5BF9\u4E8E\u8BE5\u5750\u6807\u7CFB\u7684\u539F\u70B9\u3002",followMode:"\u8DDF\u8E2A\u6A21\u5F0F",followModeHelp:"\u66F4\u6539\u56DE\u653E\u671F\u95F4\u76F8\u673A\u7684\u884C\u4E3A\uFF0C\u662F\u5426\u8DDF\u8E2A\u663E\u793A\u5750\u6807\u7CFB\u3002",pose:"\u59FF\u6001",fixed:"\u56FA\u5B9A",frameNotFound:"\u672A\u627E\u5230\u53C2\u8003\u7CFB {{frameId}}",noCoordinateFramesFound:"\u672A\u627E\u5230\u5750\u6807\u7CFB",enablePreloading:"\u542F\u7528\u9884\u52A0\u8F7D",lineColor:"\u7EBF\u989C\u8272",axisScale:"\u8F74\u6BD4\u4F8B",labelSize:"\u6807\u7B7E\u5927\u5C0F",labels:"\u6807\u7B7E",editable:"\u53EF\u7F16\u8F91",settings:"\u8BBE\u7F6E",transforms:"\u53D8\u6362",showAll:"\u663E\u793A\u5168\u90E8",hideAll:"\u9690\u85CF\u5168\u90E8",scene:"\u573A\u666F",renderStats:"\u6E32\u67D3\u7EDF\u8BA1",background:"\u80CC\u666F",labelScale:"\u6807\u7B7E\u6BD4\u4F8B",labelScaleHelp:"\u5E94\u7528\u4E8E\u6240\u6709\u6807\u7B7E\u7684\u6BD4\u4F8B\u56E0\u5B50",ignoreColladaUpAxis:"\u5FFD\u7565 COLLADA \u7684 <up_axis>",ignoreColladaUpAxisHelp:"\u901A\u8FC7\u5FFD\u7565 COLLADA \u6587\u4EF6\u4E2D\u7684 <up_axis> \u6807\u8BB0\uFF0C\u5339\u914D rviz \u7684\u884C\u4E3A",takeEffectAfterReboot:"\u6B64\u8BBE\u7F6E\u9700\u8981\u91CD\u65B0\u542F\u52A8\u4EE5\u751F\u6548",meshUpAxis:"\u7F51\u683C\u4E0A\u8F74",meshUpAxisHelp:"\u52A0\u8F7D\u7F3A\u5C11\u65B9\u5411\u4FE1\u606F\u7684\u7F51\u683C\uFF08STL \u548C OBJ\uFF09\u65F6\u4F7F\u7528\u7684\u201C\u4E0A\u201D\u65B9\u5411",YUp:"Y-up",ZUp:"Z-up",view:"\u89C6\u56FE",distance:"\u8DDD\u79BB",perspective:"\u900F\u89C6",target:"\u76EE\u6807",theta:"\u6781\u89D2",phi:"\u65B9\u5411\u89D2",fovy:"Y\u8F74\u89C6\u91CE",near:"\u8FD1\u9762",far:"\u8FDC\u9762",syncCamera:"\u540C\u6B65\u76F8\u673A",syncCameraHelp:"\u5C06\u76F8\u673A\u4E0E\u5176\u4ED6\u542F\u7528\u6B64\u8BBE\u7F6E\u7684\u9762\u677F\u540C\u6B65\u3002",topics:"\u8BDD\u9898",customLayers:"\u81EA\u5B9A\u4E49\u56FE\u5C42",addURDF:"\u6DFB\u52A0 URDF",size:"\u5927\u5C0F",divisions:"\u5212\u5206",grid:"\u7F51\u683C",delete:"\u5220\u9664",addGrid:"\u6DFB\u52A0\u7F51\u683C"},$g={about:"\u5173\u4E8E",exploreSampleData:"\u63A2\u7D22\u6837\u672C\u6570\u636E",open:"\u6253\u5F00\u2026\u2026",openConnection:"\u6253\u5F00\u8FDE\u63A5\u2026\u2026",noDataSource:void 0,openLocalFile:"\u6253\u5F00\u672C\u5730\u6587\u4EF6\u2026\u2026",joinOurSlack:"\u52A0\u5165\u6211\u4EEC\u7684 Slack",recentDataSources:"\u6700\u8FD1\u4F7F\u7528\u7684\u6570\u636E\u6E90",hideLeftSidebar:"\u9690\u85CF\u5DE6\u4FA7\u8FB9\u680F",hideRightSidebar:"\u9690\u85CF\u53F3\u4FA7\u8FB9\u680F",showLeftSidebar:"\u663E\u793A\u5DE6\u4FA7\u8FB9\u680F",showRightSidebar:"\u663E\u793A\u53F3\u4FA7\u8FB9\u680F",viewOurDocs:"\u67E5\u770B\u6211\u4EEC\u7684\u6587\u6863",file:"\u6587\u4EF6",view:"\u67E5\u770B",help:"\u5E2E\u52A9",signIn:"\u767B\u5F55",unknown:"\u672A\u77E5"},Jg={en:d,zh:v,ja:g},qg="general";async function _g(e){const{context:t="browser"}=e??{};t==="browser"&&(Ho.ZP.use(X.Db),Ho.ZP.use(dg.Z)),await Ho.ZP.init({resources:Jg,detection:t==="browser"?{order:["localStorage","navigator"],caches:["localStorage"]}:void 0,fallbackLng:"en",defaultNS:qg,interpolation:{escapeValue:!1}})}var em=o(1297),hi=o.n(em),tm=o(56348),nm="../../packages/studio-base/src/services/IdbExtensionStorage.ts";const As=q.ZP.getLogger(nm),sm="foxglove-extensions",os="metadata",as="extensions";class om{#e;namespace;constructor(t){this.namespace=t,this.#e=tm.X3([sm,t].join("-"),1,{upgrade:s=>{As.debug("Creating extension object stores"),s.createObjectStore(os,{keyPath:"id"}),s.createObjectStore(as,{keyPath:"info.id"})}})}async list(){const t=await(await this.#e).getAll(os);return As.debug(`Found ${t.length} extensions`),t}async get(t){return As.debug("Getting extension",t),await(await this.#e).get(as,t)}async put(t){As.debug("Storing extension",{extension:t});const s=(await this.#e).transaction([os,as],"readwrite");return await Promise.all([s.db.put(os,t.info),s.db.put(as,t),s.done]),t}async delete(t){As.debug("Deleting extension",t);const s=(await this.#e).transaction([os,as],"readwrite");await Promise.all([s.db.delete(os,t),s.db.delete(as,t),s.done])}}var am="../../packages/studio-base/src/services/IdbExtensionLoader.ts";const zs=q.ZP.getLogger(am);function im(e){const t=/^@([^/]+)\/(.+)/.exec(e);return t==null?{name:e}:{publisher:t[1],name:t[2]}}function rm(e,t,s){switch(e){case"local":return s.displayName;case"org":return[e,t,s.name].join(":")}}function lm(e){if(e.name==null||e.name.length===0)throw new Error("Invalid extension: missing name");const{publisher:t,name:s}=im(e.name),a=e.publisher??t;if(a==null||a.length===0)throw new Error("Invalid extension: missing publisher");return{...e,publisher:a,name:s.toLowerCase()}}class cm{#e;namespace;constructor(t){this.namespace=t,this.#e=new om(t)}async getExtensions(){return zs.debug("Listing extensions"),await this.#e.list()}async loadExtension(t){zs.debug("Loading extension",t);const s=await this.#e.get(t),a=new(hi());if(s?.content==null)throw new Error("Extension is corrupted");const r=await(await a.loadAsync(s.content)).file("dist/extension.js")?.async("string");if(r==null)throw new Error("Extension is corrupted");return r}async installExtension(t){zs.debug("Installing extension");const i=await(await new(hi())().loadAsync(t)).file("package.json")?.async("string");if(i==null)throw new Error("Invalid extension: missing package.json");const r=lm(JSON.parse(i)),c=r.publisher.replace(/[^A-Za-z0-9_\s]+/g,""),u={...r,id:`${c}.${r.name}`,namespace:this.namespace,qualifiedName:rm(this.namespace,c,r)};return await this.#e.put({content:t,info:u}),u}async uninstallExtension(t){zs.debug("Uninstalling extension",t),await this.#e.delete(t)}}var is=o(87026);function dm(e,t){const s=new Map;function a(r,c,u){let p=f=>f;const h=[];if(r.type!=="object")throw new Error(`Expected "type": "object" for schema ${c}, got ${JSON.stringify(r.type)}`);for(const[f,m]of Object.entries(r.properties)){if(Array.isArray(m.oneOf))if(m.oneOf.every(y=>typeof y.const=="number")){for(const y of m.oneOf)h.push({name:y.title,type:"uint32",isConstant:!0,value:y.const});h.push({name:f,type:"uint32"});continue}else throw new Error(`Unsupported type for ${u.concat(f).join(".")}: oneOf alternatives must have number values`);switch(m.type){case"boolean":h.push({name:f,type:"bool"});break;case"string":switch(m.contentEncoding){case void 0:h.push({name:f,type:"string"});break;case"base64":{h.push({name:f,type:"uint8",isArray:!0});const y=p;p=w=>{const k=w[f];if(typeof k=="string"){const W=new Uint8Array(is.length(k));if(is.decode(k,W,0)!==W.byteLength)throw new Error(`Failed to decode base64 data for ${u.concat(f).join(".")}`);w[f]=W}return y(w)};break}default:throw new Error(`Unsupported contentEncoding ${JSON.stringify(m.contentEncoding)} in ${u.concat(f).join(".")}`)}break;case"number":case"integer":h.push({name:f,type:"float64"});break;case"object":{const y=`${c}.${f}`,w=a(m,y,u.concat(f)),k=p;p=W=>{const G=W[f];return G!=null&&typeof G=="object"&&(W[f]=w(G)),k(W)},h.push({name:f,type:y,isComplex:!0});break}case"array":{const y=m.items;switch(y.type){case"boolean":h.push({name:f,type:"bool",isArray:!0});break;case"string":if(y.contentEncoding!=null)throw new Error(`Unsupported contentEncoding ${JSON.stringify(y.contentEncoding)} for array item ${u.concat(f).join(".")}`);h.push({name:f,type:"string",isArray:!0});break;case"number":case"integer":h.push({name:f,type:"float64",isArray:!0});break;case"object":{const w=`${c}.${f}`,k=a(m.items,w,u.concat(f)),W=p;p=G=>{const J=G[f];return Array.isArray(J)&&(G[f]=J.map(k)),W(G)},h.push({name:f,type:w,isComplex:!0,isArray:!0});break}default:throw new Error(`Unsupported type ${JSON.stringify(y.type)} for array item ${u.concat(f).join(".")}`)}break}case"null":default:throw new Error(`Unsupported type ${JSON.stringify(m.type)} for ${u.concat(f).join(".")}`)}}return s.set(c,{definitions:h}),p}const i=a(e,t,[]);return{datatypes:s,postprocessValue:i}}var um=o(11168),Vo=o.n(um);function pm(e){switch(e){case"double":return"float64";case"float":return"float32";case"int32":case"sint32":case"sfixed32":return"int32";case"uint32":case"fixed32":return"uint32";case"int64":case"sint64":case"sfixed64":return"int64";case"uint64":case"fixed64":return"uint64";case"bool":return"bool";case"string":return"string"}throw new Error(`Expected protobuf scalar type, got ${e}`)}function Ko(e){return e.replace(/^\./,"")}function gi(e,t){const s=[];e.set(Ko(t.fullName),{definitions:s});for(const a of t.fieldsArray)if(a.resolvedType instanceof Vo().Enum){for(const[i,r]of Object.entries(a.resolvedType.values))s.push({name:i,type:"int32",isConstant:!0,value:r});s.push({type:"int32",name:a.name})}else if(a.resolvedType){const i=Ko(a.resolvedType.fullName);s.push({type:i,name:a.name,isComplex:!0,isArray:a.repeated}),e.has(i)||gi(e,a.resolvedType)}else if(a.type==="bytes"){if(a.repeated)throw new Error("Repeated bytes are not currently supported");s.push({type:"uint8",name:a.name,isArray:!0})}else s.push({type:pm(a.type),name:a.name,isArray:a.repeated})}var fm=o(68217),hm=o(25490),gm=o(10955),Ws=o(17417),bs=o(92897),Gs=o(62098),mi=o(15356),$e=o(98357);function yi(e){switch(e){case $e.rB.Bool:return"bool";case $e.rB.Byte:return"int8";case $e.rB.UType:case $e.rB.UByte:return"uint8";case $e.rB.Short:return"int16";case $e.rB.UShort:return"uint16";case $e.rB.Int:return"int32";case $e.rB.UInt:return"uint32";case $e.rB.Long:return"int64";case $e.rB.ULong:return"uint64";case $e.rB.Float:return"float32";case $e.rB.Double:return"float64";case $e.rB.String:return"string";case $e.rB.Vector:case $e.rB.Obj:case $e.rB.Union:case $e.rB.Array:throw new Error(`${e} is not a simple type.`);case $e.rB.None:case $e.rB.MaxBaseType:throw new Error("None is not a valid type.")}}function yn(e){if(typeof e=="string")return e;throw new Error(`Expected string, found ${typeof e}`)}function mm(e,t){const s=[];switch(t.type?.baseType){case $e.rB.UType:case $e.rB.Bool:case $e.rB.Byte:case $e.rB.UByte:case $e.rB.Short:case $e.rB.UShort:case $e.rB.Int:case $e.rB.UInt:case $e.rB.Long:case $e.rB.ULong:case $e.rB.Float:case $e.rB.Double:case $e.rB.String:case $e.rB.None:{const a=yi(t.type.baseType);if(t.type.index!==-1){const i=e.enums[t.type.index]?.values;if(i==null)throw new Error(`Invalid schema, missing enum values for field type ${e.enums[t.type.index]?.name}`);for(const r of i)s.push({name:yn(r.name),type:a,isConstant:!0,value:r.value})}s.push({name:yn(t.name),type:a});break}case $e.rB.Vector:switch(t.type.element){case $e.rB.Vector:case $e.rB.Union:case $e.rB.Array:case $e.rB.None:throw new Error("Vectors of vectors, unions, arrays, and None's are unsupported.");case $e.rB.Obj:s.push({name:yn(t.name),type:yn(e.objects[t.type.index]?.name),isComplex:!0,isArray:!0});break;default:{const a=yi(t.type.element);if(t.type.index!==-1){const i=e.enums[t.type.index]?.values;if(i==null)throw new Error("Invalid schema");for(const r of i)s.push({name:yn(r.name),type:a,isConstant:!0,value:r.value})}s.push({name:yn(t.name),type:a,isArray:!0});break}}break;case $e.rB.Obj:s.push({name:yn(t.name),type:yn(e.objects[t.type.index]?.name),isComplex:!0});break;case $e.rB.Union:case $e.rB.Array:case $e.rB.MaxBaseType:case void 0:throw new Error("Unions and Arrays are not supported in mcap-support currently.")}return s}function ym(e,t){const s=new Map,a=new mi.cZ(t),i=$e.V_.getRootAsSchema(a),r=i.unpack();let c=-1;for(let f=0;f<r.objects.length;++f){const m=r.objects[f];m?.name===e&&(c=f);let y=[];if(m?.fields!=null){for(const w of m.fields)y=y.concat(mm(r,w));s.set(yn(m.name),{definitions:y})}}if(c===-1&&r.rootTable?.name!==e)throw new Error(`Type "${e}" is not available in the schema for "${r.rootTable?.name}".`);const p=new $e._b(i).toObjectLambda(c,!0);return{datatypes:s,deserialize:f=>{const m=new mi.cZ(new Uint8Array(f.buffer,f.byteOffset,f.byteLength)),y=new $e.iA(m,c,m.readInt32(m.position())+m.position(),!1);return p(y)}}}var vm=o(70943);function Am(e,t){const s=vm.FileDescriptorSet.decode(t),a=Vo().Root.fromDescriptor(s);a.resolveAll();const i=a.lookupType(e),r=p=>{if(!p||!(p instanceof Vo().Type))return;for(const m of p.fieldsArray)m.name==="seconds"?m.name="sec":m.name==="nanos"&&(m.name="nsec");p.setup();const h=p.toObject,f=(m,y)=>{const w=h.call(p,m,y),{sec:k,nsec:W}=w;if(typeof k!="bigint"||typeof W!="number")return w;if(k>BigInt(Number.MAX_SAFE_INTEGER))throw new Error(`Timestamps with seconds greater than 2^53-1 are not supported (found seconds=${k}, nanos=${W})`);return{sec:Number(k),nsec:W}};p.toObject=f};r(a.lookup(".google.protobuf.Timestamp")),r(a.lookup(".google.protobuf.Duration"));const c=p=>i.toObject(i.decode(new Uint8Array(p.buffer,p.byteOffset,p.byteLength)),{defaults:!0}),u=new Map;if(gi(u,i),!u.has(e))throw new Error(`Protobuf schema does not contain an entry for '${e}'. The schema name should be fully-qualified, e.g. '${Ko(i.fullName)}'.`);return{deserialize:c,datatypes:u}}function bm(e,t){const s=i=>{if(i.aggregatedKind==="union"){const r=i.cases.map(u=>({...u.type,predicates:u.predicates}));i.defaultCase!=null&&r.push(i.defaultCase);const{name:c}=i;return{name:c,definitions:r}}return i},a=e.map(s);return Xo(a,t)}function Xo(e,t){const s=new Map;return e.forEach(({name:a,definitions:i},r)=>{t!=null&&r===0?s.set(t,{name:t,definitions:i}):a!=null&&s.set(a,{name:a,definitions:i})}),s}function $o(e){if(e.messageEncoding==="json"){if(e.schema!=null&&e.schema.encoding!=="jsonschema")throw new Error(`Message encoding ${e.messageEncoding} with schema encoding '${e.schema.encoding}' is not supported (expected jsonschema or no schema)`);const t=new TextDecoder;let s=new Map,a=i=>JSON.parse(t.decode(i));if(e.schema!=null){const i=e.schema.data.length>0?JSON.parse(t.decode(e.schema.data)):void 0;if(i!=null){if(typeof i!="object")throw new Error(`Invalid schema, expected JSON object, got ${typeof i}`);const{datatypes:r,postprocessValue:c}=dm(i,e.schema.name);s=r,a=u=>c(JSON.parse(t.decode(u)))}}return{deserialize:a,datatypes:s}}if(e.messageEncoding==="flatbuffer"){if(e.schema?.encoding!=="flatbuffer")throw new Error(`Message encoding ${e.messageEncoding} with ${e.schema==null?"no encoding":`schema encoding '${e.schema.encoding}'`} is not supported (expected flatbuffer)`);return ym(e.schema.name,e.schema.data)}if(e.messageEncoding==="protobuf"){if(e.schema?.encoding!=="protobuf")throw new Error(`Message encoding ${e.messageEncoding} with ${e.schema==null?"no encoding":`schema encoding '${e.schema.encoding}'`} is not supported (expected protobuf)`);return Am(e.schema.name,e.schema.data)}if(e.messageEncoding==="ros1"){if(e.schema?.encoding!=="ros1msg")throw new Error(`Message encoding ${e.messageEncoding} with ${e.schema==null?"no encoding":`schema encoding '${e.schema.encoding}'`} is not supported (expected ros1msg)`);const t=new TextDecoder().decode(e.schema.data),s=(0,Ws.parse)(t),a=new bs.MessageReader(s);return{datatypes:Xo(s,e.schema.name),deserialize:i=>a.readMessage(i)}}if(e.messageEncoding==="cdr"){if(e.schema?.encoding!=="ros2msg"&&e.schema?.encoding!=="ros2idl"&&e.schema?.encoding!=="omgidl")throw new Error(`Message encoding ${e.messageEncoding} with ${e.schema==null?"no encoding":`schema encoding '${e.schema.encoding}'`} is not supported (expected "ros2msg" or "ros2idl")`);const t=new TextDecoder().decode(e.schema.data);if(e.schema.encoding==="omgidl"){const s=(0,fm.parseIDL)(t),a=new hm.MessageReader(e.schema.name,s);return{datatypes:bm(s),deserialize:r=>a.readMessage(r)}}else{const a=e.schema.encoding==="ros2idl"?(0,gm.parseRos2idl)(t):(0,Ws.parse)(t,{ros2:!0}),i=new Gs.MessageReader(a);return{datatypes:Xo(a,e.schema.name),deserialize:r=>i.readMessage(r)}}}throw new Error(`Unsupported encoding ${e.messageEncoding}`)}var xm=o(48653);class Jo{#e=new Map;#t;problems(){return this.#t??=Array.from(this.#e.values())}addProblem(t,s){console[s.severity].call(console,"Player problem",t,s),this.#e.set(t,s),this.#t=void 0}hasProblem(t){return this.#e.has(t)}removeProblem(t){const s=this.#e.delete(t);return s&&(this.#t=void 0),s}removeProblems(t){let s=!1;for(const[a,i]of this.#e)t(a,i)&&this.#e.delete(a)&&(s=!0);return s&&(this.#t=void 0),s}clear(){this.#e.clear(),this.#t=void 0}}function vi(e,t){const s=[],a=new Set([t]),i=[t];for(;i.length>0;){const r=i.pop();if(r==null)throw new Error("Invariant violation - Array.pop() when length > 0");const c=e.get(r);if(!c)throw new Error(`While searching datatypes for "${t}", could not find datatype "${r}"`);const u=r===t?{definitions:c.definitions}:{name:r,definitions:c.definitions};s.push(u);for(const p of c.definitions)p.isComplex===!0&&!a.has(p.type)&&(i.push(p.type),a.add(p.type))}return s}var jt=o(72841),Em=o(48834).Buffer;class Cm{writeMessage(t){return new Uint8Array(Em.from(JSON.stringify(t)??""))}}class Sm{#e;#t=!1;binaryType="";protocol="";onerror=void 0;onopen=void 0;onclose=void 0;onmessage=void 0;constructor(t,s){this.#e=new Worker(new URL(o.p+o.u(1478),o.b)),this.#n({type:"open",data:{wsUrl:t,protocols:s}}),this.#e.onerror=a=>{this.onerror&&this.onerror(a)},this.#e.onmessage=a=>{switch(a.data.type){case"open":this.onopen&&(this.protocol=a.data.protocol,this.onopen(a.data));break;case"close":this.#t=!0,this.#e.terminate(),this.onclose&&this.onclose(a.data);break;case"error":this.onerror&&this.onerror(a.data);break;case"message":this.onmessage&&this.onmessage(a.data);break}}}close(){this.#t||this.#n({type:"close",data:void 0})}send(t){this.#n({type:"data",data:t})}#n(t){if(this.#t)throw Error("Can't send message over closed websocket connection");this.#e.postMessage(t)}}var Tm="../../packages/studio-base/src/players/FoxgloveWebSocketPlayer",Pm=o(48834).Buffer;const Pn=q.ZP.getLogger(Tm),xs=new TextEncoder,Im=new TextDecoder,Mm=2e3,Dm=Object.freeze({sec:0,nsec:0}),qo="get-all-params",Bm=15e3,Es=["ros1","cdr"],Ai=["json",...Es],wm="json",bi=["json",...Es];class Rm{#e;#t;#n;#s;#i=(0,Kt.Z)();#o=[];#a=[];#c;#r;#l=!1;#y;#u=new Map;#b=new Map;#x=[];#m=0;#f;#D=!1;#P=ke.m.INITIALIZING;#d=new Jo;#Z=0;#C;#I;#v;#B;#S;#U=!1;#p=new Set;#A=new Map;#w=new Map;#N=new Map;#R=new Map;#g=new Set;#j=new Set;#h=new Map;#E;#G;#M;#F=[];#O=new Map;#k;#Q=new Map;#T=new Map;#Y;#z;#V;#W=0;#se=0;#H=new Map;#X=new Map;#K=new Map;constructor({url:t,metricsCollector:s,sourceId:a}){this.#f=s,this.#t=t,this.#n=t,this.#f.playerConstructed(),this.#e=a,this.#I={sourceId:this.#e,parameters:{url:this.#t}},this.#$()}#$=()=>{if(!this.#l){if(this.#s!=null)throw new Error("Attempted to open a second Foxglove WebSocket connection");Pn.info(`Opening connection to ${this.#t}`),this.#M=setTimeout(()=>{this.#s?.close()},1e4),this.#s=new jt.Xq({ws:typeof Worker<"u"?new Sm(this.#t,[jt.Xq.SUPPORTED_SUBPROTOCOL]):new WebSocket(this.#t,[jt.Xq.SUPPORTED_SUBPROTOCOL])}),this.#s.on("open",()=>{if(!this.#l){this.#M!=null&&clearTimeout(this.#M),this.#P=ke.m.PRESENT,this.#te(),this.#d.clear(),this.#R.clear(),this.#N.clear(),this.#Q.clear(),this.#T.clear(),this.#O.clear();for(const t of this.#A.keys())this.#p.add(t);this.#w.clear(),this.#A.clear(),this.#C=void 0,this.#Y=void 0,this.#z=void 0,this.#V=void 0,this.#b=new Map,this.#h=new Map}}),this.#s.on("error",t=>{Pn.error(t),t?.message!=null&&t.message.includes("insecure WebSocket connection")&&(this.#d.addProblem("ws:connection-failed",{severity:"error",message:"Insecure WebSocket connection",tip:`Check that the WebSocket server at ${this.#t} is reachable and supports protocol version ${jt.Xq.SUPPORTED_SUBPROTOCOL}.`}),this.#L())}),this.#s.on("close",t=>{Pn.info("Connection closed:",t),this.#P=ke.m.RECONNECTING,this.#E!=null&&(clearInterval(this.#E),this.#E=void 0),this.#M!=null&&clearTimeout(this.#M),this.#s?.close(),this.#s=void 0,this.#d.addProblem("ws:connection-failed",{severity:"error",message:"Connection failed",tip:`Check that the WebSocket server at ${this.#t} is reachable and supports protocol version ${jt.Xq.SUPPORTED_SUBPROTOCOL}.`}),this.#L(),this.#G=setTimeout(this.#$,3e3)}),this.#s.on("serverInfo",t=>{Array.isArray(t.capabilities)||this.#d.addProblem("ws:invalid-capabilities",{severity:"warn",message:`Server sent an invalid or missing capabilities field: '${t.capabilities}'`});const s=t.sessionId??(0,Kt.Z)();this.#i!==s&&this.#te(),this.#i=s,this.#n=`${this.#t}
${t.name}`,this.#o=Array.isArray(t.capabilities)?t.capabilities:[],this.#U=this.#o.includes(jt.$8.time),this.#c=t.supportedEncodings,this.#b=new Map,this.#U&&(this.#S=void 0);const a=t.metadata?.ROS_DISTRO;if(a){const i=a,r=["melodic","noetic"].includes(i);this.#C=r?"ros1":"ros2";const c=r?vs.default.ros1:["foxy","galactic"].includes(i)?vs.default.ros2galactic:vs.default.ros2humble,u=new Map;for(const p in c){const h=c[p];u.set(p,h)}this.#ne(u)}if(t.capabilities.includes(jt.$8.clientPublish)&&(this.#a=this.#a.concat(ke.C.advertise),this.#oe()),t.capabilities.includes(jt.$8.services)){this.#k=t.supportedEncodings?.find(r=>bi.includes(r));const i="callService:unsupportedEncoding";this.#k?(this.#a=this.#a.concat(ke.C.callServices),this.#d.removeProblem(i)):this.#d.addProblem(i,{severity:"warn",message:`Calling services is disabled as no compatible encoding could be found.             The server supports [${t.supportedEncodings?.join(", ")}],             but Studio only supports [${bi.join(", ")}]`})}t.capabilities.includes(jt.$8.parameters)&&(this.#a=this.#a.concat(ke.C.getParameters,ke.C.setParameters),this.#E=setInterval(()=>{this.#s?.getParameters([],qo)},Bm),this.#s?.getParameters([],qo)),t.capabilities.includes(jt.$8.connectionGraph)&&this.#s?.subscribeConnectionGraph(),t.capabilities.includes(jt.$8.assets)&&(this.#a=this.#a.concat(ke.C.assets)),this.#L()}),this.#s.on("status",t=>{const s=`FoxgloveWebSocket: ${t.message}`;t.level===jt.wR.INFO?Pn.info(s):t.level===jt.wR.WARNING?Pn.warn(s):Pn.error(s);const a={message:t.message,severity:jm(t.level)};t.message==="Send buffer limit reached"&&(a.tip="Server is dropping messages to the client. Check if you are subscribing to large or frequent topics or adjust your server send buffer limit."),this.#d.addProblem(t.message,a),this.#L()}),this.#s.on("advertise",t=>{for(const s of t){let a;try{let c,u;if(s.encoding==="json"&&(s.schemaEncoding==null||s.schemaEncoding==="jsonschema"))c="jsonschema",u=xs.encode(s.schema);else if(s.encoding==="protobuf"&&(s.schemaEncoding==null||s.schemaEncoding==="protobuf")){if(c="protobuf",u=new Uint8Array(is.length(s.schema)),is.decode(s.schema,u,0)!==u.byteLength)throw new Error(`Failed to decode base64 schema on channel ${s.id}`)}else if(s.encoding==="flatbuffer"&&(s.schemaEncoding==null||s.schemaEncoding==="flatbuffer")){if(c="flatbuffer",u=new Uint8Array(is.length(s.schema)),is.decode(s.schema,u,0)!==u.byteLength)throw new Error(`Failed to decode base64 schema on channel ${s.id}`)}else if(s.encoding==="ros1"&&(s.schemaEncoding==null||s.schemaEncoding==="ros1msg"))c="ros1msg",u=xs.encode(s.schema);else if(s.encoding==="cdr"&&(s.schemaEncoding==null||["ros2idl","ros2msg","omgidl"].includes(s.schemaEncoding)))c=s.schemaEncoding??"ros2msg",u=xs.encode(s.schema);else{const p=s.schemaEncoding?`Unsupported combination of message / schema encoding: (${s.encoding} / ${s.schemaEncoding})`:`Unsupported message encoding ${s.encoding}`;throw new Error(p)}a=$o({messageEncoding:s.encoding,schema:{name:s.schemaName,encoding:c,data:u}})}catch(c){this.#g.add(s.id),this.#d.addProblem(`schema:${s.topic}`,{severity:"error",message:`Failed to parse channel schema on ${s.topic}`,error:c}),this.#L();continue}const i=this.#N.get(s.topic);if(i&&!(0,T.isEqual)(s,i.channel)){this.#d.addProblem(`duplicate-topic:${s.topic}`,{severity:"error",message:`Multiple channels advertise the same topic: ${s.topic} (${i.channel.id} and ${s.id})`}),this.#L();continue}const r={channel:s,parsedChannel:a};this.#R.set(s.id,r),this.#N.set(s.topic,r)}this.#J(),this.#L(),this.#q()}),this.#s.on("unadvertise",t=>{for(const s of t){const a=this.#R.get(s);if(!a){this.#g.delete(s)||(this.#d.addProblem(`unadvertise:${s}`,{severity:"error",message:`Server unadvertised channel ${s} that was not advertised`}),this.#L());continue}for(const[i,{channel:r}]of this.#w)r.id===s&&(this.#w.delete(i),this.#A.delete(r.topic),this.#s?.unsubscribe(i),this.#p.add(r.topic));this.#R.delete(s),this.#N.delete(a.channel.topic)}this.#J(),this.#L()}),this.#s.on("message",({subscriptionId:t,data:s})=>{this.#D||(this.#D=!0,this.#f.recordTimeToFirstMsgs());const a=this.#w.get(t);if(!a){this.#j.has(t)||(this.#d.addProblem(`message-missing-subscription:${t}`,{severity:"warn",message:`Received message on unknown subscription id: ${t}. This might be a WebSocket server bug.`}),this.#L());return}try{this.#m+=s.byteLength;const i=this.#_(),r=a.channel.topic;this.#x.push({topic:r,receiveTime:i,message:a.parsedChannel.deserialize(s),sizeInBytes:s.byteLength,schemaName:a.channel.schemaName});const c=new Map(this.#u);let u=c.get(r);u||(u={numMessages:0},c.set(r,u)),u.numMessages++,this.#u=c}catch(i){this.#d.addProblem(`message:${a.channel.topic}`,{severity:"error",message:`Failed to parse message on ${a.channel.topic}`,error:i})}this.#L()}),this.#s.on("time",({timestamp:t})=>{if(!this.#U)return;const s=(0,te.fromNanoSec)(t);this.#S!=null&&(0,te.isLessThan)(s,this.#S)&&(this.#Z++,this.#x=[]),this.#S=s,this.#L()}),this.#s.on("parameterValues",({parameters:t,id:s})=>{const a=t.map(u=>u.type==="byte_array"?{...u,value:Uint8Array.from(atob(u.value),p=>p.charCodeAt(0))}:u),i=t.map(u=>[u.name,u.type]),r=new Map(i),c=a.filter(u=>!this.#h.has(u.name));if(s===qo)this.#h=new Map(a.map(u=>[u.name,u.value])),this.#K=r;else{const u=new Map(this.#h);a.forEach(p=>u.set(p.name,p.value)),this.#h=u;for(const[p,h]of r)this.#K.set(p,h)}this.#L(),c.length>0&&this.#o.includes(jt.$8.parametersSubscribe)&&this.#s?.subscribeParameterUpdates(c.map(u=>u.name))}),this.#s.on("advertiseServices",t=>{if(!this.#k)return;let s;if(this.#k==="json")s="jsonschema";else if(this.#k==="ros1")s="ros1msg";else if(this.#k==="cdr")s="ros2msg";else throw new Error(`Unsupported encoding "${this.#k}"`);for(const a of t){const i=`${a.type}_Request`,r=`${a.type}_Response`,c=$o({messageEncoding:this.#k,schema:{name:i,encoding:s,data:xs.encode(a.requestSchema)}}),u=$o({messageEncoding:this.#k,schema:{name:r,encoding:s,data:xs.encode(a.responseSchema)}}),p=vi(c.datatypes,i),h=Es.includes(this.#k)?this.#k==="ros1"?new bs.MessageWriter(p):new Gs.MessageWriter(p):new Cm;this.#ne(c.datatypes),this.#ne(u.datatypes);const f={service:a,parsedResponse:u,requestMessageWriter:h};this.#Q.set(a.name,f)}this.#L()}),this.#s.on("unadvertiseServices",t=>{for(const s of t){const a=Object.values(this.#Q).find(i=>i.service.id===s);a&&this.#Q.delete(a.service.name)}}),this.#s.on("serviceCallResponse",t=>{const s=this.#T.get(t.callId);if(!s){this.#d.addProblem(`callService:${t.callId}`,{severity:"error",message:"Received a response for a service for which no callback was registered"});return}s(t),this.#T.delete(t.callId)}),this.#s.on("connectionGraphUpdate",t=>{if(t.publishedTopics.length>0||t.removedTopics.length>0){const s=new Map(this.#Y??new Map);for(const{name:a,publisherIds:i}of t.publishedTopics)s.set(a,new Set(i));t.removedTopics.forEach(a=>s.delete(a)),this.#Y=s}if(t.subscribedTopics.length>0||t.removedTopics.length>0){const s=new Map(this.#z??new Map);for(const{name:a,subscriberIds:i}of t.subscribedTopics)s.set(a,new Set(i));t.removedTopics.forEach(a=>s.delete(a)),this.#z=s}if(t.advertisedServices.length>0||t.removedServices.length>0){const s=new Map(this.#V??new Map);for(const{name:a,providerIds:i}of t.advertisedServices)s.set(a,new Set(i));t.removedServices.forEach(a=>s.delete(a)),this.#V=s}this.#L()}),this.#s.on("fetchAssetResponse",t=>{const s=this.#H.get(t.requestId);if(!s)throw Error("Received a response for a fetch asset request for which no callback was registered");s(t),this.#T.delete(t.requestId)})}};#J(){const t=Array.from(this.#R.values(),i=>({name:i.channel.topic,schemaName:i.channel.schemaName})),s=new Set(t.map(i=>i.name)),a=new Map(this.#u);for(const i of a.keys())s.has(i)||a.delete(i);this.#u=a,this.#y=t;for(const{parsedChannel:i}of this.#R.values())this.#ne(i.datatypes);this.#L()}#L=(0,zn.HF)(()=>{if(!this.#r||this.#l)return Promise.resolve();if(!this.#y)return this.#r({name:this.#n,presence:this.#P,progress:{},capabilities:this.#a,profile:void 0,playerId:this.#i,activeData:void 0,problems:this.#d.problems(),urlState:this.#I});const t=this.#_();(!this.#v||(0,te.isLessThan)(t,this.#v))&&(this.#v=t),(!this.#B||(0,te.isGreaterThan)(t,this.#B))&&(this.#B=t);const s=this.#x;return this.#x=[],this.#r({name:this.#n,presence:this.#P,progress:{},capabilities:this.#a,profile:this.#C,playerId:this.#i,problems:this.#d.problems(),urlState:this.#I,activeData:{messages:s,totalBytesReceived:this.#m,startTime:this.#v,endTime:this.#B,currentTime:t,isPlaying:!0,speed:1,lastSeekTime:this.#Z,topics:this.#y,topicStats:this.#u,datatypes:this.#b,parameters:this.#h,publishedTopics:this.#Y,subscribedTopics:this.#z,services:this.#V}})});setListener(t){this.#r=t,this.#L()}close(){this.#l=!0,this.#s?.close(),this.#f.close(),this.#D=!1,this.#G!=null&&(clearTimeout(this.#G),this.#G=void 0),this.#E!=null&&(clearInterval(this.#E),this.#E=void 0)}setSubscriptions(t){const s=new Set(t.map(({topic:i})=>i));if(!this.#s||this.#l){this.#p=s;return}for(const i of s)this.#A.has(i)||this.#p.add(i);const a=new Map(this.#u);for(const[i,r]of this.#A)s.has(i)||(this.#s.unsubscribe(r),this.#A.delete(i),this.#w.delete(r),this.#j.add(r),a.delete(i),setTimeout(()=>this.#j.delete(r),Mm));this.#u=a;for(const i of this.#p)s.has(i)||this.#p.delete(i);this.#q()}#q(){if(this.#s)for(const t of this.#p){const s=this.#N.get(t);if(s){const a=this.#s.subscribe(s.channel.id);this.#p.delete(t),this.#A.set(t,a),this.#w.set(a,s)}}}setPublishers(t){const s=(0,T.uniqWith)(t,T.isEqual);if(!this.#s||this.#l||!this.#a.includes(ke.C.advertise)){this.#F=s;return}const a=Array.from(this.#O.values()),i=a.filter(c=>s.find(({topic:u,schemaName:p})=>c.topic===u&&c.schemaName===p)==null),r=s.filter(({topic:c,schemaName:u})=>a.find(p=>p.topic===c&&p.schemaName===u)==null);for(const c of i)this.#ae(c);for(const c of r)this.#ee(c);(i.length>0||r.length>0)&&this.#L()}setParameter(t,s){if(!this.#s)throw new Error("Attempted to set parameters without a valid Foxglove WebSocket connection");Pn.debug(`FoxgloveWebSocketPlayer.setParameter(key=${t}, value=${s})`);const a=s instanceof Uint8Array,i=a?btoa(Im.decode(s)):s;this.#s.setParameters([{name:t,value:i,type:a?"byte_array":this.#K.get(t)}],(0,Kt.Z)()),this.#h.set(t,s),this.#L()}publish({topic:t,msg:s}){if(!this.#s)throw new Error("Attempted to publish without a valid Foxglove WebSocket connection");const a=this.#O.get(t);if(!a)throw new Error(`Tried to publish on topic '${t}' that has not been advertised before.`);if(a.encoding==="json"){const i=(c,u)=>ArrayBuffer.isView(u)?Array.from(u):u,r=Pm.from(JSON.stringify(s,i)??"");this.#s.sendMessage(a.id,r)}else if(Es.includes(a.encoding)&&a.messageWriter!=null){const i=a.messageWriter.writeMessage(s);this.#s.sendMessage(a.id,i)}}async callService(t,s){if(!this.#s)throw new Error(`Attempted to call service ${t} without a valid Foxglove WebSocket connection.`);if(s==null||typeof s!="object")throw new Error("FoxgloveWebSocketPlayer#callService request must be an object.");const a=this.#Q.get(t);if(!a)throw new Error(`Tried to call service '${t}' that has not been advertised before.`);const{service:i,parsedResponse:r,requestMessageWriter:c}=a,u={serviceId:i.id,callId:++this.#W,encoding:this.#k,data:new DataView(new Uint8Array().buffer)},p=c.writeMessage(s);return u.data=new DataView(p.buffer),this.#s.sendServiceCallRequest(u),await new Promise((h,f)=>{this.#T.set(u.callId,m=>{try{const y=r.deserialize(m.data);h(y)}catch(y){f(y)}})})}async fetchAsset(t){if(this.#s){if(!this.#o.includes(jt.$8.assets))throw new Error(`Fetching assets (${t}) is not supported for FoxgloveWebSocketPlayer`)}else throw new Error(`Attempted to fetch assset ${t} without a valid Foxglove WebSocket connection.`);let s=this.#X.get(t);return s?await s:(s=new Promise((a,i)=>{const r=this.#X.get(t);if(r){a(r);return}const c=++this.#se;this.#H.set(c,u=>{if(u.status===jt.ep.SUCCESS){const p={uri:t,data:new Uint8Array(u.data.buffer,u.data.byteOffset,u.data.byteLength)};a(p)}else i(new Error(`Failed to fetch asset: ${u.error}`))}),this.#s?.fetchAsset(t,c)}),this.#X.set(t,s),await s)}setGlobalVariables(){}#_(){return this.#U||(this.#S=this.#P===ke.m.PRESENT?(0,te.fromMillis)(Date.now()):this.#S),this.#S??Dm}#oe(){if(!(!this.#s||this.#l)&&this.#F.length!==0){this.#d.removeProblems(t=>t.startsWith("pub:"));for(const t of this.#F)this.#ee(t);this.#F=[],this.#L()}}#ee(t){if(!this.#s)return;const s=this.#c?this.#c.find(f=>Ai.includes(f)):wm,{topic:a,schemaName:i,options:r}=t,c=`pub:encoding:${a}`,u=`pub:msgdef:${a}`;if(!s){this.#d.addProblem(c,{severity:"warn",message:`Cannot advertise topic '${a}': Server does not support one of the following encodings for client-side publishing: ${Ai}`});return}let p;if(Es.includes(s)){let f;try{const m=r?.datatypes??this.#b;if(!(m instanceof Map))throw new Error("Datatypes option must be a map");f=vi(m,i)}catch(m){Pn.debug(m),this.#d.addProblem(u,{severity:"warn",message:`Unknown message definition for "${a}"`,tip:`Try subscribing to the topic "${a}" before publishing to it`});return}p=s==="ros1"?new bs.MessageWriter(f):new Gs.MessageWriter(f)}const h=this.#s.advertise({topic:a,encoding:s,schemaName:i});this.#O.set(a,{id:h,topic:a,encoding:s,schemaName:i,messageWriter:p});for(const f of[c,u])this.#d.hasProblem(f)&&this.#d.removeProblem(f)}#ae(t){if(!this.#s)return;this.#s.unadvertise(t.id),this.#O.delete(t.topic);const s=[`pub:encoding:${t.topic}`,`pub:msgdef:${t.topic}`];for(const a of s)this.#d.hasProblem(a)&&this.#d.removeProblem(a)}#te(){this.#v=void 0,this.#B=void 0,this.#S=void 0,this.#u=new Map,this.#x=[],this.#m=0,this.#D=!1,this.#d.clear(),this.#h=new Map,this.#X.clear();for(const[t,s]of this.#H)s({op:jt._y.FETCH_ASSET_RESPONSE,status:jt.ep.ERROR,requestId:t,error:"WebSocket connection reset"});this.#H.clear(),this.#K.clear()}#ne(t){let s;const a=["ros1","ros2"].includes(this.#C??"");for(const[i,r]of t){const c=this.#b.get(i);if(c&&!(0,xm.isMsgDefEqual)(r,c))this.#d.addProblem(`schema-changed-${i}`,{message:`Definition of schema '${i}' has changed during the server's runtime`,severity:"error"});else{s==null&&(s=new Map(this.#b)),s.set(i,r);const u=xi(i);a&&u!==i&&s.set(u,{...r,name:r.name?xi(r.name):void 0})}}s!=null&&(this.#b=s)}}function xi(e){const t=e.split("/");return t.length===2?`${t[0]}/msg/${t[1]}`:e}function jm(e){return e===jt.wR.INFO?"info":e===jt.wR.WARNING?"warn":"error"}class Lm{id="foxglove-websocket";type="connection";displayName="Foxglove WebSocket";iconName="Flow";description="Connect to a ROS 1, ROS 2, or custom system using the Foxglove WebSocket protocol. For ROS systems, be sure to first install the foxglove_bridge ROS package.";docsLinks=[{label:"ROS 1",url:"https://foxglove.dev/docs/studio/connection/ros1#foxglove-websocket"},{label:"ROS 2",url:"https://foxglove.dev/docs/studio/connection/ros2#foxglove-websocket"},{label:"custom data",url:"https://foxglove.dev/docs/studio/connection/custom#foxglove-websocket"}];formConfig={fields:[{id:"url",label:"WebSocket URL",defaultValue:"ws://localhost:8765",validate:t=>{try{const s=new URL(t);return s.protocol!=="ws:"&&s.protocol!=="wss:"?new Error(`Invalid protocol: ${s.protocol}`):void 0}catch{return new Error("Enter a valid url")}}}]};initialize(t){const s=t.params?.url;if(s)return new Rm({url:s,metricsCollector:t.metricsCollector,sourceId:this.id})}}class Om{setProperty(t,s){}playerConstructed(){}play(t){}seek(t){}setSpeed(t){}pause(){}close(){}setSubscriptions(t){}recordPlaybackTime(t){}recordBytesReceived(t){}recordDataProviderPerformance(){}recordUncachedRangeRequest(){}recordTimeToFirstMsgs(){}recordDataProviderInitializePerformance(){}recordDataProviderStall(){}}async function Ei(e){await new Promise(t=>setTimeout(t,e))}const Nm=Object.freeze({sec:0,nsec:0});class km{#e;#t;#n;constructor(t,s){this.#e=t,this.#n=s}async next(){return this.#n?.aborted===!0?void 0:(await this.#e.next()).value}async nextBatch(t){const s=await this.next();if(!s)return;if(s.type==="problem")return[s];const a=[s];let i=Nm;switch(s.type){case"stamp":i=(0,te.add)(s.stamp,{sec:0,nsec:t*1e6});break;case"message-event":i=(0,te.add)(s.msgEvent.receiveTime,{sec:0,nsec:t*1e6});break}for(;;){const r=await this.next();if(!r)return a;if(a.push(r),r.type==="problem"||r.type==="stamp"&&(0,te.compare)(r.stamp,i)>0||r.type==="message-event"&&(0,te.compare)(r.msgEvent.receiveTime,i)>0)break}return a}async readUntil(t){if(this.#n?.aborted===!0)return;const a=[];if(this.#t?.type==="stamp"&&(0,te.compare)(this.#t.stamp,t)>=0||this.#t?.type==="message-event"&&(0,te.compare)(this.#t.msgEvent.receiveTime,t)>0)return a;for(this.#t&&(a.push(this.#t),this.#t=void 0);;){const i=await this.#e.next();if(this.#n?.aborted===!0)return;if(i.done===!0)break;const r=i.value;if(r.type==="stamp"&&(0,te.compare)(r.stamp,t)>=0){this.#t=r;break}if(r.type==="message-event"&&(0,te.compare)(r.msgEvent.receiveTime,t)>0){this.#t=r;break}a.push(r)}return a}async end(){await this.#e.return?.()}}var Zm="../../packages/studio-base/src/players/IterablePlayer/BlockLoader.ts";const rs=q.ZP.getLogger(Zm);class Fm{#e;#t=[];#n;#s;#i;#o=new Map;#a=0;#c;#r=!1;#l=new zn.fQ;#y;constructor(t){this.#e=t.source,this.#n=t.start,this.#s=t.end,this.#a=t.cacheSizeBytes,this.#c=t.problemManager,this.#y=new AbortController;const s=Number((0,te.toNanoSec)((0,te.subtract)(this.#s,this.#n)))+1;if(s>Number.MAX_SAFE_INTEGER*.9)throw new Error("Time range is too long to be supported");this.#i=Math.ceil(Math.max(t.minBlockDurationNs,s/t.maxBlocks));const a=Math.ceil(s/this.#i);rs.debug(`Block count: ${a}`),this.#t=Array.from({length:a})}setTopics(t){if(!(0,T.isEqual)(t,this.#o)){this.#y.abort(),this.#l.notifyAll(),rs.debug(`Preloaded topics: ${[...t].join(", ")}`);for(const s of this.#t)if(s){const a=Object.keys(s.messagesByTopic),i=new Map(t);for(const r of a)this.#o.get(r)===t.get(r)&&i.delete(r);s.needTopics=i}this.#o=t}}#u(){const t=this.#o;let s=0;for(let a=0;a<this.#t.length;a++){const i=this.#t[a];if(i){let r=0;const c={...i.messagesByTopic},u=Object.keys(c);for(const p of u)if(!t.has(p)&&c[p]){for(const h of c[p])r+=h.sizeInBytes;delete c[p]}r>0&&(this.#t[a]={...i,messagesByTopic:c,sizeInBytes:i.sizeInBytes-r},s+=r)}}return s}async stopLoading(){rs.debug("Stop loading blocks"),this.#r=!0,this.#l.notifyAll()}async startLoading(t){for(rs.debug("Start loading process"),this.#r=!1;!this.#r;){this.#y=new AbortController;const s=this.#o;if(await this.#b({progress:t.progress}),this.#r)break;this.#o===s&&await this.#l.wait()}}async#b(t){const s=this.#o;if(s.size===0){t.progress(this.#x(s));return}if(this.#t.length===0)return;rs.debug("loading blocks",{topics:s});const{progress:a}=t;let i=this.#m();for(let r=0;r<this.#t.length;++r){let c;{const y=this.#t[r];if(y?.needTopics.size===0)continue;c=y?.needTopics??s}let u=r;for(let y=r+1;y<this.#t.length;++y){const w=this.#t[y]?.needTopics??s;if(!(0,T.isEqual)(c,w))break;u=y}const p=this.#f(r),h=(0,te.clampTime)(this.#D(u),this.#n,this.#s),f={topics:c,start:p,end:h,consumptionType:"full"},m=this.#e.getMessageCursor?.({...f,abort:this.#y.signal})??new km(this.#e.messageIterator(f),this.#y.signal);rs.debug("Loading range",{blockId:r,endBlockId:u});for(let y=r;y<=u;++y){const w=(0,te.clampTime)(this.#D(y),this.#n,this.#s),k=await m.readUntil(w);if(!k){await m.end();return}const W={};for(const K of c.keys())W[K]=[];let G=0;for(const K of k){if(K.type==="problem"){this.#c.addProblem(`connid-${K.connectionId}`,K.problem);continue}if(K.type!=="message-event")continue;const ye=K.msgEvent.topic,re=W[ye],se=`unexpected-topic-${ye}`;if(!re){this.#c.addProblem(se,{severity:"error",message:`Received a message on an unexpected topic: ${ye}.`});continue}this.#c.removeProblem(se);const _=K.msgEvent.sizeInBytes;if(i+=_,re.push(K.msgEvent),G+=_,i<this.#a){this.#c.removeProblem("cache-full");continue}const O=this.#u();if(i-=O,i>this.#a){this.#c.addProblem("cache-full",{severity:"error",message:`Cache is full. Preloading for topics [${Array.from(c).join(", ")}] has stopped on block ${y+1}/${this.#t.length}.`,tip:"Try reducing the number of topics that require preloading at a given time (e.g. in plots), or try to reduce the time range of the file."}),a(this.#x(s));return}}const J=this.#t[y];this.#t[y]={needTopics:new Map,messagesByTopic:{...J?.messagesByTopic,...W},sizeInBytes:(J?.sizeInBytes??0)+G},a(this.#x(s))}await m.end(),r=u}}#x(t){return{fullyLoadedFractionRanges:(0,wa.og)((0,on.Z)(this.#t,(a,i)=>{if(a){for(const r of t.keys())if(!a.messagesByTopic[r])return;return{start:i,end:i+1}}})).map(a=>({start:a.start/this.#t.length,end:a.end/this.#t.length})),messageCache:{blocks:this.#t.slice(),startTime:this.#n}}}#m(){return this.#t.reduce((t,s)=>s?t+s.sizeInBytes:t,0)}#f(t){return(0,te.add)(this.#n,(0,te.fromNanoSec)(BigInt(t)*BigInt(this.#i)))}#D(t){return(0,te.add)(this.#n,(0,te.fromNanoSec)(BigInt(t+1)*BigInt(this.#i)-1n))}}var Ci=o(30686);class Um{#e=0;#t=0;#n=new Array(4);enqueue(t){this.#t>=this.#n.length&&(this.#e===0?this.#s():this.#t=this.#t%this.#n.length),this.#e-this.#t===1&&this.#s(),this.#n[this.#t]=t,this.#t++}dequeue(){if(this.#e===this.#t)return;this.#e>=this.#n.length&&(this.#e=this.#e%this.#n.length);const t=this.#n[this.#e];return this.#n[this.#e]=void 0,this.#e+=1,t}size(){return this.#t>=this.#e?this.#t-this.#e:this.#n.length-this.#e+this.#t}capacity(){return this.#n.length}clear(){this.#n.length=0,this.#t=0,this.#e=0}#s(){const t=this.#n.length;if(this.#n.length=this.#n.length*2,this.#e<=this.#t)return;const s=this.#n.length;if(this.#t>=t/2){const a=t-this.#e,i=s-a;for(let r=0;r<a;++r)this.#n[i+r]=this.#n[this.#e+r],this.#n[this.#e+r]=void 0;this.#e=i}else{for(let a=0;a<this.#t;++a)this.#n[t+a]=this.#n[a],this.#n[a]=void 0;this.#t=t+this.#t}}}function Si(e,t){const s=e;if(s.length===0)return-1;let a=0,i=s.length-1;for(;a<=i;){const r=a+i>>1,c=s[r][0];if(c===t)return r;t<c?i=r-1:a=r+1}return~a}function zm(e,t){if(e.length===0)return-1;let s=0,a=e[0];for(let i=1;i<e.length;++i){const r=e[i];t(r,a)<0&&(s=i,a=r)}return s}var Wm="../../packages/studio-base/src/players/IterablePlayer/CachingIterableSource.ts";const Gm=q.ZP.getLogger(Wm);class _o extends Ci.Z{#e;#t=new Map;#n=[];#s=[{start:0,end:0}];#i;#o=0;#a;#c;#r={sec:0,nsec:0};#l=BigInt(0);#y=[];constructor(t,s){super(),this.#e=t,this.#a=s?.maxTotalSize??1073741824,this.#c=s?.maxBlockSize??52428800}async initialize(){return this.#i=await this.#e.initialize(),this.#i}async terminate(){this.#n.length=0,this.#t.clear()}loadedRanges(){return this.#s}async*messageIterator(t){if(!this.#i)throw new Error("Invariant: uninitialized");const s=t.end??this.#i.end,a=(0,te.toNanoSec)(s);(0,T.isEqual)(t.topics,this.#t)||(Gm.debug("topics changed - clearing cache, resetting range"),this.#t=t.topics,this.#n.length=0,this.#o=0,this.#u());let i=t.start??this.#i.start;const r=u=>(0,te.compare)(u.start,i)<=0&&(0,te.compare)(u.end,i)>=0,c=u=>(0,te.compare)(i,u.start)<0;for(this.#r=i,this.#y=this.#b(this.#r);!((0,te.compare)(i,s)>0);){const u=this.#n.findIndex(r);let p=this.#n[u];if(p&&(0,te.compare)(p.start,p.end)===0&&p.items.length===0){p=void 0,this.#n.splice(u,1);continue}if(p){const G=_o.#m(p.items,(0,te.toNanoSec)(i));for(let J=G;J<p.items.length;++J){const K=p.items[J];if(!K)break;if(K[0]>a)return;p.lastAccess=Date.now(),yield K[1]}i=(0,te.add)(p.end,{sec:0,nsec:1});continue}const h=i,f=this.#n.findIndex(c),m=this.#n[f];let y=m?(0,te.subtract)(m.start,{sec:0,nsec:1}):s;if((0,te.compare)(h,y)>0)throw new Error("Invariant: sourceReadStart > sourceReadEnd");(0,te.compare)(y,s)>0&&(y=s);const w=this.#e.messageIterator({topics:this.#t,start:h,end:y,consumptionType:t.consumptionType});let k=(0,te.toNanoSec)(h);const W=[];for await(const G of w){if(!p){const K={id:this.#l++,start:i,end:i,items:[],size:0,lastAccess:Date.now()},ye=(0,T.sortedIndexBy)(this.#n,K,re=>(0,te.toNanoSec)(re.start));this.#n.splice(ye,0,K),p=K,this.#u()}if(G.type==="message-event"||G.type==="stamp"){const K=G.type==="stamp"?G.stamp:G.msgEvent.receiveTime,ye=(0,te.toNanoSec)(K);if(ye>k){for(const re of W){const se=re[1],_=se.type==="message-event"?se.msgEvent.sizeInBytes:0;p.items.push(re),p.size+=_}W.length=0,p.lastAccess=Date.now(),p.end=(0,te.subtract)(K,{sec:0,nsec:1}),k=ye,this.#u()}}p.size>=this.#c&&(i=(0,te.add)(p.end,{sec:0,nsec:1}),p=void 0);const J=G.type==="message-event"?G.msgEvent.sizeInBytes:0;this.#x({activeBlock:p,sizeInBytes:J})&&this.#u(),this.#o+=J,W.push([k,G]),yield G}if(p){p.end=y,p.lastAccess=Date.now();for(const G of W){const J=G[1],K=J.type==="message-event"?J.msgEvent.sizeInBytes:0;p.items.push(G),p.size+=K}this.#u()}else{const G={id:this.#l++,start:i,end:y,items:W,size:0,lastAccess:Date.now()};for(const K of W){const ye=K[1],re=ye.type==="message-event"?ye.msgEvent.sizeInBytes:0;G.size+=re}const J=(0,T.sortedIndexBy)(this.#n,G,K=>(0,te.toNanoSec)(K.start));this.#n.splice(J,0,G),this.#u()}i=(0,te.add)(y,{sec:0,nsec:1})}}async getBackfillMessages(t){if(!this.#i)throw new Error("Invariant: uninitialized");const s=this.#n.findIndex(c=>(0,te.compare)(c.start,t.time)<=0&&(0,te.compare)(c.end,t.time)>=0),a=[],i=new Map(t.topics);for(let c=s;c>=0&&i.size>0;--c){const u=this.#n[c];if(!u)break;const p=(0,te.toNanoSec)(t.time);let h=Si(u.items,p);if(h<0)h=~h,h-=1;else for(let m=h+1;m<u.items.length&&u.items[m]?.[0]===p;++m)h=m;for(let m=h;m>=0;--m){const y=u.items[m];if(!y||y[1].type!=="message-event")continue;const w=y[1].msgEvent;i.has(w.topic)&&(i.delete(w.topic),a.push(w))}const f=this.#n[c-1];if(f&&(0,te.compare)((0,te.add)(f.end,{sec:0,nsec:1}),u.start)!==0)break}if(i.size===0)return a;const r=await this.#e.getBackfillMessages({...t,topics:i});return a.push(...r),a.sort((c,u)=>(0,te.compare)(c.receiveTime,u.receiveTime)),a}#u(){if(!this.#i)throw new Error("Invariant: uninitialized");const t=(0,te.toNanoSec)(this.#i.start),s=Number((0,te.toNanoSec)((0,te.subtract)(this.#i.end,this.#i.start)));if(s===0){this.#s=[{start:0,end:1}],this.emit("loadedRangesChange");return}if(this.#n.length===0){this.#s=[{start:0,end:0}],this.emit("loadedRangesChange");return}const a=[];let i;for(const r of this.#n){const c={start:(0,te.toNanoSec)(r.start),end:(0,te.toNanoSec)(r.end)};i?i.end+1n===c.start?i.end=c.end:(a.push({start:Number(i.start-t)/s,end:Number(i.end-t)/s}),i=c):i=c}i&&a.push({start:Number(i.start-t)/s,end:Number(i.end-t)/s}),this.#s=a,this.emit("loadedRangesChange")}setCurrentReadHead(t){this.#r=t}canReadMore(){return this.#o<this.#a?!0:this.#y.length>0}#b(t){if(this.#n.length===0)return[];const s=this.#n.map(p=>({id:p.id,start:p.start,end:p.end}));s.sort((p,h)=>(0,te.compare)(p.end,h.end));const a=s.findIndex(p=>(0,te.compare)(p.start,t)<=0&&(0,te.compare)(p.end,t)>=0);if(a===-1){const p=zm(this.#n,(f,m)=>f.lastAccess-m.lastAccess),h=this.#n[p];if(!h)throw new Error("Failed to retrieve oldest block from cache");return[h.id]}const i=s.splice(0,a).map(p=>p.id);let r,c=0;for(c=0;c<s.length;++c){const p=s[c],h=(0,te.toNanoSec)(p.start),f=(0,te.toNanoSec)(p.end);if(r==null||r+1n===h)r=f;else break}const u=s.splice(c).map(p=>p.id);return[...i,...u.reverse()]}#x(t){const{activeBlock:s,sizeInBytes:a}=t;if(this.#o+a<=this.#a||(this.#y=this.#b(this.#r),this.#y.length===0))return!1;const i=this.#y.splice(0,1)[0],r=this.#n.findIndex(u=>u.id===i),c=this.#n[r];if(c){if(c===s)throw new Error("Cannot evict the active cache block.");return this.#o-=c.size,this.#n.splice(r,1),!0}return!1}static#m(t,s){if(t[0]!=null&&t[0][0]>=s)return 0;let a=Si(t,s);if(a<0)return~a;for(let i=a-1;i>=0;--i){const r=t[i];if(r!=null&&r[0]!==s)break;a=i}return a}}var Qm="../../packages/studio-base/src/players/IterablePlayer/BufferedIterableSource.ts";const Qs=q.ZP.getLogger(Qm),Ym={sec:10,nsec:0},Hm={sec:1,nsec:0};class Vm extends Ci.Z{#e;#t=!1;#n=!1;#s=new zn.fQ;#i=new zn.fQ;#o=new Um;#a={sec:0,nsec:0};#c;#r;#l;#y;constructor(t,s){if(super(),this.#l=s?.readAheadDuration??Ym,this.#y=s?.minReadAheadDuration??Hm,this.#e=new _o(t),(0,te.compare)(this.#l,this.#y)<0)throw new Error("Invariant: readAheadDuration < minReadAheadDuration");this.#e.on("loadedRangesChange",()=>this.emit("loadedRangesChange"))}async initialize(){return this.#r=await this.#e.initialize(),this.#r}async#u(t){if(!this.#r)throw new Error("Invariant: uninitialized");if(t.topics.size===0){this.#t=!0;return}Qs.debug("Starting producer"),this.#o.clear();try{const s=this.#e.messageIterator({topics:t.topics,start:this.#a,consumptionType:"partial"});let a=(0,te.clampTime)((0,te.add)(this.#a,this.#l),this.#r.start,this.#r.end);for await(const i of s){if(this.#n)return;if(a=(0,te.add)(this.#a,this.#l),i.type==="stamp"&&(0,te.compare)(i.stamp,a)>=0){for(;(0,te.compare)(i.stamp,a)>=0;){if(this.#n)return;this.#o.enqueue(i),this.#s.notifyAll(),await this.#i.wait(),a=(0,te.add)(this.#a,this.#l)}continue}this.#o.enqueue(i);const r=i.type==="message-event"?i.msgEvent.receiveTime:void 0,c=(0,te.add)(this.#a,this.#y);r&&(0,te.compare)(r,c)<0||(this.#s.notifyAll(),this.#e.setCurrentReadHead(this.#a),!(r&&(0,te.compare)(r,a)<=0&&this.#e.canReadMore())&&this.#o.size()!==0&&await this.#i.wait())}}finally{this.#s.notifyAll(),this.#t=!0}Qs.debug("producer done")}async terminate(){this.#o.clear(),this.#e.removeAllListeners("loadedRangesChange"),await this.#e.terminate()}async stopProducer(){Qs.debug("Stopping producer"),this.#n=!0,this.#i.notifyAll(),await this.#c,this.#c=void 0}loadedRanges(){return this.#e.loadedRanges()}messageIterator(t){if(!this.#r)throw new Error("Invariant: uninitialized");if(this.#c)throw new Error("Invariant: BufferedIterableSource allows only one messageIterator");const s=t.start??this.#r.start;this.#a=s,this.#n=!1,this.#t=!1,this.#c=this.#u(t);const a=this;return async function*(){try{if(t.topics.size===0)return;for(;;){const r=a.#o.dequeue();if(!r){if(a.#t)break;await a.#s.wait();continue}r.type==="stamp"&&(a.#a=r.stamp),r.type==="message-event"&&(a.#a=r.msgEvent.receiveTime),a.#i.notifyAll(),yield r}}finally{Qs.debug("ending buffered message iterator"),await a.stopProducer()}}()}async getBackfillMessages(t){return await this.#e.getBackfillMessages(t)}}var Km="../../packages/studio-base/src/players/IterablePlayer/IterablePlayer.ts";const Qt=q.ZP.getLogger(Km),Xm=1e9,$m=100,Jm=1e8,qm=400,_m=BigInt(99*1e6);class ls{#e;#t;#n;#s="preinit";#i=!1;#o=!1;#a;#c=1;#r;#l;#y=!0;#u;#b=Date.now();#x=[];#m=new Map;#f=new Map;#D=[ke.C.setSpeed,ke.C.playbackControl];#P;#d;#Z=[];#C=new Map;#I=new Map;#v={};#B=(0,Kt.Z)();#S=[];#U=0;#p=!1;#A;#w;#N;#R=new Map;#g;#j=ke.m.INITIALIZING;#h;#E=new Jo;#G;#M;#F;#O;#k;#Q;#T;#Y;#z;constructor(t){const{metricsCollector:s,urlParams:a,source:i,name:r,enablePreload:c,sourceId:u}=t;this.#G=i,this.#M=new Vm(i),this.#t=r,this.#e=a,this.#d=s??new Om,this.#d.playerConstructed(),this.#y=c??!0,this.#Y=u,this.#T=(0,zn.HF)(this.#q.bind(this))}setListener(t){if(this.#a)throw new Error("Cannot setListener again");this.#a=t,this.#W("initialize")}startPlayback(){this.#V()}playUntil(t){this.#V({untilTime:t})}#V(t){if(!(this.#o||this.#z!=null||!this.#r||!this.#l)){if(t?.untilTime){if(this.#h&&(0,te.compare)(t.untilTime,this.#h)<=0)throw new Error("Invariant: playUntil time must be after the current time");this.#z=(0,te.clampTime)(t.untilTime,this.#r,this.#l)}this.#d.play(this.#c),this.#o=!0,this.#s==="idle"&&(!this.#n||this.#n==="idle")&&this.#W("play")}}pausePlayback(){this.#o&&(this.#d.pause(),this.#u=void 0,this.#o=!1,this.#z=void 0,this.#A=void 0,this.#s==="play"&&this.#W("idle"))}setPlaybackSpeed(t){this.#A=void 0,this.#c=t,this.#d.setSpeed(t),this.#T()}seekPlayback(t){if(this.#s==="preinit"||this.#s==="initialize"){Qt.debug(`Ignoring seek, state=${this.#s}`),this.#g=t;return}if(!this.#r||!this.#l)throw new Error("invariant: initialized but no start/end set");const s=(0,te.clampTime)(t,this.#r,this.#l);if(this.#g&&(0,te.compare)(this.#g,s)===0){Qt.debug("Ignoring seek, already seeking to this time");return}if(this.#h&&(0,te.compare)(this.#h,s)===0){Qt.debug("Ignoring seek, already at this time");return}this.#d.seek(s),this.#g=s,this.#z=void 0,this.#u=void 0,this.#A=void 0,this.#W("seek-backfill")}setSubscriptions(t){Qt.debug("set subscriptions",t),this.#Z=t,this.#d.setSubscriptions(t);const s=new Map(this.#Z.map(i=>[i.topic,i])),a=new Map((0,on.Z)(this.#Z,i=>i.preloadType==="full"?[i.topic,i]:void 0));(0,T.isEqual)(s,this.#C)&&(0,T.isEqual)(a,this.#I)||(this.#C=s,this.#I=a,this.#k?.setTopics(this.#I),(this.#s==="idle"||this.#s==="seek-backfill"||this.#s==="play")&&!this.#o&&this.#h&&(this.#g??=this.#h,this.#z=void 0,this.#u=void 0,this.#A=void 0,this.#W("seek-backfill")))}setPublishers(t){}setParameter(t,s){throw new Error("Parameter editing is not supported by this data source")}publish(t){throw new Error("Publishing is not supported by this data source")}async callService(){throw new Error("Service calls are not supported by this data source")}close(){this.#W("close")}setGlobalVariables(){}#W(t){Qt.debug(`Set next state: ${t}`),this.#n=t,this.#F?.abort(),this.#F=void 0,this.#se()}async#se(){if(!this.#i){this.#i=!0;try{for(;this.#n;){const t=this.#s=this.#n;switch(this.#n=void 0,Qt.debug(`Start state: ${t}`),t!=="idle"&&t!=="play"&&this.#O&&(Qt.debug("Ending playback iterator because next state is not IDLE or PLAY"),await this.#O.return?.(),this.#O=void 0),t){case"preinit":this.#T();break;case"initialize":await this.#X();break;case"start-play":await this.#J();break;case"idle":await this.#oe();break;case"seek-backfill":await this.#L();break;case"play":await this.#ee();break;case"close":await this.#ae();break;case"reset-playback-iterator":await this.#$()}Qt.debug(`Done state ${t}`)}}catch(t){Qt.error(t),this.#H(t.message,t),this.#T()}finally{this.#i=!1}}}#H(t,s){this.#p=!0,this.#E.addProblem("global-error",{severity:"error",message:t,error:s}),this.#o=!1}async#X(){this.#T();try{const{start:t,end:s,topics:a,profile:i,topicStats:r,problems:c,publishersByTopic:u,datatypes:p,name:h}=await this.#M.initialize();this.#g&&(this.#g=(0,te.clampTime)(this.#g,t,s)),this.#P=i,this.#r=t,this.#h=this.#g??t,this.#l=s,this.#R=u,this.#f=p,this.#t=h??this.#t;const f=new Map;for(const y of a){const w=f.get(y.name);if(w){c.push({severity:"warn",message:`Inconsistent datatype for topic: ${y.name}`,tip:`Topic ${y.name} has messages with multiple datatypes: ${w.schemaName}, ${y.schemaName}. This may result in errors during visualization.`});continue}f.set(y.name,y)}this.#x=Array.from(f.values()),this.#m=r;let m=0;for(const y of c)this.#E.addProblem(`init-problem-${m}`,y),m+=1;if(this.#y)try{this.#k=new Fm({cacheSizeBytes:Xm,source:this.#G,start:this.#r,end:this.#l,maxBlocks:qm,minBlockDurationNs:Jm,problemManager:this.#E})}catch(y){Qt.error(y);const w=(0,te.toRFC3339String)(this.#r),k=(0,te.toRFC3339String)(this.#l);this.#E.addProblem("block-loader",{severity:"warn",message:"Failed to initialize message preloading",tip:`The start (${w}) and end (${k}) of your data is too far apart.`,error:y})}this.#j=ke.m.PRESENT}catch(t){this.#H(`Error initializing: ${t.message}`,t)}this.#T(),!this.#p&&this.#r&&(await Ei($m),this.#k?.setTopics(this.#I),this.#Q=this.#te(),this.#W("start-play"))}async#K(){if(!this.#h)throw new Error("Invariant: Tried to reset playback iterator with no current time.");const t=(0,te.add)(this.#h,{sec:0,nsec:1});Qt.debug("Ending previous iterator"),await this.#O?.return?.(),await this.#M.stopProducer(),Qt.debug("Initializing forward iterator from",t),this.#O=this.#M.messageIterator({topics:this.#C,start:t,consumptionType:"partial"})}async#$(){if(!this.#h)throw new Error("Invariant: Tried to reset playback iterator with no current time.");await this.#K(),this.#W(this.#o?"play":"idle")}async#J(){if(!this.#r||!this.#l)throw new Error("Invariant: start and end must be set");if(this.#g){this.#W("seek-backfill");return}const t=(0,te.clampTime)((0,te.add)(this.#r,(0,te.fromNanoSec)(_m)),this.#r,this.#l);if(Qt.debug(`Playing from ${(0,te.toString)(this.#r)} to ${(0,te.toString)(t)}`),this.#O)throw new Error("Invariant. playbackIterator was already set");Qt.debug("Initializing forward iterator from",this.#r),this.#O=this.#M.messageIterator({topics:this.#C,start:this.#r,consumptionType:"partial"}),this.#w=void 0,this.#S=[];const s=[],a=setTimeout(()=>{this.#j=ke.m.BUFFERING,this.#T()},100);try{for(;;){const i=await this.#O.next();if(i.done===!0)break;const r=i.value;if(this.#n)return;if(r.type==="problem"){this.#E.addProblem(`connid-${r.connectionId}`,r.problem);continue}if(r.type==="stamp"&&(0,te.compare)(r.stamp,t)>=0){this.#N=r.stamp;break}if(r.type==="message-event"){if((0,te.compare)(r.msgEvent.receiveTime,t)>0){this.#w=r.msgEvent;break}s.push(r.msgEvent)}}}finally{clearTimeout(a)}this.#h=t,this.#S=s,this.#j=ke.m.PRESENT,this.#T(),this.#W("idle")}async#L(){if(!this.#r||!this.#l)throw new Error("invariant: stateSeekBackfill prior to initialization");if(!this.#g)return;const t=(0,te.clampTime)(this.#g,this.#r,this.#l);this.#w=void 0;const s=setTimeout(()=>{this.#j=ke.m.BUFFERING,this.#S=[],this.#h=t,this.#T()},100);try{this.#F=new AbortController;const a=await this.#M.getBackfillMessages({topics:this.#C,time:t,abortSignal:this.#F.signal});if(clearTimeout(s),this.#n)return;this.#S=a,this.#h=t,this.#b=Date.now(),this.#j=ke.m.PRESENT,this.#T(),await this.#K(),this.#W(this.#o?"play":"idle")}catch(a){if(this.#n&&a.name==="AbortError")Qt.debug("Aborted backfill");else throw a}finally{this.#n!=="seek-backfill"&&(this.#g=void 0),clearTimeout(s),this.#F=void 0}}async#q(){if(!this.#a)return;if(this.#p){await this.#a({name:this.#t,presence:ke.m.ERROR,progress:{},capabilities:this.#D,profile:this.#P,playerId:this.#B,activeData:void 0,problems:this.#E.problems(),urlState:{sourceId:this.#Y,parameters:this.#e}});return}const t=this.#S;this.#S=[];let s;this.#r&&this.#l&&this.#h&&(s={messages:t,totalBytesReceived:this.#U,currentTime:this.#h,startTime:this.#r,endTime:this.#l,isPlaying:this.#o,speed:this.#c,lastSeekTime:this.#b,topics:this.#x,topicStats:this.#m,datatypes:this.#f,publishedTopics:this.#R});const a={name:this.#t,presence:this.#j,progress:this.#v,capabilities:this.#D,profile:this.#P,playerId:this.#B,problems:this.#E.problems(),activeData:s,urlState:{sourceId:this.#Y,parameters:this.#e}};await this.#a(a)}async#_(){if(!this.#o)return;if(!this.#r||!this.#l)throw new Error("Invariant: start & end should be set before tick()");const t=performance.now(),s=this.#u!=null&&this.#u!==0?t-this.#u:20;this.#u=t;let a=Math.min(s*this.#c,300);if(this.#A!=null&&(a=this.#A*.9+a*.1),this.#A=a,!this.#h)throw new Error("Invariant: Tried to play with no current time.");const i=(0,te.add)(this.#h,(0,te.fromMillis)(a)),r=(0,te.clampTime)(i,this.#r,this.#z??this.#l);if(this.#N){if((0,te.compare)(this.#N,r)>=0){await this.#T.currentPromise,this.#h=r,this.#S=[],this.#T(),this.#z&&(0,te.compare)(this.#h,this.#z)>=0&&this.pausePlayback();return}this.#N=void 0}const c=[];if(this.#w){if((0,te.compare)(this.#w.receiveTime,r)>0){await this.#T.currentPromise,this.#h=r,this.#S=c,this.#T(),this.#z&&(0,te.compare)(this.#h,this.#z)>=0&&this.pausePlayback();return}c.push(this.#w),this.#w=void 0}const u=setTimeout(()=>{this.#j=ke.m.BUFFERING,this.#T()},500);try{for(;;){if(!this.#O)throw new Error("Invariant. this._playbackIterator is undefined.");const p=await this.#O.next();if(p.done===!0||this.#n)break;const h=p.value;if(h.type==="problem"){this.#E.addProblem(`connid-${h.connectionId}`,h.problem);continue}if(h.type==="stamp"&&(0,te.compare)(h.stamp,r)>=0){this.#N=h.stamp;break}if(h.type==="message-event"){if((0,te.compare)(h.msgEvent.receiveTime,r)>0){this.#w=h.msgEvent;break}c.push(h.msgEvent)}}}finally{clearTimeout(u)}this.#j=ke.m.PRESENT,!this.#n&&(await this.#T.currentPromise,this.#h=r,this.#S=c,this.#T(),this.#z&&(0,te.compare)(this.#h,this.#z)>=0&&this.pausePlayback())}async#oe(){Na()(this.#F==null,"Invariant: some other abort controller exists"),this.#o=!1,this.#j=ke.m.PRESENT,this.#v={fullyLoadedFractionRanges:this.#M.loadedRanges(),messageCache:this.#v.messageCache};const t=this.#F=new AbortController,s=new Promise(i=>{t.signal.addEventListener("abort",i)}),a=()=>{this.#v={fullyLoadedFractionRanges:this.#M.loadedRanges(),messageCache:this.#v.messageCache},this.#T()};this.#M.on("loadedRangesChange",a),this.#T(),await s,this.#M.off("loadedRangesChange",a)}async#ee(){if(this.#j=ke.m.PRESENT,!this.#h)throw new Error("Invariant: currentTime not set before statePlay");if(!this.#r||!this.#l)throw new Error("Invariant: start & end should be set before statePlay");const t=this.#C;try{for(;this.#o&&!this.#p&&!this.#n;){if((0,te.compare)(this.#h,this.#l)>=0){this.#u=void 0,this.#A=void 0,this.#N=void 0,this.#W("idle");return}const s=Date.now();if(await this.#_(),this.#n)return;if(this.#v={fullyLoadedFractionRanges:this.#M.loadedRanges(),messageCache:this.#v.messageCache},this.#C!==t){this.#w=void 0,this.#W("reset-playback-iterator");return}const a=Date.now()-s;a<16&&await Ei(16-a)}}catch(s){this.#H(s.message,s),this.#T()}}async#ae(){this.#o=!1,this.#d.close(),await this.#k?.stopLoading(),await this.#Q,await this.#M.stopProducer(),await this.#M.terminate(),await this.#O?.return?.(),this.#O=void 0,await this.#G.terminate?.()}async#te(){await this.#k?.startLoading({progress:async t=>{this.#v={fullyLoadedFractionRanges:this.#v.fullyLoadedFractionRanges,messageCache:t.messageCache},this.#s!=="play"&&this.#T()}})}}var ea=o(90758);const e0={canHandle:e=>e instanceof AbortSignal,deserialize:([e,t])=>{const s=new AbortController;return e?s.abort():t.onmessage=()=>{s.abort()},s.signal},serialize:e=>{const{port1:t,port2:s}=new MessageChannel;return e.addEventListener("abort",()=>{t.postMessage("aborted")}),[[e.aborted,s],[s]]}};ea.Y6.set("abortsignal",e0);class cs{#e;#t;#n;constructor(t){this.#e=t}async initialize(){this.#t=this.#e.initWorker();const t=ea.Ud(this.#t);return await(this.#n=await t(this.#e.initArgs)).initialize()}async*messageIterator(t){if(this.#n==null)throw new Error("WorkerIterableSource is not initialized");const s=this.getMessageCursor(t);try{for(;;){const a=await s.nextBatch(17);if(!a||a.length===0)break;yield*a}}finally{await s.end()}}async getBackfillMessages(t){if(this.#n==null)throw new Error("WorkerIterableSource is not initialized");const{abortSignal:s,...a}=t;return await this.#n.getBackfillMessages(a,s)}getMessageCursor(t){if(this.#n==null)throw new Error("WorkerIterableSource is not initialized");const{abort:s,...a}=t,i=this.#n.getMessageCursor(a,s);return{async next(){return await(await i).next()},async nextBatch(c){return await(await i).nextBatch(c)},async readUntil(c){return await(await i).readUntil(c)},async end(){const c=await i;try{await c.end()}finally{c[ea.Yy]()}}}}async terminate(){this.#t?.terminate()}}class t0{id="ros1-local-bagfile";type="file";displayName="ROS 1 Bag";iconName="OpenFile";supportedFileTypes=[".bag"];initialize(t){const s=t.file;if(!s)return;const a=new cs({initWorker:()=>new Worker(new URL(o.p+o.u(4334),o.b)),initArgs:{file:s}});return new ls({metricsCollector:t.metricsCollector,source:a,name:s.name,sourceId:this.id})}}const n0=t0;var Z0=o(4201),F0=o(96683),s0="../../packages/studio-base/src/players/Ros1Player.ts";const Ys=q.ZP.getLogger(s0),o0=q.ZP.getLogger("ROS1"),Ti=[ke.C.advertise,ke.C.getParameters,ke.C.setParameters];var vn;(function(e){e.Connection="Connection",e.Parameters="Parameters",e.Graph="Graph",e.Publish="Publish",e.Node="Node"})(vn||(vn={}));class U0{#e;#t;#n;#s=uuidv4();#i;#o=!1;#a;#c=new Map;#r=new Map;#l=new Map;#y=new Map;#u=new Map;#b=new Map;#x;#m;#f=[];#D=[];#P=[];#d;#Z=!1;#C;#I=PlayerPresence.INITIALIZING;#v=new PlayerProblemManager;#B;#S;constructor({url:t,hostname:s,metricsCollector:a,sourceId:i}){Ys.info(`initializing Ros1Player (url=${t}, hostname=${s})`),this.#C=a,this.#e=t,this.#t=s,this.#x=this.#F(),this.#C.playerConstructed(),this.#S=i,this.#U()}#U=async()=>{const t=OsContextSingleton;if(this.#o||t==null)return;this.#I=PlayerPresence.INITIALIZING;const s=this.#t??RosNode.GetRosHostname(t.getEnvVar,t.getHostname,t.getNetworkInterfaces),a=await Sockets.Create(),i=await a.createHttpServer(),r=async p=>await a.createSocket(p.host,p.port),c=await a.createServer();let u="0.0.0.0";if(s==="localhost"&&(u="localhost"),await c.listen(void 0,u,10),this.#n==null){const p=new RosNode({name:`/foxglovestudio_${t.pid}`,hostname:s,pid:t.pid,rosMasterUri:this.#e,httpServer:i,tcpSocketCreate:r,tcpServer:c,log:o0});this.#n=p,p.on("paramUpdate",({key:h,value:f,prevValue:m,callerId:y})=>{Ys.debug("paramUpdate",h,f,m,y),this.#b=new Map(p.parameters)}),p.on("error",h=>{this.#p(vn.Node,{severity:"warn",message:"ROS node error",tip:"Connectivity will be automatically re-established",error:h})})}await this.#n.start(),this.setPublishers(this.#f),await this.#R(),this.#I=PlayerPresence.PRESENT};#p(t,s,{skipEmit:a=!1}={}){this.#v.addProblem(t,s),a||this.#g()}#A(t,{skipEmit:s=!1}={}){this.#v.removeProblem(t)&&(s||this.#g())}#w({skipEmit:t=!1}={}){this.#v.removeProblems(s=>s.startsWith("msgdef:")||s.startsWith("advertise:")||s.startsWith("publish:"))&&(t||this.#g())}#N=t=>!this.#a||t.length!==this.#a.length?!0:!isEqual(this.#a,t);#R=async()=>{this.#d&&clearTimeout(this.#d);const t=this.#n;if(!(!t||this.#o))try{const a=(await t.getPublishedTopics()).map(([r,c])=>({name:r,schemaName:c})),i=sortBy(a,"name");if(this.#N(i)){const r=new Set(a.map(c=>c.name));for(const c of this.#c.keys())r.has(c)||this.#c.delete(c);this.#a=i}this.setSubscriptions(this.#D);try{const r=await t.subscribeAllParams();isEqual(r,this.#b)||(this.#b=new Map,r.forEach((c,u)=>this.#b.set(u,c))),this.#A(vn.Parameters,{skipEmit:!0})}catch(r){this.#p(vn.Parameters,{severity:"warn",message:"ROS parameter fetch failed",tip:`Ensure that roscore is running and accessible at: ${this.#e}`,error:r},{skipEmit:!0})}await this.#M(t),this.#A(vn.Connection,{skipEmit:!0}),this.#I=PlayerPresence.PRESENT,this.#g()}catch(s){this.#I=PlayerPresence.INITIALIZING,this.#p(vn.Connection,{severity:"error",message:"ROS connection failed",tip:`Ensure that roscore is running and accessible at: ${this.#e}`,error:s},{skipEmit:!1})}finally{this.#d=setTimeout(this.#R,3e3)}};#g=debouncePromise(()=>{if(!this.#i||this.#o)return Promise.resolve();const t=this.#a,s=this.#x;if(!t||!s)return this.#i({name:this.#e,presence:this.#I,progress:{},capabilities:Ti,profile:"ros1",playerId:this.#s,problems:this.#v.problems(),activeData:void 0});this.#I===PlayerPresence.PRESENT&&(this.#B!=null&&clearTimeout(this.#B),this.#B=setTimeout(this.#g,100));const a=this.#F(),i=this.#P;return this.#P=[],this.#i({name:this.#e,presence:this.#I,progress:{},capabilities:Ti,profile:"ros1",playerId:this.#s,problems:this.#v.problems(),urlState:{sourceId:this.#S,parameters:{url:this.#e}},activeData:{messages:i,totalBytesReceived:this.#n?.receivedBytes()??0,startTime:s,endTime:a,currentTime:a,isPlaying:!0,speed:1,lastSeekTime:1,topics:t,topicStats:new Map(this.#c),datatypes:this.#r,publishedTopics:this.#l,subscribedTopics:this.#y,services:this.#u,parameters:this.#b}})});setListener(t){this.#i=t,this.#g()}close(){this.#o=!0,this.#n&&this.#n.shutdown(),this.#B!=null&&(clearTimeout(this.#B),this.#B=void 0),this.#C.close(),this.#Z=!1}setSubscriptions(t){if(this.#D=t,!this.#n||this.#o)return;this.#E(t);const s=keyBy(this.#a??[],({name:i})=>i),a=t.map(({topic:i})=>i).filter(i=>s[i]);for(const i of a){const r=s[i];if(!r||this.#n.subscriptions.has(i))continue;const{schemaName:c}=r,u=this.#n.subscribe({topic:i,dataType:c});u.on("header",(p,h,f)=>{const m=this.#h(c,h);this.#r=new Map([...this.#r,...m])}),u.on("message",(p,h,f)=>{this.#j(i,p,h.byteLength,c,!0),this.#A(`subscribe:${i}`,{skipEmit:!0})}),u.on("error",p=>{this.#p(`subscribe:${i}`,{severity:"warn",message:`Topic subscription error for "${i}"`,tip:`The subscription to "${i}" will be automatically re-established`,error:p})})}for(const i of this.#n.subscriptions.keys())a.includes(i)||(this.#n.unsubscribe(i),this.#c.delete(i))}#j=(t,s,a,i,r)=>{if(this.#a==null)return;const c=this.#F();r&&!this.#Z&&(this.#Z=!0,this.#C.recordTimeToFirstMsgs());const u={topic:t,receiveTime:c,message:s,sizeInBytes:a,schemaName:i};this.#P.push(u),this.#G(u);let p=this.#c.get(t);this.#n?.subscriptions.has(t)===!0&&(p||(p={numMessages:0},this.#c.set(t,p)),p.numMessages++,p.firstMessageTime??=c,(p.lastMessageTime==null||isGreaterThan(c,p.lastMessageTime))&&(p.lastMessageTime=c)),this.#g()};setPublishers(t){if(this.#f=t,!this.#n||this.#o)return;const s=t.filter(({topic:i})=>i.length>0&&i!=="/"),a=new Set(s.map(({topic:i})=>i));this.#w({skipEmit:!0});for(const i of this.#n.publications.keys())a.has(i)||this.#n.unadvertise(i);for(const{topic:i,schemaName:r}of s){const c=this.#n.publications.get(i);c!=null&&c.dataType!==r&&this.#n.unadvertise(i)}for(const i of s){const{topic:r,schemaName:c,options:u}=i;if(this.#n.publications.has(r))continue;const p=`msgdef:${r}`,h=`advertise:${r}`;let f;try{const m=u?.datatypes;if(!m||!(m instanceof Map))throw new Error("The datatypes option is required for publishing");f=rosDatatypesToMessageDefinition(m,c)}catch(m){Ys.debug(m),this.#p(p,{severity:"warn",message:`Unknown message definition for "${r}"`,tip:`Try subscribing to the topic "${r}" before publishing to it`});continue}this.#n.advertise({topic:r,dataType:c,messageDefinition:f}).catch(m=>{this.#p(h,{severity:"error",message:`Failed to advertise "${r}"`,error:m})})}this.#g()}setParameter(t,s){Ys.debug(`Ros1Player.setParameter(key=${t}, value=${s})`),this.#n?.setParameter(t,s)}publish({topic:t,msg:s}){const a=`publish:${t}`;this.#n!=null&&(this.#n.isAdvertising(t)?this.#n.publish(t,s).then(()=>{this.#A(a)}).catch(i=>{this.#p(a,{severity:"error",message:`Publishing to ${t} failed`,error:i})}):this.#p(a,{severity:"warn",message:`Unable to publish to "${t}"`,tip:"ROS1 may be disconnected. Please try again in a moment"}))}async callService(){throw new Error("Service calls are not supported by this data source")}setGlobalVariables(){}#h=(t,s)=>{const a=new Map;for(const i of s)i.name==null?a.set(t,i):a.set(i.name,i);return a};#E(t){t.find(s=>s.topic==="/clock")==null&&t.unshift({topic:"/clock"})}#G(t){const s=t.message;if(t.topic==="/clock"&&s.clock&&!isNaN(s.clock.sec)){const a=s.clock,i=toSec(s.clock);if(isNaN(i))return;this.#m==null&&(this.#x=a),this.#m=a,t.receiveTime=this.#F()}}async#M(t){try{const s=await t.getSystemState();(!isEqual(this.#l,s.publishers)||!isEqual(this.#y,s.subscribers)||!isEqual(this.#u,s.services))&&(this.#l=s.publishers,this.#y=s.subscribers,this.#u=s.services),this.#A(vn.Graph,{skipEmit:!0})}catch(s){this.#p(vn.Graph,{severity:"warn",message:"Unable to update connection graph",tip:`The connection graph contains information about publishers and subscribers. A
stale graph may result in missing topics you expect. Ensure that roscore is reachable at ${this.#e}.`,error:s},{skipEmit:!0}),this.#l=new Map,this.#y=new Map,this.#u=new Map}}#F(){return this.#m??fromMillis(Date.now())}}class z0{id="ros1-socket";type="connection";displayName="ROS 1";iconName="ROS";description="Connect to a running ROS 1 system via a native TCP connection that accesses your ROS master and nodes directly.";docsLinks=[{url:"https://foxglove.dev/docs/studio/connection/native"}];formConfig={fields:[{id:"url",label:"ROS_MASTER_URI",defaultValue:OsContextSingleton?.getEnvVar("ROS_MASTER_URI")??"http://localhost:11311",description:"Tells ROS nodes where they can locate the master"},{id:"hostname",label:"ROS_HOSTNAME",defaultValue:OsContextSingleton?RosNode.GetRosHostname(OsContextSingleton.getEnvVar,OsContextSingleton.getHostname,OsContextSingleton.getNetworkInterfaces):"localhost",description:"Acts as the declared network address of a ROS node or tool"}]};initialize(t){const s=t.params?.url;if(!s)return;const a=t.params?.hostname;if(!isUndefined(a)&&!isString(a))throw new Error(`Unable to initialize Ros1. Invalid hostname ${a}`);return new Ros1Player({url:s,hostname:a,metricsCollector:t.metricsCollector,sourceId:this.id})}}const W0=null;class a0{id="ros2-local-bagfile";type="file";displayName="ROS 2 Bag";iconName="OpenFile";supportedFileTypes=[".db3"];supportsMultiFile=!0;initialize(t){const s=t.file?[t.file]:t.files,a=t.file?t.file.name:t.files?.map(r=>r.name).join(", ");if(!s)return;const i=new cs({initWorker:()=>new Worker(new URL(o.p+o.u(4975),o.b)),initArgs:{files:s}});return new ls({metricsCollector:t.metricsCollector,source:i,name:a,sourceId:this.id})}}const i0=a0;var r0=o(34055),Hs=o.n(r0);function l0(e,{ros2:t}){const s=new Map;return e.forEach(a=>{(0,Ws.parse)(a.messageDefinition,{ros2:t}).forEach(({name:r,definitions:c},u)=>{u===0?s.set(a.type,{name:a.type,definitions:c}):r!=null&&s.set(r,{name:r,definitions:c})})}),s}var c0="../../packages/studio-base/src/players";const Vs=q.ZP.getLogger(c0),Pi=[ke.C.advertise,ke.C.callServices];function ta(e,t){return(0,T.transform)(e,(s,a)=>{const{node:i,values:r}=a[t];for(const c of r)s.has(c)||s.set(c,new Set),s.get(c)?.add(i)},new Map)}function d0(e,t){const s=t;return e==="/clock"&&s.clock!=null&&!isNaN(s.clock.sec)}function u0(e){return typeof e=="object"&&e!=null}class p0{#e;#t;#n=(0,Kt.Z)();#s=!1;#i;#o=!1;#a;#c=new Map;#r;#l=new Map;#y=new Map;#u=new Map;#b={};#x;#m;#f=new Map;#D=[];#P=[];#d;#Z=new Map;#C=[];#I=new Set;#v=0;#B;#S=!1;#U=ke.m.NOT_PRESENT;#p=new Jo;#A;#w=new Map;#N;#R;constructor({url:t,metricsCollector:s,sourceId:a}){this.#U=ke.m.INITIALIZING,this.#B=s,this.#e=t,this.#x=(0,te.fromMillis)(Date.now()),this.#B.playerConstructed(),this.#N=a,this.#g()}#g=()=>{if(this.#o)return;if(this.#t!=null)throw new Error("Attempted to open a second Rosbridge connection");this.#p.removeProblem("rosbridge:connection-failed"),Vs.info(`Opening connection to ${this.#e}`);const t=new(Hs()).Ros({url:this.#e,transportLibrary:"workersocket"});t.on("connection",()=>{Vs.info(`Connected to ${this.#e}`),!this.#o&&(this.#U=ke.m.PRESENT,this.#p.removeProblem("rosbridge:connection-failed"),this.#t=t,this.#M(),this.#h({forceUpdate:!0}))}),t.on("error",s=>{s&&(this.#p.addProblem("rosbridge:error",{severity:"warn",message:"Rosbridge error",error:s}),this.#E())}),t.on("close",()=>{this.#U=ke.m.RECONNECTING,this.#d&&clearTimeout(this.#d);for(const[s,a]of this.#f)a.unsubscribe(),this.#f.delete(s);t.close(),this.#t=void 0,this.#p.addProblem("rosbridge:connection-failed",{severity:"error",message:"Connection failed",tip:`Check that the rosbridge WebSocket server at ${this.#e} is reachable.`}),this.#E(),setTimeout(this.#g,3e3)})};#j=t=>!this.#a||t.length!==this.#a.length?!0:!(0,T.isEqual)(this.#a,t);async#h(t){const{forceUpdate:s=!1}=t??{};this.#p.removeProblems(r=>r.startsWith("requestTopics:")),this.#d&&clearTimeout(this.#d);const a=this.#t;if(!a||this.#o)return;const i=setTimeout(()=>{this.#p.addProblem("topicsAndRawTypesTimeout",{severity:"warn",message:"Taking too long to get topics and raw types."}),this.#E()},5e3);try{const r=await new Promise((y,w)=>{a.getTopicsAndRawTypes(y,w)});clearTimeout(i),this.#p.removeProblem("topicsAndRawTypesTimeout");const c=[],u=[],p=[],h={};r.types.includes("rcl_interfaces/msg/Log")?(this.#R=2,this.#p.removeProblem("unknownRosVersion")):r.types.includes("rosgraph_msgs/Log")?(this.#R=1,this.#p.removeProblem("unknownRosVersion")):(this.#R=1,this.#p.addProblem("unknownRosVersion",{severity:"warn",message:"Unable to detect ROS version, assuming ROS 1"}));for(let y=0;y<r.topics.length;y++){const w=r.topics[y],k=r.types[y],W=r.typedefs_full_text[y];if(k==null||W==null){c.push(w);continue}u.push({name:w,schemaName:k}),p.push({type:k,messageDefinition:W});const G=(0,Ws.parse)(W,{ros2:this.#R===2});h[k]||(h[k]=this.#R!==2?new bs.LazyMessageReader(G):new Gs.MessageReader(G))}const f=(0,T.sortBy)(u,"name");if(!s&&!this.#j(f))return;c.length>0&&this.#p.addProblem("requestTopics:missing-types",{severity:"warn",message:"Could not resolve all message types",tip:`Message types could not be found for these topics: ${c.join(",")}`});const m=new Set(u.map(y=>y.name));for(const y of this.#c.keys())m.has(y)||this.#c.delete(y);this.#a=f,this.#r=l0(p,{ros2:this.#R===2}),this.#b=h,this.setSubscriptions(this.#D),this.#k().catch(y=>{Vs.error(y)})}catch(r){Vs.error(r),clearTimeout(i),this.#p.removeProblem("topicsAndRawTypesTimeout"),this.#p.addProblem("requestTopics:error",{severity:"error",message:"Failed to fetch topics from rosbridge",error:r})}finally{this.#E(),this.#d=setTimeout(()=>void this.#h(),3e3)}}#E=(0,zn.HF)(()=>{if(!this.#i||this.#o)return Promise.resolve();const t=this.#a,s=this.#r,a=this.#x;if(!t||!s||!a)return this.#i({name:this.#e,presence:this.#U,progress:{},capabilities:Pi,profile:void 0,playerId:this.#n,activeData:void 0,problems:this.#p.problems(),urlState:{sourceId:this.#N,parameters:{url:this.#e}}});this.#U===ke.m.PRESENT&&(this.#A!=null&&clearTimeout(this.#A),this.#A=setTimeout(this.#E,100));const i=this.#O(),r=this.#P;return this.#P=[],this.#i({name:this.#e,presence:this.#U,progress:{},capabilities:Pi,profile:this.#R===2?"ros2":"ros1",playerId:this.#n,problems:this.#p.problems(),urlState:{sourceId:this.#N,parameters:{url:this.#e}},activeData:{messages:r,totalBytesReceived:this.#v,startTime:a,endTime:i,currentTime:i,isPlaying:!0,speed:1,lastSeekTime:1,topics:t,topicStats:new Map(this.#c),datatypes:s,publishedTopics:this.#l,subscribedTopics:this.#y,services:this.#u}})});setListener(t){this.#i=t,this.#E()}close(){this.#o=!0,this.#t&&this.#t.close(),this.#A!=null&&(clearTimeout(this.#A),this.#A=void 0),this.#B.close(),this.#S=!1}setSubscriptions(t){if(this.#D=t,!this.#t||this.#o)return;this.#F(t),this.#I=new Set(t.map(({topic:i})=>i));const s=(0,T.keyBy)(this.#a??[],({name:i})=>i),a=t.map(({topic:i})=>i).filter(i=>s[i]);for(const i of a){if(this.#f.has(i))continue;const r=new(Hs()).Topic({ros:this.#t,name:i,compression:"cbor-raw"}),c=s[i];if(!c)continue;const{schemaName:u}=c,p=this.#b[u];if(!p)continue;const h=`message:${i}`;r.subscribe(f=>{if(this.#a){try{const m=f.bytes,y=new Uint8Array(m);if(p instanceof bs.LazyMessageReader){const G=p.size(y);if(G>y.byteLength){this.#p.addProblem(h,{severity:"error",message:`Message buffer not large enough on ${i}`,error:new Error(`Cannot read ${G} byte message from ${y.byteLength} byte buffer`)}),this.#E();return}}const w=p.readMessage(y);if(d0(i,w)){const G=w.clock,J=(0,te.toSec)(w.clock);isNaN(J)||(this.#m==null&&(this.#x=G),this.#m=G)}const k=this.#O();if(this.#S||(this.#S=!0,this.#B.recordTimeToFirstMsgs()),this.#I.has(i)){const G={topic:i,receiveTime:k,message:w,schemaName:u,sizeInBytes:y.byteLength};this.#P.push(G)}this.#p.removeProblem(h);let W=this.#c.get(i);this.#f.has(i)&&(W||(W={numMessages:0},this.#c.set(i,W)),W.numMessages++)}catch(m){this.#p.addProblem(h,{severity:"error",message:`Failed to parse message on ${i}`,error:m})}this.#E()}}),this.#f.set(i,r)}for(const[i,r]of this.#f)a.includes(i)||(r.unsubscribe(),this.#f.delete(i),this.#c.delete(i))}setPublishers(t){for(const s of this.#Z.values())s.unadvertise();this.#Z.clear(),this.#C=t,this.#M()}setParameter(t,s){throw new Error("Parameter editing is not supported by the Rosbridge connection")}publish({topic:t,msg:s}){const a=this.#Z.get(t);if(!a){if(this.#C.some(i=>i.topic===t))return;throw new Error(`Tried to publish on a topic that is not registered as a publisher: ${t}`)}a.publish(s)}async#G(t){if(!this.#t)throw new Error("Not connected");const s=this.#w.get(t);if(s)return await s;const a=this.#t,i=new Promise((r,c)=>{a.getServiceType(t,r,c)});return this.#w.set(t,i),await i}async callService(t,s){if(!this.#t)throw new Error("Not connected");if(!u0(s))throw new Error("RosbridgePlayer#callService request must be an object");const a=await this.#G(t),i=new(Hs()).Service({ros:this.#t,name:t,serviceType:a});return await new Promise((r,c)=>{i.callService(s,u=>{r(u)},u=>{c(u)})})}startPlayback(){}pausePlayback(){}seekPlayback(t){}setPlaybackSpeed(t){}setGlobalVariables(){}#M(){if(this.#t&&!(this.#C.length<=0))for(const{topic:t,schemaName:s}of this.#C){const a=new(Hs()).Topic({ros:this.#t,name:t,messageType:s,queue_size:0});this.#Z.set(t,a),a.advertise()}}#F(t){t.find(s=>s.topic==="/clock")==null&&t.unshift({topic:"/clock"})}#O(){return this.#m??(0,te.fromMillis)(Date.now())}async#k(){if(!this.#s)try{this.#s=!0;const s=(await new Promise((r,c)=>{this.#t?.getNodes(u=>{r(u)},c)})).map(async r=>await new Promise((c,u)=>{this.#t?.getNodeDetails(r,(p,h,f)=>{c({publications:{node:r,values:h},services:{node:r,values:f},subscriptions:{node:r,values:p}})},u)})),a=await Promise.allSettled(s),i=(0,on.Z)(a,r=>r.status==="fulfilled"?r.value:void 0);this.#l=ta(i,"publications"),this.#y=ta(i,"subscriptions"),this.#u=ta(i,"services"),this.#E()}catch(t){this.#p.addProblem("requestTopics:system-state",{severity:"error",message:"Failed to fetch node details from rosbridge",error:t})}finally{this.#s=!1}}}class f0{id="rosbridge-websocket";type="connection";displayName="Rosbridge";iconName="Flow";docsLinks=[{url:"https://foxglove.dev/docs/studio/connection/rosbridge"}];description="Connect to a ROS 1 or ROS 2 system using the Rosbridge WebSocket protocol.";formConfig={fields:[{id:"url",label:"WebSocket URL",defaultValue:"ws://localhost:9090",validate:t=>{try{const s=new URL(t);return s.protocol!=="ws:"&&s.protocol!=="wss:"?new Error(`Invalid protocol: ${s.protocol}`):void 0}catch{return new Error("Enter a valid url")}}}]};initialize(t){const s=t.params?.url;if(s)return new p0({url:s,metricsCollector:t.metricsCollector,sourceId:this.id})}}const h0=f0;class g0{id="ulog-local-file";type="file";displayName="PX4 ULog";iconName="OpenFile";supportedFileTypes=[".ulg",".ulog"];initialize(t){const s=t.file;if(!s)return;const a=new cs({initWorker:()=>new Worker(new URL(o.p+o.u(2042),o.b)),initArgs:{file:s}});return new ls({metricsCollector:t.metricsCollector,source:a,name:s.name,sourceId:this.id})}}const m0=g0,y0={".bag":()=>new Worker(new URL(o.p+o.u(6548),o.b)),".mcap":()=>new Worker(new URL(o.p+o.u(4268),o.b))};class v0{id="remote-file";legacyIds=["mcap-remote-file","ros1-remote-bagfile"];type="connection";displayName="Remote file";iconName="FileASPX";supportedFileTypes=[".bag",".mcap"];description="Open pre-recorded .bag or .mcap files from a remote location.";docsLinks=[{label:"ROS 1",url:"https://foxglove.dev/docs/studio/connection/ros1#cloud-data"},{label:"MCAP",url:"https://foxglove.dev/docs/studio/connection/mcap#cloud-data"}];formConfig={fields:[{id:"url",label:"Remote file URL",placeholder:"https://example.com/file.bag",validate:t=>this.#e(t)}]};warning=(0,n.jsxs)(n.Fragment,{children:["Loading large files over HTTP can be slow. For better performance, we recommend"," ",(0,n.jsx)(sn.Z,{href:"https://foxglove.dev/data-platform",target:"_blank",children:"Foxglove Data Platform"}),"."]});initialize(t){const s=t.params?.url;if(!s)throw new Error("Missing url argument");const a=V().extname(new URL(s).pathname),i=y0[a];if(!i)throw new Error(`Unsupported extension: ${a}`);const r=new cs({initWorker:i,initArgs:{url:s}});return new ls({source:r,name:s,metricsCollector:t.metricsCollector,urlParams:{url:s},sourceId:this.id})}#e(t){try{const s=new URL(t),a=V().extname(s.pathname);if(a.length===0)return new Error("URL must end with a filename and extension");if(!this.supportedFileTypes.includes(a)){const i=new Intl.ListFormat("en-US",{style:"long"}).format(this.supportedFileTypes);return new Error(`Only ${i} files are supported.`)}return}catch{return new Error("Enter a valid url")}}}const A0=v0;var G0=o(3890),b0="../../packages/studio-base/src/players/VelodynePlayer.ts";const na=q.ZP.getLogger(b0),x0=2369,E0=600,sa="SOCKET_ERROR",Ks="/velodyne_points",Ii={name:Ks,schemaName:"velodyne_msgs/VelodyneScan"},C0=new Map(Object.entries({"velodyne_msgs/VelodyneScan":{name:"velodyne_msgs/VelodyneScan",definitions:[{type:"std_msgs/Header",name:"header",isArray:!1,isComplex:!0},{type:"velodyne_msgs/VelodynePacket",name:"packets",isArray:!0,isComplex:!0}]},"velodyne_msgs/VelodynePacket":{name:"velodyne_msgs/VelodynePacket",definitions:[{type:"time",name:"stamp",isArray:!1,isComplex:!1},{type:"uint8",name:"data",isArray:!0,arrayLength:1206,isComplex:!1}]},"std_msgs/Header":{name:"std_msgs/Header",definitions:[{name:"seq",type:"uint32",isArray:!1},{name:"stamp",type:"time",isArray:!1},{name:"frame_id",type:"string",isArray:!1}]}})),S0=null;class Q0{#e=uuidv4();#t;#n;#s;#i=0;#o=0;#a=!1;#c={...Ii};#r=[this.#c];#l=new Map;#y;#u=[];#b=[];#x;#m=PlayerPresence.INITIALIZING;#f;#D=[];#P=new Map;constructor({port:t,metricsCollector:s}){this.#t=t??x0,na.info(`initializing VelodynePlayer on port ${this.#t}`),this.#x=s,this.#y=fromMillis(Date.now()),this.#x.playerConstructed(),this.#d()}#d=async()=>{if(!this.#a){if(this.#m=PlayerPresence.PRESENT,this.#v(),this.#s==null){const t=await Sockets.Create();this.#s=await t.createUdpSocket(),this.#s.on("error",s=>{this.#C(sa,{message:"Networking error listening for Velodyne data",severity:"error",error:s,tip:"Check that your are connected to the same local network (subnet) as the Velodyne sensor"})}),this.#s.on("message",this.#Z)}else try{await this.#s.close()}catch(t){na.error(`Failed to close socket: ${t}`)}try{await this.#s.bind({address:"0.0.0.0",port:this.#t}),na.debug(`Bound Velodyne UDP listener socket to port ${this.#t}`)}catch(t){this.#C(sa,{message:"Could not bind to the Velodyne UDP data port",severity:"error",error:t,tip:`Check that port ${this.#t} is not in use by another application`})}}};#Z=(t,s)=>{const a=fromMillis(Date.now()),i=toDate(a);i.setMinutes(0,0,0);const r=fromDate(i);this.#o+=t.byteLength,this.#m=PlayerPresence.PRESENT,this.#I(sa,{skipEmit:!0}),this.#i===0&&this.#x.recordTimeToFirstMsgs();const c=new RawPacket(t),u=E0/60,p=c.returnMode===ReturnMode.DualReturn?packetRate(c.inferModel()??Model.HDL64E)*2:packetRate(c.inferModel()??Model.HDL64E),h=Math.ceil(p/u);if(this.#u.push(c),this.#u.length>=h){const f={header:{seq:this.#i++,stamp:a,frame_id:s.address},packets:this.#u.map(k=>T0(k,r))},m=this.#u.reduce((k,W)=>k+W.data.byteLength,0),y={topic:Ks,receiveTime:a,message:f,sizeInBytes:m,schemaName:Ii.schemaName??""};this.#b.push(y),this.#u=[];let w=this.#l.get(Ks);w||(w={numMessages:0},this.#l.set(Ks,w)),w.numMessages++,w.firstMessageTime??=a,w.lastMessageTime=a,this.#v()}};#C(t,s,{skipEmit:a=!1}={}){this.#P.set(t,s),this.#D=Array.from(this.#P.values()),a||this.#v()}#I(t,{skipEmit:s=!1}={}){this.#P.delete(t)&&(this.#D=Array.from(this.#P.values()),s||this.#v())}#v=debouncePromise(()=>{if(!this.#n||this.#a)return Promise.resolve();this.#m===PlayerPresence.PRESENT&&(this.#f!=null&&clearTimeout(this.#f),this.#f=setTimeout(this.#v,100));const t=fromMillis(Date.now()),s=this.#b;return this.#b=[],this.#n({name:"Velodyne",presence:this.#m,progress:{},capabilities:S0,profile:"velodyne",playerId:this.#e,problems:this.#D,activeData:{messages:s,totalBytesReceived:this.#o,startTime:this.#y,endTime:t,currentTime:t,isPlaying:!0,speed:1,lastSeekTime:1,topics:this.#r,topicStats:new Map(this.#l),datatypes:C0,publishedTopics:void 0,subscribedTopics:void 0,services:void 0,parameters:void 0}})});setListener(t){this.#n=t,this.#v()}close(){this.#a=!0,this.#s&&(this.#s.dispose(),this.#s=void 0),this.#f!=null&&(clearTimeout(this.#f),this.#f=void 0),this.#x.close(),this.#o=0,this.#i=0,this.#u=[],this.#b=[]}setSubscriptions(t){}setPublishers(t){}setParameter(t,s){throw new Error("Parameter modification is not supported for VelodynePlayer")}publish(t){throw new Error("Publishing is not supported for VelodynePlayer")}async callService(){throw new Error("Service calls are not supported for VelodynePlayer")}setGlobalVariables(t){}}function T0(e,t){const s=e.gpsTimestamp;return{stamp:addTimes(t,fromMicros(s)),data:e.data}}class Y0{id="velodyne-device";type="connection";displayName="Velodyne Lidar";iconName="GenericScan";description="Connect directly to Velodyne Lidar hardware to inspect incoming sensor data.";docsLinks=[{url:"https://foxglove.dev/docs/studio/connection/velodyne"}];formConfig={fields:[{id:"port",label:"UDP Port",defaultValue:"2369"}]};initialize(t){const s=t.params?.port;if(s==null)return;const a=parseInt(s);return new VelodynePlayer({port:a,metricsCollector:t.metricsCollector})}}const H0=null;class P0{id="mcap-local-file";type="file";displayName="MCAP";iconName="OpenFile";supportedFileTypes=[".mcap"];initialize(t){const s=t.file;if(!s)return;const a=new cs({initWorker:()=>new Worker(new URL(o.p+o.u(5358),o.b)),initArgs:{file:s}});return new ls({metricsCollector:t.metricsCollector,source:a,name:s.name,sourceId:this.id})}}const I0=P0,M0=JSON.parse('{"configById":{"Image!s2ii8x":{"imageMode":{"imageTopic":"/CAM_FRONT_LEFT/image_rect_compressed","calibrationTopic":"/CAM_FRONT_LEFT/camera_info","synchronize":false,"rotation":0,"annotations":{"/CAM_FRONT_LEFT/annotations":{"visible":true},"/CAM_FRONT_LEFT/lidar":{"visible":false}}},"cameraState":{"distance":20,"perspective":true,"phi":60,"target":[0,0,0],"targetOffset":[0,0,0],"targetOrientation":[0,0,0,1],"thetaOffset":45,"fovy":45,"near":0.5,"far":5000},"followMode":"follow-pose","scene":{},"transforms":{},"topics":{"/LIDAR_TOP":{"visible":true,"colorField":"intensity","colorMode":"colormap","colorMap":"turbo"},"/semantic_map":{"visible":true}},"layers":{},"publish":{"type":"point","poseTopic":"/move_base_simple/goal","pointTopic":"/clicked_point","poseEstimateTopic":"/initialpose","poseEstimateXDeviation":0.5,"poseEstimateYDeviation":0.5,"poseEstimateThetaDeviation":0.26179939}},"Image!qd8g5l":{"imageMode":{"imageTopic":"/CAM_FRONT/image_rect_compressed","calibrationTopic":"/CAM_FRONT/camera_info","synchronize":false,"rotation":0,"annotations":{"/CAM_FRONT/lidar":{"visible":false},"/CAM_FRONT/annotations":{"visible":true}}},"cameraState":{"distance":20,"perspective":true,"phi":60,"target":[0,0,0],"targetOffset":[0,0,0],"targetOrientation":[0,0,0,1],"thetaOffset":45,"fovy":45,"near":0.5,"far":5000},"followMode":"follow-pose","scene":{},"transforms":{},"topics":{"/LIDAR_TOP":{"visible":true,"colorField":"intensity","colorMode":"colormap","colorMap":"turbo"},"/semantic_map":{"visible":true}},"layers":{},"publish":{"type":"point","poseTopic":"/move_base_simple/goal","pointTopic":"/clicked_point","poseEstimateTopic":"/initialpose","poseEstimateXDeviation":0.5,"poseEstimateYDeviation":0.5,"poseEstimateThetaDeviation":0.26179939}},"Image!37zuv25":{"imageMode":{"imageTopic":"/CAM_FRONT_RIGHT/image_rect_compressed","calibrationTopic":"/CAM_FRONT_RIGHT/camera_info","synchronize":false,"rotation":0,"annotations":{"/CAM_FRONT_RIGHT/annotations":{"visible":true},"/CAM_FRONT_RIGHT/lidar":{"visible":false}}},"cameraState":{"distance":20,"perspective":true,"phi":60,"target":[0,0,0],"targetOffset":[0,0,0],"targetOrientation":[0,0,0,1],"thetaOffset":45,"fovy":45,"near":0.5,"far":5000},"followMode":"follow-pose","scene":{},"transforms":{},"topics":{"/LIDAR_TOP":{"visible":true,"colorField":"intensity","colorMode":"colormap","colorMap":"turbo"},"/semantic_map":{"visible":true}},"layers":{},"publish":{"type":"point","poseTopic":"/move_base_simple/goal","pointTopic":"/clicked_point","poseEstimateTopic":"/initialpose","poseEstimateXDeviation":0.5,"poseEstimateYDeviation":0.5,"poseEstimateThetaDeviation":0.26179939}},"3D!12ucir":{"cameraState":{"distance":35,"perspective":true,"phi":60,"target":[0,0,0],"targetOffset":[0,0,0],"targetOrientation":[0,0,0,1],"thetaOffset":45,"fovy":45,"near":1,"far":5000},"scene":{},"transforms":{},"topics":{"/semantic_map":{"visible":true},"/markers/annotations":{"visible":true},"/map":{"visible":true,"colorField":"color","colorMode":"rgba-fields","colorMap":"turbo","gradient":["#ffffff","#000000"]},"/drivable_area":{"visible":false,"minColor":"#ffffff","colorField":"drivable_area","colorMode":"gradient","colorMap":"turbo","gradient":["#ffffff","#ffffff00"],"maxValue":1,"minValue":0},"/RADAR_FRONT":{"visible":true,"colorField":"x","colorMode":"colormap","colorMap":"turbo"},"/RADAR_FRONT_LEFT":{"visible":true,"colorField":"x","colorMode":"colormap","colorMap":"turbo"},"/RADAR_FRONT_RIGHT":{"visible":true,"colorField":"x","colorMode":"colormap","colorMap":"turbo"},"/RADAR_BACK_LEFT":{"visible":true,"colorField":"x","colorMode":"colormap","colorMap":"turbo"},"/RADAR_BACK_RIGHT":{"visible":true,"colorField":"x","colorMode":"colormap","colorMap":"turbo"},"/LIDAR_TOP":{"visible":true,"colorField":"intensity","colorMode":"colormap","colorMap":"turbo"},"/markers/car":{"visible":true}},"layers":{},"publish":{"type":"point","poseTopic":"/move_base_simple/goal","pointTopic":"/clicked_point","poseEstimateTopic":"/initialpose","poseEstimateXDeviation":0.5,"poseEstimateYDeviation":0.5,"poseEstimateThetaDeviation":0.26179939},"followMode":"follow-pose","followTf":"base_link","imageMode":{}},"map!2vkib4e":{"disabledTopics":[],"zoomLevel":17,"layer":"map","customTileUrl":"","followTopic":"","center":{"lat":1.2988182017789598,"lon":103.78844261169435},"topicColors":{},"maxNativeZoom":18},"3D!3edtgyg":{"cameraState":{"perspective":false,"distance":100,"phi":45,"thetaOffset":90,"targetOffset":[0,0,0],"target":[0,0,0],"targetOrientation":[0,0,0,1],"fovy":45,"near":0.01,"far":5000},"scene":{},"transforms":{},"topics":{"/semantic_map":{"visible":true},"/markers/annotations":{"visible":true},"/map":{"visible":true,"colorField":"value","colorMode":"gradient","colorMap":"turbo","gradient":["#ffffff","#000000"]},"/drivable_area":{"visible":true,"minColor":"#ffffff","colorField":"drivable_area","colorMode":"gradient","colorMap":"turbo","gradient":["#ffffff","#ffffff00"],"maxValue":1,"minValue":0},"/markers/car":{"visible":true}},"layers":{},"publish":{"type":"point","poseTopic":"/move_base_simple/goal","pointTopic":"/clicked_point","poseEstimateTopic":"/initialpose","poseEstimateXDeviation":0.5,"poseEstimateYDeviation":0.5,"poseEstimateThetaDeviation":0.26179939},"followMode":"follow-pose","followTf":"base_link","imageMode":{}},"Plot!2pb7zl7":{"paths":[{"value":"/imu.linear_accel.x","enabled":true,"timestampMethod":"receiveTime"},{"value":"/diagnostics.status[:].values[:]{key==\\"throttle_sensor\\"}.value","enabled":true,"timestampMethod":"headerStamp"}],"minYValue":"","maxYValue":"","showLegend":true,"isSynced":true,"xAxisVal":"timestamp","showXAxisLabels":true,"showYAxisLabels":true,"legendDisplay":"floating","showPlotValuesInLegend":false,"sidebarDimension":240,"foxglovePanelTitle":"Plot"},"Plot!4792hqu":{"paths":[{"value":"/diagnostics.status[:].values[:]{key==\\"FL_wheel_speed\\"}.value","enabled":true,"timestampMethod":"headerStamp"},{"value":"/diagnostics.status[:].values[:]{key==\\"FR_wheel_speed\\"}.value","enabled":true,"timestampMethod":"headerStamp"},{"value":"/diagnostics.status[:].values[:]{key==\\"RL_wheel_speed\\"}.value","enabled":true,"timestampMethod":"headerStamp"},{"value":"/diagnostics.status[:].values[:]{key==\\"RR_wheel_speed\\"}.value","enabled":true,"timestampMethod":"headerStamp"}],"minYValue":"","maxYValue":"","showLegend":true,"isSynced":true,"xAxisVal":"timestamp","showXAxisLabels":true,"showYAxisLabels":true,"legendDisplay":"floating","showPlotValuesInLegend":false,"sidebarDimension":240,"foxglovePanelTitle":"Plot"},"StateTransitions!3i4dk1l":{"paths":[{"value":"/diagnostics.status[:].values[:]{key==\\"brake_switch\\"}.value","timestampMethod":"headerStamp"}],"isSynced":true},"DiagnosticSummary!3equ26v":{"minLevel":0,"pinnedIds":[],"hardwareIdFilter":"","topicToRender":"/diagnostics","sortByLevel":true},"DiagnosticStatusPanel!4bdyip2":{"topicToRender":"/diagnostics","collapsedSections":[],"selectedHardwareId":"","splitFraction":0.49345370528837923},"SourceInfo!7dc2bd":{},"RawMessages!21ab95j":{"topicPath":"/markers/annotations.entities[:]{id==\\"6dd2\\"}","diffTopicPath":"","diffMethod":"custom","diffEnabled":false,"showFullMessageForDiff":false,"autoExpandMode":"auto"},"Tab!1xyw5ix":{"activeTabIdx":0,"tabs":[{"title":"Perception","layout":{"first":{"first":"Image!s2ii8x","second":{"first":"Image!qd8g5l","second":"Image!37zuv25","direction":"row","splitPercentage":50},"direction":"row","splitPercentage":33.333},"second":"3D!12ucir","direction":"column","splitPercentage":30}},{"title":"Planning","layout":{"first":"map!2vkib4e","second":"3D!3edtgyg","direction":"row","splitPercentage":30}},{"title":"Controls","layout":{"first":"Plot!2pb7zl7","second":"Plot!4792hqu","direction":"column","splitPercentage":50}},{"title":"Diagnostics","layout":{"first":{"first":"StateTransitions!3i4dk1l","second":{"first":"DiagnosticSummary!3equ26v","second":"DiagnosticStatusPanel!4bdyip2","direction":"column","splitPercentage":27},"direction":"column","splitPercentage":18},"second":{"first":"SourceInfo!7dc2bd","second":"RawMessages!21ab95j","direction":"column","splitPercentage":60},"direction":"row","splitPercentage":50}}]}},"globalVariables":{},"userNodes":{},"playbackConfig":{"speed":1},"layout":"Tab!1xyw5ix"}');class D0{id="sample-nuscenes";type="sample";displayName="Sample: Nuscenes";iconName="FileASPX";hidden=!0;sampleLayout=M0;initialize(t){const s="https://assets.foxglove.dev/NuScenes-v1.0-mini-scene-0061-df24c12.mcap",a=new cs({initWorker:()=>new Worker(new URL(o.p+o.u(4647),o.b)),initArgs:{url:s}});return new ls({source:a,isSampleDataSource:!0,name:"Adapted from nuScenes dataset. Copyright \xA9 2020 nuScenes. https://www.nuscenes.org/terms-of-use",metricsCollector:t.metricsCollector,urlParams:{},sourceId:this.id})}}const B0=D0},41531:(le,C,o)=>{"use strict";o.d(C,{d:()=>b});var d=o(76635),g=o.n(d),v=o(96995),l=o(93254),A=o(10336);class b extends v.Tme{extensionId;renderer;renderables=new Map;constructor(n,E){super(),this.extensionId=this.name=n,this.renderer=E,queueMicrotask(()=>{this.updateSettingsTree()})}dispose(){for(const n of this.renderables.values())n.dispose();this.children.length=0,this.renderables.clear()}getSubscriptions(){return[]}removeAllRenderables(){for(const n of this.renderables.values())n.dispose(),this.remove(n);this.renderables.clear(),this.updateSettingsTree()}settingsNodes(){return[]}handleSettingsAction=n=>{};updateSettingsTree(){this.renderer.settings.setNodesForKey(this.extensionId,this.settingsNodes())}saveSetting(n,E){this.renderer.updateConfig(F=>{E==null?(0,d.unset)(F,n):(0,d.set)(F,n,E)}),this.updateSettingsTree()}setColorScheme(n,E){}startFrame(n,E,F){for(const I of this.renderables.values()){const M=I.userData.settingsPath;if(I.visible=I.userData.settings.visible,!I.visible){this.renderer.settings.errors.clearPath(M);continue}const H=I.userData.settings.frameLocked??!0?n:I.userData.messageTime,j=I.userData.frameId;if((0,A.S)(I,this.renderer.transformTree,E,F,j,n,H))this.renderer.settings.errors.remove(M,l.o);else{const P=(0,l.v)(E,F,j);this.renderer.settings.errors.add(M,l.o,P)}}}}},74354:(le,C,o)=>{"use strict";o.d(C,{d:()=>d});const d={distance:20,perspective:!0,phi:60,target:[0,0,0],targetOffset:[0,0,0],targetOrientation:[0,0,0,1],thetaOffset:45,fovy:45,near:.5,far:5e3}},86073:(le,C,o)=>{"use strict";o.d(C,{B:()=>l,Q:()=>A});var d=o(76635),g=o.n(d),v=o(41531);const l={type:"point",poseTopic:"/move_base_simple/goal",pointTopic:"/clicked_point",poseEstimateTopic:"/initialpose",poseEstimateXDeviation:.5,poseEstimateYDeviation:.5,poseEstimateThetaDeviation:(0,d.round)(Math.PI/12,8)};class A extends v.d{constructor(S){super("foxglove.PublishSettings",S),S.publishClickTool.addEventListener("foxglove.publish-type-change",this.#e)}dispose(){this.renderer.publishClickTool.removeEventListener("foxglove.publish-type-change",this.#e),super.dispose()}settingsNodes(){const S=this.renderer.config,{publish:n}=S,E=this.handleSettingsAction;return[{path:["publish"],node:{label:"Publish",fields:{type:{label:"Type",input:"select",value:n.type,options:[{label:"Point (geometry_msgs/Point)",value:"point"},{label:"Pose (geometry_msgs/PoseStamped)",value:"pose"},{label:"Pose estimate (geometry_msgs/PoseWithCovarianceStamped)",value:"pose_estimate"}],help:"The type of message to publish when clicking in the scene"},topic:{label:"Topic",input:"string",value:{point:n.pointTopic,pose:n.poseTopic,pose_estimate:n.poseEstimateTopic}[n.type],help:`The topic on which to publish ${{point:"points",pose:"poses",pose_estimate:"pose estimates"}[n.type]}`},...n.type==="pose_estimate"&&{poseEstimateXDeviation:{label:"X deviation",input:"number",value:n.poseEstimateXDeviation,help:"The X standard deviation to publish with pose estimates"},poseEstimateYDeviation:{label:"Y deviation",input:"number",value:n.poseEstimateYDeviation,help:"The Y standard deviation to publish with pose estimates"},poseEstimateThetaDeviation:{label:"Theta deviation",input:"number",value:n.poseEstimateThetaDeviation,help:"The theta standard deviation to publish with pose estimates"}}},defaultExpansionState:"collapsed",handler:E}}]}handleSettingsAction=S=>{if(S.action!=="update"||S.payload.path.length===0)return;const n=S.payload.path,E=n[0],F=S.payload.value;if(E==="publish")n[1]==="topic"?this.renderer.updateConfig(I=>{switch(I.publish.type){case"point":I.publish.pointTopic=F??l.pointTopic;break;case"pose":I.publish.poseTopic=F??l.poseTopic;break;case"pose_estimate":I.publish.poseEstimateTopic=F??l.poseEstimateTopic;break}}):n[1]==="type"?this.renderer.publishClickTool.publishClickType!==F&&(this.renderer.publishClickTool.setPublishClickType(F),this.renderer.publishClickTool.stop()):this.renderer.updateConfig(I=>(0,d.set)(I,n,F));else return;this.updateSettingsTree()};#e=()=>{this.renderer.updateConfig(S=>(S.publish.type=this.renderer.publishClickTool.publishClickType,S)),this.updateSettingsTree()}}},93254:(le,C,o)=>{"use strict";o.d(C,{o:()=>g,v:()=>v});var d=o(61175);const g="MISSING_TRANSFORM";function v(l,A,b){const S=l===b?A:l;return b!==S?`Missing transform from frame <${d.W$.DisplayName(b)}> to frame <${d.W$.DisplayName(S)}>`:b!==A?`Missing transform from frame <${d.W$.DisplayName(b)}> to fixed frame <${d.W$.DisplayName(A)}> to frame <${d.W$.DisplayName(S)}>`:`Identity transform failed for frame <${d.W$.DisplayName(b)}>`}},20414:(le,C,o)=>{"use strict";o.d(C,{A6:()=>F,EI:()=>v,N2:()=>g,OC:()=>S,Th:()=>L,sx:()=>l});var d=o(25740);function g(){return{position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0,w:1}}}function v(P,B){const z=d.Su([0,0,0,1],B[0],B[1],B[2]);return{position:{x:P[0],y:P[1],z:P[2]},orientation:{x:z[0],y:z[1],z:z[2],w:z[3]}}}function l(){return[0,0,0]}function A(P,B,z){return[P,B,z]}function b(P){return[P[0],P[1],P[2]]}function S(){return[0,0,0,1]}function n(P,B,z,Y){return[P,B,z,Y]}function E(P){return[P[0],P[1],P[2],P[3]]}function F(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function I(P,B,z,Y,$,ve,q,Pe,ie,fe,x,R,Q,ce,T,Z){return[P,B,z,Y,$,ve,q,Pe,ie,fe,x,R,Q,ce,T,Z]}function M(P){return[P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],P[8],P[9],P[10],P[11],P[12],P[13],P[14],P[15]]}function D(P,B,z=1e-5){return Math.abs(P-B)<=z}function H(P,B){return D(P.x,B.x)&&D(P.y,B.y)&&D(P.z,B.z)&&D(P.w,B.w)}function j(P,B){return D(P.position.x,B.position.x)&&D(P.position.y,B.position.y)&&D(P.position.z,B.position.z)&&H(P.orientation,B.orientation)}function L(P,B){const z=B[0],Y=B[1],$=B[2],ve=B[4],q=B[5],Pe=B[6],ie=B[8],fe=B[9],x=B[10],R=z+q+x;let Q=0;return R>0?(Q=Math.sqrt(R+1)*2,P[3]=.25*Q,P[0]=(Pe-fe)/Q,P[1]=(ie-$)/Q,P[2]=(Y-ve)/Q):z>q&&z>x?(Q=Math.sqrt(1+z-q-x)*2,P[3]=(Pe-fe)/Q,P[0]=.25*Q,P[1]=(Y+ve)/Q,P[2]=(ie+$)/Q):q>x?(Q=Math.sqrt(1+q-z-x)*2,P[3]=(ie-$)/Q,P[0]=(Y+ve)/Q,P[1]=.25*Q,P[2]=(Pe+fe)/Q):(Q=Math.sqrt(1+x-z-q)*2,P[3]=(Y-ve)/Q,P[0]=(ie+$)/Q,P[1]=(Pe+fe)/Q,P[2]=.25*Q),P}},61175:(le,C,o)=>{"use strict";o.d(C,{ug:()=>q,W$:()=>z,Zf:()=>F,wx:()=>b,v8:()=>ie,N2:()=>A.N2,EI:()=>A.EI});var d=o(70159),g=o(25740),v=o(66867);class l{#e=[];get size(){return this.#e.length}clear(){this.#e.length=0}at(x){return this.#e[x]}set(x,R){const Q=this.binarySearch(x);if(Q>=0)this.#e[Q][1]=R;else{const ce=~Q,T=[x,R];ce>=this.#e.length?this.#e.push(T):this.#e.splice(ce,0,T)}}shift(){return this.#e.shift()}pop(){return this.#e.pop()}remove(x){const R=this.binarySearch(x);R>=0&&this.#e.splice(R,1)}removeAfter(x){const R=this.binarySearch(x),Q=R>=0?R+1:~R;this.#e.length=Q}removeBefore(x){const R=this.binarySearch(x),Q=R>=0?R:~R;this.#e.splice(0,Q)}minEntry(){return this.#e[0]}maxEntry(){return this.#e[this.#e.length-1]}minKey(){return this.#e[0]?.[0]}maxKey(){return this.#e[this.#e.length-1]?.[0]}binarySearch(x){const R=this.#e;if(R.length===0)return-1;let Q=0,ce=R.length-1;if(x<R[Q][0])return~Q;if(x>R[ce][0])return~(ce+1);for(;Q<=ce;){const T=Q+ce>>1,Z=R[T][0];if(Z===x)return T;x<Z?ce=T-1:Q=T+1}return~Q}}var A=o(20414);class b{#e;#t;#n;constructor(x,R){if(x.length===16)this.#n=x,this.#e=[0,0,0],this.#t=[0,0,0,1],d.i0(this.#e,this.#n),(0,A.Th)(this.#t,this.#n);else if(x.length===3&&R!=null)this.#e=x,this.#t=R,g.Fv(this.#t,this.#t),this.#n=d.yl((0,A.A6)(),this.#t,this.#e);else throw new Error("new Transform() expected either mat4 or vec3 + quat")}position(){return this.#e}rotation(){return this.#t}matrix(){return this.#n}setPosition(x){return v.JG(this.#e,x),d.yl(this.#n,this.#t,this.#e),this}setRotation(x){return g.Fv(this.#t,x),d.yl(this.#n,this.#t,this.#e),this}setPositionRotation(x,R){return v.JG(this.#e,x),g.Fv(this.#t,R),d.yl(this.#n,this.#t,this.#e),this}setPose(x){return v.t8(this.#e,x.position.x,x.position.y,x.position.z),g.t8(this.#t,x.orientation.x,x.orientation.y,x.orientation.z,x.orientation.w),g.Fv(this.#t,this.#t),d.yl(this.#n,this.#t,this.#e),this}setMatrixUnscaled(x){return d.JG(this.#n,x),d.i0(this.#e,x),(0,A.Th)(this.#t,x),this}copy(x){return v.JG(this.#e,x.#e),g.JG(this.#t,x.#t),d.JG(this.#n,x.#n),this}toPose(x){x.position.x=this.#e[0],x.position.y=this.#e[1],x.position.z=this.#e[2],x.orientation.x=this.#t[0],x.orientation.y=this.#t[1],x.orientation.z=this.#t[2],x.orientation.w=this.#t[3]}static Identity(){return new b((0,A.sx)(),(0,A.OC)())}static Interpolate(x,R,Q,ce){return v.t7(x.#e,R.position(),Q.position(),ce),g.ZA(x.#t,R.rotation(),Q.rotation(),ce),x.setPositionRotation(x.#e,x.#t),x}}function S(fe,x){return fe<x?-1:fe>x?1:0}function n(fe,x,R){const Q=x-fe,ce=R-fe;return Number(ce)/Number(Q)}function E(fe,x,R){const Q=Number(x-fe);return fe+BigInt(Math.round(Q*R))}const F=4294967295n*BigInt(1e9),I=Math.PI/180,M=[0n,b.Identity()],D=[0n,b.Identity()],H=[0,0,0,0],j=[0,0,0,0],L=b.Identity(),P=(0,A.A6)(),B=Symbol("FALLBACK_FRAME_ID");class z{static FALLBACK_FRAME_ID=B;id;maxStorageTime;maxCapacity;capacityOverfillPercentage;offsetPosition;offsetEulerDegrees;#e;#t;constructor(x,R,Q,ce,T=.1){R&&(this.#e=R),this.id=x,this.maxStorageTime=Q,this.maxCapacity=ce,this.capacityOverfillPercentage=T,this.#t=new l}static assertUserFrame(x){if(x.id===B)throw new Error("Expected user frame")}parent(){return this.#e}root(){if(this.id===B)return this;z.assertUserFrame(this);let x=this;for(;x.#e;)x=x.#e;return x}isRoot(){return this.#e==null}transformsSize(){return this.#t.size}setParent(x){this.#e&&this.#e!==x&&this.#t.clear(),this.#e=x}findAncestor(x){let R=this.#e;for(;R;){if(R.id===x)return R;R=R.#e}}addTransform(x,R){if(this.#t.set(x,R),Math.max(0,this.#t.size-this.maxCapacity)/this.maxCapacity>this.capacityOverfillPercentage){const ce=this.#t.size-this.maxCapacity;let T=this.#t.at(ce)[0];const ge=this.#t.maxKey()-this.maxStorageTime;T=ge>T?ge:T,this.#t.removeBefore(T)}}removeTransformsAfter(x){this.#t.removeAfter(x)}removeTransformAt(x){this.#t.remove(x)}findClosestTransforms(x,R,Q,ce){const T=this.#t.size;if(T===0)return!1;if(T===1){const[ee,ae]=this.#t.maxEntry();return Q<=ee+ce?(x[0]=R[0]=ee,x[1]=R[1]=ae,!0):!1}const Z=this.#t.binarySearch(Q);if(Z>=0){const[ee,ae]=this.#t.at(Z);return x[0]=R[0]=Q,x[1]=R[1]=ae,!0}const ge=~Z;if(ge>=this.#t.size){const[ee,ae]=this.#t.maxEntry();return Q<=ee+ce?(x[0]=R[0]=ee,x[1]=R[1]=ae,!0):!1}const we=ge-1;if(we<0){const[ee,ae]=this.#t.minEntry();return ee+ce>=Q?(x[0]=R[0]=ee,x[1]=R[1]=ae,!0):!1}const[Be,Oe]=this.#t.at(we),[V,N]=this.#t.at(ge);return x[0]=Be,x[1]=Oe,R[0]=V,R[1]=N,!0}applyLocal(x,R,Q,ce,T=F){if(this.id===B||Q.id===B)return x;if(z.assertUserFrame(this),z.assertUserFrame(Q),Q===this)return Y(x,R),x;if(Q.findAncestor(this.id))return z.Apply(x,R,this,Q,!1,ce,T)?x:void 0;if(this.findAncestor(Q.id))return z.Apply(x,R,Q,this,!0,ce,T)?x:void 0;let Z=Q;for(;Z;){const ge=this.findAncestor(Z.id);if(ge)return z.Apply(x,R,ge,Q,!1,ce,T)&&z.Apply(x,x,ge,this,!0,ce,T)?x:void 0;Z=Z.#e}}apply(x,R,Q,ce,T,Z,ge=F){if(Q.applyLocal(x,R,ce,Z,ge)!=null)return this.applyLocal(x,x,Q,T,ge)}displayName(){return z.DisplayName(this.id)}static Interpolate(x,R,Q,ce){const[T,Z]=R,[ge,we]=Q;if(T===ge){x[0]=ge,x[1].copy(we);return}const Be=Math.max(0,Math.min(1,n(T,ge,ce)));x[0]=E(T,ge,Be),b.Interpolate(x[1],Z,we,Be)}static InterpolateTransform(x,R,Q,ce){const[T,Z]=R,[ge,we]=Q;if(T===ge){x.copy(we);return}const Be=Math.max(0,Math.min(1,n(T,ge,ce)));b.Interpolate(x,Z,we,Be)}static GetTransformMatrix(x,R,Q,ce,T){d.yR(x);let Z=Q;for(;Z!==R;){if(!Z.findClosestTransforms(M,D,ce,T))return!1;if(z.InterpolateTransform(L,M,D,ce),Z.offsetEulerDegrees){const ge=L.rotation(),we=$(H,Z.offsetEulerDegrees);g.Jp(j,ge,we),L.setRotation(j)}if(Z.offsetPosition){const ge=L.position();v.IH(ge,ge,Z.offsetPosition),L.setPosition(ge)}if(d.Jp(x,L.matrix(),x),Z.#e==null)throw new Error(`Frame "${R.displayName()}" is not a parent of "${Q.displayName()}"`);Z=Z.#e}return!0}static Apply(x,R,Q,ce,T,Z,ge){return z.GetTransformMatrix(P,Q,ce,Z,ge)?(T&&d.U_(P,P),d.Jp(P,P,L.setPose(R).matrix()),L.setMatrixUnscaled(P).toPose(x),!0):!1}static DisplayName(x){return x===B?"(none)":x===""||x.startsWith(" ")||x.endsWith(" ")?`"${x}"`:x}}function Y(fe,x){const R=x.position,Q=x.orientation;fe.position.x=R.x,fe.position.y=R.y,fe.position.z=R.z,fe.orientation.x=Q.x,fe.orientation.y=Q.y,fe.orientation.z=Q.z,fe.orientation.w=Q.w}function $(fe,x){const R=x[0]*I,Q=x[1]*I,ce=x[2]*I,T=Math.cos(R/2),Z=Math.cos(Q/2),ge=Math.cos(ce/2),we=Math.sin(R/2),Be=Math.sin(Q/2),Oe=Math.sin(ce/2);return fe[0]=we*Z*ge+T*Be*Oe,fe[1]=T*Be*ge-we*Z*Oe,fe[2]=T*Z*Oe+we*Be*ge,fe[3]=T*Z*ge-we*Be*Oe,fe}const ve=5e4;var q;(function(fe){fe[fe.NOT_UPDATED=0]="NOT_UPDATED",fe[fe.UPDATED=1]="UPDATED",fe[fe.CYCLE_DETECTED=2]="CYCLE_DETECTED"})(q||(q={}));const Pe=["base_link","odom","map","earth"];class ie{#e=new Map;#t;#n;defaultRootFrame;constructor(x=F,R=ve){this.#t=x,this.#n=R,this.defaultRootFrame=new z(z.FALLBACK_FRAME_ID,void 0,this.#t,this.#n),this.defaultRootFrame.addTransform(0n,b.Identity())}addTransform(x,R,Q,ce){let T=!this.hasFrame(x),Z=!1;const ge=this.getOrCreateFrame(x),we=ge.parent();return(we==null||we.id!==R)&&(Z=this.#i(x,R),Z||(ge.setParent(this.getOrCreateFrame(R)),T=!0)),Z||ge.addTransform(Q,ce),Z?q.CYCLE_DETECTED:T?q.UPDATED:q.NOT_UPDATED}removeTransform(x,R,Q){const ce=this.frame(x);ce&&ce.parent()?.id===R&&(ce.removeTransformAt(Q),this.#s(ce))}#s(x){if(x.transformsSize()>0)return;const R=new Map;for(const Q of this.#e.values())R.set(Q.id,new Set);for(const Q of this.#e.values()){const ce=Q.parent();if(ce===x)return;if(ce==null)continue;const T=R.get(ce.id);if(!T)throw new Error("invariant: should have children array");T.add(Q.id)}for(let Q=x;Q;Q=Q.parent()){if(Q.transformsSize()>0)return;const ce=R.get(Q.id);if(ce&&ce.size>0)return;this.#e.delete(Q.id),R.delete(Q.id);const T=Q.parent()?.id;T&&R.get(T)?.delete(Q.id)}}clear(){this.#e.clear()}clearAfter(x){for(const R of this.#e.values())R.removeTransformsAfter(x)}hasFrame(x){return x===z.FALLBACK_FRAME_ID?!0:this.#e.has(x)}frame(x){return x===z.FALLBACK_FRAME_ID?this.defaultRootFrame:this.#e.get(x)}getOrCreateFrame(x){let R=this.#e.get(x);return R||(R=new z(x,void 0,this.#t,this.#n),this.#e.set(x,R)),R}frames(){return this.#e}apply(x,R,Q,ce,T,Z,ge,we){const Be=this.frame(Q),Oe=this.frame(T);if(!Be||!Oe)return;const V=(ce!=null?this.frame(ce):Be.root())??Be.root();return Be.apply(x,R,V,Oe,Z,ge,we)}frameList(){const x=Array.from(this.#e.values()),R=new Map(x.map(Z=>[Z.id,{id:Z.id,children:[]}])),Q=[];for(const Z of x){const ge=R.get(Z.id),we=Z.parent()?.id;if(we==null)Q.push(ge);else{const Be=R.get(we);if(Be==null)continue;Be.children.push(ge)}}const ce=[];function T(Z,ge){const we=z.DisplayName(Z.id);ce.push({value:Z.id,label:`${"\xA0\xA0".repeat(ge)}${we}`}),Z.children.sort((Be,Oe)=>Be.id.localeCompare(Oe.id));for(const Be of Z.children)T(Be,ge+1)}Q.sort((Z,ge)=>Z.id.localeCompare(ge.id));for(const Z of Q)T(Z,0);return ce}getDefaultFollowFrameId(){const x=this.frames();if(x.size===0)return;for(const T of Pe){const Z=this.frame(T);if(Z)return Z.id}const R=new Map;for(const T of x.values()){const ge=T.root().id;R.set(ge,(R.get(ge)??0)+1)}return Array.from(R.entries()).sort((T,Z)=>Z[1]-T[1])[0]?.[0]}#i(x,R){if(x===R)return!0;let Q=this.frame(R);for(;Q?.parent();){if(Q.parent()?.id===x)return!0;Q=Q.parent()}return!1}static Clone(x){const R=new ie(x.#t,x.#n);return R.#e=x.#e,R}}},10336:(le,C,o)=>{"use strict";o.d(C,{S:()=>v});var d=o(61175);const g=(0,d.N2)();function v(l,A,b,S,n,E,F){const I=l.userData.pose;if(!I)throw new Error(`Missing userData.pose for ${l.name}`);const M=Boolean(A.apply(g,I,b,S,n,E,F));if(l.visible=M,M){const D=g.position,H=g.orientation;l.position.set(D.x,D.y,D.z),l.quaternion.set(H.x,H.y,H.z,H.w)}return M}},1375:(le,C,o)=>{"use strict";o.d(C,{Wr:()=>b,ym:()=>n});const d=new Map([["uint8","number"],["int8","number"],["uint16","number"],["int16","number"],["uint32","number"],["int32","number"],["float32","number"],["float64","number"],["int64","bigint"],["uint64","bigint"],["string","string"],["bool","boolean"],["time","Time"],["duration","Duration"]]),g=new Map([["uint8","Uint8Array"],["int8","Int8Array"],["int16","Int16Array"],["uint16","Uint16Array"],["int32","Int32Array"],["uint32","Uint32Array"],["int64","BigInt64Array"],["uint64","BigUint64Array"],["float32","Float32Array"],["float64","Float64Array"]]);function v(E){return JSON.stringify(E)}const l=E=>{const F=new Set;let I=`
    /**
     * MessageTypeBySchemaName enumerates the message types for for all the schema names
     * in the current data source.
     *
     * You probably want to use Message<...> instead.
     */
    export type MessageTypeBySchemaName = {
  `;for(const[M,D]of E){if(F.has(M)){I+=`
// ${M} appeared multiple times`;continue}F.add(M),I+=`
${v(M)}: {`;for(const H of D.definitions){const{type:j,isConstant:L,isArray:P}=H,B=g.get(j),z=d.get(j),Y=v(H.name),$=H.optional===!0?"?":"";L===!0?I+=`
 // ${H.name} = ${H.valueText}`:P===!0?B?I+=`
${Y}${$}: ${B},`:z?I+=`
${Y}${$}: ${z}[],`:I+=`
${Y}${$}: MessageTypeBySchemaName[${v(j)}][],`:z?I+=`
${Y}${$}: ${z},`:I+=`
${Y}${$}: MessageTypeBySchemaName[${v(j)}],`}I+=`
},`}return I+=`
};`,I};function A(E){let F=`
    /**
     * MessageTypeByTopic enumerates the Messages types for all the topics in
     * the current data source.
     *
     * You probably want to use Input<"/my-topic"> instead of MessageTypeByTopic.
     */
    export type MessageTypeByTopic = {`;for(const I of E)F+=`${v(I.name)}: MessageTypeBySchemaName[${v(I.schemaName??"")}]
`;return F+=`
};`,F}function b(E){const F=A(E.topics),I=new Map(E.datatypes);for(const H of E.topics)(H.schemaName==null||!I.has(H.schemaName))&&I.set(H.schemaName??"",{name:H.schemaName,definitions:[]});return`
// NOTE:
// This file is generated from the current data source.
// It contains helper types for looking up message definitions by schema name or topic.
//
// You likely want to use the higher-level types in \`./types\` rather than the types in this file directly.

type Time = {
  sec: number,
  nsec: number,
};

type Duration = Time;

${l(I)}

${F}
`}let S;function n(){return S??=b({topics:[],datatypes:new Map})}},23621:(le,C,o)=>{"use strict";o.d(C,{Y:()=>d,k:()=>g});const d="ros/index.d.ts",g=`
  export declare interface Duration {
    sec: number;
    nsec: number;
  }

  export declare interface Time {
    sec: number;
    nsec: number;
  }

  // Once a data source Messages will be populated with interfaces matching the data source messages.
  export declare namespace Messages {}

  // Once a data source TopicsToMessageDefinition will be populated with topic names to message interfaces.
  export declare interface TopicsToMessageDefinition {}

  /**
   * To correctly type your inputs, you use this type to refer to specific
   * input topics, e.g. 'Input<"/your_input_topic">'. If you have
   * multiple input topics, use a union type, e.g.
   * 'Input<"/your_input_topic_1"> |
   * Input<"/your_input_topic_2">'.
   *
   * These types are dynamically generated from the bag(s) currently in your
   * Foxglove Studio session, so if a datatype changes, your User Script
   * may not compile on the newly formatted bag.
   */
  export declare interface Input<T extends keyof TopicsToMessageDefinition> {
    topic: T;
    receiveTime: Time;
    message: TopicsToMessageDefinition[T];
  }

`},27332:(le,C,o)=>{"use strict";o.d(C,{Ai:()=>l});const d=(A,b)=>A.sec===b.sec&&A.nsec===b.nsec,g=(A,b)=>{const S=A.sec-b.sec;return S!==0?S:A.nsec-b.nsec},v=A=>{let{sec:b,nsec:S}=A;for(;S>1e9;)S-=1e9,b+=1;for(;S<0;)S+=1e9,b-=1;return{sec:b,nsec:S}},l=({sec:A,nsec:b},{sec:S,nsec:n})=>v({sec:A-S,nsec:b-n})},56924:(le,C,o)=>{"use strict";o.d(C,{Fb:()=>g,H_:()=>d,SM:()=>v});const d={Hint:1,Info:2,Warning:4,Error:8},g={Typescript:"Typescript",DatatypeExtraction:"DatatypeExtraction",InputTopicsChecker:"InputTopicsChecker",OutputTopicChecker:"OutputTopicChecker",Runtime:"Runtime"},v={RUNTIME:1,DatatypeExtraction:{NO_DEFAULT_EXPORT:1,NON_FUNC_DEFAULT_EXPORT:2,NO_TYPE_RETURN:3,BAD_TYPE_RETURN:4,UNKNOWN_ERROR:5,NO_UNIONS:6,NO_FUNCTIONS:7,NO_CLASSES:8,NO_TYPE_LITERALS:9,NO_TUPLES:10,NO_INTERSECTION_TYPES:11,NO_TYPEOF:12,PREFER_ARRAY_LITERALS:13,STRICT_MARKERS_RETURN_TYPE:14,LIMITED_UNIONS:15,NO_NESTED_ANY:16,NO_MAPPED_TYPES:17,INVALID_PROPERTY:18,INVALID_INDEXED_ACCESS:19},InputTopicsChecker:{NO_TOPIC_AVAIL:1,NO_INPUTS_EXPORT:2,EMPTY_INPUTS_EXPORT:3,BAD_INPUTS_TYPE:4},OutputTopicChecker:{NO_OUTPUTS:1,NOT_UNIQUE:2,EXISTING_TOPIC:3}}},24304:(le,C,o)=>{"use strict";o.d(C,{C:()=>g,m:()=>d});var d;(function(v){v.NOT_PRESENT="NOT_PRESENT",v.INITIALIZING="INITIALIZING",v.RECONNECTING="RECONNECTING",v.BUFFERING="BUFFERING",v.PRESENT="PRESENT",v.ERROR="ERROR"})(d||(d={}));const g={advertise:"advertise",assets:"assets",callServices:"callServices",setSpeed:"setSpeed",playbackControl:"playbackControl",getParameters:"getParameters",setParameters:"setParameters"}},32614:(le,C,o)=>{"use strict";o.d(C,{Z:()=>l});var d=o(76635),g=o.n(d),v=o(40301);function l(A,b,S,n){const E=[],F=S[A];if((0,v.lD)(A)&&F){const{activeTabIdx:L,tabs:P}=F,B=P[L]?.layout;if(B!=null){const z=(0,v.CD)(B,S);E.push(...z)}}const I=(0,v.m2)(S);let M=b;const D=[];for(;M!=null;)D.push(M),M=I[M];E.push(...D);const H=(0,d.xor)(n,[A]);return(0,d.without)(H,...E)}},39367:(le,C,o)=>{"use strict";o.d(C,{W0:()=>n,_N:()=>F,vv:()=>I});var d=o(52322),g=o(2784),v=o(42893),l=o(82044),A=o(96715);function b(M){return(0,v.M)(D=>({sequenceNumbers:{},settingsTrees:{},defaultTitles:{},incrementSequenceNumber:H=>{D(j=>({sequenceNumbers:{...j.sequenceNumbers,[H]:(j.sequenceNumbers[H]??0)+1}}))},updateSettingsTree:(H,j)=>{D(L=>({settingsTrees:{...L.settingsTrees,[H]:j}}))},updateDefaultTitle:(H,j)=>{D(L=>({defaultTitles:{...L.defaultTitles,[H]:j}}))},...M}))}const S=M=>M.updateSettingsTree;function n(){const{id:M}=(0,l.R)(),D=(0,A.J)(S),H=(0,g.useCallback)(j=>{D(M,j)},[M,D]);return(0,g.useEffect)(()=>()=>{D(M,void 0)},[M,D]),H}const E=M=>M.updateDefaultTitle;function F(){const M=(0,l.R)().id,D=(0,g.useCallback)(P=>P.defaultTitles[M],[M]),H=(0,A.J)(E),j=(0,A.J)(D),L=(0,g.useCallback)(P=>{H(M,P)},[M,H]);return[j,L]}function I(M){const{children:D,initialState:H}=M,[j]=(0,g.useState)(()=>b(H));return(0,d.jsx)(A.c.Provider,{value:j,children:D})}},2661:(le,C,o)=>{"use strict";o.d(C,{e:()=>g});const d=o.g;function g(l){d.foxgloveStudioReportErrorFn?.(l)}function v(l){d.foxgloveStudioReportErrorFn=l}},28904:(le,C,o)=>{"use strict";o.d(C,{q:()=>d});var d;(function(g){g.APP_INIT="Studio: App Initialized",g.DIALOG_SELECT_VIEW="Studio: Dialog View Selected",g.DIALOG_CLOSE="Studio: Dialog Closed",g.DIALOG_CLICK_CTA="Studio: Dialog CTA Clicked",g.APP_BAR_CLICK_CTA="Studio: App Bar CTA CLicked",g.TOUR_PROMPT_SHOWN="Studio: New UI Tour prompt shown",g.TOUR_STARTED="Studio: New UI Tour started",g.TOUR_BACK="Studio: New UI Tour step back",g.TOUR_NEXT="Studio: New UI Tour step next",g.TOUR_COMPLETED="Studio: New UI Tour completed",g.TOUR_DISMISSED="Studio: New UI Tour dismissed",g.APP_MENU_CLICK="Studio: App Menu Clicked",g.HELP_MENU_CLICK_CTA="Studio: Help Menu CTA Clicked",g.PLAYER_CONSTRUCTED="Studio: Player Constructed",g.PLAYER_PLAY="Studio: Player Played",g.PLAYER_SEEK="Studio: Player Seeked",g.PLAYER_SET_SPEED="Studio: Player Speed Set",g.PLAYER_PAUSE="Studio: Player Paused",g.PLAYER_CLOSE="Studio: Player Closed",g.LAYOUT_UPDATE="Studio: Layout Updated",g.LAYOUT_CREATE="Studio: Layout Created",g.LAYOUT_DUPLICATE="Studio: Layout Duplicated",g.LAYOUT_RENAME="Studio: Layout Renamed",g.LAYOUT_DELETE="Studio: Layout Deleted",g.LAYOUT_SELECT="Studio: Layout Selected",g.LAYOUT_IMPORT="Studio: Layout Imported",g.LAYOUT_EXPORT="Studio: Layout Exported",g.LAYOUT_SHARE="Studio: Layout Shared",g.LAYOUT_OVERWRITE="Studio: Layout Overwritten",g.LAYOUT_REVERT="Studio: Layout Reverted",g.LAYOUT_MAKE_PERSONAL_COPY="Studio: Layout Personal Copy Made",g.PANEL_ADD="Studio: Panel Added",g.PANEL_DELETE="Studio: Panel Deleted",g.VARIABLE_ADD="Studio: Variable Added",g.VARIABLE_DELETE="Studio: Variable Deleted",g.IMAGE_DOWNLOAD="Studio: Image Downloaded",g.EXTENSION_INSTALL="Studio: Extension Installed",g.EXTENSION_UNINSTALL="Studio: Extension Uninstalled",g.EXPERIMENTAL_FEATURE_TOGGLE="Studio: Experimental Feature Toggled"})(d||(d={}))},43234:(le,C,o)=>{"use strict";o.d(C,{W:()=>A,o:()=>b});var d=o(2784),g=o(42689),v=o(8533);const l=Symbol("MESSAGE_PATH_DRAG_TYPE");function A({path:S,rootSchemaName:n,isTopic:E,isLeaf:F}){const[I,M]=(0,d.useState)(),D=(0,d.useRef)(new Set),H=(0,d.useMemo)(()=>({path:S,rootSchemaName:n,isTopic:E,isLeaf:F,setDropStatus:M,overDropTargets:D.current}),[S,n,E,F]),[{isDragging:j},L,P]=(0,g.c)({type:l,item:H,options:{dropEffect:"move"},collect(z){return{isDragging:z.isDragging()}}});let B;return j&&(I?I.canDrop?I.effect==="add"?B="copy":B="auto":B="no-drop":B="auto"),{connectDragSource:L,connectDragPreview:P,cursor:B,isDragging:j}}function b(){const[S,n]=(0,d.useState)(),[{isDragging:E,isOver:F,isValidTarget:I,message:M},D]=(0,v.L)({accept:l,canDrop(H,j){return S?!!S.getDropStatus(H).canDrop:!1},collect(H){if(H.getItemType()!==l)return{isDragging:!1,isOver:!1,isValidTarget:!1};const j=H.getItem(),L=H.getHandlerId();if(!j||L==null)return{isDragging:j!=null,isOver:!1,isValidTarget:!1};const P=H.isOver({shallow:!0}),B=S?.getDropStatus(j)??{canDrop:!1};return P?(j.overDropTargets.add(L),j.setDropStatus(B)):(j.overDropTargets.delete(L),j.overDropTargets.size===0&&j.setDropStatus(void 0)),{isDragging:!0,isOver:P&&H.canDrop(),isValidTarget:B.canDrop,message:B.message??(B.effect==="add"?`Add ${j.path}`:`View ${j.path}`)}},drop(H,j){S?.handleDrop(H)}});return{isDragging:E,isOver:F,isValidTarget:I,dropMessage:M,connectMessagePathDropTarget:D,setMessagePathDropConfig:n}}},88724:(le,C,o)=>{"use strict";o.d(C,{Z:()=>I});var d=o(52322),g=o(39721),v=o(79396),l=o(76919),A=o(2784),b=o(68588),S=o(1851),n=o(2784);const E=(0,g.Z)({key:"mui",prepend:!0}),F=n.forwardRef((M,D)=>(0,d.jsx)(d.Fragment,{children:M.children}));F.displayName="ThemeContainer";function I({children:M,isDark:D}){(0,A.useEffect)(()=>{document.documentElement.setAttribute("data-color-mode",D?"dark":"light"),document.querySelector("#loading-styles")?.remove()},[D]);const{i18n:H}=(0,b.$G)(),j=(0,A.useMemo)(()=>(0,S.A)(D?"dark":"light",H.language),[H.language,D]);return(0,A.useLayoutEffect)(()=>{const L=document.createElement("meta");return L.name="theme-color",L.content=j.palette.background.paper,document.head.appendChild(L),()=>{L.remove()}},[j]),(0,d.jsx)(v.C,{value:E,children:(0,d.jsx)(l.Z,{theme:j,children:M})})}},45243:(le,C,o)=>{"use strict";o.d(C,{Z:()=>b,t:()=>l});var d;const g="$$RESPONSE",v="$$ERROR";function l(){const S={onmessage:void 0,postMessage(E,F){const I=new MessageEvent("message",{data:E});n.onmessage&&n.onmessage(I)},terminate:()=>{}},n={onmessage:void 0,postMessage(E,F){const I=new MessageEvent("message",{data:E});S.onmessage&&S.onmessage(I)},terminate:()=>{}};return{local:S,remote:n}}class A{static transferables="$$TRANSFERABLES";#e;#t=0;#n={};#s=new Map;constructor(n){if(this.#e=n,this.#e.onmessage)throw new Error("channel.onmessage is already set. Can only use one Rpc instance per channel.");this.#e.onmessage=this.#i}#i=n=>{const{id:E,topic:F,data:I}=n.data;if(F===g){this.#n[E]?.(n.data),delete this.#n[E];return}new Promise(M=>{const D=this.#s.get(F);if(!D)throw new Error(`no receiver registered for ${F}`);M(D(I))}).then(M=>{if(!M){this.#e.postMessage({topic:g,id:E});return}const D=M[d.transferables];delete M[d.transferables];const H={topic:g,id:E,data:M};this.#e.postMessage(H,D)}).catch(M=>{const D={topic:g,id:E,data:{[v]:!0,name:M.name,message:M.message,stack:M.stack}};this.#e.postMessage(D)})};terminate(){for(const[n,E]of Object.entries(this.#n))E({topic:g,id:n,data:{[v]:!0,name:"Error",message:"Rpc terminated",stack:new Error().stack}})}async send(n,E,F){const I=this.#t++,M={topic:n,id:I,data:E},D=new Promise((H,j)=>{this.#n[I]=L=>{if(L.data?.[v]!=null){const P=new Error(L.data.message);P.name=L.data.name,P.stack=L.data.stack,j(P)}else H(L.data)}});return this.#e.postMessage(M,F),await D}receive(n,E){if(this.#s.has(n))throw new Error(`Receiver already registered for topic: ${n}`);this.#s.set(n,E)}}d=A;const b=A},10363:(le,C,o)=>{"use strict";o.d(C,{v:()=>d});function d(g,v){throw new Error(v)}},28e3:(le,C,o)=>{"use strict";o.d(C,{Z:()=>v});var d=o(36537);function g(l){const A=document.body,b=document.createElement("textarea");A.appendChild(b),b.value=l,b.select(),document.execCommand("copy"),A.removeChild(b)}const v={async copy(l){if((0,d.N)(navigator.clipboard).writeText!=null)try{await navigator.clipboard.writeText(l);return}catch{g(l)}else g(l)}}},86286:(le,C,o)=>{"use strict";o.d(C,{Z:()=>d});function d(g,v,l){const A=l-v.length,b=A<=0?[]:g.slice(-A),S=l-b.length;for(let n=Math.max(0,v.length-S);n<v.length;++n)b.push(v[n]);return b}},55433:(le,C,o)=>{"use strict";o.d(C,{G:()=>g,W:()=>d});function d(v,l){g([{blob:new Blob([v]),fileName:l}])}function g(v){const l=document.body,A=document.createElement("a");A.style.display="none",l.appendChild(A);const b=v.map(S=>{const n=window.URL.createObjectURL(S.blob);return A.setAttribute("download",S.fileName),A.setAttribute("href",n),A.click(),n});window.requestAnimationFrame(()=>{l.removeChild(A),b.forEach(S=>{URL.revokeObjectURL(S)})})}},53542:(le,C,o)=>{"use strict";o.d(C,{g:()=>d});class d extends Error{details;extraInfo;message;constructor(v,l){if(super(),this.details=v,this.extraInfo=l,this.name="AppError",this.message="",v instanceof Error?this.message=v.stack??v.message:typeof v=="string"&&(this.message=v),l!=null)if(l.componentStack!=null)this.message+=`

${l.componentStack}`;else try{const A=JSON.stringify(l);this.message+=`

${A}`}catch{this.message+=`

[ Either cyclic object or object with BigInt(s) ]`}this.message===""&&(this.message="Unknown Error")}}},59635:(le,C,o)=>{"use strict";o.d(C,{LU:()=>I,WU:()=>n,_v:()=>H,mr:()=>F,p6:()=>E});var d=o(98321),g=o.n(d),v=o(54764),l=o.n(v),A=o(44668),b=o.n(A),S=o(24643);g()(l());function n(j,L){return`${E(j,L)} ${F(j,L)}`}function E(j,L){return j.sec<0||j.nsec<0?(console.error("Times are not allowed to be negative"),"(invalid negative time)"):l().tz((0,A.toDate)(j),L??l().tz.guess()).format("YYYY-MM-DD")}function F(j,L){return j.sec<0||j.nsec<0?(console.error("Times are not allowed to be negative"),"(invalid negative time)"):l().tz((0,A.toDate)(j),L??l().tz.guess()).format("h:mm:ss.SSS A z")}function I(j){return l().duration(Math.round(j.sec*1e3+j.nsec/1e6)).format("h:mm:ss.SSS",{trim:!1})}function M(j,L){const P=L!=null?l().tz(j,"YYYY-MM-DD h:mm:ss.SSS A z",L):l()(j,"YYYY-MM-DD h:mm:ss.SSS A z"),B=P.toDate(),z=P.isValid()?(0,A.fromDate)(B):void 0;if(!(!z||z.sec<=0||z.nsec<0))return z}const D=/^\d+-\d+-\d+\s+\d+:\d+:\d+.\d+\s[PpAa][Mm]\s[A-Za-z$]+/,H=({text:j,timezone:L})=>{if(j==null||j==="")return;const P=isNaN(+j),B=!(D.test(j)&&M(j,L));if(!(P&&B))return{time:P?M(j,L):(0,S.Z)(j),method:P?"TOD":"SEC"}}},11701:(le,C,o)=>{"use strict";o.d(C,{bm:()=>l,lk:()=>v,wd:()=>g});var d=o(47746);const g="/studio_script/";function v(){const{palette:{mode:A,text:b}}=(0,d.Z)();return{dark:{base00:"transparent",base0B:"#ffa657",base09:"#7ee787",base07:"#79c0ff",base08:"#ff7b72",base0D:"#79c0ff",base03:b.secondary},light:{base00:"transparent",base0B:"#953800",base09:"#116329",base07:"#0550ae",base08:"#cf222e",base0D:"#0550ae",base03:b.secondary}}[A]}const l="Tab"},61969:(le,C,o)=>{"use strict";o.d(C,{Z:()=>d});function d(){return Boolean(o.g.desktopBridge)}},40301:(le,C,o)=>{"use strict";var d="../../packages/studio-base/src/util/layout.ts";o.d(C,{$k:()=>M,A$:()=>ge,CD:()=>fe,IP:()=>Y,VJ:()=>Q,_f:()=>ce,bP:()=>Pe,dr:()=>H,fG:()=>Be,jQ:()=>q,kY:()=>ie,lD:()=>D,m2:()=>$,nJ:()=>I,p1:()=>R,p9:()=>j,rZ:()=>we,th:()=>T,w$:()=>Oe,xS:()=>F});var g=o(76635),v=o.n(g),l=o(28219),A=o(8220),b=o(23503),S=o(2661),n=o(11701);const E=b.ZP.getLogger(d),F="foxglovePanelTitle";function I(V){const ee=Math.round(Math.random()*1e10).toString(36);return`${V}!${ee}`}function M(V){return V.split("!")[0]??""}function D(V){return M(V)===n.bm}function H(V){return V!=null&&"tabs"in V&&"activeTabIdx"in V}function j(V,N,ee=[]){if(N===V)return ee;if(N!=null&&(0,l.UY)(N)){const ae=j(V,N.first,[...ee,"first"]);if(ae.length>0)return ae;const me=j(V,N.second,[...ee,"second"]);if(me.length>0)return me}return[]}function L(V){const N={};for(const ee of V)N[ee]=I(M(ee));return N}function P(V,N){if(typeof V=="string")return N[V]??I(M(V));if(V==null)return;const ee={};for(const ae in V)typeof V[ae]=="object"&&!Array.isArray(V[ae])?ee[ae]=P(V[ae],N):typeof V[ae]=="string"&&N[V[ae]]!=null?ee[ae]=N[V[ae]]:ee[ae]=V[ae];return ee}function B(V){if(typeof V=="string")return V;const N=[V.first,V.second].filter(Boolean).map(B),[ee,ae]=N;return ee==null&&ae==null?"":ee!=null&&ae!=null?{...V,first:ee,second:ae}:{...V,first:ee??ae??"",second:""}}function z(V,N){return typeof V=="string"?N(V):{...V,first:z(V.first,N),second:z(V.second,N)}}function Y(V,N,ee){const ae=z(V,me=>{if(typeof me=="string"&&D(me)&&!ee.includes(me)){const de=Z(me,N),pe=de.tabs[de.activeTabIdx]?.layout;if(pe!=null)return Y(pe,N,ee)}return me});return B(ae)}const $=V=>Object.entries(V).reduce((N,[ee,ae])=>(D(ee)&&ae!=null&&ae.tabs?.forEach(de=>{(0,l.fY)(de.layout??null).forEach(oe=>N[oe]=ee)}),N),{}),ve=V=>({id:N,config:ee})=>ee.tabs?{id:N,config:{...ee,tabs:ee.tabs.map(ae=>({...ae,layout:P(ae.layout,V)}))}}:{id:N,config:ee},q=({id:V,config:N,relatedConfigs:ee})=>{if(!ee)return{configs:[{id:V,config:N}]};const ae=Pe([V],{[V]:N}),me=L(ae);return{configs:[...(0,A.Z)(ae,oe=>{const ne=me[oe],ue=ee[oe];if(!(ne==null||ue==null))return{id:ne,config:ue}}),{id:V,config:N}].map(ve(me))}};function Pe(V,N){const ee=V.filter(D),ae=[];return ee.forEach(me=>{const de=N[me];de?.tabs&&de.tabs.forEach(pe=>{ae.push(pe.layout,...Pe((0,l.fY)(pe.layout??null),N))})}),(0,g.flatMap)(ae,l.fY)}const ie={activeTabIdx:0,tabs:[{title:"1",layout:void 0}]};function fe(V,N){const ee=(0,l.fY)(V),ae=Pe(ee,N);return[...ee,...ae]}const x=V=>{if(!V)return!1;if(!Array.isArray(V.tabs)||typeof V.activeTabIdx!="number"){const N=new Error("A non-Tab panel config is being operated on as if it were a Tab panel.");return E.info(`Invalid Tab panel config: ${N.message}`,V),(0,S.e)(N),!1}if(V.activeTabIdx>=V.tabs.length){const N=new Error("A Tab panel has an activeTabIdx for a nonexistent tab.");return E.info(`Invalid Tab panel config: ${N.message}`,V),(0,S.e)(N),!1}return!0},R=(V,N)=>{const ee=N.tabs.map((ae,me)=>me===N.activeTabIdx?{...ae,layout:V}:ae);return N.activeTabIdx===-1&&ee.push({layout:V,title:"1"}),{...N,tabs:ee,activeTabIdx:Math.max(0,N.activeTabIdx)}},Q=(V=[],N,ee)=>{if(!x(N))return{configs:[]};const ae=N.tabs[N.activeTabIdx]?.layout;let me;if(V.length===0)me=void 0;else{const pe=(0,l.NO)(ae??null,V);me=(0,l.Xw)(ae,[pe])}return{configs:[{id:ee,config:R(me,N)}]}},ce=(V,N,ee,ae)=>{if(V==null)return[];const me=(0,l.PC)(V,ee),de=ae==="left"||ae==="top",[pe,oe]=de?[N,me]:[me,N];return[{path:ee,spec:{$set:{first:pe,second:oe,direction:ae==="left"||ae==="right"?"row":"column"}}}]},T=(V,N,ee,ae,me)=>{const de=x(ae)?ae:ie,pe=de.tabs[de.activeTabIdx]?.layout,oe=pe!=null&&N&&ee!=null?(0,l.Xw)(pe,ce(pe,V,N,ee)):V;return{configs:[{id:me,config:R(oe,de)}]}};function Z(V,N){const ee=N[V];return ee&&x(ee)?ee:ie}const ge=({source:V,target:N,savedProps:ee})=>{const{tabs:ae,activeTabIdx:me}=Z(V.panelId,ee),de=V.tabIndex??ae.length-1,pe=N.tabIndex??ae.length-1,oe=[...ae.slice(0,de),...ae.slice(de+1)];oe.splice(pe,0,ae[de]);const ne=me===V.tabIndex,ue=pe<=me&&de>=me,X=de<=me&&pe>=me;let he=me;return ne?he=pe:ue?he++:X&&he--,{configs:[{id:V.panelId,config:{tabs:oe,activeTabIdx:he}}]}},we=({source:V,target:N,savedProps:ee})=>{const ae=Z(V.panelId,ee),me=Z(N.panelId,ee),de=V.tabIndex??ae.tabs.length,pe=N.tabIndex??me.tabs.length,oe=[...ae.tabs.slice(0,de),...ae.tabs.slice(de+1)],ne=me.tabs.slice();ne.splice(pe,0,ae.tabs[de]);const X=de<=ae.activeTabIdx?Math.max(0,ae.activeTabIdx-1):ae.activeTabIdx,Ee=pe<=me.activeTabIdx?me.activeTabIdx+1:me.activeTabIdx;return{configs:[{id:V.panelId,config:{tabs:oe,activeTabIdx:X}},{id:N.panelId,config:{tabs:ne,activeTabIdx:Ee}}]}},Be=(V,N)=>{const{originalId:ee,newId:ae,idsToRemove:me=[]}=V,de=(0,l.fY)(N);return(0,g.xor)(de,me).length===0?ae:(0,g.uniq)((0,g.compact)([...me,ee])).reduce((pe,oe)=>{if(de.includes(oe)){if(pe===ee)return ae;if(pe==null||pe===oe)return}else return pe;const ne=j(oe,pe),ue=oe===ee?{path:ne,spec:{$set:ae}}:(0,l.NO)(pe,ne);return(0,l.Xw)(pe,[ue])},N)};function Oe(V,N,ee,ae){const me=[];return Object.keys(ae).filter(D).forEach(pe=>{const{tabs:oe,activeTabIdx:ne}=Z(pe,ae),ue=oe[ne]?.layout;if(ue!=null&&(0,l.fY)(ue).some(X=>ee.includes(X))){const X=Be({originalId:V,newId:N,idsToRemove:ee},ue),he=R(X,ae[pe]);me.push({id:pe,config:he})}}),me}},23571:(le,C,o)=>{"use strict";o.d(C,{Y:()=>d});function d(g){return g}},36537:(le,C,o)=>{"use strict";o.d(C,{N:()=>d});function d(g){return g}},83352:(le,C,o)=>{"use strict";o.d(C,{Z:()=>l});var d=o(71747);const g=(0,d.Z)({insensitive:!0});function v(A){return A==null?g:(b,S)=>g(b[A],S[A])}const l=v},64578:(le,C,o)=>{"use strict";o.d(C,{Z:()=>d});function d(){const g=o.g.fetch;o.g.fetch=async(v,l)=>{const A=new TypeError(`Failed to fetch: ${v}`);return await g(v,l).catch(b=>{throw b.message==="Failed to fetch"?A:b})}}},24643:(le,C,o)=>{"use strict";o.d(C,{Z:()=>l});const d=/^\d+$/,g=/^(?!\.$)(\d*)\.(\d*)$/,v=1000n*365n*24n*60n*60n*BigInt(1e9);function l(A){const b=A.trim();if(d.test(b)){let n=BigInt(b)*BigInt(1e9);for(;n>v;)n/=1000n;return{sec:Number(n/BigInt(1e9)),nsec:Number(n%BigInt(1e9))}}const S=g.exec(b);if(S?.[1]!=null&&S[2]!=null)return{sec:Number(S[1]),nsec:Number(S[2].substr(0,9).padEnd(9,"0"))}}},63136:(le,C,o)=>{"use strict";o.d(C,{Z:()=>g});const g={nextTick:(v,...l)=>{queueMicrotask(()=>{v(...l)})},title:"browser",browser:!0,env:{},argv:[]}},42146:(le,C,o)=>{"use strict";o.d(C,{X8:()=>S,ZP:()=>n,tm:()=>b});var d=o(2661),g=o(53542),v=o(77498);const l=(E,F,I,M)=>{if((0,v.KC)()){(M==="error"?console.error:M==="warn"?console.warn:console.info)("Web Worker has uninitialized sendNotification function; this means this error message cannot show up in the UI (so we show it here in the console instead).",E,F,I);return}console.error("Notification before error display is mounted",E,F,I)};let A=l;function b(E){if(A!==l)throw new Error("Tried to overwrite existing NotificationHandler");A=E}function S(){if(A===l)throw new Error("Tried to unset NotificationHandler but it was already the default");A=l}function n(E,F,I,M){I==="app"&&(M==="warn"||M==="error")&&(0,d.e)(new g.g(F,E)),A(E,F,I,M)}n.expectCalledDuringTest=()=>{throw new Error("Should be overriden in setupTestFramework.ts")}},67649:(le,C,o)=>{"use strict";o.d(C,{Z:()=>d});function d(g,...v){Promise.resolve().then(()=>{g(...v)})}},27999:(le,C,o)=>{"use strict";o.d(C,{AB:()=>A,D3:()=>l,Eo:()=>g,w0:()=>b});var d=o(23503);function g(n){return n.sec<0||n.nsec<0?(d.ZP.error("Times are not allowed to be negative"),"(invalid negative time)"):`${n.sec}.${n.nsec.toFixed().padStart(9,"0")}`}const v=20*365*24*60*60;function l(n){return n.sec>v}function A({sec:n,nsec:E}){return`${n}.${String.prototype.padStart.call(E,9,"0")}`}function b(n,E){return E==="headerStamp"?S(n.message):n.receiveTime}function S(n){if(n.header!=null){const E=n.header?.stamp;if(E!=null&&"sec"in E&&"nsec"in E)return E}else if(n.markers?.[0]?.header!=null){const E=n.markers[0]?.header.stamp;if(E!=null&&"sec"in E&&"nsec"in E)return E}}},77498:(le,C,o)=>{"use strict";o.d(C,{KC:()=>d});const d=()=>typeof o.g.postMessage<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,g=()=>typeof SharedWorkerGlobalScope<"u"&&self instanceof SharedWorkerGlobalScope,v=l=>{const A=typeof fetch<"u"&&fetch("data:test").then(()=>!0).catch(()=>!1);return async(...b)=>{if(await A)throw new Error("Content security policy too loose.");return l(...b)}}},80660:()=>{}}]);

//# sourceMappingURL=8955.cd6089e46e702a667831.js.map