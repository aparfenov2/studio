"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2421],{10742:(at,he,a)=>{a.d(he,{Hu:()=>j,gi:()=>J,tp:()=>f});var r=a(96389);function U(F){return R.pipe(R.map(Y=>Y.x.length),R.sum)(F)}function*J(F){let Y=0;for(const i of F){if(i==null){Y++;continue}const{x:$,y:O,label:B}=i;yield{index:Y,x:$,y:O,label:B},Y++}}function*f(F){const Y={index:0,label:void 0};let i=0;for(const $ of F){const O=r.YMb(r.VO0($));if(O!=null)for(let B=0;B<O.length;B++){for(const P of r.XPQ($))Y[P]=$[P]?.[B];Y.index=i,i++,yield Y}}}function j(F,Y){let i=Y;for(let $=0;$<F.length;$++){const O=F[$];if(O==null)continue;const{x:{length:B}}=O;if(i===B&&$===F.length-1)return[$,i];if(i>=B){i-=B;continue}return[$,i]}}},96133:(at,he,a)=>{a.d(he,{J:()=>r});function r(U,J){if(typeof U.value=="object")throw new Error("filterMatches only works on paths where global variables have been filled in");if(U.value==null)return!1;let f=J;for(const j of U.path)if(typeof f!="object"||f==null||(f=f[j],f==null))return!1;return f!=null&&f==U.value}},36922:(at,he,a)=>{a.d(he,{Iq:()=>P,wm:()=>Q});var r=a(49164),U=a(2784),J=a(8220),f=a(75845),j=a(75785),F=a(36423),Y=a(72659),i=a(96133),$=a(60351),O=a(21337),B=a(1012);function P(L){const{topics:Z,datatypes:m}=j.Ui(),{globalVariables:W}=(0,F.Z)(),k=(0,f.O4)(L),ee=(0,U.useMemo)(()=>(0,J.Z)(k,z=>{const re=(0,B.ZP)(z);return re?[z,re]:void 0}),[k]),fe=(0,U.useMemo)(()=>{const z={};for(const[re,le]of ee)z[re]=x(le,W);return z},[W,ee]),ue=(0,f.vE)(fe),ae=(0,U.useMemo)(()=>r.Z(Z,({name:z})=>z),[Z]),pe=(0,U.useMemo)(()=>{const z=new Set,re=[];for(const[,le]of ee){if(z.has(le.topicName))continue;z.add(le.topicName);const we=ae[le.topicName];we&&re.push(we)}return re},[ae,ee]),Te=(0,f.vE)(pe),ge=(0,U.useMemo)(()=>{const z=new Map;function re(le,we){if(we.includes(le))return;const je=m.get(le);if(je){z.set(le,je);for(const Be of je.definitions)(Be.isComplex===!0||(0,Y.bV)(Be.name)!=null)&&re(Be.type,[...we,le])}}for(const{schemaName:le}of Te.values())le!=null&&re(le,[]);return z},[m,Te]),Pe=(0,f.vE)(ge),ve=(0,U.useMemo)(()=>(0,O.pb)(Pe),[Pe]),qe=(0,U.useMemo)(()=>(0,Y.Hh)(Pe),[Pe]);return(0,U.useCallback)((z,re)=>{if(!k.includes(z))throw new Error(`path (${z}) was not in the list of cached paths`);const le=ue[z];return le?q(re,le,ae,ve,qe):void 0},[k,ue,ae,ve,qe])}function x(L,Z){return{...L,messagePath:L.messagePath.map(m=>{if(m.type==="slice"){const W=typeof m.start=="object"?Number(Z[m.start.variableName]):m.start,k=typeof m.end=="object"?Number(Z[m.end.variableName]):m.end;return{...m,start:isNaN(W)?0:W,end:isNaN(k)?1/0:k}}else if(m.type==="filter"&&typeof m.value=="object"){let W;const k=Z[m.value.variableName];return(typeof k=="number"||typeof k=="string")&&(W=k),{...m,value:W}}return m})}}function q(L,Z,m,W,k){const ee=m[Z.topicName];if(!ee||L.topic!==Z.topicName)return;for(const pe of Z.messagePath)if(pe.type==="filter"){if(!(0,i.J)(pe,L.message))return[]}else break;const fe=[];function ue(pe,Te,ge,Pe){if(pe==null||Pe==null)return;const ve=Z.messagePath[Te],qe=Z.messagePath[Te+1];if(ve)if(ve.type==="name"&&Pe.structureType==="message"){const z=Pe.nextByName[ve.name];ue(pe[ve.name],Te+1,`${ge}.${ve.repr}`,z)}else if(ve.type==="slice"&&Pe.structureType==="array"){const{start:z,end:re}=ve;if(typeof z=="object"||typeof re=="object")throw new Error("getMessagePathDataItems only works on paths where global variables have been filled in");const le=z,we=re;if(typeof le!="number"||typeof we!="number")return;const je=pe.length;for(let Be=le;Be<=Math.min(we,je-1);Be++){const mt=Be>=0?Be:je+Be,Ue=pe[mt];if(Ue==null)continue;let We;if(qe&&qe.type==="filter")We=`${ge}[:]`;else if(typeof Ue=="object"){const lt=$.H.find(ht=>ht in Ue);lt!=null?We=`${ge}[:]{${lt}==${Ue[lt]}}`:We=`${ge}[${Be}]`}else We=`${ge}[${Be}]`;ue(Ue,Te+1,We,Pe.next)}}else ve.type==="filter"?(0,i.J)(ve,pe)&&ue(pe,Te+1,`${ge}{${ve.repr}}`,Pe):console.warn(`Unknown pathItem.type ${ve.type} for structureType: ${Pe.structureType}`);else{let z;const re=Z.messagePath[Te-1];if(re&&re.type==="name"){const le=re.name;z=k[Pe.datatype]?.[le]?.[pe]}fe.push({value:pe,path:ge,constantName:z})}}const ae=ee.schemaName==null?{structureType:"message",datatype:"",nextByName:{}}:W[ee.schemaName];return ae&&ue(L.message,0,(0,B.dH)(Z.topicName),ae),fe}function Q(L){const Z=(0,f.O4)(L),m=P(Z);return(0,U.useCallback)(W=>{const k={};for(const ee of Z){const fe=(0,B.ZP)(ee);if(!fe){k[ee]=[];continue}const ue=W[fe.topicName];if(!ue)continue;const ae=[];k[ee]=ae;for(const pe of ue){const Te=m(ee,pe);Te&&ae.push({messageEvent:pe,queriedData:Te})}}return k},[Z,m])}},78324:(at,he,a)=>{a.d(he,{i:()=>$});var r=a(52322),U=a(3925),J=a(56961),f=a(80078),j=a(2784),F=a(84877),Y=a(2784);function i(O){const{getItems:B}=O,P=(0,j.useRef)(null),[x,q]=(0,j.useState)(),Q=(0,j.useCallback)(()=>{q(void 0)},[]),[L,Z]=(0,j.useState)([]);return(0,j.useEffect)(()=>{const m=P.current?.closest(`.${F.D}`);if(!m)return;let W="none";const k=ae=>{ae.button===2&&W==="down"&&(q({x:ae.clientX,y:ae.clientY}),Z(B()),W="none")},ee=ae=>{W="canceled"},fe=ae=>{ae.button===2&&(W="down")},ue=ae=>{ae.preventDefault()};return m.addEventListener("mousedown",fe),m.addEventListener("mousemove",ee),m.addEventListener("mouseup",k),m.addEventListener("contextmenu",ue),()=>{m.removeEventListener("mousedown",fe),m.removeEventListener("mousemove",ee),m.removeEventListener("mouseup",k),m.removeEventListener("contextmenu",ue)}},[B]),(0,r.jsx)("div",{ref:P,onContextMenu:m=>{m.preventDefault()},children:(0,r.jsx)(U.Z,{open:x!=null,onClose:Q,anchorReference:"anchorPosition",anchorPosition:x?{top:x.y,left:x.x}:void 0,MenuListProps:{dense:!0},children:L.map((m,W)=>m.type==="divider"?(0,r.jsx)(J.Z,{variant:"middle"},`divider_${W}`):(0,r.jsx)(f.Z,{onClick:()=>{Q(),m.onclick()},disabled:m.disabled,children:m.label},`item_${W}_${m.label}`))})})}const $=Y.memo(i)},24243:(at,he,a)=>{a.d(he,{Z:()=>ln});var r=a(52322),U=a(47746),J=a(20379),f=a(17055),j=a(38677),F=a(65741),Y=a(96389),i=a(2784),$=a(87438),O=a(72970),B=a(91004),P=a(8220),x=a(23503),q=a(69629),Q=a.n(q),L=a(97984),Z=a(16750),m=a(45243),W=a(70885),k=a(28239),ee=a(42146);function fe(h){h.receive("sendNotification",({message:b,details:M,type:A,severity:V})=>{(0,ee.ZP)(b,M,A,V)})}function ue(h){fe(h)}class ae{#n;#t;#e;#a;constructor(b,M){this.#n=b,this.#t=M,this.#e=new Array(M),this.#a=new Set}testing_workerCount(){return this.#e.filter(Boolean).length}testing_getWorkerState(b){return this.#e.find(M=>M?.listenerIds.includes(b))}registerWorkerListener(b){if(this.#a.has(b))throw new Error("cannot register the same listener id twice");if(this.#a.add(b),this.#e.filter(Boolean).length<this.#t){const S=this.#n(),de=new m.Z(S);ue(de);const I=W.Z(this.#e,D=>!D);return this.#e[I]={worker:S,rpc:de,listenerIds:[b]},de}const V=k.Z(this.#e.filter(Boolean),S=>S?.listenerIds.length)[0];if(!V)throw new Error("no worker state");return V.listenerIds.push(b),V.rpc}unregisterWorkerListener(b){if(!this.#a.has(b))throw new Error("Cannot find listener to unregister");this.#a.delete(b);const M=W.Z(this.#e,V=>V?V.listenerIds.includes(b):!1),A=this.#e[M];M>=0&&A&&(A.listenerIds=A.listenerIds.filter(V=>V!==b),A.listenerIds.length===0&&(this.#e[M]=void 0,A.worker.terminate(),A.rpc.terminate()))}}var pe=a(36537),Te="../../packages/studio-base/src/components/Chart/index.tsx";const ge=x.ZP.getLogger(Te);function Pe(){return new Worker(new URL(a.p+a.u(5952),a.b))}const ve=(0,pe.N)(window).devicePixelRatio??1,qe=new ae(Pe,4);function z(h){const b=h.currentTarget.getBoundingClientRect();return{cancelable:!1,clientX:h.clientX-b.left,clientY:h.clientY-b.top,target:{boundingClientRect:b.toJSON()}}}const re=typeof HTMLCanvasElement.prototype.transferControlToOffscreen=="function";function le(h){const[b]=(0,i.useState)(()=>(0,B.Z)()),M=(0,i.useRef)(!1),A=(0,i.useRef)(),V=(0,i.useRef)(null),S=(0,$.Z)(),de=(0,i.useRef)(),I=h.options.plugins?.zoom?.zoom?.enabled??!1,D=h.options.plugins?.zoom?.pan?.enabled??!1,{type:y,data:N,typedData:T,isBoundsReset:Ze,options:me,width:Ce,height:Le,onStartRender:Ee,onFinishRender:ce}=h,ye=(0,i.useRef)(),H=(0,i.useRef)(),be=(0,i.useRef)(!1),ke=(0,i.useRef)([]),ut=(0,i.useRef)({});(0,i.useLayoutEffect)(()=>{ge.info(`Register Chart ${b}`);let p;if(re)p=qe.registerWorkerListener(b);else{const{local:oe,remote:G}=(0,m.t)();new Z.Z(new m.Z(G)),p=new m.Z(oe)}const w=async(oe,G,Me)=>await p.send(oe,{id:b,...G},Me);return ye.current=w,()=>{ge.info(`Unregister chart ${b}`),w("destroy").catch(()=>{}),H.current=void 0,ye.current=void 0,M.current=!1,ut.current={},A.current?.remove(),A.current=void 0,re&&qe.unregisterWorkerListener(b)}},[b]);const pt=(0,i.useRef)(h.onScalesUpdate);pt.current=h.onScalesUpdate;const Fe=(0,i.useCallback)((p,w)=>{if(!S())return;const oe=de.current;de.current=p;const G=JSON.stringify(oe),Me=JSON.stringify(p);G!==Me&&pt.current?.(p,w??{userInteraction:!1})},[S]),xt=(0,i.useCallback)(()=>{const p=ut.current,w={};if(!(Ce===0||Le===0)&&(p.data!==N&&(p.data=w.data=N),p.typedData!==T&&(p.typedData=w.typedData=T),p.options!==me&&(p.options=w.options=me),p.height!==Le&&(p.height=w.height=Le),p.width!==Ce&&(p.width=w.width=Ce),w.isBoundsReset=Ze,Object.keys(w).length!==0))return w},[N,T,Le,me,Ze,Ce]),He=(0,i.useCallback)(async p=>{if(!M.current){(0,L.assert)(A.current==null,"Canvas has already been initialized"),(0,L.assert)(V.current,"No container ref"),(0,L.assert)(ye.current,"No RPC");const oe=document.createElement("canvas");oe.style.width="100%",oe.style.height="100%",oe.width=p.width??0,oe.height=p.height??0,V.current.appendChild(oe),A.current=oe,M.current=!0,Ee?.();const G=typeof oe.transferControlToOffscreen=="function"?oe.transferControlToOffscreen():oe,Me=await ye.current("initialize",{node:G,type:y,data:p.data,typedData:p.typedData,options:p.options,devicePixelRatio:ve,width:p.width,height:p.height},[G]),{current:Ae}=ke;ke.current=[];for(const Ne of Ae){const xe=await ye.current("update",Ne);Fe(xe)}H.current=ye.current,Fe(Me),ce?.();return}if(!H.current){ke.current=[...ke.current,p];return}Ee?.();const w=await H.current("update",p);Fe(w),ce?.()},[Fe,ce,Ee,y]),[_e,Ye]=(0,i.useState)();(0,i.useLayoutEffect)(()=>{if(!V.current)return;Ye(void 0);const p=xt();p&&He(p).catch(w=>{S()&&Ye(w)})},[xt,S,He]),(0,i.useLayoutEffect)(()=>{const p=V.current;if(!p||!D)return;const w=new(Q()).Manager(p),oe=h.options.plugins?.zoom?.pan?.threshold??10;return w.add(new(Q()).Pan({threshold:oe})),w.on("panstart",async G=>{if(be.current=!0,!H.current)return;const Me=G.target.getBoundingClientRect();await H.current("panstart",{event:{cancelable:!1,deltaY:G.deltaY,deltaX:G.deltaX,center:{x:G.center.x,y:G.center.y},target:{boundingClientRect:Me.toJSON()}}})}),w.on("panmove",async G=>{if(!H.current)return;const Me=G.target.getBoundingClientRect(),Ae=await H.current("panmove",{event:{cancelable:!1,deltaY:G.deltaY,deltaX:G.deltaX,target:{boundingClientRect:Me.toJSON()}}});Fe(Ae,{userInteraction:!0})}),w.on("panend",async G=>{if(!H.current)return;const Me=G.target.getBoundingClientRect(),Ae=await H.current("panend",{event:{cancelable:!1,deltaY:G.deltaY,deltaX:G.deltaX,target:{boundingClientRect:Me.toJSON()}}});Fe(Ae,{userInteraction:!0})}),()=>{w.destroy()}},[Fe,D,h.options.plugins?.zoom?.pan?.threshold]);const et=(0,i.useCallback)(async p=>{if(!I||!H.current)return;const w=p.currentTarget.getBoundingClientRect(),oe=await H.current("wheel",{event:{cancelable:!1,deltaY:p.deltaY,deltaX:p.deltaX,clientX:p.clientX,clientY:p.clientY,target:{boundingClientRect:w.toJSON()}}});Fe(oe,{userInteraction:!0})},[I,Fe]),ot=(0,i.useCallback)(async p=>{if(be.current=!1,!H.current)return;const w=await H.current("mousedown",{event:z(p)});Fe(w)},[Fe]),Ct=(0,i.useCallback)(async p=>{if(H.current)return await H.current("mouseup",{event:z(p)})},[]),Se=(0,i.useRef)(!1),{onHover:Ge}=h,tt=(0,i.useCallback)(async p=>{if(Se.current=!0,Ge==null||H.current==null)return;const w=await H.current("getElementsAtEvent",{event:z(p)});S()&&Se.current&&Ge(w)},[Ge,S]),Ke=(0,i.useCallback)(()=>{Se.current=!0},[]),gt=(0,i.useCallback)(()=>{Se.current=!1,Ge?.([])},[Ge]),vt=(0,i.useCallback)(async p=>{if(!h.onClick||!H.current||!S()||be.current)return;const w=p.currentTarget.getBoundingClientRect(),oe=p.clientX-w.left,G=p.clientY-w.top,Me=await H.current("getDatalabelAtEvent",{event:{x:oe,y:G,type:"click"}});let Ae,Ne;const xe=de.current?.x;if(xe){const it=xe.pixelMax-xe.pixelMin;Ae=(xe.max-xe.min)/it*(oe-xe.pixelMin)+xe.min}const Xe=de.current?.y;if(Xe){const it=Xe.pixelMax-Xe.pixelMin;Ne=(Xe.max-Xe.min)/it*(G-Xe.pixelMin)+Xe.min}h.onClick({datalabel:Me,x:Ae,y:Ne})},[S,h]);if(_e)throw _e;return(0,r.jsx)("div",{ref:V,onWheel:et,onClick:vt,onMouseDown:ot,onMouseMove:tt,onMouseLeave:gt,onMouseEnter:Ke,onMouseUp:Ct,style:{width:Ce,height:Le,cursor:"crosshair",position:"relative"}})}const we=le;var je=a(86451),Be=a(85026),mt=a(93812),Ue=a(86495),We=a(77075),lt=a(23144),ht=a(3896);const Nt=(0,O.ZL)()(h=>({root:{fontFamily:We.R.MONOSPACE,fontSize:h.typography.caption.fontSize,lineHeight:h.typography.caption.lineHeight,overflowWrap:"break-word"},grid:{columnGap:h.spacing(.5),display:"grid",gridTemplateColumns:"auto minmax(0px, max-content) minmax(auto, max-content)",alignItems:"center",fontFamily:We.R.MONOSPACE,fontSize:h.typography.caption.fontSize,lineHeight:h.typography.caption.lineHeight,overflowWrap:"break-word"},icon:{gridColumn:"1",height:12,width:12},path:{opacity:.9,whiteSpace:"nowrap"},value:{fontWeight:600,paddingLeft:h.spacing(2)},overflow:{gridColumn:"2/4",opacity:h.palette.action.disabledOpacity,fontStyle:"italic",":not(:last-child)":{marginBottom:h.spacing(.5)}}}));function Pt(){const{classes:h}=Nt();return(0,r.jsx)("div",{className:h.overflow,children:"<multiple values under cursor>"})}function kt(h){const{colorsByDatasetIndex:b,content:M,labelsByDatasetIndex:A,multiDataset:V}=h,{classes:S,cx:de}=Nt(),I=(0,i.useMemo)(()=>{if(!V)return[];const D=new Map;for(const y of M){const N=y.datasetIndex,T=D.get(N);if(T){T.hasMultipleValues=!0;continue}D.set(N,{tooltip:y,hasMultipleValues:!1})}return k.Z([...D.entries()],([,y])=>y.tooltip.datasetIndex)},[M,V]);if(!V){const D=M[0];if(!D)return(0,r.jsx)(r.Fragment,{});const y=typeof D.value=="string"?D.value:typeof D.value=="bigint"?D.value.toString():JSON.stringify(D.value);return(0,r.jsxs)(mt.Z,{className:S.root,"data-testid":"TimeBasedChartTooltipContent",children:[(0,r.jsxs)("div",{children:[y,D.constantName!=null?` (${D.constantName})`:""]}),M.length>1&&(0,r.jsx)(Pt,{})]})}return(0,r.jsx)("div",{className:de(S.root,S.grid),"data-testid":"TimeBasedChartTooltipContent",children:I.map(([D,y],N)=>{const T=b?.[D]??"auto",Ze=A?.[D],me=y.tooltip,Ce=typeof me.value=="string"?me.value:typeof me.value=="bigint"?me.value.toString():JSON.stringify(me.value);return(0,r.jsxs)(i.Fragment,{children:[(0,r.jsx)(ht.In2,{className:S.icon,primaryFill:T}),(0,r.jsx)("div",{className:S.path,children:Ze??""}),(0,r.jsxs)("div",{className:S.value,children:[Ce,me.constantName!=null?` (${me.constantName})`:""]}),y.hasMultipleValues&&(0,r.jsx)(Pt,{})]},N)})})}var Xt=a(63718),Ut=a(94225),Yt=a(10742);function $t(h,b){const{bounds:M,width:A,height:V}=b,S=A/(M.x.max-M.x.min),de=V/(M.y.max-M.y.min),I=[];let D,y,N,T;const Ze=M.x.max-M.x.min,me=M.x.min-Ze*.5,Ce=M.x.max+Ze*.5;let Le;for(const Ee of h){const{index:ce,label:ye}=Ee;if(Ee.x<me){I.length===0?I.push(ce):I[0]=ce;continue}if(Ee.x>Ce){Le=ce;continue}const H=Math.trunc(Ee.x*S),be=Math.trunc(Ee.y*de);if(D?.xPixel!==H||y?.label!=null&&y.label!==Ee.label){N&&N.yPixel!==D?.yPixel&&N.yPixel!==y?.yPixel&&I.push(N.index),T&&T.yPixel!==D?.yPixel&&T.yPixel!==y?.yPixel&&I.push(T.index),y&&D?.yPixel!==y.yPixel&&I.push(y.index),I.push(ce),D={xPixel:H,yPixel:be,index:ce,label:ye},y={xPixel:H,yPixel:be,index:ce,label:ye},N={xPixel:H,yPixel:be,index:ce,label:ye},T={xPixel:H,yPixel:be,index:ce,label:ye};continue}y??={xPixel:H,yPixel:be,index:ce,label:ye},y.xPixel=H,y.yPixel=be,y.index=ce,y.label=ye,N&&be<N.yPixel&&(N.yPixel=be,N.index=ce,N.label=ye),T&&be>T.yPixel&&(T.yPixel=be,T.index=ce,T.label=ye)}return N&&N.yPixel!==D?.yPixel&&N.yPixel!==y?.yPixel&&I.push(N.index),T&&T.yPixel!==D?.yPixel&&T.yPixel!==y?.yPixel&&I.push(T.index),y&&D?.yPixel!==y.yPixel&&I.push(y.index),Le!=null&&I.push(Le),I}function zt(h,b){const{bounds:M,width:A,height:V}=b,S=A/(M.x.max-M.x.min),de=V/(M.y.max-M.y.min),I=A,D=[],y=[];for(const N of h){if(N.x>M.x.max||N.x<M.x.min)continue;const T=Math.round(N.x*S),me=Math.round(N.y*de)*I+T;y[me]!==!0&&(y[me]=!0,D.push(N.index))}return D}function Ht(h,b,M){return h.showLine!==!0?zt(b,M):$t(b,M)}class Gt{#n=[];#t;#e;update(b){this.#n=b.datasets??this.#n,this.#t=b.datasetBounds??this.#t,this.#e=b.scales??this.#e}downsample(){const b=this.#t?.width,M=this.#t?.width,A=this.#e;let V;if(A?.x&&A.y&&(V={width:b??0,height:M??0,x:{min:A.x.min,max:A.x.max},y:{min:A.y.min,max:A.y.max}}),this.#t==null)return;const{bounds:S}=this.#t,de={width:0,height:0,bounds:S};return this.#n.map(I=>{if(!V)return I;const D=Ht(I,(0,Yt.gi)(I.data),de),N=Y.UID(T=>I.data[T],D).map(T=>T==null||isNaN(T.x)||isNaN(T.y)?{x:NaN,y:NaN,value:NaN}:T);return{...I,data:N}})}}var st=a(89591);function Rt(h){const[b,M]=i.useState(),[A,V]=i.useState(),S=(0,i.useMemo)(()=>new Gt,[]),de=(0,i.useCallback)(()=>{if(A==null)return;const y=S.downsample();if(y==null)return;const N=(0,st.zX)(y);N!=null&&A({bounds:N,data:{datasets:y}})},[A,S]),I=(0,Ut.y1)(de,100,{leading:!1,maxWait:100}),D=(0,i.useCallback)(y=>{S.update({scales:y}),I()},[S,I]);return(0,i.useEffect)(()=>{S.update({datasetBounds:b})},[b,S]),(0,i.useEffect)(()=>{S.update({datasets:h}),I()},[S,h,I]),i.useMemo(()=>({downsampler:{setView:M,register:y=>{V(y)}},setScales:D}),[D])}var Kt="../../packages/studio-base/src/components/TimeBasedChart/index.tsx";const Jt=x.ZP.getLogger(Kt),Qt=(0,O.ZL)()(h=>({root:{position:"relative"},resetZoomButton:{position:"absolute",bottom:0,right:0,marginBottom:h.spacing(4),marginRight:h.spacing(1)},tooltip:{maxWidth:"none"},bar:{position:"absolute",top:0,bottom:0,width:1,marginLeft:-1,display:"block"},playbackBar:{backgroundColor:"#aaa"}})),qt=h=>h.globalBounds,se=h=>h.setGlobalBounds;function ln(h){const b=(0,i.useRef)(0),{currentTime:M,data:A,provider:V,typedData:S,typedProvider:de,dataBounds:I,datasetId:D,defaultView:y,height:N,isSynced:T=!1,showXAxisLabels:Ze,type:me,width:Ce,xAxes:Le,xAxisIsPlaybackTime:Ee,yAxes:ce}=h,[ye,H]=(0,i.useState)({x:{min:0,max:0},y:{min:0,max:0}}),[be,ke]=(0,i.useState)({x:{min:0,max:0},y:{min:0,max:0}}),ut=i.useMemo(()=>({width:Ce,height:N,bounds:be}),[Ce,N,be]),pt=(0,i.useMemo)(()=>h.linesToHide??{},[h.linesToHide]),{downsampler:Fe,setScales:xt}=Rt(i.useMemo(()=>(0,P.Z)(A?.datasets??[],e=>{const{label:t}=e;if(!((t==null||pt[t])??!1))return e}),[A,pt])),He=(0,st.ZP)(ut,st.zX,st.f0,A,V??Fe),_e=(0,st.ZP)(ut,st.kl,st.rx,S,de);i.useEffect(()=>{H(e=>He!=null&&Y.fS0(e,He.bounds)?He.bounds:_e!=null&&Y.fS0(e,_e.bounds)?_e.bounds:e)},[He,_e]);const Ye=I??ye,et=(0,U.Z)(),{classes:ot,cx:Ct}=Qt(),Se=(0,i.useMemo)(()=>(0,B.Z)(),[]),Ge=(0,$.Z)(),tt=(0,i.useRef)(null),[Ke,gt]=(0,i.useState)(!1),vt=(0,Be.An)((0,i.useCallback)(e=>e.pauseFrame,[])),p=(0,i.useRef)(),w=(0,i.useRef)(),oe=(0,i.useCallback)(()=>{p.current&&p.current(),p.current=vt("TimeBasedChart")},[vt]),G=(0,i.useCallback)(()=>{const e=p.current;p.current=void 0,w.current=e,e&&(b.current=requestAnimationFrame(()=>{e(),w.current=void 0}))},[]);(0,i.useEffect)(()=>()=>{G(),cancelAnimationFrame(b.current),w.current?.()},[vt,G]);const Me=(0,Ue.oA)(qt),Ae=(0,Ue.oA)(se),Ne=(0,i.useMemo)(()=>T?Me:void 0,[Me,T]),xe=(0,i.useRef)(void 0),Xe=()=>{gt(!1),Ae(void 0)},[it,dt]=(0,i.useState)(!1),[It,Et]=(0,i.useState)(!1),$e=(0,i.useMemo)(()=>it?"y":It?"xy":"x",[It,it]),yt=i.useMemo(()=>({v:()=>{dt(!0)},b:()=>{Et(!0)}}),[dt,Et]),Ve=i.useMemo(()=>({v:()=>{dt(!1)},b:()=>{Et(!1)}}),[dt,Et]),bt=(0,i.useRef)(void 0),[Mt,nt]=(0,i.useState)(),wt=(0,i.useCallback)(e=>{if(e.length===0||bt.current==null){nt(void 0);return}const t=[];for(const o of e){if(!o.data)continue;const l=o.data;l.value!=null&&t.push({item:{datasetIndex:o.datasetIndex,value:l.value,constantName:l.constantName},element:o})}if(t.length===0){nt(void 0);return}const n=t[0].element,s=tt.current?.getBoundingClientRect();s&&nt({x:s.left+n.view.x,y:s.top+bt.current,data:t.map(o=>o.item)})},[]),ct=(0,Ue.D4)(),St=(0,Ue.Js)(),ze=(0,i.useCallback)(()=>{St(Se)},[St,Se]),Bt=(0,i.useCallback)(()=>{nt(void 0),ze()},[ze]),_t=(0,i.useCallback)(e=>{const t=xe.current?.x;if(!t||!tt.current){nt(void 0),ze();return}const n=tt.current.getBoundingClientRect();bt.current=e.pageY-n.top;const s=e.pageX-n.left,o=t.pixelMax-t.pixelMin,d=(t.max-t.min)/o*(s-t.pixelMin)+t.min;if(!(d>=t.min&&d<=t.max)||isNaN(d)){nt(void 0),ze();return}ct({componentId:Se,value:d,type:Ee?"PLAYBACK_SECONDS":"OTHER"})},[ct,Se,Ee,ze]),Dt=(0,i.useMemo)(()=>({decimation:{enabled:!0,algorithm:"lttb"},legend:{display:!1},datalabels:{display:!1},tooltip:{enabled:!1},zoom:{zoom:{enabled:h.zoom,mode:$e,sensitivity:3,speed:.1},pan:{mode:"xy",enabled:!0,speed:20,threshold:10}},...h.plugins,annotation:{annotations:h.annotations}}),[h.annotations,h.plugins,h.zoom,$e]),{min:Lt,max:At}=(0,i.useMemo)(()=>{if(!Ne&&Ke)return{min:void 0,max:void 0};if(Ne?.sourceId===Se&&Ne.userInteraction)return{min:void 0,max:void 0};let e,t;return y?.type==="fixed"?(e=y.minXValue,t=y.maxXValue):y?.type==="following"?(t=M??0,e=t-y.width):(e=Ye.x.min,t=Ye.x.max),Ne?.userInteraction===!0&&(e=Ne.min,t=Ne.max),e===t?{min:void 0,max:void 0}:{min:e,max:t}},[Se,M,Ye.x.max,Ye.x.min,y,Ne,Ke]),Vt=(0,i.useMemo)(()=>{const e={font:{family:We.R.MONOSPACE,size:10},color:et.palette.text.secondary,maxRotation:0};return{grid:{color:et.palette.divider},...Le,min:Lt,max:At,ticks:{display:Ze,...e,...Le?.ticks}}},[et.palette,Ze,Le,Lt,At]),Ot=(0,i.useMemo)(()=>{const e={font:{family:We.R.MONOSPACE,size:10},color:et.palette.text.secondary,padding:0};let{min:t,max:n}=ce;return n==null&&t!=null&&(n=Ye.y.max),t==null&&n!=null&&(t=Ye.y.min),{type:"linear",...ce,min:t,max:n,ticks:{...e,...ce.ticks}}},[Ye.y,ce,et.palette]),jt=(0,i.useMemo)(()=>({maintainAspectRatio:!1,animation:!1,elements:{line:{tension:0}},interaction:{intersect:!1,mode:"x"},scales:{x:Vt,y:Ot},plugins:Dt}),[Dt,Vt,Ot]),en=(0,i.useCallback)(e=>{Ge()&&wt(e)},[Ge,wt]),tn=(0,i.useCallback)((e,{userInteraction:t})=>{if(Ge()&&!(e.x!=null&&F.Z(e.x,xe.current?.x)&&!t)){if(t&&gt(!0),xe.current=e,e.x!=null&&e.y!=null){const{x:n,y:s}=e;ke({x:n,y:s})}if(xt(e),!(!T||!e.x)){if(t){Ae({min:e.x.min,max:e.x.max,sourceId:Se,userInteraction:!0});return}Ae(n=>{const s=e.x;if(!s)return n;if(!n)return{min:s.min,max:s.max,sourceId:Se,userInteraction:!1};if(n.userInteraction)return n;const o=Math.min(s.min,n.min),l=Math.max(s.max,n.max);return n.max===l&&n.min===o?n:{min:o,max:l,sourceId:Se,userInteraction:!1}})}}},[Se,Ge,T,Ae,xt]);(0,i.useEffect)(()=>{Jt.debug(`<TimeBasedChart> (datasetId=${D})`)},[D]);const rt=He?.data.datasets??_e?.data.datasets,Zt=rt?.length??0,Ft=(0,i.useMemo)(()=>rt==null?{}:Object.fromEntries(rt.map((e,t)=>[t,e.borderColor?.toString()])),[rt]),Wt=(0,i.useMemo)(()=>rt==null?{}:Object.fromEntries(rt.map((e,t)=>[t,e.label])),[rt]),nn=(0,i.useMemo)(()=>Mt?(0,r.jsx)(kt,{content:Mt.data,multiDataset:Zt>1,colorsByDatasetIndex:Ft,labelsByDatasetIndex:Wt}):void 0,[Mt,Ft,Zt,Wt]),an=(0,i.useMemo)(()=>T?Ne?.userInteraction===!0:Ke,[Ne?.userInteraction,Ke,T]),sn={type:me,width:Ce,height:N,isBoundsReset:Me==null,options:jt,data:He?.data,typedData:_e?.data,onClick:h.onClick,onScalesUpdate:tn,onStartRender:oe,onFinishRender:G,onHover:en};return Ce===0||N===0?(0,r.jsx)(r.Fragment,{}):(0,r.jsx)(mt.Z,{direction:"row",fullWidth:!0,children:(0,r.jsx)(J.Z,{arrow:!1,classes:{tooltip:ot.tooltip},open:Mt!=null,placement:"right",title:nn??(0,r.jsx)(r.Fragment,{}),disableInteractive:!0,followCursor:!0,TransitionComponent:f.Z,TransitionProps:{timeout:0},children:(0,r.jsx)(mt.Z,{direction:"row",style:{width:Ce},children:(0,r.jsxs)("div",{className:ot.root,onDoubleClick:Xe,children:[(0,r.jsx)(lt.Z,{componentId:Se,isPlaybackSeconds:Ee,scales:xe.current,children:(0,r.jsx)("div",{className:ot.bar,style:{backgroundColor:Ee?et.palette.warning.main:et.palette.info.main}})}),Ee&&(0,r.jsx)(Xt.G,{scales:xe.current,xValue:M,children:(0,r.jsx)("div",{className:Ct(ot.bar,ot.playbackBar)})}),(0,r.jsx)("div",{ref:tt,onMouseMove:_t,onMouseOut:Bt,children:(0,r.jsx)(we,{...sn})}),an&&(0,r.jsx)(j.Z,{className:ot.resetZoomButton,variant:"contained",color:"inherit",title:"(shortcut: double-click)",onClick:Xe,children:"Reset view"}),(0,r.jsx)(je.Z,{global:!0,keyDownHandlers:yt,keyUpHandlers:Ve})]})})})})}},89591:(at,he,a)=>{a.d(he,{ZP:()=>B,f0:()=>$,kl:()=>F,rx:()=>O,zX:()=>j});var r=a(96389),U=a(2784),J=a(10742),f=a(2784);function j(P){let x,q,Q,L;for(const Z of P)for(const m of(0,J.gi)(Z.data))isNaN(m.x)||(x=Math.min(x??m.x,m.x),q=Math.max(q??m.x,m.x)),isNaN(m.x)||(Q=Math.min(Q??m.y,m.y),L=Math.max(L??m.y,m.y));if(!(x==null||q==null||Q==null||L==null))return{x:{min:x,max:q},y:{min:Q,max:L}}}function F(P){let x,q,Q,L;for(const Z of P)for(const m of(0,J.tp)(Z.data)){const{x:W,y:k}=m;isNaN(W)||(x=Math.min(x??W,W),q=Math.max(q??W,W)),isNaN(k)||(Q=Math.min(Q??k,k),L=Math.max(L??k,k))}if(!(x==null||q==null||Q==null||L==null))return{x:{min:x,max:q},y:{min:Q,max:L}}}function Y(P,x){return{x:{min:r.VV$(P.x.min,x.x.min),max:r.Fp7(P.x.max,x.x.max)},y:{min:r.VV$(P.y.min,x.y.min),max:r.Fp7(P.y.max,x.y.max)}}}const i=P=>(x,q)=>({bounds:Y(x.bounds,q.bounds),data:{datasets:r.UID(([Q,L])=>({...Q,data:P(Q.data,L.data)}),r.$Re(x.data.datasets,q.data.datasets))}}),$=i((P,x)=>[...P,...x]),O=i((P,x)=>P.concat(x));function B(P,x,q,Q,L){const[Z,m]=f.useState(),W=f.useCallback(ee=>{m({full:ee,partial:void 0})},[]),k=(0,U.useCallback)(ee=>{m(fe=>{if(fe==null)return{full:void 0,partial:ee};const{partial:ue}=fe;return{...fe,partial:ue!=null?q(ue,ee):ee}})},[q]);return(0,U.useEffect)(()=>{L?.register(W,k)},[L,k,W]),(0,U.useEffect)(()=>{L?.setView(P)},[L,P]),(0,U.useMemo)(()=>{if(Q==null){if(Z==null)return;const{full:fe,partial:ue}=Z;return ue==null?fe:fe==null?void 0:q(fe,ue)}const ee=x(Q.datasets);if(ee!=null)return{bounds:ee,data:Q}},[Q,Z,x,q])}},62421:(at,he,a)=>{a.r(he),a.d(he,{default:()=>sn,openSiblingPlotPanel:()=>tn,plotableRosTypes:()=>ht});var r=a(52322),U=a(4e4),J=a(4977),f=a(2784),j=a(44668),F=a(85026),Y=a(75017),i=a(82044),$=a(78324),O=a(76479),B=a(93812),P=a(40301),x=a(47746),q=a(62515),Q=a(8220),L=a(24243),Z=a(68071);function m(e){return!isNaN(Number.parseFloat(e.value))}function W(e,t){const n=(0,Z.wi)(e.color,t);return{type:"line",display:!0,drawTime:"beforeDatasetsDraw",scaleID:"y",label:{content:e.value,width:"100%",height:"100%"},borderColor:n,borderDash:[5,5],borderWidth:1,value:Number.parseFloat(e.value)}}function k(e){return(0,Q.Z)(e,(t,n)=>{if(t.enabled){if(m(t))return W(t,n)}else return})}function ee(e){const t=(0,x.Z)(),{currentTime:n,datasetBounds:s,provider:o,defaultView:l,isSynced:d,maxYValue:u,minYValue:c,onClick:E,paths:X,showXAxisLabels:C,showYAxisLabels:g,xAxisVal:v}=e,ie=(0,f.useMemo)(()=>k(X),[X]),te=(0,f.useMemo)(()=>{const Ie=isNaN(c)?void 0:c,ne=isNaN(u)?void 0:u;return{min:Ie,max:ne,ticks:{display:g,precision:3},grid:{color:t.palette.divider}}},[u,c,g,t]),{width:K,height:Je,ref:Re}=(0,q.NB)({refreshRate:0,refreshMode:"debounce"});return(0,r.jsx)("div",{style:{width:"100%",flexGrow:1,overflow:"hidden",padding:"2px"},ref:Re,children:(0,r.jsx)(L.Z,{isSynced:d,zoom:!0,width:K??0,height:Je??0,typedProvider:o,dataBounds:s,annotations:ie,type:"scatter",yAxes:te,xAxisIsPlaybackTime:v==="timestamp",showXAxisLabels:C,currentTime:n,defaultView:l,onClick:E},v)})}var fe=a(2043),ue=a(75988),ae=a(85108),pe=a(87037),Te=a(41739),ge=a(1547),Pe=a(72970),ve=a(3896),qe=a(52498),z=a(41518),re=a(68434),le=a(20379),we=a(91004),je=a(10742),Be=a(98043),mt=a(86495),Ue=a(26775);function We(e){if(e!=="")return e??void 0}function lt(e,t){return We(e.label)??We(e.value)??`Series ${t+1}`}const ht=["bool","int8","uint8","int16","uint16","int32","uint32","int64","uint64","float32","float64","time","duration","string","json"];var Nt=a(77075);const Pt=28,kt=(0,Pe.ZL)()((e,t,n)=>({root:{display:"contents",cursor:"pointer","&:hover":{"& > *:last-child":{opacity:1},"& > *":{backgroundColor:e.palette.background.paper,backgroundImage:`linear-gradient(${["0deg",e.palette.action.focus,e.palette.action.focus].join(" ,")})`}}},showPlotValue:{[`.${n.plotName}`]:{gridColumn:"span 1",padding:e.spacing(0,1.5,0,.5)}},listIcon:{display:"flex",alignItems:"center",position:"sticky",height:Pt,left:0},checkbox:{fontSize:"1em",padding:e.spacing(.975),borderRadius:0,"svg:not(.MuiSvgIcon-root)":{fontSize:"1em"}},disabledPathLabel:{opacity:.5},plotName:{display:"flex",alignItems:"center",height:Pt,padding:e.spacing(0,2.5,0,.5),gridColumn:"span 2",fontFeatureSettings:`${Nt.R.SANS_SERIF_FEATURE_SETTINGS}, "zero"`,".MuiTypography-root":{whiteSpace:"nowrap"}},plotValue:{display:"flex",alignItems:"center",height:Pt,padding:e.spacing(.25,1,.25,.25)},errorIcon:{color:e.palette.error.main}}));function Xt({currentTime:e,datasets:t,hasMismatchedDataLength:n,index:s,onClickPath:o,path:l,paths:d,savePaths:u,showPlotValuesInLegend:c}){const{openPanelSettings:E}=(0,Ue.W)(),{id:X}=(0,i.R)(),{setSelectedPanelIds:C}=(0,Be.iy)(),{classes:g,cx:v}=kt(),ie=(0,f.useMemo)(()=>c?t[s]?.data??[]:[],[t,s,c]),[te]=(0,f.useState)(()=>(0,we.Z)()),K=(0,mt.hx)({componentId:te,disableUpdates:!c,isPlaybackSeconds:!0}),Je=(0,f.useMemo)(()=>{if(!c)return;const Re=K?.value??e;let Ie;for(const ne of(0,je.tp)(ie)){if(Re==null||ne.x>Re)break;Ie=ne.y}return Ie},[c,K?.value,e,ie]);return(0,r.jsxs)("div",{className:v(g.root,{[g.showPlotValue]:c}),onClick:()=>{C([X]),E(),o()},children:[(0,r.jsx)("div",{className:g.listIcon,children:(0,r.jsx)(z.Z,{className:g.checkbox,checked:l.enabled,size:"small",title:"Toggle visibility",style:{color:(0,Z.wi)(l.color,s)},icon:(0,r.jsx)(ve.uXJ,{}),checkedIcon:(0,r.jsx)(ve.In2,{}),onClick:Re=>{Re.stopPropagation()},onChange:()=>{const Re=d.slice(),Ie=Re[s];Ie&&(Re[s]={...Ie,enabled:!Ie.enabled}),u(Re)}})}),(0,r.jsxs)("div",{className:g.plotName,style:{gridColumn:c?void 0:"span 2"},children:[(0,r.jsx)(re.Z,{noWrap:c,flex:"auto",variant:"body2",className:v({[g.disabledPathLabel]:!l.enabled}),children:lt(l,s)}),n&&(0,r.jsx)(le.Z,{placement:"top",title:"Mismatch in the number of elements in x-axis and y-axis messages",children:(0,r.jsx)(qe.fXk,{className:g.errorIcon})})]}),c&&(0,r.jsx)("div",{className:g.plotValue,children:(0,r.jsx)(re.Z,{variant:"body2",align:"right",color:K?.value!=null?"warning.main":"text.secondary",children:Je??""})})]})}var Ut=a(2784);const Yt=25,$t=800,zt=(0,Pe.ZL)()(({palette:e,shadows:t,shape:n,spacing:s},o,l)=>({root:{display:"flex",overflow:"hidden"},rootFloating:{padding:s(.75),pointerEvents:"none",gap:s(.75),position:"absolute",top:s(4.5),left:s(4),zIndex:1e3,backgroundColor:"transparent",alignItems:"flex-start",height:`calc(100% - ${O.B}px - ${s(5.25)})`,overflow:"hidden",[`.${l.container}`]:{pointerEvents:"auto",borderRadius:n.borderRadius,backgroundImage:`linear-gradient(${["0deg",(0,ge.Z)(e.background.default).setAlpha(.2).toHex8String(),(0,ge.Z)(e.background.default).setAlpha(.2).toHex8String()].join(" ,")})`,backgroundColor:(0,ge.Z)(e.background.paper).setAlpha(.8).toHex8String(),backdropFilter:"blur(3px)",maxWidth:`calc(100% - ${s(1)})`,boxShadow:t[3]}},rootLeft:{alignItems:"flex-start",maxWidth:"80%",[`.${l.toggleButton}`]:{padding:s(.25),height:"100%",borderRadius:0,borderTop:"none",borderBottom:"none"},[`.${l.container}`]:{overflow:"auto",height:"100%",alignContent:"flex-start"}},rootTop:{flexDirection:"column",maxHeight:"80%",[`.${l.toggleButton}`]:{padding:s(.25),borderRadius:0,borderRight:"none",borderLeft:"none"}},container:{alignItems:"center",overflow:"auto",display:"grid",gridTemplateColumns:"auto minmax(0, 1fr) auto"},dragHandle:{userSelect:"none",border:`0px solid ${e.action.hover}`,"&:hover":{borderColor:e.action.selected}},toggleButton:{fontSize:"1rem",padding:s(.75),"svg:not(.MuiSvgIcon-root)":{fontSize:"1em"}},toggleButtonFloating:{backdropFilter:"blur(3px)",pointerEvents:"auto",backgroundImage:`linear-gradient(${["0deg",(0,ge.Z)(e.background.default).setAlpha(.2).toHex8String(),(0,ge.Z)(e.background.default).setAlpha(.2).toHex8String()].join(" ,")})`,backgroundColor:(0,ge.Z)(e.background.paper).setAlpha(.8).toHex8String(),boxShadow:t[3],"&:hover":{backgroundColor:e.background.paper,backgroundImage:`linear-gradient(0deg, ${e.action.hover}, ${e.action.hover})`}}}));function Ht(e){const{currentTime:t,datasets:n,legendDisplay:s,onClickPath:o,paths:l,pathsWithMismatchedDataLengths:d,saveConfig:u,showLegend:c,showPlotValuesInLegend:E,sidebarDimension:X}=e,{classes:C,cx:g}=zt(),v=(0,f.useRef)({x:0,y:0,sidebarDimension:0}),ie=(0,f.useCallback)(()=>{u({showLegend:!c})},[c,u]),te=(0,f.useMemo)(()=>{switch(s){case"floating":return c?(0,r.jsx)(fe.iRs,{}):(0,r.jsx)(ue.FEU,{});case"left":return c?(0,r.jsx)(ae.YIM,{}):(0,r.jsx)(ae.qmn,{});case"top":return c?(0,r.jsx)(ae.XRD,{}):(0,r.jsx)(ae._4M,{})}},[c,s]),K=(0,f.useCallback)(ne=>{if(s==="floating"||ne.buttons!==1)return;const Qe=s==="left"?ne.clientX-v.current.x:ne.clientY-v.current.y,on=Te.Z(v.current.sidebarDimension+Qe,Yt,$t);u({sidebarDimension:on})},[s,u]),Je=(0,f.useCallback)(ne=>{ne.currentTarget.setPointerCapture(ne.pointerId),v.current={x:ne.clientX,y:ne.clientY,sidebarDimension:X}},[X]),Re=(0,f.useCallback)(ne=>{ne.currentTarget.releasePointerCapture(ne.pointerId)},[]),Ie=(0,f.useCallback)(ne=>{u({paths:ne})},[u]);return(0,r.jsxs)("div",{className:g(C.root,{[C.rootFloating]:s==="floating",[C.rootLeft]:s==="left",[C.rootTop]:s==="top"}),children:[(0,r.jsx)(pe.Z,{onClick:ie,className:g(C.toggleButton,{[C.toggleButtonFloating]:s==="floating"}),children:te}),c&&(0,r.jsx)(B.Z,{flexGrow:1,gap:.5,overflow:"auto",fullHeight:s!=="top",style:{height:s==="top"?Math.round(X):void 0,width:s==="left"?Math.round(X):void 0},children:(0,r.jsx)(B.Z,{flex:"auto",fullWidth:!0,fullHeight:s!=="top",overflow:s==="floating"?"auto":void 0,children:(0,r.jsx)("div",{className:C.container,children:l.map((ne,Qe)=>(0,r.jsx)(Xt,{currentTime:t,datasets:n,hasMismatchedDataLength:d.includes(ne.value),index:Qe,onClickPath:()=>{o(Qe)},path:ne,paths:l,savePaths:Ie,showPlotValuesInLegend:E},Qe))})})}),s!=="floating"&&(0,r.jsx)("div",{className:C.dragHandle,onPointerDown:Je,onPointerMove:K,onPointerUp:Re,style:s==="left"?{marginLeft:-6,cursor:"ew-resize",borderRightWidth:2,height:"100%",width:4}:{marginTop:-6,cursor:"ns-resize",borderBottomWidth:2,width:"100%",height:4}})]})}const Gt=Ut.memo(Ht);var st=a(55433),Rt=a(27999);function Kt(e,t){const{x:n,value:s,receiveTime:o,headerStamp:l}=t,d=(0,Rt.Eo)(o),u=l?(0,Rt.Eo)(l):"";return[n,d,u,e,s]}const Jt=e=>({timestamp:"elapsed time",index:"index",custom:"x value",currentCustom:"x value"})[e];function Qt(e,t){const n=[Jt(t),"receive time","header.stamp","topic","value"],s=[];s.push(n);for(const o of e)for(const l of(0,je.tp)(o.data))s.push(Kt(o.label,l));return s.join(`
`)}function qt(e,t){const n=Qt(e,t),s=new Blob([n],{type:"text/csv;charset=utf-8;"});(0,st.G)([{blob:s,fileName:"plot_data.csv"}])}var se=a(96389),ln=a(36922),h=a(89591),b=a(59635);const M={abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,ceil:Math.ceil,cos:Math.cos,log:Math.log,log1p:Math.log1p,log2:Math.log2,log10:Math.log10,round:Math.round,sign:Math.sign,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,trunc:Math.trunc,negative:e=>-e,deg2rad:e=>e*(Math.PI/180),rad2deg:e=>e*(180/Math.PI)};function A(e,t){let{y:n}=e;const s=Number(n);return isNaN(s)||(n=t(s)),{...e,y:n,value:n}}const V=Object.freeze({sec:0,nsec:0}),S=e=>e==="custom"||e==="currentCustom";function de(e,t,n,s,o,l){if(S(e)&&l){if(isReferenceLinePlotPathType(l))return Number.parseFloat(l.value);if(s){if(!o)return NaN;const d=o.queriedData[n]?.value;return isTime(d)?toSec(d):typeof d=="bigint"?d:Number(d)}}return e==="timestamp"?t:n}function I(e){const t=[],n=[],s=[],o=[],l=new Float32Array(e.length),d=new Float32Array(e.length);for(let u=0;u<e.length;u++){const c=e[u];c!=null&&(t.push(c.receiveTime),c.headerStamp!=null&&n.push(c.headerStamp),c.constantName!=null&&s.push(c.constantName),o.push(c.value),l[u]=c.x,d[u]=c.y)}return{receiveTime:t,...s.length>0?{constantName:s}:{},...n.length>0?{headerStamp:n}:{},value:o,x:l,y:d}}function D(e,t){return e.concat(...t)}function y(e,t,n,s,o,l,d){const u=s==="headerStamp"?e.headerStamp:e.receiveTime;if(!u)return{data:[],hasMismatchedData:!1};const c=[],E=toSec(subtract(u,n));for(const C of e.queriedData.entries()){const[g,{value:v,constantName:ie}]=C;if(typeof v=="number"||typeof v=="boolean"||typeof v=="string"||typeof v=="bigint"){const te=typeof v=="bigint"?v:Number(v);if(typeof te=="bigint"||!isNaN(te)){const K=de(o,E,g,d,t,l),Je=te;c.push({x:Number(K),y:Number(Je),value:v,constantName:ie,receiveTime:e.receiveTime,headerStamp:e.headerStamp})}}else if(isTime(v)){const te=de(o,E,g,d,t,l),K=toSec(v);c.push({x:Number(te),y:K,receiveTime:e.receiveTime,headerStamp:e.headerStamp,value:`${format(v)} (${formatTimeRaw(v)})`,constantName:ie})}}const X=S(o)&&(!t||e.queriedData.length!==t.queriedData.length);return{data:c,hasMismatchedData:X}}function N({path:e,yAxisRanges:t,index:n,startTime:s,xAxisVal:o,xAxisRanges:l,xAxisPath:d,invertedTheme:u=!1}){let c=e.showLine!==!1,E=S(o)&&l!=null&&t.length!==l.length;const X=[];let C;for(const te of Object.keys(mathFunctions))if(e.value.endsWith(`.@${te}`)&&(C=mathFunctions[te],C))break;const g=[];for(const[te,K]of t.entries()){const Je=l?.[te],{data:Re,hasMismatchedData:Ie}=y(K,Je,s,e.timestampMethod,o,d,l);for(const ne of Re)C?g.push(applyToDatum(ne,C)):g.push(ne);E=E||Ie,K.queriedData.length>1&&o!=="index"&&(c=!1)}for(const te of g)X.push(te);const v=getLineColor(e.color,n);return{dataset:{borderColor:v,label:e.label!=null&&e.label!==""?e.label:e.value,showLine:c,fill:!1,borderWidth:1,pointRadius:1,pointHoverRadius:3,pointBackgroundColor:u?lightColor(v):darkColor(v),pointBorderColor:"transparent",data:[I(X)]},hasMismatchedData:E}}function T(e,t){if(e.length===0||t.length===0)return;const n=[],s=[],o=[],l=[],d=new Float32Array(t.length),u=new Float32Array(t.length);for(let c=0;c<t.length;c++){const E=(0,je.Hu)(e,t[c]??-1);if(E==null)return;const[X,C]=E,g=e[X];if(g==null)return;n.push(g.receiveTime[C]??V),g.headerStamp!=null&&s.push(g.headerStamp[C]??V),g.constantName!=null&&o.push(g.constantName[C]??""),l.push(g.value[C]);const v=g.x[C],ie=g.y[C];if(v==null||ie==null)return;d[c]=v,u[c]=ie}return[{receiveTime:n,...o.length>0?{constantName:o}:{},...s.length>0?{headerStamp:s}:{},value:l,x:d,y:u}]}function Ze(e,t,n){let s=R.clamp(0,e,t<0?e+t:t),o=n??e;if(o=R.clamp(0,e,o<0?e+o:o),s>o){const l=s;s=o,o=l}return[s,o]}function me(e,t,n){const[s,o]=Ze(e.x.length,t,n),l=o-s,d=[],u=[],c=[],E=[],X=new Float32Array(l),C=new Float32Array(l);for(let g=s;g<o;g++){d.push(e.receiveTime[g]??V),e.headerStamp!=null&&u.push(e.headerStamp[g]??V),e.constantName!=null&&c.push(e.constantName[g]??""),E.push(e.value[g]);const v=e.x[g],ie=e.y[g];v==null||ie==null||(X[g-s]=v,C[g-s]=ie)}return{receiveTime:d,headerStamp:u.length>0?u:void 0,constantName:c.length>0?c:void 0,value:E,x:X,y:C}}function Ce(e,t,n){const s=getTypedLength(e),[o,l]=Ze(s,t,n);if(o===l)return[];const d=findIndices(e,o),u=findIndices(e,l);if(d==null||u==null)return[];const[c,E]=d,[X,C]=u;if(c===X){const te=e[c];return te==null?[]:[me(te,E,C)]}const g=e[c],v=e[X];if(g==null||v==null)return[];const ie=e.slice(c+1,X);return[me(g,E),...ie,me(v,0,C)]}function Le(e){const t=e.at(0)?.x.at(0),n=e.at(-1)?.x.at(-1);if(!(t==null||n==null))return[t,n]}function Ee(e,t){const n=Le(e)?.[1]??Number.MIN_SAFE_INTEGER;let s=-1;for(const l of iterateTyped(t))if(l.x>n){s=l.index;break}if(s===-1)return e;const o=Ce(t,s);return o.length===0?e:e.concat(I([{x:NaN,receiveTime:V,y:NaN}]),o)}function ce(e){const t=[];let n=0,s=0;for(const o of(0,je.tp)(e)){if(o.index===0){n=o.x,s=o.y;continue}const l=o.x-n,d=(o.y-s)/l;t.push({...o,y:d,value:d}),n=o.x,s=o.y}return[I(t)]}function ye(){return{x:{min:Number.MAX_SAFE_INTEGER,max:Number.MIN_SAFE_INTEGER},y:{min:Number.MAX_SAFE_INTEGER,max:Number.MIN_SAFE_INTEGER}}}function H(e,t){return{x:{min:Math.min(e.x.min,t.x.min),max:Math.max(e.x.max,t.x.max)},y:{min:Math.min(e.y.min,t.y.min),max:Math.max(e.y.max,t.y.max)}}}const be=Object.freeze({receiveTime:[],value:[],x:new Float32Array(0),y:new Float32Array(0)}),ke=Object.freeze({bounds:ye(),datasets:new Map,pathsWithMismatchedDataLengths:[]});function ut(e){const t={};let n=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;for(const[o,l]of e.datasets){const d=t[o.value]={start:Number.MAX_SAFE_INTEGER,end:Number.MIN_SAFE_INTEGER},{data:u}=l,c=resolveTypedIndices(u,[0,getTypedLength(u)-1])?.[0];d.start=Math.min(d.start,c?.x[0]??Number.MAX_SAFE_INTEGER),d.end=Math.max(d.end,c?.x[c.x.length-1]??Number.MIN_SAFE_INTEGER),n=Math.min(n,d.start),s=Math.max(s,d.end)}return{all:{start:n,end:s},byPath:t}}function pt(e,t){const n=new Map;for(const[s,o]of t.entries())n.set(s,e(o,s));return n}function Fe(e,t){return e===ke?t:t===ke?e:{...e,bounds:unionBounds(e.bounds,t.bounds),datasets:maps.merge(e.datasets,t.datasets,(n,s)=>({...n,data:concatTyped(n.data,s.data)}))}}function xt(e,t){return e===ke?t:t===ke?e:{...e,bounds:unionBounds(e.bounds,t.bounds),datasets:maps.merge(e.datasets,t.datasets,(n,s)=>({...n,data:mergeTyped(n.data,s.data)}))}}function He(e,t){const n=ut(e).all,s=ut(t).all,o=n.start-s.start;return o!==0?o:n.end-s.end}function _e(e){return e.slice().sort(He).reduce((s,o)=>_.isEmpty(s)?o:xt(s,o),ke)}function Ye(e,t){return se.tSV(n=>n==null?[]:[n.value],[t,...e])}function et(e){const{paths:t,startTime:n,xAxisVal:s,xAxisPath:o,xAxisData:l,invertedTheme:d}=e,u=makeInvertedBounds(),c=[],E=new Map;for(const[X,[C,g]]of t.entries()){const v=l,ie=g??[];if(C.enabled){if(!isReferenceLinePlotPathType(C)){const te=getDatasetsFromMessagePlotPath({path:C,yAxisRanges:ie,index:X,startTime:n,xAxisVal:s,xAxisRanges:v,xAxisPath:o,invertedTheme:d});te.hasMismatchedData&&c.push(C.value);const K=getTypedBounds([te.dataset]);if(K==null)continue;u.x.min=Math.min(u.x.min,K.x.min),u.x.max=Math.max(u.x.max,K.x.max),u.y.min=Math.min(u.y.min,K.y.min),u.y.max=Math.max(u.y.max,K.y.max),E.set(C,te.dataset)}}else continue}return{bounds:u,datasets:E,pathsWithMismatchedDataLengths:c}}function ot(e,t,n){const{structures:s,enumValues:o}=e,l=R.indexBy(d=>d.name,e.topics);return R.chain(d=>{const u=getMessagePathDataItems(d,n,l,s,o);return u==null?[]:[{queriedData:u,receiveTime:d.receiveTime,headerStamp:getTimestampForMessage(d.message)}]},t)}const Ct=e=>t=>({...t,datasets:pt(e,t.datasets)}),Se=Ct((e,t)=>t.value.endsWith(".@derivative")?{...e,data:ce(e.data)}:e),Ge=Ct((e,t)=>{if(t.timestampMethod!=="headerStamp")return e;const n=[];for(const o of(0,je.tp)(e.data))n.push([o.index,o.x]);n.sort(([,o],[,l])=>o-l);const s=T(e.data,se.UID(([o])=>o,n));return s==null?e:{...e,data:s}});var tt=a(67067),Ke=a(25513),gt=a(65741),vt=a(5817),p=a.n(vt),w=a(68588),oe=a(39367);const G=p()((e,t,n)=>({actions:[{type:"action",id:"delete-series",label:n("deleteSeries"),display:"inline",icon:"Clear"}],label:lt(e,t),visible:e.enabled,fields:{value:{label:n("messagePath"),input:"messagepath",value:e.value,validTypes:ht,supportsMathModifiers:!0},label:{input:"string",label:n("label"),value:e.label},color:{input:"rgb",label:n("color"),value:e.color??Z.Hm[t%Z.Hm.length]},showLine:{label:n("showLine"),input:"boolean",value:e.showLine!==!1},timestampMethod:{input:"select",label:n("timestamp"),value:e.timestampMethod,options:[{label:n("receiveTime"),value:"receiveTime"},{label:n("headerStamp"),value:"headerStamp"}]}}})),Me=p()((e,t)=>{const n=Object.fromEntries(e.map((s,o)=>[`${o}`,G(s,o,t)]));return{label:t("series"),children:n,actions:[{type:"action",id:"add-series",label:t("addSeries"),display:"inline",icon:"Addchart"}]}});function Ae(e,t){const n=J.Z(e.minYValue)&&J.Z(e.maxYValue)&&e.minYValue>=e.maxYValue?t("maxYError"):void 0,s=J.Z(e.minXValue)&&J.Z(e.maxXValue)&&e.minXValue>=e.maxXValue?t("maxXError"):void 0;return{general:{label:t("general"),fields:{isSynced:{label:t("syncWithOtherPlots"),input:"boolean",value:e.isSynced}}},legend:{label:t("legend"),fields:{legendDisplay:{label:t("position"),input:"select",value:e.legendDisplay,options:[{value:"floating",label:t("floating")},{value:"left",label:t("left")},{value:"top",label:t("top")},{value:"none",label:t("hidden")}]},showPlotValuesInLegend:{label:t("showValues"),input:"boolean",value:e.showPlotValuesInLegend}}},yAxis:{label:t("yAxis"),defaultExpansionState:"collapsed",fields:{showYAxisLabels:{label:t("showLabels"),input:"boolean",value:e.showYAxisLabels},minYValue:{label:t("min"),input:"number",value:e.minYValue!=null?Number(e.minYValue):void 0,placeholder:"auto"},maxYValue:{label:t("max"),input:"number",error:n,value:e.maxYValue!=null?Number(e.maxYValue):void 0,placeholder:"auto"}}},xAxis:{label:t("xAxis"),defaultExpansionState:"collapsed",fields:{xAxisVal:{label:t("value"),input:"select",value:e.xAxisVal,options:[{label:t("timestamp"),value:"timestamp"},{label:t("index"),value:"index"},{label:t("currentPath"),value:"currentCustom"},{label:t("accumulatedPath"),value:"custom"}]},xAxisPath:e.xAxisVal==="currentCustom"||e.xAxisVal==="custom"?{label:t("messagePath"),input:"messagepath",value:e.xAxisPath?.value??"",validTypes:ht}:void 0,showXAxisLabels:{label:t("showLabels"),input:"boolean",value:e.showXAxisLabels},minXValue:{label:t("min"),input:"number",value:e.minXValue!=null?Number(e.minXValue):void 0,placeholder:"auto"},maxXValue:{label:t("max"),input:"number",error:s,value:e.maxXValue!=null?Number(e.maxXValue):void 0,placeholder:"auto"},followingViewWidth:{label:t("secondsRange"),input:"number",placeholder:"auto",value:e.followingViewWidth}}},paths:Me(e.paths,t)}}function Ne(e,t,n){const s=(0,oe.W0)(),{t:o}=(0,w.$G)("plot"),l=(0,f.useCallback)(d=>{if(d.action==="update"){const{path:u,value:c}=d.payload;t((0,tt.Uy)(E=>{u[0]==="paths"?u[2]==="visible"?Ke.Z(E,[...u.slice(0,2),"enabled"],c):Ke.Z(E,u,c):gt.Z(u,["legend","legendDisplay"])?(E.legendDisplay=c,E.showLegend=!0):gt.Z(u,["xAxis","xAxisPath"])?Ke.Z(E,["xAxisPath","value"],c):(Ke.Z(E,u.slice(1),c),u[1]==="followingViewWidth"?(E.minXValue=void 0,E.maxXValue=void 0):(u[1]==="minXValue"||u[1]==="maxXValue")&&(E.followingViewWidth=void 0))}))}else if(d.payload.id==="add-series")t((0,tt.Uy)(u=>{u.paths.push({timestampMethod:"receiveTime",value:"",enabled:!0})}));else if(d.payload.id==="delete-series"){const u=d.payload.path[1];t((0,tt.Uy)(c=>{c.paths.splice(Number(u),1)}))}},[t]);(0,f.useEffect)(()=>{s({actionHandler:l,focusedPath:n,nodes:Ae(e,o)})},[l,e,n,s,o])}var xe=a(90758),Xe=a(75845),it=a(75785),dt=a(99616),It=a(1012),Et=a(36423),$e=a(2784);let yt,Ve,bt=0;const Mt=[];async function nt(){return Ve??await new Promise(e=>{Mt.push(e)})}const wt=e=>e.seekPlayback==null;let ct=[];const St=e=>`${e.topic}:${(e.fields??[]).join(",")}`;let ze={};function Bt(e){return se.zGw(se.vMG(t=>t.topic),se.IDH((t,n)=>({topic:n,fields:se.zGw(se.tSV(s=>s.fields??[]),se.jj$)(t??[])})),se.VO0)(e)}function _t(e){return se.zGw(se.tSV(t=>{const n=(0,It.ZP)(t);return n==null?[]:[n]}),se.tSV(t=>{const n=se.YMb(t.messagePath);return n==null||n.type!=="name"?[]:[{topic:t.topicName,fields:[n.name,"header"]}]}),Bt)(e)}function Dt(){if(se.xbD(ze))return;const e=se.VO0(ze),t=se.zGw(se.tSV(n=>n.topics),Bt)(e);se.YMb(e)?.setter(t),ct=se.UID(n=>se.eiS(se.UID(St,t),n),ct)}function Lt(e){const t=e[0]?.message;return t==null?0:Object.keys(t).length}function At(e,t){const[n,s]=$e.useState([]);(0,f.useEffect)(()=>(ze={...ze,[e]:{topics:t,setter:s}},Dt(),()=>{const{[e]:d,...u}=ze;ze=u,Dt()}),[e,t]);const o=(0,F.An)(wt);(0,f.useEffect)(()=>{(async()=>await(await nt()).setLive(o))()},[o]),(0,it.CC)({topics:n,restore:$e.useCallback(d=>(d==null&&Ve?.clearCurrent(),0),[]),addMessages:$e.useCallback((d,u)=>(Ve?.addCurrent(u),1),[])});const l=(0,dt.P)($e.useMemo(()=>se.UID(d=>({...d,preloadType:"full"}),n),[n]));(0,f.useEffect)(()=>{for(const[d,u]of l.entries()){if(se.xbD(u))break;const c={},E=ct[d]??{};for(const X of n){const C=St(X),g=u[X.topic];if(g==null)continue;const v=Lt(g);E[C]!==v&&(E[C]=v,c[X.topic]=g)}ct[d]=E,se.xbD(c)||Ve?.addBlock(c)}},[n,l])}function Vt(){const{topics:e,datatypes:t}=(0,it.Ui)();(0,f.useEffect)(()=>{Ve?.receiveMetadata(e,t)},[e,t]);const{globalVariables:n}=(0,Et.Z)();(0,f.useEffect)(()=>{Ve?.receiveVariables(n)},[n])}function Ot(e){const t=(0,f.useMemo)(()=>(0,we.Z)(),[]),n=(0,Xe.vE)(e),{xAxisPath:s,paths:o}=n,l=(0,f.useMemo)(()=>Ye(o,s),[s,o]),d=(0,Xe.O4)(l),u=(0,f.useMemo)(()=>_t(d),[d]);(0,f.useEffect)(()=>{if(yt==null){yt=new Worker(new URL(a.p+a.u(1457),a.b)),Ve=xe.Ud(yt);for(const v of Mt)v(Ve)}return bt++,()=>{bt--,bt===0&&(yt?.terminate(),yt=Ve=void 0,ct=[])}},[]),Vt();const[c,E]=$e.useState();(0,f.useEffect)(()=>()=>{Ve?.unregister(t)},[t]),At(t,u);const X=$e.useRef();(0,f.useEffect)(()=>{X.current=n,Ve?.updateParams(t,n)},[t,n]);const C=$e.useMemo(()=>({setView:v=>{Ve?.updateView(t,v)},register:(v,ie)=>{(async()=>(await nt()).register(t,xe.sj(v),xe.sj(E),xe.sj(ie),X.current))()}}),[t]),g=$e.useMemo(()=>async()=>await(await nt()).getFullData(t),[t]);return $e.useMemo(()=>({data:c,provider:C,getFullData:g}),[c,C,g])}const jt=240,en=[];function tn(e,t){e({panelType:"Plot",updateIfExists:!0,siblingConfigCreator:n=>({...n,paths:U.Z(n.paths.concat([{value:t,enabled:!0,timestampMethod:"receiveTime"}]).filter(({value:s})=>s))})})}function rt(e){return e.playerState.activeData?.startTime}function Zt(e){return e.playerState.activeData?.currentTime}function Ft(e){return e.playerState.activeData?.endTime}const Wt=Object.freeze({sec:0,nsec:0});function nn(e){const{saveConfig:t,config:n}=e,{title:s,followingViewWidth:o,paths:l,minXValue:d,maxXValue:u,minYValue:c,maxYValue:E,showXAxisLabels:X,showYAxisLabels:C,showLegend:g,legendDisplay:v=n.showSidebar===!0?"left":"floating",showPlotValuesInLegend:ie,isSynced:te,xAxisVal:K,xAxisPath:Je,sidebarDimension:Re=n.sidebarWidth??jt,[P.xS]:Ie}=n,{setMessagePathDropConfig:ne}=(0,i.R)();(0,f.useEffect)(()=>{ne({getDropStatus(De){return De.isLeaf?{canDrop:!0,effect:"add"}:{canDrop:!1}},handleDrop(De){t(Oe=>({...Oe,paths:[...Oe.paths.length===1&&Oe.paths[0]?.value===""?[]:Oe.paths,{value:De.path,enabled:!0,timestampMethod:"receiveTime"}]}))}})},[t,ne]),(0,f.useEffect)(()=>{s&&(Ie==null||Ie==="")&&t({title:void 0,[P.xS]:s})},[Ie,s,t]),(0,f.useEffect)(()=>{l.length===0&&t({paths:[{value:"",enabled:!0,timestampMethod:"receiveTime"}]})},[t,l.length]);const Qe=(0,F.An)(rt),on=(0,F.An)(Zt),xn=(0,F.An)(Ft),un=De=>{if(K==="timestamp"&&De&&Qe)return(0,j.toSec)((0,j.subtract)(De,Qe))},dn=un(on),cn=(0,f.useMemo)(()=>{if(o!=null&&+o>0)return{type:"following",width:+o}},[o]),Tt=un(xn),fn=(0,f.useMemo)(()=>{if(J.Z(d)&&J.Z(Tt)||J.Z(u))return{type:"fixed",minXValue:J.Z(d)?d:0,maxXValue:J.Z(u)?u:Tt??0};if(K==="timestamp"&&Qe&&Tt!=null)return{type:"fixed",minXValue:0,maxXValue:Tt}},[u,d,Tt,Qe,K]),gn=(0,f.useMemo)(()=>cn??fn??void 0,[fn,cn]),{data:mn,provider:vn,getFullData:hn}=Ot({startTime:Qe??Wt,paths:l,invertedTheme:!1,xAxisPath:Je,xAxisVal:K,minXValue:d,maxXValue:u,minYValue:c,maxYValue:E,followingViewWidth:o}),{datasets:yn,bounds:bn,pathsWithMismatchedDataLengths:Mn}=(0,f.useMemo)(()=>{const De=mn??ke;return{bounds:De.bounds,pathsWithMismatchedDataLengths:De.pathsWithMismatchedDataLengths,datasets:l.map(Oe=>{for(const[ft,rn]of De.datasets.entries())if(ft.value===Oe.value&&ft.timestampMethod===Oe.timestampMethod)return rn;return{label:Oe.label??Oe.value,data:[be]}})}},[mn,l]),pn=(0,F.m7)(),Pn=(0,f.useCallback)(({x:De})=>{const{seekPlayback:Oe,playerState:{activeData:{startTime:ft}={}}}=pn();!Oe||!ft||De==null||K!=="timestamp"||De>=0&&Oe((0,j.add)(ft,(0,j.fromSec)(De)))},[pn,K]),[Cn,En]=(0,f.useState)(void 0);Ne(n,t,Cn);const Sn=(0,f.useMemo)(()=>v==="top"?"column":"row",[v]),Dn=(0,f.useCallback)(()=>[{type:"item",label:"Download plot data as CSV",onclick:async()=>{const Oe=await hn();if(Oe==null)return;const ft=[];for(const rn of Oe.datasets.values())ft.push(rn);qt(ft,K)}}],[hn,K]),Tn=(0,f.useCallback)(De=>{En(["paths",String(De)])},[]);return(0,r.jsxs)(B.Z,{flex:"auto",alignItems:"center",justifyContent:"center",overflow:"hidden",position:"relative",children:[(0,r.jsx)(O.Z,{}),(0,r.jsxs)(B.Z,{direction:Sn,flex:"auto",fullWidth:!0,style:{height:`calc(100% - ${O.B}px)`},children:[v!=="none"&&(0,r.jsx)(Gt,{currentTime:ie?dn:void 0,datasets:ie?yn:en,legendDisplay:v,onClickPath:Tn,paths:l,pathsWithMismatchedDataLengths:Mn,saveConfig:t,showLegend:g,showPlotValuesInLegend:ie,sidebarDimension:Re}),(0,r.jsxs)(B.Z,{flex:"auto",alignItems:"center",justifyContent:"center",overflow:"hidden",children:[(0,r.jsx)(ee,{currentTime:dn,datasetBounds:bn,provider:vn,defaultView:gn,isSynced:K==="timestamp"&&te,maxYValue:parseFloat((E??"").toString()),minYValue:parseFloat((c??"").toString()),onClick:Pn,paths:l,showXAxisLabels:X,showYAxisLabels:C,xAxisVal:K}),(0,r.jsx)($.i,{getItems:Dn})]})]})]})}const an={paths:[{value:"",enabled:!0,timestampMethod:"receiveTime"}],minYValue:void 0,maxYValue:void 0,showXAxisLabels:!0,showYAxisLabels:!0,showLegend:!0,legendDisplay:"floating",showPlotValuesInLegend:!1,isSynced:!0,xAxisVal:"timestamp",sidebarDimension:jt},sn=(0,Y.Z)(Object.assign(nn,{panelType:"Plot",defaultConfig:an}))},72659:(at,he,a)=>{a.d(he,{Hh:()=>f,bV:()=>J});const r=j=>{const F={};for(const[Y,i]of j){const $=F[Y]={};for(const O of i.definitions)O.isConstant===!0&&O.value!=null&&typeof O.value!="boolean"&&($[O.value.toString()]!=null?$[O.value.toString()]="<multiple constants match>":$[O.value.toString()]=O.name)}return F},U=/(.*)__(foxglove|webviz)_enum$/;function J(j){return U.exec(j)?.[1]}const f=j=>{const F=r(j),Y={};for(const[i,$]of j){const O={};let B={},P;for(const x of $.definitions){if(P!=null&&x.type!==P&&(B={},P=void 0),x.isConstant===!0&&x.value!=null&&typeof x.value!="boolean"){P=x.type,B[x.value.toString()]!=null?B[x.value.toString()]="<multiple constants match>":B[x.value.toString()]=x.name;continue}const q=J(x.name);if(q!=null){const Q=F[x.type];Q&&(O[q]=Q);continue}O[x.name]||(Object.keys(B).length>0&&(O[x.name]=B),B={})}Object.keys(O).length>0&&(Y[i]=O)}return Y}},68071:(at,he,a)=>{a.d(he,{A2:()=>i,Hm:()=>F,UX:()=>$,eE:()=>O,wi:()=>B});var r=a(4e4),U=a(63852),J=a(77068),f=a(1547),j=a(25302);const F=[j.Y.blue.medium,j.Y.orange.medium,j.Y.yellow.medium,j.Y.green.medium,j.Y.cyan.medium,j.Y.purple.medium,j.Y.paleGreen.medium],Y=F.map(P=>[P,...(0,f.Z)(P).tetrad().map(x=>x.toHexString())]),i=r.Z(U.Z(0,Y[0].length).map(P=>Y.map(x=>x[P])).flat()),$=J.Z(P=>(0,f.Z)(P).brighten(15).toString()),O=J.Z(P=>(0,f.Z)(P).darken(30).toString());function B(P,x){return P??F[x%F.length]}},25302:(at,he,a)=>{a.d(he,{B:()=>J,Y:()=>U});var r=a(1547);const U={base:{dark:"#1F1E27",medium:"#8B8B8D",light:"#F7F7F3"},red:{dark:"#F24366",medium:"#ff7c96",light:"#FFAABB"},blue:{dark:"#1b83ec",medium:"#4e98e2",light:"#77AADD"},paleGreen:{dark:"#B4CC00",medium:"#cad660",light:"#CDD67E"},orange:{dark:"#ea531f",medium:"#f5774d",light:"#faa487"},cyan:{dark:"#22b5ff",medium:"#61cbff",light:"#99DDFF"},green:{dark:"#05d27d",medium:"#5cd6a9",light:"#8de0c9"},purple:{dark:"#6E51EE",medium:"#a395e2",light:"#c7c0e7"},yellow:{dark:"#EDCC28",medium:"#f7df71",light:"#f1e4aa"}},J=(0,r.Z)("hsv(0, 0%, 75%)").toHexString()}}]);

//# sourceMappingURL=2421.defd6ecc07f4330b330b.js.map