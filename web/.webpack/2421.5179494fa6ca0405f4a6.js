"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2421],{10742:(et,he,n)=>{n.d(he,{Hu:()=>j,gi:()=>f,tp:()=>W});var d=n(96389);function V(J){return R.pipe(R.map(z=>z.x.length),R.sum)(J)}function*f(J){let z=0;for(const r of J){if(r==null){z++;continue}const{x:k,y:O,label:w}=r;yield{index:z,x:k,y:O,label:w},z++}}function*W(J){const z={index:0,label:void 0};let r=0;for(const k of J){const O=d.YMb(d.VO0(k));if(O!=null)for(let w=0;w<O.length;w++){for(const T of d.XPQ(k))z[T]=k[T]?.[w];z.index=r,r++,yield z}}}function j(J,z){let r=z;for(let k=0;k<J.length;k++){const O=J[k];if(O==null)continue;const{x:{length:w}}=O;if(r===w&&k===J.length-1)return[k,r];if(r>=w){r-=w;continue}return[k,r]}}},96133:(et,he,n)=>{n.d(he,{J:()=>d});function d(V,f){if(typeof V.value=="object")throw new Error("filterMatches only works on paths where global variables have been filled in");if(V.value==null)return!1;let W=f;for(const j of V.path)if(typeof W!="object"||W==null||(W=W[j],W==null))return!1;return W!=null&&W==V.value}},36922:(et,he,n)=>{n.d(he,{Iq:()=>M,wm:()=>$});var d=n(76635),V=n.n(d),f=n(2784),W=n(8220),j=n(75845),J=n(75785),z=n(36423),r=n(79064),k=n(96133),O=n(60351),w=n(21337),T=n(1012);function M(re){const{topics:p,datatypes:N}=J.Ui(),{globalVariables:q}=(0,z.Z)(),X=(0,j.O4)(re),ee=(0,f.useMemo)(()=>(0,W.Z)(X,H=>{const _=(0,T.ZP)(H);return _?[H,_]:void 0}),[X]),ue=(0,f.useMemo)(()=>{const H={};for(const[_,ce]of ee)H[_]=Q(ce,q);return H},[q,ee]),de=(0,j.vE)(ue),ve=(0,f.useMemo)(()=>(0,d.keyBy)(p,({name:H})=>H),[p]),fe=(0,f.useMemo)(()=>{const H=new Set,_=[];for(const[ce,Le]of ee){if(H.has(Le.topicName))continue;H.add(Le.topicName);const ke=ve[Le.topicName];ke&&_.push(ke)}return _},[ve,ee]),Se=(0,j.vE)(fe),Fe=(0,f.useMemo)(()=>{const H=new Map;function _(ce,Le){if(Le.includes(ce))return;const ke=N.get(ce);if(ke){H.set(ce,ke);for(const Ne of ke.definitions)(Ne.isComplex===!0||(0,r.bV)(Ne.name)!=null)&&_(Ne.type,[...Le,ce])}}for(const{schemaName:ce}of Se.values())ce!=null&&_(ce,[]);return H},[N,Se]),Pe=(0,j.vE)(Fe),ye=(0,f.useMemo)(()=>(0,w.pb)(Pe),[Pe]),tt=(0,f.useMemo)(()=>(0,r.Hh)(Pe),[Pe]);return(0,f.useCallback)((H,_)=>{if(!X.includes(H))throw new Error(`path (${H}) was not in the list of cached paths`);const ce=de[H];return ce?K(_,ce,ve,ye,tt):void 0},[X,de,ve,ye,tt])}function Q(re,p){return{...re,messagePath:re.messagePath.map(N=>{if(N.type==="slice"){const q=typeof N.start=="object"?Number(p[N.start.variableName]):N.start,X=typeof N.end=="object"?Number(p[N.end.variableName]):N.end;return{...N,start:isNaN(q)?0:q,end:isNaN(X)?1/0:X}}else if(N.type==="filter"&&typeof N.value=="object"){let q;const X=p[N.value.variableName];return(typeof X=="number"||typeof X=="string")&&(q=X),{...N,value:q}}return N})}}function K(re,p,N,q,X){const ee=N[p.topicName];if(!ee||re.topic!==p.topicName)return;for(const fe of p.messagePath)if(fe.type==="filter"){if(!(0,k.J)(fe,re.message))return[]}else break;const ue=[];function de(fe,Se,Fe,Pe){if(fe==null||Pe==null)return;const ye=p.messagePath[Se],tt=p.messagePath[Se+1];if(ye)if(ye.type==="name"&&Pe.structureType==="message"){const H=Pe.nextByName[ye.name];de(fe[ye.name],Se+1,`${Fe}.${ye.repr}`,H)}else if(ye.type==="slice"&&Pe.structureType==="array"){const{start:H,end:_}=ye;if(typeof H=="object"||typeof _=="object")throw new Error("getMessagePathDataItems only works on paths where global variables have been filled in");const ce=H,Le=_;if(typeof ce!="number"||typeof Le!="number")return;const ke=fe.length;for(let Ne=ce;Ne<=Math.min(Le,ke-1);Ne++){const pt=Ne>=0?Ne:ke+Ne,We=fe[pt];if(We==null)continue;let Xe;if(tt&&tt.type==="filter")Xe=`${Fe}[:]`;else if(typeof We=="object"){const Ze=O.H.find(yt=>yt in We);Ze!=null?Xe=`${Fe}[:]{${Ze}==${We[Ze]}}`:Xe=`${Fe}[${Ne}]`}else Xe=`${Fe}[${Ne}]`;de(We,Se+1,Xe,Pe.next)}}else ye.type==="filter"?(0,k.J)(ye,fe)&&de(fe,Se+1,`${Fe}{${ye.repr}}`,Pe):console.warn(`Unknown pathItem.type ${ye.type} for structureType: ${Pe.structureType}`);else{let H;const _=p.messagePath[Se-1];if(_&&_.type==="name"){const ce=_.name;H=X[Pe.datatype]?.[ce]?.[fe]}ue.push({value:fe,path:Fe,constantName:H})}}const ve=ee.schemaName==null?{structureType:"message",datatype:"",nextByName:{}}:q[ee.schemaName];return ve&&de(re.message,0,(0,T.dH)(p.topicName),ve),ue}function $(re){const p=(0,j.O4)(re),N=M(p);return(0,f.useCallback)(q=>{const X={};for(const ee of p){const ue=(0,T.ZP)(ee);if(!ue){X[ee]=[];continue}const de=q[ue.topicName];if(!de)continue;const ve=[];X[ee]=ve;for(const fe of de){const Se=N(ee,fe);Se&&ve.push({messageEvent:fe,queriedData:Se})}}return X},[p,N])}},78324:(et,he,n)=>{n.d(he,{i:()=>k});var d=n(52322),V=n(3925),f=n(56961),W=n(80078),j=n(2784),J=n(84877),z=n(2784);function r(O){const{getItems:w}=O,T=(0,j.useRef)(null),[M,Q]=(0,j.useState)(),K=(0,j.useCallback)(()=>{Q(void 0)},[]),[$,re]=(0,j.useState)([]);return(0,j.useEffect)(()=>{const p=T.current?.closest(`.${J.D}`);if(!p)return;let N="none";const q=de=>{de.button===2&&N==="down"&&(Q({x:de.clientX,y:de.clientY}),re(w()),N="none")},X=de=>{N="canceled"},ee=de=>{de.button===2&&(N="down")},ue=de=>{de.preventDefault()};return p.addEventListener("mousedown",ee),p.addEventListener("mousemove",X),p.addEventListener("mouseup",q),p.addEventListener("contextmenu",ue),()=>{p.removeEventListener("mousedown",ee),p.removeEventListener("mousemove",X),p.removeEventListener("mouseup",q),p.removeEventListener("contextmenu",ue)}},[w]),(0,d.jsx)("div",{ref:T,onContextMenu:p=>{p.preventDefault()},children:(0,d.jsx)(V.Z,{open:M!=null,onClose:K,anchorReference:"anchorPosition",anchorPosition:M?{top:M.y,left:M.x}:void 0,MenuListProps:{dense:!0},children:$.map((p,N)=>p.type==="divider"?(0,d.jsx)(f.Z,{variant:"middle"},`divider_${N}`):(0,d.jsx)(W.Z,{onClick:()=>{K(),p.onclick()},disabled:p.disabled,children:p.label},`item_${N}_${p.label}`))})})}const k=z.memo(r)},24243:(et,he,n)=>{n.d(he,{Z:()=>nn});var d=n(52322),V=n(47746),f=n(20379),W=n(17055),j=n(38677),J=n(76635),z=n(96389),r=n(2784),k=n(87438),O=n(72970),w=n(91004),T=n(8220),M=n(23503),Q=n(69629),K=n.n(Q),$=n(97984),re=n(16750),p=n(45243),N=n(12982),q=n.n(N),X=n(829),ee=n.n(X),ue=n(42146);function de(m){m.receive("sendNotification",({message:P,details:C,type:L,severity:Z})=>{(0,ue.ZP)(P,C,L,Z)})}function ve(m){de(m)}class fe{#n;#t;#e;#a;constructor(P,C){this.#n=P,this.#t=C,this.#e=new Array(C),this.#a=new Set}testing_workerCount(){return this.#e.filter(Boolean).length}testing_getWorkerState(P){return this.#e.find(C=>C?.listenerIds.includes(P))}registerWorkerListener(P){if(this.#a.has(P))throw new Error("cannot register the same listener id twice");if(this.#a.add(P),this.#e.filter(Boolean).length<this.#t){const A=this.#n(),me=new p.Z(A);ve(me);const F=q()(this.#e,S=>!S);return this.#e[F]={worker:A,rpc:me,listenerIds:[P]},me}const Z=ee()(this.#e.filter(Boolean),A=>A?.listenerIds.length)[0];if(!Z)throw new Error("no worker state");return Z.listenerIds.push(P),Z.rpc}unregisterWorkerListener(P){if(!this.#a.has(P))throw new Error("Cannot find listener to unregister");this.#a.delete(P);const C=q()(this.#e,Z=>Z?Z.listenerIds.includes(P):!1),L=this.#e[C];C>=0&&L&&(L.listenerIds=L.listenerIds.filter(Z=>Z!==P),L.listenerIds.length===0&&(this.#e[C]=void 0,L.worker.terminate(),L.rpc.terminate()))}}var Se=n(36537),Fe="../../packages/studio-base/src/components/Chart/index.tsx";const Pe=M.ZP.getLogger(Fe);function ye(){return new Worker(new URL(n.p+n.u(5952),n.b))}const tt=(0,Se.N)(window).devicePixelRatio??1,H=new fe(ye,4);function _(m){const P=m.currentTarget.getBoundingClientRect();return{cancelable:!1,clientX:m.clientX-P.left,clientY:m.clientY-P.top,target:{boundingClientRect:P.toJSON()}}}const ce=typeof HTMLCanvasElement.prototype.transferControlToOffscreen=="function";function Le(m){const[P]=(0,r.useState)(()=>(0,w.Z)()),C=(0,r.useRef)(!1),L=(0,r.useRef)(),Z=(0,r.useRef)(null),A=(0,k.Z)(),me=(0,r.useRef)(),F=m.options.plugins?.zoom?.zoom?.enabled??!1,S=m.options.plugins?.zoom?.pan?.enabled??!1,{type:b,data:D,typedData:I,isBoundsReset:Ue,options:pe,width:De,height:je,onStartRender:Ce,onFinishRender:te}=m,xe=(0,r.useRef)(),U=(0,r.useRef)(),Ee=(0,r.useRef)(!1),st=(0,r.useRef)([]),dt=(0,r.useRef)({});(0,r.useLayoutEffect)(()=>{Pe.info(`Register Chart ${P}`);let x;if(ce)x=H.registerWorkerListener(P);else{const{local:ae,remote:Y}=(0,p.t)();new re.Z(new p.Z(Y)),x=new p.Z(ae)}const B=async(ae,Y,Me)=>await x.send(ae,{id:P,...Y},Me);return xe.current=B,()=>{Pe.info(`Unregister chart ${P}`),B("destroy").catch(()=>{}),U.current=void 0,xe.current=void 0,C.current=!1,dt.current={},L.current?.remove(),L.current=void 0,ce&&H.unregisterWorkerListener(P)}},[P]);const xt=(0,r.useRef)(m.onScalesUpdate);xt.current=m.onScalesUpdate;const Ae=(0,r.useCallback)((x,B)=>{if(!A())return;const ae=me.current;me.current=x;const Y=JSON.stringify(ae),Me=JSON.stringify(x);Y!==Me&&xt.current?.(x,B??{userInteraction:!1})},[A]),gt=(0,r.useCallback)(()=>{const x=dt.current,B={};if(!(De===0||je===0)&&(x.data!==D&&(x.data=B.data=D),x.typedData!==I&&(x.typedData=B.typedData=I),x.options!==pe&&(x.options=B.options=pe),x.height!==je&&(x.height=B.height=je),x.width!==De&&(x.width=B.width=De),B.isBoundsReset=Ue,Object.keys(B).length!==0))return B},[D,I,je,pe,Ue,De]),Je=(0,r.useCallback)(async x=>{if(!C.current){(0,$.assert)(L.current==null,"Canvas has already been initialized"),(0,$.assert)(Z.current,"No container ref"),(0,$.assert)(xe.current,"No RPC");const ae=document.createElement("canvas");ae.style.width="100%",ae.style.height="100%",ae.width=x.width??0,ae.height=x.height??0,Z.current.appendChild(ae),L.current=ae,C.current=!0,Ce?.();const Y=typeof ae.transferControlToOffscreen=="function"?ae.transferControlToOffscreen():ae,Me=await xe.current("initialize",{node:Y,type:b,data:x.data,typedData:x.typedData,options:x.options,devicePixelRatio:tt,width:x.width,height:x.height},[Y]),{current:Ve}=st;st.current=[];for(const Re of Ve){const le=await xe.current("update",Re);Ae(le)}U.current=xe.current,Ae(Me),te?.();return}if(!U.current){st.current=[...st.current,x];return}Ce?.();const B=await U.current("update",x);Ae(B),te?.()},[Ae,te,Ce,b]),[Ye,He]=(0,r.useState)();(0,r.useLayoutEffect)(()=>{if(!Z.current)return;He(void 0);const x=gt();x&&Je(x).catch(B=>{A()&&He(B)})},[gt,A,Je]),(0,r.useLayoutEffect)(()=>{const x=Z.current;if(!x||!S)return;const B=new(K()).Manager(x),ae=m.options.plugins?.zoom?.pan?.threshold??10;return B.add(new(K()).Pan({threshold:ae})),B.on("panstart",async Y=>{if(Ee.current=!0,!U.current)return;const Me=Y.target.getBoundingClientRect();await U.current("panstart",{event:{cancelable:!1,deltaY:Y.deltaY,deltaX:Y.deltaX,center:{x:Y.center.x,y:Y.center.y},target:{boundingClientRect:Me.toJSON()}}})}),B.on("panmove",async Y=>{if(!U.current)return;const Me=Y.target.getBoundingClientRect(),Ve=await U.current("panmove",{event:{cancelable:!1,deltaY:Y.deltaY,deltaX:Y.deltaX,target:{boundingClientRect:Me.toJSON()}}});Ae(Ve,{userInteraction:!0})}),B.on("panend",async Y=>{if(!U.current)return;const Me=Y.target.getBoundingClientRect(),Ve=await U.current("panend",{event:{cancelable:!1,deltaY:Y.deltaY,deltaX:Y.deltaX,target:{boundingClientRect:Me.toJSON()}}});Ae(Ve,{userInteraction:!0})}),()=>{B.destroy()}},[Ae,S,m.options.plugins?.zoom?.pan?.threshold]);const Qe=(0,r.useCallback)(async x=>{if(!F||!U.current)return;const B=x.currentTarget.getBoundingClientRect(),ae=await U.current("wheel",{event:{cancelable:!1,deltaY:x.deltaY,deltaX:x.deltaX,clientX:x.clientX,clientY:x.clientY,target:{boundingClientRect:B.toJSON()}}});Ae(ae,{userInteraction:!0})},[F,Ae]),ze=(0,r.useCallback)(async x=>{if(Ee.current=!1,!U.current)return;const B=await U.current("mousedown",{event:_(x)});Ae(B)},[Ae]),bt=(0,r.useCallback)(async x=>{if(U.current)return await U.current("mouseup",{event:_(x)})},[]),be=(0,r.useRef)(!1),{onHover:$e}=m,ot=(0,r.useCallback)(async x=>{if(be.current=!0,$e==null||U.current==null)return;const B=await U.current("getElementsAtEvent",{event:_(x)});A()&&be.current&&$e(B)},[$e,A]),it=(0,r.useCallback)(()=>{be.current=!0},[]),vt=(0,r.useCallback)(()=>{be.current=!1,$e?.([])},[$e]),ct=(0,r.useCallback)(async x=>{if(!m.onClick||!U.current||!A()||Ee.current)return;const B=x.currentTarget.getBoundingClientRect(),ae=x.clientX-B.left,Y=x.clientY-B.top,Me=await U.current("getDatalabelAtEvent",{event:{x:ae,y:Y,type:"click"}});let Ve,Re;const le=me.current?.x;if(le){const ge=le.pixelMax-le.pixelMin;Ve=(le.max-le.min)/ge*(ae-le.pixelMin)+le.min}const we=me.current?.y;if(we){const ge=we.pixelMax-we.pixelMin;Re=(we.max-we.min)/ge*(Y-we.pixelMin)+we.min}m.onClick({datalabel:Me,x:Ve,y:Re})},[A,m]);if(Ye)throw Ye;return(0,d.jsx)("div",{ref:Z,onWheel:Qe,onClick:ct,onMouseDown:ze,onMouseMove:ot,onMouseLeave:vt,onMouseEnter:it,onMouseUp:bt,style:{width:De,height:je,cursor:"crosshair",position:"relative"}})}const ke=Le;var Ne=n(86451),pt=n(85026),We=n(93812),Xe=n(86495),Ze=n(77075),yt=n(23144),jt=n(3896);const Et=(0,O.ZL)()(m=>({root:{fontFamily:Ze.R.MONOSPACE,fontSize:m.typography.caption.fontSize,lineHeight:m.typography.caption.lineHeight,overflowWrap:"break-word"},grid:{columnGap:m.spacing(.5),display:"grid",gridTemplateColumns:"auto minmax(0px, max-content) minmax(auto, max-content)",alignItems:"center",fontFamily:Ze.R.MONOSPACE,fontSize:m.typography.caption.fontSize,lineHeight:m.typography.caption.lineHeight,overflowWrap:"break-word"},icon:{gridColumn:"1",height:12,width:12},path:{opacity:.9,whiteSpace:"nowrap"},value:{fontWeight:600,paddingLeft:m.spacing(2)},overflow:{gridColumn:"2/4",opacity:m.palette.action.disabledOpacity,fontStyle:"italic",":not(:last-child)":{marginBottom:m.spacing(.5)}}}));function St(){const{classes:m}=Et();return(0,d.jsx)("div",{className:m.overflow,children:"<multiple values under cursor>"})}function Ft(m){const{colorsByDatasetIndex:P,content:C,labelsByDatasetIndex:L,multiDataset:Z}=m,{classes:A,cx:me}=Et(),F=(0,r.useMemo)(()=>{if(!Z)return[];const S=new Map;for(const b of C){const D=b.datasetIndex,I=S.get(D);if(I){I.hasMultipleValues=!0;continue}S.set(D,{tooltip:b,hasMultipleValues:!1})}return(0,J.sortBy)([...S.entries()],([b,D])=>D.tooltip.datasetIndex)},[C,Z]);if(!Z){const S=C[0];if(!S)return(0,d.jsx)(d.Fragment,{});const b=typeof S.value=="string"?S.value:typeof S.value=="bigint"?S.value.toString():JSON.stringify(S.value);return(0,d.jsxs)(We.Z,{className:A.root,"data-testid":"TimeBasedChartTooltipContent",children:[(0,d.jsxs)("div",{children:[b,S.constantName!=null?` (${S.constantName})`:""]}),C.length>1&&(0,d.jsx)(St,{})]})}return(0,d.jsx)("div",{className:me(A.root,A.grid),"data-testid":"TimeBasedChartTooltipContent",children:F.map(([S,b],D)=>{const I=P?.[S]??"auto",Ue=L?.[S],pe=b.tooltip,De=typeof pe.value=="string"?pe.value:typeof pe.value=="bigint"?pe.value.toString():JSON.stringify(pe.value);return(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(jt.In2,{className:A.icon,primaryFill:I}),(0,d.jsx)("div",{className:A.path,children:Ue??""}),(0,d.jsxs)("div",{className:A.value,children:[De,pe.constantName!=null?` (${pe.constantName})`:""]}),b.hasMultipleValues&&(0,d.jsx)(St,{})]},D)})})}var kt=n(63718),Wt=n(94225),Xt=n(10742);function Zt(m,P){const{bounds:C,width:L,height:Z}=P,A=L/(C.x.max-C.x.min),me=Z/(C.y.max-C.y.min),F=[];let S,b,D,I;const Ue=C.x.max-C.x.min,pe=C.x.min-Ue*.5,De=C.x.max+Ue*.5;let je;for(const Ce of m){const{index:te,label:xe}=Ce;if(Ce.x<pe){F.length===0?F.push(te):F[0]=te;continue}if(Ce.x>De){je=te;continue}const U=Math.trunc(Ce.x*A),Ee=Math.trunc(Ce.y*me);if(S?.xPixel!==U||b?.label!=null&&b.label!==Ce.label){D&&D.yPixel!==S?.yPixel&&D.yPixel!==b?.yPixel&&F.push(D.index),I&&I.yPixel!==S?.yPixel&&I.yPixel!==b?.yPixel&&F.push(I.index),b&&S?.yPixel!==b.yPixel&&F.push(b.index),F.push(te),S={xPixel:U,yPixel:Ee,index:te,label:xe},b={xPixel:U,yPixel:Ee,index:te,label:xe},D={xPixel:U,yPixel:Ee,index:te,label:xe},I={xPixel:U,yPixel:Ee,index:te,label:xe};continue}b??={xPixel:U,yPixel:Ee,index:te,label:xe},b.xPixel=U,b.yPixel=Ee,b.index=te,b.label=xe,D&&Ee<D.yPixel&&(D.yPixel=Ee,D.index=te,D.label=xe),I&&Ee>I.yPixel&&(I.yPixel=Ee,I.index=te,I.label=xe)}return D&&D.yPixel!==S?.yPixel&&D.yPixel!==b?.yPixel&&F.push(D.index),I&&I.yPixel!==S?.yPixel&&I.yPixel!==b?.yPixel&&F.push(I.index),b&&S?.yPixel!==b.yPixel&&F.push(b.index),je!=null&&F.push(je),F}function Dt(m,P){const{bounds:C,width:L,height:Z}=P,A=L/(C.x.max-C.x.min),me=Z/(C.y.max-C.y.min),F=L,S=[],b=[];for(const D of m){if(D.x>C.x.max||D.x<C.x.min)continue;const I=Math.round(D.x*A),pe=Math.round(D.y*me)*F+I;b[pe]!==!0&&(b[pe]=!0,S.push(D.index))}return S}function Ut(m,P,C){return m.showLine!==!0?Dt(P,C):Zt(P,C)}class Yt{#n=[];#t;#e;update(P){this.#n=P.datasets??this.#n,this.#t=P.datasetBounds??this.#t,this.#e=P.scales??this.#e}downsample(){const P=this.#t?.width,C=this.#t?.width,L=this.#e;let Z;if(L?.x&&L.y&&(Z={width:P??0,height:C??0,x:{min:L.x.min,max:L.x.max},y:{min:L.y.min,max:L.y.max}}),this.#t==null)return;const{bounds:A}=this.#t,me={width:0,height:0,bounds:A};return this.#n.map(F=>{if(!Z)return F;const S=Ut(F,(0,Xt.gi)(F.data),me),D=z.UID(I=>F.data[I],S).map(I=>I==null||isNaN(I.x)||isNaN(I.y)?{x:NaN,y:NaN,value:NaN}:I);return{...F,data:D}})}}var nt=n(89591);function zt(m){const[P,C]=r.useState(),[L,Z]=r.useState(),A=(0,r.useMemo)(()=>new Yt,[]),me=(0,r.useCallback)(()=>{if(L==null)return;const b=A.downsample();if(b==null)return;const D=(0,nt.zX)(b);D!=null&&L({bounds:D,data:{datasets:b}})},[L,A]),F=(0,Wt.y1)(me,100,{leading:!1,maxWait:100}),S=(0,r.useCallback)(b=>{A.update({scales:b}),F()},[A,F]);return(0,r.useEffect)(()=>{A.update({datasetBounds:P})},[P,A]),(0,r.useEffect)(()=>{A.update({datasets:m}),F()},[A,m,F]),r.useMemo(()=>({downsampler:{setView:C,register:b=>{Z(b)}},setScales:S}),[S])}var oe="../../packages/studio-base/src/components/TimeBasedChart/index.tsx";const qt=M.ZP.getLogger(oe),_t=(0,O.ZL)()(m=>({root:{position:"relative"},resetZoomButton:{position:"absolute",bottom:0,right:0,marginBottom:m.spacing(4),marginRight:m.spacing(1)},tooltip:{maxWidth:"none"},bar:{position:"absolute",top:0,bottom:0,width:1,marginLeft:-1,display:"block"},playbackBar:{backgroundColor:"#aaa"}})),en=m=>m.globalBounds,tn=m=>m.setGlobalBounds;function nn(m){const P=(0,r.useRef)(0),{currentTime:C,data:L,provider:Z,typedData:A,typedProvider:me,dataBounds:F,datasetId:S,defaultView:b,height:D,isSynced:I=!1,showXAxisLabels:Ue,type:pe,width:De,xAxes:je,xAxisIsPlaybackTime:Ce,yAxes:te}=m,[xe,U]=(0,r.useState)({x:{min:0,max:0},y:{min:0,max:0}}),[Ee,st]=(0,r.useState)({x:{min:0,max:0},y:{min:0,max:0}}),dt=r.useMemo(()=>({width:De,height:D,bounds:Ee}),[De,D,Ee]),xt=(0,r.useMemo)(()=>m.linesToHide??{},[m.linesToHide]),{downsampler:Ae,setScales:gt}=zt(r.useMemo(()=>(0,T.Z)(L?.datasets??[],o=>{const{label:i}=o;if(!((i==null||xt[i])??!1))return o}),[L,xt])),Je=(0,nt.ZP)(dt,nt.zX,nt.f0,L,Z??Ae),Ye=(0,nt.ZP)(dt,nt.kl,nt.rx,A,me);r.useEffect(()=>{U(o=>Je!=null&&z.fS0(o,Je.bounds)?Je.bounds:Ye!=null&&z.fS0(o,Ye.bounds)?Ye.bounds:o)},[Je,Ye]);const He=F??xe,Qe=(0,V.Z)(),{classes:ze,cx:bt}=_t(),be=(0,r.useMemo)(()=>(0,w.Z)(),[]),$e=(0,k.Z)(),ot=(0,r.useRef)(null),[it,vt]=(0,r.useState)(!1),ct=(0,pt.An)((0,r.useCallback)(o=>o.pauseFrame,[])),x=(0,r.useRef)(),B=(0,r.useRef)(),ae=(0,r.useCallback)(()=>{x.current&&x.current(),x.current=ct("TimeBasedChart")},[ct]),Y=(0,r.useCallback)(()=>{const o=x.current;x.current=void 0,B.current=o,o&&(P.current=requestAnimationFrame(()=>{o(),B.current=void 0}))},[]);(0,r.useEffect)(()=>()=>{Y(),cancelAnimationFrame(P.current),B.current?.()},[ct,Y]);const Me=(0,Xe.oA)(en),Ve=(0,Xe.oA)(tn),Re=(0,r.useMemo)(()=>I?Me:void 0,[Me,I]),le=(0,r.useRef)(void 0),we=()=>{vt(!1),Ve(void 0)},[ge,qe]=(0,r.useState)(!1),[Mt,rt]=(0,r.useState)(!1),Tt=(0,r.useMemo)(()=>ge?"y":Mt?"xy":"x",[Mt,ge]),ft=r.useMemo(()=>({v:()=>{qe(!0)},b:()=>{rt(!0)}}),[qe,rt]),Nt=r.useMemo(()=>({v:()=>{qe(!1)},b:()=>{rt(!1)}}),[qe,rt]),_e=(0,r.useRef)(void 0),[mt,lt]=(0,r.useState)(),Pt=(0,r.useCallback)(o=>{if(o.length===0||_e.current==null){lt(void 0);return}const i=[];for(const E of o){if(!E.data)continue;const v=E.data;v.value!=null&&i.push({item:{datasetIndex:E.datasetIndex,value:v.value,constantName:v.constantName},element:E})}if(i.length===0){lt(void 0);return}const l=i[0].element,g=ot.current?.getBoundingClientRect();g&&lt({x:g.left+l.view.x,y:g.top+_e.current,data:i.map(E=>E.item)})},[]),Rt=(0,Xe.D4)(),wt=(0,Xe.Js)(),ht=(0,r.useCallback)(()=>{wt(be)},[wt,be]),$t=(0,r.useCallback)(()=>{lt(void 0),ht()},[ht]),It=(0,r.useCallback)(o=>{const i=le.current?.x;if(!i||!ot.current){lt(void 0),ht();return}const l=ot.current.getBoundingClientRect();_e.current=o.pageY-l.top;const g=o.pageX-l.left,E=i.pixelMax-i.pixelMin,h=(i.max-i.min)/E*(g-i.pixelMin)+i.min;if(!(h>=i.min&&h<=i.max)||isNaN(h)){lt(void 0),ht();return}Rt({componentId:be,value:h,type:Ce?"PLAYBACK_SECONDS":"OTHER"})},[Rt,be,Ce,ht]),Bt=(0,r.useMemo)(()=>({decimation:{enabled:!0,algorithm:"lttb"},legend:{display:!1},datalabels:{display:!1},tooltip:{enabled:!1},zoom:{zoom:{enabled:m.zoom,mode:Tt,sensitivity:3,speed:.1},pan:{mode:"xy",enabled:!0,speed:20,threshold:10}},...m.plugins,annotation:{annotations:m.annotations}}),[m.annotations,m.plugins,m.zoom,Tt]),{min:Lt,max:At}=(0,r.useMemo)(()=>{if(!Re&&it)return{min:void 0,max:void 0};if(Re?.sourceId===be&&Re.userInteraction)return{min:void 0,max:void 0};let o,i;return b?.type==="fixed"?(o=b.minXValue,i=b.maxXValue):b?.type==="following"?(i=C??0,o=i-b.width):(o=He.x.min,i=He.x.max),Re?.userInteraction===!0&&(o=Re.min,i=Re.max),o===i?{min:void 0,max:void 0}:{min:o,max:i}},[be,C,He.x.max,He.x.min,b,Re,it]),Vt=(0,r.useMemo)(()=>{const o={font:{family:Ze.R.MONOSPACE,size:10},color:Qe.palette.text.secondary,maxRotation:0};return{grid:{color:Qe.palette.divider},...je,min:Lt,max:At,ticks:{display:Ue,...o,...je?.ticks}}},[Qe.palette,Ue,je,Lt,At]),Ot=(0,r.useMemo)(()=>{const o={font:{family:Ze.R.MONOSPACE,size:10},color:Qe.palette.text.secondary,padding:0};let{min:i,max:l}=te;return l==null&&i!=null&&(l=He.y.max),i==null&&l!=null&&(i=He.y.min),{type:"linear",...te,min:i,max:l,ticks:{...o,...te.ticks}}},[He.y,te,Qe.palette]),Ht=(0,r.useMemo)(()=>({maintainAspectRatio:!1,animation:!1,elements:{line:{tension:0}},interaction:{intersect:!1,mode:"x"},scales:{x:Vt,y:Ot},plugins:Bt}),[Bt,Vt,Ot]),Gt=(0,r.useCallback)(o=>{$e()&&Pt(o)},[$e,Pt]),Kt=(0,r.useCallback)((o,{userInteraction:i})=>{if($e()&&!(o.x!=null&&(0,J.isEqual)(o.x,le.current?.x)&&!i)){if(i&&vt(!0),le.current=o,o.x!=null&&o.y!=null){const{x:l,y:g}=o;st({x:l,y:g})}if(gt(o),!(!I||!o.x)){if(i){Ve({min:o.x.min,max:o.x.max,sourceId:be,userInteraction:!0});return}Ve(l=>{const g=o.x;if(!g)return l;if(!l)return{min:g.min,max:g.max,sourceId:be,userInteraction:!1};if(l.userInteraction)return l;const E=Math.min(g.min,l.min),v=Math.max(g.max,l.max);return l.max===v&&l.min===E?l:{min:E,max:v,sourceId:be,userInteraction:!1}})}}},[be,$e,I,Ve,gt]);(0,r.useEffect)(()=>{qt.debug(`<TimeBasedChart> (datasetId=${S})`)},[S]);const at=Je?.data.datasets??Ye?.data.datasets,e=at?.length??0,t=(0,r.useMemo)(()=>at==null?{}:Object.fromEntries(at.map((o,i)=>[i,o.borderColor?.toString()])),[at]),a=(0,r.useMemo)(()=>at==null?{}:Object.fromEntries(at.map((o,i)=>[i,o.label])),[at]),s=(0,r.useMemo)(()=>mt?(0,d.jsx)(Ft,{content:mt.data,multiDataset:e>1,colorsByDatasetIndex:t,labelsByDatasetIndex:a}):void 0,[mt,t,e,a]),u=(0,r.useMemo)(()=>I?Re?.userInteraction===!0:it,[Re?.userInteraction,it,I]),c={type:pe,width:De,height:D,isBoundsReset:Me==null,options:Ht,data:Je?.data,typedData:Ye?.data,onClick:m.onClick,onScalesUpdate:Kt,onStartRender:ae,onFinishRender:Y,onHover:Gt};return De===0||D===0?(0,d.jsx)(d.Fragment,{}):(0,d.jsx)(We.Z,{direction:"row",fullWidth:!0,children:(0,d.jsx)(f.Z,{arrow:!1,classes:{tooltip:ze.tooltip},open:mt!=null,placement:"right",title:s??(0,d.jsx)(d.Fragment,{}),disableInteractive:!0,followCursor:!0,TransitionComponent:W.Z,TransitionProps:{timeout:0},children:(0,d.jsx)(We.Z,{direction:"row",style:{width:De},children:(0,d.jsxs)("div",{className:ze.root,onDoubleClick:we,children:[(0,d.jsx)(yt.Z,{componentId:be,isPlaybackSeconds:Ce,scales:le.current,children:(0,d.jsx)("div",{className:ze.bar,style:{backgroundColor:Ce?Qe.palette.warning.main:Qe.palette.info.main}})}),Ce&&(0,d.jsx)(kt.G,{scales:le.current,xValue:C,children:(0,d.jsx)("div",{className:bt(ze.bar,ze.playbackBar)})}),(0,d.jsx)("div",{ref:ot,onMouseMove:It,onMouseOut:$t,children:(0,d.jsx)(ke,{...c})}),u&&(0,d.jsx)(j.Z,{className:ze.resetZoomButton,variant:"contained",color:"inherit",title:"(shortcut: double-click)",onClick:we,children:"Reset view"}),(0,d.jsx)(Ne.Z,{global:!0,keyDownHandlers:ft,keyUpHandlers:Nt})]})})})})}},89591:(et,he,n)=>{n.d(he,{ZP:()=>w,f0:()=>k,kl:()=>J,rx:()=>O,zX:()=>j});var d=n(96389),V=n(2784),f=n(10742),W=n(2784);function j(T){let M,Q,K,$;for(const re of T)for(const p of(0,f.gi)(re.data))isNaN(p.x)||(M=Math.min(M??p.x,p.x),Q=Math.max(Q??p.x,p.x)),isNaN(p.x)||(K=Math.min(K??p.y,p.y),$=Math.max($??p.y,p.y));if(!(M==null||Q==null||K==null||$==null))return{x:{min:M,max:Q},y:{min:K,max:$}}}function J(T){let M,Q,K,$;for(const re of T)for(const p of(0,f.tp)(re.data)){const{x:N,y:q}=p;isNaN(N)||(M=Math.min(M??N,N),Q=Math.max(Q??N,N)),isNaN(q)||(K=Math.min(K??q,q),$=Math.max($??q,q))}if(!(M==null||Q==null||K==null||$==null))return{x:{min:M,max:Q},y:{min:K,max:$}}}function z(T,M){return{x:{min:d.VV$(T.x.min,M.x.min),max:d.Fp7(T.x.max,M.x.max)},y:{min:d.VV$(T.y.min,M.y.min),max:d.Fp7(T.y.max,M.y.max)}}}const r=T=>(M,Q)=>({bounds:z(M.bounds,Q.bounds),data:{datasets:d.UID(([K,$])=>({...K,data:T(K.data,$.data)}),d.$Re(M.data.datasets,Q.data.datasets))}}),k=r((T,M)=>[...T,...M]),O=r((T,M)=>T.concat(M));function w(T,M,Q,K,$){const[re,p]=W.useState(),N=W.useCallback(X=>{p({full:X,partial:void 0})},[]),q=(0,V.useCallback)(X=>{p(ee=>{if(ee==null)return{full:void 0,partial:X};const{partial:ue}=ee;return{...ee,partial:ue!=null?Q(ue,X):X}})},[Q]);return(0,V.useEffect)(()=>{$?.register(N,q)},[$,q,N]),(0,V.useEffect)(()=>{$?.setView(T)},[$,T]),(0,V.useMemo)(()=>{if(K==null){if(re==null)return;const{full:ee,partial:ue}=re;return ue==null?ee:ee==null?void 0:Q(ee,ue)}const X=M(K.datasets);if(X!=null)return{bounds:X,data:K}},[K,re,M,Q])}},62421:(et,he,n)=>{n.r(he),n.d(he,{default:()=>at,openSiblingPlotPanel:()=>Lt,plotableRosTypes:()=>We});var d=n(52322),V=n(76635),f=n(2784),W=n(44668),j=n(85026),J=n(75017),z=n(82044),r=n(78324),k=n(76479),O=n(93812),w=n(40301),T=n(47746),M=n(62515),Q=n(8220),K=n(24243),$=n(68071);function re(e){return!isNaN(Number.parseFloat(e.value))}function p(e,t){const a=(0,$.wi)(e.color,t);return{type:"line",display:!0,drawTime:"beforeDatasetsDraw",scaleID:"y",label:{content:e.value,width:"100%",height:"100%"},borderColor:a,borderDash:[5,5],borderWidth:1,value:Number.parseFloat(e.value)}}function N(e){return(0,Q.Z)(e,(t,a)=>{if(t.enabled){if(re(t))return p(t,a)}else return})}function q(e){const t=(0,T.Z)(),{currentTime:a,datasetBounds:s,provider:u,defaultView:c,isSynced:o,maxYValue:i,minYValue:l,onClick:g,paths:E,showXAxisLabels:v,showYAxisLabels:h,xAxisVal:y}=e,ie=(0,f.useMemo)(()=>N(E),[E]),ne=(0,f.useMemo)(()=>{const Be=isNaN(l)?void 0:l,se=isNaN(i)?void 0:i;return{min:Be,max:se,ticks:{display:h,precision:3},grid:{color:t.palette.divider}}},[i,l,h,t]),{width:G,height:Ge,ref:Ie}=(0,M.NB)({refreshRate:0,refreshMode:"debounce"});return(0,d.jsx)("div",{style:{width:"100%",flexGrow:1,overflow:"hidden",padding:"2px"},ref:Ie,children:(0,d.jsx)(K.Z,{isSynced:o,zoom:!0,width:G??0,height:Ge??0,typedProvider:u,dataBounds:s,annotations:ie,type:"scatter",yAxes:ne,xAxisIsPlaybackTime:y==="timestamp",showXAxisLabels:v,currentTime:a,defaultView:c,onClick:g},y)})}var X=n(2043),ee=n(75988),ue=n(85108),de=n(87037),ve=n(1547),fe=n(72970),Se=n(3896),Fe=n(52498),Pe=n(41518),ye=n(68434),tt=n(20379),H=n(91004),_=n(10742),ce=n(98043),Le=n(86495),ke=n(26775);function Ne(e){if(e!=="")return e??void 0}function pt(e,t){return Ne(e.label)??Ne(e.value)??`Series ${t+1}`}const We=["bool","int8","uint8","int16","uint16","int32","uint32","int64","uint64","float32","float64","time","duration","string","json"];var Xe=n(77075);const Ze=28,yt=(0,fe.ZL)()((e,t,a)=>({root:{display:"contents",cursor:"pointer","&:hover":{"& > *:last-child":{opacity:1},"& > *":{backgroundColor:e.palette.background.paper,backgroundImage:`linear-gradient(${["0deg",e.palette.action.focus,e.palette.action.focus].join(" ,")})`}}},showPlotValue:{[`.${a.plotName}`]:{gridColumn:"span 1",padding:e.spacing(0,1.5,0,.5)}},listIcon:{display:"flex",alignItems:"center",position:"sticky",height:Ze,left:0},checkbox:{fontSize:"1em",padding:e.spacing(.975),borderRadius:0,"svg:not(.MuiSvgIcon-root)":{fontSize:"1em"}},disabledPathLabel:{opacity:.5},plotName:{display:"flex",alignItems:"center",height:Ze,padding:e.spacing(0,2.5,0,.5),gridColumn:"span 2",fontFeatureSettings:`${Xe.R.SANS_SERIF_FEATURE_SETTINGS}, "zero"`,".MuiTypography-root":{whiteSpace:"nowrap"}},plotValue:{display:"flex",alignItems:"center",height:Ze,padding:e.spacing(.25,1,.25,.25)},errorIcon:{color:e.palette.error.main}}));function jt({currentTime:e,datasets:t,hasMismatchedDataLength:a,index:s,onClickPath:u,path:c,paths:o,savePaths:i,showPlotValuesInLegend:l}){const{openPanelSettings:g}=(0,ke.W)(),{id:E}=(0,z.R)(),{setSelectedPanelIds:v}=(0,ce.iy)(),{classes:h,cx:y}=yt(),ie=(0,f.useMemo)(()=>l?t[s]?.data??[]:[],[t,s,l]),[ne]=(0,f.useState)(()=>(0,H.Z)()),G=(0,Le.hx)({componentId:ne,disableUpdates:!l,isPlaybackSeconds:!0}),Ge=(0,f.useMemo)(()=>{if(!l)return;const Ie=G?.value??e;let Be;for(const se of(0,_.tp)(ie)){if(Ie==null||se.x>Ie)break;Be=se.y}return Be},[l,G?.value,e,ie]);return(0,d.jsxs)("div",{className:y(h.root,{[h.showPlotValue]:l}),onClick:()=>{v([E]),g(),u()},children:[(0,d.jsx)("div",{className:h.listIcon,children:(0,d.jsx)(Pe.Z,{className:h.checkbox,checked:c.enabled,size:"small",title:"Toggle visibility",style:{color:(0,$.wi)(c.color,s)},icon:(0,d.jsx)(Se.uXJ,{}),checkedIcon:(0,d.jsx)(Se.In2,{}),onClick:Ie=>{Ie.stopPropagation()},onChange:()=>{const Ie=o.slice(),Be=Ie[s];Be&&(Ie[s]={...Be,enabled:!Be.enabled}),i(Ie)}})}),(0,d.jsxs)("div",{className:h.plotName,style:{gridColumn:l?void 0:"span 2"},children:[(0,d.jsx)(ye.Z,{noWrap:l,flex:"auto",variant:"body2",className:y({[h.disabledPathLabel]:!c.enabled}),children:pt(c,s)}),a&&(0,d.jsx)(tt.Z,{placement:"top",title:"Mismatch in the number of elements in x-axis and y-axis messages",children:(0,d.jsx)(Fe.fXk,{className:h.errorIcon})})]}),l&&(0,d.jsx)("div",{className:h.plotValue,children:(0,d.jsx)(ye.Z,{variant:"body2",align:"right",color:G?.value!=null?"warning.main":"text.secondary",children:Ge??""})})]})}var Et=n(2784);const St=25,Ft=800,kt=(0,fe.ZL)()(({palette:e,shadows:t,shape:a,spacing:s},u,c)=>({root:{display:"flex",overflow:"hidden"},rootFloating:{padding:s(.75),pointerEvents:"none",gap:s(.75),position:"absolute",top:s(4.5),left:s(4),zIndex:1e3,backgroundColor:"transparent",alignItems:"flex-start",height:`calc(100% - ${k.B}px - ${s(5.25)})`,overflow:"hidden",[`.${c.container}`]:{pointerEvents:"auto",borderRadius:a.borderRadius,backgroundImage:`linear-gradient(${["0deg",(0,ve.Z)(e.background.default).setAlpha(.2).toHex8String(),(0,ve.Z)(e.background.default).setAlpha(.2).toHex8String()].join(" ,")})`,backgroundColor:(0,ve.Z)(e.background.paper).setAlpha(.8).toHex8String(),backdropFilter:"blur(3px)",maxWidth:`calc(100% - ${s(1)})`,boxShadow:t[3]}},rootLeft:{alignItems:"flex-start",maxWidth:"80%",[`.${c.toggleButton}`]:{padding:s(.25),height:"100%",borderRadius:0,borderTop:"none",borderBottom:"none"},[`.${c.container}`]:{overflow:"auto",height:"100%",alignContent:"flex-start"}},rootTop:{flexDirection:"column",maxHeight:"80%",[`.${c.toggleButton}`]:{padding:s(.25),borderRadius:0,borderRight:"none",borderLeft:"none"}},container:{alignItems:"center",overflow:"auto",display:"grid",gridTemplateColumns:"auto minmax(0, 1fr) auto"},dragHandle:{userSelect:"none",border:`0px solid ${e.action.hover}`,"&:hover":{borderColor:e.action.selected}},toggleButton:{fontSize:"1rem",padding:s(.75),"svg:not(.MuiSvgIcon-root)":{fontSize:"1em"}},toggleButtonFloating:{backdropFilter:"blur(3px)",pointerEvents:"auto",backgroundImage:`linear-gradient(${["0deg",(0,ve.Z)(e.background.default).setAlpha(.2).toHex8String(),(0,ve.Z)(e.background.default).setAlpha(.2).toHex8String()].join(" ,")})`,backgroundColor:(0,ve.Z)(e.background.paper).setAlpha(.8).toHex8String(),boxShadow:t[3],"&:hover":{backgroundColor:e.background.paper,backgroundImage:`linear-gradient(0deg, ${e.action.hover}, ${e.action.hover})`}}}));function Wt(e){const{currentTime:t,datasets:a,legendDisplay:s,onClickPath:u,paths:c,pathsWithMismatchedDataLengths:o,saveConfig:i,showLegend:l,showPlotValuesInLegend:g,sidebarDimension:E}=e,{classes:v,cx:h}=kt(),y=(0,f.useRef)({x:0,y:0,sidebarDimension:0}),ie=(0,f.useCallback)(()=>{i({showLegend:!l})},[l,i]),ne=(0,f.useMemo)(()=>{switch(s){case"floating":return l?(0,d.jsx)(X.iRs,{}):(0,d.jsx)(ee.FEU,{});case"left":return l?(0,d.jsx)(ue.YIM,{}):(0,d.jsx)(ue.qmn,{});case"top":return l?(0,d.jsx)(ue.XRD,{}):(0,d.jsx)(ue._4M,{})}},[l,s]),G=(0,f.useCallback)(se=>{if(s==="floating"||se.buttons!==1)return;const Ke=s==="left"?se.clientX-y.current.x:se.clientY-y.current.y,Jt=(0,V.clamp)(y.current.sidebarDimension+Ke,St,Ft);i({sidebarDimension:Jt})},[s,i]),Ge=(0,f.useCallback)(se=>{se.currentTarget.setPointerCapture(se.pointerId),y.current={x:se.clientX,y:se.clientY,sidebarDimension:E}},[E]),Ie=(0,f.useCallback)(se=>{se.currentTarget.releasePointerCapture(se.pointerId)},[]),Be=(0,f.useCallback)(se=>{i({paths:se})},[i]);return(0,d.jsxs)("div",{className:h(v.root,{[v.rootFloating]:s==="floating",[v.rootLeft]:s==="left",[v.rootTop]:s==="top"}),children:[(0,d.jsx)(de.Z,{onClick:ie,className:h(v.toggleButton,{[v.toggleButtonFloating]:s==="floating"}),children:ne}),l&&(0,d.jsx)(O.Z,{flexGrow:1,gap:.5,overflow:"auto",fullHeight:s!=="top",style:{height:s==="top"?Math.round(E):void 0,width:s==="left"?Math.round(E):void 0},children:(0,d.jsx)(O.Z,{flex:"auto",fullWidth:!0,fullHeight:s!=="top",overflow:s==="floating"?"auto":void 0,children:(0,d.jsx)("div",{className:v.container,children:c.map((se,Ke)=>(0,d.jsx)(jt,{currentTime:t,datasets:a,hasMismatchedDataLength:o.includes(se.value),index:Ke,onClickPath:()=>{u(Ke)},path:se,paths:c,savePaths:Be,showPlotValuesInLegend:g},Ke))})})}),s!=="floating"&&(0,d.jsx)("div",{className:v.dragHandle,onPointerDown:Ge,onPointerMove:G,onPointerUp:Ie,style:s==="left"?{marginLeft:-6,cursor:"ew-resize",borderRightWidth:2,height:"100%",width:4}:{marginTop:-6,cursor:"ns-resize",borderBottomWidth:2,width:"100%",height:4}})]})}const Xt=Et.memo(Wt);var Zt=n(55433),Dt=n(27999);function Ut(e,t){const{x:a,value:s,receiveTime:u,headerStamp:c}=t,o=(0,Dt.Eo)(u),i=c?(0,Dt.Eo)(c):"";return[a,o,i,e,s]}const Yt=e=>({timestamp:"elapsed time",index:"index",custom:"x value",currentCustom:"x value"})[e];function nt(e,t){const a=[Yt(t),"receive time","header.stamp","topic","value"],s=[];s.push(a);for(const u of e)for(const c of(0,_.tp)(u.data))s.push(Ut(u.label,c));return s.join(`
`)}function zt(e,t){const a=nt(e,t),s=new Blob([a],{type:"text/csv;charset=utf-8;"});(0,Zt.G)([{blob:s,fileName:"plot_data.csv"}])}var oe=n(96389),qt=n(36922),_t=n(89591),en=n(59635);const tn={abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,ceil:Math.ceil,cos:Math.cos,log:Math.log,log1p:Math.log1p,log2:Math.log2,log10:Math.log10,round:Math.round,sign:Math.sign,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,trunc:Math.trunc,negative:e=>-e,deg2rad:e=>e*(Math.PI/180),rad2deg:e=>e*(180/Math.PI)};function nn(e,t){let{y:a}=e;const s=Number(a);return isNaN(s)||(a=t(s)),{...e,y:a,value:a}}const m=Object.freeze({sec:0,nsec:0}),P=e=>e==="custom"||e==="currentCustom";function C(e,t,a,s,u,c){if(P(e)&&c){if(isReferenceLinePlotPathType(c))return Number.parseFloat(c.value);if(s){if(!u)return NaN;const o=u.queriedData[a]?.value;return isTime(o)?toSec(o):typeof o=="bigint"?o:Number(o)}}return e==="timestamp"?t:a}function L(e){const t=[],a=[],s=[],u=[],c=new Float32Array(e.length),o=new Float32Array(e.length);for(let i=0;i<e.length;i++){const l=e[i];l!=null&&(t.push(l.receiveTime),l.headerStamp!=null&&a.push(l.headerStamp),l.constantName!=null&&s.push(l.constantName),u.push(l.value),c[i]=l.x,o[i]=l.y)}return{receiveTime:t,...s.length>0?{constantName:s}:{},...a.length>0?{headerStamp:a}:{},value:u,x:c,y:o}}function Z(e,t){return e.concat(...t)}function A(e,t,a,s,u,c,o){const i=s==="headerStamp"?e.headerStamp:e.receiveTime;if(!i)return{data:[],hasMismatchedData:!1};const l=[],g=toSec(subtract(i,a));for(const v of e.queriedData.entries()){const[h,{value:y,constantName:ie}]=v;if(typeof y=="number"||typeof y=="boolean"||typeof y=="string"||typeof y=="bigint"){const ne=typeof y=="bigint"?y:Number(y);if(typeof ne=="bigint"||!isNaN(ne)){const G=C(u,g,h,o,t,c),Ge=ne;l.push({x:Number(G),y:Number(Ge),value:y,constantName:ie,receiveTime:e.receiveTime,headerStamp:e.headerStamp})}}else if(isTime(y)){const ne=C(u,g,h,o,t,c),G=toSec(y);l.push({x:Number(ne),y:G,receiveTime:e.receiveTime,headerStamp:e.headerStamp,value:`${format(y)} (${formatTimeRaw(y)})`,constantName:ie})}}const E=P(u)&&(!t||e.queriedData.length!==t.queriedData.length);return{data:l,hasMismatchedData:E}}function me({path:e,yAxisRanges:t,index:a,startTime:s,xAxisVal:u,xAxisRanges:c,xAxisPath:o,invertedTheme:i=!1}){let l=e.showLine!==!1,g=P(u)&&c!=null&&t.length!==c.length;const E=[];let v;for(const ne of Object.keys(mathFunctions))if(e.value.endsWith(`.@${ne}`)&&(v=mathFunctions[ne],v))break;const h=[];for(const[ne,G]of t.entries()){const Ge=c?.[ne],{data:Ie,hasMismatchedData:Be}=A(G,Ge,s,e.timestampMethod,u,o,c);for(const se of Ie)v?h.push(applyToDatum(se,v)):h.push(se);g=g||Be,G.queriedData.length>1&&u!=="index"&&(l=!1)}for(const ne of h)E.push(ne);const y=getLineColor(e.color,a);return{dataset:{borderColor:y,label:e.label!=null&&e.label!==""?e.label:e.value,showLine:l,fill:!1,borderWidth:1,pointRadius:1,pointHoverRadius:3,pointBackgroundColor:i?lightColor(y):darkColor(y),pointBorderColor:"transparent",data:[L(E)]},hasMismatchedData:g}}function F(e,t){if(e.length===0||t.length===0)return;const a=[],s=[],u=[],c=[],o=new Float32Array(t.length),i=new Float32Array(t.length);for(let l=0;l<t.length;l++){const g=(0,_.Hu)(e,t[l]??-1);if(g==null)return;const[E,v]=g,h=e[E];if(h==null)return;a.push(h.receiveTime[v]??m),h.headerStamp!=null&&s.push(h.headerStamp[v]??m),h.constantName!=null&&u.push(h.constantName[v]??""),c.push(h.value[v]);const y=h.x[v],ie=h.y[v];if(y==null||ie==null)return;o[l]=y,i[l]=ie}return[{receiveTime:a,...u.length>0?{constantName:u}:{},...s.length>0?{headerStamp:s}:{},value:c,x:o,y:i}]}function S(e,t,a){let s=R.clamp(0,e,t<0?e+t:t),u=a??e;if(u=R.clamp(0,e,u<0?e+u:u),s>u){const c=s;s=u,u=c}return[s,u]}function b(e,t,a){const[s,u]=S(e.x.length,t,a),c=u-s,o=[],i=[],l=[],g=[],E=new Float32Array(c),v=new Float32Array(c);for(let h=s;h<u;h++){o.push(e.receiveTime[h]??m),e.headerStamp!=null&&i.push(e.headerStamp[h]??m),e.constantName!=null&&l.push(e.constantName[h]??""),g.push(e.value[h]);const y=e.x[h],ie=e.y[h];y==null||ie==null||(E[h]=y,v[h]=ie)}return{receiveTime:o,headerStamp:i.length>0?i:void 0,constantName:l.length>0?l:void 0,value:g,x:E,y:v}}function D(e,t,a){const s=getTypedLength(e),[u,c]=S(s,t,a);if(u===c)return[];const o=findIndices(e,u),i=findIndices(e,c);if(o==null||i==null)return[];const[l,g]=o,[E,v]=i;if(l===E){const ne=e[l];return ne==null?[]:[b(ne,g,v)]}const h=e[l],y=e[E];if(h==null||y==null)return[];const ie=e.slice(l+1,E);return[b(h,g),...ie,b(y,0,v)]}function I(e){const t=e.at(0)?.x.at(0),a=e.at(-1)?.x.at(-1);if(!(t==null||a==null))return[t,a]}function Ue(e,t){const a=I(e)?.[1]??Number.MIN_SAFE_INTEGER;let s=-1;for(const c of iterateTyped(t))if(c.x>a){s=c.index;break}if(s===-1)return e;const u=D(t,s);return u.length===0?e:e.concat(L([{x:NaN,receiveTime:m,y:NaN}]),u)}function pe(e){const t=[];let a=0,s=0;for(const u of(0,_.tp)(e)){if(u.index===0){a=u.x,s=u.y;continue}const c=u.x-a,o=(u.y-s)/c;t.push({...u,y:o,value:o}),a=u.x,s=u.y}return[L(t)]}function De(){return{x:{min:Number.MAX_SAFE_INTEGER,max:Number.MIN_SAFE_INTEGER},y:{min:Number.MAX_SAFE_INTEGER,max:Number.MIN_SAFE_INTEGER}}}function je(e,t){return{x:{min:Math.min(e.x.min,t.x.min),max:Math.max(e.x.max,t.x.max)},y:{min:Math.min(e.y.min,t.y.min),max:Math.max(e.y.max,t.y.max)}}}const Ce=Object.freeze({receiveTime:[],value:[],x:new Float32Array(0),y:new Float32Array(0)}),te=Object.freeze({bounds:De(),datasets:new Map,pathsWithMismatchedDataLengths:[]});function xe(e){const t={};let a=Number.MAX_SAFE_INTEGER,s=Number.MIN_SAFE_INTEGER;for(const[u,c]of e.datasets){const o=t[u.value]={start:Number.MAX_SAFE_INTEGER,end:Number.MIN_SAFE_INTEGER},{data:i}=c,l=resolveTypedIndices(i,[0,getTypedLength(i)-1])?.[0];o.start=Math.min(o.start,l?.x[0]??Number.MAX_SAFE_INTEGER),o.end=Math.max(o.end,l?.x[l.x.length-1]??Number.MIN_SAFE_INTEGER),a=Math.min(a,o.start),s=Math.max(s,o.end)}return{all:{start:a,end:s},byPath:t}}function U(e,t){const a=new Map;for(const[s,u]of t.entries())a.set(s,e(u,s));return a}function Ee(e,t){return e===te?t:t===te?e:{...e,bounds:unionBounds(e.bounds,t.bounds),datasets:maps.merge(e.datasets,t.datasets,(a,s)=>({...a,data:concatTyped(a.data,s.data)}))}}function st(e,t){return e===te?t:t===te?e:{...e,bounds:unionBounds(e.bounds,t.bounds),datasets:maps.merge(e.datasets,t.datasets,(a,s)=>({...a,data:mergeTyped(a.data,s.data)}))}}function dt(e,t){const a=xe(e).all,s=xe(t).all,u=a.start-s.start;return u!==0?u:a.end-s.end}function xt(e){return e.slice().sort(dt).reduce((s,u)=>isEmpty(s)?u:st(s,u),te)}function Ae(e,t){return oe.tSV(a=>a==null?[]:[a.value],[t,...e])}function gt(e){const{paths:t,startTime:a,xAxisVal:s,xAxisPath:u,xAxisData:c,invertedTheme:o}=e,i=makeInvertedBounds(),l=[],g=new Map;for(const[E,[v,h]]of t.entries()){const y=c,ie=h??[];if(v.enabled){if(!isReferenceLinePlotPathType(v)){const ne=getDatasetsFromMessagePlotPath({path:v,yAxisRanges:ie,index:E,startTime:a,xAxisVal:s,xAxisRanges:y,xAxisPath:u,invertedTheme:o});ne.hasMismatchedData&&l.push(v.value);const G=getTypedBounds([ne.dataset]);if(G==null)continue;i.x.min=Math.min(i.x.min,G.x.min),i.x.max=Math.max(i.x.max,G.x.max),i.y.min=Math.min(i.y.min,G.y.min),i.y.max=Math.max(i.y.max,G.y.max),g.set(v,ne.dataset)}}else continue}return{bounds:i,datasets:g,pathsWithMismatchedDataLengths:l}}function Je(e,t,a){const{structures:s,enumValues:u}=e,c=R.indexBy(o=>o.name,e.topics);return R.chain(o=>{const i=getMessagePathDataItems(o,a,c,s,u);return i==null?[]:[{queriedData:i,receiveTime:o.receiveTime,headerStamp:getTimestampForMessage(o.message)}]},t)}const Ye=e=>t=>({...t,datasets:U(e,t.datasets)}),He=Ye((e,t)=>t.value.endsWith(".@derivative")?{...e,data:pe(e.data)}:e),Qe=Ye((e,t)=>{if(t.timestampMethod!=="headerStamp")return e;const a=[];for(const u of(0,_.tp)(e.data))a.push([u.index,u.x]);a.sort(([,u],[,c])=>u-c);const s=F(e.data,oe.UID(([u])=>u,a));return s==null?e:{...e,data:s}});var ze=n(67067),bt=n(5817),be=n.n(bt),$e=n(68588),ot=n(39367);const it=be()((e,t,a)=>({actions:[{type:"action",id:"delete-series",label:a("deleteSeries"),display:"inline",icon:"Clear"}],label:pt(e,t),visible:e.enabled,fields:{value:{label:a("messagePath"),input:"messagepath",value:e.value,validTypes:We,supportsMathModifiers:!0},label:{input:"string",label:a("label"),value:e.label},color:{input:"rgb",label:a("color"),value:e.color??$.Hm[t%$.Hm.length]},showLine:{label:a("showLine"),input:"boolean",value:e.showLine!==!1},timestampMethod:{input:"select",label:a("timestamp"),value:e.timestampMethod,options:[{label:a("receiveTime"),value:"receiveTime"},{label:a("headerStamp"),value:"headerStamp"}]}}})),vt=be()((e,t)=>{const a=Object.fromEntries(e.map((s,u)=>[`${u}`,it(s,u,t)]));return{label:t("series"),children:a,actions:[{type:"action",id:"add-series",label:t("addSeries"),display:"inline",icon:"Addchart"}]}});function ct(e,t){const a=(0,V.isNumber)(e.minYValue)&&(0,V.isNumber)(e.maxYValue)&&e.minYValue>=e.maxYValue?t("maxYError"):void 0,s=(0,V.isNumber)(e.minXValue)&&(0,V.isNumber)(e.maxXValue)&&e.minXValue>=e.maxXValue?t("maxXError"):void 0;return{general:{label:t("general"),fields:{isSynced:{label:t("syncWithOtherPlots"),input:"boolean",value:e.isSynced}}},legend:{label:t("legend"),fields:{legendDisplay:{label:t("position"),input:"select",value:e.legendDisplay,options:[{value:"floating",label:t("floating")},{value:"left",label:t("left")},{value:"top",label:t("top")},{value:"none",label:t("hidden")}]},showPlotValuesInLegend:{label:t("showValues"),input:"boolean",value:e.showPlotValuesInLegend}}},yAxis:{label:t("yAxis"),defaultExpansionState:"collapsed",fields:{showYAxisLabels:{label:t("showLabels"),input:"boolean",value:e.showYAxisLabels},minYValue:{label:t("min"),input:"number",value:e.minYValue!=null?Number(e.minYValue):void 0,placeholder:"auto"},maxYValue:{label:t("max"),input:"number",error:a,value:e.maxYValue!=null?Number(e.maxYValue):void 0,placeholder:"auto"}}},xAxis:{label:t("xAxis"),defaultExpansionState:"collapsed",fields:{xAxisVal:{label:t("value"),input:"select",value:e.xAxisVal,options:[{label:t("timestamp"),value:"timestamp"},{label:t("index"),value:"index"},{label:t("currentPath"),value:"currentCustom"},{label:t("accumulatedPath"),value:"custom"}]},xAxisPath:e.xAxisVal==="currentCustom"||e.xAxisVal==="custom"?{label:t("messagePath"),input:"messagepath",value:e.xAxisPath?.value??"",validTypes:We}:void 0,showXAxisLabels:{label:t("showLabels"),input:"boolean",value:e.showXAxisLabels},minXValue:{label:t("min"),input:"number",value:e.minXValue!=null?Number(e.minXValue):void 0,placeholder:"auto"},maxXValue:{label:t("max"),input:"number",error:s,value:e.maxXValue!=null?Number(e.maxXValue):void 0,placeholder:"auto"},followingViewWidth:{label:t("secondsRange"),input:"number",placeholder:"auto",value:e.followingViewWidth}}},paths:vt(e.paths,t)}}function x(e,t,a){const s=(0,ot.W0)(),{t:u}=(0,$e.$G)("plot"),c=(0,f.useCallback)(o=>{if(o.action==="update"){const{path:i,value:l}=o.payload;t((0,ze.Uy)(g=>{i[0]==="paths"?i[2]==="visible"?(0,V.set)(g,[...i.slice(0,2),"enabled"],l):(0,V.set)(g,i,l):(0,V.isEqual)(i,["legend","legendDisplay"])?(g.legendDisplay=l,g.showLegend=!0):(0,V.isEqual)(i,["xAxis","xAxisPath"])?(0,V.set)(g,["xAxisPath","value"],l):((0,V.set)(g,i.slice(1),l),i[1]==="followingViewWidth"?(g.minXValue=void 0,g.maxXValue=void 0):(i[1]==="minXValue"||i[1]==="maxXValue")&&(g.followingViewWidth=void 0))}))}else if(o.payload.id==="add-series")t((0,ze.Uy)(i=>{i.paths.push({timestampMethod:"receiveTime",value:"",enabled:!0})}));else if(o.payload.id==="delete-series"){const i=o.payload.path[1];t((0,ze.Uy)(l=>{l.paths.splice(Number(i),1)}))}},[t]);(0,f.useEffect)(()=>{s({actionHandler:c,focusedPath:a,nodes:ct(e,u)})},[c,e,a,s,u])}var B=n(90758),ae=n(75845),Y=n(75785),Me=n(99616),Ve=n(1012),Re=n(36423),le=n(2784);let we,ge,qe=0;const Mt=[];async function rt(){return ge??await new Promise(e=>{Mt.push(e)})}const Tt=e=>e.seekPlayback==null;let ft=[];const Nt=e=>`${e.topic}:${(e.fields??[]).join(",")}`;let _e={};function mt(e){return oe.zGw(oe.vMG(t=>t.topic),oe.IDH((t,a)=>({topic:a,fields:oe.zGw(oe.tSV(s=>s.fields??[]),oe.jj$)(t??[])})),oe.VO0)(e)}function lt(e){return oe.zGw(oe.tSV(t=>{const a=(0,Ve.ZP)(t);return a==null?[]:[a]}),oe.tSV(t=>{const a=oe.YMb(t.messagePath);return a==null||a.type!=="name"?[]:[{topic:t.topicName,fields:[a.name,"header"]}]}),mt)(e)}function Pt(){if(oe.xbD(_e))return;const e=oe.VO0(_e),t=oe.zGw(oe.tSV(a=>a.topics),mt)(e);oe.YMb(e)?.setter(t),ft=oe.UID(a=>oe.eiS(oe.UID(Nt,t),a),ft)}function Rt(e){const t=e[0]?.message;return t==null?0:Object.keys(t).length}function wt(e,t){const[a,s]=le.useState([]);(0,f.useEffect)(()=>(_e={..._e,[e]:{topics:t,setter:s}},Pt(),()=>{const{[e]:o,...i}=_e;_e=i,Pt()}),[e,t]);const u=(0,j.An)(Tt);(0,f.useEffect)(()=>{(async()=>await(await rt()).setLive(u))()},[u]),(0,Y.CC)({topics:a,restore:le.useCallback(o=>(o==null&&ge?.clearCurrent(),0),[]),addMessages:le.useCallback((o,i)=>(ge?.addCurrent(i),1),[])});const c=(0,Me.P)(oe.UID(o=>({...o,preloadType:"full"}),a));(0,f.useEffect)(()=>{for(const[o,i]of c.entries()){if(oe.xbD(i))break;const l={},g=ft[o]??{};for(const E of a){const v=Nt(E),h=i[E.topic];if(h==null)continue;const y=Rt(h);g[v]!==y&&(g[v]=y,l[E.topic]=h)}ft[o]=g,oe.xbD(l)||ge?.addBlock(l)}},[a,c])}function ht(){const{topics:e,datatypes:t}=(0,Y.Ui)();(0,f.useEffect)(()=>{ge?.receiveMetadata(e,t)},[e,t]);const{globalVariables:a}=(0,Re.Z)();(0,f.useEffect)(()=>{ge?.receiveVariables(a)},[a])}function $t(e){const t=(0,f.useMemo)(()=>(0,H.Z)(),[]),a=(0,ae.vE)(e),{xAxisPath:s,paths:u}=a,c=(0,f.useMemo)(()=>Ae(u,s),[s,u]),o=(0,ae.O4)(c),i=(0,f.useMemo)(()=>lt(o),[o]);(0,f.useEffect)(()=>{if(we==null){we=new Worker(new URL(n.p+n.u(9362),n.b)),ge=B.Ud(we);for(const y of Mt)y(ge)}return qe++,()=>{qe--,qe===0&&(we?.terminate(),we=ge=void 0,ft=[])}},[]),ht();const[l,g]=le.useState();(0,f.useEffect)(()=>()=>{ge?.unregister(t)},[t]),wt(t,i);const E=le.useRef();(0,f.useEffect)(()=>{E.current=a,ge?.updateParams(t,a)},[t,a]);const v=le.useMemo(()=>({setView:y=>{ge?.updateView(t,y)},register:(y,ie)=>{(async()=>(await rt()).register(t,B.sj(y),B.sj(g),B.sj(ie),E.current))()}}),[t]),h=le.useMemo(()=>async()=>await(await rt()).getFullData(t),[t]);return le.useMemo(()=>({data:l,provider:v,getFullData:h}),[l,v,h])}const It=240,Bt=[];function Lt(e,t){e({panelType:"Plot",updateIfExists:!0,siblingConfigCreator:a=>({...a,paths:(0,V.uniq)(a.paths.concat([{value:t,enabled:!0,timestampMethod:"receiveTime"}]).filter(({value:s})=>s))})})}function At(e){return e.playerState.activeData?.startTime}function Vt(e){return e.playerState.activeData?.currentTime}function Ot(e){return e.playerState.activeData?.endTime}const Ht=Object.freeze({sec:0,nsec:0});function Gt(e){const{saveConfig:t,config:a}=e,{title:s,followingViewWidth:u,paths:c,minXValue:o,maxXValue:i,minYValue:l,maxYValue:g,showXAxisLabels:E,showYAxisLabels:v,showLegend:h,legendDisplay:y=a.showSidebar===!0?"left":"floating",showPlotValuesInLegend:ie,isSynced:ne,xAxisVal:G,xAxisPath:Ge,sidebarDimension:Ie=a.sidebarWidth??It,[w.xS]:Be}=a,{setMessagePathDropConfig:se}=(0,z.R)();(0,f.useEffect)(()=>{se({getDropStatus(Te){return Te.isLeaf?{canDrop:!0,effect:"add"}:{canDrop:!1}},handleDrop(Te){t(Oe=>({...Oe,paths:[...Oe.paths.length===1&&Oe.paths[0]?.value===""?[]:Oe.paths,{value:Te.path,enabled:!0,timestampMethod:"receiveTime"}]}))}})},[t,se]),(0,f.useEffect)(()=>{s&&(Be==null||Be==="")&&t({title:void 0,[w.xS]:s})},[Be,s,t]),(0,f.useEffect)(()=>{c.length===0&&t({paths:[{value:"",enabled:!0,timestampMethod:"receiveTime"}]})},[t,c.length]);const Ke=(0,j.An)(At),Jt=(0,j.An)(Vt),cn=(0,j.An)(Ot),an=Te=>{if(G==="timestamp"&&Te&&Ke)return(0,W.toSec)((0,W.subtract)(Te,Ke))},sn=an(Jt),on=(0,f.useMemo)(()=>{if(u!=null&&+u>0)return{type:"following",width:+u}},[u]),Ct=an(cn),rn=(0,f.useMemo)(()=>{if((0,V.isNumber)(o)&&(0,V.isNumber)(Ct)||(0,V.isNumber)(i))return{type:"fixed",minXValue:(0,V.isNumber)(o)?o:0,maxXValue:(0,V.isNumber)(i)?i:Ct??0};if(G==="timestamp"&&Ke&&Ct!=null)return{type:"fixed",minXValue:0,maxXValue:Ct}},[i,o,Ct,Ke,G]),fn=(0,f.useMemo)(()=>on??rn??void 0,[rn,on]),{data:ln,provider:mn,getFullData:un}=$t({startTime:Ke??Ht,paths:c,invertedTheme:!1,xAxisPath:Ge,xAxisVal:G}),{datasets:hn,bounds:pn,pathsWithMismatchedDataLengths:xn}=(0,f.useMemo)(()=>{const Te=ln??te;return{bounds:Te.bounds,pathsWithMismatchedDataLengths:Te.pathsWithMismatchedDataLengths,datasets:c.map(Oe=>{for(const[ut,Qt]of Te.datasets.entries())if(ut.value===Oe.value&&ut.timestampMethod===Oe.timestampMethod)return Qt;return{label:Oe.label??Oe.value,data:[Ce]}})}},[ln,c]),dn=(0,j.m7)(),gn=(0,f.useCallback)(({x:Te})=>{const{seekPlayback:Oe,playerState:{activeData:{startTime:ut}={}}}=dn();!Oe||!ut||Te==null||G!=="timestamp"||Te>=0&&Oe((0,W.add)(ut,(0,W.fromSec)(Te)))},[dn,G]),[vn,yn]=(0,f.useState)(void 0);x(a,t,vn);const bn=(0,f.useMemo)(()=>y==="top"?"column":"row",[y]),Mn=(0,f.useCallback)(()=>[{type:"item",label:"Download plot data as CSV",onclick:async()=>{const Oe=await un();if(Oe==null)return;const ut=[];for(const Qt of Oe.datasets.values())ut.push(Qt);zt(ut,G)}}],[un,G]),Pn=(0,f.useCallback)(Te=>{yn(["paths",String(Te)])},[]);return(0,d.jsxs)(O.Z,{flex:"auto",alignItems:"center",justifyContent:"center",overflow:"hidden",position:"relative",children:[(0,d.jsx)(k.Z,{}),(0,d.jsxs)(O.Z,{direction:bn,flex:"auto",fullWidth:!0,style:{height:`calc(100% - ${k.B}px)`},children:[y!=="none"&&(0,d.jsx)(Xt,{currentTime:ie?sn:void 0,datasets:ie?hn:Bt,legendDisplay:y,onClickPath:Pn,paths:c,pathsWithMismatchedDataLengths:xn,saveConfig:t,showLegend:h,showPlotValuesInLegend:ie,sidebarDimension:Ie}),(0,d.jsxs)(O.Z,{flex:"auto",alignItems:"center",justifyContent:"center",overflow:"hidden",children:[(0,d.jsx)(q,{currentTime:sn,datasetBounds:pn,provider:mn,defaultView:fn,isSynced:G==="timestamp"&&ne,maxYValue:parseFloat((g??"").toString()),minYValue:parseFloat((l??"").toString()),onClick:gn,paths:c,showXAxisLabels:E,showYAxisLabels:v,xAxisVal:G}),(0,d.jsx)(r.i,{getItems:Mn})]})]})]})}const Kt={paths:[{value:"",enabled:!0,timestampMethod:"receiveTime"}],minYValue:void 0,maxYValue:void 0,showXAxisLabels:!0,showYAxisLabels:!0,showLegend:!0,legendDisplay:"floating",showPlotValuesInLegend:!1,isSynced:!0,xAxisVal:"timestamp",sidebarDimension:It},at=(0,J.Z)(Object.assign(Gt,{panelType:"Plot",defaultConfig:Kt}))},79064:(et,he,n)=>{n.d(he,{Hh:()=>W,bV:()=>f});const d=j=>{const J={};for(const[z,r]of j){const k=J[z]={};for(const O of r.definitions)O.isConstant===!0&&O.value!=null&&typeof O.value!="boolean"&&(k[O.value.toString()]!=null?k[O.value.toString()]="<multiple constants match>":k[O.value.toString()]=O.name)}return J},V=/(.*)__(foxglove|webviz)_enum$/;function f(j){return V.exec(j)?.[1]}const W=j=>{const J=d(j),z={};for(const[r,k]of j){const O={};let w={},T;for(const M of k.definitions){if(T!=null&&M.type!==T&&(w={},T=void 0),M.isConstant===!0&&M.value!=null&&typeof M.value!="boolean"){T=M.type,w[M.value.toString()]!=null?w[M.value.toString()]="<multiple constants match>":w[M.value.toString()]=M.name;continue}const Q=f(M.name);if(Q!=null){const K=J[M.type];K&&(O[Q]=K);continue}O[M.name]||(Object.keys(w).length>0&&(O[M.name]=w),w={})}Object.keys(O).length>0&&(z[r]=O)}return z}},68071:(et,he,n)=>{n.d(he,{A2:()=>z,Hm:()=>j,UX:()=>r,eE:()=>k,wi:()=>O});var d=n(76635),V=n.n(d),f=n(1547),W=n(25302);const j=[W.Y.blue.medium,W.Y.orange.medium,W.Y.yellow.medium,W.Y.green.medium,W.Y.cyan.medium,W.Y.purple.medium,W.Y.paleGreen.medium],J=j.map(w=>[w,...(0,f.Z)(w).tetrad().map(T=>T.toHexString())]),z=(0,d.uniq)((0,d.range)(0,J[0].length).map(w=>J.map(T=>T[w])).flat()),r=(0,d.memoize)(w=>(0,f.Z)(w).brighten(15).toString()),k=(0,d.memoize)(w=>(0,f.Z)(w).darken(30).toString());function O(w,T){return w??j[T%j.length]}},25302:(et,he,n)=>{n.d(he,{B:()=>f,Y:()=>V});var d=n(1547);const V={base:{dark:"#1F1E27",medium:"#8B8B8D",light:"#F7F7F3"},red:{dark:"#F24366",medium:"#ff7c96",light:"#FFAABB"},blue:{dark:"#1b83ec",medium:"#4e98e2",light:"#77AADD"},paleGreen:{dark:"#B4CC00",medium:"#cad660",light:"#CDD67E"},orange:{dark:"#ea531f",medium:"#f5774d",light:"#faa487"},cyan:{dark:"#22b5ff",medium:"#61cbff",light:"#99DDFF"},green:{dark:"#05d27d",medium:"#5cd6a9",light:"#8de0c9"},purple:{dark:"#6E51EE",medium:"#a395e2",light:"#c7c0e7"},yellow:{dark:"#EDCC28",medium:"#f7df71",light:"#f1e4aa"}},f=(0,d.Z)("hsv(0, 0%, 75%)").toHexString()}}]);

//# sourceMappingURL=2421.5179494fa6ca0405f4a6.js.map