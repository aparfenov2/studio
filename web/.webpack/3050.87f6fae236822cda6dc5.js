(()=>{"use strict";var Z={33050:(i,w,d)=>{var p=d(90758),x=d(67105);function h(e,o,r,a,n,t){t[n]=e+Math.trunc(1403*a/1e3),t[n+1]=e-Math.trunc(344*o/1e3)-Math.trunc(714*a/1e3),t[n+2]=e+Math.trunc(1770*o/1e3),t[n+3]=255,t[n+4]=r+Math.trunc(1403*a/1e3),t[n+5]=r-Math.trunc(344*o/1e3)-Math.trunc(714*a/1e3),t[n+6]=r+Math.trunc(1770*o/1e3),t[n+7]=255}function T(e,o,r,a,n){if(a<o*2)throw new Error(`UYVY image row step (${a}) must be at least 2*width (${o*2})`);let t=0;for(let c=0;c<r;c++){const f=c*a;for(let l=0;l<o;l+=2){const s=f+l*2,m=e[s]-128,g=e[s+1],u=e[s+2]-128,I=e[s+3];h(g,m,I,u,t,n),t+=8}}}function k(e,o,r,a,n){if(a<o*2)throw new Error(`YUYV image row step (${a}) must be at least 2*width (${o*2})`);let t=0;for(let c=0;c<r;c++){const f=c*a;for(let l=0;l<o;l+=2){const s=f+l*2,m=e[s],g=e[s+1]-128,u=e[s+2],I=e[s+3]-128;h(m,g,u,I,t,n),t+=8}}}function B(e,o,r,a,n){if(a<o*3)throw new Error(`RGB8 image row step (${a}) must be at least 3*width (${o*3})`);let t=0;for(let c=0;c<r;c++){const f=c*a;for(let l=0;l<o;l++){const s=f+l*3,m=e[s],g=e[s+1],u=e[s+2];n[t++]=m,n[t++]=g,n[t++]=u,n[t++]=255}}}function y(e,o,r,a,n){if(a<o*4)throw new Error(`RGBA8 image row step (${a}) must be at least 4*width (${o*4})`);let t=0;for(let c=0;c<r;c++){const f=c*a;for(let l=0;l<o;l++){const s=f+l*4,m=e[s],g=e[s+1],u=e[s+2],I=e[s+3];n[t++]=m,n[t++]=g,n[t++]=u,n[t++]=I}}}function J(e,o,r,a,n){if(a<o*4)throw new Error(`BGRA8 image row step (${a}) must be at least 4*width (${o*4})`);let t=0;for(let c=0;c<r;c++){const f=c*a;for(let l=0;l<o;l++){const s=f+l*4,m=e[s],g=e[s+1],u=e[s+2],I=e[s+3];n[t++]=u,n[t++]=g,n[t++]=m,n[t++]=I}}}function Q(e,o,r,a,n){if(a<o*3)throw new Error(`BGR8 image row step (${a}) must be at least 3*width (${o*3})`);let t=0;for(let c=0;c<r;c++){const f=c*a;for(let l=0;l<o;l++){const s=f+l*3,m=e[s],g=e[s+1],u=e[s+2];n[t++]=u,n[t++]=g,n[t++]=m,n[t++]=255}}}function W(e,o,r,a,n,t){if(a<o*4)throw new Error(`Float image row step (${a}) must be at least 4*width (${o*4})`);const c=new DataView(e.buffer,e.byteOffset);let f=0;for(let l=0;l<r;l++){const s=l*a;for(let m=0;m<o;m++){const g=c.getFloat32(s+m*4,!n)*255;t[f++]=g,t[f++]=g,t[f++]=g,t[f++]=255}}}function ee(e,o,r,a,n){if(a<o)throw new Error(`Uint8 image row step (${a}) must be at least width (${o})`);let t=0;for(let c=0;c<r;c++){const f=c*a;for(let l=0;l<o;l++){const s=e[f+l];n[t++]=s,n[t++]=s,n[t++]=s,n[t++]=255}}}function F(e,o,r,a,n,t,c){if(a<o*2)throw new Error(`Uint16 image row step (${a}) must be at least 2*width (${o*2})`);const f=new DataView(e.buffer,e.byteOffset),l=c?.minValue??0;let s=c?.maxValue??1e4;s===l&&(s=l+1);const m=c?.colorConverter;let g=0;for(let u=0;u<r;u++){const I=u*a;for(let M=0;M<o;M++){let _=f.getUint16(I+M*2,!n);if(m){const{r:j,g:q,b:O}=m(_);t[g++]=j*255,t[g++]=q*255,t[g++]=O*255}else _=(_-l)/(s-l),_*=255,t[g++]=_,t[g++]=_,t[g++]=_;t[g++]=255}}}function L(e,o,r,a){return new Function("data","width","height","step","output",`
  if (step < width) {
    throw new Error(\`Bayer image row step (\${step}) must be at least width (\${width})\`);
  }
  for (let i = 0; i < height / 2; i++) {
    let inIdx = i * 2 * step;
    let outTopIdx = i * 2 * width * 4; // Addresses top row
    let outBottomIdx = (i * 2 + 1) * width * 4; // Addresses bottom row
    for (let j = 0; j < width / 2; j++) {
      const tl = data[inIdx++];
      const tr = data[inIdx++];
      const bl = data[inIdx + step - 2];
      const br = data[inIdx + step - 1];

      const ${e} = tl;
      const ${o} = tr;
      const ${r} = bl;
      const ${a} = br;

      // Top row
      output[outTopIdx++] = r;
      output[outTopIdx++] = g0;
      output[outTopIdx++] = b;
      output[outTopIdx++] = 255;

      output[outTopIdx++] = r;
      output[outTopIdx++] = g0;
      output[outTopIdx++] = b;
      output[outTopIdx++] = 255;

      // Bottom row
      output[outBottomIdx++] = r;
      output[outBottomIdx++] = g1;
      output[outBottomIdx++] = b;
      output[outBottomIdx++] = 255;

      output[outBottomIdx++] = r;
      output[outBottomIdx++] = g1;
      output[outBottomIdx++] = b;
      output[outBottomIdx++] = 255;
    }
  }`)}const re=L("r","g0","g1","b"),oe=L("b","g0","g1","r"),ae=L("g0","b","r","g1"),ne=L("g0","r","b","g1");var v=d(96995),te=d(1547);const ce=new v.Pa4(1,0,0),le=new v.Pa4(0,1,0),U=new v.Pa4,N=new v.Pa4,E=new v.Pa4;function $e(e,o){const r=new THREE.Quaternion(0,0,0,1);U.copy(e).normalize(),N.copy(o).normalize();const a=U.dot(N);if(a>=1)return r;if(a<-.999999){let n=E.copy(ce).cross(e);se(n)&&(n=E.copy(le).cross(e)),n.normalize(),r.setFromAxisAngle(n,Math.PI)}else{const n=Math.sqrt((1+a)*2),t=1/n;E.copy(U).cross(N),r.x=E.x*t,r.y=E.y*t,r.z=E.z*t,r.w=n*.5,r.normalize()}return r}function se(e){return e.lengthSq()<1e-12}function D(e,o,r=1e-5){return Math.abs(e-o)<r}function ye(e,o){for(let r=0;r<e.length;r++)if(e[r]!==o[r])return!1;return!0}function Le(e,o,r=1e-5){return D(e[0],o[0],r)&&D(e[1],o[1],r)&&D(e[2],o[2],r)}function S(e,o,r){return Math.max(o,Math.min(r,e))}function A(e,o,r){return e+(o-e)*r}const Ae=new v.Ilk(0).convertSRGBToLinear(),Ve=new v.Ilk(16777215).convertSRGBToLinear();function G(e){return e<.04045?e*.0773993808:Math.pow(e*.9478672986+.0521327014,2.4)}function P(e,o){const r=(0,te.Z)(o);if(!r.isValid())return e.r=e.g=e.b=e.a=1,e;const a=r.toRgb();return e.r=a.r/255,e.g=a.g/255,e.b=a.b/255,e.a=a.a,e}function Oe(){return{r:0,g:0,b:0,a:0}}function Fe(e,o){const r=tinycolor(o);if(!r.isValid())return e.r=e.g=e.b=1,e;const a=r.toRgb();return e.r=a.r/255,e.g=a.g/255,e.b=a.b/255,e}function Ue(e,o){return e.setRGB(o.r,o.g,o.b).convertSRGBToLinear()}function Ne(e){const o=Math.trunc(e.r*255),r=Math.trunc(e.g*255),a=Math.trunc(e.b*255);return`rgba(${o}, ${r}, ${a}, ${e.a})`}function z(e,o){return e.r=G(o.r),e.g=G(o.g),e.b=G(o.b),e.a=o.a,e}function De(e,o,r){return Math.hypot(.5468*e,.7662*o,.3376*r)}function ie(e,o,r,a){const n=o.r*o.a,t=o.g*o.a,c=o.b*o.a,f=r.r*r.a,l=r.g*r.a,s=r.b*r.a;return e.r=A(n,f,a),e.g=A(t,l,a),e.b=A(c,s,a),e.a=A(o.a,r.a,a),e}const K={r:0,g:0,b:0,a:0},fe={r:0,g:0,b:0,a:0},be=null;function de(e,o,r){switch(e.colorMode){case"flat":{const a=P(K,e.flatColor);return z(a,a),(n,t)=>{n.r=a.r,n.g=a.g,n.b=a.b,n.a=a.a}}case"gradient":{const a=Math.max(r-o,Number.EPSILON),n=P(K,e.gradient[0]),t=P(fe,e.gradient[1]);return z(n,n),z(t,t),(c,f)=>{const l=Math.max(0,Math.min((f-o)/a,1));ie(c,n,t,l)}}case"colormap":{const a=Math.max(r-o,Number.EPSILON);switch(e.colorMap){case"turbo":return(n,t)=>{const c=Math.max(0,Math.min((t-o)/a,1));Ie(n,c),n.a=e.explicitAlpha};case"rainbow":return(n,t)=>{const c=Math.max(0,Math.min((t-o)/a,1));ge(n,c),n.a=e.explicitAlpha}}throw new Error(`Unrecognized color map: ${e.colorMap}`)}case"rgb":return(a,n)=>{X(a,n),a.a=e.explicitAlpha};case"rgba":return X}}function X(e,o){const r=o>>>0;e.a=((r&4278190080)>>>24)/255,e.r=((r&16711680)>>>16)/255,e.g=((r&65280)>>>8)/255,e.b=((r&255)>>>0)/255}function ge(e,o){const r=(1-S(o,0,1))*5+1,a=Math.floor(r);let n=r%1;a%2<1&&(n=1-n);const t=G(1-n);a<=1?(e.r=t,e.g=0,e.b=1):a===2?(e.r=0,e.g=t,e.b=1):a===3?(e.r=0,e.g=1,e.b=t):a===4?(e.r=t,e.g=1,e.b=0):(e.r=1,e.g=t,e.b=0),e.a=1}const we=new v.Ltg(.13572138,4.6153926,-42.66032258,132.13108234),me=new v.Ltg(.09140261,2.19418839,4.84296658,-14.18503333),ue=new v.Ltg(.1066733,12.64194608,-60.58204836,110.36276771),he=new v.FM8(-152.94239396,59.28637943),xe=new v.FM8(4.27729857,2.82956604),ve=new v.FM8(-89.90310912,27.34824973),C=new v.Ltg,$=new v.FM8;function Me(e,o){const r=S(o,0,1)*.99+.01;C.set(1,r,r*r,r*r*r),$.set(C.z,C.w),$.multiplyScalar(C.z),e.r=G(S(C.dot(we)+$.dot(he),0,1)),e.g=G(S(C.dot(me)+$.dot(xe),0,1)),e.b=G(S(C.dot(ue)+$.dot(ve),0,1)),e.a=1}let R;const V=65535;function Ie(e,o){if(!R){R=new Float32Array(V*3);const a={r:0,g:0,b:0,a:0};for(let n=0;n<V;n++){Me(a,n/(V-1));const t=n*3;R[t+0]=a.r,R[t+1]=a.g,R[t+2]=a.b}}const r=Math.trunc(o*(V-1))*3;e.r=R[r+0],e.g=R[r+1],e.b=R[r+2],e.a=1}const _e=new Set(["rgb","rgba"]),pe=new Set(["intensity","i"]);function Be(e,{supportsPackedRgbModes:o}){if(o){for(const r of e)if(_e.has(r))return r}for(const r of e)if(pe.has(r))return r;return e.find(r=>r==="x")??e[0]??""}function Te(e){let o=!1,r=!1,a=!1,n=!1;for(const t of e)switch(t){case"red":o=!0;break;case"green":r=!0;break;case"blue":a=!0;break;case"alpha":n=!0;break}return o&&r&&a&&n}function Pe({msgFields:e,config:o,defaults:r,modifiers:{supportsPackedRgbModes:a,supportsRgbaFieldsMode:n,hideFlatColor:t,hideExplicitAlpha:c}}){const f=o.colorMode??(t===!0?"gradient":"flat"),l=o.flatColor??"#ffffff",s=o.gradient,m=o.colorMap??"turbo",g=o.explicitAlpha??1,u=o.minValue,I=o.maxValue,M={},_=[{label:"Color map",value:"colormap"},{label:"Gradient",value:"gradient"}];if(t!==!0&&_.push({label:"Flat",value:"flat"}),e&&e.length>0&&(a&&_.push({label:"BGR (packed)",value:"rgb"},{label:"BGRA (packed)",value:"rgba"}),n&&Te(e)&&_.push({label:"RGBA (separate fields)",value:"rgba-fields"})),M.colorMode={label:"Color mode",input:"select",value:f,options:_},f==="flat")M.flatColor={label:"Flat color",input:"rgba",value:l};else if(f!=="rgba-fields"){if(e){const j=e.map(O=>({label:O,value:O})),q=o.colorField??Be(e,{supportsPackedRgbModes:a});M.colorField={label:"Color by",input:"select",options:j,value:q}}switch(f){case"gradient":M.gradient={label:"Gradient",input:"gradient",value:s??r.gradient};break;case"colormap":M.colorMap={label:"Color map",input:"select",options:[{label:"Turbo",value:"turbo"},{label:"Rainbow",value:"rainbow"}],value:m};break;default:break}c!==!0&&(f==="colormap"||f==="rgb")&&(M.explicitAlpha={label:"Opacity",input:"number",step:.1,placeholder:"1",precision:3,min:0,max:1,value:g}),be.includes(f)&&(M.minValue={label:"Value min",input:"number",placeholder:"auto",precision:4,value:u},M.maxValue={label:"Value max",input:"number",placeholder:"auto",precision:4,value:I})}return M}const Y={r:0,g:0,b:0,a:0};function ze(e){switch(e.colorMode){case"flat":return stringToRgba(Y,e.flatColor).a<1;case"gradient":return stringToRgba(Y,e.gradient[0]).a<1||stringToRgba(Y,e.gradient[1]).a<1;case"colormap":case"rgb":return e.explicitAlpha<1;case"rgba":case"rgba-fields":return!0}}const Ye=null;async function je(e,o){const r=new Blob([e.data],{type:`image/${e.format}`});return await createImageBitmap(r,{resizeWidth:o})}const Re={colorMode:"gradient",flatColor:"#ffffff",gradient:["#000000","#ffffff"],colorMap:"turbo",explicitAlpha:0},ke={minValue:0,maxValue:65535};function Ge(e,o,r){const{encoding:a,width:n,height:t,step:c}=e,f="is_bigendian"in e?e.is_bigendian:!1,l=e.data;switch(a){case"yuv422":case"uyvy":T(l,n,t,c,r);break;case"yuv422_yuy2":case"yuyv":k(l,n,t,c,r);break;case"rgb8":B(l,n,t,c,r);break;case"rgba8":y(l,n,t,c,r);break;case"bgra8":J(l,n,t,c,r);break;case"bgr8":case"8UC3":Q(l,n,t,c,r);break;case"32FC1":W(l,n,t,c,f,r);break;case"bayer_rggb8":re(l,n,t,c,r);break;case"bayer_bggr8":oe(l,n,t,c,r);break;case"bayer_gbrg8":ae(l,n,t,c,r);break;case"bayer_grbg8":ne(l,n,t,c,r);break;case"mono8":case"8UC1":ee(l,n,t,c,r);break;case"mono16":case"16UC1":{const s=x.Z({},Re,ke,o);if(s.colorMode==="rgba-fields"||s.colorMode==="flat")throw Error(`${s.colorMode} color mode is not supported for mono16 images`);const m=s.minValue,g=s.maxValue,u={r:0,g:0,b:0,a:0},I=de(s,m,g);F(l,n,t,c,f,r,{minValue:o.minValue,maxValue:o.maxValue,colorConverter:M=>(I(u,M),u)});break}default:throw new Error(`Unsupported encoding ${a}`)}}function Ce(e,o){const r=new ImageData(e.width,e.height);return Ge(e,o,r.data),p.re(r,[r.data.buffer])}const Ee={decode:Ce};p.Jj(Ee)}},H={};function b(i){var w=H[i];if(w!==void 0)return w.exports;var d=H[i]={exports:{}};return Z[i](d,d.exports,b),d.exports}b.m=Z,b.x=()=>{var i=b.O(void 0,[1084,1547,9543],()=>b(33050));return i=b.O(i),i},(()=>{var i=[];b.O=(w,d,p,x)=>{if(d){x=x||0;for(var h=i.length;h>0&&i[h-1][2]>x;h--)i[h]=i[h-1];i[h]=[d,p,x];return}for(var T=1/0,h=0;h<i.length;h++){for(var[d,p,x]=i[h],k=!0,B=0;B<d.length;B++)(x&!1||T>=x)&&Object.keys(b.O).every(F=>b.O[F](d[B]))?d.splice(B--,1):(k=!1,x<T&&(T=x));if(k){i.splice(h--,1);var y=p();y!==void 0&&(w=y)}}return w}})(),b.d=(i,w)=>{for(var d in w)b.o(w,d)&&!b.o(i,d)&&Object.defineProperty(i,d,{enumerable:!0,get:w[d]})},b.f={},b.e=i=>Promise.all(Object.keys(b.f).reduce((w,d)=>(b.f[d](i,w),w),[])),b.u=i=>""+i+"."+{1084:"bb60996131e2a2cf072e",1547:"8ba446bd308908072dc1",9543:"125ab065c2f5ba2f32f5"}[i]+".js",b.g=function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}}(),b.o=(i,w)=>Object.prototype.hasOwnProperty.call(i,w),(()=>{var i;b.g.importScripts&&(i=b.g.location+"");var w=b.g.document;if(!i&&w&&(w.currentScript&&(i=w.currentScript.src),!i)){var d=w.getElementsByTagName("script");if(d.length)for(var p=d.length-1;p>-1&&!i;)i=d[p--].src}if(!i)throw new Error("Automatic publicPath is not supported in this browser");i=i.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),b.p=i})(),(()=>{var i={3050:1},w=x=>{var[h,T,k]=x;for(var B in T)b.o(T,B)&&(b.m[B]=T[B]);for(k&&k(b);h.length;)i[h.pop()]=1;p(x)};b.f.i=(x,h)=>{i[x]||importScripts(b.p+b.u(x))};var d=self.webpackChunk=self.webpackChunk||[],p=d.push.bind(d);d.push=w})(),(()=>{var i=b.x;b.x=()=>Promise.all([1084,1547,9543].map(b.e,b)).then(i)})();var Se=b.x()})();

//# sourceMappingURL=3050.87f6fae236822cda6dc5.js.map