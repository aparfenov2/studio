"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[3949,9839],{42861:(A,x,o)=>{var n,j=o(71600);n={value:!0},x.Z=void 0;var v=j(o(68671)),y=o(52322),C=(0,v.default)((0,y.jsx)("path",{d:"M18 23H4c-1.1 0-2-.9-2-2V7h2v14h14v2zM15 1H8c-1.1 0-1.99.9-1.99 2L6 17c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V7l-6-6zm1.5 14h-6v-2h6v2zm0-6h-2v2h-2V9h-2V7h2V5h2v2h2v2z"}),"Difference");x.Z=C},56317:(A,x,o)=>{var n,j=o(71600);n={value:!0},x.Z=void 0;var v=j(o(68671)),y=o(52322),C=(0,v.default)((0,y.jsx)("path",{d:"M18 23H4c-1.1 0-2-.9-2-2V7h2v14h14v2zM14.5 7V5h-2v2h-2v2h2v2h2V9h2V7h-2zm2 6h-6v2h6v-2zM15 1H8c-1.1 0-1.99.9-1.99 2L6 17c0 1.1.89 2 1.99 2H19c1.1 0 2-.9 2-2V7l-6-6zm4 16H8V3h6.17L19 7.83V17z"}),"DifferenceOutlined");x.Z=C},27147:(A,x,o)=>{var n,j=o(71600);n={value:!0},x.Z=void 0;var v=j(o(68671)),y=o(52322),C=(0,v.default)((0,y.jsx)("path",{d:"M4.25 5.61C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAlt");x.Z=C},21580:(A,x,o)=>{var n,j=o(71600);n={value:!0},x.Z=void 0;var v=j(o(68671)),y=o(52322),C=(0,v.default)((0,y.jsx)("path",{d:"M2 9v2h19V9H2zm0 6h5v-2H2v2zm7 0h5v-2H9v2zm7 0h5v-2h-5v2z"}),"PowerInput");x.Z=C},42012:(A,x,o)=>{var n,j=o(71600);n={value:!0},x.Z=void 0;var v=j(o(68671)),y=o(52322),C=(0,v.default)([(0,y.jsx)("circle",{cx:"7",cy:"14",r:"3"},"0"),(0,y.jsx)("circle",{cx:"11",cy:"6",r:"3"},"1"),(0,y.jsx)("circle",{cx:"16.6",cy:"17.6",r:"3"},"2")],"ScatterPlot");x.Z=C},96511:(A,x,o)=>{var n,j=o(71600);n={value:!0},x.Z=void 0;var v=j(o(68671)),y=o(52322),C=(0,v.default)((0,y.jsx)("path",{d:"m3.5 18.49 6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z"}),"ShowChart");x.Z=C},22777:(A,x,o)=>{/*!
 * is-extendable <https://github.com/jonschlinkert/is-extendable>
 *
 * Copyright (c) 2015-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var n=o(49983);A.exports=function(v){return n(v)||typeof v=="function"||Array.isArray(v)}},49983:(A,x,o)=>{/*!
 * is-plain-object <https://github.com/jonschlinkert/is-plain-object>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var n=o(98558);function j(v){return n(v)===!0&&Object.prototype.toString.call(v)==="[object Object]"}A.exports=function(y){var C,b;return!(j(y)===!1||(C=y.constructor,typeof C!="function")||(b=C.prototype,j(b)===!1)||b.hasOwnProperty("isPrototypeOf")===!1)}},98558:A=>{/*!
 * isobject <https://github.com/jonschlinkert/isobject>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */A.exports=function(o){return o!=null&&typeof o=="object"&&Array.isArray(o)===!1}},13e3:(A,x,o)=>{/*!
 * object.omit <https://github.com/jonschlinkert/object.omit>
 *
 * Copyright (c) 2014-2017, Jon Schlinkert.
 * Released under the MIT License.
 */var n=o(22777);A.exports=function(v,y,C){if(!n(v))return{};typeof y=="function"&&(C=y,y=[]),typeof y=="string"&&(y=[y]);for(var b=typeof C=="function",h=Object.keys(v),Y={},H=0;H<h.length;H++){var ee=h[H],te=v[ee];(!y||y.indexOf(ee)===-1&&(!b||C(te,ee,v)))&&(Y[ee]=te)}return Y}},9839:A=>{function x(o){for(var n=5381,j=o.length;j;)n=n*33^o.charCodeAt(--j);return n>>>0}A.exports=x},52226:(A,x,o)=>{o.r(x),o.d(x,{default:()=>hn});var n=o(52322),j=o(47746),v=o(68434),y=o(2940),C=o(41518),b=o(76635),h=o(2784),Y=o(13980),H=o.n(Y),ee=o(37320),te=o.n(ee),Ze=o(13e3),be=o.n(Ze);const re=function(){};var w=function(){function e(s,i){for(var t=0;t<i.length;t++){var l=i[t];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(s,l.key,l)}}return function(s,i,t){return i&&e(s.prototype,i),t&&e(s,t),s}}();function P(e,s){if(!(e instanceof s))throw new TypeError("Cannot call a class as a function")}function ue(e,s){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return s&&(typeof s=="object"||typeof s=="function")?s:e}function fe(e,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof s);e.prototype=Object.create(s&&s.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),s&&(Object.setPrototypeOf?Object.setPrototypeOf(e,s):e.__proto__=s)}var ge=function(e){fe(s,e);function s(i){P(this,s);var t=ue(this,(s.__proto__||Object.getPrototypeOf(s)).call(this,i));return t.state={isHovering:!1},t.onMouseEnter=t.onMouseEnter.bind(t),t.onMouseLeave=t.onMouseLeave.bind(t),t.onMouseOver=t.onMouseOver.bind(t),t.onMouseOut=t.onMouseOut.bind(t),t.setIsHovering=t.setIsHovering.bind(t),t.unsetIsHovering=t.unsetIsHovering.bind(t),t.componentWillUnmount=t.componentWillUnmount.bind(t),t.timerIds=[],t}return w(s,[{key:"onMouseEnter",value:function(t){this.props.onMouseEnter({e:t,setIsHovering:this.setIsHovering,unsetIsHovering:this.unsetIsHovering})}},{key:"onMouseLeave",value:function(t){this.props.onMouseLeave({e:t,setIsHovering:this.setIsHovering,unsetIsHovering:this.unsetIsHovering})}},{key:"onMouseOver",value:function(t){this.props.onMouseOver({e:t,setIsHovering:this.setIsHovering,unsetIsHovering:this.unsetIsHovering})}},{key:"onMouseOut",value:function(t){this.props.onMouseOut({e:t,setIsHovering:this.setIsHovering,unsetIsHovering:this.unsetIsHovering})}},{key:"componentWillUnmount",value:function(){this.clearTimers()}},{key:"setIsHovering",value:function(){var t=this;this.clearTimers();var l=setTimeout(function(){var a={isHovering:!0};t.setState(a,function(){t.props.onHoverChanged(a)})},this.props.hoverDelayInMs);this.timerIds.push(l)}},{key:"unsetIsHovering",value:function(){var t=this;this.clearTimers();var l=setTimeout(function(){var a={isHovering:!1};t.setState(a,function(){t.props.onHoverChanged(a)})},this.props.hoverOffDelayInMs);this.timerIds.push(l)}},{key:"clearTimers",value:function(){for(var t=this.timerIds;t.length;)clearTimeout(t.pop())}},{key:"getIsReactComponent",value:function(t){return typeof t.type=="function"}},{key:"shouldDecorateChild",value:function(t){return!!t&&this.getIsReactComponent(t)&&this.props.shouldDecorateChildren}},{key:"decorateChild",value:function(t,l){return(0,h.cloneElement)(t,l)}},{key:"renderChildrenWithProps",value:function(t,l){var a=this;return typeof t=="function"?t(l):h.Children.map(t,function(r){return a.shouldDecorateChild(r)?a.decorateChild(r,l):r})}},{key:"render",value:function(){var t=this.props,l=t.children,a=t.className,r=te()({},{isHovering:this.state.isHovering},be()(this.props,["children","className","hoverDelayInMs","hoverOffDelayInMs","onHoverChanged","onMouseEnter","onMouseLeave","onMouseOver","onMouseOut","shouldDecorateChildren"]));return h.createElement("div",{className:a,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseOver:this.onMouseOver,onMouseOut:this.onMouseOut},this.renderChildrenWithProps(l,r))}}]),s}(h.Component);ge.displayName="ReactHoverObserver",ge.defaultProps={hoverDelayInMs:0,hoverOffDelayInMs:0,onHoverChanged:re,onMouseEnter:function(s){var i=s.setIsHovering;return i()},onMouseLeave:function(s){var i=s.unsetIsHovering;return i()},onMouseOver:re,onMouseOut:re,shouldDecorateChildren:!0},ge.propTypes={className:H().string,hoverDelayInMs:H().number,hoverOffDelayInMs:H().number,onHoverChanged:H().func,onMouseEnter:H().func,onMouseLeave:H().func,onMouseOver:H().func,onMouseOut:H().func,shouldDecorateChildren:H().bool};const He=ge;var ae=o(30650),G=o(72970),E=o(75785),S=o(29268),$=o(93455),J=o(27803),de=o(84803);function Te(){const[e]=(0,J.b)($.o.TIMEZONE);return(0,h.useCallback)((s,i,t,l)=>(0,de.D)(s,i,t,l,[],e),[e])}var ve=o(21337),De=o(1012),Ne=o(4750),Re=o(36922);function Se(e,s){const{historySize:i=1}=s??{},t=(0,h.useMemo)(()=>{const u=(0,Ne.V)(e,"partial");return u?[u]:[]},[e]),l=(0,Re.Iq)([e]),a=(0,h.useCallback)((u,f)=>{if(f.length===0)return u;const d=[];for(let N=f.length-1;N>=0&&d.length<i;--N){const se=f[N],K=l(e,se);K&&K.length>0&&d.push({messageEvent:se,queriedData:K})}const p=d.reverse();return d.length===i?{matches:p,messageEvents:f,path:e}:{matches:u.matches.concat(p).slice(-i),messageEvents:f,path:e}},[l,i,e]),r=(0,h.useCallback)(u=>{if(!u)return{matches:[],messageEvents:[],path:e};const f=[];for(const d of u.messageEvents){const p=l(e,d);p&&p.length>0&&f.push({messageEvent:d,queriedData:p})}return f.length>0||e!==u.path?{matches:f.slice(-i),messageEvents:u.messageEvents,path:e}:u},[l,i,e]);return(0,E.CC)({topics:t,addMessages:a,restore:r}).matches}var vt=o(75017),Je=o(82044),ne=o(93812),mt=o(42861),yt=o(56317),xt=o(26029),bt=o(6377),Ke=o(87037),Tt=o(29800),Qe=o(80078),Xe=o(43684),Dt=o(76479),k;(function(e){e.Collapsed="c",e.Expanded="e"})(k||(k={}));const oe={CUSTOM_METHOD:"custom",PREV_MSG_METHOD:"previous message",FONT_SIZE_OPTIONS:[8,9,10,11,12,14,16,18,24,30,36,48,60,72]};var St=o(2784);const jt=(0,G.ZL)()(e=>({iconButton:{"&.MuiIconButton-root":{padding:e.spacing(.25)}}}));function Ct(e){const{canExpandAll:s,diffEnabled:i,diffMethod:t,diffTopicPath:l,onDiffTopicPathChange:a,onToggleDiff:r,onToggleExpandAll:c,onTopicPathChange:u,saveConfig:f,topic:d,topicPath:p}=e,{classes:L}=jt();return(0,n.jsxs)(Dt.Z,{children:[(0,n.jsx)(Ke.Z,{className:L.iconButton,title:"Toggle diff",onClick:r,color:i?"default":"inherit",size:"small",children:i?(0,n.jsx)(mt.Z,{fontSize:"small"}):(0,n.jsx)(yt.Z,{fontSize:"small"})}),(0,n.jsx)(Ke.Z,{className:L.iconButton,title:s?"Expand all":"Collapse all",onClick:c,"data-testid":"expand-all",size:"small",children:s?(0,n.jsx)(bt.Z,{fontSize:"small"}):(0,n.jsx)(xt.Z,{fontSize:"small"})}),(0,n.jsxs)(ne.Z,{fullWidth:!0,paddingLeft:.25,children:[(0,n.jsx)(Xe.ZP,{index:0,path:p,onChange:u,inputStyle:{height:20}}),i&&(0,n.jsxs)(ne.Z,{direction:"row",flex:"auto",children:[(0,n.jsxs)(Tt.Z,{variant:"filled",size:"small",title:"Diff method",value:t,MenuProps:{MenuListProps:{dense:!0}},onChange:N=>{f({diffMethod:N.target.value})},children:[(0,n.jsx)(Qe.Z,{value:oe.PREV_MSG_METHOD,children:oe.PREV_MSG_METHOD}),(0,n.jsx)(Qe.Z,{value:oe.CUSTOM_METHOD,children:"custom"})]}),t===oe.CUSTOM_METHOD&&(0,n.jsx)(Xe.ZP,{index:1,path:l,onChange:a,inputStyle:{height:"100%"},...d?{prioritizedDatatype:d.schemaName}:{}})]})]})]})}const Et=St.memo(Ct);var Ye=o(60351);const we="->",M={ADDED:{labelText:"STUDIO_DIFF___ADDED",color:"#404047",backgroundColor:"#daffe7",invertedBackgroundColor:"#182924",indicator:"+"},DELETED:{labelText:"STUDIO_DIFF___DELETED",color:"#404047",backgroundColor:"#ffdee3",invertedBackgroundColor:"#3d2327",indicator:"-"},CHANGED:{labelText:"STUDIO_DIFF___CHANGED",color:"#eba800"},ID:{labelText:"STUDIO_DIFF___ID"}},q=(0,b.keyBy)(Object.values(M),"labelText");function je({before:e,after:s,idLabel:i,showFullMessageForDiff:t=!1}){if(Array.isArray(e)&&Array.isArray(s)){let r;const c=e.concat(s);if(typeof c[0]=="object"&&c[0]!=null){let u={};c[0].id!=null&&(u.id={before:[],after:[]});for(const f in c[0])(0,Ye.Q)(f)&&(u[f]={before:[],after:[]});(0,b.every)(c,f=>typeof f=="object"&&f)||(u={});for(const[f,d]of Object.entries(u))for(const p of e)p[f]!=null&&d.before.push(p[f]);for(const[f,d]of Object.entries(u))for(const p of s)p[f]!=null&&d.after.push(p[f]);for(const[f,{before:d,after:p}]of Object.entries(u))if((0,b.uniq)(d).length===e.length&&(0,b.uniq)(p).length===s.length){r=f;break}}if(r!=null){const u=(0,b.keyBy)(s,r),f=[];for(const d of e){if(d==null||typeof d!="object")throw new Error("beforeItem is invalid; should have checked this earlier");const p=d[r],L=je({before:d,after:u[p],idLabel:r,showFullMessageForDiff:t});if(delete u[p],!(0,b.isEmpty)(L)){const N=Object.keys(L).length===1&&Object.keys(L)[0]===M.DELETED.labelText;f.push(N?L:{[M.ID.labelText]:{[r]:p},...L})}}for(const d of Object.values(u)){const p=je({before:void 0,after:d,idLabel:r,showFullMessageForDiff:t});(0,b.isEmpty)(p)||f.push(p)}return f}}if(typeof e=="object"&&typeof s=="object"&&e&&s){const r={},c=Object.keys(e).concat(Object.keys(s));for(const u of(0,b.uniq)(c)){const f=je({before:e[u],after:s[u],idLabel:void 0,showFullMessageForDiff:t});(0,b.isEmpty)(f)?t&&(r[u]=e[u]):r[u]=f}return r}if(e===s)return;if(e==null){const r=Array.isArray(s)||typeof s!="object";if(!i||r)return{[M.ADDED.labelText]:s};const c={[M.ID.labelText]:{[i]:{...s}[i]}};return{[M.ADDED.labelText]:{...c,...s}}}if(s==null){const r=Array.isArray(e)||typeof e!="object";if(!i||r)return{[M.DELETED.labelText]:e};const c={[M.ID.labelText]:{[i]:{...e}[i]}};return{[M.DELETED.labelText]:{...c,...e}}}const l=typeof e=="bigint"?e.toString():JSON.stringify(e),a=typeof s=="bigint"?s.toString():JSON.stringify(s);return{[M.CHANGED.labelText]:`${l} ${we} ${a}`}}var Mt=o(39367),It=o(79064),Ot=o(11701),Pt=o(77075);const At=(0,G.ZL)()(e=>({root:{padding:e.spacing(0,.5),textDecoration:"inherit",whiteSpace:"pre-line"}}));function ze(e){const{children:s,style:i}=e,{classes:t}=At();return(0,n.jsx)("span",{className:t.root,style:i,children:s})}var Lt=o(38215),Zt=o(87472);const qe=20,_e=new Set(Object.keys(Lt.ros1).map(e=>e.split("/")[0]));_e.add("turtlesim");function Ht(e){return Boolean(e!=null&&typeof e=="object"&&ArrayBuffer.isView(e)&&!(e instanceof DataView))}function et(e){return e===k.Expanded?k.Collapsed:k.Expanded}function Nt(e,s,i){if(e==="all"||e==="none"){const a=e==="all"?k.Expanded:k.Collapsed,r={};for(const c of s)a===k.Collapsed&&c.endsWith(i)||(r[c]=c===i?et(a):a);return r}const t=e[i],l=t!=null?et(t):k.Collapsed;return{...e,[i]:l}}function Rt(e,s){const i=new Set,t=(l,a)=>{if(a!=null&&!(typeof a!="object"&&typeof a!="function")&&!(Array.isArray(a)&&a.length>s)&&!Ht(a)){l.length>0&&i.add(l.join("~"));for(const r of Object.getOwnPropertyNames(a)){const c=[r,...l],u=a[r];t(c,u)}}};return t([],e),i}function tt(e,s){for(const i in e)i===M.ADDED.labelText||i===M.CHANGED.labelText||i===M.DELETED.labelText?s[i]++:typeof e[i]=="object"&&e[i]!=null&&tt(e[i],s);return s}const Ce=new Map;for(const e of Object.values(Zt.foxgloveMessageSchemas)){const s=`https://foxglove.dev/docs/studio/messages/${(0,b.kebabCase)(e.name)}`;Ce.set(`foxglove_msgs/${e.name}`,s),Ce.set(`foxglove_msgs/msg/${e.name}`,s),Ce.set(`foxglove.${e.name}`,s)}function zt(e){const s=e.split(/[/.]/),i=(0,b.first)(s),t=(0,b.last)(s);if(i!=null&&_e.has(i))return`https://docs.ros.org/api/${i}/html/msg/${t}.html`;const l=Ce.get(e);if(l!=null)return l}const $t=(0,G.ZL)()(e=>({diff:{float:"right",display:"flex",alignItems:"center",gap:e.spacing(.75),marginRight:e.spacing(.75)},badge:{display:"inline-flex",alignItems:"center",gap:e.spacing(.25),padding:e.spacing(0,.75),borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper},changeIndicator:{display:"inline-block",width:e.spacing(.75),height:e.spacing(.75),borderRadius:"50%",backgroundColor:e.palette.warning.main}}));function kt({data:e,itemType:s}){const{classes:i}=$t(),{ADDED:t,DELETED:l,CHANGED:a,ID:r}=M,c=e[r.labelText],u=c?Object.keys(c).map(d=>`${d}: ${c[d]}`).join(", "):void 0,f=tt(e,{[t.labelText]:0,[a.labelText]:0,[l.labelText]:0});return(0,n.jsxs)(n.Fragment,{children:[c&&(0,n.jsxs)(n.Fragment,{children:[s," ",u]}),(0,n.jsxs)("div",{className:i.diff,children:[(f[t.labelText]!==0||f[l.labelText]!==0)&&(0,n.jsxs)("div",{className:i.badge,children:[f[t.labelText]!==0&&(0,n.jsx)(v.Z,{variant:"caption",color:"success.main",children:`${M.ADDED.indicator}${f[t.labelText]}`}),f[l.labelText]!==0&&(0,n.jsx)(v.Z,{variant:"caption",color:"error.main",children:`${M.DELETED.indicator}${f[l.labelText]}`})]}),f[a.labelText]!==0&&(0,n.jsx)("div",{className:i.changeIndicator})]})]})}var $e=o(20379);const nt=512;function Ee({itemLabel:e}){const s=e.length>=nt,[i,t]=(0,h.useState)(!s),l=(0,h.useCallback)(()=>{t(!0)},[]),a=i?e:e.slice(0,nt);return s?(0,n.jsx)($e.Z,{title:i?"":"Text was truncated, click to see all",placement:"top",children:(0,n.jsx)("span",{onClick:l,style:{cursor:i?"inherit":"pointer"},children:`${a}${i?"":"..."}`})}):(0,n.jsx)("span",{children:e})}var Ft=o(63249),ot=o(16003),ke=o(90546),st=o(27999),Bt=o(49302);function Me(e,s){if(s!=null)return typeof s=="bigint"?s.toString():(0,Bt.f)(s)?Array.from(s):s}const Vt=(0,G.ZL)()(e=>({button:{padding:e.spacing(.125),".MuiSvgIcon-root":{fontSize:`${e.typography.pxToRem(16)} !important`},".MuiButton-startIcon":{marginRight:e.spacing(.5)},"&:hover":{backgroundColor:"transparent"}}}));function Wt({data:e,diffData:s,diff:i,datatype:t,message:l,diffMessage:a}){const{classes:r}=Vt(),c=(0,ot.Z)(e),u=(0,ot.Z)(s),f=t?zt(t):void 0,d=(0,h.useCallback)(()=>JSON.stringify(c.current,Me,2)??"",[c]),p=(0,h.useCallback)(()=>JSON.stringify(u.current,Me,2)??"",[u]),L=(0,h.useCallback)(()=>JSON.stringify(i,Me,2)??"",[i]);return(0,n.jsxs)(ne.Z,{alignItems:"flex-start",paddingInline:.25,paddingBlockStart:.75,children:[(0,n.jsxs)(ne.Z,{direction:"row",alignItems:"center",gap:.5,children:[(0,n.jsxs)(v.Z,{variant:"caption",lineHeight:1.2,color:"text.secondary",children:[a?"base":f?(0,n.jsx)(Ft.Z,{target:"_blank",color:"inherit",variant:"caption",underline:"hover",rel:"noopener noreferrer",href:f,children:t}):t,` @ ${(0,st.Eo)(l.receiveTime)} sec`]}),(0,n.jsx)(ke.Z,{size:"small",iconSize:"inherit",className:r.button,getText:d})]}),a?.receiveTime&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(ne.Z,{direction:"row",alignItems:"center",gap:.5,children:[(0,n.jsx)(v.Z,{variant:"caption",lineHeight:1.2,color:"text.secondary",children:`diff @ ${(0,st.Eo)(a.receiveTime)} sec `}),(0,n.jsx)(ke.Z,{size:"small",iconSize:"inherit",className:r.button,getText:p})]}),(0,n.jsx)(ke.Z,{size:"small",iconSize:"inherit",className:r.button,getText:L,children:"Copy diff of msgs"})]})]})}var Ut=o(42713),Gt=o(98967),Jt=o(85321),Kt=o(27147),Qt=o(21580),Xt=o(42012),Yt=o(96511),wt=o(76217),it=o(62421),rt=o(11234),qt=o(28e3);function _t({itemLabel:e}){const s=` ${we} `,i=`${e}`.split(s);if(i.length===2){const[l,a]=i,r=JSON.parse(JSON.stringify(l)??""),c=JSON.parse(JSON.stringify(a)??"");return(0,n.jsxs)(ze,{style:{color:M.CHANGED.color},children:[(0,n.jsx)(Ee,{itemLabel:r}),s,(0,n.jsx)(Ee,{itemLabel:c})]})}return(0,n.jsx)(ze,{children:(0,n.jsx)(Ee,{itemLabel:e})})}var en=o(2784);const at=(0,G.D2)(wt.Z,e=>({root:{"&.MuiIconButton-root":{fontSize:e.typography.pxToRem(16),opacity:.6,padding:0}}})),tn=(0,G.ZL)()({placeholderActionContainer:{alignItems:"inherit",display:"inherit",gap:"inherit",visibility:"hidden"}}),nn={key:"",tooltip:"",icon:(0,n.jsx)(Jt.Z,{fontSize:"inherit"})},on=4;function sn(e){const s=(0,h.useRef)(void 0),{arrLabel:i,basePath:t,itemLabel:l,itemValue:a,valueAction:r,onTopicPathChange:c,openSiblingPanel:u}=e,[f,d]=(0,h.useState)(!1),p=(0,h.useCallback)(T=>()=>{(0,it.openSiblingPlotPanel)(u,`${t}${T}`)},[t,u]),L=(0,h.useCallback)(T=>()=>{(0,rt.openSiblingStateTransitionsPanel)(u,`${t}${T}`)},[t,u]),N=(0,h.useCallback)(()=>{c(`${t}${r?.filterPath}`)},[t,r,c]),se=(0,h.useCallback)(T=>{qt.Z.copy(T).then(()=>{d(!0),s.current=setTimeout(()=>{d(!1)},1500)}).catch(I=>{console.warn(I)})},[]),K=(0,h.useMemo)(()=>{const T=[];if(i.length>0&&T.push({key:"Copy",activeColor:f?"success":"primary",tooltip:f?"Copied":"Copy to Clipboard",icon:f?(0,n.jsx)(Ut.Z,{fontSize:"inherit"}):(0,n.jsx)(Gt.Z,{fontSize:"inherit"}),onClick:()=>{se(JSON.stringify(a,Me,2)??"")}}),r!=null){const I=it.plotableRosTypes.includes(r.primitiveType),ye=rt.transitionableRosTypes.includes(r.primitiveType),_=r.multiSlicePath===r.singleSlicePath;r.filterPath.length>0&&T.push({key:"Filter",tooltip:"Filter on this value",icon:(0,n.jsx)(Kt.Z,{fontSize:"inherit"}),onClick:N}),I&&T.push({key:"line",tooltip:"Plot this value on a line chart",icon:(0,n.jsx)(Yt.Z,{fontSize:"inherit"}),onClick:p(r.singleSlicePath)}),I&&!_&&T.push({key:"scatter",tooltip:"Plot this value on a scatter plot",icon:(0,n.jsx)(Xt.Z,{fontSize:"inherit"}),onClick:p(r.multiSlicePath)}),ye&&_&&T.push({key:"stateTransitions",tooltip:"View state transitions for this value",icon:(0,n.jsx)(Qt.Z,{fontSize:"inherit"}),onClick:L(r.singleSlicePath)})}return T},[i.length,f,se,a,N,p,L,r]),Oe=(0,h.useMemo)(()=>{const T=[];for(let I=K.length;I<on;I++)T.push({...nn,key:`empty-${I}`});return T},[K.length]),{classes:Pe,cx:ie}=tn();(0,h.useEffect)(()=>()=>{s.current!=null&&clearTimeout(s.current)},[]);const[V,me]=(0,h.useState)(!1);return(0,n.jsxs)(ne.Z,{inline:!0,flexWrap:"wrap",direction:"row",alignItems:"center",gap:.25,onPointerEnter:()=>{me(!0)},onPointerLeave:()=>{me(!1)},children:[(0,n.jsx)(_t,{itemLabel:l}),i,V&&K.map(T=>(0,n.jsx)($e.Z,{arrow:!0,title:T.tooltip,placement:"top",children:(0,n.jsx)(at,{size:"small",activeColor:T.activeColor,onClick:T.onClick,color:"inherit",icon:T.icon})},T.key)),(0,n.jsx)("span",{className:ie(Pe.placeholderActionContainer),children:V&&Oe.map(T=>(0,n.jsx)($e.Z,{arrow:!0,title:T.tooltip,placement:"top",children:(0,n.jsx)(at,{size:"small",color:"inherit",icon:T.icon})},T.key))})]})}const lt=en.memo(sn),rn=(e,s,i)=>typeof s=="string"&&i.structureType==="message"&&typeof e=="object",an=(e,s,i)=>typeof s=="number"&&i.structureType==="array"&&Array.isArray(e);function ln(e,s,i){let t="",l="",a="",r=e,c=s;for(const u of i){if(c==null||r==null)break;if(rn(r,u,c))c=c.structureType==="message"&&typeof u=="string"?c.nextByName[u]:void 0,r=r[u],l.endsWith("[:]")&&c?.structureType==="primitive"?typeof r=="bigint"?a=`${l}{${u}==${r.toString()}}`:a=`${l}{${u}==${JSON.stringify(r)??""}}`:a="",t+=`.${u}`,l+=`.${u}`;else if(an(r,u,c)){r=r[u],c=c.structureType==="array"?c.next:void 0,l=`${t}[:]`;let f;if(c?.structureType==="message"&&(f=Object.entries(c.nextByName).find(([d,p])=>p.structureType==="primitive"&&(0,Ye.Q)(d))?.[0]),typeof r=="object"&&r!=null&&typeof f=="string"){const d=r[f];t+=`[:]{${f}==${typeof d=="bigint"?d.toString():JSON.stringify(d)??""}}`}else t+=`[${u}]`}else{if(c.structureType==="primitive")return;throw new Error(`Invalid structureType: ${c.structureType} for value/pathItem.`)}}if(c&&c.structureType==="primitive"&&r!=null)return{singleSlicePath:t,multiSlicePath:l,primitiveType:c.primitiveType,filterPath:a}}const cn=(e,s)=>{let i=e;for(const t of s){if(i==null)break;if(i.structureType==="message"&&typeof t=="string")i=i.nextByName[t];else if(i.structureType==="array"&&typeof t=="number")i=i.next;else{if(i.structureType==="primitive")return i;throw new Error(`Invalid structureType: ${i.structureType} for value/pathItem.`)}}return i},Fe=e=>Array.isArray(e)?e.filter(s=>s!=null).length===1:!1,Be=e=>Fe(e)&&typeof e[0]=="object"?e[0]:e;function Ie(e){return typeof e=="object"&&e!=null&&"toJSON"in e?e.toJSON():e}const un=(0,G.ZL)()(e=>({topic:{fontFamily:Pt.R.SANS_SERIF,fontFeatureSettings:`${e.typography.fontFeatureSettings}, "zero"`},hoverObserver:{display:"inline-flex",alignItems:"center"}}));function fn(e){const{palette:{mode:s}}=(0,j.Z)(),{classes:i}=un(),t=(0,Ot.lk)(),{config:l,saveConfig:a}=e,{openSiblingPanel:r}=(0,Je.R)(),{topicPath:c,diffMethod:u,diffTopicPath:f,diffEnabled:d,showFullMessageForDiff:p}=l,{topics:L,datatypes:N}=(0,E.Ui)(),se=(0,Mt.W0)(),{setMessagePathDropConfig:K}=(0,Je.R)();(0,h.useEffect)(()=>{K({getDropStatus(g){return{canDrop:!0,effect:"replace"}},handleDrop(g){a({topicPath:g.path})}})},[K,a]);const Oe=Te(),Pe=(0,h.useMemo)(()=>d?(g,D,z)=>(0,n.jsx)(kt,{data:D,itemType:z}):Oe,[Oe,d]),ie=(0,h.useMemo)(()=>(0,De.ZP)(c),[c]),V=(0,h.useMemo)(()=>ie&&L.find(({name:g})=>g===ie.topicName),[ie,L]),me=(0,h.useMemo)(()=>(0,ve.pb)(N),[N]),T=(0,h.useMemo)(()=>{if(!(!V||!ie||V.schemaName==null))return(0,ve.eT)(me[V.schemaName],ie.messagePath).structureItem},[me,V,ie]),[I,ye]=(0,h.useState)(l.expansion),[_,pn]=(0,h.useState)(),Ae=Se(V?c:"",{historySize:2}),gn=Se(d?f:"")[0],ct=Ae[Ae.length-1],vn=Ae[Ae.length-2],ut=d&&u===oe.PREV_MSG_METHOD,F=ut?vn:ct,he=ut?ct:gn,ft=(0,h.useMemo)(()=>{if(F){const g=Be(F.queriedData.map(({value:D})=>D));return Rt(Ie(g),5)}else return new Set},[F]),Ve=(0,h.useMemo)(()=>I==="none"?!0:I==="all"?!1:!!(typeof I=="object"&&Object.values(I).some(g=>g===k.Collapsed)),[I]),xe=(0,h.useCallback)(g=>{ye(void 0),a({topicPath:g})},[a]),mn=(0,h.useCallback)(g=>{a({diffTopicPath:g})},[a]),yn=(0,h.useCallback)(()=>{a({diffEnabled:!d})},[d,a]),xn=(0,h.useCallback)(()=>{ye(Ve?"all":"none")},[Ve]),We=(0,h.useCallback)(g=>{ye(D=>Nt(D??"all",ft,g.join("~")))},[ft]);(0,h.useEffect)(()=>{a({expansion:I})},[I,a]);const Le=(0,h.useCallback)(({constantName:g,label:D,itemValue:z,keyPath:le})=>{let R=D;typeof z=="bigint"&&(R=z.toString());let B="";if(ArrayBuffer.isView(z)){const Q=z,m=Q.slice(0,qe).join(", "),O=Q.length;B=`(${O}) [${m}${O>=qe?", ...":""}] `,R=z.constructor.name}return g!=null&&(R=`${R} (${g})`),le[0]==="nsec"&&typeof z=="number"&&(R=(0,b.padStart)(R,9,"0")),{arrLabel:B,itemLabel:R}},[]),dt=(0,h.useCallback)((g,D)=>{let z;const{arrLabel:le,itemLabel:R}=Le({constantName:z,label:g,itemValue:D,keyPath:[]});return(0,n.jsx)(lt,{arrLabel:le,basePath:"",itemLabel:R,itemValue:D,valueAction:void 0,onTopicPathChange:xe,openSiblingPanel:r})},[Le,xe,r]),ht=(0,h.useMemo)(()=>(0,It.Hh)(N),[N]),Ue=(0,h.useCallback)((g,D,z,le,R,...B)=>(0,n.jsx)(He,{className:i.hoverObserver,children:({isHovering:Q})=>{const m=(0,b.last)(B);let O;Q&&g&&(O=ln(D[m],g,B.slice(0,-1).reverse()));let Z;if(g){const X=cn(g,B.slice(0,-1).reverse());if(X){const ce=B.findIndex(Ge=>typeof Ge=="string"),gt=B[ce];if(typeof gt=="string"){const Ge=X.datatype;Z=ht[Ge]?.[gt]?.[String(R)]}}}const W=z[m]?.path??"",{arrLabel:U,itemLabel:pe}=Le({constantName:Z,label:le,itemValue:R,keyPath:B});return(0,n.jsx)(lt,{arrLabel:U,basePath:W,itemLabel:pe,itemValue:R,valueAction:O,onTopicPathChange:xe,openSiblingPanel:r})}}),[i.hoverObserver,ht,Le,xe,r]),bn=(0,h.useCallback)(()=>{const g=m=>{if(I==="all")return!0;if(I==="none")return!1;const O=m.join("~");return I&&I[O]===k.Collapsed?!1:(I&&I[O]===k.Expanded,!0)};if(c.length===0)return(0,n.jsx)(S.Z,{children:"No topic selected"});if(d&&u===oe.CUSTOM_METHOD&&(!F||!he))return(0,n.jsx)(S.Z,{children:`Waiting to diff next messages from "${c}" and "${f}"`});if(!F)return(0,n.jsx)(S.Z,{children:"Waiting for next message"});const D=Be(F.queriedData.map(({value:m})=>m)),z=F.queriedData.length===1&&typeof F.queriedData[0]?.value=="object",le=D!=null&&typeof D!="object"||Fe(D)&&D[0]!=null&&typeof D[0]!="object",R=Fe(D)?D[0]:D,B=he&&Be(he.queriedData.map(({value:m})=>m)),Q=d?je({before:Ie(D),after:Ie(B),idLabel:void 0,showFullMessageForDiff:p}):{};return(0,n.jsxs)(ne.Z,{className:i.topic,flex:"auto",overflowX:"hidden",paddingLeft:.75,"data-testid":"panel-scroll-container",children:[(0,n.jsx)(Wt,{data:D,diffData:B,diff:Q,message:F.messageEvent,...V?{datatype:V.schemaName}:void 0,...he?{diffMessage:he.messageEvent}:void 0}),le?(0,n.jsx)(v.Z,{variant:"h1",fontSize:_,whiteSpace:"pre-wrap",style:{wordWrap:"break-word"},children:(0,n.jsx)(Ee,{itemLabel:String(R)})}):d&&(0,b.isEqual)({},Q)?(0,n.jsx)(S.Z,{children:"No difference found"}):(0,n.jsxs)(n.Fragment,{children:[d&&(0,n.jsx)(y.Z,{disableTypography:!0,checked:p,control:(0,n.jsx)(C.Z,{size:"small",defaultChecked:!0,onChange:()=>{a({showFullMessageForDiff:!p})}}),label:"Show full msg"}),(0,n.jsx)(ae.ZP,{labelRenderer:m=>(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ze,{children:(0,b.first)(m)}),(0,n.jsx)("span",{style:{fontSize:0},children:"\xA0"})]}),shouldExpandNode:g,onExpand:(m,O,Z)=>{We(Z)},onCollapse:(m,O,Z)=>{We(Z)},hideRoot:!0,invertTheme:!1,getItemString:Pe,valueRenderer:(m,O,...Z)=>d?dt(m,O):z?Ue(T,[D],F.queriedData,m,O,...Z,0):Ue(T,D,F.queriedData,m,O,...Z),postprocessValue:m=>{if(m==null)return m;const O=m[M.ID.labelText],Z=m[M.ADDED.labelText],W=m[M.CHANGED.labelText],U=m[M.DELETED.labelText];return(Z!=null?1:0)+(W!=null?1:0)+(U!=null?1:0)==1&&O==null?Z??W??U:Ie(m)},theme:{...t,tree:{margin:0},nestedNode:({style:m},O)=>{const Z={...m,fontSize:_,paddingTop:2,paddingBottom:2,marginTop:2,textDecoration:"inherit"};if(!d)return{style:Z};let W,U;q[O[0]]&&(W=s==="dark"?q[O[0]].invertedBackgroundColor:q[O[0]].backgroundColor,U=O[0]===M.DELETED.labelText?"line-through":"none");const pe=(0,b.get)(Q,O.slice().reverse(),{}),X=Object.keys(pe)[0];return X!=null&&q[X]&&(W=s==="dark"?q[X].invertedBackgroundColor:q[X].backgroundColor,U=X===M.DELETED.labelText?"line-through":"none"),{style:{...Z,backgroundColor:W,textDecoration:U??"inherit"}}},nestedNodeLabel:({style:m})=>({style:{...m,textDecoration:"inherit"}}),nestedNodeChildren:({style:m})=>({style:{...m,textDecoration:"inherit"}}),value:({style:m},O,Z)=>{const W={...m,fontSize:_,textDecoration:"inherit"};if(!d)return{style:W};let U,pe;const X=(0,b.get)(Q,Z.slice().reverse(),{}),ce=Object.keys(X)[0];return ce!=null&&q[ce]&&(U=s==="dark"?q[ce].invertedBackgroundColor:q[ce].backgroundColor,pe=ce===M.DELETED.labelText?"line-through":"none"),{style:{...W,backgroundColor:U,textDecoration:pe??"inherit"}}},label:{textDecoration:"inherit"}},data:d?Q:D})]})]})},[F,i.topic,_,d,he,u,f,I,Pe,t,We,dt,T,a,p,s,V,c,Ue]),pt=(0,h.useCallback)(g=>{g.action==="update"&&g.payload.path[0]==="general"&&g.payload.path[1]==="fontSize"&&pn(g.payload.value!=null?g.payload.value:void 0)},[]);return(0,h.useEffect)(()=>{se({actionHandler:pt,nodes:{general:{label:"General",fields:{fontSize:{label:"Font size",input:"select",options:[{label:"auto",value:void 0},...oe.FONT_SIZE_OPTIONS.map(g=>({label:`${g} px`,value:g}))],value:_}}}}})},[pt,_,se]),(0,n.jsxs)(ne.Z,{flex:"auto",overflow:"hidden",position:"relative",children:[(0,n.jsx)(Et,{canExpandAll:Ve,diffEnabled:d,diffMethod:u,diffTopicPath:f,onDiffTopicPathChange:mn,onToggleDiff:yn,onToggleExpandAll:xn,onTopicPathChange:xe,saveConfig:a,topicPath:c}),bn()]})}const dn={diffEnabled:!1,diffMethod:oe.CUSTOM_METHOD,diffTopicPath:"",showFullMessageForDiff:!1,topicPath:""},hn=(0,vt.Z)(Object.assign(fn,{panelType:"RawMessages",defaultConfig:dn}))},49302:(A,x,o)=>{o.d(x,{f:()=>v});var n=o(76635),j=o.n(n);function v(y){return(0,n.isTypedArray)(y)}},84803:(A,x,o)=>{o.d(x,{D:()=>Ze});var n=o(52322),j=o(1547),v=o(8220),y=o(60351),C=o(59635),b=o(96995);const h=new b._fP,Y=new b.USm;function H(w,P,ue,fe){return h.set(w,P,ue,fe),Y.setFromQuaternion(h,"XYZ"),[b.M8C.radToDeg(Y.x),b.M8C.radToDeg(Y.y),b.M8C.radToDeg(Y.z)]}const ee=20*365*24*60*60,te=["string","number","bigint","boolean"];function Ze(w,P,ue,fe,ge,He){if(typeof P!="object"||P==null)return(0,n.jsxs)("span",{children:[ue," ",fe]});const ae=Object.keys(P);if(ae.length===2){const{sec:E,nsec:S}=P;if(typeof E=="number"&&typeof S=="number")return E<ee?(0,C.LU)({sec:E,nsec:S}):(0,n.jsx)("span",{children:(0,C.WU)({sec:E,nsec:S},He)})}if(ae.length===2){const{x:E,y:S}=P;if(typeof E=="number"&&typeof S=="number"){const de=Math.sqrt(E*E+S*S);return(0,n.jsxs)("span",{children:["norm = ",de.toFixed(2)," ",be(E,S)]})}const{key:$,value:J}=P;if($!=null&&J!=null&&te.includes(typeof $)&&te.includes(typeof J))return`${$}: ${J}`}else if(ae.length===3){const{x:E,y:S,z:$}=P;if(typeof E=="number"&&typeof S=="number"&&typeof $=="number"){const J=Math.sqrt(E*E+S*S+$*$);return(0,n.jsxs)("span",{children:["norm = ",J.toFixed(2)," ",$===0?be(E,S):void 0]})}}else if(ae.length===4){const{x:E,y:S,z:$,w:J}=P;if(typeof E=="number"&&typeof S=="number"&&typeof $=="number"&&typeof J=="number"){const[Ne,Re,Se]=H(E,S,$,J);return(0,n.jsxs)("span",{children:["rpy = [",re(Ne),", ",re(Re),", ",re(Se),"]"]})}const{r:de,g:Te,b:ve,a:De}=P;if(typeof de=="number"&&typeof Te=="number"&&typeof ve=="number"&&typeof De=="number")return(0,n.jsx)("span",{children:(0,j.Z)({r:de*255,g:Te*255,b:ve*255,a:De}).toHex8String()})}const G=(0,v.Z)(ae,E=>{const S=P[E];if((0,y.Q)(E)&&(S==null||te.includes(typeof S)))return`${E}: ${S}`}).join(", ");return(0,n.jsxs)("span",{children:[ue," ",G.length>0?G:fe]})}function be(w,P){if(!(w===0&&P===0))return(0,n.jsx)("span",{style:{transform:`rotate(${Math.atan2(-P,w)}rad)`,display:"inline-block"},children:"\u2192"})}function re(w,P=2){return Number(w.toFixed(P))}}}]);

//# sourceMappingURL=3949.fdfa5e3deb1d4decdeab.js.map