(self.webpackChunk=self.webpackChunk||[]).push([[1194],{97287:(q,L,e)=>{"use strict";e.r(L),e.d(L,{default:()=>Ne});var t=e(52322),B=e(23759),y=e(68234),m=e(67067),Z=e(4e4),b=e(25513),d=e(28239),a=e(2784),h=e(75785),R=e(29268),V=e(75017),G=e(82044),z=e(76479),n=e(93812),o=e(39367),u=e(21580),v=e(96511),c=e(55878),F=e(27728),x=e(98214),D=e(87037),N=e(70969),Q=e(6281),_=e(74073),oe=e(20379),k=e(68434),ie=e(41739),le=e(97698),re=e(24330),ce=e.n(re),de=e(72970),ue=e(62421),ee=e(11234),W=e(39192);const te=.1,ne=["b","br","center","code","em","font","i","strong","table","td","th","tr","tt","u","h1","h2","h3","h4","h5","h6","H1","H2","H3","H4","H5","H6"],fe=(0,de.ZL)()(s=>({resizeHandle:{position:"absolute",top:0,bottom:0,width:12,marginLeft:-6,cursor:"col-resize","&:hover, &:active, &:focus":{outline:"none","&::after":{content:'""',position:"absolute",top:0,bottom:0,left:6,marginLeft:-2,width:4,backgroundColor:s.palette.action.focus}}},table:{"@media (pointer: fine)":{[`.${c.Z.root} .${F.Z.root}`]:{visibility:"hidden"},[`.${c.Z.root}:hover .${F.Z.root}`]:{visibility:"visible"}}},tableHeaderRow:{backgroundColor:s.palette.background.paper},htmlTableCell:{"h1, h2, h3, h4, h5, h6":{fontFamily:s.typography.subtitle2.fontFamily,fontSize:s.typography.subtitle2.fontSize,lineHeight:s.typography.subtitle2.lineHeight,letterSpacing:s.typography.subtitle2.letterSpacing,fontWeight:800,margin:0}},iconButton:{"&:hover, &:active, &:focus":{backgroundColor:"transparent"}}}));function se(s){return{__html:ce()(s,{allowedTags:ne,allowedAttributes:{font:["color","size"],td:["colspan"],th:["colspan"]}})}}const ae=new RegExp(`<(${ne.join("|")})`),me=(0,le.P1)(s=>s,s=>s.values.map(({key:g,value:r})=>({key:g,keyHtml:ae.test(g)?se(g):void 0,value:r,valueHtml:ae.test(r)?se(r):void 0})));function ge(s){const{onChangeSplitFraction:g,info:r,topicToRender:O,numericPrecision:A,openSiblingPanel:S,splitFraction:C=.5}=s,{classes:f}=fe(),p=(0,a.useRef)(null),Y=(0,a.useCallback)(T=>{J(!0),T.preventDefault()},[]),K=(0,a.useCallback)(()=>{J(!1)},[]),I=(0,a.useCallback)(T=>{if(!p.current)return;const{left:j,right:E}=p.current.getBoundingClientRect(),P=ie.Z((T.clientX-j)/(E-j),te,1-te);g(P)},[g]),[X,J]=(0,a.useState)(!1);(0,a.useEffect)(()=>{if(X)return window.addEventListener("mousemove",I),window.addEventListener("mouseup",K),()=>{window.removeEventListener("mousemove",I),window.removeEventListener("mouseup",K)}},[I,K,X]);const U=(0,a.useCallback)((T,j,E)=>{if(T)return(0,t.jsx)(x.Z,{className:f.htmlTableCell,dangerouslySetInnerHTML:T});let P=j;return A!=null&&he(j)&&(P=parseFloat(j).toFixed(A)),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(x.Z,{padding:"checkbox",children:(0,t.jsxs)(n.Z,{direction:"row",gap:1,alignItems:"center",flex:"auto",justifyContent:"space-between",children:[P||"\xA0",E]})})})},[f.htmlTableCell,A]),w=(0,a.useCallback)(()=>me(r.status).map(({key:j,value:E,keyHtml:P,valueHtml:i},l)=>{const M=`${O}.status[:]{hardware_id=="${r.status.hardware_id}"}{name=="${r.status.name}"}.values[:]{key=="${j}"}.value`;let $;return E.length>0&&($=isNaN(Number(E))?(0,t.jsx)(D.Z,{className:f.iconButton,title:"Open in State Transitions panel",color:"inherit",size:"small",onClick:()=>{(0,ee.openSiblingStateTransitionsPanel)(S,M)},children:(0,t.jsx)(u.Z,{fontSize:"inherit"})}):(0,t.jsx)(D.Z,{className:f.iconButton,title:"Open in Plot panel",color:"inherit",size:"small","data-testid":"open-plot-icon",onClick:()=>{(0,ue.openSiblingPlotPanel)(S,M)},children:(0,t.jsx)(v.Z,{fontSize:"inherit"})})),(0,t.jsxs)(N.Z,{hover:!0,children:[U(P,j),U(i,E,$)]},l)}),[f.iconButton,r.status,S,U,O]),H={[W.zq.OK]:"success.main",[W.zq.ERROR]:"error.main",[W.zq.WARN]:"warning.main",[W.zq.STALE]:"info.main"};return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:f.resizeHandle,style:{left:`${100*C}%`},onMouseDown:Y,"data-testid-resizehandle":!0}),(0,t.jsx)(Q.Z,{className:f.table,size:"small",ref:p,children:(0,t.jsxs)(_.Z,{children:[(0,t.jsxs)(N.Z,{style:{height:0},children:[(0,t.jsx)(x.Z,{padding:"none",style:{width:`${100*C}%`,borderRight:"none"}}),(0,t.jsx)(x.Z,{padding:"none",style:{borderLeft:"none"}})]}),(0,t.jsx)(N.Z,{className:f.tableHeaderRow,children:(0,t.jsx)(x.Z,{variant:"head","data-testid":"DiagnosticStatus-display-name",colSpan:2,children:(0,t.jsx)(oe.Z,{arrow:!0,title:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)(k.Z,{variant:"body2",children:["Hardware ID: ",(0,t.jsx)("code",{children:r.status.hardware_id})]}),(0,t.jsxs)(k.Z,{variant:"body2",children:["Name: ",(0,t.jsx)("code",{children:r.status.name})]})]}),children:(0,t.jsx)(k.Z,{color:H[r.status.level],variant:"subtitle1",fontWeight:800,children:r.displayName})})})}),(0,t.jsx)(N.Z,{hover:!0,children:(0,t.jsx)(x.Z,{colSpan:2,padding:"checkbox",children:(0,t.jsxs)(n.Z,{direction:"row",flex:"auto",alignItems:"center",justifyContent:"space-between",gap:1,children:[(0,t.jsx)(k.Z,{flex:"auto",color:H[r.status.level],variant:"inherit",fontWeight:800,children:r.status.message}),(0,t.jsx)(n.Z,{direction:"row",alignItems:"center",justifyContent:"space-between",gap:1,children:(0,t.jsx)(D.Z,{className:f.iconButton,title:"Open in State Transitions panel",size:"small",onClick:()=>{(0,ee.openSiblingStateTransitionsPanel)(S,`${O}.status[:]{hardware_id=="${r.status.hardware_id}"}{name=="${r.status.name}"}.message`)},children:(0,t.jsx)(u.Z,{fontSize:"inherit"})})})]})})}),w()]})})]})}function he(s){return s.startsWith("0")&&s.length>1&&(s[1]==="x"||s[1]==="X"||s[1]==="o"||s[1]==="O")?!1:!isNaN(parseFloat(s))&&isFinite(Number(s))}var ve=e(30165),pe=e(36537);function ye(s,g){let r=!1;for(const O of g){const{status:A}=O.message;if(A.length!==0)for(const S of A){const C=(0,pe.N)(S).hardware_id??"",f=S.name,p=s.get(C);p?!p.has(f)&&f&&(r=!0,p.add(f)):(r=!0,s.set(C,new Set([f])))}}return r?new Map(s):s}const xe=()=>new Map;function Se(s){const g=(0,a.useMemo)(()=>s?[s]:[],[s]);return(0,h.CC)({topics:g,restore:xe,addMessages:ye})}var je=e(99549);const Ze=["diagnostic_msgs/DiagnosticArray","diagnostic_msgs/msg/DiagnosticArray","ros.diagnostic_msgs.DiagnosticArray"];function be(s){const{saveConfig:g,config:r}=s,{topics:O}=(0,h.Ui)(),{openSiblingPanel:A}=(0,G.R)(),{selectedHardwareId:S,selectedName:C,splitFraction:f,topicToRender:p,numericPrecision:Y}=r,K=(0,o.W0)(),I=(0,a.useMemo)(()=>{const i=O.filter(l=>l.schemaName!=null&&Ze.includes(l.schemaName)).map(l=>l.name);return Z.Z([...i])},[O]),X=(0,a.useMemo)(()=>I.includes(p)?p:void 0,[I,p]),J=(0,je.Z)(X),U=Se(X),w=(0,a.useMemo)(()=>{const i=[];for(const[l,M]of U){l&&i.push({label:l,hardwareId:l,name:void 0});for(const $ of M)if($){const Pe=(0,W.Gf)(l,$);i.push({label:Pe,hardwareId:l,name:$})}}return i},[U]),H=(0,a.useMemo)(()=>S!=null?(0,W.Gf)(S,C??""):void 0,[S,C]),T=(0,a.useMemo)(()=>w.find(i=>i.label===H)??null,[w,H]),j=(0,a.useMemo)(()=>{const i=J.get(S??""),l=[];if(i!=null)for(const M of i.values())(C==null||C===M.status.name)&&l.push(M);return l},[J,S,C]),E=w.length>0?"No matches":"Waiting for diagnostics...",P=(0,a.useCallback)(i=>{if(i.action!=="update")return;const{path:l,value:M}=i.payload;g((0,m.Uy)($=>b.Z($,l.slice(1),M)))},[g]);return(0,a.useEffect)(()=>{K({actionHandler:P,nodes:(0,ve.N)(p,Y,I)})},[P,I,p,Y,K]),(0,t.jsxs)(n.Z,{flex:"auto",overflow:"hidden",children:[(0,t.jsx)(z.Z,{children:(0,t.jsx)(B.Z,{disablePortal:!0,blurOnSelect:!0,disabled:w.length===0,options:w,value:T??null,noOptionsText:E,onChange:(i,l)=>{if(!l){g({selectedHardwareId:void 0,selectedName:void 0});return}g({selectedHardwareId:l.hardwareId,selectedName:l.name})},fullWidth:!0,size:"small",renderInput:i=>(0,t.jsx)(y.Z,{variant:"standard",...i,InputProps:{...i.InputProps,disableUnderline:!0},placeholder:H??"Filter"})})}),j.length>0?(0,t.jsx)(n.Z,{flex:"auto",overflowY:"auto",children:d.Z(j,({status:i})=>i.name.toLowerCase()).map(i=>(0,t.jsx)(ge,{info:i,splitFraction:f,onChangeSplitFraction:l=>{s.saveConfig({splitFraction:l})},topicToRender:p,numericPrecision:Y,openSiblingPanel:A},i.id))}):H?(0,t.jsxs)(R.Z,{children:["Waiting for diagnostics from ",(0,t.jsx)("code",{children:H})]}):(0,t.jsx)(R.Z,{children:"No diagnostic node selected"})]})}const Ce={topicToRender:"/diagnostics"},Ne=(0,V.Z)(Object.assign(be,{panelType:"DiagnosticStatusPanel",defaultConfig:Ce}))},30165:(q,L,e)=>{"use strict";e.d(L,{N:()=>B,Y:()=>t});function t(y,m,Z){const b=Z.map(h=>({label:h,value:h})),d=Z.includes(m);d||b.unshift({value:m,label:m});const a=d?void 0:`Topic ${m} is not available`;return{general:{label:"General",fields:{topicToRender:{label:"Topic",input:"select",value:m,error:a,options:b},sortByLevel:{label:"Sort by level",input:"boolean",value:y.sortByLevel}}}}}function B(y,m,Z){const b=Z.map(h=>({label:h,value:h})),d=Z.includes(y);d||b.unshift({value:y,label:y});const a=d?void 0:`Topic ${y} is not available`;return{general:{label:"General",fields:{topicToRender:{label:"Topic",input:"select",value:y,error:a,options:b},numericPrecision:{label:"Numeric precision",input:"number",min:0,max:17,precision:0,step:1,placeholder:"auto",value:m}}}}}},99549:(q,L,e)=>{"use strict";e.d(L,{Z:()=>b});var t=e(2784),B=e(75785),y=e(39192);function m(d,a){let h=!1;for(const R of a){const{header:V,status:G}=R.message;for(const z of G){const n=(0,y.HE)(z,V.stamp),o=z.hardware_id,u=d.get(o);u==null?(h=!0,d.set(o,new Map([[z.name,n]]))):(h=!0,u.set(z.name,n))}}return h?new Map(d):d}const Z=()=>new Map;function b(d){const a=(0,t.useMemo)(()=>d?[d]:[],[d]);return(0,B.CC)({topics:a,restore:Z,addMessages:m})}},39192:(q,L,e)=>{"use strict";e.d(L,{ON:()=>d,zq:()=>Z,KD:()=>b,HE:()=>V,uE:()=>z,ep:()=>G,Gf:()=>R});var t=e(31119),B=e(28239);function y({options:n,filter:o,getText:u,sort:v=!0}){if(o==null||o==="")return n;const c=o.toLowerCase().replace(/[^a-z0-9]/g,"");if(c.length===0)return n;const F=[];for(const x of n){const D=u(x).toLowerCase();let N=-1,Q=0;for(const _ of c){if(N=D.indexOf(_,N+1),N===-1)break;Q+=N}N!==-1&&F.push({option:x,score:Q*D.length})}return v&&F.sort((x,D)=>x.score-D.score),F.map(x=>x.option)}const m=5e3,Z={OK:0,WARN:1,ERROR:2,STALE:3},b={0:"ok",1:"warn",2:"error",3:"stale"},d=[0,1,2,3];function a(n){return n.startsWith("/")?n.slice(1):n}function h(n,o){const u=a(n);return o!=null?`|${u}|${o}|`:`|${u}|`}function R(n,o){return o.length>0?n.length>0?`${n}: ${o}`:`${o}`:n.length>0?`${n}`:"(empty)"}function V(n,o){const u=R(n.hardware_id,n.name);let v=n;return n.values.some(({value:c})=>c.length>m)&&(v={...n,values:n.values.map(c=>c.value.length>m?{key:c.key,value:t.Z(c.value,{length:m})}:c)}),{status:v,stamp:o,id:h(n.hardware_id,n.name),displayName:u}}function G(n){const o=new Map;for(const u of n.values())for(const v of u.values()){const c=o.get(v.status.level);c?c.push(v):o.set(v.status.level,[v])}return o}const z=(n,o,u)=>{const v=n.filter(({id:c})=>!u.includes(c));return o.length===0?B.Z(v,c=>c.displayName.replace(/^\//,"")):y({options:v,filter:o,getText:({displayName:c})=>c})}},70764:()=>{},45158:()=>{},58635:()=>{},30139:()=>{},63653:()=>{}}]);

//# sourceMappingURL=1194.2eaae0ef850f99ddb268.js.map