(self.webpackChunk=self.webpackChunk||[]).push([[8955],{72278:ce=>{(function(){function C(u){return u[0]}var o={Lexer:void 0,ParserRules:[{name:"main$ebnf$1",symbols:["messagePath"],postprocess:C},{name:"main$ebnf$1",symbols:[],postprocess:function(u){return null}},{name:"main$ebnf$2",symbols:["modifier"],postprocess:C},{name:"main$ebnf$2",symbols:[],postprocess:function(u){return null}},{name:"main",symbols:["topicName","main$ebnf$1","main$ebnf$2"],postprocess:u=>({topicName:u[0].value,topicNameRepr:u[0].repr,messagePath:u[1]||[],modifier:u[2]})},{name:"id$ebnf$1",symbols:[/[a-zA-Z0-9_-]/]},{name:"id$ebnf$1",symbols:["id$ebnf$1",/[a-zA-Z0-9_-]/],postprocess:function(g){return g[0].concat([g[1]])}},{name:"id",symbols:["id$ebnf$1"],postprocess:u=>u[0].join("")},{name:"integer$ebnf$1",symbols:[{literal:"-"}],postprocess:C},{name:"integer$ebnf$1",symbols:[],postprocess:function(u){return null}},{name:"integer$ebnf$2",symbols:[/[0-9]/]},{name:"integer$ebnf$2",symbols:["integer$ebnf$2",/[0-9]/],postprocess:function(g){return g[0].concat([g[1]])}},{name:"integer",symbols:["integer$ebnf$1","integer$ebnf$2"],postprocess:u=>({value:BigInt((u[0]??"")+u[1].join("")),repr:(u[0]??"")+u[1].join("")})},{name:"string$ebnf$1",symbols:[]},{name:"string$ebnf$1",symbols:["string$ebnf$1",/[^']/],postprocess:function(g){return g[0].concat([g[1]])}},{name:"string",symbols:[{literal:"'"},"string$ebnf$1",{literal:"'"}],postprocess:u=>({value:u[1].join(""),repr:`'${u[1].join("")}'`})},{name:"string$ebnf$2",symbols:[]},{name:"string$ebnf$2",symbols:["string$ebnf$2",/[^"]/],postprocess:function(g){return g[0].concat([g[1]])}},{name:"string",symbols:[{literal:'"'},"string$ebnf$2",{literal:'"'}],postprocess:u=>({value:u[1].join(""),repr:`"${u[1].join("")}"`})},{name:"variable$ebnf$1",symbols:["id"],postprocess:C},{name:"variable$ebnf$1",symbols:[],postprocess:function(u){return null}},{name:"variable",symbols:[{literal:"$"},"variable$ebnf$1"],postprocess:(u,g)=>({value:{variableName:u[1]||"",startLoc:g},repr:`$${u[1]||""}`})},{name:"value",symbols:["integer"],postprocess:u=>u[0]},{name:"value",symbols:["string"],postprocess:u=>u[0]},{name:"value$string$1",symbols:[{literal:"t"},{literal:"r"},{literal:"u"},{literal:"e"}],postprocess:function(g){return g.join("")}},{name:"value",symbols:["value$string$1"],postprocess:u=>({value:!0,repr:"true"})},{name:"value$string$2",symbols:[{literal:"f"},{literal:"a"},{literal:"l"},{literal:"s"},{literal:"e"}],postprocess:function(g){return g.join("")}},{name:"value",symbols:["value$string$2"],postprocess:u=>({value:!1,repr:"false"})},{name:"value",symbols:["variable"],postprocess:u=>u[0]},{name:"topicName$ebnf$1",symbols:["slashID"]},{name:"topicName$ebnf$1",symbols:["topicName$ebnf$1","slashID"],postprocess:function(g){return g[0].concat([g[1]])}},{name:"topicName",symbols:["topicName$ebnf$1"],postprocess:u=>({value:u[0].join(""),repr:u[0].join("")})},{name:"topicName$ebnf$2",symbols:[]},{name:"topicName$ebnf$2",symbols:["topicName$ebnf$2","slashID"],postprocess:function(g){return g[0].concat([g[1]])}},{name:"topicName",symbols:["id","topicName$ebnf$2"],postprocess:u=>({value:u[0]+u[1].join(""),repr:u[0]+u[1].join("")})},{name:"topicName",symbols:["quotedString"],postprocess:C},{name:"slashID$ebnf$1",symbols:["id"],postprocess:C},{name:"slashID$ebnf$1",symbols:[],postprocess:function(u){return null}},{name:"slashID",symbols:[{literal:"/"},"slashID$ebnf$1"],postprocess:u=>u.join("")},{name:"quotedString$ebnf$1",symbols:[]},{name:"quotedString$ebnf$1$subexpression$1",symbols:[/[^"\\]/]},{name:"quotedString$ebnf$1$subexpression$1$string$1",symbols:[{literal:"\\"},{literal:"\\"}],postprocess:function(g){return g.join("")}},{name:"quotedString$ebnf$1$subexpression$1",symbols:["quotedString$ebnf$1$subexpression$1$string$1"],postprocess:u=>"\\"},{name:"quotedString$ebnf$1$subexpression$1$string$2",symbols:[{literal:"\\"},{literal:'"'}],postprocess:function(g){return g.join("")}},{name:"quotedString$ebnf$1$subexpression$1",symbols:["quotedString$ebnf$1$subexpression$1$string$2"],postprocess:u=>'"'},{name:"quotedString$ebnf$1",symbols:["quotedString$ebnf$1","quotedString$ebnf$1$subexpression$1"],postprocess:function(g){return g[0].concat([g[1]])}},{name:"quotedString",symbols:[{literal:'"'},"quotedString$ebnf$1",{literal:'"'}],postprocess:u=>({value:u[1].join(""),repr:`"${u[1].join("").replace(/[\\"]/g,g=>`\\${g}`)}"`})},{name:"messagePath$ebnf$1",symbols:[]},{name:"messagePath$ebnf$1",symbols:["messagePath$ebnf$1","messagePathElement"],postprocess:function(g){return g[0].concat([g[1]])}},{name:"messagePath$ebnf$2",symbols:[{literal:"."}],postprocess:C},{name:"messagePath$ebnf$2",symbols:[],postprocess:function(u){return null}},{name:"messagePath",symbols:["messagePath$ebnf$1","messagePath$ebnf$2"],postprocess:u=>u[0].reduce((g,v)=>g.concat(v),[]).concat(u[1]?[{type:"name",name:"",repr:""}]:[])},{name:"messagePathElement$ebnf$1",symbols:["slice"],postprocess:C},{name:"messagePathElement$ebnf$1",symbols:[],postprocess:function(u){return null}},{name:"messagePathElement$ebnf$2",symbols:["filter"],postprocess:C},{name:"messagePathElement$ebnf$2",symbols:[],postprocess:function(u){return null}},{name:"messagePathElement",symbols:[{literal:"."},"name","messagePathElement$ebnf$1","messagePathElement$ebnf$2"],postprocess:u=>[u[1],u[2],u[3]].filter(g=>g!==null)},{name:"messagePathElement",symbols:["filter"],postprocess:C},{name:"name",symbols:["id"],postprocess:u=>({type:"name",name:u[0],repr:u[0]})},{name:"name",symbols:["quotedString"],postprocess:u=>({type:"name",name:u[0].value,repr:u[0].repr})},{name:"sliceVal",symbols:["integer"],postprocess:u=>Number(u[0].value)},{name:"sliceVal",symbols:["variable"],postprocess:u=>u[0].value},{name:"slice",symbols:[{literal:"["},"sliceVal",{literal:"]"}],postprocess:u=>({type:"slice",start:u[1],end:u[1]})},{name:"slice$ebnf$1",symbols:["sliceVal"],postprocess:C},{name:"slice$ebnf$1",symbols:[],postprocess:function(u){return null}},{name:"slice$ebnf$2",symbols:["sliceVal"],postprocess:C},{name:"slice$ebnf$2",symbols:[],postprocess:function(u){return null}},{name:"slice",symbols:[{literal:"["},"slice$ebnf$1",{literal:":"},"slice$ebnf$2",{literal:"]"}],postprocess:u=>({type:"slice",start:u[1]===null?0:u[1],end:u[3]===null?1/0:u[3]})},{name:"simplePath$ebnf$1",symbols:[]},{name:"simplePath$ebnf$1$subexpression$1",symbols:[{literal:"."},"id"]},{name:"simplePath$ebnf$1",symbols:["simplePath$ebnf$1","simplePath$ebnf$1$subexpression$1"],postprocess:function(g){return g[0].concat([g[1]])}},{name:"simplePath",symbols:["id","simplePath$ebnf$1"],postprocess:u=>[u[0]].concat(u[1].map(g=>g[1]))},{name:"filter$ebnf$1",symbols:["simplePath"],postprocess:C},{name:"filter$ebnf$1",symbols:[],postprocess:function(u){return null}},{name:"filter",symbols:[{literal:"{"},"filter$ebnf$1",{literal:"}"}],postprocess:(u,g)=>({type:"filter",path:u[1]||[],value:void 0,nameLoc:g+1,valueLoc:g+1,repr:(u[1]||[]).join(".")})},{name:"filter$ebnf$2",symbols:["simplePath"],postprocess:C},{name:"filter$ebnf$2",symbols:[],postprocess:function(u){return null}},{name:"filter$string$1",symbols:[{literal:"="},{literal:"="}],postprocess:function(g){return g.join("")}},{name:"filter",symbols:[{literal:"{"},"filter$ebnf$2","filter$string$1","value",{literal:"}"}],postprocess:(u,g)=>({type:"filter",path:u[1]||[],value:u[3].value,nameLoc:g+1,valueLoc:g+1+(u[1]||[]).join(".").length+u[2].length,repr:`${(u[1]||[]).join(".")}==${u[3].repr}`})},{name:"modifier$string$1",symbols:[{literal:"."},{literal:"@"}],postprocess:function(g){return g.join("")}},{name:"modifier$ebnf$1",symbols:["id"],postprocess:C},{name:"modifier$ebnf$1",symbols:[],postprocess:function(u){return null}},{name:"modifier",symbols:["modifier$string$1","modifier$ebnf$1"],postprocess:u=>u[1]||""}],ParserStart:"main"};typeof ce.exports<"u"?ce.exports=o:window.grammar=o})()},57334:(ce,C,o)=>{"use strict";o.d(C,{f:()=>u});class u{#e=[];async wait(){await new Promise(v=>{this.#e.push(v)})}notifyOne(){this.#e.shift()?.()}notifyAll(){for(const v of this.#e)v();this.#e.length=0}}},62531:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>g});var u=o(79044);class g{value;#e=new u.WU;constructor(l){this.value=l}async runExclusive(l){return await this.#e.runExclusive(async()=>await l(this.value))}}},72220:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>u});function u(g){let v=!1,l;const A=(...E)=>{v?l=E:b(E)};function b(E){v=!0,l=void 0,A.currentPromise=g(...E).finally(()=>{v=!1,A.currentPromise=void 0,l&&b(l)})}return A}},69363:(ce,C,o)=>{"use strict";o.d(C,{HF:()=>g.Z,fQ:()=>l.f,jK:()=>u.Z,mN:()=>v.m,nK:()=>v.n});var u=o(62531),g=o(72220),v=o(43348),l=o(57334)},43348:(ce,C,o)=>{"use strict";o.d(C,{m:()=>u,n:()=>g});class u extends Error{name="PromiseTimeoutError"}async function g(v,l){return await new Promise((A,b)=>{const E=setTimeout(()=>{b(new u(`Promise timed out after ${l}ms`))},l);v.then(A,b).finally(()=>{clearTimeout(E)})})}},8220:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>u});function u(g,v){const l=[];let A=0;for(const b of g){const E=v(b,A++);E&&l.push(E)}return l}},75845:(ce,C,o)=>{"use strict";o.d(C,{Iq:()=>l.Z,O4:()=>b.Z,R5:()=>E.Z,UG:()=>R.U,Wk:()=>S.Z,de:()=>P.d,iY:()=>D.i,qe:()=>v.Z,t2:()=>F.t,vE:()=>g.Z,yV:()=>T.y});var u=o(50422),g=o(86193),v=o(37140),l=o(25348),A=o(77651),b=o(28690),E=o(26363),n=o(70415),S=o(88484),T=o(76097),P=o(90715),D=o(65656),R=o(46863),F=o(81448)},90715:(ce,C,o)=>{"use strict";var u="../../packages/hooks/src/selectWithUnstableIdentityWarning.ts";o.d(C,{d:()=>l});var g=o(23503);const v=g.ZP.getLogger(u);function l(A,b){return b(A)}},50422:(ce,C,o)=>{"use strict";var u=o(2784),g=o(88665),v=o.n(g);function l(A,{initiallyTrue:b}){const E=useRef(b?void 0:A),n=!shallowequal(E.current,A);return E.current=A,n}},65656:(ce,C,o)=>{"use strict";o.d(C,{i:()=>v});var u=o(2784);function g(l,A){throw A}function v(){const[,l]=(0,u.useReducer)(g,void 0);return l}},86193:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>v});var u=o(65741),g=o(2784);function v(l){const A=(0,g.useRef)(l);return u.Z(l,A.current)?A.current:(A.current=l,l)}},37140:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>g});var u=o(2784);function g(v,l){const A=(0,u.useContext)(v);if(A==null)throw new Error(`useGuaranteedContext got null for contextType${l!=null?`: '${l}'`:""}`);return A}},76097:(ce,C,o)=>{"use strict";var u="../../packages/hooks/src/useMemoryInfo.ts";o.d(C,{y:()=>A});var g=o(2784),v=o(23503);const l=v.ZP.getLogger(u);function A(b){const{refreshIntervalMs:E}=b,[n,S]=(0,g.useState)(window.performance.memory);return(0,g.useEffect)(()=>{if(!window.performance.memory){l.info("No memory information available");return}const T=setInterval(()=>{S(window.performance.memory)},E);return()=>{clearInterval(T)}},[E]),n}},25348:(ce,C,o)=>{"use strict";var u="../../packages/hooks/src/useMustNotChange.ts";o.d(C,{Z:()=>n});var g=o(2784),v=o(23503);const l=v.ZP.getLogger(u),A=S=>{const T=useRef(S);T.current!==S&&l.error("Value must not change",T.current),T.current=S},n=()=>{}},77651:(ce,C,o)=>{"use strict";var u=o(2784);function g(v){const[,l]=useState(void 0);return useCallback((...A)=>{try{return v(...A)}catch(b){l(()=>{throw b})}},[v])}},46863:(ce,C,o)=>{"use strict";o.d(C,{U:()=>g});var u=o(2784);function g(v){const[l,A]=(0,u.useState)(sessionStorage.getItem(v)??void 0),b=(0,u.useCallback)(n=>{n?(sessionStorage.setItem(v,n),window.dispatchEvent(new StorageEvent("storage",{key:v,newValue:n,storageArea:sessionStorage}))):(sessionStorage.removeItem(v),window.dispatchEvent(new StorageEvent("storage",{key:v,newValue:void 0,storageArea:sessionStorage})))},[v]),E=(0,u.useCallback)(n=>{n.key===v&&A(n.newValue??void 0)},[v]);return(0,u.useEffect)(()=>(window.addEventListener("storage",E),()=>{window.removeEventListener("storage",E)}),[E]),[l??void 0,b]}},28690:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>l});var u=o(2784),g=o(88665),v=o.n(g);function l(A){const b=(0,u.useRef)(A);return v()(A,b.current)?b.current:(b.current=A,A)}},81448:(ce,C,o)=>{"use strict";o.d(C,{t:()=>g});var u=o(2784);function g(){const v=(0,u.useRef)(!1),l=(0,u.useCallback)(()=>v.current,[]);return(0,u.useLayoutEffect)(()=>(v.current=!0,()=>{v.current=!1}),[]),l}},26363:(ce,C,o)=>{"use strict";var u="../../packages/hooks/src/useValueChangedDebugLog.ts";o.d(C,{Z:()=>n});var g=o(2784),v=o(23503);const l=v.ZP.getLogger(u),A=()=>{};function b(S,T){const P=useRef(S);P.current!==S&&l.debug(`value changed: ${T}`),useLayoutEffect(()=>{P.current=S})}const n=A},70415:(ce,C,o)=>{"use strict";var u=o(2784);function g(){const[v,l]=useState(document.visibilityState);return useEffect(()=>{l(document.visibilityState);const A=()=>{l(document.visibilityState)};return document.addEventListener("visibilitychange",A),()=>{document.removeEventListener("visibilitychange",A)}},[]),v}},88484:(ce,C,o)=>{"use strict";var u="../../packages/hooks/src/useWarnImmediateReRender.ts";o.d(C,{Z:()=>b});var g=o(2784),v=o(23503);const l=v.ZP.getLogger(u),b=()=>{}},93455:(ce,C,o)=>{"use strict";o.d(C,{o:()=>u});var u;(function(g){g.COLOR_SCHEME="colorScheme",g.TIMEZONE="timezone",g.TIME_FORMAT="time.format",g.MESSAGE_RATE="messageRate",g.UPDATES_ENABLED="updates.enabled",g.LANGUAGE="language",g.ROS_PACKAGE_PATH="ros.ros_package_path",g.TELEMETRY_ENABLED="telemetry.telemetryEnabled",g.CRASH_REPORTING_ENABLED="telemetry.crashReportingEnabled",g.SHOW_DEBUG_PANELS="showDebugPanels",g.HIDE_SIGN_IN_PROMPT="hideSignInPrompt",g.LAUNCH_PREFERENCE="launchPreference",g.SHOW_OPEN_DIALOG_ON_STARTUP="ui.open-dialog-startup",g.ENABLE_LAYOUT_DEBUGGING="enableLayoutDebugging",g.ENABLE_MEMORY_USE_INDICATOR="dev.memory-use-indicator"})(u||(u={}))},75785:(ce,C,o)=>{"use strict";o.d(C,{CC:()=>g.C,PR:()=>l.P,Ui:()=>u.U,Um:()=>A.Z,V7:()=>v.V});var u=o(35045),g=o(38988),v=o(76545),l=o(99616),A=o(44481)},99616:(ce,C,o)=>{"use strict";o.d(C,{P:()=>n});var u=o(5817),g=o.n(u),v=o(2784),l=o(91004),A=o(85026);const b=g()((S,T)=>{if(!S)return{};const P={};for(const D of T){const R=typeof D=="string"?D:D.topic,F=S.messagesByTopic[R];F&&(P[R]=F)}return P}),E=S=>{const[T]=(0,v.useState)(()=>(0,l.Z)()),P=(0,A.An)((0,v.useCallback)(({setSubscriptions:D})=>D,[]));(0,v.useEffect)(()=>{P(T,S)},[T,P,S]),(0,v.useEffect)(()=>()=>{P(T,[])},[T,P])};function n(S){const T=(0,v.useMemo)(()=>S.map(R=>R.topic),[S]);E(S);const P=(0,A.An)((0,v.useCallback)(R=>R.playerState.progress.messageCache?.blocks,[]));return(0,v.useMemo)(()=>P?P.map(R=>b(R,T)):[],[P,T])}},44481:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>l});var u=o(2784),g=o(98043),v=o(23571);function l(A){const{getCurrentLayoutState:b,savePanelConfigs:E}=(0,g._B)(),n=(0,u.useCallback)(P=>{if(A!=null)return(0,v.Y)(P.selectedLayout?.data?.configById?.[A])},[A]),S=(0,g.NS)(n),T=(0,u.useCallback)(P=>{if(A!=null)if(typeof P=="function"){const D=b().selectedLayout?.data?.configById[A];D&&E({configs:[{id:A,config:P(D)}]})}else E({configs:[{id:A,config:P}]})},[b,A,E]);return[S,T]}},35045:(ce,C,o)=>{"use strict";o.d(C,{U:()=>n});var u=o(2784),g=o(85026);function v(S){return S.datatypes}function l(S){return S.sortedTopics}function A(S){return S.playerState.activeData?.startTime}function b(S){return S.playerState.capabilities}function E(S){return S.playerState.playerId}function n(){const S=(0,g.An)(v),T=(0,g.An)(l),P=(0,g.An)(A),D=(0,g.An)(b),R=(0,g.An)(E);return(0,u.useMemo)(()=>({topics:T,datatypes:S,capabilities:D,startTime:P,playerId:R}),[D,S,R,P,T])}},38988:(ce,C,o)=>{"use strict";var u="../../packages/studio-base/src/PanelAPI/useMessageReducer.ts";o.d(C,{C:()=>T});var g=o(2784),v=o(91004),l=o(75845),A=o(23503),b=o(85026),E=o(77861);const n=A.ZP.getLogger(u);function S(P){return P.setSubscriptions}function T(P){const[D]=(0,g.useState)(()=>(0,v.Z)()),{restore:R,addMessage:F,addMessages:M,preloadType:j="partial"}=P;if([P.addMessage,P.addMessages].filter(Boolean).length!==1)throw new Error("useMessageReducer must be provided with exactly one of addMessage or addMessages");(0,E.Z)(P.restore,()=>{n.warn("useMessageReducer restore() is changing frequently. restore() will be called each time it changes, so a new function shouldn't be created on each render. (If you're using Hooks, try useCallback.)")}),(0,E.Z)(P.addMessage,()=>{n.warn("useMessageReducer addMessage() is changing frequently. addMessage() will be called each time it changes, so a new function shouldn't be created on each render. (If you're using Hooks, try useCallback.)")}),(0,E.Z)(P.addMessages,()=>{n.warn("useMessageReducer addMessages() is changing frequently. addMessages() will be called each time it changes, so a new function shouldn't be created on each render. (If you're using Hooks, try useCallback.)")});const I=(0,l.O4)(P.topics),O=(0,g.useMemo)(()=>I.map(se=>typeof se=="string"?{topic:se,preloadType:j}:se),[j,I]),w=(0,b.An)(S);(0,g.useEffect)(()=>{w(D,O)},[D,w,O]),(0,g.useEffect)(()=>()=>{w(D,[])},[D,w]);const Y=(0,g.useRef)();return(0,b.An)((0,g.useCallback)(function(Ee){const ae=Ee.messageEventsBySubscriberId.get(D),Pe=Ee.playerState.activeData?.lastSeekTime;let ye;if(!Y.current||Pe!==Y.current.lastSeekTime?ye=R(void 0):R!==Y.current.restore||F!==Y.current.addMessage||M!==Y.current.addMessages?ye=R(Y.current.reducedValue):ye=Y.current.reducedValue,ae&&ae.length>0&&ae!==Y.current?.messageEvents){if(M)ae.length>0&&(ye=M(ye,ae));else if(F)for(const pe of ae)ye=F(ye,pe)}return Y.current={messageEvents:ae,lastSeekTime:Pe,reducedValue:ye,restore:R,addMessage:F,addMessages:M},Y.current.reducedValue},[D,F,M,R]))}},76545:(ce,C,o)=>{"use strict";o.d(C,{V:()=>b});var u=o(67154),g=o(2784),v=o(75845),l=o(86286),A=o(38988);function b(E){const{historySize:n,topics:S}=E,T=(0,v.vE)(S),P=(0,g.useCallback)((R,F)=>{const M=u.Z(F,"topic"),j={...R};return Object.entries(M).forEach(([I,O])=>{const w=j[I];w&&(j[I]=(0,l.Z)(w,O,n))}),j},[n]),D=(0,g.useCallback)(R=>{const F={};for(const M of T){const j=typeof M=="string"?M:M.topic,I=R?.[j];F[j]=I?.slice(-n)??[]}return F},[T,n]);return(0,A.C)({topics:T,restore:D,addMessages:P})}},30280:(ce,C,o)=>{"use strict";o.d(C,{h:()=>u});const u=44},90546:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>D});var u=o(52322),g=o(42713),v=o(98967),l=o(20379),A=o(87037),b=o(38677),E=o(68434),n=o(2784),S=o(28e3),T=o(2784);function P(R){const{children:F,className:M,color:j="primary",edge:I,size:O="medium",iconSize:w="medium",getText:Y}=R,[se,Ee]=(0,n.useState)(!1),ae=(0,n.useCallback)(()=>{S.Z.copy(Y()).then(()=>{Ee(!0),setTimeout(()=>{Ee(!1)},1500)}).catch(Pe=>{console.warn(Pe)})},[Y]);return F==null?(0,u.jsx)(l.Z,{arrow:!0,title:se?"Copied":"Copy to clipboard",children:(0,u.jsx)(A.Z,{edge:I,className:M,size:O,onClick:ae,color:se?"success":j,children:se?(0,u.jsx)(g.Z,{fontSize:w}):(0,u.jsx)(v.Z,{fontSize:w})})}):(0,u.jsx)(b.Z,{size:O,color:"inherit",className:M,onClick:ae,startIcon:se?(0,u.jsx)(g.Z,{fontSize:w,color:"success"}):(0,u.jsx)(v.Z,{fontSize:w,color:"primary"}),children:(0,u.jsx)(E.Z,{color:se?"text.primary":j,variant:"body2",children:F})})}const D=T.memo(P)},29796:(ce,C,o)=>{"use strict";o.d(C,{v:()=>Pe});var u=o(52322),g=o(2784),v=o(16003),l=o(85026),A=o(44668),b=o(27332),E=o(24304);const n=new Map;function S(ye,pe){return .7*(ye??pe)+.3*pe}function T(ye,pe,x,N){if(pe==null||x==null){const ue=(0,A.toSec)(N);return ue>0?ye/ue:void 0}if(ye<2||(0,A.areEqual)(pe,x))return;const W=(0,A.toSec)((0,b.Ai)(x,pe));if(W>0)return(ye-1)/W}function P(ye,pe){const x=(0,A.toSec)(pe);return x>0?ye/x:void 0}const D=({playerState:ye})=>ye.activeData?.currentTime,R=({playerState:ye})=>ye.activeData?.startTime,F=({playerState:ye})=>ye.activeData?.endTime,M=ye=>ye.playerState.activeData?.topicStats??n,j=ye=>ye.playerState.capabilities,I={};function O(){const ye=(0,l.An)(D),pe=(0,l.An)(R),x=(0,l.An)(F),N=(0,l.An)(M),W=(0,l.An)(j),ue=(0,g.useMemo)(()=>x&&pe?(0,b.Ai)(x,pe):{sec:0,nsec:0},[x,pe]),Q=(0,g.useRef)({}),U=(0,g.useMemo)(()=>W.includes(E.C.playbackControl),[W]);return(0,g.useMemo)(()=>{if(!ye)return I;const Me=(0,A.fromMillis)(Date.now()),je={};for(const[we,Ze]of N)if(U){const Ke=T(Ze.numMessages,Ze.firstMessageTime,Ze.lastMessageTime,ue);je[we]=Ke}else{const Ke=Q.current[we];if(Ke==null)Q.current[we]={time:Me,count:Ze.numMessages,frequency:void 0};else{const L=Ze.numMessages-Ke.count;if(L>0){const K=(0,b.Ai)(Me,Ke.time),re=P(L,K);if(re!=null){const J=S(Ke.frequency,re);Ke.frequency=J,Ke.count=Ze.numMessages,Ke.time=Me}}je[we]=Ke.frequency}}return je},[ye,ue,U,N])}const w="\u2014",Y=new Map,se=ye=>ye.playerState.activeData?.topicStats??Y,Ee=ye=>ye.playerState.playerId,ae=ye=>ye.playerState.capabilities;function Pe({interval:ye=1}){const pe=(0,l.An)(se),x=(0,l.An)(ae),N=(0,l.An)(Ee),W=(0,v.Z)(pe),ue=(0,g.useRef)(0),Q=(0,g.useRef)(null),U=(0,g.useRef)({}),fe=O(),Me=(0,v.Z)(fe),je=(0,g.useMemo)(()=>x.includes(E.C.playbackControl),[x]),we=(0,g.useCallback)(()=>{Q.current&&Q.current.parentElement?.querySelectorAll("[data-topic]").forEach(Ze=>{if(!(Ze instanceof HTMLElement)||!Ze.dataset.topic)return;const Ke=Ze.dataset.topic,L=W.current.get(Ke);if(Ze.dataset.topicStat==="count"&&(L?Ze.innerText=L.numMessages.toLocaleString():Ze.innerText=w),Ze.dataset.topicStat==="frequency"){const K=Me.current[Ke];Ze.innerText=K!=null?`${K.toFixed(2)} Hz`:w}})},[Me,W]);return(0,g.useEffect)(()=>{if(!Q.current?.parentElement)return;const Ze=new MutationObserver(Ke=>{for(const L of Ke)for(const K of L.addedNodes)if(K instanceof HTMLElement&&K.querySelector("[data-topic]")){we();return}});return Ze.observe(Q.current.parentElement,{childList:!0,subtree:!0}),()=>{Ze.disconnect()}},[we]),(0,g.useEffect)(()=>{ue.current++%ye===0&&we()},[we,ye,pe,je]),(0,g.useEffect)(()=>{U.current={}},[N]),(0,g.useLayoutEffect)(()=>{we()},[we]),(0,u.jsx)("div",{ref:Q,style:{display:"none"}})}},44449:(ce,C,o)=>{"use strict";o.d(C,{v:()=>F});var u=o(52322),g=o(68434),v=o(63249),l=o(2784),A=o(8533),b=o(68588),E=o(28219),n=o(72970),S=o(39347),T=o(93812),P=o(98043),D=o(40301);const R=(0,n.ZL)()(M=>({root:{backgroundColor:M.palette.background.paper,width:"100%",height:"100%",overflowY:"auto"},dropTarget:{width:"100%",height:"100%",minHeight:0},isOver:{"&:after":{content:"''",borderColor:`1px solid ${M.palette.action.selected}`,backgroundColor:M.palette.action.focus,position:"absolute",top:0,right:0,left:0,bottom:0,zIndex:M.zIndex.appBar}}})),F=({tabId:M})=>{const{classes:j,cx:I}=R(),{addPanel:O}=(0,P._B)(),{t:w}=(0,b.$G)("addPanel"),[{isOver:Y},se]=(0,A.L)({accept:E.vv.WINDOW,drop:()=>({tabId:M}),collect:ae=>({isOver:ae.isOver()})}),Ee=(0,l.useCallback)(({type:ae,config:Pe,relatedConfigs:ye})=>{const pe=(0,D.nJ)(ae);O({tabId:M,id:pe,config:Pe,relatedConfigs:ye})},[O,M]);return(0,u.jsx)("div",{ref:se,"data-testid":"empty-drop-target",className:I(j.dropTarget,{[j.isOver]:Y}),children:(0,u.jsx)("div",{className:j.root,children:(0,u.jsxs)(T.Z,{paddingBottom:2,children:[(0,u.jsxs)(g.Z,{variant:"body2",paddingX:2,paddingTop:2,children:[w("selectPanelToAddToLayout")," ",(0,u.jsx)(v.Z,{color:"primary",target:"_blank",href:"https://foxglove.dev/docs/studio/layouts",children:w("learnMore",{ns:"general"})})]}),(0,u.jsx)(S.B,{mode:"grid",onPanelSelect:Ee})]})})})}},29268:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>b});var u=o(52322),g=o(68434),v=o(72970),l=o(93812);const A=(0,v.ZL)()(E=>({root:{whiteSpace:"pre-line",code:{color:E.palette.primary.main,background:"transparent",padding:0}}}));function b({children:E,className:n}){const{classes:S,cx:T}=A();return(0,u.jsx)(l.Z,{className:T(S.root,n),flex:"auto",alignItems:"center",justifyContent:"center",fullHeight:!0,paddingX:1,children:(0,u.jsx)(g.Z,{variant:"body2",color:"text.secondary",lineHeight:1.4,align:"center",children:E})})}},38256:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>T});var u=o(52322),g=o(38677),v=o(68434),l=o(63249),A=o(2784),b=o(93812),E=o(2661),n=o(53542),S=o(54329);class T extends A.Component{state={currentError:void 0};componentDidCatch(D,R){(0,E.e)(new n.g(D,R)),this.setState({currentError:{error:D,errorInfo:R}})}render(){if(this.state.currentError){const D=this.props.actions??(0,u.jsx)(b.Z,{fullHeight:!0,flex:"auto",alignItems:"flex-end",justifyContent:"flex-end",direction:"row",children:(0,u.jsx)(g.Z,{variant:"outlined",color:"secondary",onClick:()=>{this.setState({currentError:void 0})},children:"Dismiss"})});return(0,u.jsx)(S.Z,{showErrorDetails:this.props.showErrorDetails,hideErrorSourceLocations:this.props.hideErrorSourceLocations,error:this.state.currentError.error,errorInfo:this.state.currentError.errorInfo,content:(0,u.jsxs)(v.Z,{children:["Something went wrong."," ",(0,u.jsx)(l.Z,{color:"inherit",onClick:()=>{this.setState({currentError:void 0})},children:"Dismiss this error"})," ","to continue using the app. If the issue persists, try restarting the app."]}),actions:D})}return this.props.children}}},54329:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>D});var u=o(52322),g=o(68434),v=o(56961),l=o(63249),A=o(2784),b=o(72970),E=o(93812);const n=(0,b.ZL)()(R=>({grid:{display:"grid",gridTemplateRows:"auto 1fr auto",height:"100%",padding:R.spacing(2),overflowY:"auto"},errorDetailStack:{fontSize:R.typography.body2.fontSize,lineHeight:"1.3em",paddingLeft:R.spacing(2)},errorDetailContainer:{overflowY:"auto",background:R.palette.background.paper,padding:R.spacing(1),minHeight:R.spacing(10)},actions:{flex:"auto",paddingTop:R.spacing(2),textAlign:"right"}}));function S(R){return R.replace(/\s+\(.+\)$/gm,"").replace(/\s+https?:\/\/.+$/gm,"")}function T({stack:R,hideSourceLocations:F}){const{classes:M}=n(),j=(F?S(R):R).trim().replace(/^\s*at /gm,"").split(`
`).map(I=>I.trim());return(0,u.jsx)("pre",{className:M.errorDetailStack,children:j.map((I,O)=>{const w=/^(.+)\s(\(.+$)/.exec(I);return w?(0,u.jsxs)("span",{children:[(0,u.jsxs)("span",{children:[w[1]," "]}),(0,u.jsx)("span",{children:w[2]}),`
`]},O):I+`
`})})}function P(R){const{classes:F}=n(),{error:M,errorInfo:j,hideErrorSourceLocations:I=!1}=R,[O,w]=(0,A.useState)(R.showErrorDetails??!1),Y=(0,A.useMemo)(()=>{if(!O)return null;let se=M?.stack??"";const Ee=M?.toString()??"";return se.startsWith(Ee)&&(se=se.substring(Ee.length)),(0,u.jsxs)("div",{children:[(0,u.jsx)(g.Z,{fontWeight:"bold",children:"Error stack:"}),(0,u.jsx)(T,{stack:se,hideSourceLocations:I}),j&&(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(g.Z,{fontWeight:"bold",children:"Component stack:"}),(0,u.jsx)(T,{stack:j.componentStack,hideSourceLocations:I})]})]})},[M,j,I,O]);return(0,u.jsxs)("div",{className:F.grid,children:[(0,u.jsxs)(E.Z,{gap:2,paddingBottom:2,children:[(0,u.jsxs)(E.Z,{children:[(0,u.jsx)(g.Z,{variant:"h4",gutterBottom:!0,children:R.title??"The app encountered an unexpected error"}),(0,u.jsx)(g.Z,{variant:"body1",children:R.content})]}),(0,u.jsx)(v.Z,{}),(0,u.jsx)(g.Z,{variant:"subtitle2",component:"code",fontWeight:"bold",children:M?.message}),(0,u.jsxs)(l.Z,{color:"secondary",onClick:()=>{w(!O)},children:[O?"Hide":"Show"," details"]})]}),Y&&(0,u.jsx)("div",{className:F.errorDetailContainer,children:Y}),!Y&&(0,u.jsx)("div",{}),(0,u.jsx)("div",{className:F.actions,children:R.actions})]})}const D=P},16727:(ce,C,o)=>{"use strict";o.d(C,{e:()=>A});var u=o(52322),g=o(2784),v=o(72970);const l=(0,v.ZL)()({root:{whiteSpace:"pre"}});function A(b){const{str:E,indices:n,offset:S=0}=b,{classes:T}=l(),P=(0,g.useMemo)(()=>E.split("").map((D,R)=>n.has(R+S)?(0,u.jsx)("mark",{children:D},R):D),[n,S,E]);return(0,u.jsx)("span",{className:T.root,children:P})}},76217:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>A});var u=o(52322),g=o(87037),v=o(2784);const l=(0,v.forwardRef)((b,E)=>{const{icon:n,activeIcon:S,color:T,activeColor:P,onMouseLeave:D,onMouseEnter:R,...F}=b,[M,j]=(0,v.useState)(!1),I=(0,v.useCallback)(w=>{R?.(w),b.disabled!==!0&&j(!0)},[R,b.disabled]),O=(0,v.useCallback)(w=>{D?.(w),j(!1)},[D]);return(0,v.useEffect)(()=>{b.disabled===!0&&j(!1)},[b.disabled]),(0,u.jsx)(g.Z,{ref:E,...F,component:"button",onMouseEnter:I,onMouseLeave:O,color:P!=null&&M?P:T,children:S!=null&&M?S:n})});l.displayName="HoverableIconButton";const A=l},47824:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>O});var u=o(52322),g=o(85321),v=o(68434),l=o(8739),A=o(65741),b=o(72970),E=o(93812),n=o(77075);const S=w=>typeof w=="string"?w:Object.keys(w).map(Y=>`${Y}: ${w[Y]}`).join(", ");var T=o(2784);const{useState:P,useCallback:D,useRef:R,useLayoutEffect:F,useEffect:M}=T,j=(0,b.ZL)()(w=>({editor:{backgroundColor:"transparent !important",font:"inherit !important",fontFamily:`${n.R.MONOSPACE} !important`,overflow:"auto"},error:{"*":{color:`${w.palette.error.main} !important`}}}));function I({dataTestId:w,dataValidator:Y=()=>{},onChange:se,onError:Ee,parse:ae,readOnly:Pe=!1,maxHeight:ye,stringify:pe,value:x}){const{classes:N,cx:W}=j(),[ue,Q]=P(""),[U,fe]=P(""),Me=R(""),je=R(null),[we,Ze]=P(!1),Ke=D((K,re)=>{let J,Ie;if(K.trim()==="")J=Array.isArray(x)?[]:{};else try{J=ae(K)}catch($){Ie=$.message}if(Ie!=null){Q(Ie);return}Q("");const be=Y(J);if(be!=null){Q(S(be));return}re&&re(J)},[Y,ae,x]);F(()=>{if(!we&&x!==Me.current){if(A.Z(x,Me.current))return;let K="",re;try{K=pe(x)}catch(J){re=`Error stringifying the new value, using "" as default. ${J.message}`}if(fe(K),Me.current=x,re!=null){Q(re);return}Ke(K)}},[x,pe,Ke,we]);const L=D(K=>{const re=K.currentTarget.value;we||Ze(!0),fe(re),Ke(re,se)},[we,Ke,se]);return M(()=>{Ee&&ue.length>0&&Ee(ue)},[ue,Ee]),F(()=>{if(!we){const K=je.current;K&&(K.scrollTop=K.scrollHeight)}},[we,U]),(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(l.Z,{className:W(N.editor,{[N.error]:ue.length>0}),readOnly:Pe,"data-testid":w??`validated-input-${JSON.stringify(U)}`,ref:je,value:U,onChange:L,language:"json",onBlur:()=>{Ze(!1)},padding:12,style:{maxHeight:ye??300}}),ue.length>0&&(0,u.jsxs)(E.Z,{direction:"row",alignItems:"center",gap:.25,padding:.5,children:[(0,u.jsx)(g.Z,{fontSize:"inherit",color:"error"}),(0,u.jsx)(v.Z,{variant:"caption",color:"error.main",children:ue})]})]})}function O(w){function Y(se){return se==='""'?se:JSON.stringify(se,void 0,2)??""}return(0,u.jsx)(E.Z,{children:(0,u.jsx)(I,{parse:JSON.parse,stringify:Y,...w,maxHeight:"none"})})}},86451:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>l});var u=o(52322),g=o(2784);function v(A,b){if(A&&typeof A[b.key]=="function"){let E=!0;try{E=A[b.key]?.(b)??!0}finally{E&&b.preventDefault()}}}function l(A){const b=(0,g.useRef)(null),E=(0,g.useCallback)(n=>{if(!(n instanceof KeyboardEvent))return;const{target:S,type:T}=n;if(!(S instanceof HTMLInputElement||S instanceof HTMLTextAreaElement||S instanceof HTMLElement&&S.isContentEditable))switch(T){case"keydown":v(A.keyDownHandlers,n);break;case"keypress":v(A.keyPressHandlers,n);break;case"keyup":v(A.keyUpHandlers,n);break;default:break}},[A.keyDownHandlers,A.keyPressHandlers,A.keyUpHandlers]);return(0,g.useEffect)(()=>{const n=A.global===!0?document:b.current?.parentElement;return n?.addEventListener("keydown",E),n?.addEventListener("keypress",E),n?.addEventListener("keyup",E),()=>{n?.removeEventListener("keydown",E),n?.removeEventListener("keypress",E),n?.removeEventListener("keyup",E)}},[E,A.global]),(0,u.jsx)("div",{style:{display:"none"},ref:b})}},43684:(ce,C,o)=>{"use strict";o.d(C,{ZP:()=>be});var u=o(52322),g=o(73868),v=o(49609),l=o(49164),A=o(48312),b=o(57525),E=o(2784),n=o(75785),S=o(43749),T=o(47591),P=o(23759),D=o(68234),R=o(80078),F=o(16037),M=o(62515),j=o(72970),I=o(16727),O=o(68434),w=o(41739),Y=o(8301),se=o(2784);const Ee=Object.freeze({LISTBOX_PADDING:8,ROW_HEIGHT:26});function ae($){const{data:H,index:xe,style:ee}=$,de=H[xe],he={...ee,top:ee.top+Ee.LISTBOX_PADDING};return(0,u.jsx)(O.Z,{component:"li",noWrap:!0,style:he,children:de})}const Pe=se.createContext({}),ye=se.forwardRef(($,H)=>{const xe=se.useContext(Pe);return(0,u.jsx)("div",{ref:H,...$,...xe})});ye.displayName="OuterElement";const pe=se.forwardRef(function(H,xe){const{children:ee,...de}=H,he=[];ee.forEach(ve=>{he.push(ve),he.push(...ve.children??[])});const ie=2*Ee.LISTBOX_PADDING+Ee.ROW_HEIGHT*w.Z(he.length,16);return(0,u.jsx)("div",{ref:xe,children:(0,u.jsx)(Pe.Provider,{value:de,children:(0,u.jsx)(Y.t7,{height:ie,itemCount:he.length,itemData:he,itemSize:Ee.ROW_HEIGHT,outerElementType:ye,width:"100%",children:ae})})})}),x=200,N=1e3,W=(0,j.ZL)()($=>({root:{".MuiInputBase-root.MuiInputBase-sizeSmall":{backgroundColor:"transparent",paddingInline:0,"&:focus-within":{backgroundColor:$.palette.mode==="dark"?"rgba(255, 255, 255, 0.09)":"rgba(0, 0, 0, 0.06)"},"&:hover, &:focus-within":{paddingRight:$.spacing(2.5)}}},clearIndicator:{marginRight:$.spacing(-.25),opacity:$.palette.action.disabledOpacity,":hover":{background:"transparent",opacity:1}},inputError:{input:{color:$.palette.error.main}},item:{padding:6,cursor:"pointer",minHeight:"100%",lineHeight:"calc(100% - 10px)",overflowWrap:"break-word",color:$.palette.text.primary,mark:{backgroundColor:"transparent",color:$.palette.info.main,fontWeight:700}},itemSelected:{backgroundColor:(0,T.Fq)($.palette.primary.main,$.palette.action.selectedOpacity+$.palette.action.hoverOpacity)},itemHighlighted:{backgroundColor:$.palette.action.hover}}));function ue($){return function(H){if(typeof H=="string")return H;if(H!=null&&typeof H=="object"&&typeof H.value=="string")return H.value;throw new Error(`you need to provide an implementation of ${$}`)}}const Q=new Set;function U($){return{item:$,score:0,positions:Q,start:0,end:0}}const fe=E.forwardRef(function(H,xe){const ee=(0,E.useRef)(null),{classes:de,cx:he}=W(),[ie,ve]=(0,E.useState)(void 0),Ce=(0,E.useMemo)(()=>H.getItemText??ue("getItemText"),[H.getItemText]),Se=(0,E.useMemo)(()=>H.getItemValue??ue("getItemValue"),[H.getItemValue]),{selectedItem:Re,value:Ne=ie??(Re?Ce(Re):void 0),disabled:Oe,filterText:Le=Ne??"",items:ze,onBlur:$e,onChange:Xe,onSelect:ct,placeholder:st,readOnly:Ue,selectOnFocus:Ye,sortWhenFiltering:it=!0}=H,Te=(0,E.useMemo)(()=>ze.map(We=>U(We)),[ze]),Je=(0,E.useMemo)(()=>new F.Av(ze,{fuzzy:ze.length>N?"v1":"v2",sort:it,limit:x,selector:Ce}),[Ce,ze,it]),ke=(0,E.useMemo)(()=>Le?Je.find(Le):Te,[Le,Je,Te]),yt=Boolean(H.hasError??(ke.length===0&&Ne?.length)),ft=Re!=null?Se(Re):void 0,St=(0,E.useCallback)((We,Tt)=>{ee.current?.focus(),ee.current?.setSelectionRange(We,Tt)},[]),ot=(0,E.useCallback)(()=>{ee.current?.focus()},[]),et=(0,E.useCallback)(()=>{ee.current?.blur(),$e?.()},[$e]);(0,E.useImperativeHandle)(xe,()=>({setSelectionRange:St,focus:ot,blur:et}),[St,ot,et]);const dt=(0,E.useCallback)((We,Tt)=>{Xe?We&&Xe(We,Tt):ve(Tt)},[Xe]),ut=(0,E.useCallback)((We,Tt)=>{Tt!=null&&typeof Tt!="string"&&(ve(void 0),ct(Tt.item,{setSelectionRange:St,focus:ot,blur:et}))},[ct,et,ot,St]);(0,M.NB)({handleHeight:!1,onResize:()=>ee.current?.blur(),refreshMode:"debounce",refreshRate:0,skipOnMount:!0,targetRef:ee});const X=(0,E.useCallback)(We=>We,[]);return(0,u.jsx)(P.Z,{className:de.root,clearIcon:(0,u.jsx)(S.Z,{fontSize:"small"}),componentsProps:{paper:{elevation:8},clearIndicator:{size:"small",className:de.clearIndicator}},disableCloseOnSelect:!0,disabled:Oe,freeSolo:!0,fullWidth:!0,getOptionLabel:We=>typeof We=="string"?We:Se(We.item),filterOptions:X,ListboxComponent:pe,onChange:ut,onInputChange:dt,openOnFocus:!0,options:ke,readOnly:Ue,renderInput:We=>(0,u.jsx)(D.Z,{...We,variant:"filled",inputRef:ee,"data-testid":"autocomplete-textfield",placeholder:st,className:he({[de.inputError]:yt}),size:"small"}),renderOption:(We,Tt,{selected:He})=>{const ht=Se(Tt.item);return(0,E.createElement)(R.Z,{dense:!0,...We,key:ht,component:"span","data-highlighted":He,"data-testid":"autocomplete-item",className:he(de.item,{[de.itemHighlighted]:He,[de.itemSelected]:ft!=null&&ht===ft})},(0,u.jsx)(I.e,{str:Ce(Tt.item),indices:Tt.positions}))},selectOnFocus:Ye,size:"small",value:Ne??null})});var Me=o(36423),je=o(21337),we=o(1012),Ze=o(2784),Ke=o(67649).Z;function L($,H){const xe=new Map;for(const ee of $)ee.schemaName!=null&&K((0,we.dH)(ee.name),ee.schemaName,H,[],xe);return xe}function K($,H,xe,ee,de){const he=xe.get(H);if(he){for(const ie of he.definitions)if(!ee.includes(ie.type)&&ie.isConstant!==!0){const ve=`${$}.${(0,we.UY)(ie.name)}`;de.set(ve,ie),ie.isComplex===!0&&K(ve,ie.type,xe,[...ee,ie.type],de)}}}function re($,H){const ee=new Map().get($);return ee?(H({[$]:ee}),!0):!1}function J($,H,xe){const{messagePath:ee}=$,de=Object.keys(H);return v.Z(ee,he=>{const ie=[];if(he.type==="filter"&&typeof he.value=="object"&&!de.includes(he.value.variableName)){const[ve,Ce]=[he.value.variableName,he.valueLoc];ie.push({variableName:ve,loc:Ce})}else if(he.type==="slice"){if(typeof he.start=="object"&&!de.includes(he.start.variableName)){const[ve,Ce]=[he.start.variableName,he.start.startLoc];ie.push({variableName:ve,loc:Ce})}if(typeof he.end=="object"&&!de.includes(he.end.variableName)){const[ve,Ce]=[he.end.variableName,he.end.startLoc];ie.push({variableName:ve,loc:Ce})}}return ie}).filter(({variableName:he})=>!re(he,xe))[0]}function Ie($){switch($){case"string":return'""';case"bool":return"true";case"float32":case"float64":case"uint8":case"uint16":case"uint32":case"uint64":case"int8":case"int16":case"int32":case"int64":return"0"}}const be=Ze.memo(function(H){const{globalVariables:xe,setGlobalVariables:ee}=(0,Me.Z)(),{datatypes:de,topics:he}=n.Ui(),{supportsMathModifiers:ie,path:ve,prioritizedDatatype:Ce,validTypes:Se,autoSize:Re,placeholder:Ne,noMultiSlices:Oe,inputStyle:Le,disableAutocomplete:ze=!1}=H,$e=(0,E.useMemo)(()=>L(he,de),[de,he]),Xe=H.onChange,ct=(0,E.useCallback)((He,ht)=>{let ge=ht;if(He.nativeEvent.data==="{"){const Zt=He.target,tt=Zt.selectionEnd??0;ge=`${ge.slice(0,tt)}}${ge.slice(tt)}`,Ke(()=>{Zt.setSelectionRange(tt,tt)})}Xe(ge,H.index)},[Xe,H.index]),st=(0,E.useCallback)((He,ht,ge,Zt)=>{const tt=ve.slice(0,Zt.start),pt=ve.slice(Zt.end),bt=tt+He+pt,at=$e.get(bt),rt=at!=null&&at.isComplex!==!0,It=Se==null||Se.includes("message"),Be=ge==="topicName"&&!It&&!rt,Ht=Be?He+".":He;if(Xe(tt+Ht+pt,H.index),Be||Ht.includes("{")||ve.includes("{")){const Vt=Zt.start+Ht.length;Ke(()=>{ht.setSelectionRange(Vt,Vt)})}else ht.blur()},[Xe,ve,H.index,$e,Se]),Ue=(0,E.useMemo)(()=>(0,we.ZP)(ve),[ve]),Ye=(0,E.useMemo)(()=>{if(!Ue)return;const{topicName:He}=Ue;return he.find(({name:ht})=>ht===He)},[Ue,he]),it=(0,E.useMemo)(()=>(0,je.pb)(de),[de]),Te=(0,E.useMemo)(()=>{if(!(!Ye||!Ue?.messagePath))return Ye.schemaName==null?{valid:!0,msgPathPart:void 0,structureItem:{structureType:"message",nextByName:{},datatype:""}}:(0,je.eT)(it[Ye.schemaName],Ue.messagePath)},[it,Ue?.messagePath,Ye]),Je=(0,E.useMemo)(()=>{if(Ue)return J(Ue,xe,ee)},[xe,Ue,ee]),ke=(0,E.useMemo)(()=>he.map(({name:He})=>(0,we.dH)(He)),[he]),yt=(0,E.useMemo)(()=>ke.concat(Array.from($e.keys())),[$e,ke]),ft=(0,E.useMemo)(()=>{if(Ue)if(Ye){if(Te==null||!Te.valid||!(0,je.Ky)(Te.structureItem,Se))return"messagePath"}else return"topicName";else return"topicName";if(Je)return"globalVariables"},[Je,Te,Se,Ue,Ye]),St=(0,E.useMemo)(()=>(0,je.pb)(de),[de]),{autocompleteItems:ot,autocompleteFilterText:et,autocompleteRange:dt}=(0,E.useMemo)(()=>{if(ze)return{autocompleteItems:[],autocompleteFilterText:"",autocompleteRange:{start:0,end:1/0}};if(ft==="topicName")return{autocompleteItems:ve?yt:ke,autocompleteFilterText:ve,autocompleteRange:{start:0,end:1/0}};if(ft==="messagePath"&&Ye&&Ue)if(Te&&!Te.valid&&Te.msgPathPart?.type==="filter"&&Te.structureItem?.structureType==="message"){const{msgPathPart:He}=Te,ht=[];for(const Zt of Object.keys(Te.structureItem.nextByName)){const tt=Te.structureItem.nextByName[Zt];tt?.structureType==="primitive"&&ht.push(`${Zt}==${Ie(tt.primitiveType)}`)}const ge=He.path.join(".");return{autocompleteItems:ht,autocompleteFilterText:ge,autocompleteRange:{start:He.nameLoc,end:He.nameLoc+ge.length}}}else{const He=Ue.messagePath[0]?.type==="filter"?Ue.messagePath[0].repr.length+2:0,ht=Ye.schemaName!=null?St[Ye.schemaName]:void 0;return{autocompleteItems:ht==null?[]:(0,je.wQ)(ht,{validTypes:Se,noMultiSlices:Oe,messagePath:Ue.messagePath}).filter(ge=>ge!==""&&!ge.endsWith(".header.seq")),autocompleteRange:{start:Ue.topicNameRepr.length+He,end:1/0},autocompleteFilterText:ve.substring(Ue.topicNameRepr.length).replace(/\{[^}]*\}/g,"")}}else if(Je)return{autocompleteItems:Object.keys(xe).map(He=>`$${He}`),autocompleteRange:{start:Je.loc,end:Je.loc+Je.variableName.length+1},autocompleteFilterText:Je.variableName};return{autocompleteItems:[],autocompleteFilterText:"",autocompleteRange:{start:0,end:1/0}}},[ze,ft,Ye,Ue,Je,ve,yt,ke,Te,St,Se,Oe,xe]),ut=(0,E.useMemo)(()=>l.Z(he,({name:He})=>He),[he]),X=(0,E.useMemo)(()=>Ce==null?ot:A.Z(b.Z(ot,He=>ut[He]?.schemaName===Ce)),[ot,Ce,ut]),Tt=(ie==null||!ie)&&ve.includes(".@")||ft!=null&&!ze&&ve.length>0;return(0,u.jsx)(g.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",flexGrow:1,flexShrink:0,spacing:.25,children:(0,u.jsx)(fe,{items:X,disabled:H.disabled,readOnly:H.readOnly,filterText:et,value:ve,onChange:ct,onSelect:(He,ht)=>{st(He,ht,ft,dt)},hasError:Tt,placeholder:Ne!=null&&Ne!==""?Ne:"/some/topic.msgs[0].field",autoSize:Re,inputStyle:Le,disableAutoSelect:!0})})})},57733:(ce,C,o)=>{"use strict";o.d(C,{N:()=>g});const g=Object.keys({bool:void 0,int8:void 0,uint8:void 0,int16:void 0,uint16:void 0,int32:void 0,uint32:void 0,int64:void 0,uint64:void 0,float32:void 0,float64:void 0,string:void 0})},60351:(ce,C,o)=>{"use strict";o.d(C,{H:()=>u,Q:()=>v});const u=["id","_id","ID","Id","key"],g=/^id$|_id$|I[dD]$|^key$/;function v(l){return g.test(l)}},21337:(ce,C,o)=>{"use strict";o.d(C,{Ky:()=>P,eT:()=>R,pb:()=>T,wQ:()=>D});var u=o(77068),g=o(60351),v=o(1012),l=o(10363),A=o(83352),b=o(57733);const E=["int8","uint8","int16","uint16","int32","uint32","int64","uint64"];function n(F){return b.N.includes(F)}function S(F){return F.structureType==="primitive"&&E.includes(F.primitiveType)}function T(F){const M=u.Z((I,O)=>{const w={},Y=F.get(I);if(!Y){if(I==="time"||I==="duration")return{structureType:"message",nextByName:{sec:{structureType:"primitive",primitiveType:"uint32",datatype:""},nsec:{structureType:"primitive",primitiveType:"uint32",datatype:""}},datatype:I};throw new Error(`datatype not found: "${I}"`)}for(const se of Y.definitions){if(se.isConstant===!0||O.includes(se.type))continue;const Ee=n(se.type)?{structureType:"primitive",primitiveType:se.type,datatype:I}:M(se.type,[...O,se.type]);se.isArray===!0?w[se.name]={structureType:"array",next:Ee,datatype:I}:w[se.name]=Ee}return{structureType:"message",nextByName:w,datatype:I}}),j={};for(const[I]of F)j[I]=M(I,[]);return j}function P(F,M){return!!F&&(!M||M.includes(F.structureType)||M.includes(F.datatype)||F.structureType==="primitive"&&M.includes(F.primitiveType))}function D(F,{validTypes:M,noMultiSlices:j,messagePath:I=[]}={}){let O=[...I];const w=[];function Y(se,Ee){if(P(se,M)&&w.push(Ee),se.structureType==="message")for(const[ae,Pe]of Object.entries(se.nextByName))Y(Pe,`${Ee}.${(0,v.UY)(ae)}`);else if(se.structureType==="array")if(se.next.structureType==="message"){const ae=Object.entries(se.next.nextByName).find(([Pe])=>(0,g.Q)(Pe));if(ae){const[Pe,ye]=ae,pe=O.find(x=>x.type==="filter"&&x.path[0]===Pe);pe?(O=O.filter(x=>x!==pe),Y(se.next,`${Ee}[:]{${Pe}==${typeof pe.value=="object"?`$${pe.value.variableName}`:pe.value}}`)):S(ye)?Y(se.next,`${Ee}[:]{${Pe}==0}`):Y(se.next,`${Ee}[0]`)}else Y(se.next,`${Ee}[0]`)}else j!==!0?Y(se.next,`${Ee}[:]`):Y(se.next,`${Ee}[0]`)}return Y(F,""),w.sort((0,A.Z)())}const R=(F,M)=>{let j=F;if(!j)return{valid:!1,msgPathPart:void 0,structureItem:void 0};for(const I of M){if(!j)return{valid:!1,msgPathPart:I,structureItem:j};if(I.type==="name"){if(j.structureType!=="message")return{valid:!1,msgPathPart:I,structureItem:j};j=j.nextByName[I.name]}else if(I.type==="slice"){if(j.structureType!=="array")return{valid:!1,msgPathPart:I,structureItem:j};j=j.next}else if(I.type==="filter"){if(j.structureType!=="message"||I.path.length===0||I.value==null)return{valid:!1,msgPathPart:I,structureItem:j};let O=j;for(const w of I.path){if(O.structureType!=="message")return{valid:!1,msgPathPart:I,structureItem:j};if(O=O.nextByName[w],O==null)return{valid:!1,msgPathPart:I,structureItem:j}}}else(0,l.v)(I,`Invalid msgPathPart.type: ${I.type}`)}return{valid:!0,msgPathPart:void 0,structureItem:j}}},1012:(ce,C,o)=>{"use strict";o.d(C,{UY:()=>n,ZP:()=>T,dH:()=>E});var u=o(77068),g=o(43614),v=o.n(g),l=o(72278),A=o.n(l);const b=g.Grammar.fromCompiled(A());function E(P){return P.match(/^[a-zA-Z0-9_/-]+$/)?P:`"${P.replace(/[\\"]/g,D=>`\\${D}`)}"`}function n(P){return P.match(/^[a-zA-Z0-9_-]+$/)?P:`"${P.replace(/[\\"]/g,D=>`\\${D}`)}"`}const T=u.Z(P=>{const D=new g.Parser(b);try{return D.feed(P).results[0]}catch{return}})},45587:(ce,C,o)=>{"use strict";var u="../../packages/studio-base/src/components/MessagePipeline/MessageOrderTracker.ts";o.d(C,{Z:()=>T});var g=o(23503),v=o(44668),l=o.n(v),A=o(27999);const b=1,E=1,n=g.ZP.getLogger(u);class S{#e=[];#t;#n;#s;#i;#o;#a=!1;#c=[];update(D){if(!D.activeData)return[];const R=[],{messages:F,currentTime:M,lastSeekTime:j}=D.activeData;let I=!1;if(this.#i!==j&&(this.#i=j,this.#o&&(clearTimeout(this.#o),this.#o=void 0,this.#c=[]),this.#o=this.#n=this.#t=void 0,this.#e=[],I=!0),this.#e!==F||this.#t!==M){this.#e=F,this.#t=M;for(const O of F){const w=O.receiveTime;if(I||Math.abs((0,v.toSec)((0,v.subtract)(w,M)))>b&&(this.#a&&this.#c.push(O),this.#o||(this.#o=setTimeout(()=>{this.#o=void 0;const se={currentTime:M,lastSeekTime:j,messageTime:w,incorrectMessages:this.#a?this.#c:"not being tracked"};this.#c=[],n.warn("Message receiveTime very different from player.currentTime; without updating lastSeekTime",se)},E*1e3))),this.#n&&this.#s!=null&&(0,v.isLessThan)(w,this.#n)){const Y=(0,A.AB)(w),se=(0,A.AB)(this.#n),Ee=`Processed a message on ${O.topic} at ${Y} which is earlier than last processed message on ${this.#s} at ${se}.`;R.push({severity:"warn",message:"Data went back in time",error:new Error(Ee)})}this.#s=O.topic,this.#n=w}}return R}}const T=S},85026:(ce,C,o)=>{"use strict";o.d(C,{An:()=>R,D2:()=>j,m7:()=>D});var u=o(52322),g=o(13474),v=o(2784),l=o(12294),A=o(75845),b=o(93455),E=o(27803),n=o(45587),S=o(80439),T=o(79210);const P=(0,v.createContext)(void 0);function D(){const w=(0,A.qe)(P);return(0,v.useCallback)(()=>w.getState().public,[w])}function R(w){const Y=(0,A.qe)(P);return(0,l.oR)(Y,(0,v.useCallback)(se=>w(se.public),[w]))}const F=w=>w.renderDone,M=w=>w.public.subscriptions;function j({children:w,player:Y,globalVariables:se}){const Ee=(0,v.useRef)([]),ae=(0,v.useMemo)(()=>(0,T.eg)({promisesToWaitForRef:Ee,initialPlayer:Y}),[Y]),Pe=(0,l.oR)(ae,M),ye=(0,v.useMemo)(()=>g.Z(W=>{Y?.setSubscriptions(W)}),[Y]);(0,v.useEffect)(()=>()=>{ye.cancel()},[ye]),(0,v.useEffect)(()=>ye(Pe),[ye,Pe]);const[pe]=(0,E.b)(b.o.MESSAGE_RATE),x=(0,l.oR)(ae,F);(0,v.useLayoutEffect)(()=>{x?.()},[x]);const N=(0,v.useRef)(16);return N.current=1e3/(pe??60),(0,v.useEffect)(()=>{const W=ae.getState().dispatch;if(!Y){W({type:"update-player-state",playerState:(0,T.H2)(),renderDone:void 0});return}const{listener:ue,cleanupListener:Q}=O({msPerFrameRef:N,promisesToWaitForRef:Ee,store:ae});return Y.setListener(ue),()=>{Q(),Y.close(),W({type:"update-player-state",playerState:(0,T.H2)(),renderDone:void 0})}},[Y,ae]),(0,v.useEffect)(()=>{Y?.setGlobalVariables(se)},[Y,se]),(0,u.jsx)(P.Provider,{value:ae,children:w})}function I(w,Y){return Y.length===0?w:{...w,problems:Y.concat(w.problems??[])}}function O(w){const{msPerFrameRef:Y,promisesToWaitForRef:se,store:Ee}=w,ae=Ee.getState().dispatch,Pe=new n.Z;let ye=!1,pe,x;return{listener:async W=>{if(ye)return;if(x)throw new Error("New playerState was emitted before last playerState was rendered.");const ue=Pe.update(W),Q=I(W,ue),U=new Promise(we=>{x=()=>{x=void 0,we()}}),fe=Date.now();let Me=!1;function je(){if(Me)return;Me=!0;const we=Date.now()-fe,Ze=Math.max(0,Y.current-we);setTimeout(async()=>{if(ye)return;const Ke=se.current;Ke.length>0&&(se.current=[],await(0,S._)(Ke)),x&&x()},Ze)}pe!=null&&W.playerId!==pe&&Ee.getState().reset(),pe=W.playerId,ae({type:"update-player-state",playerState:Q,renderDone:je}),await U},cleanupListener(){ye=!0,x=void 0}}}},80439:(ce,C,o)=>{"use strict";o.d(C,{_:()=>l});var u=o(69363),g=o(42146);const v=5e3;async function l(A){try{await(0,u.nK)(Promise.all(A.map(async({promise:b})=>{await b})),v)}catch(b){if(!(b instanceof u.mN)){(0,g.ZP)("Player ",b,"app","error");return}}}},79210:(ce,C,o)=>{"use strict";o.d(C,{H2:()=>T,eg:()=>P});var u=o(48312),g=o(88665),v=o.n(g),l=o(42893),A=o(69363),b=o(85266),E=o(24304),n=o(10363),S=o(61969);function T(){return{presence:E.m.NOT_PRESENT,progress:{},capabilities:[],profile:void 0,playerId:"",activeData:void 0}}function P({promisesToWaitForRef:M,initialPlayer:j}){return(0,l.M)((I,O)=>({player:j,publishersById:{},allPublishers:[],subscriptionMemoizer:(0,b.l)(),subscriptionsById:new Map,subscriberIdsByTopic:new Map,newTopicsBySubscriberId:new Map,lastMessageEventByTopic:new Map,lastCapabilities:[],dispatch(w){I(Y=>F(Y,w))},reset(){I(w=>({...w,publishersById:{},allPublishers:[],subscriptionMemoizer:(0,b.l)(),subscriptionsById:new Map,subscriberIdsByTopic:new Map,newTopicsBySubscriberId:new Map,lastMessageEventByTopic:new Map,lastCapabilities:[],public:{...w.public,playerState:T(),messageEventsBySubscriberId:new Map,subscriptions:[],sortedTopics:[],datatypes:new Map,startPlayback:void 0,playUntil:void 0,pausePlayback:void 0,setPlaybackSpeed:void 0,seekPlayback:void 0}}))},public:{playerState:T(),messageEventsBySubscriberId:new Map,subscriptions:[],sortedTopics:[],datatypes:new Map,setSubscriptions(w,Y){O().dispatch({type:"update-subscriber",id:w,payloads:Y})},setPublishers(w,Y){O().dispatch({type:"set-publishers",id:w,payloads:Y}),O().player?.setPublishers(O().allPublishers)},setParameter(w,Y){O().player?.setParameter(w,Y)},publish(w){O().player?.publish(w)},async callService(w,Y){const se=O().player;if(!se)throw new Error("callService called when player is not present");return await se.callService(w,Y)},async fetchAsset(w,Y){const{protocol:se}=new URL(w),Ee=O().player;if(Ee?.fetchAsset&&se==="package:")try{return await Ee.fetchAsset(w)}catch(Pe){if(!(0,S.Z)())throw Pe}const ae=await fetch(w,Y);if(!ae.ok){const Pe=ae.statusText;throw new Error(`Error ${ae.status}${Pe?` (${Pe})`:""}`)}return{uri:w,data:new Uint8Array(await ae.arrayBuffer()),mediaType:ae.headers.get("content-type")??void 0}},startPlayback:void 0,playUntil:void 0,pausePlayback:void 0,setPlaybackSpeed:void 0,seekPlayback:void 0,pauseFrame(w){const Y=new A.fQ;return M.current.push({name:w,promise:Y.wait()}),()=>{Y.notifyAll()}}}}))}function D(M,j){const I=M.subscriptionsById,O=new Map(M.newTopicsBySubscriberId),w=O.get(j.id);if(w){const ae=I.get(j.id),Pe=new Set(ae?.map(ye=>ye.topic)??[]);for(const{topic:ye}of j.payloads)Pe.has(ye)||w.add(ye)}else{const ae=j.payloads.map(Pe=>Pe.topic);O.set(j.id,new Set(ae))}const Y=new Map(I);j.payloads.length===0?Y.delete(j.id):Y.set(j.id,j.payloads);const se=new Map;for(const[ae,Pe]of Y)for(const ye of Pe){const pe=ye.topic,x=se.get(pe)??[];x.push(ae),se.set(pe,x)}const Ee=(0,b.I)(Array.from(Y.values()).flat());return{...M,subscriptionsById:Y,subscriberIdsByTopic:se,newTopicsBySubscriberId:O,public:{...M.public,subscriptions:Ee}}}function R(M,j){const I=j.playerState.activeData?.messages,O=new Set,w=new Map,Y=M.subscriptionsById,se=M.subscriberIdsByTopic,Ee=M.lastMessageEventByTopic,ae=new Map(M.newTopicsBySubscriberId);if(I&&I!==M.public.playerState.activeData?.messages)for(const N of I){Ee.set(N.topic,N),O.add(N.topic);const W=se.get(N.topic);if(W)for(const ue of W){let Q=w.get(ue);Q||(Q=[],w.set(ue,Q)),Q.push(N)}}for(const N of Y.keys()){const W=ae.get(N);if(W){for(const ue of W){if(O.has(ue))continue;const Q=Ee.get(ue);if(Q){const U=w.get(N)??[];U.unshift(Q),w.set(N,U)}}W.clear()}}const Pe={...M.public,playerState:j.playerState,messageEventsBySubscriberId:w},ye=j.playerState.activeData?.topics;ye!==M.public.playerState.activeData?.topics&&(Pe.sortedTopics=ye?[...ye].sort((N,W)=>N.name.localeCompare(W.name)):[]),j.playerState.activeData?.datatypes!==M.public.playerState.activeData?.datatypes&&(Pe.datatypes=j.playerState.activeData?.datatypes??new Map);const pe=j.playerState.capabilities,x=M.player;return x&&!v()(pe,M.lastCapabilities)&&(Pe.startPlayback=pe.includes(E.C.playbackControl)?x.startPlayback?.bind(x):void 0,Pe.playUntil=pe.includes(E.C.playbackControl)?x.playUntil?.bind(x):void 0,Pe.pausePlayback=pe.includes(E.C.playbackControl)?x.pausePlayback?.bind(x):void 0,Pe.setPlaybackSpeed=pe.includes(E.C.setSpeed)?x.setPlaybackSpeed?.bind(x):void 0,Pe.seekPlayback=pe.includes(E.C.playbackControl)?x.seekPlayback?.bind(x):void 0),{...M,newTopicsBySubscriberId:ae,renderDone:j.renderDone,public:Pe,lastCapabilities:pe,lastMessageEventByTopic:Ee}}function F(M,j){switch(j.type){case"update-player-state":return R(M,j);case"update-subscriber":return D(M,j);case"set-publishers":{const I={...M.publishersById,[j.id]:j.payloads};return{...M,publishersById:I,allPublishers:u.Z(Object.values(I))}}}(0,n.v)(j,`Unhandled message pipeline action type ${j.type}`)}},85266:(ce,C,o)=>{"use strict";o.d(C,{I:()=>b,l:()=>A});var u=o(84585),g=o(10973),v=o.n(g),l=o(8220);function A(){return v()(E=>E,{isDeepEqual:!0,maxSize:1/0})}function b(E){const n=new Map,S=new Map;for(const T of E){const P=T.preloadType==="full"?n:S,D=P.get(T.topic);if(D){if(D.fields!=null)if(T.fields==null)P.set(T.topic,T);else{const R=(0,l.Z)(T.fields,F=>{const M=F.trim();return M.length>0?M:void 0});R.length>0&&P.set(T.topic,{...T,fields:u.Z(D.fields,R)})}}else(T.fields==null||T.fields.some(F=>F.trim().length>0))&&P.set(T.topic,T)}return[...n.values(),...S.values()]}},93723:(ce,C,o)=>{"use strict";o.d(C,{x:()=>g});var u=o(2784);const g=(0,u.createContext)(void 0)},75017:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>$});var u=o(52322),g=o(3896),v=o(75988),l=o(24957),A=o(82228),b=o(2784),E=o(28219),n=o(17568),S=o(87438),T=o(72970),P=o(75845),D=o(75785),R=o(86451),F=o(93723),M=o(82044),j=o(63249),I=o(38677),O=o(93812),w=o(2661),Y=o(53542),se=o(54329);class Ee extends b.Component{state={currentError:void 0};componentDidCatch(xe,ee){(0,w.e)(new Y.g(xe,ee)),this.setState({currentError:{error:xe,errorInfo:ee}})}render(){return this.state.currentError?(0,u.jsx)(se.Z,{title:"This panel encountered an unexpected error",error:this.state.currentError.error,errorInfo:this.state.currentError.errorInfo,showErrorDetails:this.props.showErrorDetails,hideErrorSourceLocations:this.props.hideErrorSourceLocations,content:(0,u.jsxs)("p",{children:["Something went wrong in this panel."," ",(0,u.jsx)(j.Z,{color:"inherit",onClick:()=>{this.setState({currentError:void 0})},children:"Dismiss this error"})," ","to continue using this panel. If the issue persists, try resetting the panel."]}),actions:(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(O.Z,{direction:"row-reverse",gap:1,children:[(0,u.jsx)(I.Z,{variant:"outlined",color:"secondary",onClick:()=>{this.setState({currentError:void 0})},children:"Dismiss"}),(0,u.jsx)(I.Z,{variant:"outlined",title:"Reset panel settings to default values",color:"error",onClick:()=>{this.setState({currentError:void 0}),this.props.onResetPanel()},children:"Reset Panel"}),(0,u.jsx)(I.Z,{variant:"text",title:"Remove this panel from the layout",color:"error",onClick:this.props.onRemovePanel,children:"Remove Panel"})]})})}):this.props.children}}var ae=o(58997),Pe=o(99118),ye=o(96242),pe=o(53748),x=o(72283),N=o(22168),W=o(1547),ue=o(84877),Q=o(76479);const U=(0,T.ZL)()((H,xe,ee)=>{const de=(0,W.Z)(H.palette.background.default).setAlpha(0).toRgbString(),he=(0,W.Z)(H.palette.background.default).setAlpha(1-H.palette.action.disabledOpacity).toRgbString(),ie=(0,W.Z)(H.palette.primary.main).setAlpha(H.palette.action.hoverOpacity).toRgbString();return{backdrop:{position:"absolute",zIndex:H.zIndex.modal-1,padding:H.spacing(2),container:"backdrop / size",backgroundColor:de},invalidTarget:{backgroundColor:he},validTarget:{alignItems:"flex-end",backgroundColor:ie},selected:{backgroundImage:`linear-gradient(to bottom, ${ie}, ${ie})`,backgroundColor:he},highlightActive:{[`.${ue.D}:not(:hover) &`]:{visibility:"hidden"}},highlightAll:{[`.${ue.D}:not(:hover) &`]:{[`.${ee.buttonGroup}`]:{visibility:"hidden"}}},buttonGroup:{display:"flex",flexDirection:"column",justifyContent:"center",gap:H.spacing(1),"@container backdrop (max-height: 80px)":{flexDirection:"row"},"@container backdrop (min-height: 120px)":{marginTop:Q.B},"@container backdrop (min-width: 240px)":{flexDirection:"row"}},buttonPaper:{flex:"0 0 50%",minWidth:"50%"},button:{display:"flex",flexDirection:"column",justifyContent:"center",whiteSpace:"nowrap",textAlign:"left",[`.${ae.Z.startIcon}`]:{position:"relative",margin:0,svg:{height:"1em",width:"1em",fontSize:32}}},buttonText:{"@container backdrop (max-width: 120px)":{display:"none"},"@container backdrop (max-height: 80px)":{display:"none"}},chip:{boxShadow:H.shadows[2],paddingInline:H.spacing(2)}}}),fe=(0,b.forwardRef)(function(xe,ee){const{actions:de,variant:he,highlightMode:ie,dropMessage:ve,open:Ce,onClickAway:Se}=xe,{classes:Re,cx:Ne}=U();return(0,u.jsx)(Pe.d,{onClickAway:Se||N.Z,children:(0,u.jsx)(ye.Z,{transitionDuration:0,unmountOnExit:!0,ref:ee,open:Ce,className:Ne(Re.backdrop,{[Re.invalidTarget]:he==="invalidDropTarget",[Re.validTarget]:he==="validDropTarget",[Re.selected]:he==="selected",[Re.highlightActive]:ie==="active",[Re.highlightAll]:ie==="all"}),children:ve&&he==="validDropTarget"?(0,u.jsx)(pe.Z,{size:"small",color:"primary",label:ve,className:Re.chip}):de&&(0,u.jsx)("div",{className:Re.buttonGroup,children:de.map(Oe=>(0,u.jsx)(x.Z,{elevation:0,className:Re.buttonPaper,children:(0,u.jsx)(I.Z,{fullWidth:!0,variant:"outlined",className:Re.button,onClick:Oe.onClick,startIcon:Oe.icon,color:Oe.color,children:(0,u.jsx)("div",{className:Re.buttonText,children:Oe.text})})},Oe.key))})})})});var Me=o(98043),je=o(48105),we=o(54490),Ze=o(29839),Ke=o(42689);function L(H){const{tabId:xe,panelId:ee,onDragStart:de,onDragEnd:he}=H,{mosaicWindowActions:ie}=(0,b.useContext)(E.Jy),ve=(0,Me.Sr)(),{getCurrentLayoutState:Ce,startDrag:Se,endDrag:Re}=(0,Me._B)(),[,Ne,Oe]=(0,Ke.c)({type:E.vv.WINDOW,item:()=>{de&&de();const{selectedLayout:Le}=Ce();if(!Le?.data)return null;const{layout:ze,configById:$e}=Le.data,Xe=ie.getPath(),ct=Ze.Z(()=>{Se({path:Xe,sourceTabId:xe})});return{mosaicId:ve,deferredHide:ct,originalLayout:ze,originalConfigById:$e}},end:(Le,ze)=>{if(he&&he(),Le.originalLayout==null)return;window.clearTimeout(Le.deferredHide);const $e=ie.getPath(),Xe=ze.getDropResult()??{},{position:ct,path:st,tabId:Ue}=Xe;ee!=null&&Re({originalLayout:Le.originalLayout,originalSavedProps:Le.originalConfigById,panelId:ee,sourceTabId:xe,targetTabId:Ue,position:ct,destinationPath:st,ownPath:$e})}});return[Ne,Oe]}var K=o(43234),re=o(11701),J=o(40301);const Ie=(0,T.ZL)()(H=>({perfInfo:{position:"absolute",bottom:2,left:3,whiteSpace:"pre-line",fontSize:"0.75em",fontFeatureSettings:`${H.typography.fontFeatureSettings}, 'zero'`,opacity:.7,userSelect:"none",mixBlendMode:"difference"},tabCount:{alignItems:"center",justifyContent:"center",position:"absolute",display:"flex",inset:0,textAlign:"center",letterSpacing:"-0.125em",paddingTop:1,paddingLeft:5,paddingRight:11,fontSize:`${H.typography.subtitle2.fontSize} !important`,fontWeight:600}})),be="$unknown_id";function $(H){function xe(ee){const{childId:de=be,overrideConfig:he,tabId:ie,...ve}=ee,{classes:Ce,cx:Se,theme:Re}=Ie(),Ne=(0,S.Z)(),{mosaicActions:Oe}=(0,b.useContext)(E.DF),{mosaicWindowActions:Le}=(0,b.useContext)(E.Jy),{selectedPanelIds:ze,setSelectedPanelIds:$e,selectAllPanels:Xe,togglePanelSelected:ct,getSelectedPanelIds:st}=(0,Me.iy)(),Ue=(0,b.useMemo)(()=>ze.includes(de),[de,ze]),Ye=(0,b.useMemo)(()=>Ue?ze.length:0,[Ue,ze]),{savePanelConfigs:it,updatePanelConfigs:Te,createTabPanel:Je,closePanel:ke,swapPanel:yt,getCurrentLayoutState:ft}=(0,Me._B)(),[St,ot]=(0,b.useState)(!1),[et,dt]=(0,b.useState)(!1),[ut,X]=(0,b.useState)(void 0),[We,Tt]=(0,b.useState)(!1),He=(0,b.useRef)(null),ht=(0,je.v)(),ge=(0,b.useContext)(F.x),Zt=ge!=null&&ge.length===0&&ie==null,tt=(0,b.useContext)(M.Z),pt=H.panelType,bt=(0,b.useMemo)(()=>ht.getPanelByType(pt)?.title??"",[ht,pt]),at=H.defaultConfig,[rt,It]=(0,D.Um)(de),Be=(0,b.useCallback)(()=>{It(at)},[at,It]),Ht=(0,b.useRef)(!1);(0,b.useLayoutEffect)(()=>{Ht.current||(!rt||Object.keys(rt).length===0?(Ht.current=!0,It(at)):Object.entries(at).some(([qe,Bt])=>Bt!=null&&!(qe in rt))&&(Ht.current=!0,It({...at,...rt})))},[at,It,rt]);const Vt=(0,b.useMemo)(()=>({...at,...rt,...he}),[rt,at,he]),xn=(0,b.useCallback)(async({panelType:qe,siblingConfigCreator:Bt,updateIfExists:Tn})=>{const hn=ft().selectedLayout?.data;if(!hn)return;let ln={};const On=ht.getPanelByType(qe);if(On){const In=await On.module();if(!Ne())return;ln=In.default.defaultConfig}const Pn=Le.getPath();if(Tn){const In=A.Z(Pn),ws=In!=null?(0,E.Gv)(In):"second",Rs=Pn.slice(0,-1).concat(ws),gn=(0,E.PC)(Oe.getRoot(),Rs);if(typeof gn=="string"&&(0,J.$k)(gn)===qe){const tn={...ln,...hn.configById[gn]};it({configs:[{id:gn,config:Bt(tn),defaultConfig:ln}]});return}}const gs=Pn.concat("second"),Qt=Bt(ln);Le.split({type:qe,panelConfig:Qt}).then(()=>{const In=(0,E.PC)(Oe.getRoot(),gs);it({configs:[{id:In,config:Qt,defaultConfig:ln}]})})},[ft,Ne,Oe,Le,ht,it]),Ft=(0,b.useCallback)((qe,Bt)=>{yt({tabId:ie,originalId:de,type:qe,root:Oe.getRoot(),path:Le.getPath(),config:Bt})},[de,Oe,Le,yt,ie]),En=(0,we.Q)(we.VI.selectPanelSettingsOpen),hs=(0,b.useCallback)(qe=>{En?(qe.stopPropagation(),$e([de])):(qe.metaKey||qe.shiftKey||Ue)&&(qe.stopPropagation(),ct(de,ie))},[de,ie,ct,Ue,$e,En]),Ln=(0,b.useCallback)(()=>{const qe=ft().selectedLayout?.data?.layout;qe!=null&&Je({idToReplace:de,layout:qe,idsToRemove:st(),singleTab:!0})},[ft,st,Je,de]),fn=(0,b.useCallback)(()=>{const qe=ft().selectedLayout?.data?.layout;qe!=null&&Je({idToReplace:de,layout:qe,idsToRemove:st(),singleTab:!1})},[ft,st,Je,de]),on=(0,b.useCallback)(()=>{ke({path:Le.getPath(),root:Oe.getRoot(),tabId:ie})},[ke,Oe,Le,ie]),Qe=(0,b.useCallback)(()=>{const qe=ft().selectedLayout?.data?.configById;if(!qe)return;const Bt=ie!=null?qe[ie]:void 0;if(ie!=null&&Bt!=null){const Tn=(0,J.nJ)(H.panelType),hn=Bt.tabs[Bt.activeTabIdx]?.layout;if(hn==null)return;const ln=(0,J.p9)(de,hn),On=(0,E.Xw)(hn,[{path:ln,spec:{$set:{first:de,second:Tn,direction:"row"}}}]),Pn=(0,J.p1)(On,Bt);it({configs:[{id:ie,config:Pn},{id:Tn,config:Vt}]})}else Le.split({type:H.panelType})},[de,ft,Le,Vt,it,ie]),{enterFullscreen:Gt,exitFullscreen:an}=(0,b.useMemo)(()=>({enterFullscreen:()=>{X(He.current?.getBoundingClientRect()),dt(!0),tt?.setHasFullscreenDescendant(!0)},exitFullscreen:()=>{dt(!1)}}),[tt]),Cn=(0,b.useCallback)(qe=>{Tt(qe),tt?.setHasFullscreenDescendant(qe)},[tt]),{isDragging:_t,isOver:rn,isValidTarget:De,connectMessagePathDropTarget:Fe,dropMessage:Ve,setMessagePathDropConfig:Lt}=(0,K.o)(),{keyUpHandlers:jt,keyDownHandlers:en}=(0,b.useMemo)(()=>({keyUpHandlers:{"`":()=>{ot(!1)},"~":()=>{ot(!1)}},keyDownHandlers:{a:qe=>{qe.preventDefault(),qe.metaKey&&Xe()},"`":()=>{ot(!0)},"~":()=>{ot(!0)},Escape:()=>{Ye>1&&$e([])}}}),[Xe,Ye,$e]),so=(0,b.useMemo)(()=>({Escape:()=>{an()}}),[an]),Ms=(0,P.O4)(ve),Ds=(0,b.useMemo)(()=>({config:Vt,saveConfig:It,...Ms}),[Ms,Vt,It]),oo=(0,b.useMemo)(()=>(0,u.jsx)(H,{...Ds}),[Ds]),ao=(0,b.useRef)(0),Bs=(0,b.useRef)(null),Vn=(0,b.useRef)(null),Kn=(0,b.useCallback)(()=>{const qe=Vn.current;qe&&(qe.style.opacity="0",setTimeout(()=>qe.style.opacity="1",0))},[]),Sn={tabId:ie,panelId:de,onDragStart:Kn},[io,ro]=L(Sn),[lo,co]=L(Sn),uo=(0,b.useMemo)(()=>{const qe={open:_t||St||Ue&&Ye>1,variant:void 0,highlightMode:void 0,actions:void 0,dropMessage:Ve};return _t&&!De&&(qe.variant="invalidDropTarget"),_t&&rn&&(qe.variant="validDropTarget"),Ue&&Ye>1&&(qe.onClickAway=()=>{$e([])},qe.variant="selected",qe.highlightMode="all",qe.actions=[{key:"group",text:"Group in tab",icon:(0,u.jsx)(g.D9i,{}),onClick:Ln},{key:"create-tabs",text:"Create tabs",icon:(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("span",{className:Ce.tabCount,children:[Ye<=99?Ye:""," "]}),(0,u.jsx)(g.W9$,{})]}),onClick:fn}]),pt!==re.bm&&St&&(qe.variant="selected",qe.highlightMode="active"),St&&(qe.actions=[{key:"split",text:"Split panel",icon:(0,u.jsx)(v.nms,{}),onClick:Qe},{key:"remove",text:"Remove panel",icon:(0,u.jsx)(l.Kx2,{}),color:"error",onClick:on}]),qe},[Ce.tabCount,fn,Ve,Ln,_t,rn,Ue,De,Ye,St,on,$e,Qe,pt]);return(0,u.jsx)(b.Profiler,{id:de,onRender:(qe,Bt,Tn,hn,ln,On,Pn)=>{Bs.current&&(Bs.current.innerText=`${++ao.current}
${Tn.toFixed(1)}ms`)},children:(0,u.jsxs)(M.Z.Provider,{value:{type:pt,id:de,title:bt,config:Vt,saveConfig:It,updatePanelConfigs:Te,openSiblingPanel:xn,replacePanel:Ft,enterFullscreen:Gt,exitFullscreen:an,setHasFullscreenDescendant:Cn,isFullscreen:et,tabId:ie,connectToolbarDragHandle:Zt?void 0:lo,setMessagePathDropConfig:Lt},children:[(0,u.jsx)(R.Z,{global:!0,keyUpHandlers:jt,keyDownHandlers:en}),et&&(0,u.jsx)(R.Z,{global:!0,keyDownHandlers:so}),(0,u.jsx)(n.ZP,{in:et,onExited:()=>{Cn(!1)},nodeRef:He,timeout:{exit:Re.transitions.duration.shorter},children:qe=>(0,u.jsxs)(ue.O,{onClick:hs,hasFullscreenDescendant:We,fullscreenState:qe,sourceRect:ut,selected:Ue||_t&&De&&rn,"data-testid":Se("panel-mouseenter-container",de),ref:Bt=>{He.current=Bt,Zt||(ro(Bt),co(Bt)),Fe(Bt)},children:[!et&&pt!==re.bm&&(0,u.jsx)(fe,{...uo,ref:Bt=>{Vn.current=Bt,Zt||io(Bt)}}),(0,u.jsx)(Ee,{onRemovePanel:on,onResetPanel:Be,children:(0,u.jsx)(b.StrictMode,{children:oo})}),!1]})})]})})}return Object.assign(b.memo(xe),{defaultConfig:H.defaultConfig,panelType:H.panelType,displayName:`Panel(${H.displayName??H.name})`})}},39347:(ce,C,o)=>{"use strict";o.d(C,{B:()=>$});var u=o(52322),g=o(43749),v=o(31563),l=o(68234),A=o(87037),b=o(88601),E=o.n(b),n=o(7279),S=o(96411),T=o(2784),P=o(68588),D=o(72970),R=o(29268),F=o(93812),M=o(48105),j=o(36537),I=o(41939),O=o(96027),w=o(35109),Y=o(13843),se=o(49565),Ee=o(68434);const ae=(0,D.ZL)()(H=>({root:{".TextHighlight-highlight":{color:H.palette.primary.main,fontWeight:"bold"}}}));function Pe({targetStr:H="",searchText:xe=""}){const{classes:ee}=ae();if(xe.length===0)return(0,u.jsx)(u.Fragment,{children:H});const de=E().single(xe,H),he=de?E().highlight(de,"<span class='TextHighlight-highlight'>","</span>"):void 0;return(0,u.jsx)("span",{className:ee.root,children:he!=null&&he.length>0?(0,u.jsx)("span",{dangerouslySetInnerHTML:{__html:he}}):H})}const ye=(0,D.ZL)()(H=>({fullHeight:{height:"100%"},imagePlaceholder:{paddingBottom:`${200/280*100}%`,backgroundColor:H.palette.background.default},cardContent:{flex:"auto"}}));function pe(H){const{searchQuery:xe,panel:ee,onClick:de}=H,{classes:he}=ye(),ie=ee.extensionNamespace?`${ee.title} [${ee.extensionNamespace}]`:ee.title,ve=(0,T.useCallback)(Ce=>{Ce.stopPropagation(),de()},[de]);return(0,u.jsx)(O.Z,{className:he.fullHeight,children:(0,u.jsx)(w.Z,{onClick:ve,className:he.fullHeight,children:(0,u.jsxs)(F.Z,{fullHeight:!0,children:[ee.thumbnail!=null?(0,u.jsx)(Y.Z,{component:"img",image:ee.thumbnail,alt:ee.title}):(0,u.jsx)("div",{className:he.imagePlaceholder}),(0,u.jsxs)(se.Z,{className:he.cardContent,children:[(0,u.jsx)(Ee.Z,{variant:"subtitle2",gutterBottom:!0,children:(0,u.jsx)("span",{"data-testid":`panel-menu-item ${ee.title}`,children:(0,u.jsx)(Pe,{targetStr:ie,searchText:xe})})}),(0,u.jsx)(Ee.Z,{variant:"body2",color:"text.secondary",children:(0,u.jsx)(Pe,{targetStr:ee.description??"",searchText:xe})})]})]})})})}const x=(0,D.ZL)()(H=>({grid:{display:"grid !important",gridTemplateColumns:"repeat(auto-fill, minmax(240px, 1fr))",gap:H.spacing(2)}}));function N(H){const{filteredPanels:xe,onPanelSelect:ee,searchQuery:de=""}=H,{classes:he}=x(),ie=(0,T.useCallback)(ve=>{const{title:Ce,type:Se,config:Re,relatedConfigs:Ne}=ve;return(0,u.jsx)(pe,{panel:ve,searchQuery:de,onClick:()=>{ee({type:Se,config:Re,relatedConfigs:Ne})}},`${Se}-${Ce}`)},[ee,de]);return(0,u.jsx)(I.Z,{className:he.grid,maxWidth:!1,children:xe.map(ie)})}var W=o(81774),ue=o(98043),Q=o(72994),U=o(20379),fe=o(17055),Me=o(15400),je=o(14117),we=o(82056),Ze=o(42689),Ke=o(28219);const L=(0,D.ZL)()((H,xe,ee)=>({listItemButton:{height:H.spacing(4),cursor:"grab",[`&:not(:hover) .${ee.dragIcon}`]:{visibility:"hidden"}},dragIcon:{cursor:"grab",marginRight:H.spacing(-1),color:H.palette.text.disabled}}));function K(H){const{searchQuery:xe,panel:ee,onClick:de,onDragStart:he,onDrop:ie,checked:ve=!1,highlighted:Ce=!1,mosaicId:Se}=H,{classes:Re}=L(),Ne=(0,T.useRef)(null),[,Oe]=(0,Ze.c)({type:Ke.vv.WINDOW,item:()=>(he?.(),{mosaicId:Se}),options:{dropEffect:"copy"},end:(Xe,ct)=>{const st=ct.getDropResult()??{},{position:Ue,path:Ye,tabId:it}=st;if((Ue==null||Ye==null)&&it==null){de();return}const{type:Te,config:Je,relatedConfigs:ke}=ee;ie({type:Te,config:Je,relatedConfigs:ke,position:Ue,path:Ye,tabId:it})}});(0,T.useEffect)(()=>{if(Ce&&Ne.current){const Xe=Ne.current.getBoundingClientRect(),ct=Ne.current.parentElement?.parentElement?.parentElement;if(ct){const st=ct.getBoundingClientRect().top;Xe.top>=0&&Xe.top>=st&&Xe.top+50<=window.innerHeight||Ne.current.scrollIntoView()}}},[Ce]);const Le=(0,T.useCallback)(Xe=>{Oe(Xe),Ne.current=Xe},[Oe,Ne]),ze=ee.extensionNamespace?`${ee.title} [${ee.extensionNamespace}]`:ee.title,$e=(0,T.useCallback)(Xe=>{Xe.stopPropagation(),de()},[de]);return(0,u.jsx)(U.Z,{placement:"right",enterDelay:500,leaveDelay:0,TransitionComponent:fe.Z,title:(0,u.jsxs)(F.Z,{paddingTop:.25,style:{width:200},children:[ee.thumbnail!=null&&(0,u.jsx)("img",{src:ee.thumbnail,alt:ee.title}),(0,u.jsxs)(F.Z,{padding:1,gap:.5,children:[(0,u.jsx)(Ee.Z,{variant:"body2",fontWeight:"bold",children:ee.title}),(0,u.jsx)(Ee.Z,{variant:"body2",style:{opacity:.6},children:ee.description})]})]}),children:(0,u.jsx)(Me.ZP,{dense:!0,disablePadding:!0,children:(0,u.jsxs)(je.Z,{selected:Ce,className:Re.listItemButton,disabled:ve,ref:Le,onClick:$e,children:[(0,u.jsx)(we.Z,{children:(0,u.jsx)("span",{"data-testid":`panel-menu-item ${ee.title}`,children:(0,u.jsx)(Pe,{targetStr:ze,searchText:xe})})}),(0,u.jsx)(Q.WeO,{className:Re.dragIcon})]})})})}function re(){document.activeElement instanceof HTMLElement&&document.activeElement.blur()}function J(H){const{filteredPanels:xe,highlightedPanelIdx:ee,onDragStart:de,onPanelSelect:he,selectedPanelType:ie,searchQuery:ve=""}=H,{dropPanel:Ce}=(0,ue._B)(),Se=(0,ue.Sr)(),Re=(0,T.useCallback)(({config:Le,relatedConfigs:ze,type:$e,position:Xe,path:ct,tabId:st})=>{Ce({newPanelType:$e,destinationPath:ct,position:Xe,tabId:st,config:Le,relatedConfigs:ze}),re()},[Ce]),Ne=(0,T.useMemo)(()=>ee!=null?xe[ee]:void 0,[xe,ee]),Oe=(0,T.useCallback)(Le=>{const{title:ze,type:$e,config:Xe,relatedConfigs:ct}=Le;return(0,u.jsx)(K,{mosaicId:Se,panel:Le,onDragStart:de,onDrop:Re,onClick:()=>{he({type:$e,config:Xe,relatedConfigs:ct}),re()},checked:$e===ie,highlighted:Ne?.title===ze,searchQuery:ve},`${$e}-${ze}`)},[Ne?.title,Se,de,Re,he,ve,ie]);return(0,u.jsx)(W.Z,{dense:!0,disablePadding:!0,children:xe.map(Oe)})}const Ie=(0,D.ZL)()(H=>{const{spacing:xe,palette:ee}=H;return{toolbar:{position:"sticky",top:-.5,zIndex:100,display:"flex",justifyContent:"stretch",padding:H.spacing(1.5),backgroundImage:`linear-gradient(to top, transparent, ${ee.background.paper} ${xe(1.5)}) !important`},toolbarMenu:{backgroundImage:`linear-gradient(to top, transparent, ${ee.background.menu} ${xe(1.5)}) !important`},toolbarGrid:{padding:H.spacing(2)}}});function be(H){const xe=new Map;for(const ee of H){const{title:de,type:he,config:ie}=(0,j.N)(ee),ve=de??he??"<unnamed>";if(he==null||he.length===0)throw new Error(`Panel component ${de} must declare a unique \`static panelType\``);const Ce=(0,j.N)(xe.get(he));if(Ce&&n.Z(Ce.config)&&n.Z(ie)){const Re=Ce.title??Ce.type??"<unnamed>";throw new Error(`Two components have the same panelType ('${he}') and no preset configs: ${Re} and ${ve}`)}xe.set(he,ee)}}const $=(0,T.forwardRef)(function(xe,ee){const{isMenu:de=!1,onDragStart:he,onPanelSelect:ie,selectedPanelType:ve,mode:Ce="list"}=xe,{classes:Se,cx:Re}=Ie(),{t:Ne}=(0,P.$G)("addPanel"),[Oe,Le]=(0,T.useState)(""),[ze,$e]=(0,T.useState)(),Xe=(0,T.useCallback)(ot=>{const et=ot.target.value;Le(et),$e(et?0:void 0)},[]),ct=(0,M.v)(),st=(0,T.useMemo)(()=>{const ot=ct.getPanels(),et=S.Z(ot,dt=>dt.title);return ot.map(dt=>(et[dt.title]??0)>1?dt:{...dt,namespace:void 0})},[ct]),{allRegularPanels:Ue,allPreconfiguredPanels:Ye}=(0,T.useMemo)(()=>{const ot=st,et=ot.filter(X=>!X.config),dt=ot.filter(X=>X.config),ut=(X,We)=>X.title.localeCompare(We.title,void 0,{ignorePunctuation:!0,sensitivity:"base"});return{allRegularPanels:[...et].sort(ut),allPreconfiguredPanels:[...dt].sort(ut)}},[st]);(0,T.useEffect)(()=>{be([...Ue,...Ye])},[Ue,Ye]);const it=(0,T.useCallback)(ot=>Oe.length>0?E().go(Oe,ot,{keys:["title","description"],scoreFn:et=>Math.max(et[0]?et[0].score:-1e3,et[1]?et[1].score-100:-1e3),threshold:-900}).map(et=>et.obj):ot,[Oe]),{filteredRegularPanels:Te,filteredPreconfiguredPanels:Je}=(0,T.useMemo)(()=>({filteredRegularPanels:it(Ue),filteredPreconfiguredPanels:it(Ye)}),[it,Ue,Ye]),ke=(0,T.useMemo)(()=>[...Je,...Te],[Je,Te]),yt=(0,T.useMemo)(()=>ze!=null?ke[ze]:void 0,[ke,ze]),ft=ke.length===0,St=(0,T.useCallback)(ot=>{ot.key!=="Escape"&&ot.stopPropagation(),Ce!=="grid"&&(ot.key==="ArrowDown"?$e(et=>et==null?0:(et+1)%ke.length):ot.key==="ArrowUp"?$e(et=>{if(!(ke.length<=0))return et==null?ke.length-1:(et-1+ke.length)%ke.length}):ot.key==="Enter"&&yt&&ie({type:yt.type,config:yt.config,relatedConfigs:yt.relatedConfigs}))},[ke.length,yt,Ce,ie]);return(0,u.jsxs)(F.Z,{fullHeight:!0,ref:ee,children:[(0,u.jsx)("div",{className:Re(Se.toolbar,{[Se.toolbarMenu]:de,[Se.toolbarGrid]:Ce==="grid"}),children:(0,u.jsx)(l.Z,{fullWidth:!0,variant:"filled",placeholder:Ne("searchPanels"),value:Oe,onChange:Xe,onKeyDown:St,autoFocus:!0,"data-testid":"panel-list-textfield",InputProps:{startAdornment:(0,u.jsx)(v.Z,{fontSize:"small"}),endAdornment:Oe&&(0,u.jsx)(A.Z,{size:"small",edge:"end",onClick:()=>{Le("")},children:(0,u.jsx)(g.Z,{fontSize:"small"})})}})}),Ce==="grid"?(0,u.jsx)(N,{searchQuery:Oe,filteredPanels:ke,onPanelSelect:ie}):(0,u.jsx)(J,{searchQuery:Oe,filteredPanels:ke,selectedPanelType:ve,highlightedPanelIdx:ze,onDragStart:he,onPanelSelect:ie}),ft&&(0,u.jsx)(F.Z,{padding:2,children:(0,u.jsx)(R.Z,{children:Ne("noPanelsMatchSearchCriteria")})})]})})},82044:(ce,C,o)=>{"use strict";o.d(C,{R:()=>v,Z:()=>l});var u=o(2784);const g=u.createContext(void 0);g.displayName="PanelContext";function v(){const A=u.useContext(g);if(!A)throw new Error("Tried to use PanelContext outside a <PanelContext.Provider />");return A}const l=g},14123:(ce,C,o)=>{"use strict";o.d(C,{_:()=>he});var u=o(52322),g=o(47746),v=o(2784),l=o(16003),A=o(91004),b=o(75845),E=o(23503),n=o(44668),S=o(85026),T=o(82044),P=o(76479),D=o(82799),R=o(51390),F=o(86495),M=o(36423),j=o(24304),I=o(39367),O=o(10363),w=o(72283),Y=o(96027),se=o(49565),Ee=o(68434),ae=o(68588),Pe=o(72970);const ye=(0,Pe.ZL)()({root:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"}});function pe(){const{t:ie}=(0,ae.$G)("panelConfigVersionGuard"),{classes:ve}=ye();return(0,u.jsx)(w.Z,{className:ve.root,children:(0,u.jsx)(Y.Z,{children:(0,u.jsxs)(se.Z,{children:[(0,u.jsx)(Ee.Z,{variant:"subtitle1",children:ie("warning")}),(0,u.jsx)(Ee.Z,{variant:"subtitle1",children:ie("instructions")})]})})})}var x=o(5817),N=o.n(x),W=o(8220),ue=o(58702);function Q(ie,ve){return ie+`
`+ve}function U(ie,ve,Ce){const Se=Q(ie.topic,ie.schemaName),Re=ve.get(Se);for(const Ne of Re??[]){const Oe=Ne.converter(ie.message,ie);Ce.push({topic:ie.topic,schemaName:Ne.toSchemaName,receiveTime:ie.receiveTime,message:Oe,originalMessageEvent:ie,sizeInBytes:ie.sizeInBytes})}}function fe(ie,ve){const Ce=new Map;for(const[Se,Re]of ie.entries()){const Ne=ue.Z(Re,ve?.get(Se)??[]);Ne.length>0&&Ce.set(Se,Ne)}return Ce}function Me(ie,ve,Ce){const Se=new Map,Re=new Set;for(const Ne of ie){if(!Ne.convertTo){Re.add(Ne.topic);continue}const Oe=ve.find(st=>st.name===Ne.topic&&st.schemaName===Ne.convertTo);if(Oe){Re.add(Oe.name);continue}const Le=ve.find(st=>st.name===Ne.topic);if(!Le)continue;const ze=Q(Ne.topic,Le.schemaName??"<no-schema>");let $e=Se.get(ze);if($e?.find(st=>st.toSchemaName===Ne.convertTo))continue;const ct=Ce?.find(st=>st.fromSchemaName===Le.schemaName&&st.toSchemaName===Ne.convertTo);ct&&($e??=[],$e.push(ct),Se.set(ze,$e))}return{unconvertedSubscriptionTopics:Re,topicSchemaConverters:Se}}function je(ie,ve,Ce){const Se=Array(ie.length).fill(0);if(ie.length!==0)for(;;){let Re;for(let Oe=0;Oe<Se.length;Oe++){const Le=Se[Oe],ze=ie[Oe];if(Le>=ze.length)continue;const $e=ze[Le];if(Re==null)Re=Oe;else{const Xe=ie[Re][Se[Re]];ve($e,Xe)<0&&(Re=Oe)}}if(Re==null)break;const Ne=ie[Re][Se[Re]];if(Ne!=null)Ce(Ne),Se[Re]++;else break}}const we=new Map;function Ze(){let ie=M.X,ve,Ce,Se,Re,Ne,Oe,Le;const ze=new Map,$e=N()(fe),Xe=N()(Me),ct={};return function(Ue){const{appSettings:Ye,colorScheme:it,currentFrame:Te,globalVariables:Je,hoverValue:ke,messageConverters:yt,playerState:ft,sharedPanelState:St,sortedTopics:ot,subscriptions:et,watchedFields:dt}=Ue;let ut=!1;const X=ft?.activeData,We=ct,Tt=Xe(et,ot,yt),{unconvertedSubscriptionTopics:He,topicSchemaConverters:ht}=Tt,ge=Le!==Tt,Zt=$e(ht,Le?.topicSchemaConverters);if(Ce!==X?.lastSeekTime&&ze.clear(),dt.has("didSeek")){const tt=Ce!==X?.lastSeekTime;tt!==We.didSeek&&(We.didSeek=tt,ut=!0),Ce=X?.lastSeekTime}if(dt.has("parameters")){const tt=X?.parameters??we;tt!==We.parameters&&(ut=!0,We.parameters=tt)}if(dt.has("sharedPanelState")&&St!==Ne&&(ut=!0,Ne=St,We.sharedPanelState=St),dt.has("variables")&&Je!==ie&&(ut=!0,ie=Je,We.variables=new Map(Object.entries(Je))),dt.has("topics")&&(ot!==Se||Re!==yt)){ut=!0;const tt=ot.map(pt=>{const bt={name:pt.name,datatype:pt.schemaName??"",schemaName:pt.schemaName??""};if(yt){const at=[];for(const rt of yt)rt.fromSchemaName===pt.schemaName&&(at.includes(rt.toSchemaName)||at.push(rt.toSchemaName));at.length>0&&(bt.convertibleTo=at)}return bt});We.topics=tt,Se=ot}if(dt.has("currentFrame")){if(Te&&Te!==Oe){const tt=[];for(const pt of Te)He.has(pt.topic)&&tt.push(pt),U(pt,ht,tt),ze.set(pt.topic,pt);We.currentFrame=tt,ut=!0}else if(ge){const tt=[];for(const pt of ze.values())U(pt,Zt,tt);We.currentFrame=tt,ut=!0}else Te!==Oe&&(We.currentFrame=Te,ut=!0);Oe=Te}if(dt.has("allFrames")){const tt=ft?.progress.messageCache?.blocks;if(tt!=null&&ve!==tt||ge){ut=!0;const pt=tt??ve??[],bt=We.allFrames=[],at=Array.from(new Set((0,W.Z)(et,rt=>rt.preload===!0?rt.topic:void 0)));for(const rt of pt)rt&&je(at.map(It=>rt.messagesByTopic[It]??[]),(It,Be)=>(0,n.compare)(It.receiveTime,Be.receiveTime),It=>{He.has(It.topic)&&bt.push(It),U(It,ht,bt)})}ve=tt}if(dt.has("currentTime")&&We.currentTime!==X?.currentTime&&(We.currentTime=X?.currentTime,ut=!0),dt.has("startTime")&&We.startTime!==X?.startTime&&(We.startTime=X?.startTime,ut=!0),dt.has("endTime")&&We.endTime!==X?.endTime&&(We.endTime=X?.endTime,ut=!0),dt.has("previewTime")){const tt=X?.startTime;if(tt!=null&&ke!=null){const pt=(0,n.toSec)(tt)+ke.value;pt!==We.previewTime&&(ut=!0),We.previewTime=pt}else We.previewTime!=null&&(ut=!0),We.previewTime=void 0}if(dt.has("colorScheme")&&it!==We.colorScheme&&(ut=!0,We.colorScheme=it),dt.has("appSettings")&&We.appSettings!==Ye&&(ut=!0,We.appSettings=Ye),Re=yt,Le=Tt,!!ut)return We}}var Ke=o(98043),L=o(40301);const K=Object.freeze({}),re=ie=>ie.sharedPanelState??K;function J(){const ie=(0,Ke.NS)(re),{updateSharedPanelState:ve}=(0,Ke._B)(),Ce=(0,T.R)().id,Se=(0,v.useMemo)(()=>(0,L.$k)(Ce),[Ce]),Re=(0,v.useMemo)(()=>ie[Se],[Se,ie]),Ne=(0,v.useCallback)(Oe=>{ve(Se,Oe)},[Se,ve]);return[Re,Ne]}var Ie="../../packages/studio-base/src/components/PanelExtensionAdapter/PanelExtensionAdapter.tsx";const be=E.ZP.getLogger(Ie),$="foxgloveConfigVersion";function H(ie){return ie!=null&&typeof ie=="object"&&$ in ie&&typeof ie[$]=="number"}function xe(ie){return ie}function ee(ie){return ie.installedMessageConverters}function de(ie){const{initPanel:ve,config:Ce,saveConfig:Se,highestSupportedConfigVersion:Re}=ie,Ne=(0,l.Z)(Ce),Oe=(0,S.An)(xe),{playerState:Le,pauseFrame:ze,setSubscriptions:$e,seekPlayback:Xe,sortedTopics:ct}=Oe,{capabilities:st,profile:Ue}=Le,{openSiblingPanel:Ye,setMessagePathDropConfig:it}=(0,T.R)(),[Te]=(0,v.useState)(()=>(0,A.Z)()),Je=(0,b.t2)(),[ke,yt]=(0,v.useState)(),[ft,St]=(0,v.useState)(new Set),ot=(0,R.I)(ee),[et,dt]=(0,v.useState)([]),[ut,X]=(0,v.useState)(new Map),[We,Tt]=(0,v.useState)([]),[He,ht]=(0,v.useState)(),ge=(0,v.useRef)(!1),[Zt,tt]=(0,v.useState)(!1),[,pt]=(0,I._N)(),{globalVariables:bt,setGlobalVariables:at}=(0,M.Z)(),rt=(0,F.hx)({componentId:`PanelExtensionAdapter:${Te}`,isPlaybackSeconds:!0}),It=(0,F.D4)(),Be=(0,F.Js)(),Ht=(0,v.useRef)(new Map),{palette:{mode:Vt}}=(0,g.Z)(),xn=(0,D.H)(),Ft=(0,S.m7)(),[En,hs]=(0,v.useState)(()=>Ze()),[Ln,fn]=J();(0,v.useEffect)(()=>{const De=new Map;for(const Ve of We){const Lt=jt=>{X(en=>(en.set(Ve,jt),new Map(en)))};De.set(Ve,Lt),xn.addChangeListener(Ve,Lt)}const Fe=new Map;for(const Ve of We)Fe.set(Ve,xn.get(Ve));return X(Fe),()=>{for(const[Ve,Lt]of De.entries())xn.removeChangeListener(Ve,Lt)}},[xn,We]);const on=(0,v.useMemo)(()=>Oe.messageEventsBySubscriberId.get(Te),[Oe.messageEventsBySubscriberId,Te]),Qe=(0,v.useRef)(!1);(0,v.useLayoutEffect)(()=>{if(!He||!ge.current)return;const De=En({appSettings:ut,colorScheme:Vt,currentFrame:on,globalVariables:bt,hoverValue:rt,messageConverters:ot,playerState:Le,sharedPanelState:Ln,sortedTopics:ct,subscriptions:et,watchedFields:ft});if(!De)return;if(Qe.current){tt(!0);return}tt(!1);const Fe=ze(Te);Qe.current=!0;try{yt(void 0);let Ve=!1;He(De,()=>{if(Ve){be.warn(`${Te} called render done function twice`);return}Ve=!0,Fe(),Qe.current=!1})}catch(Ve){yt(Ve)}},[ut,En,Vt,bt,rt,et,ot,on,Te,ze,Le,He,Ln,ct,ft]);const Gt=(0,I.W0)(),an=(0,v.useMemo)(()=>{const De={addPanel({position:Fe,type:Ve,updateIfExists:Lt,getState:jt}){if(Je())switch(Fe){case"sibling":Ye({panelType:Ve,updateIfExists:Lt,siblingConfigCreator:en=>jt(en)});return;default:(0,O.v)(Fe,`Unsupported position for addPanel: ${Fe}`)}}};return{initialState:Ne.current,saveState:Fe=>{Je()&&Se(Fe)},layout:De,seekPlayback:Xe?Fe=>{if(!Je())return;const Ve=typeof Fe=="object"?Fe:(0,n.fromSec)(Fe);Xe(Ve)}:void 0,dataSourceProfile:Ue,setParameter:(Fe,Ve)=>{Je()&&Ft().setParameter(Fe,Ve)},setVariable:(Fe,Ve)=>{Je()&&at({[Fe]:Ve})},setPreviewTime:Fe=>{if(Je())if(Fe==null)Be("PanelExtensionAdatper");else{const Lt=Ft().playerState.activeData?.startTime;if(!Lt)return;const jt=Fe-(0,n.toSec)(Lt);It({type:"PLAYBACK_SECONDS",componentId:"PanelExtensionAdatper",value:jt})}},setSharedPanelState:fn,watch:Fe=>{Je()&&St(Ve=>{if(Ve.has(Fe))return Ve;const Lt=new Set(Ve);return Lt.add(Fe),Lt})},subscribe:Fe=>{if(!Je())return;const Ve=Fe.map(jt=>typeof jt=="string"?{topic:jt,preloadType:"full"}:{topic:jt.topic,convertTo:jt.convertTo,preloadType:jt.preload===!0?"full":"partial"}),Lt=Fe.map(jt=>typeof jt=="string"?{topic:jt,preload:!0}:jt);dt(Lt),$e(Te,Ve)},advertise:st.includes(j.C.advertise)?(Fe,Ve,Lt)=>{if(!Je())return;const jt={topic:Fe,schemaName:Ve,options:Lt};Ht.current.set(Fe,jt),Ft().setPublishers(Te,Array.from(Ht.current.values()))}:void 0,unadvertise:st.includes(j.C.advertise)?Fe=>{Je()&&(Ht.current.delete(Fe),Ft().setPublishers(Te,Array.from(Ht.current.values())))}:void 0,publish:st.includes(j.C.advertise)?(Fe,Ve)=>{Je()&&Ft().publish({topic:Fe,msg:Ve})}:void 0,callService:st.includes(j.C.callServices)?async(Fe,Ve)=>{if(!Je())throw new Error("Service call after panel was unmounted");return await Ft().callService(Fe,Ve)}:void 0,unstable_fetchAsset:async(Fe,Ve)=>{if(!Je())throw new Error("Asset fetch after panel was unmounted");return await Ft().fetchAsset(Fe,Ve)},unsubscribeAll:()=>{Je()&&(dt([]),$e(Te,[]))},subscribeAppSettings:Fe=>{Je()&&Tt(Fe)},updatePanelSettingsEditor:Fe=>{Je()&&Gt(Fe)},setDefaultPanelTitle:Fe=>{Je()&&pt(Fe)},EXPERIMENTAL_setMessagePathDropConfig(Fe){it(Fe)}}},[st,Be,Ue,Ft,Ne,Je,Ye,Te,Se,Xe,pt,at,It,fn,$e,Gt,it]),Cn=(0,v.useRef)(null);(0,b.R5)(ve,"initPanel"),(0,b.R5)(Te,"panelId"),(0,b.R5)(an,"partialExtensionContext");const _t=(0,v.useMemo)(()=>{const De=Ne.current;return H(De)&&Re!=null&&De[$]>Re},[Ne,Re]);(0,v.useLayoutEffect)(()=>{if(!Cn.current)throw new Error("Expected panel container to be mounted");if(_t)return;ht(void 0),Qe.current=!1,tt(!1),hs(()=>Ze());const De=document.createElement("div");De.style.width="100%",De.style.height="100%",De.style.overflow="hidden",Cn.current.appendChild(De),be.info(`Init panel ${Te}`);const Fe=ve({panelElement:De,...an,set onRender(Ve){ht(()=>Ve)}});return ge.current=!0,()=>{Fe&&Fe(),ge.current=!1,De.remove(),Ft().setSubscriptions(Te,[]),Ft().setPublishers(Te,[])}},[ve,Te,an,Ft,_t]);const rn={};if(Zt&&(rn.borderColor="orange",rn.borderWidth="1px",rn.borderStyle="solid"),ke)throw ke;return(0,u.jsxs)("div",{style:{alignItems:"stretch",display:"flex",flexDirection:"column",height:"100%",overflow:"hidden",width:"100%",zIndex:0,...rn},children:[(0,u.jsx)(P.Z,{}),_t&&(0,u.jsx)(pe,{}),ie.children,(0,u.jsx)("div",{style:{flex:1,overflow:"hidden"},ref:Cn})]})}const he=de},13688:(ce,C,o)=>{"use strict";o.d(C,{D:()=>pe,Z:()=>ue});var u=o(52322),g=o(3104),v=o(2784),l=o(8533),A=o(28219),b=o(72970),E=o(44449),n=o(29268),S=o(15116),T=o(98043),P=o(51390),D=o(48105),R=o(40301),F=o(38256),M=o(93723),j=o(96715);function I({children:Q,id:U,tabId:fe}){const Me=(0,v.useCallback)(we=>we.sequenceNumbers[U]??0,[U]),je=(0,j.J)(Me);return(0,u.jsx)(v.Fragment,{children:Q},`${U}${fe??""}${je}`)}var O=o(75017),w=o(76479),Y=o(93812);function se(Q){const{config:U,saveConfig:fe}=Q;return(0,u.jsxs)(Y.Z,{flex:"auto",alignItems:"center",justifyContent:"center","data-testid":U.id,children:[(0,u.jsx)(w.Z,{isUnknownPanel:!0}),(0,u.jsxs)(n.Z,{children:["Unknown panel type: ",U.type,"."]})]})}se.panelType="unknown",se.defaultConfig={};const Ee=(0,O.Z)(se);var ae=o(24426);const Pe=(0,b.ZL)()({hideTopLevelDropTargets:{margin:0,".mosaic-root + .drop-target-container":{display:"none !important"},"& > .mosaic-window > .drop-target-container":{display:"none !important"}}});function ye({tabId:Q,children:U}){const{classes:fe,cx:Me}=Pe(),[,je]=(0,l.L)({accept:A.vv.WINDOW,drop:(we,Ze)=>{const Ke=Ze.getDropResult();if(Ke)return{tabId:Q,...Ke}}});return(0,u.jsx)("div",{className:Me(fe.hideTopLevelDropTargets,"mosaic-tile"),ref:je,children:U})}function pe(Q){const{savePanelConfigs:U}=(0,T._B)(),fe=(0,T.Sr)(),{layout:Me,onChange:je,tabId:we}=Q,Ze=(0,v.useCallback)(J=>{const Ie="RosOut",be=J?.type?J.type:Ie,$=(0,R.nJ)(be);return J?.panelConfig&&U({configs:[{id:$,config:J.panelConfig}]}),$},[U]),Ke=(0,D.v)(),L=(0,v.useMemo)(()=>new Map(Ke.getPanels().map(J=>[J.type,v.lazy(J.module)])),[Ke]),K=(0,v.useCallback)((J,Ie)=>{if(J==null||typeof J!="string")return(0,u.jsx)(u.Fragment,{});const be=(0,R.$k)(J);let $;const H=L.get(be);H?$=(0,u.jsx)(H,{childId:J,tabId:we}):$=(0,u.jsx)(Ee,{childId:J,tabId:we,overrideConfig:{type:be,id:J}});const xe=(0,u.jsx)(A.h1,{title:"",path:Ie,createNode:Ze,renderPreview:()=>{},children:(0,u.jsx)(v.Suspense,{fallback:(0,u.jsx)(n.Z,{children:(0,u.jsx)(g.Z,{size:28})}),children:(0,u.jsx)(M.x.Provider,{value:Ie,children:(0,u.jsx)(I,{id:J,tabId:we,children:$})})})},J);return be==="Tab"?(0,u.jsx)(ye,{tabId:J,children:xe}):xe},[L,Ze,we]),re=(0,v.useMemo)(()=>Me!=null?(0,u.jsx)(A.wB,{renderTile:K,className:"mosaic-foxglove-theme",resize:{minimumPaneSizePercentage:2},value:Me,onChange:J=>{je(J??void 0)},mosaicId:fe}):(0,u.jsx)(E.v,{tabId:we}),[Me,fe,je,K,we]);return(0,u.jsx)(F.Z,{children:re})}function x(){return(0,u.jsx)(n.Z,{children:(0,u.jsx)(g.Z,{size:28})})}const N=Q=>Q.selectedLayout?.data!=null,W=Q=>Q.selectedLayout?.data?.layout;function ue(){const{layoutEmptyState:Q}=(0,S.b)(),{changePanelLayout:U}=(0,T._B)(),fe=(0,T.NS)(N),Me=(0,T.NS)(W),je=(0,P.I)(Ze=>Ze.installedExtensions),we=(0,v.useCallback)(Ze=>{Ze!=null&&U({layout:Ze})},[U]);return je==null?(0,u.jsx)(x,{}):fe?(0,u.jsx)(pe,{layout:Me,onChange:we}):Q||(0,u.jsx)(u.Fragment,{})}},84877:(ce,C,o)=>{"use strict";o.d(C,{D:()=>b,O:()=>n});var u=o(52322),g=o(47591),v=o(2784),l=o(72970),A=o(30280);const b="FoxglovePanelRoot-root",E=(0,l.ZL)()((S,T)=>{const{palette:P,transitions:D}=S,{sourceRect:R,hasFullscreenDescendant:F}=T,M=D.duration.shorter;return{root:{display:"flex",flexDirection:"column",flex:"1 1 auto",overflow:"hidden",backgroundColor:P.background.default,border:`0px solid ${(0,g.Fq)(P.primary.main,.67)}`,transition:D.create("border-width",{duration:M}),"::after":{content:"''",top:0,left:0,right:0,bottom:0,inset:1,opacity:0,border:`1px solid ${P.primary.main}`,position:"absolute",pointerEvents:"none",transition:"opacity 0.05s ease-out",zIndex:1e4+1}},rootSelected:{"::after":{opacity:1,transition:"opacity 0.125s ease-out"}},entering:{position:"fixed",top:R?.top??0,left:R?.left??0,right:R?window.innerWidth-R.right:0,bottom:R?window.innerHeight-R.bottom:0,zIndex:1e4},entered:{borderWidth:4,position:"fixed",top:A.h,left:0,right:0,bottom:77,zIndex:1e4,transition:D.create(["border-width","top","right","bottom","left"],{duration:M})},exiting:{position:"fixed",top:R?.top??0,left:R?.left??0,right:R?window.innerWidth-R.right:0,bottom:R?window.innerHeight-R.bottom:0,zIndex:1e4,transition:D.create(["border-width","top","right","bottom","left"],{duration:M})},exited:{position:"relative",top:0,left:0,right:0,bottom:0,zIndex:F?"auto":1}}}),n=(0,v.forwardRef)(function(T,P){const{className:D,fullscreenState:R,hasFullscreenDescendant:F,selected:M,sourceRect:j,...I}=T,{classes:O,cx:w}=E({sourceRect:j,hasFullscreenDescendant:F}),Y=w(b,D,O.root,{[O.entering]:R==="entering",[O.entered]:R==="entered",[O.exiting]:R==="exiting",[O.exited]:R==="exited",[O.rootSelected]:M});return(0,u.jsx)("div",{ref:P,className:Y,...I,children:T.children})})},49318:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>b});var u=o(52322),g=o(87037),v=o(2784),l=o(72970);const A=(0,l.ZL)()(E=>({root:{padding:E.spacing(.375),fontSize:"0.875rem",".MuiSvgIcon-root, svg:not(.MuiSvgIcon-root)":{height:"1em",width:"1em",fontSize:"inherit"}}})),b=(0,v.forwardRef)(function(n,S){const{className:T,...P}=n,{classes:D,cx:R}=A();return(0,u.jsx)(g.Z,{ref:S,className:R(D.root,T),...P})})},76479:(ce,C,o)=>{"use strict";o.d(C,{B:()=>Ke,Z:()=>K});var u=o(52322),g=o(63436),v=o(68434),l=o(2784),A=o(72970),b=o(82044),E=o(49318),n=o(39367),S=o(40301),T=o(13264),P=o(93812),D=o(98043),R=o(48105),F=o(96715),M=o(26775),j=o(28319),I=o(50985),O=o(3925),w=o(80078),Y=o(56961),se=o(28219),Ee=o(62280),ae=o(6693),Pe=o(72283),ye=o(99118),pe=o(39347);const x=(0,A.ZL)()(re=>({paper:{backgroundColor:re.palette.background.menu,maxHeight:`calc(100vh - ${re.spacing(12)})`,overflow:"auto",WebkitOverflowScrolling:"touch"}}));function N({tabId:re,anchorEl:J,onClose:Ie}){const{classes:be}=x(),$=(0,l.useContext)(b.Z),{mosaicActions:H}=(0,l.useContext)(se.DF),{mosaicWindowActions:xe}=(0,l.useContext)(se.Jy),{swapPanel:ee}=(0,D._B)(),de=Boolean(J),he=(0,l.useCallback)(ve=>({type:Ce,config:Se,relatedConfigs:Re})=>{if(Ce===$?.type){Ie();return}ee({tabId:re,originalId:ve??"",type:Ce,root:H.getRoot(),path:xe.getPath(),config:Se??{},relatedConfigs:Re})},[Ie,H,xe,$?.type,ee,re]),ie={};return(0,u.jsx)(Ee.Z,{...ie,id:"change-panel-menu",open:de,role:void 0,anchorEl:J,transition:!0,placement:"right-start",style:{zIndex:1e4},popperOptions:{modifiers:[{name:"flip",options:{fallbackPlacements:["right-start","left-start"]}}]},children:({TransitionProps:ve,placement:Ce})=>(0,u.jsx)(ae.Z,{...ve,style:{transformOrigin:Ce==="right-start"?"top left":"top right"},children:(0,u.jsx)(Pe.Z,{elevation:8,className:be.paper,children:(0,u.jsx)(ye.d,{onClickAway:Ie,children:(0,u.jsx)(pe.B,{mode:"list",isMenu:!0,selectedPanelType:$?.type,onPanelSelect:he($?.id)})})})})})}function W(re,J){if(!re||!J)return;const Ie=(0,se.PC)(J.getRoot(),re.getPath());if(typeof Ie!="string")throw new Error(`Used getPanelTypeFromMosaic on non-leaf node: ${JSON.stringify(Ie)}`);return(0,S.$k)(Ie)}var ue=o(2784);const Q=(0,A.ZL)()(re=>({error:{color:re.palette.error.main},icon:{marginRight:re.spacing(-1)},menuItem:{display:"flex",gap:re.spacing(1),alignItems:"center",".root-span":{display:"flex",marginLeft:re.spacing(-.25)},"&.Mui-selected":{backgroundColor:re.palette.action.hover,"&:hover":{backgroundColor:re.palette.action.hover}}}}));function U({isUnknownPanel:re}){const{classes:J,cx:Ie}=Q(),[be,$]=(0,l.useState)(void 0),[H,xe]=(0,l.useState)(void 0),ee=Boolean(be),de=Boolean(H),he=(0,l.useContext)(b.Z),ie=he?.tabId,{mosaicActions:ve}=(0,l.useContext)(se.DF),{mosaicWindowActions:Ce}=(0,l.useContext)(se.Jy),{getCurrentLayoutState:Se,closePanel:Re,splitPanel:Ne}=(0,D._B)(),Oe=(0,l.useCallback)(()=>W(Ce,ve),[ve,Ce]),Le=ke=>{xe(void 0),$(ke.currentTarget)},ze=()=>{xe(void 0),$(void 0)},$e=ke=>{H!==ke.currentTarget&&xe(ke.currentTarget),$(void 0)},Xe=(0,l.useCallback)(()=>{xe(void 0)},[]),ct=ke=>{xe(ke.currentTarget)},st=(0,l.useCallback)(()=>{Re({tabId:ie,root:ve.getRoot(),path:Ce.getPath()}),ze()},[Re,ve,Ce,ie]),Ue=(0,l.useCallback)((ke,yt)=>{const ft=Oe();if(ke==null||ft==null)throw new Error("Trying to split unknown panel!");const St=Se().selectedLayout?.data?.configById[ke]??{};Ne({id:ke,tabId:ie,direction:yt,root:ve.getRoot(),path:Ce.getPath(),config:St}),ze()},[Se,Oe,ve,Ce,Ne,ie]),Ye=(0,l.useCallback)(()=>{he?.enterFullscreen(),ze()},[he]),it=(0,l.useMemo)(()=>{const ke=[];return re||ke.push({key:"vsplit",text:"Split right",onClick:()=>{Ue(he?.id,"row")}},{key:"hsplit",text:"Split down",onClick:()=>{Ue(he?.id,"column")}}),he?.isFullscreen!==!0&&ke.push({key:"enter-fullscreen",text:"Fullscreen",onClick:Ye,"data-testid":"panel-menu-fullscreen"}),ke.push({key:"divider",type:"divider"}),ke.push({key:"remove",text:"Remove panel",onClick:st,"data-testid":"panel-menu-remove",className:J.error}),ke},[J.error,st,Ye,re,he?.id,he?.isFullscreen,Ue]),Te=(0,l.useRef)(null);return Oe()==null?(0,u.jsx)(u.Fragment,{}):(0,u.jsxs)("div",{ref:Te,children:[(0,u.jsx)(E.Z,{id:"panel-menu-button","aria-controls":ee?"panel-menu":void 0,"aria-haspopup":"true","aria-expanded":ee?"true":void 0,onClick:Le,"data-testid":"panel-menu",title:"More",children:(0,u.jsx)(I.Z,{})}),(0,u.jsxs)(O.Z,{id:"panel-menu",anchorEl:be,open:ee,onClose:ze,anchorOrigin:{vertical:"bottom",horizontal:"left"},MenuListProps:{"aria-labelledby":"panel-menu-button",dense:!0},children:[(0,u.jsxs)(w.Z,{className:J.menuItem,selected:de,id:"change-panel-button","aria-controls":de?"change-panel-menu":void 0,"aria-haspopup":"true","aria-expanded":de?"true":void 0,onClick:$e,onMouseEnter:ct,children:["Change panel",(0,u.jsx)(j.Z,{className:J.icon,fontSize:"small"})]}),(0,u.jsx)(N,{anchorEl:H,onClose:Xe,tabId:ie}),(0,u.jsx)(Y.Z,{variant:"middle"}),it.map((ke,yt)=>ke.type==="divider"?(0,u.jsx)(Y.Z,{variant:"middle"},`divider-${yt}`):(0,u.jsx)(w.Z,{onClick:ft=>{ft.stopPropagation(),ke.onClick?.()},onMouseEnter:()=>{xe(void 0)},className:Ie(J.menuItem,ke.className),"data-testid":ke["data-testid"],children:ke.text},ke.key))]})]})}const fe=ue.memo(U);var Me=o(2784);const je=(0,l.forwardRef)((re,J)=>{const{additionalIcons:Ie,isUnknownPanel:be}=re,{id:$,type:H}=(0,l.useContext)(b.Z)??{},xe=(0,l.useContext)(R.Z),{setSelectedPanelIds:ee}=(0,D.iy)(),{openPanelSettings:de}=(0,M.W)(),he=(0,l.useCallback)(Re=>$?Re.settingsTrees[$]!=null:!1,[$]),ie=(0,l.useMemo)(()=>H!=null?xe?.getPanelByType(H):void 0,[xe,H]),ve=(0,F.J)(he),Ce=(0,l.useCallback)(async()=>{$&&(ee([$]),de())},[$,ee,de]),Se=ie?.hasCustomToolbar!==!0||ve;return(0,u.jsxs)(P.Z,{direction:"row",alignItems:"center",paddingLeft:1,ref:J,children:[Ie,Se&&(0,u.jsx)(E.Z,{title:"Settings",onClick:Ce,children:(0,u.jsx)(T.Z,{})}),(0,u.jsx)(fe,{isUnknownPanel:be})]})});je.displayName="PanelToolbarControls";const we=Me.memo(je);var Ze=o(2784);const Ke=30,L=(0,A.ZL)()(re=>({root:{transition:"transform 80ms ease-in-out, opacity 80ms ease-in-out",cursor:"auto",flex:"0 0 auto",alignItems:"center",justifyContent:"flex-end",padding:re.spacing(.25,.75),display:"flex",minHeight:Ke,backgroundColor:re.palette.background.paper,width:"100%",left:0,zIndex:re.zIndex.appBar}})),K=Ze.memo(function({additionalIcons:J,backgroundColor:Ie,children:be,className:$,isUnknownPanel:H=!1}){const{classes:xe,cx:ee}=L(),{isFullscreen:de,exitFullscreen:he,config:{[S.xS]:ie=void 0}={}}=(0,l.useContext)(b.Z)??{},ve=(0,l.useContext)(b.Z),Ce=(0,l.useMemo)(()=>(0,u.jsxs)(u.Fragment,{children:[J,de===!0&&(0,u.jsx)(E.Z,{value:"exit-fullscreen",title:"Exit fullscreen",onClick:he,children:(0,u.jsx)(g.Z,{})})]}),[J,de,he]),Se=H||be!=null?void 0:ve?.connectToolbarDragHandle,Re=H||be==null?void 0:ve?.connectToolbarDragHandle,[Ne]=(0,n._N)(),Le=(ie!=null&&typeof ie=="string"&&ie.length>0?ie:Ne)??ve?.title;return(0,u.jsxs)("header",{className:ee(xe.root,$),"data-testid":"mosaic-drag-handle",ref:Se,style:{backgroundColor:Ie,cursor:Se!=null?"grab":"auto"},children:[be??(Le&&(0,u.jsx)(v.Z,{noWrap:!0,variant:"body2",color:"text.secondary",flex:"auto",children:Le})),(0,u.jsx)(we,{additionalIcons:Ce,isUnknownPanel:!!H,ref:Re})]})})},23144:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>A});var u=o(52322),g=o(86495),v=o(63718),l=o(2784);const A=l.memo(function({children:E,componentId:n,isPlaybackSeconds:S,scales:T}){const P=(0,g.hx)({componentId:n,isPlaybackSeconds:S});return(0,u.jsx)(v.G,{scales:T,xValue:P?.value,children:E})})},63718:(ce,C,o)=>{"use strict";o.d(C,{G:()=>A});var u=o(52322),g=o(2784),v=o(72970);const l=(0,v.ZL)()(()=>({root:{top:0,bottom:0,position:"absolute",pointerEvents:"none",willChange:"transform",visibility:"hidden"}}));function A({children:b,scales:E,xValue:n}){const{classes:S}=l(),T=(0,g.useMemo)(()=>{const D=E?.x;if(!D||n==null)return;const R=D.pixelMax-D.pixelMin,F=D.max-D.min;if(R===0||F===0)return;const M=(n-D.min)/(F/R)+D.pixelMin;if(!(M<D.pixelMin||M>D.pixelMax))return M},[E?.x,n]),P=(0,g.useMemo)(()=>T==null||isNaN(T)?{visibility:"hidden",transform:void 0}:{visibility:"visible",transform:`translateX(${T}px)`},[T]);return(0,u.jsx)("div",{className:S.root,style:P,children:b})}},80204:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>A,z:()=>l});var u=o(2784);class g{logEvent(){}}const v=(0,u.createContext)(new g);v.displayName="AnalyticsContext";function l(){return(0,u.useContext)(v)}const A=v},82799:(ce,C,o)=>{"use strict";o.d(C,{H:()=>v,Z:()=>l});var u=o(2784);const g=(0,u.createContext)(void 0);g.displayName="AppConfigurationContext";function v(){const A=(0,u.useContext)(g);if(!A)throw new Error("An AppConfigurationContext provider is required to useAppConfiguration");return A}const l=g},15116:(ce,C,o)=>{"use strict";o.d(C,{b:()=>v});var u=o(2784);const g=(0,u.createContext)({});g.displayName="AppContext";function v(){return(0,u.useContext)(g)}},98043:(ce,C,o)=>{"use strict";var u="../../packages/studio-base/src/context/CurrentLayoutContext/index.ts";o.d(C,{NS:()=>D,Sr:()=>T,ZP:()=>F,_B:()=>P,iy:()=>R});var g=o(2784),v=o(28219),l=o(75845),A=o(23503),b=o(77861),E=o(32614);const n=A.ZP.getLogger(u),S=(0,g.createContext)(void 0);S.displayName="CurrentLayoutContext";function T(){return(0,l.qe)(S).mosaicId}function P(){return(0,l.qe)(S).actions}function D(M){const j=(0,l.qe)(S),[,I]=(0,g.useReducer)(w=>w+1,0);(0,b.Z)(M,()=>{n.warn("useCurrentLayoutSelector is changing frequently. Rewrite your selector as a stable function.")});const O=(0,g.useRef)(void 0);return(!O.current||M!==O.current.selector)&&(O.current={value:(0,l.de)(j.actions.getCurrentLayoutState(),M),selector:M}),(0,g.useLayoutEffect)(()=>{let w=!0;const Y=se=>{if(!w)return;const Ee=(0,l.de)(se,M);Ee!==O.current?.value&&(O.current={value:Ee,selector:M},I())};return Y(j.actions.getCurrentLayoutState()),j.addLayoutStateListener(Y),()=>{w=!1,j.removeLayoutStateListener(Y)}},[j,M]),O.current.value}function R(){const M=(0,l.qe)(S),[j,I]=(0,g.useState)(()=>M.getSelectedPanelIds());(0,g.useLayoutEffect)(()=>{const ae=Pe=>{I(Pe)};return M.addSelectedPanelIdsListener(ae),()=>{M.removeSelectedPanelIdsListener(ae)}},[M]);const O=(0,l.qe)(S).setSelectedPanelIds,w=(0,l.qe)(S).getSelectedPanelIds,{getCurrentLayoutState:Y}=P(),se=(0,g.useCallback)(()=>{const ae=(0,v.fY)(Y().selectedLayout?.data?.layout??null);O(ae)},[Y,O]),Ee=(0,g.useCallback)((ae,Pe)=>{O(ye=>{const{selectedLayout:pe}=Y();return pe?.data?(0,E.Z)(ae,Pe,pe.data.configById,ye):ye})},[O,Y]);return(0,l.O4)({getSelectedPanelIds:w,selectedPanelIds:j,setSelectedPanelIds:O,selectAllPanels:se,togglePanelSelected:Ee})}const F=S},51390:(ce,C,o)=>{"use strict";o.d(C,{I:()=>A,d:()=>l});var u=o(2784),g=o(12294),v=o(75845);const l=(0,u.createContext)(void 0);function A(b){const E=(0,v.qe)(l);return(0,g.oR)(E,b)}},48105:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>l,v:()=>v});var u=o(2784);const g=(0,u.createContext)(void 0);g.displayName="PanelCatalogContext";function v(){const A=(0,u.useContext)(g);if(!A)throw new Error("A PanelCatalogContext provider is required to usePanelCatalog");return A}const l=g},96715:(ce,C,o)=>{"use strict";o.d(C,{J:()=>A,c:()=>l});var u=o(2784),g=o(12294),v=o(75845);const l=(0,u.createContext)(void 0);function A(b){const E=(0,v.qe)(l);return(0,g.oR)(E,b)}},39471:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>l,n:()=>v});var u=o(2784);const g=(0,u.createContext)({selectSource:()=>{},selectRecent:()=>{},availableSources:[],recentSources:[]});g.displayName="PlayerSelectionContext";function v(){return(0,u.useContext)(g)}const l=g},86495:(ce,C,o)=>{"use strict";o.d(C,{D4:()=>n,Gu:()=>l,Js:()=>b,hx:()=>T,oA:()=>P});var u=o(2784),g=o(12294),v=o(75845);const l=(0,u.createContext)(void 0),A=D=>D.clearHoverValue;function b(){return P(A)}const E=D=>D.setHoverValue;function n(){return P(E)}const S=()=>{};function T(D){const R=D?.disableUpdates!==!0,F=D?.componentId,M=D?.isPlaybackSeconds??!1,j=(0,u.useCallback)(I=>{if(I.hoverValue!=null)return I.hoverValue.type==="PLAYBACK_SECONDS"&&M||F==null||I.hoverValue.componentId===F?I.hoverValue:void 0},[F,M]);return P(R?j:S)}function P(D){const R=(0,v.qe)(l);return(0,g.oR)(R,D)}},31748:(ce,C,o)=>{"use strict";o.d(C,{B:()=>n,V:()=>E});var u=o(52322),g=o(2784),v=o(75845),l=o(1375),A=o(23621);const b=(0,g.createContext)(void 0);b.displayName="UserNodeStateContext";function E({children:S}){const[T,P]=(0,g.useState)({rosLib:A.k,typesLib:(0,l.ym)(),nodeStates:{}}),D=(0,g.useCallback)((O,w)=>{P(Y=>({...Y,nodeStates:{...Y.nodeStates,[O]:{logs:[],...Y.nodeStates[O],diagnostics:w}}}))},[]),R=(0,g.useCallback)((O,w)=>{P(Y=>({...Y,nodeStates:{...Y.nodeStates,[O]:{diagnostics:[],...Y.nodeStates[O],logs:(Y.nodeStates[O]?.logs??[]).concat(w)}}}))},[]),F=(0,g.useCallback)(O=>{P(w=>({...w,nodeStates:{...w.nodeStates,[O]:{diagnostics:[],...w.nodeStates[O],logs:[]}}}))},[]),M=(0,g.useCallback)(O=>{P(w=>({...w,rosLib:O}))},[]),j=(0,g.useCallback)(O=>{P(w=>({...w,typesLib:O}))},[]),I=(0,v.O4)({state:T,setUserNodeDiagnostics:D,addUserNodeLogs:R,clearUserNodeLogs:F,setUserNodeRosLib:M,setUserNodeTypesLib:j});return(0,u.jsx)(b.Provider,{value:I,children:S})}function n(){return(0,v.qe)(b,"UserNodeStateContext")}},54490:(ce,C,o)=>{"use strict";o.d(C,{C5:()=>n,G4:()=>P,Q:()=>T,VI:()=>S,gx:()=>b,q2:()=>E});var u=o(2784),g=o(41110),v=o(12294),l=o(92532),A=o(75845);const b=["panel-settings","topics","problems"],E=["events","variables","studio-logs-settings"],n=(0,u.createContext)(void 0);n.displayName="WorkspaceContext";const S={selectPanelSettingsOpen:D=>D.sidebars.left.open&&D.sidebars.left.item==="panel-settings"};function T(D){const R=(0,A.qe)(n);return(0,v.oR)(R,D)}function P(D){const R=(0,A.qe)(n);return(0,g.useSyncExternalStoreWithSelector)(R.subscribe,R.getState,R.getState,D,l.X)}},26775:(ce,C,o)=>{"use strict";o.d(C,{W:()=>w});var u=o(67067),g=o(84585),v=o(2784),l=o(87438),A=o(75845),b=o(80204),E=o(15116),n=o(98043),S=o(39471),T=o(5227),P=o(28904),D=o(55433),R=o(54490),F=o(21023),M=o.n(F);async function j(Y){try{return await window.showOpenFilePicker(Y)}catch(se){if(se.name==="AbortError")return[];throw se}}function I(Y){const{selectSource:se}=(0,S.n)(),Ee=(0,v.useMemo)(()=>Y.reduce((ae,Pe)=>Pe.supportedFileTypes?[...ae,...Pe.supportedFileTypes]:ae,[]),[Y]);return(0,v.useCallback)(async()=>{const[ae]=await j({types:[{description:Ee.join(", "),accept:{"application/octet-stream":Ee}}]});if(!ae)return;const Pe=await ae.getFile(),ye=Y.filter(x=>{if(!x.supportedFileTypes||x.type!=="file")return!1;const N=M().extname(Pe.name);return x.supportedFileTypes.includes(N)});if(ye.length>1)throw new Error(`Multiple source matched ${Pe.name}. This is not supported.`);const pe=ye[0];if(!pe)throw new Error(`Cannot find source to handle ${Pe.name}`);se(pe.id,{type:"file",handle:ae})},[Ee,se,Y])}function O(Y,se){return Y instanceof Function?Y(se):Y}function w(){const{setState:Y}=(0,A.qe)(R.C5),{availableSources:se}=(0,S.n)(),Ee=(0,b.z)(),ae=(0,E.b)(),Pe=(0,l.Z)(),{getCurrentLayoutState:ye,setCurrentLayout:pe}=(0,n._B)(),x=I(se),N=(0,v.useCallback)(Q=>{Y((0,u.Uy)(Q))},[Y]),W=(0,T.Z)(async()=>{const Q=await showOpenFilePicker({multiple:!1,excludeAcceptAllOption:!1,types:[{description:"JSON Files",accept:{"application/json":[".json"]}}]});if(!Pe())return;const U=await Q[0].getFile(),fe=await U.text();if(!Pe())return;let Me;try{Me=JSON.parse(fe)}catch(we){throw new Error(`${U.name} is not a valid layout: ${we.message}`)}if(typeof Me!="object"||!Me)throw new Error(`${U.name} is not a valid layout`);const je=Me;if(ae.importLayoutFile){await ae.importLayoutFile(U.name,je);return}pe({data:je}),Ee.logEvent(P.q.LAYOUT_IMPORT)},[Ee,ae,Pe,pe]),ue=(0,v.useCallback)(()=>{const Q=ye().selectedLayout?.data;if(!Q)return;const U=ye().selectedLayout?.name??"foxglove-layout",fe=JSON.stringify(Q,void 0,2)??"";(0,D.W)(fe,`${U}.json`),Ee.logEvent(P.q.LAYOUT_EXPORT)},[Ee,ye]);return(0,v.useMemo)(()=>({dialogActions:{dataSource:{close:()=>{N(Q=>{Q.dialogs.dataSource={activeDataSource:void 0,item:void 0,open:!1}})},open:(Q,U)=>{N(fe=>{fe.dialogs.dataSource.activeDataSource=U,fe.dialogs.dataSource.item=Q,fe.dialogs.dataSource.open=!0})}},openFile:{open:x},preferences:{close:()=>{N(Q=>{Q.dialogs.preferences={open:!1,initialTab:void 0}})},open:Q=>{N(U=>{U.dialogs.preferences={open:!0,initialTab:Q}})}}},featureTourActions:{startTour:Q=>{N(U=>{U.featureTours.active=Q})},finishTour:Q=>{N(U=>{U.featureTours.active=void 0,U.featureTours.shown=g.Z(U.featureTours.shown,[Q])})}},openPanelSettings:()=>{N(Q=>{Q.sidebars.left.item="panel-settings",Q.sidebars.left.open=!0})},playbackControlActions:{setRepeat:Q=>{N(U=>{const fe=O(Q,U.playbackControls.repeat);U.playbackControls.repeat=fe})}},sidebarActions:{left:{selectItem:Q=>{N(U=>{U.sidebars.left.item=Q,U.sidebars.left.open=Q!=null})},setOpen:Q=>{N(U=>{const fe=O(Q,U.sidebars.left.open);if(fe){const Me=R.gx.find(je=>je===U.sidebars.left.item);U.sidebars.left.open=fe,U.sidebars.left.item=Me??"panel-settings"}else U.sidebars.left.open=!1})},setSize:Q=>{N(U=>{U.sidebars.left.size=Q})}},right:{selectItem:Q=>{N(U=>{U.sidebars.right.item=Q,U.sidebars.right.open=Q!=null})},setOpen:Q=>{N(U=>{const fe=O(Q,U.sidebars.right.open),Me=R.q2.find(je=>je===U.sidebars.right.item);fe?(U.sidebars.right.open=fe,U.sidebars.right.item=Me??"variables"):U.sidebars.right.open=!1})},setSize:Q=>{N(U=>{U.sidebars.right.size=Q})}}},layoutActions:{importFromFile:W,exportToFile:ue}}),[ue,W,x,N])}},74602:(ce,C,o)=>{"use strict";o.d(C,{b:()=>u.b,v:()=>n});var u=o(27803),g=o(54764),v=o.n(g),l=o(2784),A=o(93455),b=o(59635),E=o(27999);function n(){const[S,T]=(0,u.b)(A.o.TIME_FORMAT),[P]=(0,u.b)(A.o.TIMEZONE),D=(0,l.useMemo)(()=>S==="SEC"?"SEC":"TOD",[S]),R=(0,l.useCallback)(j=>(0,b.p6)(j,P),[P]),F=(0,l.useCallback)(j=>D==="TOD"?(0,b.mr)(j,P):(0,E.Eo)(j),[D,P]),M=(0,l.useCallback)(j=>D==="TOD"?v().duration(j.sec*1e3).format("h:mm:ss",{trim:!1})+`.${j.nsec}`:(0,E.Eo)(j),[D]);return{formatDate:R,formatTime:F,formatDuration:M,setTimeFormat:T,timeFormat:D,timeZone:P}}},27803:(ce,C,o)=>{"use strict";o.d(C,{b:()=>v});var u=o(2784),g=o(82799);function v(l){const A=(0,g.H)(),[b,E]=(0,u.useState)(()=>{const S=A.get(l);if(!(typeof S=="string"&&S.length===0))return S});(0,u.useEffect)(()=>{const S=T=>{E(T)};return A.addChangeListener(l,S),()=>{A.removeChangeListener(l,S)}},[l,A]);const n=(0,u.useCallback)(async S=>{E(S),await A.set(l,S)},[A,l]);return[b,n]}},5227:(ce,C,o)=>{"use strict";var u="../../packages/studio-base/src/hooks/useCallbackWithToast.ts";o.d(C,{Z:()=>b});var g=o(74595),v=o(2784),l=o(23503);const A=l.ZP.getLogger(u);function b(E,n){const{enqueueSnackbar:S}=(0,g.Ds)();return(0,v.useCallback)(async(...T)=>{try{await E(...T);return}catch(P){A.error(P),S(P.toString(),{variant:"error"})}},[S,...n])}},36423:(ce,C,o)=>{"use strict";o.d(C,{X:()=>g,Z:()=>l});var u=o(98043);const g=Object.freeze({}),v=A=>A.selectedLayout?.data?.globalVariables??g;function l(){const{setGlobalVariables:A,overwriteGlobalVariables:b}=(0,u._B)(),E=(0,u.NS)(v);return{setGlobalVariables:A,overwriteGlobalVariables:b,globalVariables:E}}},77861:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>g});var u=o(2784);function g(v,l){const A=(0,u.useRef)(v),b=(0,u.useRef)(v),E=(0,u.useRef)(Date.now());return v!==A.current&&A.current!==b.current&&Date.now()-E.current<200&&l(),b.current=A.current,A.current=v,E.current=Date.now(),v}},17512:(ce,C,o)=>{"use strict";o.d(C,{gV:()=>Sg,oQ:()=>K.o,Gm:()=>o0,sl:()=>Rm,z8:()=>J0,s6:()=>G0,EU:()=>P0,Yc:()=>B0,w0:()=>k0,VO:()=>ey,Vu:()=>U0,initI18n:()=>Em,installDevtoolsFormatters:()=>Bg,overwriteFetch:()=>wg.Z,waitForFonts:()=>Rg});var u={};o.r(u),o.d(u,{addPanel:()=>Lg,appBar:()=>Og,appSettings:()=>Ng,dataSourceInfo:()=>Zg,desktopWindow:()=>Xg,general:()=>kg,incompatibleLayoutVersion:()=>Fg,log:()=>Ug,openDialog:()=>zg,panelConfigVersionGuard:()=>Wg,panelSettings:()=>Qg,panels:()=>Gg,plot:()=>Yg,settingsEditor:()=>Hg,stateTransitions:()=>Vg,threeDee:()=>Kg});var g={};o.r(g),o.d(g,{addPanel:()=>_g,appBar:()=>rm,appSettings:()=>$g,dataSourceInfo:()=>sm,general:()=>Jg,log:()=>tm,openDialog:()=>om,panelSettings:()=>em,panels:()=>qg,plot:()=>nm,settingsEditor:()=>am,threeDee:()=>im});var v={};o.r(v),o.d(v,{addPanel:()=>um,appBar:()=>Am,appSettings:()=>lm,dataSourceInfo:()=>gm,general:()=>cm,log:()=>fm,openDialog:()=>mm,panelSettings:()=>pm,panels:()=>dm,plot:()=>hm,settingsEditor:()=>ym,threeDee:()=>vm});var l=o(2784);const A=(0,l.createContext)(void 0);A.displayName="DialogHostIdContext";function b(){return useContext(A)}const E=null;var n=o(52322),S=o(12238),T=o(78683),P=o(47746),D=o(91897);function R(){const e=(0,P.Z)();return(0,n.jsx)(D.Z,{styles:{"html, body":{boxSizing:"border-box",margin:0,padding:0,height:"100%",width:"100%",lineHeight:1.15},"*, *:before, *:after":{boxSizing:"inherit"},body:{background:e.palette.background.default,color:e.palette.text.primary,font:"inherit",fontFamily:e.typography.body2.fontFamily,fontFeatureSettings:e.typography.body2.fontFeatureSettings,fontSize:e.typography.body2.fontSize,fontWeight:e.typography.body2.fontWeight,overscrollBehavior:"none"},"#root":{height:"100%",width:"100%",display:"flex",flexDirection:"column",position:"relative",flex:"1 1 100%",outline:"none",overflow:"hidden",zIndex:0}}})}var F=o(42893),M=o(12294),j=o(75845);const I=(0,l.createContext)(void 0);function O(e){const t=(0,j.qe)(I);return(0,M.oR)(t,e)}const w=[];function Y(){return(0,F.M)(e=>({eventFetchCount:0,events:{loading:!1,value:w},filter:"",selectedEventId:void 0,eventsSupported:!1,deviceId:void 0,refreshEvents:()=>{e(t=>({eventFetchCount:t.eventFetchCount+1}))},selectEvent:t=>{e({selectedEventId:t})},setEvents:t=>{e({events:t,selectedEventId:void 0})},setFilter:t=>{e({filter:t})},setEventsSupported:t=>{e({eventsSupported:t})},setDeviceId:t=>{e({deviceId:t})}}))}function se({children:e}){const[t]=(0,l.useState)(Y);return(0,n.jsx)(I.Provider,{value:t,children:e})}var Ee=o(76940),ae=o(23503);const Pe=(0,l.createContext)(void 0);function ye(){const e=(0,j.qe)(Pe);return(0,M.oR)(e)}var pe="../../packages/studio-base/src/providers/StudioLogsSettingsProvider/store.ts";const x=ae.ZP.getLogger(pe),N="warn";function W(e){const t=(0,ae.A_)(e?.globalLevel??N),s=e?.disabledChannels??[];x.debug(`Initializing log Config. ${s.length} disabled channels.`);const a=[],i=new Map,r=ae.ZP.channels().sort((d,p)=>d.name().localeCompare(p.name()));for(const d of r){const p=d.name()?d.name():"<root>";s.includes(p)?d.setLevel("warn"):d.setLevel(t),i.has(p)||a.push({name:p,enabled:d.isLevelOn(t)});const h=i.get(p)??[];h.push(d),i.set(p,h)}function c(d,p){const h=d().globalLevel;let f=!1;for(const m of a){const y=i.get(m.name);if(!y)continue;const B=y[0];B&&B.isLevelOn(h)!==m.enabled&&(m.enabled=!m.enabled,f=!0)}f&&p({channels:[...a]})}return(0,F.M)((d,p)=>({globalLevel:t,channels:a,setGlobalLevel(h){x.debug(`Set global level: ${h}`);for(const[,f]of i)for(const m of f)m.setLevel(h);d({globalLevel:h}),c(p,d)},enableChannel(h){x.debug(`Enable channel: ${h}`);const f=i.get(h)??[];for(const m of f)m.setLevel("debug");c(p,d)},disableChannel(h){x.debug(`Disable channel: ${h}`);const f=i.get(h)??[];for(const m of f)m.setLevel("warn");c(p,d)},enablePrefix(h){x.debug(`Enable prefix ${h}`);for(const[f,m]of i)if(f.startsWith(h))for(const y of m)y.setLevel("debug");c(p,d)},disablePrefix(h){x.debug(`Disable prefix ${h}`);for(const[f,m]of i)if(f.startsWith(h))for(const y of m)y.setLevel("warn");c(p,d)}}))}function ue(e){const[t,s]=(0,Ee.Z)("fox.studio-logs-settings",{}),[a,i]=(0,l.useState)(()=>W(t)),r=(0,l.useRef)(t);return(0,l.useEffect)(()=>{r.current=t}),(0,l.useEffect)(()=>{const c=a.getState().channels.length,d=setInterval(()=>{c!==ae.ZP.channels().length&&i(W(r.current))},1e3);return()=>{clearInterval(d)}},[a,t]),(0,l.useEffect)(()=>a.subscribe(c=>{const d=[];for(const p of c.channels)p.enabled||d.push(p.name);s({globalLevel:c.globalLevel,disabledChannels:d})}),[a,s]),(0,n.jsx)(Pe.Provider,{value:a,children:e.children})}var Q=o(49164),U=o(65741),fe=o(86495);function Me(){return(0,F.M)(e=>({eventsAtHoverValue:{},globalBounds:void 0,hoveredEvent:void 0,hoverValue:void 0,clearHoverValue:t=>{e(s=>({hoverValue:s.hoverValue?.componentId===t?void 0:s.hoverValue}))},setEventsAtHoverValue:t=>{e({eventsAtHoverValue:Q.Z(t,s=>s.event.id)})},setGlobalBounds:t=>{e(typeof t=="function"?s=>({globalBounds:t(s.globalBounds)}):{globalBounds:t})},setHoveredEvent:t=>{e(t?{hoveredEvent:t,hoverValue:{componentId:`event_${t.event.id}`,type:"PLAYBACK_SECONDS",value:t.secondsSinceStart}}:{hoveredEvent:void 0,hoverValue:void 0})},setHoverValue:t=>{e(s=>({hoverValue:U.Z(t,s.hoverValue)?s.hoverValue:t}))}}))}function je({children:e}){const[t]=(0,l.useState)(Me());return(0,n.jsx)(fe.Gu.Provider,{value:t,children:e})}var we=o(74595),Ze=o(21023),Ke=o.n(Ze),L=o(72970),K=o(93455),re=o(85108),J=o(3896),Ie=o(29022),be=o(87037),$=o(38677),H=o(20379),xe=o(77668),ee=o(68588),de=o(1547);const he=(0,L.ZL)()(e=>({tooltip:{marginTop:`${e.spacing(.5)} !important`},iconButton:{borderRadius:0,fontSize:24,padding:e.spacing(1.25),"svg:not(.MuiSvgIcon-root)":{fontSize:"1em"},"&:hover":{backgroundColor:(0,de.Z)(e.palette.common.white).setAlpha(.08).toRgbString()},"&.Mui-selected":{backgroundColor:e.palette.appBar.primary},"&.Mui-disabled":{color:"currentColor",opacity:e.palette.action.disabledOpacity}}})),ie=(0,l.forwardRef)((e,t)=>{const{title:s,className:a,children:i,color:r="inherit",...c}=e,{classes:d,cx:p}=he();return(0,n.jsx)(H.Z,{disableInteractive:!0,classes:{tooltip:d.tooltip},title:s,arrow:!1,enterDelay:200,children:(0,n.jsx)(be.Z,{color:r,ref:t,className:p(d.iconButton,a),...c,children:i})})});ie.displayName="AppBarIconButton";var ve=o(3925),Ce=o(56961),Se=o(80078);const Re=16,Ne=(0,L.ZL)()(()=>({root:{display:"flex",justifyContent:"flex-start",overflow:"hidden"},start:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flexShrink:1},end:{whiteSpace:"nowrap",flexBasis:"content",flexGrow:0,flexShrink:0,maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis"}}));function Oe({text:e,endTextLength:t,className:s,style:a}){const{classes:i,cx:r}=Ne();let c=Math.max(0,e.length-(t==null||t===0?Re:t));for(;c<e.length&&e.charAt(c).match(/\s/);)c+=2;const d=e.substring(0,c),p=e.substring(c),h=(0,l.useCallback)(f=>{f.preventDefault(),f.stopPropagation(),f.clipboardData.setData("text/plain",e)},[e]);return d?(0,n.jsxs)("div",{"data-testid":"text-middle-truncate",className:r(s,i.root),title:e,style:a,onCopy:h,children:[(0,n.jsx)("div",{className:i.start,children:d}),(0,n.jsx)("div",{className:i.end,children:p})]}):(0,n.jsx)("div",{className:r(i.end,s),style:a,children:p})}var Le=o(80204),ze=o(15116);const $e=(0,l.createContext)({currentUser:void 0});$e.displayName="CurrentUserContext";function Xe(){return(0,l.useContext)($e)}function ct(){const e=Xe();return e.currentUser==null?"unauthenticated":e.currentUser.org.isEnterprise?"authenticated-enterprise":e.currentUser.orgPaid===!0?"authenticated-team":"authenticated-free"}const st=null;var Ue=o(39471),Ye=o(54490),it=o(26775),Te=o(28904);const Je=(0,L.ZL)()((e,t,s)=>({menu:{pointerEvents:"none"},paper:{pointerEvents:"auto",marginTop:e.spacing(-1)},menuItem:{justifyContent:"space-between",cursor:"pointer",gap:e.spacing(2),"&.Mui-selected, &.Mui-selected:hover":{backgroundColor:e.palette.action.hover},[`:not(:hover, :focus) .${s.endIcon}`]:{opacity:.6},kbd:{font:"inherit",color:e.palette.text.disabled}},menuList:{minWidth:180,maxWidth:220},endIcon:{marginRight:e.spacing(-.75)}}));function ke(e){const{classes:t}=Je(),{children:s,items:a,open:i,onPointerEnter:r,id:c}=e,[d,p]=(0,l.useState)(void 0),h=()=>{c&&r(c)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(Se.Z,{id:c,ref:f=>{p(f??void 0)},selected:i,className:t.menuItem,onPointerEnter:h,"data-testid":c,children:[s,(0,n.jsx)(re.l7K,{className:t.endIcon})]}),(0,n.jsx)(ve.Z,{classes:{root:t.menu,paper:t.paper},open:i,disablePortal:!0,anchorEl:d,onClose:()=>{p(void 0)},onMouseLeave:()=>{p(void 0)},anchorOrigin:{vertical:"top",horizontal:"right"},MenuListProps:{dense:!0,className:t.menuList},autoFocus:!1,disableAutoFocus:!0,disableEnforceFocus:!0,hideBackdrop:!0,children:a.map((f,m)=>f.type!=="divider"?(0,n.jsxs)(Se.Z,{className:t.menuItem,onClick:f.onClick,disabled:f.disabled,children:[f.label,f.shortcut?(0,n.jsx)("kbd",{children:f.shortcut}):void 0]},f.key):(0,n.jsx)(Ce.Z,{variant:"middle"},`${m}-divider`))})]})}const yt=(0,L.ZL)()({menuList:{minWidth:180,maxWidth:220},truncate:{alignSelf:"center !important"}}),ft=e=>e;function St(e){const{open:t,handleClose:s,anchorEl:a,anchorReference:i,anchorPosition:r,disablePortal:c}=e,{classes:d}=yt(),{t:p}=(0,ee.$G)("appBar"),{appBarMenuItems:h}=(0,ze.b)(),[f,m]=(0,l.useState)(),y=ct(),B=(0,Le.z)(),{recentSources:k,selectRecent:z}=(0,Ue.n)(),{sidebars:{left:{open:G},right:{open:q}}}=(0,Ye.G4)(ft),{sidebarActions:V,dialogActions:me,layoutActions:le}=(0,it.W)(),oe=(0,l.useCallback)(()=>{m(void 0),s()},[s]),te=(0,l.useCallback)(lt=>{m(lt)},[]),Z=(0,l.useCallback)(lt=>{B.logEvent(Te.q.APP_MENU_CLICK,{user:y,cta:lt})},[B,y]),Ae=(0,l.useMemo)(()=>{const lt=[{type:"item",label:p("open"),key:"open",onClick:()=>{me.dataSource.open("start"),Z("open-data-source-dialog"),oe()}},{type:"item",label:p("openLocalFile"),key:"open-file",onClick:()=>{Z("open-file"),oe(),me.openFile.open().catch(console.error)}},{type:"item",label:p("openConnection"),key:"open-connection",onClick:()=>{me.dataSource.open("connection"),Z("open-connection"),oe()}},{type:"divider"},{type:"item",label:p("recentDataSources"),key:"recent-sources",disabled:!0}];return k.slice(0,5).map(mt=>{lt.push({type:"item",key:mt.id,onClick:()=>{Z("open-recent"),z(mt.id),oe()},label:(0,n.jsx)(Oe,{text:mt.title,className:d.truncate})})}),lt},[d.truncate,me.dataSource,me.openFile,Z,oe,k,z,p]),nt=(0,l.useMemo)(()=>[{type:"item",label:p(G?"hideLeftSidebar":"showLeftSidebar"),key:"left-sidebar",shortcut:"[",onClick:()=>{V.left.setOpen(!G),oe()}},{type:"item",label:p(q?"hideRightSidebar":"showRightSidebar"),key:"right-sidebar",shortcut:"]",onClick:()=>{V.right.setOpen(!q),oe()}},{type:"divider"},{type:"item",label:p("importLayoutFromFile"),key:"import-layout",onClick:()=>{le.importFromFile(),oe()}},{type:"item",label:p("exportLayoutToFile"),key:"export-layout",onClick:()=>{le.exportToFile(),oe()}}],[oe,le,G,q,V.left,V.right,p]),xt=(0,l.useCallback)(()=>{me.preferences.open("about"),Z("about"),oe()},[me.preferences,Z,oe]),Et=(0,l.useCallback)(()=>{Z("docs"),window.open("https://foxglove.dev/docs","_blank"),oe()},[Z,oe]),Pt=(0,l.useCallback)(()=>{Z("join-slack"),window.open("https://foxglove.dev/slack","_blank"),oe()},[Z,oe]),vt=(0,l.useCallback)(()=>{me.dataSource.open("demo"),Z("demo"),oe()},[me.dataSource,Z,oe]),Rt=(0,l.useMemo)(()=>[{type:"item",key:"about",label:p("about"),onClick:xt},{type:"divider"},{type:"item",key:"docs",label:p("viewOurDocs"),onClick:Et,external:!0},{type:"item",key:"join-slack",label:p("joinOurSlack"),onClick:Pt,external:!0},{type:"divider"},{type:"item",key:"demo",label:p("exploreSampleData"),onClick:vt}],[xt,vt,Et,Pt,p]);return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)(ve.Z,{anchorEl:a,anchorReference:i,anchorPosition:r,disablePortal:c,id:"app-menu",open:t,disableAutoFocusItem:!0,onClose:oe,MenuListProps:{"aria-labelledby":"app-menu-button",dense:!0,className:d.menuList},PaperProps:{"data-tourid":"app-menu"},children:[(h??[]).map((lt,mt)=>lt.type==="divider"?(0,n.jsx)(Ce.Z,{},`divider${mt}`):(0,n.jsx)(Se.Z,{onClick:lt.onClick,onPointerEnter:()=>{m(void 0)},children:lt.label},lt.key)),(0,n.jsx)(ke,{onPointerEnter:te,items:Ae,open:f==="app-menu-file",id:"app-menu-file",children:p("file")}),(0,n.jsx)(ke,{onPointerEnter:te,items:nt,open:f==="app-menu-view",id:"app-menu-view",children:p("view")}),(0,n.jsx)(ke,{onPointerEnter:te,items:Rt,open:f==="app-menu-help",id:"app-menu-help",children:p("help")})]})})}var ot=o(22499),et=o(92679),dt=o(38875),ut=o(63832),X=o(93812);const We=(0,L.ZL)()(e=>({closeButton:{":hover":{backgroundColor:e.palette.error.main}}}));function Tt({isMaximized:e=!1,onMinimizeWindow:t,onMaximizeWindow:s,onUnmaximizeWindow:a,onCloseWindow:i}){const{classes:r}=We();return(0,n.jsxs)(X.Z,{direction:"row",gap:1,paddingX:1,children:[(0,n.jsx)(be.Z,{size:"small",color:"inherit",onClick:t,"data-testid":"win-minimize",children:(0,n.jsx)(ut.Z,{fontSize:"inherit",color:"inherit"})}),(0,n.jsx)(be.Z,{size:"small",color:"inherit",onClick:e?a:s,"data-testid":"win-maximize",children:e?(0,n.jsx)(dt.Z,{fontSize:"inherit",color:"inherit"}):(0,n.jsx)(ot.Z,{fontSize:"inherit",color:"inherit"})}),(0,n.jsx)(be.Z,{className:r.closeButton,size:"small",color:"inherit",onClick:i,"data-testid":"win-close",children:(0,n.jsx)(et.Z,{fontSize:"inherit",color:"inherit"})})]})}var He=o(15328);function ht(e){return(0,n.jsxs)(He.Z,{viewBox:"0 0 400 400",...e,children:[(0,n.jsx)("title",{children:"Foxglove"}),(0,n.jsxs)("g",{fill:"currentColor",children:[(0,n.jsx)("ellipse",{cx:"143.854",cy:"297.143",rx:"38.839",ry:"38.8571"}),(0,n.jsx)("ellipse",{opacity:"0.5",cx:"255.89",cy:"297.143",rx:"38.839",ry:"38.8571"}),(0,n.jsx)("ellipse",{opacity:"0.5",cx:"311.161",cy:"200",rx:"38.839",ry:"38.8571"}),(0,n.jsx)("path",{d:"M143.899 64C153.005 64 161.384 67.1164 168.028 72.3414C176.674 79.3821 187.705 83.603 199.722 83.603C211.739 83.603 222.77 79.3821 231.416 72.3414C238.06 67.1164 246.438 64 255.545 64C277.126 64 294.621 81.5031 294.621 103.094C294.621 124.685 277.126 142.189 255.545 142.189C246.438 142.189 238.06 139.072 231.416 133.847C222.77 126.806 211.739 122.586 199.722 122.586C187.705 122.586 176.674 126.806 168.028 133.847C161.384 139.072 153.005 142.189 143.899 142.189C122.318 142.189 104.823 124.685 104.823 103.094C104.823 81.5031 122.318 64 143.899 64Z"}),(0,n.jsx)("path",{d:"M88.0761 161.177C97.1825 161.177 105.561 164.294 112.205 169.519C120.851 176.559 131.882 180.78 143.899 180.78C155.916 180.78 166.947 176.559 175.593 169.519C182.237 164.294 190.616 161.177 199.722 161.177C221.303 161.177 238.798 178.68 238.798 200.272C238.798 221.863 221.303 239.366 199.722 239.366C190.616 239.366 182.237 236.249 175.593 231.024C166.947 223.984 155.916 219.763 143.899 219.763C131.882 219.763 120.851 223.984 112.205 231.024C105.561 236.249 97.1825 239.366 88.0761 239.366C66.495 239.366 49 221.863 49 200.272C49 178.68 66.495 161.177 88.0761 161.177Z"})]})]})}var ge=o(68434);const Zt=(0,L.ZL)()(e=>({root:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",position:"relative",width:50,flex:"1 0 50px",fontSize:e.typography.caption.fontSize,overflow:"hidden"},label:{fontWeight:"bold"},text:{lineHeight:1.1}}));function tt(e){return e/1024/1024}function pt(){const e=(0,j.yV)({refreshIntervalMs:5e3}),{classes:t,cx:s}=Zt();if(!e)return(0,n.jsx)(n.Fragment,{});const a=e.usedJSHeapSize/e.jsHeapSizeLimit*100,i=tt(e.usedJSHeapSize).toLocaleString(),r=tt(e.jsHeapSizeLimit).toLocaleString();return(0,n.jsx)(H.Z,{arrow:!1,title:`Used (MB): ${i} / ${r}`,placement:"bottom",children:(0,n.jsxs)("div",{className:t.root,children:[(0,n.jsx)(ge.Z,{className:s(t.label,t.text),variant:"caption",children:"MEM"}),(0,n.jsxs)(ge.Z,{className:t.text,variant:"caption",children:[a.toFixed(2),"%"]})]})})}var bt=o(98043),at=o(74602),rt=o(77075),It=o(39347),Be=o(40301);function Ht(){const{addPanel:e}=(0,bt._B)();return(0,l.useCallback)(({type:t,config:s,relatedConfigs:a})=>{const i=(0,Be.nJ)(t);e({id:i,config:s,relatedConfigs:a})},[e])}const Vt=(0,L.ZL)()(e=>({menuList:{minWidth:270,paddingBottom:e.spacing(1)}}));function xn(e){const{classes:t}=Vt(),{anchorEl:s,anchorPosition:a,anchorReference:i,disablePortal:r,handleClose:c,open:d}=e,p=Ht();return(0,n.jsx)(ve.Z,{id:"add-panel-menu",anchorEl:s,anchorPosition:a,anchorReference:i,disablePortal:r,open:d,onClose:c,MenuListProps:{dense:!0,disablePadding:!0,"aria-labelledby":"add-panel-button",className:t.menuList},anchorOrigin:{horizontal:"left",vertical:"bottom"},transformOrigin:{vertical:"top",horizontal:"left"},PaperProps:{"data-tourid":"add-panel-menu"},children:(0,n.jsx)(It.B,{isMenu:!0,onDragStart:c,onPanelSelect:h=>{p(h),c()}})})}var Ft=o(6989),En=o(30280);const hs=(0,L.ZL)()(e=>({root:{gridArea:"appbar",boxShadow:"none",backgroundColor:e.palette.appBar.main,borderBottom:"none",color:e.palette.common.white,height:En.h,paddingRight:"calc(100% - env(titlebar-area-x) - env(titlebar-area-width))",WebkitAppRegion:"drag"}}));function Ln(e){const{children:t,leftInset:s,onDoubleClick:a}=e,{classes:i}=hs(),r=(0,l.useMemo)(()=>({paddingLeft:s}),[s]),c=(0,l.useCallback)(d=>{d.stopPropagation(),d.preventDefault(),a?.()},[a]);return(0,n.jsx)(Ft.Z,{className:i.root,style:r,position:"relative",color:"inherit",elevation:0,onDoubleClick:c,"data-tourid":"app-bar",children:t})}var fn=o(52498),on=o(3104),Qe=o(85026),Gt=o(38642),an=o(73868);const Cn=o.p+"fa1041107bbf6dc79fdc.png",_t=(0,L.ZL)()({image:{maxWidth:"24rem"}});function rn(e){const{playerProblems:t}=e,{classes:s}=_t(),[a,i]=(0,l.useState)(!0),[r,c]=(0,l.useState)(!1),d=()=>{i(!1),c(!0)},p=t?.find(h=>h.severity==="error"&&h.message==="Insecure WebSocket connection");return r||!p?(0,n.jsx)(n.Fragment,{}):(0,n.jsxs)(Gt.Z,{open:a,onClose:d,children:[(0,n.jsxs)(an.Z,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",paddingX:3,paddingTop:2,children:[(0,n.jsx)(ge.Z,{variant:"h3",paddingTop:1,children:"WebSocket SSL Error"}),(0,n.jsx)(be.Z,{onClick:()=>{i(!1)},edge:"end",children:(0,n.jsx)(et.Z,{})})]}),(0,n.jsxs)(an.Z,{paddingX:3,paddingY:2,rowGap:2,children:[(0,n.jsxs)(ge.Z,{variant:"body1",color:"text.secondary",children:["By default, Chrome prevents a secure ",(0,n.jsx)("code",{children:"https://"})," page from connecting to an insecure ",(0,n.jsx)("code",{children:"ws://"}),' WebSocket server. To allow the connection, enable "Unsafe Scripts" for this page.']}),(0,n.jsx)(ge.Z,{variant:"body1",color:"text.secondary",children:'Click the shield icon at the end of your address bar, and then click "Load Unsafe Scripts."'}),(0,n.jsx)("img",{src:Cn,alt:"WSS screenshot",className:s.image})]})]})}var De=o(24304),Fe=o(59635),Ve=o(27999);const Lt=e=>e.playerState.activeData?.endTime;function jt(){const e=(0,Qe.An)(Lt),[t]=(0,at.b)(K.o.TIMEZONE),{timeFormat:s}=(0,at.v)(),a=(0,l.useRef)(null);return(0,l.useEffect)(()=>{if(!a.current)return;if(e==null){a.current.innerText="";return}const i=(0,Fe.WU)(e,t),r=(0,Ve.Eo)(e);a.current.innerText=s==="SEC"||!(0,Ve.D3)(e)?r:i},[e,s,t]),(0,n.jsx)("div",{style:{fontFeatureSettings:`${rt.R.SANS_SERIF_FEATURE_SETTINGS}, "zero"`},ref:a})}const en=18,so=(0,L.ZL)()((e,t,s)=>({sourceName:{font:"inherit",fontSize:e.typography.body2.fontSize,display:"flex",alignItems:"center",gap:e.spacing(.5),padding:e.spacing(1.5),paddingInlineEnd:e.spacing(.75),whiteSpace:"nowrap",minWidth:0},adornment:{display:"flex",flex:"none",alignItems:"center",justifyContent:"center",position:"relative",color:e.palette.appBar.primary,width:en,height:en},adornmentError:{color:e.palette.error.main},spinner:{position:"absolute",top:0,right:0,left:0,bottom:0,margin:"auto"},textTruncate:{maxWidth:"30vw",overflow:"hidden"},iconButton:{padding:0,position:"relative",zIndex:1,fontSize:en-2,"svg:not(.MuiSvgIcon-root)":{fontSize:"1rem"}}})),Ms=e=>e.playerState.name,Ds=e=>e.playerState.presence,oo=e=>e.playerState.problems,ao=e=>e.seekPlayback;function Bs(){const{t:e}=(0,ee.$G)("appBar"),{classes:t,cx:s}=so(),a=(0,Qe.An)(Ms),i=(0,Qe.An)(Ds),r=(0,Qe.An)(oo)??[],c=(0,Qe.An)(ao),{sidebarActions:d}=(0,it.W)(),p=c==null,h=i===De.m.RECONNECTING,f=i===De.m.INITIALIZING,m=i===De.m.ERROR||r.some(k=>k.severity==="error"),y=h||f,B=f&&a==null?"Initializing...":a;return i===De.m.NOT_PRESENT?(0,n.jsx)("div",{className:t.sourceName,children:e("noDataSource")}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(rn,{playerProblems:r}),(0,n.jsxs)(X.Z,{direction:"row",alignItems:"center",children:[(0,n.jsxs)("div",{className:t.sourceName,children:[(0,n.jsx)("div",{className:t.textTruncate,children:(0,n.jsx)(Oe,{text:B??`<${e("unknown")}>`})}),p&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("span",{children:"/"}),(0,n.jsx)(jt,{})]})]}),(0,n.jsxs)("div",{className:s(t.adornment,{[t.adornmentError]:m}),children:[y&&(0,n.jsx)(on.Z,{size:en,color:"inherit",className:t.spinner,variant:"indeterminate"}),m&&(0,n.jsx)(be.Z,{color:"inherit",className:t.iconButton,onClick:()=>{d.left.setOpen(!0),d.left.selectItem("problems")},children:(0,n.jsx)(fn.VaY,{})})]})]})]})}var Vn=o(35936),Kn=o(48907),Sn=o(60189),io=o(78107);function ro(e){const t=e.onComplete,s=(0,l.useRef)(!1),a=(0,l.useCallback)(r=>{s.current||(s.current=!0,t(r))},[t]);(0,io.Z)("Enter",()=>{a("ok")}),(0,l.useEffect)(()=>()=>{a("cancel")},[a]);const i=[e.cancel!==!1&&(0,n.jsx)($.Z,{size:"large",variant:"outlined",color:"inherit",onClick:()=>{a("cancel")},children:e.cancel??"Cancel"},"cancel"),(0,n.jsx)($.Z,{variant:"contained",size:"large",color:e.variant==="danger"?"error":"primary",type:"submit",children:e.ok??"OK"},"confirm")];return e.variant==="danger"&&i.reverse(),(0,n.jsx)(Gt.Z,{open:!0,onClose:()=>{a("cancel")},maxWidth:"xs",fullWidth:!0,children:(0,n.jsxs)("form",{onSubmit:r=>{r.preventDefault(),a("ok")},children:[(0,n.jsx)(Vn.Z,{children:e.title}),(0,n.jsx)(Kn.Z,{children:e.prompt}),(0,n.jsx)(Sn.Z,{children:i})]})})}function lo(){const[e,t]=(0,l.useState)();return[(0,l.useCallback)(async a=>await new Promise(i=>{t((0,n.jsx)(ro,{...a,onComplete:r=>{i(r),t(void 0)}}))}),[]),e]}var co="../../packages/studio-base/src/components/AppBar/UserMenu.tsx",uo=o(63136).Z;const qe=ae.ZP.getLogger(co),Bt=(0,L.ZL)()({menuList:{minWidth:200}});function Tn({anchorEl:e,anchorReference:t,anchorPosition:s,disablePortal:a,handleClose:i,open:r}){const{classes:c}=Bt(),{currentUser:d,signIn:p,signOut:h}=Xe(),f=ct(),m=(0,Le.z)(),{enqueueSnackbar:y}=(0,we.Ds)(),[B,k]=lo(),{dialogActions:z}=(0,it.W)(),G=(0,l.useCallback)(async()=>{try{await h?.()}catch(Z){qe.error(Z),y(Z.toString(),{variant:"error"})}},[y,h]),q=(0,l.useCallback)(()=>{B({title:"Are you sure you want to sign out?",ok:"Sign out"}).then(Z=>{Z==="ok"&&G()})},[G,B]),V=(0,l.useCallback)(()=>{m.logEvent(Te.q.APP_BAR_CLICK_CTA,{user:f,cta:"sign-in"}),p?.()},[m,f,p]),me=(0,l.useCallback)(Z=>{m.logEvent(Te.q.APP_BAR_CLICK_CTA,{user:f,cta:"app-settings-dialog"}),z.preferences.open(Z)},[m,f,z.preferences]),le=(0,l.useCallback)(()=>{m.logEvent(Te.q.APP_BAR_CLICK_CTA,{user:f,cta:"profile"}),window.open(uo.env.FOXGLOVE_ACCOUNT_PROFILE_URL,"_blank")},[m,f]),oe=(0,l.useCallback)(()=>{m.logEvent(Te.q.APP_BAR_CLICK_CTA,{user:f,cta:"docs"}),window.open("https://foxglove.dev/docs","_blank")},[m,f]),te=(0,l.useCallback)(()=>{m.logEvent(Te.q.APP_BAR_CLICK_CTA,{user:f,cta:"join-slack"}),window.open("https://foxglove.dev/slack","_blank")},[m,f]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(ve.Z,{anchorEl:e,anchorReference:t,anchorPosition:s,disablePortal:a,id:"user-menu",open:r,onClose:i,onClick:i,MenuListProps:{className:c.menuList,dense:!0},PaperProps:{"data-tourid":"user-menu"},children:[d&&(0,n.jsx)(Se.Z,{disabled:!0,children:d.email}),(0,n.jsx)(Se.Z,{onClick:()=>{me()},children:"Settings"}),(0,n.jsx)(Se.Z,{onClick:()=>{me("extensions")},children:"Extensions"}),d&&(0,n.jsx)(Se.Z,{onClick:le,children:"User profile"}),(0,n.jsx)(Ce.Z,{variant:"middle"}),(0,n.jsx)(Se.Z,{onClick:oe,children:"Documentation"}),(0,n.jsx)(Se.Z,{onClick:te,children:"Join Slack community"}),p!=null&&(0,n.jsx)(Ce.Z,{variant:"middle"}),d?(0,n.jsx)(Se.Z,{onClick:q,children:"Sign out"}):p!=null?(0,n.jsx)(Se.Z,{onClick:V,children:"Sign in"}):void 0]}),k]})}const hn=(0,L.ZL)()((e,{debugDragRegion:t=!1},s)=>{const a={WebkitAppRegion:"no-drag"};return t&&(a.backgroundColor="red"),{toolbar:{display:"grid",width:"100%",gridTemplateAreas:'"start middle end"',gridTemplateColumns:"1fr auto 1fr",alignItems:"center"},logo:{padding:e.spacing(.75,.5),fontSize:"2rem",color:e.palette.appBar.primary,borderRadius:0,"svg:not(.MuiSvgIcon-root)":{fontSize:"1em"},"&:hover":{backgroundColor:(0,de.Z)(e.palette.common.white).setAlpha(.08).toRgbString()},"&.Mui-selected":{backgroundColor:e.palette.appBar.primary,color:e.palette.common.white},"&.Mui-disabled":{color:"currentColor",opacity:e.palette.action.disabledOpacity}},dropDownIcon:{fontSize:"12px !important"},start:{gridArea:"start",display:"flex",flex:1,alignItems:"center"},startInner:{display:"flex",alignItems:"center",...a},middle:{gridArea:"middle",justifySelf:"center",overflow:"hidden",maxWidth:"100%",...a},end:{gridArea:"end",flex:1,display:"flex",justifyContent:"flex-end"},endInner:{display:"flex",alignItems:"center",...a},keyEquivalent:{fontFamily:rt.R.MONOSPACE,background:(0,de.Z)(e.palette.common.white).darken(45).toString(),padding:e.spacing(0,.5),aspectRatio:1,borderRadius:e.shape.borderRadius,marginLeft:e.spacing(1)},tooltip:{marginTop:`${e.spacing(.5)} !important`},avatar:{color:e.palette.common.white,backgroundColor:(0,de.Z)(e.palette.appBar.main).lighten().toString(),height:e.spacing(3.5),width:e.spacing(3.5)},iconButton:{padding:e.spacing(1),borderRadius:0,"&:hover":{backgroundColor:(0,de.Z)(e.palette.common.white).setAlpha(.08).toString(),[`.${s.avatar}`]:{backgroundColor:(0,de.Z)(e.palette.appBar.main).lighten(20).toString()}},"&.Mui-selected":{backgroundColor:e.palette.appBar.primary,[`.${s.avatar}`]:{backgroundColor:(0,de.Z)(e.palette.appBar.main).setAlpha(.3).toString()}}},button:{marginInline:e.spacing(1),backgroundColor:e.palette.appBar.primary,"&:hover":{backgroundColor:e.palette.augmentColor({color:{main:e.palette.appBar.primary}}).dark}}}}),ln=e=>e.selectedLayout!=null,On=e=>e;function Pn(e){const{debugDragRegion:t,disableSignIn:s=!1,isMaximized:a,leftInset:i,onCloseWindow:r,onDoubleClick:c,onMaximizeWindow:d,onMinimizeWindow:p,onUnmaximizeWindow:h,showCustomWindowControls:f=!1}=e,{classes:m,cx:y,theme:B}=hn({debugDragRegion:t}),{currentUser:k,signIn:z}=Xe(),{t:G}=(0,ee.$G)("appBar"),{appBarLayoutButton:q}=(0,ze.b)(),V=(0,Le.z)(),[me=!1]=(0,at.b)(K.o.ENABLE_MEMORY_USE_INDICATOR),le=(0,bt.NS)(ln),{sidebars:{left:{open:oe},right:{open:te}}}=(0,Ye.G4)(On),{sidebarActions:Z}=(0,it.W)(),[Ae,nt]=(0,l.useState)(void 0),[xt,Et]=(0,l.useState)(void 0),[Pt,vt]=(0,l.useState)(void 0),Rt=Boolean(Ae),lt=Boolean(xt),mt=Boolean(Pt);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Ln,{onDoubleClick:c,leftInset:i,children:(0,n.jsxs)("div",{className:m.toolbar,children:[(0,n.jsx)("div",{className:m.start,children:(0,n.jsxs)("div",{className:m.startInner,children:[(0,n.jsxs)(be.Z,{className:y(m.logo,{"Mui-selected":Rt}),color:"inherit",id:"app-menu-button",title:"Menu","aria-controls":Rt?"app-menu":void 0,"aria-haspopup":"true","aria-expanded":Rt?"true":void 0,"data-tourid":"app-menu-button",onClick:Dt=>{nt(Dt.currentTarget)},children:[(0,n.jsx)(ht,{fontSize:"inherit",color:"inherit"}),(0,n.jsx)(re.Xqf,{className:m.dropDownIcon,primaryFill:B.palette.common.white})]}),(0,n.jsx)(St,{open:Rt,anchorEl:Ae,handleClose:()=>{nt(void 0)}}),(0,n.jsx)(ie,{className:y({"Mui-selected":mt}),color:"inherit",disabled:!le,id:"add-panel-button","data-tourid":"add-panel-button",title:"Add panel","aria-label":"Add panel button","aria-controls":mt?"add-panel-menu":void 0,"aria-haspopup":"true","aria-expanded":mt?"true":void 0,onClick:Dt=>{vt(Dt.currentTarget)},children:(0,n.jsx)(J.xcP,{})})]})}),(0,n.jsx)("div",{className:m.middle,children:(0,n.jsx)(Bs,{})}),(0,n.jsx)("div",{className:m.end,children:(0,n.jsxs)("div",{className:m.endInner,children:[me&&(0,n.jsx)(pt,{}),q,(0,n.jsxs)(X.Z,{direction:"row",alignItems:"center","data-tourid":"sidebar-button-group",children:[(0,n.jsx)(ie,{title:(0,n.jsxs)(n.Fragment,{children:[oe?"Hide":"Show"," left sidebar"," ",(0,n.jsx)("kbd",{className:m.keyEquivalent,children:"["})]}),"aria-label":`${oe?"Hide":"Show"} left sidebar`,onClick:()=>{Z.left.setOpen(!oe)},"data-tourid":"left-sidebar-button",children:oe?(0,n.jsx)(Ie.JaP,{}):(0,n.jsx)(Ie.iek,{})}),(0,n.jsx)(ie,{title:(0,n.jsxs)(n.Fragment,{children:[te?"Hide":"Show"," right sidebar"," ",(0,n.jsx)("kbd",{className:m.keyEquivalent,children:"]"})]}),"aria-label":`${te?"Hide":"Show"} right sidebar`,onClick:()=>{Z.right.setOpen(!te)},"data-tourid":"right-sidebar-button",children:te?(0,n.jsx)(Ie.heV,{}):(0,n.jsx)(Ie.K1j,{})})]}),!s&&!k&&z!=null&&(0,n.jsx)($.Z,{variant:"contained",color:"primary",className:m.button,size:"small",onClick:()=>{z(),V.logEvent(Te.q.APP_BAR_CLICK_CTA,{user:"unauthenticated",cta:"sign-in"})},children:G("signIn")}),(0,n.jsx)(H.Z,{classes:{tooltip:m.tooltip},title:k?.email??"Profile",arrow:!1,children:(0,n.jsx)(be.Z,{className:y(m.iconButton,{"Mui-selected":lt}),"aria-label":"User profile menu button",color:"inherit",id:"user-button","data-tourid":"user-button","aria-controls":lt?"user-menu":void 0,"aria-haspopup":"true","aria-expanded":lt?"true":void 0,onClick:Dt=>{Et(Dt.currentTarget)},"data-testid":"user-button",children:(0,n.jsx)(xe.Z,{src:k?.avatarImageUrl??void 0,className:m.avatar,variant:"rounded"})})}),f&&(0,n.jsx)(Tt,{onMinimizeWindow:p,isMaximized:a,onUnmaximizeWindow:h,onMaximizeWindow:d,onCloseWindow:r})]})})]})}),(0,n.jsx)(xn,{anchorEl:Pt,open:mt,handleClose:()=>{vt(void 0)}}),(0,n.jsx)(Tn,{anchorEl:xt,open:lt,handleClose:()=>{Et(void 0)}})]})}var gs=o(87438),Qt=o(96995);const In=(0,L.ZL)()({container:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"}});function ws({effect:e}){const{classes:t}=In(),s=(0,l.useRef)(null);return(0,l.useLayoutEffect)(()=>{let a;const i=s.current;if(!i)return;const r=new Qt.xsS,c=new Qt.iKG,d=e==="snow"?75:100,p=new Float32Array(d*3),h=new Float32Array(d*3),f=new Float32Array(d),m=new Float32Array(d),y=new Qt.Pa4,B=new Qt.Ilk;for(let te=0;te<d;te++)y.x=Math.random(),y.y=Math.random(),y.z=-1,y.toArray(p,te*3),e==="snow"?B.setRGB(1,1,1):B.setHSL(Math.random(),1,.5),B.toArray(h,te*3),f[te]=Math.random(),m[te]=Math.random()*Math.PI;const k=new Qt.u9r;k.setAttribute("position",new Qt.TlE(p,3)),k.setAttribute("color",new Qt.TlE(h,3)),k.setAttribute("size",new Qt.TlE(f,1)),k.setAttribute("phase",new Qt.TlE(m,1));const z=new Qt.jyz({uniforms:{time:{value:1},yspeed:{value:e==="snow"?.1:.2},wind:{value:e==="snow"?.02:0}},vertexShader:`
      uniform float time;
      uniform float yspeed;
      uniform float wind;
      attribute vec3 color;
      attribute float size;
      attribute float phase;
      const float xspeed = 10.0;
      const float amplitude = 0.03;
      const float minsize = 5.0;
      const float maxsize = 12.0;
      varying vec4 vcolor;
      void main() {
        vcolor = vec4(color, 1.0);
        float x = mix(-1.0, 1.0, mod(
          position.x + sin(phase + time * xspeed * yspeed) * amplitude + time * xspeed * yspeed * wind,
          1.0));
				float y = mix(-1.0, 1.0, mod(position.y - time * yspeed * mix(0.2, 1.0, size), 1.0));
				gl_PointSize = mix(minsize, maxsize, size);
        gl_Position = projectionMatrix * modelViewMatrix * vec4(x, y, position.z, 1.0);
			}
      `,fragmentShader:`
      varying vec4 vcolor;
			void main() {
        if (length(gl_PointCoord * 2.0 - 1.0) > 1.0) {
          discard;
        }
				gl_FragColor = vcolor;
			}
      `}),G=new Qt.woe(k,z);r.add(G);const q=new Qt.CP7({alpha:!0});q.setPixelRatio(window.devicePixelRatio),q.setSize(i.clientWidth,i.clientHeight),i.appendChild(q.domElement);const V=new Date;function me(){const te=(new Date().getTime()-V.getTime())/1e3;z.uniforms.time={value:te},q.render(r,c)}let le=!0;function oe(){le&&(a=requestAnimationFrame(oe),me())}return oe(),()=>{le=!1,k.dispose(),z.dispose(),q.dispose(),i.removeChild(q.domElement),cancelAnimationFrame(a)}},[e]),(0,n.jsx)("div",{className:t.container,ref:s})}var Rs=o(86432),gn=o(96437),tn=o(41574),Nn=o(88687),cn=o(63249),ms=o(2043),zi=o(75988),po=o(71092),Zn=o(24957),pa=o(78404),fo=o(72994);function Wi(e){return(0,n.jsx)(He.Z,{...e,children:(0,n.jsxs)("g",{fill:"currentColor",children:[(0,n.jsx)("rect",{x:"8.07",y:"5.38",width:"7.87",height:"7.87",rx:"2"}),(0,n.jsx)("path",{d:"M12,1.53A10.5,10.5,0,1,0,22.5,12,10.51,10.51,0,0,0,12,1.53ZM18.41,19l-1.67-2.61a2.47,2.47,0,0,0-2-1H9.26a2.48,2.48,0,0,0-2,1L5.59,19a9.5,9.5,0,1,1,12.82,0Z"})]})})}function Gi(e){return(0,n.jsx)(He.Z,{...e,children:(0,n.jsxs)("g",{fill:"currentColor",children:[(0,n.jsx)("path",{d:"M22.5,12A10.5,10.5,0,1,0,5.08,19.87l0,0,.35.28a10,10,0,0,0,1.55,1l.24.12.6.29.4.16.48.17.45.14.48.13c.15,0,.3.07.46.09a5,5,0,0,0,.56.09l.39.05c.32,0,.65.05,1,.05s.66,0,1-.05l.39-.05a5,5,0,0,0,.56-.09,3.41,3.41,0,0,0,.46-.1,3.59,3.59,0,0,0,.47-.12l.47-.14.46-.17.42-.17.55-.26.29-.15a9.84,9.84,0,0,0,1.54-1l.35-.28,0,0A10.44,10.44,0,0,0,22.5,12Zm-5.12,7.82-.15.11-.58.34-.2.12-.61.29a1,1,0,0,1-.18.08,6.77,6.77,0,0,1-.75.28l-.35.1-.48.12-.37.08-.53.08-.31,0c-.29,0-.58,0-.87,0s-.58,0-.87,0l-.31,0-.53-.08-.37-.08-.48-.12L9.09,21a6.77,6.77,0,0,1-.75-.28,1,1,0,0,1-.18-.08l-.61-.29-.2-.12c-.2-.11-.39-.22-.58-.35l-.15-.1-.22-.17L8.06,17a1.51,1.51,0,0,1,1.22-.62h5.44a1.51,1.51,0,0,1,1.21.6l1.67,2.65A1.84,1.84,0,0,1,17.38,19.82Zm-.63-3.38a2.49,2.49,0,0,0-2-1H9.28a2.5,2.5,0,0,0-2,1.07L5.62,19a9.5,9.5,0,1,1,12.76,0Z"}),(0,n.jsx)("path",{d:"M14,5.36h-3.9a2,2,0,0,0-2,2v3.9a2,2,0,0,0,2,2H14a2,2,0,0,0,2-2V7.36A2,2,0,0,0,14,5.36Zm1,5.9a1,1,0,0,1-1,1h-3.9a1,1,0,0,1-1-1V7.36a1,1,0,0,1,1-1H14a1,1,0,0,1,1,1Z"})]})})}var fa;function ho(){return ho=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},ho.apply(this,arguments)}var Qi=function(t){return l.createElement("svg",ho({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},t),fa||(fa=l.createElement("g",{fill:"currentColor"},l.createElement("path",{d:"m22.6 19.07-1.07-.83c.02-.16.04-.32.04-.49s-.01-.33-.04-.49l1.06-.83a.26.26 0 0 0 .06-.32l-1-1.73c-.06-.11-.19-.15-.31-.11l-1.24.5c-.26-.2-.54-.37-.85-.49l-.19-1.32c-.01-.12-.12-.21-.24-.21h-2c-.12 0-.23.09-.25.21l-.19 1.32c-.3.13-.59.29-.85.49l-1.24-.5c-.11-.04-.24 0-.31.11l-1 1.73c-.06.11-.04.24.06.32l1.06.83a3.908 3.908 0 0 0 0 .98l-1.06.83a.26.26 0 0 0-.06.32l1 1.73c.06.11.19.15.31.11l1.24-.5c.26.2.54.37.85.49l.19 1.32c.02.12.12.21.25.21h2c.12 0 .23-.09.25-.21l.19-1.32c.3-.13.59-.29.84-.49l1.25.5c.11.04.24 0 .31-.11l1-1.73a.26.26 0 0 0-.06-.32Zm-4.78.18c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5Z"}),l.createElement("path",{d:"M4 6v12c0 .69.32 1.29.77 1.78.45.48 1.08.88 1.79 1.2 1.43.64 3.35 1.02 5.43 1.02.51 0 .53-.02 1.01-.07-.42-.52-.46-.84-.88-1.43-1.87-.01-3.78-.36-4.95-.89-.6-.27-1.04-.57-1.32-.86-.28-.29-.37-.54-.37-.75V8.39c.32.22.68.42 1.07.59C7.98 9.62 9.9 10 11.98 10s4-.38 5.43-1.02c.39-.17.75-.37 1.07-.59v3.43h.75c.49 0 .75.56.75.56V6.01c0-.69-.32-1.29-.77-1.78-.45-.48-1.08-.88-1.79-1.2-1.43-.64-3.35-1.02-5.43-1.02s-4 .38-5.43 1.02c-.71.32-1.34.72-1.79 1.2C4.31 4.72 4 5.32 4 6.01Zm1.5 0c0-.21.09-.46.36-.75.28-.3.72-.6 1.32-.86 1.2-.54 2.9-.89 4.82-.89s3.62.35 4.82.89c.6.27 1.04.57 1.32.86.27.29.36.54.36.75s-.09.46-.36.75c-.28.3-.72.6-1.32.86-1.19.54-2.9.89-4.82.89s-3.62-.35-4.82-.89c-.6-.27-1.04-.57-1.32-.86-.27-.29-.36-.54-.36-.75Z"}))))};const Yi=Qi;var ha;function go(){return go=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},go.apply(this,arguments)}var Hi=function(t){return l.createElement("svg",go({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},t),ha||(ha=l.createElement("path",{fill:"currentColor",d:"M19.25 4H4.75C3.23 4 2 5.23 2 6.75v10.5C2 18.77 3.23 20 4.75 20h14.5c1.52 0 2.75-1.23 2.75-2.75V6.75C22 5.23 20.77 4 19.25 4Zm1.25 2.75v4.5h-3.27V5.5h2.02c.69 0 1.25.56 1.25 1.25Zm-8.06 6h3.29v5.75h-3.29v-5.75Zm0-1.5V5.5h3.29v5.75h-3.29Zm-8.94 6V6.75c0-.69.56-1.25 1.25-1.25h6.19v13H4.75c-.69 0-1.25-.56-1.25-1.25Zm15.75 1.25h-2.02v-5.75h3.27v4.5c0 .69-.56 1.25-1.25 1.25Z"})))};const Vi=Hi;var ga;function mo(){return mo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var s=arguments[t];for(var a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a])}return e},mo.apply(this,arguments)}var Ki=function(t){return l.createElement("svg",mo({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},t),ga||(ga=l.createElement("g",{fill:"currentColor"},l.createElement("path",{d:"M4.75 18.5c-.69 0-1.25-.56-1.25-1.25V6.75c0-.69.56-1.25 1.25-1.25h14.5c.69 0 1.25.56 1.25 1.25v4.98c.55.29 1.05.65 1.5 1.08V6.75C22 5.23 20.77 4 19.25 4H4.75C3.23 4 2 5.23 2 6.75v10.5C2 18.77 3.23 20 4.75 20h6.75c-.2-.47-.34-.98-.42-1.5H4.75Z"}),l.createElement("path",{d:"m22.28 18.82-1.07-.83c.02-.16.04-.32.04-.49s-.01-.33-.04-.49l1.06-.83a.26.26 0 0 0 .06-.32l-1-1.73c-.06-.11-.19-.15-.31-.11l-1.24.5c-.26-.2-.54-.37-.85-.49l-.19-1.32c-.01-.12-.12-.21-.24-.21h-2c-.12 0-.23.09-.25.21l-.19 1.32c-.3.13-.59.29-.85.49l-1.24-.5c-.11-.04-.24 0-.31.11l-1 1.73c-.06.11-.04.24.06.32l1.06.83a3.908 3.908 0 0 0 0 .98l-1.06.83a.26.26 0 0 0-.06.32l1 1.73c.06.11.19.15.31.11l1.24-.5c.26.2.54.37.85.49l.19 1.32c.02.12.12.21.25.21h2c.12 0 .23-.09.25-.21l.19-1.32c.3-.13.59-.29.84-.49l1.25.5c.11.04.24 0 .31-.11l1-1.73a.26.26 0 0 0-.06-.32ZM17.5 19c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5Z"}))))};const Xi=Ki,$i={Add:(0,n.jsx)(ms.F1F,{}),AddIn:(0,n.jsx)(ms.OPr,{}),BacklogList:(0,n.jsx)(zi.HHE,{}),Blockhead:(0,n.jsx)(Gi,{}),BlockheadFilled:(0,n.jsx)(Wi,{}),BookStar:(0,n.jsx)(po.M02,{}),Cancel:(0,n.jsx)(Zn.a3k,{}),DatabaseSettings:(0,n.jsx)(Yi,{}),Delete:(0,n.jsx)(Zn.tlh,{}),Edit:(0,n.jsx)(fn.Np1,{}),ErrorBadge:(0,n.jsx)(Zn.w2A,{}),FileASPX:(0,n.jsx)(Zn.nkr,{}),FiveTileGrid:(0,n.jsx)(Vi,{}),Flow:(0,n.jsx)(pa.AIp,{}),GenericScan:(0,n.jsx)(po.Y$Z,{}),OpenFile:(0,n.jsx)(Zn.rQu,{}),PanelSettings:(0,n.jsx)(Xi,{}),RectangularClipping:(0,n.jsx)(J.xcP,{}),Settings:(0,n.jsx)(fo.zTZ,{}),Sparkle:(0,n.jsx)(J.iu5,{}),Variable2:(0,n.jsx)(po.Xni,{}),ROS:(0,n.jsx)(pa.Jw2,{})};function Ji(e){return e.name==null?(0,n.jsx)(n.Fragment,{}):$i[e.name]}var Ot=o(68234),qi=o(89745);function _i(e){const[t,s]=(0,l.useState)(),a=e.field,i=r=>{s(void 0);const c=a.validate?.(r.target.value);if(c instanceof Error){s(c.message),e.onError(c.message);return}e.onChange(r.target.value)};return(0,n.jsxs)("div",{children:[(0,n.jsx)(Ot.Z,{fullWidth:!0,disabled:e.disabled,label:a.label,error:t!=null,helperText:t,FormHelperTextProps:{variant:"standard"},placeholder:a.placeholder,defaultValue:a.defaultValue,onChange:i,variant:"outlined",InputProps:{notched:!1},InputLabelProps:{shrink:!0}},a.label),(0,n.jsx)(qi.Z,{children:a.description})]})}var yo=o(49001);const er=(0,L.ZL)()(e=>({content:{display:"flex",flexDirection:"column",flexGrow:1,height:"100%",justifyContent:"space-between",gap:e.spacing(2),overflowY:"auto"}}));function tr(e){const{onOpen:t}=e,{classes:s}=er(),{dialogActions:a}=(0,it.W)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:s.content,children:e.children}),(0,n.jsxs)(X.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",paddingX:4,paddingBottom:4,paddingTop:2,children:[(0,n.jsx)($.Z,{startIcon:(0,n.jsx)(yo.Z,{fontSize:"large"}),onClick:()=>{a.dataSource.open("start")},size:"large",children:"Back"}),(0,n.jsxs)(X.Z,{direction:"row",gap:2,children:[(0,n.jsx)($.Z,{size:"large",color:"inherit",variant:"outlined",onClick:()=>{a.dataSource.close()},children:"Cancel"}),(0,n.jsx)($.Z,{size:"large",variant:"contained",onClick:t,disabled:t==null,children:"Open"})]})]})]})}const nr=(0,L.ZL)()(e=>({grid:{padding:e.spacing(4,4,0),columnGap:e.spacing(4),rowGap:e.spacing(2),[e.breakpoints.up("md")]:{overflow:"hidden",display:"grid",padding:e.spacing(4,4,0,4),gridTemplateAreas:`
        "header header"
        "sidebar form"
      `,gridTemplateColumns:"240px 1fr",gridTemplateRows:"auto auto"}},header:{gridArea:"header"},form:{gridArea:"form",overflowY:"auto"},formInner:{[e.breakpoints.up("md")]:{height:e.spacing(43)}},sidebar:{gridArea:"sidebar",overflowY:"auto"},tab:{"> svg:not(.MuiSvgIcon-root)":{display:"flex",flex:"none",color:e.palette.primary.main,marginRight:e.spacing(1.5)},[e.breakpoints.up("md")]:{textAlign:"right",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",minHeight:"auto",paddingTop:e.spacing(1.5),paddingBottom:e.spacing(1.5)}},indicator:{[e.breakpoints.up("md")]:{right:0,width:"100%",backgroundColor:e.palette.action.hover,borderRadius:e.shape.borderRadius}}})),sr=e=>e.dialogs.dataSource;function or(){const{classes:e}=nr(),t=(0,P.Z)(),s=(0,Rs.Z)(t.breakpoints.up("md")),{activeDataSource:a}=(0,Ye.Q)(sr),{dialogActions:i}=(0,it.W)(),{availableSources:r,selectSource:c}=(0,Ue.n)(),d=(0,Le.z)(),p=(0,l.useMemo)(()=>r.filter(le=>le.type==="connection"&&le.hidden!==!0),[r]),h=(0,l.useMemo)(()=>{const le=p.filter(te=>te.disabledReason==null),oe=p.filter(te=>te.disabledReason);return[...le,...oe]},[p]),[f,m]=(0,l.useState)(()=>{const le=p.findIndex(te=>te===a),oe=le<0?0:le;return d.logEvent(Te.q.DIALOG_SELECT_VIEW,{type:"live",data:h[oe]?.id}),oe}),y=(0,l.useMemo)(()=>h[f],[h,f]),[B,k]=(0,l.useState)(new Map),[z,G]=(0,l.useState)({});(0,l.useLayoutEffect)(()=>{const le=p.findIndex(oe=>oe===a);le>=0&&m(le)},[a,p]),(0,l.useLayoutEffect)(()=>{const le={};for(const oe of y?.formConfig?.fields??[])oe.defaultValue!=null&&(le[oe.id]=oe.defaultValue);G(le)},[y]);const q=(0,l.useCallback)(()=>{y&&(c(y.id,{type:"connection",params:z}),d.logEvent(Te.q.DIALOG_CLOSE,{activeDataSource:a}),i.dataSource.close())},[y,c,z,d,a,i.dataSource]),V=y?.disabledReason!=null||B.size>0,me=(0,l.useCallback)(le=>{le.preventDefault(),V||q()},[V,q]);return(0,n.jsx)(tr,{onOpen:V?void 0:q,children:(0,n.jsxs)(X.Z,{className:e.grid,"data-testid":"OpenConnection",children:[(0,n.jsx)("header",{className:e.header,children:(0,n.jsx)(ge.Z,{variant:"h3",fontWeight:600,gutterBottom:!0,children:"Open a new connection"})}),(0,n.jsx)("div",{className:e.sidebar,children:(0,n.jsx)(gn.Z,{classes:{indicator:e.indicator},variant:"scrollable",textColor:"inherit",orientation:s?"vertical":"horizontal",onChange:(le,oe)=>{m(oe),d.logEvent(Te.q.DIALOG_SELECT_VIEW,{type:"live",data:h[oe]?.id})},value:f,children:h.map((le,oe)=>{const{id:te,iconName:Z,displayName:Ae}=le;return(0,n.jsx)(tn.Z,{value:oe,icon:s?(0,n.jsx)(Ji,{name:Z??"Flow"}):void 0,label:Ae,className:e.tab},te)})})}),(0,n.jsx)(X.Z,{className:e.form,flex:"1 0",children:(0,n.jsx)("form",{onSubmit:me,children:(0,n.jsxs)(X.Z,{className:e.formInner,gap:2,children:[y?.disabledReason==null&&y?.warning!=null&&(0,n.jsx)(Nn.Z,{severity:"warning",children:y.warning}),y?.disabledReason!=null&&(0,n.jsx)(Nn.Z,{severity:"warning",children:y.disabledReason}),y?.description&&(0,n.jsx)(ge.Z,{children:y.description}),y?.formConfig!=null&&(0,n.jsx)(X.Z,{flexGrow:1,justifyContent:"space-between",children:(0,n.jsx)(X.Z,{gap:2,children:y.formConfig.fields.map(le=>(0,n.jsx)(_i,{field:le,disabled:y.disabledReason!=null,onError:oe=>{k(te=>(te.set(le.id,oe),new Map(te)))},onChange:oe=>{k(te=>(te.delete(le.id),new Map(te))),G(te=>({...te,[le.id]:oe}))}},le.id))})}),(0,n.jsx)(X.Z,{direction:"row",gap:1,children:(y?.docsLinks??[]).map(le=>(0,n.jsx)(cn.Z,{color:"primary",href:le.url,target:"_blank",rel:"noreferrer",children:le.label?`View docs for ${le.label}`:"View docs"},le.url))})]})})},y?.id)]})})}var ys=o(81774),vs=o(15400),vo=o(14117);function ma(e){return(0,n.jsxs)(He.Z,{viewBox:"0 0 909 204",...e,children:[(0,n.jsx)("title",{children:"Foxglove"}),(0,n.jsxs)("g",{children:[(0,n.jsx)("path",{d:"M313.65 92.55H295.05V156H269.85V92.55H258.15V80.25L270.15 73.8V69.9C270.15 59.3 272.55 51.9 277.35 47.7C282.15 43.4 289.25 41.25 298.65 41.25C302.95 41.25 306.85 41.6 310.35 42.3C313.95 43 317.25 43.85 320.25 44.85L314.25 62.25C312.75 61.85 311.05 61.45 309.15 61.05C307.25 60.65 305.15 60.45 302.85 60.45C300.15 60.45 298.15 61.3 296.85 63C295.65 64.6 295.05 66.9 295.05 69.9V73.65H313.65V92.55ZM402.362 114.6C402.362 128.4 398.712 139 391.412 146.4C384.212 153.8 374.312 157.5 361.712 157.5C353.912 157.5 346.962 155.85 340.862 152.55C334.862 149.15 330.112 144.3 326.612 138C323.212 131.6 321.512 123.8 321.512 114.6C321.512 101 325.112 90.55 332.312 83.25C339.612 75.85 349.562 72.15 362.162 72.15C369.962 72.15 376.862 73.8 382.862 77.1C388.962 80.4 393.712 85.2 397.112 91.5C400.612 97.8 402.362 105.5 402.362 114.6ZM347.162 114.6C347.162 122.3 348.312 128.15 350.612 132.15C352.912 136.05 356.712 138 362.012 138C367.212 138 370.962 136.05 373.262 132.15C375.562 128.15 376.712 122.3 376.712 114.6C376.712 107 375.562 101.3 373.262 97.5C370.962 93.6 367.162 91.65 361.862 91.65C356.662 91.65 352.912 93.6 350.612 97.5C348.312 101.3 347.162 107 347.162 114.6ZM434.075 114L408.125 73.65H436.775L451.175 98.4L465.725 73.65H494.375L468.125 114L495.575 156H466.925L451.175 129.3L435.425 156H406.775L434.075 114ZM533.61 72.15C539.01 72.15 543.61 73.2 547.41 75.3C551.21 77.4 554.36 80.3 556.86 84H557.46L559.41 73.65H581.01V156.15C581.01 167.85 577.46 176.75 570.36 182.85C563.36 188.95 552.76 192 538.56 192C532.36 192 526.76 191.65 521.76 190.95C516.76 190.25 511.86 189 507.06 187.2V166.65C512.16 168.75 517.16 170.3 522.06 171.3C526.96 172.4 532.46 172.95 538.56 172.95C550.06 172.95 555.81 167.7 555.81 157.2V155.55C555.81 154.15 555.86 152.55 555.96 150.75C556.16 148.85 556.36 147.05 556.56 145.35H555.81C553.41 149.25 550.31 152.25 546.51 154.35C542.81 156.45 538.36 157.5 533.16 157.5C523.86 157.5 516.46 153.8 510.96 146.4C505.56 139 502.86 128.5 502.86 114.9C502.86 101.2 505.61 90.65 511.11 83.25C516.71 75.85 524.21 72.15 533.61 72.15ZM542.46 92.1C533.16 92.1 528.51 99.85 528.51 115.35C528.51 123.05 529.66 128.75 531.96 132.45C534.36 136.05 537.96 137.85 542.76 137.85C548.06 137.85 551.86 136.3 554.16 133.2C556.46 130.1 557.61 125 557.61 117.9V114.75C557.61 107.05 556.46 101.35 554.16 97.65C551.96 93.95 548.06 92.1 542.46 92.1ZM628.064 156H602.714V42H628.064V156ZM726.386 114.6C726.386 128.4 722.736 139 715.436 146.4C708.236 153.8 698.336 157.5 685.736 157.5C677.936 157.5 670.986 155.85 664.886 152.55C658.886 149.15 654.136 144.3 650.636 138C647.236 131.6 645.536 123.8 645.536 114.6C645.536 101 649.136 90.55 656.336 83.25C663.636 75.85 673.586 72.15 686.186 72.15C693.986 72.15 700.886 73.8 706.886 77.1C712.986 80.4 717.736 85.2 721.136 91.5C724.636 97.8 726.386 105.5 726.386 114.6ZM671.186 114.6C671.186 122.3 672.336 128.15 674.636 132.15C676.936 136.05 680.736 138 686.036 138C691.236 138 694.986 136.05 697.286 132.15C699.586 128.15 700.736 122.3 700.736 114.6C700.736 107 699.586 101.3 697.286 97.5C694.986 93.6 691.186 91.65 685.886 91.65C680.686 91.65 676.936 93.6 674.636 97.5C672.336 101.3 671.186 107 671.186 114.6ZM761.399 156L730.049 73.65H756.449L771.449 121.35C771.949 123.05 772.399 125.15 772.799 127.65C773.299 130.05 773.599 132.25 773.699 134.25H774.299C774.399 132.15 774.649 129.95 775.049 127.65C775.549 125.35 776.099 123.3 776.699 121.5L791.999 73.65H818.249L786.899 156H761.399ZM864.582 72.15C876.182 72.15 885.382 75.35 892.182 81.75C898.982 88.05 902.382 97.35 902.382 109.65V121.35H850.332C850.532 126.75 852.282 131.05 855.582 134.25C858.882 137.45 863.582 139.05 869.682 139.05C874.882 139.05 879.632 138.55 883.932 137.55C888.332 136.55 892.832 134.95 897.432 132.75V151.5C893.332 153.6 888.982 155.1 884.382 156C879.882 157 874.282 157.5 867.582 157.5C859.282 157.5 851.882 156 845.382 153C838.982 150 833.932 145.4 830.232 139.2C826.632 132.9 824.832 124.95 824.832 115.35C824.832 105.65 826.482 97.6 829.782 91.2C833.082 84.8 837.682 80.05 843.582 76.95C849.582 73.75 856.582 72.15 864.582 72.15ZM865.032 89.7C861.132 89.7 857.882 90.95 855.282 93.45C852.782 95.85 851.282 99.7 850.782 105H879.132C879.032 100.7 877.832 97.1 875.532 94.2C873.232 91.2 869.732 89.7 865.032 89.7Z",fill:"currentColor"}),(0,n.jsx)("circle",{cx:"63.4983",cy:"166",r:"26",fill:"currentColor"}),(0,n.jsx)("circle",{opacity:"0.5",cx:"138.498",cy:"166",r:"26",fill:"currentColor"}),(0,n.jsx)("circle",{opacity:"0.5",cx:"175.498",cy:"101",r:"26",fill:"currentColor"}),(0,n.jsx)("path",{d:"M63.5281 10C69.6242 10 75.2332 12.0853 79.6808 15.5814C85.4685 20.2924 92.8532 23.1167 100.898 23.1167C108.942 23.1167 116.327 20.2924 122.114 15.5814C126.562 12.0853 132.171 10 138.267 10C152.714 10 164.426 21.7116 164.426 36.1587C164.426 50.6057 152.714 62.3174 138.267 62.3174C132.171 62.3174 126.562 60.2321 122.114 56.736C116.327 52.0249 108.942 49.2007 100.898 49.2007C92.8532 49.2007 85.4685 52.0249 79.6808 56.736C75.2332 60.2321 69.6242 62.3174 63.5281 62.3174C49.081 62.3174 37.3694 50.6057 37.3694 36.1587C37.3694 21.7116 49.081 10 63.5281 10Z",fill:"currentColor"}),(0,n.jsx)("path",{d:"M26.1587 75.023C32.2548 75.023 37.8638 77.1083 42.3114 80.6044C48.0991 85.3155 55.4838 88.1397 63.5282 88.1397C71.5726 88.1397 78.9574 85.3155 84.745 80.6044C89.1927 77.1083 94.8017 75.023 100.898 75.023C115.345 75.023 127.056 86.7347 127.056 101.182C127.056 115.629 115.345 127.34 100.898 127.34C94.8017 127.34 89.1927 125.255 84.745 121.759C78.9574 117.048 71.5726 114.224 63.5282 114.224C55.4838 114.224 48.0991 117.048 42.3114 121.759C37.8638 125.255 32.2548 127.34 26.1587 127.34C11.7116 127.34 0 115.629 0 101.182C0 86.7347 11.7116 75.023 26.1587 75.023Z",fill:"currentColor"})]})]})}const Ao=(0,L.ZL)()(e=>({logo:{width:212,height:"auto",marginLeft:e.spacing(-1)},grid:{[e.breakpoints.up("md")]:{display:"grid",gridTemplateAreas:`
        "header spacer"
        "content sidebar"
      `,gridTemplateRows:"content auto",gridTemplateColumns:"1fr 375px"}},header:{padding:e.spacing(6),gridArea:"header",[e.breakpoints.down("md")]:{padding:e.spacing(4)},[`@media (max-height: ${e.breakpoints.values.sm})`]:{display:"none"}},content:{padding:e.spacing(0,6,6),overflow:"hidden",gridArea:"content",[e.breakpoints.down("md")]:{padding:e.spacing(0,4,4)},[`@media (max-height: ${e.breakpoints.values.sm})`]:{paddingTop:e.spacing(6)}},spacer:{gridArea:"spacer",backgroundColor:(0,de.Z)(e.palette.text.primary).setAlpha(.04).toRgbString(),[`@media (max-height: ${e.breakpoints.values.sm})`]:{display:"none"}},sidebar:{gridArea:"sidebar",backgroundColor:(0,de.Z)(e.palette.text.primary).setAlpha(.04).toRgbString(),padding:e.spacing(0,5,5),[e.breakpoints.down("md")]:{padding:e.spacing(4)},[`@media (max-height: ${e.breakpoints.values.sm})`]:{paddingTop:e.spacing(6)}},button:{whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden"},connectionButton:{textAlign:"left",justifyContent:"flex-start",padding:e.spacing(2,3),gap:e.spacing(1.5),borderColor:e.palette.divider,".MuiButton-startIcon .MuiSvgIcon-fontSizeLarge":{fontSize:28}},recentListItemButton:{overflow:"hidden",color:e.palette.primary.main,"&:hover":{backgroundColor:"transparent",color:e.palette.primary[e.palette.mode==="dark"?"light":"dark"]}},recentSourceSecondary:{color:"inherit"},featureList:{paddingLeft:e.spacing(1.5),"li:not(:last-of-type)":{marginBottom:e.spacing(.5)}}}));function ar(e){const{icon:t,onClick:s,text:a,secondaryText:i,href:r,target:c}=e,{classes:d}=Ao(),p=(0,n.jsx)($.Z,{className:d.connectionButton,fullWidth:!0,color:"inherit",variant:"outlined",size:"large",startIcon:t,onClick:s,children:(0,n.jsxs)(X.Z,{flex:"auto",zeroMinWidth:!0,children:[(0,n.jsx)(ge.Z,{variant:"subtitle1",color:"text.primary",children:a}),(0,n.jsx)(ge.Z,{variant:"body2",color:"text.secondary",noWrap:!0,children:i})]})});return r?(0,n.jsx)(cn.Z,{href:r,target:c,style:{textDecoration:"none"},children:p}):p}function ir(e){const{onSelectView:t}=e,{signIn:s}=Xe(),a=ct(),i=(0,Le.z)(),{classes:r}=Ao(),{t:c}=(0,ee.$G)("openDialog"),{freeUser:d,teamOrEnterpriseUser:p}=(0,l.useMemo)(()=>{const f={id:"new",title:c("newToFoxgloveStudio"),text:c("newToFoxgloveStudioDescription"),actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($.Z,{onClick:()=>{t("demo"),i.logEvent(Te.q.DIALOG_SELECT_VIEW,{type:"demo"}),i.logEvent(Te.q.DIALOG_CLICK_CTA,{user:a,cta:"demo"})},className:r.button,variant:"outlined",children:c("exploreSampleData")}),(0,n.jsx)($.Z,{href:"https://foxglove.dev/docs/studio/connection/data-sources",target:"_blank",className:r.button,onClick:()=>{i.logEvent(Te.q.DIALOG_CLICK_CTA,{user:a,cta:"docs"})},children:c("viewOurDocs")})]})};return{freeUser:[f],teamOrEnterpriseUser:[f,{id:"join-community",title:c("joinOurCommunity"),text:c("joinOurCommunityDescription"),actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($.Z,{href:"https://foxglove.dev/slack",target:"_blank",className:r.button,variant:"outlined",onClick:()=>{i.logEvent(Te.q.DIALOG_CLICK_CTA,{user:a,cta:"join-slack"})},children:c("joinOurSlack")}),(0,n.jsx)($.Z,{href:"https://github.com/foxglove/studio/issues/new/choose",target:"_blank",className:r.button,onClick:()=>{i.logEvent(Te.q.DIALOG_CLICK_CTA,{user:a,cta:"go-to-github"})},children:c("openAGitHubIssue")})]})},{id:"need-help",title:c("needHelp"),text:c("needHelpDescription"),actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($.Z,{href:"https://foxglove.dev/docs/studio",target:"_blank",className:r.button,variant:"outlined",onClick:()=>{i.logEvent(Te.q.DIALOG_CLICK_CTA,{user:a,cta:"docs"})},children:c("viewOurDocs")}),(0,n.jsx)($.Z,{href:"https://foxglove.dev/tutorials",target:"_blank",className:r.button,onClick:()=>{i.logEvent(Te.q.DIALOG_CLICK_CTA,{user:a,cta:"tutorials"})},children:c("seeTutorials")})]})}]}},[i,r.button,a,t,c]),h=(0,l.useMemo)(()=>{switch(a){case"unauthenticated":return[...d,{id:"collaborate",title:c("collaborateTitle"),text:(0,n.jsxs)("ul",{className:r.featureList,children:[(0,n.jsx)("li",{children:c("secureStorageOfData")}),(0,n.jsx)("li",{children:c("convenientWebInterface")}),(0,n.jsx)("li",{children:c("canBeShared")})]}),actions:s?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($.Z,{className:r.button,variant:"outlined",onClick:()=>{i.logEvent(Te.q.DIALOG_CLICK_CTA,{user:a,cta:"create-account"}),s()},children:c("createAFreeAccount")}),(0,n.jsx)($.Z,{className:r.button,onClick:()=>{i.logEvent(Te.q.DIALOG_CLICK_CTA,{user:a,cta:"sign-in"}),s()},children:c("signIn")})]}):(0,n.jsx)($.Z,{href:"https://foxglove.dev/data-platform",target:"_blank",className:r.button,variant:"outlined",onClick:()=>{i.logEvent(Te.q.DIALOG_CLICK_CTA,{user:a,cta:"create-account"})},children:c("learnMore")})}];case"authenticated-free":return[{id:"start-collaborating",title:c("startCollaborating"),text:c("startCollaboratingDescription"),actions:(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($.Z,{href:"https://console.foxglove.dev/recordings",target:"_blank",variant:"outlined",className:r.button,onClick:()=>{i.logEvent(Te.q.DIALOG_CLICK_CTA,{user:a,cta:"upload-to-dp"})},children:c("uploadToDataPlatform")}),(0,n.jsx)($.Z,{href:"https://foxglove.dev/docs/studio/layouts#team-layouts",target:"_blank",className:r.button,children:c("shareLayouts")})]})},...d];case"authenticated-team":return p;case"authenticated-enterprise":return p}},[i,r.button,r.featureList,a,d,s,p,c]);return(0,n.jsx)(n.Fragment,{children:h.map(f=>(0,n.jsxs)(X.Z,{children:[(0,n.jsx)(ge.Z,{variant:"h5",gutterBottom:!0,children:f.title}),(0,n.jsx)(ge.Z,{variant:"body2",color:"text.secondary",children:f.text}),f.actions!=null&&(0,n.jsx)(X.Z,{direction:"row",flexWrap:"wrap",alignItems:"center",gap:1,paddingTop:1.5,children:f.actions})]},f.id))})}function rr(){const{recentSources:e,selectRecent:t}=(0,Ue.n)(),{classes:s}=Ao(),a=(0,Le.z)(),{t:i}=(0,ee.$G)("openDialog"),{dialogActions:r}=(0,it.W)(),c=(0,l.useMemo)(()=>[{key:"open-local-file",text:i("openLocalFile"),secondaryText:i("openLocalFileDescription"),icon:(0,n.jsx)(He.Z,{fontSize:"large",color:"primary",viewBox:"0 0 2048 2048",children:(0,n.jsx)("path",{d:"M1955 1533l-163-162v677h-128v-677l-163 162-90-90 317-317 317 317-90 90zM256 1920h1280v128H128V0h1115l549 549v475h-128V640h-512V128H256v1792zM1280 512h293l-293-293v293z"})}),onClick:()=>{r.dataSource.open("file"),a.logEvent(Te.q.DIALOG_SELECT_VIEW,{type:"local"})}},{key:"open-url",text:i("openUrl"),secondaryText:i("openUrlDescription"),icon:(0,n.jsx)(He.Z,{fontSize:"large",color:"primary",viewBox:"0 0 2048 2048",children:(0,n.jsx)("path",{d:"M256 1920h512v128H128V0h1115l549 549v91h-640V128H256v1792zM1280 512h293l-293-293v293zm128 256q133 0 249 50t204 137 137 203 50 250q0 133-50 249t-137 204-203 137-250 50q-133 0-249-50t-204-137-137-203-50-250q0-133 50-249t137-204 203-137 250-50zm0 1152q21 0 37-14t28-38 21-53 15-57 9-53 6-41h-230q2 14 5 39t10 53 16 58 21 52 27 39 35 15zm126-384q1-32 1-64t1-64q0-63-3-128h-250q-3 65-3 128 0 64 3 128h251zm-638-128q0 32 4 64t12 64h243q-3-64-3-128 0-63 3-128H912q-8 32-12 64t-4 64zm512-512q-19 0-34 15t-27 39-21 53-15 57-10 53-6 39h225q-2-13-6-37t-11-53-16-58-20-54-27-39-32-15zm253 384q3 65 3 128v64q0 32-2 64h242q8-32 12-64t4-64q0-32-4-64t-12-64h-243zm190-128q-43-75-108-131t-145-88q21 52 32 107t19 112h202zm-637-218q-78 32-142 88t-107 130h200q13-111 49-218zm-249 730q42 73 106 129t142 88q-21-51-31-106t-17-111H965zm642 215q77-32 139-87t105-128h-198q-5 51-15 109t-31 106z"})}),iconProps:{iconName:"FileASPX"},href:"https://console.foxglove.dev/recordings",onClick:()=>{a.logEvent(Te.q.DIALOG_SELECT_VIEW,{type:"data-platform"})}},{key:"open-connection",text:i("openConnection"),secondaryText:i("openConnectionDescription"),icon:(0,n.jsx)(He.Z,{fontSize:"large",color:"primary",viewBox:"0 0 2048 2048",children:(0,n.jsx)("path",{d:"M1408 256h640v640h-640V640h-120l-449 896H640v256H0v-640h640v256h120l449-896h199V256zM512 1664v-384H128v384h384zm1408-896V384h-384v384h384z"})}),onClick:()=>{r.dataSource.open("connection"),a.logEvent(Te.q.DIALOG_SELECT_VIEW,{type:"live"})}}],[a,r.dataSource,i]);return(0,n.jsxs)(X.Z,{className:s.grid,children:[(0,n.jsx)("header",{className:s.header,children:(0,n.jsx)(ma,{color:"primary",className:s.logo})}),(0,n.jsx)(X.Z,{className:s.content,children:(0,n.jsxs)(X.Z,{gap:4,children:[(0,n.jsxs)(X.Z,{gap:1,children:[(0,n.jsx)(ge.Z,{variant:"h5",gutterBottom:!0,children:i("openDataSource")}),c.map(d=>(0,n.jsx)(ar,{text:d.text,secondaryText:d.secondaryText,icon:d.icon,onClick:d.onClick,href:d.href,target:"_blank"},d.key))]}),e.length>0&&(0,n.jsxs)(X.Z,{gap:1,children:[(0,n.jsx)(ge.Z,{variant:"h5",gutterBottom:!0,children:i("recentDataSources")}),(0,n.jsx)(ys.Z,{disablePadding:!0,children:e.slice(0,5).map(d=>(0,n.jsx)(vs.ZP,{disablePadding:!0,id:d.id,children:(0,n.jsx)(vo.Z,{disableGutters:!0,onClick:()=>{t(d.id)},className:s.recentListItemButton,children:(0,n.jsx)(Oe,{className:s.recentSourceSecondary,text:d.title})})},d.id))})]})]})}),(0,n.jsx)("div",{className:s.spacer}),(0,n.jsx)(X.Z,{gap:4,className:s.sidebar,children:(0,n.jsx)(ir,{onSelectView:r.dataSource.open})})]})}const sy=null,lr=(0,L.ZL)()(e=>({paper:{maxWidth:`calc(min(${e.breakpoints.values.md}px, 100% - ${e.spacing(4)}))`},closeButton:{position:"absolute",right:0,top:0,margin:e.spacing(3)}})),cr=e=>e.dialogs.dataSource;function dr(e){const{backdropAnimation:t}=e,{classes:s}=lr(),{availableSources:a,selectSource:i}=(0,Ue.n)(),{dialogActions:r}=(0,it.W)(),{activeDataSource:c,item:d}=(0,Ye.Q)(cr),p=(0,gs.Z)(),h=(0,l.useMemo)(()=>a.find(k=>k.type==="sample"),[a]),f=(0,Le.z)(),m=(0,l.useCallback)(()=>{f.logEvent(Te.q.DIALOG_CLOSE,{activeDataSource:c}),r.dataSource.close()},[f,c,r.dataSource]);(0,l.useLayoutEffect)(()=>{d==="file"?r.openFile.open().catch(k=>{console.error(k)}).finally(()=>{p()&&r.dataSource.open("start")}):d==="demo"&&h&&i(h.id)},[d,r,h,p,i]);const y=(0,l.useMemo)(()=>{const k=new Date;if(t!==!1){if(k>=new Date(k.getFullYear(),11,25))return(0,n.jsx)(ws,{effect:"snow"});if(k<new Date(k.getFullYear(),0,2))return(0,n.jsx)(ws,{effect:"confetti"})}},[t]),B=(0,l.useMemo)(()=>{switch(d){case"demo":return{title:"",component:(0,n.jsx)(n.Fragment,{})};case"connection":return{title:"Open new connection",component:(0,n.jsx)(or,{})};default:return{title:"Get started",component:(0,n.jsx)(rr,{})}}},[d]);return(0,n.jsxs)(Gt.Z,{"data-testid":"DataSourceDialog",open:!0,onClose:m,fullWidth:!0,maxWidth:"lg",BackdropProps:{children:y},PaperProps:{square:!1,elevation:4,className:s.paper},children:[(0,n.jsx)(be.Z,{className:s.closeButton,onClick:m,edge:"end",children:(0,n.jsx)(et.Z,{})}),(0,n.jsx)(X.Z,{flexGrow:1,fullHeight:!0,justifyContent:"space-between",overflow:d==="connection"?"hidden":void 0,children:B.component})]})}var kn=o(47591);const ur=(0,L.ZL)()(e=>({outer:{background:(0,kn.Fq)(e.palette.background.paper,.84),backgroundImage:`linear-gradient(${e.palette.action.hover}, ${e.palette.action.hover})`,pointerEvents:"none",padding:e.spacing(5),boxShadow:"none",maxHeight:"none"},inner:{borderRadius:16,height:"100%",border:`2px dashed ${e.palette.text.primary}`,display:"flex",flexDirection:"column",textAlign:"center",alignItems:"center",justifyContent:"center",fontWeight:800,padding:e.spacing(5),lineHeight:"normal"}}));function pr(e){const{classes:t}=ur();return(0,n.jsx)(Gt.Z,{fullScreen:!0,open:e.open,style:{zIndex:1e7},classes:{paperFullScreen:t.outer},children:(0,n.jsx)("div",{className:t.inner,children:(0,n.jsx)(ge.Z,{variant:"h1",align:"center",children:e.children})})})}const fr=pr;var hr="../../packages/studio-base/src/components/DocumentDropListener.tsx";const gr=ae.ZP.getLogger(hr);function mr(e){const[t,s]=(0,l.useState)(!1),{onDrop:a,allowedExtensions:i}=e,{enqueueSnackbar:r}=(0,we.Ds)(),c=(0,l.useCallback)(async h=>{if(s(!1),!h.dataTransfer||!i)return;let f=[];const m=[],y=[],B=[],k=h.dataTransfer.items;for(const q of Array.from(k)){window.isSecureContext&&"getAsFileSystemHandle"in q?m.push(q.getAsFileSystemHandle()):gr.info("getAsFileSystemHandle not available on a dropped item. Features requiring handles will not be available for the item",q);const V=q.webkitGetAsEntry();if(V?.isFile===!0){const me=q.getAsFile();me&&y.push(me)}else V?.isDirectory===!0&&B.push(V)}if(B.length===0)for(const q of m){const V=await q;V instanceof FileSystemFileHandle&&f.push(V)}if(y.length===0&&B.length===0&&f.length===0)return;for(const q of B){const V=await new Promise((me,le)=>{q.createReader().readEntries(me,le)});for(const me of V)if(me.isFile){const le=await new Promise((oe,te)=>{me.file(oe,te)});y.push(le)}}(B.length>0||f.length===0)&&(f=void 0);const z=y.filter(q=>i.includes((0,Ze.extname)(q.name))),G=f?.filter(q=>i.includes((0,Ze.extname)(q.name)));if(z.length===0&&G?.length===0){r("The file format is unsupported.",{variant:"error"});return}h.preventDefault(),h.stopPropagation(),a?.({files:z,handles:G})},[r,a,i]),d=(0,l.useCallback)(h=>{if(!i)return;const{dataTransfer:f}=h;f?.types.includes("Files")===!0&&(h.stopPropagation(),h.preventDefault(),f.dropEffect="copy",s(!0))},[i]),p=(0,l.useCallback)(()=>{s(!1)},[]);return(0,l.useLayoutEffect)(()=>(document.addEventListener("dragover",d),document.addEventListener("drop",c),document.addEventListener("dragleave",p),()=>{document.removeEventListener("dragover",d),document.removeEventListener("drop",c),document.removeEventListener("dragleave",p)}),[p,d,c]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("input",{type:"file",style:{display:"none"},onChange:h=>{h.target.files&&e.onDrop?.({files:Array.from(h.target.files)})},"data-puppeteer-file-upload":!0,multiple:!0}),(0,n.jsx)(fr,{open:t,children:"Drop a file here"})]})}var bo=o(54675),js=o(31563),yr=o(28245),vr=o(8407);function xo({text:e,highlight:t}){if(!t?.trim())return(0,n.jsx)("span",{children:e});const s=new RegExp(`(${vr.Z(t)})`,"gi"),a=e.split(s);return(0,n.jsx)("span",{children:a.filter(i=>i).map((i,r)=>s.test(i)?(0,n.jsx)("mark",{children:i},r):(0,n.jsx)("span",{children:i},r))})}var Ar=o(2784);const br=(0,L.ZL)()((e,t,s)=>({spacer:{cursor:"default",height:e.spacing(1),gridColumn:"span 2"},event:{display:"contents",cursor:"pointer","&:hover":{[`.${s.eventMetadata}`]:{backgroundColor:(0,kn.Fq)(e.palette.info.main,e.palette.action.hoverOpacity),borderColor:e.palette.info.main}}},eventSelected:{[`.${s.eventMetadata}`]:{backgroundColor:(0,kn.Fq)(e.palette.info.main,e.palette.action.activatedOpacity),borderColor:e.palette.info.main,boxShadow:`0 0 0 1px ${e.palette.info.main}`}},eventHovered:{[`.${s.eventMetadata}`]:{backgroundColor:(0,kn.Fq)(e.palette.info.main,e.palette.action.hoverOpacity),borderColor:e.palette.info.main}},eventMetadata:{padding:e.spacing(1),backgroundColor:e.palette.background.default,borderRight:`1px solid ${e.palette.divider}`,borderBottom:`1px solid ${e.palette.divider}`,"&:nth-of-type(odd)":{borderLeft:`1px solid ${e.palette.divider}`},"&:first-of-type":{borderTop:`1px solid ${e.palette.divider}`,borderTopLeftRadius:e.shape.borderRadius},"&:nth-of-type(2)":{borderTop:`1px solid ${e.palette.divider}`,borderTopRightRadius:e.shape.borderRadius},"&:nth-last-of-type(2)":{borderBottomRightRadius:e.shape.borderRadius},"&:nth-last-of-type(3)":{borderBottomLeftRadius:e.shape.borderRadius}}}));function xr(e){if(e.durationNanos==="0")return"-";if(!e.durationNanos)return"";const t=BigInt(e.durationNanos);return t>=BigInt(1e9)?`${Number(t/BigInt(1e9))}s`:t>=BigInt(1e6)?`${Number(t/BigInt(1e6))}ms`:t>=BigInt(1e3)?`${Number(t/BigInt(1e3))}\xB5s`:`${e.durationNanos}ns`}function Er(e){const{event:t,filter:s,formattedTime:a,isHovered:i,isSelected:r,onClick:c,onHoverStart:d,onHoverEnd:p}=e,{classes:h,cx:f}=br(),m=yr.Z([["timestamp",a],Number(t.event.durationNanos)>0&&["duration",xr(t.event)],...Object.entries(t.event.metadata)]);return(0,n.jsxs)("div",{"data-testid":"sidebar-event",className:f(h.event,{[h.eventSelected]:r,[h.eventHovered]:i}),onClick:()=>{c(t)},onMouseEnter:()=>{d(t)},onMouseLeave:()=>{p(t)},children:[m.map(([y,B])=>(0,n.jsxs)(l.Fragment,{children:[(0,n.jsx)("div",{className:h.eventMetadata,children:(0,n.jsx)(xo,{text:y??"",highlight:s})}),(0,n.jsx)("div",{className:h.eventMetadata,children:(0,n.jsx)(xo,{text:B??"",highlight:s})})]},y)),(0,n.jsx)("div",{className:h.spacer})]})}const Cr=Ar.memo(Er),Sr=(0,L.ZL)()(e=>({appBar:{top:-1,zIndex:e.zIndex.appBar-1,display:"flex",flexDirection:"row",padding:e.spacing(1),gap:e.spacing(1),alignItems:"center",borderBottom:`1px solid ${e.palette.divider}`},grid:{display:"grid",flexShrink:1,gridTemplateColumns:"auto 1fr",overflowY:"auto",padding:e.spacing(1)},root:{backgroundColor:e.palette.background.paper,maxHeight:"100%"}})),Tr=e=>e.seekPlayback,Pr=e=>e.filter,Ir=e=>e.setFilter,Mr=e=>e.events,Dr=e=>e.hoveredEvent,Br=e=>e.setHoveredEvent,wr=e=>e.eventsAtHoverValue,Rr=e=>e.selectedEventId,jr=e=>e.selectEvent;function Lr(){const e=O(Mr),t=O(Rr),s=O(jr),{formatTime:a}=(0,at.v)(),i=(0,Qe.An)(Tr),r=(0,fe.oA)(wr),c=(0,fe.oA)(Dr),d=(0,fe.oA)(Br),p=O(Pr),h=O(Ir),f=(0,l.useMemo)(()=>(e.value??[]).map(G=>({...G,formattedTime:a(G.event.startTime)})),[e,a]),m=(0,l.useCallback)(()=>{h("")},[h]),y=(0,l.useCallback)(G=>{G.event.id===t?s(void 0):s(G.event.id),i&&i(G.event.startTime)},[i,s,t]),B=(0,l.useCallback)(()=>{d(void 0)},[d]),k=(0,l.useCallback)(G=>{d(G)},[d]),{classes:z}=Sr();return(0,n.jsxs)(X.Z,{className:z.root,fullHeight:!0,children:[(0,n.jsx)(Ft.Z,{className:z.appBar,position:"sticky",color:"inherit",elevation:0,children:(0,n.jsx)(Ot.Z,{variant:"filled",fullWidth:!0,value:p,onChange:G=>{h(G.currentTarget.value)},placeholder:"Search by key, value, or key:value",InputProps:{startAdornment:(0,n.jsx)(js.Z,{fontSize:"small"}),endAdornment:p!==""&&(0,n.jsx)(be.Z,{edge:"end",onClick:m,size:"small",children:(0,n.jsx)(bo.Z,{fontSize:"small"})})}})}),e.loading&&(0,n.jsx)(X.Z,{flex:"auto",padding:2,fullHeight:!0,alignItems:"center",justifyContent:"center",children:(0,n.jsx)(on.Z,{})}),e.error&&(0,n.jsx)(X.Z,{flex:"auto",padding:2,fullHeight:!0,alignItems:"center",justifyContent:"center",children:(0,n.jsx)(ge.Z,{align:"center",color:"error",children:"Error loading events."})}),e.value&&e.value.length===0&&(0,n.jsx)(X.Z,{flex:"auto",padding:2,fullHeight:!0,alignItems:"center",justifyContent:"center",children:(0,n.jsx)(ge.Z,{align:"center",color:"text.secondary",children:"No Events"})}),(0,n.jsx)("div",{className:z.grid,children:f.map(G=>(0,n.jsx)(Cr,{event:G,filter:p,formattedTime:G.formattedTime,isHovered:c?G.event.id===c.event.id:r[G.event.id]!=null,isSelected:G.event.id===t,onClick:y,onHoverStart:k,onHoverEnd:B},G.event.id))})]})}var ya=o(86451),Or=o(13688),Nr=o(70714),Eo=o(75785),Xn=o(29268),Co=o(50985),Zr=o(2784);const kr=(0,L.ZL)()(e=>({iconButtonSmall:{padding:e.spacing(.91125),borderRadius:0}}));function Fr({allowShare:e,onReset:t,onShare:s,fontSize:a="medium"}){const{classes:i,cx:r}=kr(),[c,d]=Zr.useState(),{t:p}=(0,ee.$G)("panelSettings"),h=Boolean(c),f=y=>{d(y.currentTarget)},m=()=>{d(void 0)};return(0,n.jsxs)("div",{children:[(0,n.jsx)(be.Z,{className:r({[i.iconButtonSmall]:a==="small"}),id:"basic-button","aria-controls":h?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":h?"true":void 0,onClick:f,children:(0,n.jsx)(Co.Z,{fontSize:a})}),(0,n.jsxs)(ve.Z,{id:"basic-menu",anchorEl:c,open:h,onClose:m,MenuListProps:{"aria-labelledby":"basic-button"},children:[(0,n.jsx)(Se.Z,{disabled:!e,onClick:()=>{s(),m()},children:p("importOrExportSettingsWithEllipsis")}),(0,n.jsx)(Se.Z,{onClick:()=>{t(),m()},children:p("resetToDefaults")})]})]})}var So=o(43749),Ur=o(5817),Kt=o.n(Ur),To=o(85321),va=o(23759),zr=o(80051),$n=o(50799),Xt=o(75254),Po=o(29800),$t=o(91004),Wr=o(43684),Io=o(74352),Gr=o(86635),Aa=o(14648),Ls=o(94225);const Qr=(0,L.ZL)()(e=>({container:{padding:e.spacing(2)},picker:{"&.react-colorful":{width:"100%",gap:e.spacing(.75)},".react-colorful__last-control":{borderRadius:0},".react-colorful__saturation":{borderRadius:0},".react-colorful__hue":{order:-1},".react-colorful__hue-pointer":{zIndex:4}}}));function Mo(e){const{alphaType:t,onChange:s,value:a,onEnterKey:i}=e,{classes:r}=Qr(),{swatchColor:c,updatePrefixedColor:d,editedValueIsInvalid:p,editedValue:h,updateEditedValue:f,onInputBlur:m}=Hr({alphaType:t,onChange:s,value:a});return(0,n.jsxs)(X.Z,{className:r.container,gap:1,children:[t==="alpha"?(0,n.jsx)(Aa.L_,{className:r.picker,color:c,onChange:d}):(0,n.jsx)(Aa.gW,{className:r.picker,color:c,onChange:d}),(0,n.jsx)(Ot.Z,{size:"small",error:p,InputProps:{onFocus:y=>{y.target.select()},role:"input",startAdornment:(0,n.jsx)(Gr.Z,{fontSize:"small"}),style:{fontFamily:rt.R.MONOSPACE}},placeholder:t==="alpha"?"RRGGBBAA":"RRGGBB",value:h,onKeyDown:y=>y.key==="Enter"&&i?.(),onChange:y=>{f(y.target.value)},onBlur:m})]})}const Yr=/^#?([0-9A-F]{3,8})$/i;function ba(e,t){const a=Yr.exec(e)?.[1]?.length??0;return a===3||a===6||t==="alpha"&&(a===4||a===8)}function Hr(e){const{alphaType:t,onChange:s,value:a}=e,i=(0,l.useMemo)(()=>a?(0,de.Z)(a):void 0,[a]),r=t==="alpha"?i?.toHex8():i?.toHex(),d=(t==="alpha"?i?.toHex8String():i?.toHexString())??"#00000044",[p,h]=(0,l.useState)(r??""),f=p.length>0&&!ba(p,t),m=(0,Ls.y1)(z=>{s(`#${z}`),h(z)}),y=(0,l.useCallback)(z=>{const G=(0,de.Z)(z);m(t==="alpha"?G.toHex8():G.toHex())},[t,m]),B=(0,l.useCallback)(z=>{if(h(z),ba(z,t)){const G=(0,de.Z)(z),q=t==="alpha"?G.toHex8String():G.toHexString();s(q)}},[t,s]),k=(0,l.useCallback)(()=>{h(r??"")},[r]);return{swatchColor:d,updatePrefixedColor:y,editedValueIsInvalid:f,editedValue:p,updateEditedValue:B,onInputBlur:k}}function Vr(e,t){const s=(0,de.Z)(t);return s.isValid()?e.palette.getContrastText(s.toHexString()):e.palette.text.primary}const Kr=(0,L.ZL)()(e=>({root:{backgroundImage:"linear-gradient(to bottom right, white 50%, black 50%)",borderRadius:e.shape.borderRadius,display:"inline-flex",aspectRatio:"1/1",flexShrink:0},swatch:{aspectRatio:"1/1"},sizeSmall:{height:e.spacing(2),width:e.spacing(2)},sizeMedium:{height:e.spacing(2),width:e.spacing(2)},sizeLarge:{height:e.spacing(3),width:e.spacing(3)}}));function Do(e){const{color:t,size:s="medium",className:a,...i}=e,{classes:r,cx:c,theme:d}=Kr();return(0,n.jsx)("div",{className:c(r.root,{[r.sizeSmall]:s==="small",[r.sizeMedium]:s==="medium",[r.sizeLarge]:s==="large"},a),...i,children:(0,n.jsx)("div",{title:t,className:r.swatch,style:{backgroundColor:t,border:`1px solid ${Vr(d,t)}`}})})}const Xr=(0,L.ZL)()((e,t,s)=>({root:{position:"relative"},rootDisabled:{pointerEvents:"none"},textField:{".MuiInputBase-formControl.MuiInputBase-root":{padding:0},".MuiInputBase-root":{fontFamily:`${rt.R.MONOSPACE}`,cursor:"pointer",[`:not(:hover) .${s.iconButton}`]:{visibility:"hidden"}},".MuiInputBase-input":{alignItems:"center",fontFeatureSettings:`${rt.R.SANS_SERIF_FEATURE_SETTINGS}, "zero"`}},iconButton:{marginRight:e.spacing(.25),opacity:e.palette.action.disabledOpacity,":hover":{background:"transparent",opacity:1}},colorSwatch:{marginLeft:e.spacing(.75)}}));function xa(e){const{alphaType:t,disabled:s,onChange:a,readOnly:i,hideClearButton:r,value:c}=e,{classes:d,cx:p}=Xr(),[h,f]=(0,l.useState)(void 0),m=(0,l.useMemo)(()=>c?(0,de.Z)(c):void 0,[c]),y=t==="alpha"?m?.toHex8String():m?.toHexString(),B=y??"#00000044",k=(0,l.useCallback)(me=>{f(me.currentTarget)},[]),z=(0,l.useCallback)(()=>{f(void 0)},[]),G=(0,l.useCallback)(()=>{a(void 0)},[a]),q=Boolean(h),V=(y??"")===""||(r??!1);return(0,n.jsxs)(X.Z,{className:p(d.root,{[d.rootDisabled]:s===!0||i===!0}),children:[(0,n.jsx)(Ot.Z,{className:d.textField,fullWidth:!0,disabled:s,placeholder:e.placeholder,size:"small",value:y??"",variant:"filled",InputProps:{readOnly:!0,startAdornment:(0,n.jsx)(Do,{className:d.colorSwatch,color:B,onClick:k,size:"small"}),endAdornment:!V&&(0,n.jsx)(be.Z,{size:"small",className:d.iconButton,onClick:G,disabled:s,children:(0,n.jsx)(So.Z,{})})}}),(0,n.jsx)(Io.ZP,{open:q,anchorEl:h,onClose:z,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,n.jsx)(Mo,{alphaType:t,value:c,onChange:a,onEnterKey:z})})]})}function $r({colors:e,disabled:t=!1,onChange:s,readOnly:a=!1}){const[i,r]=(0,l.useState)(void 0),[c,d]=(0,l.useState)(void 0),p=(0,l.useCallback)(G=>{a||(r(G.currentTarget),d(void 0))},[a]),h=(0,l.useCallback)(G=>{a||(r(void 0),d(G.currentTarget))},[a]),f=(0,l.useCallback)(()=>{r(void 0),d(void 0)},[]),m=e?.[0]??"#000000",y=e?.[1]??"#FFFFFF",B=(0,de.Z)(m).isValid()?m:"#000000",k=(0,de.Z)(y).isValid()?y:"#FFFFFF",z=(0,P.Z)();return(0,n.jsxs)(X.Z,{direction:"row",alignItems:"center",position:"relative",paddingX:.75,style:{opacity:t?.5:1,pointerEvents:t?"none":"auto",background:`linear-gradient(to right, ${B}, ${k}), repeating-conic-gradient(transparent 0 90deg, ${z.palette.action.disabled} 90deg 180deg) top left/10px 10px repeat`},children:[(0,n.jsx)(Do,{color:B,onClick:p}),(0,n.jsx)(Ot.Z,{variant:"filled",size:"small",fullWidth:!0,value:`${m} / ${y}`,style:{visibility:"hidden"}}),(0,n.jsx)(Do,{color:k,onClick:h}),(0,n.jsx)(Io.ZP,{open:i!=null,anchorEl:i,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,n.jsx)(Mo,{value:m,alphaType:"alpha",onChange:G=>{s([G,y])},onEnterKey:f})}),(0,n.jsx)(Io.ZP,{open:c!=null,anchorEl:c,onClose:f,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"center"},children:(0,n.jsx)(Mo,{value:y,alphaType:"alpha",onChange:G=>{s([m,G])},onEnterKey:f})})]})}var Jr=o(28319),Ea=o(81428),Jn=o(41739),Os=o(51321),As=o(16003);const qr={ScrubPrecision:4},_r=(0,L.ZL)()(e=>({iconButton:{"&.MuiIconButton-edgeStart":{marginLeft:e.spacing(-.75),borderTopRightRadius:0,borderBottomRightRadius:0},"&.MuiIconButton-edgeEnd":{marginRight:e.spacing(-.75),borderTopLeftRadius:0,borderBottomLeftRadius:0}},textField:{".MuiInputBase-formControl.MuiInputBase-root":{paddingTop:0,paddingBottom:0},".MuiInputBase-input":{textAlign:"center",fontFamily:rt.R.MONOSPACE,cursor:"ew-resize","&::-webkit-outer-spin-button, &::-webkit-inner-spin-button":{appearance:"none",margin:0}},"@media (pointer: fine)":{".MuiIconButton-root":{visibility:"hidden"},"&:hover .MuiIconButton-root":{visibility:"visible"}}},textFieldReadonly:{".MuiInputBase-input":{cursor:"auto"}}}));function qn(e){const{classes:t,cx:s}=_r(),{value:a,iconDown:i,iconUp:r,step:c=1,min:d,max:p,onChange:h,disabled:f,readOnly:m,precision:y=100}=e,B=(0,l.useRef)(null),k=(0,l.useRef)(0),z=(0,As.Z)(a),G=Ea.Z(Number(e.placeholder))?Number(e.placeholder):void 0,q=(0,l.useCallback)(Z=>{if(f===!0||m===!0)return;const Ae=Z==null?void 0:Jn.Z(Z,d??Number.NEGATIVE_INFINITY,p??Number.POSITIVE_INFINITY);h(Ae!=null?Os.Z(Ae,y):Ae)},[f,m,d,p,h,y]),V=(0,l.useRef)(!1),me=(0,l.useCallback)(Z=>{V.current=!0,Z.currentTarget.setPointerCapture(Z.pointerId);const Ae=z.current??G??0;k.current=Ea.Z(Ae)?Ae:0},[z,G]),le=(0,l.useCallback)(Z=>{V.current=!1,Z.currentTarget.releasePointerCapture(Z.pointerId)},[]),oe=(0,l.useCallback)(Z=>{if(Z.buttons!==1||!V.current)return;Z.preventDefault(),Z.currentTarget.blur();const Ae=Z.shiftKey?10:1,nt=Math.sign(Z.movementX)*Math.pow(Math.abs(Z.movementX),1.5)*.1*c*Ae;k.current=Os.Z(k.current+nt,qr.ScrubPrecision),q(k.current)},[c,q]),te=B.current===document.activeElement?a:a!=null?Os.Z(a,y):void 0;return(0,n.jsx)(Ot.Z,{...e,value:te??"",onChange:Z=>{q(Z.target.value.length>0?Number(Z.target.value):void 0)},type:"number",className:s(t.textField,{[t.textFieldReadonly]:m}),inputProps:{ref:B,step:c,onPointerDown:me,onPointerUp:le,onPointerMove:oe},InputProps:{readOnly:m,startAdornment:(0,n.jsx)(be.Z,{className:t.iconButton,size:"small",edge:"start",tabIndex:-1,onClick:Z=>{q((a??G??0)-(Z.shiftKey?c*10:c))},children:i??(0,n.jsx)(yo.Z,{fontSize:"small"})}),endAdornment:(0,n.jsx)(be.Z,{className:t.iconButton,size:"small",edge:"end",tabIndex:-1,onClick:Z=>{q((a??G??0)+(Z.shiftKey?c*10:c))},children:r??(0,n.jsx)(Jr.Z,{fontSize:"small"})})}})}function el(e){const{disabled:t=!1,onChange:s,precision:a,readOnly:i=!1,step:r,value:c,min:d,max:p,placeholder:h}=e,f=(0,l.useCallback)((m,y)=>{const B=[...c??[0,0]];B[m]=y,s(B)},[s,c]);return(0,n.jsxs)(X.Z,{gap:.25,children:[(0,n.jsx)(qn,{size:"small",disabled:t,readOnly:i,variant:"filled",fullWidth:!0,precision:a,step:r,placeholder:h?.[0],value:c?.[0],min:d,max:p,onChange:m=>{f(0,m)}}),(0,n.jsx)(qn,{size:"small",disabled:t,readOnly:i,variant:"filled",fullWidth:!0,precision:a,step:r,placeholder:h?.[1],value:c?.[1],min:d,max:p,onChange:m=>{f(1,m)}})]})}function tl(e){const{disabled:t=!1,onChange:s,precision:a,readOnly:i=!1,step:r,value:c,min:d,max:p,placeholder:h}=e,f=(0,l.useCallback)((m,y)=>{const B=[...c??[0,0,0]];B[m]=y,s(B)},[s,c]);return(0,n.jsxs)(X.Z,{gap:.25,children:[(0,n.jsx)(qn,{size:"small",disabled:t,readOnly:i,variant:"filled",fullWidth:!0,precision:a,step:r,placeholder:h?.[0],value:c?.[0],min:d,max:p,onChange:m=>{f(0,m)}}),(0,n.jsx)(qn,{size:"small",disabled:t,readOnly:i,variant:"filled",fullWidth:!0,precision:a,step:r,placeholder:h?.[1],value:c?.[1],min:d,max:p,onChange:m=>{f(1,m)}}),(0,n.jsx)(qn,{size:"small",disabled:t,readOnly:i,variant:"filled",fullWidth:!0,precision:a,step:r,placeholder:h?.[2],value:c?.[2],min:d,max:p,onChange:m=>{f(2,m)}})]})}var nl=o(2784);const Fn=(0,$t.Z)(),Ca=(0,$t.Z)(),Bo=(0,L.ZL)()((e,t,s)=>{const a=e.palette.mode==="dark",i=a?"rgba(255, 255, 255, 0.09)":"rgba(0, 0, 0, 0.06)";return{autocomplete:{".MuiInputBase-root.MuiInputBase-sizeSmall":{paddingInline:0,paddingBlock:e.spacing(.3125)}},clearIndicator:{marginRight:e.spacing(-.25),opacity:e.palette.action.disabledOpacity,":hover":{background:"transparent",opacity:1}},error:{},fieldLabel:{color:e.palette.text.secondary,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},fieldWrapper:{minWidth:e.spacing(14),marginRight:e.spacing(.5),[`&.${s.error} .MuiInputBase-root, .MuiInputBase-root.${s.error}`]:{outline:`1px ${e.palette.error.main} solid`,outlineOffset:-1}},multiLabelWrapper:{display:"grid",gridTemplateColumns:"1fr auto",columnGap:e.spacing(.5),height:"100%",width:"100%",alignItems:"center",textAlign:"end"},pseudoInputWrapper:{borderRadius:e.shape.borderRadius,fontSize:"0.75em",backgroundColor:i,input:{height:"1.77em"},"&:hover":{backgroundColor:a?"rgba(255, 255, 255, 0.13)":"rgba(0, 0, 0, 0.09)","@media (hover: none)":{backgroundColor:i}},"&:focus-within":{backgroundColor:i}},styledToggleButtonGroup:{backgroundColor:e.palette.action.hover,gap:e.spacing(.25),overflowX:"auto","& .MuiToggleButtonGroup-grouped":{margin:e.spacing(.55),borderRadius:e.shape.borderRadius,paddingTop:0,paddingBottom:0,borderColor:"transparent !important",lineHeight:1.75,"&.Mui-selected":{background:e.palette.background.paper,borderColor:"transparent","&:hover":{borderColor:e.palette.action.active}},"&:not(:first-of-type)":{borderRadius:e.shape.borderRadius},"&:first-of-type":{borderRadius:e.shape.borderRadius}}}}});function sl({actionHandler:e,field:t,path:s}){const{classes:a,cx:i}=Bo();switch(t.input){case"autocomplete":return(0,n.jsx)(va.Z,{className:a.autocomplete,size:"small",freeSolo:!0,value:t.value,disabled:t.disabled,readOnly:t.readonly,ListboxComponent:zr.Z,ListboxProps:{dense:!0},renderOption:(r,c,{selected:d})=>(0,n.jsx)(Se.Z,{selected:d,...r,children:c}),componentsProps:{clearIndicator:{size:"small",className:a.clearIndicator}},clearIcon:(0,n.jsx)(So.Z,{fontSize:"small"}),renderInput:r=>(0,n.jsx)(Ot.Z,{...r,variant:"filled",size:"small",placeholder:t.placeholder}),onInputChange:(r,c,d)=>{d==="input"&&e({action:"update",payload:{path:s,input:"autocomplete",value:c}})},onChange:(r,c)=>{e({action:"update",payload:{path:s,input:"autocomplete",value:c??void 0}})},options:t.items});case"number":return(0,n.jsx)(qn,{size:"small",variant:"filled",value:t.value,disabled:t.disabled,readOnly:t.readonly,placeholder:t.placeholder,fullWidth:!0,max:t.max,min:t.min,precision:t.precision,step:t.step,onChange:r=>{e({action:"update",payload:{path:s,input:"number",value:r}})}});case"toggle":return(0,n.jsx)($n.Z,{className:a.styledToggleButtonGroup,fullWidth:!0,value:t.value??Fn,exclusive:!0,disabled:t.disabled,size:"small",onChange:(r,c)=>{c!=null&&t.readonly!==!0&&e({action:"update",payload:{path:s,input:"toggle",value:c===Fn?void 0:c}})},children:t.options.map(r=>(0,n.jsx)(Xt.Z,{value:(typeof r=="object"?r.value:r)??Fn,children:typeof r=="object"?r.label:r},(typeof r=="object"?r.value:r)??Fn))});case"string":return(0,n.jsx)(Ot.Z,{variant:"filled",size:"small",fullWidth:!0,disabled:t.disabled,value:t.value??"",placeholder:t.placeholder,InputProps:{readOnly:t.readonly},onChange:r=>{e({action:"update",payload:{path:s,input:"string",value:r.target.value}})}});case"boolean":return(0,n.jsxs)($n.Z,{className:a.styledToggleButtonGroup,fullWidth:!0,value:t.value??!1,exclusive:!0,disabled:t.disabled,size:"small",onChange:(r,c)=>{c!=null&&t.readonly!==!0&&e({action:"update",payload:{path:s,input:"boolean",value:c}})},children:[(0,n.jsx)(Xt.Z,{value:!1,children:"Off"}),(0,n.jsx)(Xt.Z,{value:!0,children:"On"})]});case"rgb":return(0,n.jsx)(xa,{alphaType:"none",disabled:t.disabled,readOnly:t.readonly,placeholder:t.placeholder,value:t.value?.toString(),onChange:r=>{e({action:"update",payload:{path:s,input:"rgb",value:r}})},hideClearButton:t.hideClearButton});case"rgba":return(0,n.jsx)(xa,{alphaType:"alpha",disabled:t.disabled,readOnly:t.readonly,placeholder:t.placeholder,value:t.value?.toString(),onChange:r=>{e({action:"update",payload:{path:s,input:"rgba",value:r}})}});case"messagepath":return(0,n.jsx)(X.Z,{className:a.pseudoInputWrapper,direction:"row",children:(0,n.jsx)(Wr.ZP,{path:t.value??"",disabled:t.disabled,readOnly:t.readonly,supportsMathModifiers:t.supportsMathModifiers,onChange:r=>{e({action:"update",payload:{path:s,input:"messagepath",value:r}})},validTypes:t.validTypes})});case"select":{const r=t.options.findIndex(f=>f.value===t.value),c=t.options[r],d=t.options.length===0;let p=t.value;c?p==null&&(p=Fn):p=Ca;const h=!c&&(!d||t.value!=null);return(0,n.jsxs)(Po.Z,{className:i({[a.error]:h}),size:"small",displayEmpty:!0,fullWidth:!0,disabled:t.disabled,readOnly:t.readonly,variant:"filled",value:p,renderValue:f=>{const m=t.value;for(const y of t.options)if(y.value===m)return y.label.trim();return m},onChange:f=>{e({action:"update",payload:{path:s,input:"select",value:f.target.value===Fn?void 0:f.target.value}})},MenuProps:{MenuListProps:{dense:!0}},children:[t.options.map(({label:f,value:m=Fn,disabled:y})=>(0,n.jsx)(Se.Z,{value:m,disabled:y,children:f},m)),d&&(0,n.jsx)(Se.Z,{disabled:!0,children:"No options"}),!c&&(0,n.jsx)(Se.Z,{style:{display:"none"},value:Ca})]})}case"gradient":return(0,n.jsx)($r,{colors:t.value,disabled:t.disabled,readOnly:t.readonly,onChange:r=>{e({action:"update",payload:{path:s,input:"gradient",value:r}})}});case"vec3":return(0,n.jsx)(tl,{step:t.step,placeholder:t.placeholder,value:t.value,precision:t.precision,disabled:t.disabled,readOnly:t.readonly,min:t.min,max:t.max,onChange:r=>{e({action:"update",payload:{path:s,input:"vec3",value:r}})}});case"vec2":return(0,n.jsx)(el,{step:t.step,value:t.value,placeholder:t.placeholder,precision:t.precision,disabled:t.disabled,readOnly:t.readonly,min:t.min,max:t.max,onChange:r=>{e({action:"update",payload:{path:s,input:"vec2",value:r}})}})}}function ol({field:e}){const{classes:t}=Bo();if(e.input==="vec2"){const s=e.labels??["X","Y"];return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:t.multiLabelWrapper,children:[(0,n.jsx)(ge.Z,{title:e.label,variant:"subtitle2",color:"text.secondary",noWrap:!0,flex:"auto",children:e.label}),s.map((a,i)=>(0,n.jsx)(ge.Z,{title:e.label,variant:"subtitle2",color:"text.secondary",noWrap:!0,style:{gridColumn:i===0?"span 1":"2 / span 1"},flex:"auto",children:a},a))]})})}else if(e.input==="vec3"){const s=e.labels??["X","Y","Z"];return(0,n.jsx)(n.Fragment,{children:(0,n.jsxs)("div",{className:t.multiLabelWrapper,children:[(0,n.jsx)(ge.Z,{title:e.label,variant:"subtitle2",color:"text.secondary",noWrap:!0,flex:"auto",children:e.label}),s.map((a,i)=>(0,n.jsx)(ge.Z,{title:e.label,variant:"subtitle2",color:"text.secondary",noWrap:!0,style:{gridColumn:i===0?"span 1":"2 / span 1"},flex:"auto",children:a},a))]})})}else return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(ge.Z,{className:t.fieldLabel,title:e.help??e.label,variant:"subtitle2",children:e.label})})}function al({actionHandler:e,field:t,path:s}){const i=.75+2*(Math.min(s.length,4)-1),{classes:r,cx:c}=Bo();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(X.Z,{direction:"row",alignItems:"center",justifyContent:"flex-end",gap:.5,paddingLeft:i,fullHeight:!0,children:[t.error&&(0,n.jsx)(H.Z,{arrow:!0,placement:"top",title:(0,n.jsx)(ge.Z,{variant:"subtitle2",children:t.error}),children:(0,n.jsx)(To.Z,{color:"error",fontSize:"small"})}),(0,n.jsx)(ol,{field:t})]}),(0,n.jsx)("div",{className:c(r.fieldWrapper,{[r.error]:t.error!=null}),children:(0,n.jsx)(sl,{actionHandler:e,field:t,path:s})}),(0,n.jsx)(X.Z,{paddingBottom:.25,style:{gridColumn:"span 2"}})]})}const wo=nl.memo(al);var Ro=o(48105),jo=o(96715),_n=o(65643),il=o(89507),Ns=o(42713),rl=o(29754),ll=o(57525),Sa=o(33209),Ta=o(60705),dn=o(8220),Lo=o(83993),Un=o(82056),cl=o(14118),Zs=o(93553),dl=o(55505),ul=o(29113),pl=o(66177),fl=o(6163),hl=o(47743),gl=o(80516),ml=o(46772),yl=o(3602),vl=o(61024),Al=o(88182),bl=o(14734),xl=o(83808),El=o(66714),Cl=o(3567),Sl=o(97730),Tl=o(31384),Pl=o(57156),Il=o(77653),Ml=o(5918),Dl=o(21262),Bl=o(23324),wl=o(39773),Rl=o(48882),jl=o(13264),Ll=o(16522),Ol=o(78393),Nl=o(17713),Zl=o(91316),kl=o(37727),Fl=o(26029),Ul=o(6377),zl=o(46309),Wl=o(81198),Gl=o(10212);const Oo={Add:Zs.Z,Addchart:dl.Z,Background:El.Z,Camera:Bl.Z,Cells:zl.Z,Check:Ns.Z,Circle:pl.Z,Clear:bo.Z,Clock:cl.Z,Collapse:Fl.Z,Cube:Wl.Z,Delete:fl.Z,Expand:Ul.Z,Flag:gl.Z,Folder:ml.Z,FolderOpen:yl.Z,Grid:vl.Z,Hive:Al.Z,ImageProjection:Gl.Z,Map:Cl.Z,Move:Dl.Z,MoveDown:Sl.Z,MoveUp:Tl.Z,NorthWest:Pl.Z,Note:Ml.Z,NoteFilled:Il.Z,Points:ul.Z,PrecisionManufacturing:wl.Z,Radar:Rl.Z,Settings:jl.Z,Shapes:bl.Z,Share:Ll.Z,SouthEast:Ol.Z,Star:Nl.Z,Timeline:Zl.Z,Topic:kl.Z,Walk:hl.Z,World:xl.Z};function Ql({actions:e,onSelectAction:t}){const[s,a]=(0,l.useState)(void 0),i=Boolean(s),r=p=>{a(p.currentTarget)},c=p=>{t(p),a(void 0)},d=e.some(p=>p.type==="action"&&p.icon);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(be.Z,{title:"More actions","aria-controls":i?"node-actions-menu":void 0,"aria-haspopup":"true","aria-expanded":i?"true":void 0,onClick:r,"data-testid":"node-actions-menu-button",size:"small",children:(0,n.jsx)(Co.Z,{fontSize:"small"})}),(0,n.jsx)(ve.Z,{id:"basic-menu",anchorEl:s,open:i,onClose:()=>{a(void 0)},MenuListProps:{"aria-label":"node actions button",dense:!0},children:e.map((p,h)=>{if(p.type==="divider")return(0,n.jsx)(Ce.Z,{variant:d?"inset":"fullWidth"},`divider_${h}`);const f=p.icon?Oo[p.icon]:void 0;return(0,n.jsxs)(Se.Z,{onClick:()=>{c(p.id)},children:[f&&(0,n.jsx)(Lo.Z,{children:(0,n.jsx)(f,{fontSize:"small"})}),(0,n.jsx)(Un.Z,{inset:!f&&d,disableTypography:!0,children:p.label})]},p.id)})})]})}var es=o(41518);const Yl=(0,L.ZL)()(e=>({checkbox:{borderRadius:e.shape.borderRadius,padding:e.spacing(1),"&:hover":{backgroundColor:e.palette.action.hover}},checkboxSizeSmall:{padding:e.spacing(.625)}}));function Hl(e){const{className:t,onChange:s,...a}=e,{classes:i,cx:r}=Yl(),c=(d,p)=>{s?.(d,p),d.currentTarget.blur()};return(0,n.jsx)(es.Z,{className:r(t,i.checkbox,{[i.checkboxSizeSmall]:e.size==="small"}),onChange:c,...a,title:"Toggle visibility",icon:(0,n.jsx)(He.Z,{fontSize:"small",viewBox:"0 0 16 16",color:"disabled",children:(0,n.jsx)("path",{fill:"currentColor",d:"M13.508 7.801c.556-.527 1.036-1.134 1.422-1.801h-1.185C12.48 7.814 10.378 9 8 9 5.622 9 3.52 7.814 2.254 6H1.07c.386.667.866 1.274 1.421 1.801L.896 9.396l.708.707L3.26 8.446c.71.523 1.511.932 2.374 1.199l-.617 2.221.964.268.626-2.255C7.06 9.96 7.525 10 8 10c.475 0 .94-.041 1.392-.12l.626 2.254.964-.268-.617-2.221c.863-.267 1.663-.676 2.374-1.2l1.657 1.658.708-.707-1.595-1.595z",fillRule:"nonzero"})}),checkedIcon:(0,n.jsx)(He.Z,{fontSize:"small",viewBox:"0 0 16 16",children:(0,n.jsxs)("g",{fill:"currentColor",children:[(0,n.jsx)("path",{d:"M8 10c1.105 0 2-.895 2-2 0-1.105-.895-2-2-2-1.104 0-2 .895-2 2 0 1.105.896 2 2 2z",fillRule:"nonzero"}),(0,n.jsx)("path",{d:"M8 4c2.878 0 5.378 1.621 6.635 4-1.257 2.379-3.757 4-6.635 4-2.878 0-5.377-1.621-6.635-4C2.623 5.621 5.122 4 8 4zm0 7c-2.3 0-4.322-1.194-5.478-3C3.678 6.194 5.7 5 8 5c2.3 0 4.322 1.194 5.479 3C12.322 9.806 10.3 11 8 11z",fillRule:"evenodd"})]})})})}var Pa=o(28239);function Ia(e){return Pa.Z(Object.entries(e).filter(t=>t[1]!=null),t=>t[1].order)}function Ma(e,t){const s={};return Object.entries(e).forEach(([a,i])=>{if(i==null)return;const r=Ma(i.children??{},t);Object.values(r).length>0&&(s[a]={...i,children:r}),(i.label??a).toLocaleLowerCase().includes(t.toLocaleLowerCase())&&(s[a]=i)}),s}var Vl=o(2784);const Kl=35,Da=(0,L.ZL)()(e=>({actionButton:{padding:e.spacing(.5)},editNameField:{font:"inherit",gridColumn:"span 2",width:"100%",".MuiInputBase-input":{fontSize:"0.75rem",padding:e.spacing(.75,1)}},focusedNode:{animation:`
      ${(0,Sa.F4)`
      from {
        background-color: ${(0,de.Z)(e.palette.primary.main).setAlpha(.3).toRgbString()};
      }
      to {
        background-color: transparent;
      }`}
      0.5s ease-in-out
    `},fieldPadding:{gridColumn:"span 2",height:e.spacing(.5)},iconWrapper:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",top:"50%",left:0,transform:"translate(-97.5%, -50%)"},nodeHeader:{display:"flex",gridColumn:"span 2",paddingRight:e.spacing(.5),minHeight:Kl,"@media (pointer: fine)":{".MuiCheckbox-root":{visibility:"visible"},"[data-node-function=edit-label]":{visibility:"hidden"},"&:hover":{backgroundColor:e.palette.action.hover,".MuiCheckbox-root":{visibility:"visible"},"[data-node-function=edit-label]":{visibility:"visible"}}}},nodeHeaderVisible:{"@media (pointer: fine)":{".MuiCheckbox-root":{visibility:"hidden"},"&:hover":{".MuiCheckbox-root":{visibility:"visible"}}}},nodeHeaderToggle:{display:"grid",alignItems:"center",gridTemplateColumns:"auto 1fr auto",opacity:.6,position:"relative",userSelect:"none",width:"100%"},nodeHeaderToggleHasProperties:{cursor:"pointer"},nodeHeaderToggleVisible:{opacity:1},errorTooltip:{whiteSpace:"pre-line",maxHeight:"15vh",overflowY:"auto"}}));function Xl({expanded:e}){const{classes:t}=Da(),s=e?_n.Z:il.Z;return(0,n.jsx)("div",{className:t.iconWrapper,children:(0,n.jsx)(s,{})})}const No=Kt()((e,t)=>[...e,t]),$l=e=>[{label:e("listAll"),value:"all"},{label:e("listVisible"),value:"visible"},{label:e("listInvisible"),value:"invisible"}];function Jl(e){return e.visible!==!1}function ql(e){return e.visible!==!0}const _l=e=>({input:"select",label:e("filterList"),help:e("filterListHelp"),options:$l(e)});function ec(e){const{actionHandler:t,defaultOpen:s=!0,filter:a,focusedPath:i,settings:r={}}=e,[c,d]=(0,Ta.x)({editing:!1,focusedPath:void 0,open:s,visibilityFilter:"all"}),{t:p}=(0,ee.$G)("settingsEditor"),{classes:h,cx:f,theme:m}=Da(),y=e.path.length,B=e.settings?.visible!=null,k=e.settings?.visible!==!1,z=e.settings?.enableVisibilityFilter===!0,G=Ge=>{Ge.action==="update"&&Ge.payload.input==="select"&&d(gt=>{gt.visibilityFilter=Ge.payload.value})},q=()=>{t({action:"update",payload:{input:"boolean",path:[...e.path,"visible"],value:!k}})},V=Ge=>{t({action:"perform-node-action",payload:{id:Ge,path:e.path}})},me=U.Z(i,e.path);(0,l.useEffect)(()=>{i!=null&&U.Z(e.path,i.slice(0,e.path.length))&&d(gt=>{gt.open=!0}),me&&Ae.current?.scrollIntoView()},[i,me,e.path,d]);const{fields:le,children:oe}=r,te=oe!=null&&Object.keys(oe).length>0,Z=le!=null||te,Ae=(0,l.useRef)(null),nt=(0,dn.Z)(Object.entries(le??{}),([Ge,gt])=>gt?(0,n.jsx)(wo,{field:gt,path:No(e.path,Ge),actionHandler:t},Ge):void 0),xt=c.visibilityFilter==="visible"?Jl:c.visibilityFilter==="invisible"?ql:void 0,Et=(0,dn.Z)(Ia(oe??{}),([Ge,gt])=>!xt||xt(gt)?(0,n.jsx)(Ba,{actionHandler:t,defaultOpen:gt.defaultExpansionState!=="collapsed",filter:a,focusedPath:i,settings:gt,path:No(e.path,Ge)},Ge):void 0),Pt=r.icon?Oo[r.icon]:void 0,vt=(0,l.useCallback)(Ge=>{r.renamable===!0&&t({action:"update",payload:{path:[...e.path,"label"],input:"string",value:Ge.target.value}})},[t,e.path,r.renamable]),Rt=(0,l.useCallback)(()=>{d(Ge=>{Ge.editing=!Ge.editing})},[d]),lt=(0,l.useCallback)(()=>{d(Ge=>{Ge.editing||(Ge.open=!Ge.open)})},[d]),mt=(0,l.useCallback)(Ge=>{(Ge.key==="Enter"||Ge.key==="Escape")&&Rt()},[Rt]),[Dt,Ct]=(0,l.useMemo)(()=>ll.Z(r.actions,Ge=>Ge.type==="action"&&Ge.display==="inline"),[r.actions]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:f(h.nodeHeader,{[h.focusedNode]:me,[h.nodeHeaderVisible]:k}),ref:Ae,children:[(0,n.jsxs)("div",{className:f(h.nodeHeaderToggle,{[h.nodeHeaderToggleHasProperties]:Z,[h.nodeHeaderToggleVisible]:k}),style:{marginLeft:m.spacing(.75+2*y)},onClick:lt,"data-testid":`settings__nodeHeaderToggle__${e.path.join("-")}`,children:[Z&&(0,n.jsx)(Xl,{expanded:c.open}),Pt&&(0,n.jsx)(Pt,{fontSize:"small",color:"inherit",style:{marginRight:m.spacing(.5),opacity:.8}}),c.editing?(0,n.jsx)(Ot.Z,{className:h.editNameField,autoFocus:!0,variant:"filled",onChange:vt,value:r.label,onBlur:Rt,onKeyDown:mt,onFocus:Ge=>{Ge.target.select()},InputProps:{endAdornment:(0,n.jsx)(be.Z,{className:h.actionButton,title:"Rename","data-node-function":"edit-label",color:"primary",onClick:Ge=>{Ge.stopPropagation(),Rt()},children:(0,n.jsx)(Ns.Z,{fontSize:"small"})})}}):(0,n.jsx)(ge.Z,{noWrap:!0,flex:"auto",variant:"subtitle2",fontWeight:y<2?600:400,color:k?"text.primary":"text.disabled",children:(0,n.jsx)(xo,{text:r.label??p("general"),highlight:a})})]}),(0,n.jsxs)(X.Z,{alignItems:"center",direction:"row",children:[r.renamable===!0&&!c.editing&&(0,n.jsx)(be.Z,{className:h.actionButton,title:"Rename","data-node-function":"edit-label",color:"primary",onClick:Ge=>{Ge.stopPropagation(),Rt()},children:(0,n.jsx)(rl.Z,{fontSize:"small"})}),r.visible!=null&&(0,n.jsx)(Hl,{size:"small",checked:k,onChange:q,style:{opacity:B?1:0},disabled:!B}),Dt.map(Ge=>{const gt=Ge.icon?Oo[Ge.icon]:void 0,Jt=()=>{t({action:"perform-node-action",payload:{id:Ge.id,path:e.path}})};return gt?(0,n.jsx)(be.Z,{onClick:Jt,title:Ge.label,className:h.actionButton,children:(0,n.jsx)(gt,{fontSize:"small"})},Ge.id):(0,n.jsx)($.Z,{onClick:Jt,size:"small",color:"inherit",className:h.actionButton,children:Ge.label},Ge.id)}),e.settings?.error&&(0,n.jsx)(H.Z,{arrow:!0,title:(0,n.jsx)(ge.Z,{variant:"subtitle2",className:h.errorTooltip,children:e.settings.error}),children:(0,n.jsx)(be.Z,{size:"small",color:"error",children:(0,n.jsx)(To.Z,{fontSize:"small"})})}),Ct.length>0&&(0,n.jsx)(Ql,{actions:Ct,onSelectAction:V})]})]}),c.open&&nt.length>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{className:h.fieldPadding}),nt,(0,n.jsx)("div",{className:h.fieldPadding})]}),c.open&&z&&te&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.Z,{paddingBottom:.5,style:{gridColumn:"span 2"}}),(0,n.jsx)(wo,{field:{..._l(p),value:c.visibilityFilter},path:No(e.path,"visibilityFilter"),actionHandler:G},"visibilityFilter")]}),c.open&&Et,y===1&&(0,n.jsx)(Ce.Z,{style:{gridColumn:"span 2"}})]})}const Ba=Vl.memo(ec),tc=(0,L.ZL)()(e=>({appBar:{top:0,marginRight:1,zIndex:e.zIndex.appBar,padding:e.spacing(.5),position:"sticky",backgroundColor:e.palette.background.paper},fieldGrid:{display:"grid",gridTemplateColumns:"minmax(20%, 20ch) auto",columnGap:e.spacing(1)},textField:{".MuiOutlinedInput-notchedOutline":{border:"none"}},startAdornment:{display:"flex"}})),nc=Kt()(e=>[e]);function wa({variant:e,settings:t}){const{classes:s}=tc(),{actionHandler:a,focusedPath:i}=t,[r,c]=(0,l.useState)(""),{t:d}=(0,ee.$G)("settingsEditor"),p=(0,l.useMemo)(()=>r.length>0?Ma(t.nodes,r):t.nodes,[t.nodes,r]),h=(0,l.useMemo)(()=>Ia(p),[p]),{selectedPanelIds:f}=(0,bt.iy)(),m=(0,l.useMemo)(()=>f.length===1?f[0]:void 0,[f]),y=(0,Ro.v)(),B=(0,l.useMemo)(()=>m!=null?(0,Be.$k)(m):void 0,[m]),k=(0,l.useMemo)(()=>B!=null?y.getPanelByType(B):void 0,[y,B]),[z,G]=(0,Eo.Um)(m),q=(0,jo.J)(te=>m?te.defaultTitles[m]:void 0),V=typeof z?.[Be.xS]=="string"?z[Be.xS]:void 0,me=(0,l.useMemo)(()=>({input:"string",label:d("title"),placeholder:q??k?.title,value:V}),[V,q,k?.title,d]),le=(0,l.useCallback)(te=>{te.action==="update"&&te.payload.path[0]===Be.xS&&G({[Be.xS]:te.payload.value})},[G]),oe=r.length===0&&k?.hasCustomToolbar!==!0;return(0,n.jsxs)(X.Z,{fullHeight:!0,children:[t.enableFilter===!0&&(0,n.jsx)("header",{className:s.appBar,children:(0,n.jsx)(Ot.Z,{id:`${e}-settings-filter`,variant:"filled",onChange:te=>{c(te.target.value)},value:r,className:s.textField,fullWidth:!0,placeholder:d("searchPanelSettings"),inputProps:{"data-testid":`${e}-settings-filter-input`},InputProps:{size:"small",startAdornment:(0,n.jsx)("label",{className:s.startAdornment,htmlFor:"settings-filter",children:(0,n.jsx)(js.Z,{fontSize:"small"})}),endAdornment:r&&(0,n.jsx)(be.Z,{size:"small",title:d("clearSearch"),onClick:()=>{c("")},edge:"end",children:(0,n.jsx)(So.Z,{fontSize:"small"})})}})}),(0,n.jsxs)("div",{className:s.fieldGrid,children:[oe&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(X.Z,{paddingBottom:.5,style:{gridColumn:"span 2"}}),(0,n.jsx)(wo,{field:me,path:[Be.xS],actionHandler:le})]}),h.map(([te,Z])=>(0,n.jsx)(Ba,{actionHandler:a,defaultOpen:Z.defaultExpansionState!=="collapsed",filter:r,focusedPath:i,path:nc(te),settings:Z},te))]})]})}var sc=o(50334),oc=o(16554),Zo=o(90546),zn=o(76217),ac=o(55433);const ic=(0,L.ZL)()(e=>({textarea:{[`.${oc.Z.root}`]:{backgroundColor:e.palette.action.hover,fontFamily:rt.R.MONOSPACE,maxHeight:"60vh",overflowY:"auto",padding:e.spacing(.25)}}}));function rc({initialValue:e={},onChange:t,onRequestClose:s,title:a}){const{classes:i}=ic(),[r,c]=(0,l.useState)(JSON.stringify(e,void 0,2)??""),{decodedValue:d,error:p}=(0,l.useMemo)(()=>{try{return{decodedValue:JSON.parse(r===""?"{}":r),error:void 0}}catch(y){return{decodedValue:void 0,error:y}}},[r]),h=(0,l.useCallback)(()=>{t(d),s()},[d,t,s]),f=(0,l.useCallback)(()=>{(0,ac.W)(r,"layout.json")},[r]),m=(0,l.useCallback)(()=>r,[r]);return(0,n.jsxs)(Gt.Z,{open:!0,onClose:s,maxWidth:"sm",fullWidth:!0,children:[(0,n.jsxs)(X.Z,{direction:"row",justifyContent:"space-between",alignItems:"flex-start",paddingX:3,paddingTop:2,children:[(0,n.jsx)(X.Z,{children:(0,n.jsx)(ge.Z,{variant:"h4",fontWeight:600,gutterBottom:!0,children:a})}),(0,n.jsx)(be.Z,{onClick:s,edge:"end",children:(0,n.jsx)(et.Z,{})})]}),(0,n.jsx)(Kn.Z,{children:(0,n.jsx)(Ot.Z,{className:i.textarea,fullWidth:!0,multiline:!0,rows:10,value:r,onChange:y=>{c(y.target.value)},autoFocus:!0,error:p!=null,helperText:p?"The JSON provided is invalid.":" ",inputProps:{"data-testid":"share-json-input"},FormHelperTextProps:{variant:"standard"},spellCheck:!1})}),(0,n.jsxs)(Sn.Z,{children:[(0,n.jsxs)(X.Z,{direction:"row",gap:1,children:[(0,n.jsx)(be.Z,{onClick:f,title:"Download","aria-label":"Download",children:(0,n.jsx)(ms.oVw,{})}),(0,n.jsx)(Zo.Z,{color:"default",getText:m}),(0,n.jsx)(zn.Z,{activeColor:"error",onClick:()=>{c("{}")},title:"Clear","aria-label":"Clear",icon:(0,n.jsx)(sc.Z,{})})]}),(0,n.jsx)(X.Z,{flex:"auto"}),(0,n.jsx)($.Z,{disabled:p!=null,variant:"contained",size:"large",onClick:h,children:"Apply"})]})]})}var Mn=o(11701);const lc=e=>typeof e.selectedLayout?.data?.layout=="string"?e.selectedLayout.data.layout:void 0,cc=e=>e.incrementSequenceNumber,dc=Object.freeze({actionHandler:()=>{},nodes:{}});function uc({selectedPanelIdsForTests:e}){const{t}=(0,ee.$G)("panelSettings"),s=(0,bt.NS)(lc),{selectedPanelIds:a,setSelectedPanelIds:i,selectAllPanels:r}=(0,bt.iy)(),c=e??a;(0,l.useEffect)(()=>{c.length===0&&s!=null&&r()},[r,c,s]);const d=(0,l.useMemo)(()=>c.length===1?c[0]:void 0,[c]);(0,Nr.Z)(()=>{d!=null&&i([])});const p=(0,Ro.v)(),{getCurrentLayoutState:h,savePanelConfigs:f}=(0,bt._B)(),m=(0,l.useMemo)(()=>d!=null?(0,Be.$k)(d):void 0,[d]),y=(0,l.useMemo)(()=>m!=null?p.getPanelByType(m):void 0,[p,m]),B=(0,jo.J)(cc),[k,z]=(0,l.useState)(!1),G=(0,l.useMemo)(()=>{const te=h().selectedLayout?.data?.configById;return d==null||!k||!te?null:(0,n.jsx)(rc,{onRequestClose:()=>{z(!1)},initialValue:te[d]??{},onChange:Z=>{f({configs:[{id:d,config:Z,override:!0}]}),B(d)},title:t("importOrExportSettings")})},[h,d,k,f,B,t]),[q]=(0,Eo.Um)(d),V=(0,jo.J)(te=>d?te.settingsTrees[d]:void 0),me=(0,l.useCallback)(()=>{d&&(f({configs:[{id:d,config:{},override:!0}]}),B(d))},[B,f,d]);if(d==null)return(0,n.jsx)(Xn.Z,{children:t("selectAPanelToEditItsSettings")});if(!q)return(0,n.jsx)(Xn.Z,{children:t("loadingPanelSettings")});const le=y!=null&&y.hasCustomToolbar!==!0,oe=y?.title??t("unknown");return(0,n.jsxs)(X.Z,{fullHeight:!0,flex:"auto",gap:1,children:[G,(0,n.jsx)(X.Z,{gap:2,justifyContent:"flex-start",flex:"auto",children:(0,n.jsxs)(X.Z,{flex:"auto",children:[V&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(X.Z,{paddingLeft:.75,direction:"row",alignItems:"center",justifyContent:"space-between",children:[(0,n.jsx)(ge.Z,{variant:"subtitle2",children:t("panelName",{title:oe})}),(0,n.jsx)(Fr,{fontSize:"small",allowShare:m!==Mn.bm,onReset:me,onShare:()=>{z(!0)}},1)]}),(0,n.jsx)(Ce.Z,{})]}),V!=null||le?(0,n.jsx)(wa,{variant:"panel",settings:V??dc},d):(0,n.jsx)(X.Z,{flex:"auto",alignItems:"center",justifyContent:"center",paddingX:1,children:(0,n.jsx)(ge.Z,{variant:"body2",color:"text.secondary",align:"center",children:t("panelDoesNotHaveSettings")})})]})})]})}var ks=o(93004),Fs=o(69802),ne=o(44668),pc=o(63079),Ra=o(48982),Wn=o(50553),ja=o(51160),fc=o(96411),La=o(66088),hc="../../packages/studio-base/src/components/CreateEventDialog.tsx";const gc=ae.ZP.getLogger(hc),mc=(0,Sa.F4)`
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
`,yc=(0,L.ZL)()((e,t,s)=>({grid:{alignItems:"center",display:"grid",gridTemplateColumns:"1fr 1fr auto",gap:e.spacing(1),overflow:"auto",alignContent:"flex-start"},row:{animation:`${mc} 0.2s ease-in-out`,display:"contents"},toggleButton:{border:"none",lineHeight:1},toggleButtonGroup:{marginRight:e.spacing(-1),gap:e.spacing(.25),[`.${s.toggleButton}`]:{borderRadius:`${e.shape.borderRadius}px !important`,marginLeft:"0px !important",borderLeft:"none !important"}}})),vc=e=>e.playerState.activeData?.currentTime,Ac=e=>e.refreshEvents,bc=e=>e.deviceId;function xc(e){const{onClose:t}=e,{classes:s}=yc(),a=O(Ac),i=(0,Qe.An)(vc),[r,c]=(0,Ta.x)({startTime:i?(0,ne.toDate)(i):void 0,duration:0,durationUnit:"sec",metadataEntries:[{key:"",value:""}]}),d=(0,l.useCallback)((le,oe,te)=>{c(Z=>{const Ae=Z.metadataEntries[le];Ae&&(Ae[oe]=te,le===Z.metadataEntries.length-1&&Ae.key.length>0&&Ae.value.length>0&&Z.metadataEntries.push({key:"",value:""}))})},[c]),{formatTime:p}=(0,at.v)(),{createEvent:h}=(0,ze.b)(),f=fc.Z(r.metadataEntries,le=>le.key),m=Object.entries(f).find(([le,oe])=>le.length>0&&oe>1),y=r.startTime!=null&&r.duration!=null&&!m,B=O(bc),[k,z]=(0,La.Z)(async()=>{if(r.startTime==null||r.duration==null||B==null)return;const le=r.metadataEntries.filter(te=>te.key.length>0&&te.value.length>0),oe=Object.fromEntries(le.map(te=>[te.key.trim(),te.value.trim()]));await h?.({deviceId:B,timestamp:r.startTime.toISOString(),durationNanos:(0,ne.toNanoSec)(r.durationUnit==="sec"?{sec:r.duration,nsec:0}:{sec:0,nsec:r.duration}).toString(),metadata:oe}),t(),a()},[h,B,r,t,a]),G=(0,l.useCallback)(le=>{le.key==="Enter"&&z().catch(oe=>{gc.error(oe)})},[z]),q=(0,l.useCallback)(le=>{c(oe=>{oe.metadataEntries.splice(le+1,0,{key:"",value:""})})},[c]),V=(0,l.useCallback)(le=>{c(oe=>{oe.metadataEntries.length>1&&oe.metadataEntries.splice(le,1)})},[c]),me=i?p(i):"-";return(0,n.jsxs)(Gt.Z,{open:!0,onClose:t,fullWidth:!0,maxWidth:"sm",children:[(0,n.jsx)(X.Z,{paddingX:3,paddingTop:2,children:(0,n.jsx)(ge.Z,{variant:"h2",children:"Create event"})}),(0,n.jsx)(X.Z,{paddingX:3,paddingTop:2,children:(0,n.jsxs)("div",{className:s.grid,children:[(0,n.jsxs)(Ra.Z,{children:[(0,n.jsx)(Wn.Z,{children:"Start Time"}),(0,n.jsx)(ge.Z,{paddingY:1,children:me})]}),(0,n.jsx)(Ot.Z,{value:r.duration??"",fullWidth:!0,label:"Duration",onChange:le=>{const oe=Number(le.currentTarget.value);c(te=>({...te,duration:oe>0?oe:void 0}))},type:"number",InputProps:{endAdornment:(0,n.jsxs)($n.Z,{className:s.toggleButtonGroup,size:"small",exclusive:!0,value:r.durationUnit,onChange:(le,oe)=>{r.durationUnit!==oe&&c(te=>({...te,durationUnit:oe}))},children:[(0,n.jsx)(Xt.Z,{className:s.toggleButton,tabIndex:-1,value:"sec",children:"sec"}),(0,n.jsx)(Xt.Z,{className:s.toggleButton,tabIndex:-1,value:"nsec",children:"nsec"})]})}}),(0,n.jsxs)(ja.Z,{style:{visibility:"hidden"},children:[(0,n.jsx)(be.Z,{tabIndex:-1,"data-testid":"add",children:(0,n.jsx)(Zs.Z,{})}),(0,n.jsx)(be.Z,{tabIndex:-1,children:(0,n.jsx)(Zs.Z,{})})]})]})}),(0,n.jsxs)(X.Z,{paddingX:3,paddingTop:2,children:[(0,n.jsx)(Wn.Z,{children:"Metadata"}),(0,n.jsx)("div",{className:s.grid,children:r.metadataEntries.map(({key:le,value:oe},te)=>{const Z=((le.length>0?f[le]:void 0)??0)>1;return(0,n.jsxs)("div",{className:s.row,children:[(0,n.jsx)(Ot.Z,{fullWidth:!0,value:le,autoFocus:te===0,placeholder:"Key (string)",error:Z,onKeyDown:G,onChange:Ae=>{d(te,"key",Ae.currentTarget.value)}}),(0,n.jsx)(Ot.Z,{fullWidth:!0,value:oe,placeholder:"Value (string)",error:Z,onKeyDown:G,onChange:Ae=>{d(te,"value",Ae.currentTarget.value)}}),(0,n.jsxs)(ja.Z,{children:[(0,n.jsx)(be.Z,{tabIndex:-1,onClick:()=>{q(te)},children:(0,n.jsx)(Zs.Z,{})}),(0,n.jsx)(be.Z,{tabIndex:-1,onClick:()=>{V(te)},style:{visibility:r.metadataEntries.length>1?"visible":"hidden"},children:(0,n.jsx)(pc.Z,{})})]})]},te)})})]}),(0,n.jsxs)(Sn.Z,{children:[(0,n.jsx)($.Z,{variant:"outlined",size:"large",onClick:t,children:"Cancel"}),(0,n.jsxs)($.Z,{variant:"contained",size:"large",onClick:z,disabled:!y||k.loading,children:[k.loading&&(0,n.jsx)(on.Z,{color:"inherit",size:"1rem",style:{marginRight:"0.5rem"}}),"Create Event"]})]}),m&&(0,n.jsxs)(Nn.Z,{severity:"error",children:["Duplicate key ",m[0]]}),k.error?.message&&(0,n.jsx)(Nn.Z,{severity:"error",children:k.error.message})]})}var ts=o(90454);const Ec=(0,L.ZL)()({numericValue:{fontFeatureSettings:`${rt.R.SANS_SERIF_FEATURE_SETTINGS}, "zero"`}});function Cc(e){const{classes:t}=Ec(),{disableDate:s=!1,horizontal:a=!1,time:i,title:r}=e,{formatDate:c,formatTime:d}=(0,at.v)(),p=(0,l.useMemo)(()=>d(i),[i,d]),h=(0,l.useMemo)(()=>(0,Ve.Eo)(i),[i]),f=(0,l.useMemo)(()=>c(i),[c,i]);return(0,Ve.D3)(i)?(0,n.jsxs)(X.Z,{title:r,gap:a?0:1,flexWrap:a?"nowrap":"wrap",direction:a?"row":"column",alignItems:a?"center":"flex-start",justifyContent:a?"flex-start":"center",children:[!s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ge.Z,{className:t.numericValue,noWrap:!0,fontWeight:a?void 0:700,variant:"inherit",children:f}),a&&(0,n.jsx)(n.Fragment,{children:"\xA0"})]}),(0,n.jsx)(X.Z,{direction:"row",alignItems:"center",flexShrink:0,gap:.5,children:(0,n.jsx)(ge.Z,{variant:"inherit",className:t.numericValue,children:p})})]}):(0,n.jsx)(X.Z,{title:r,direction:"row",alignItems:"center",flexGrow:0,children:(0,n.jsx)(ge.Z,{className:t.numericValue,variant:"inherit",children:h})})}var Sc=o(27332);function Tc(e){const{text:t}=e;return(0,n.jsx)(n.Fragment,{children:t.split(`
`).map(s=>(0,n.jsx)(Oe,{text:s},s))})}var Pc=o(2784);const Ic=(0,L.ZL)()({overline:{opacity:.6},numericValue:{fontFeatureSettings:`${rt.R.SANS_SERIF_FEATURE_SETTINGS}, "zero"`}}),Mc=e=>e.playerState.activeData?.startTime,Dc=e=>e.playerState.activeData?.endTime,Bc=e=>e.playerState.name,wc=({playerState:e})=>e.presence,Rc=e=>e.seekPlayback;function jc(e){const{disableSource:t=!1,durationRef:s,endTimeRef:a,playerName:i,playerPresence:r,startTime:c}=e,{classes:d}=Ic(),{t:p}=(0,ee.$G)("dataSourceInfo"),h=e.isLiveConnection;return(0,n.jsxs)(X.Z,{gap:1.5,children:[!t&&(0,n.jsxs)(X.Z,{children:[(0,n.jsx)(ge.Z,{className:d.overline,display:"block",variant:"overline",children:p("currentSource")}),r===De.m.INITIALIZING?(0,n.jsx)(ge.Z,{variant:"inherit",children:(0,n.jsx)(ts.Z,{animation:"wave",width:"40%"})}):r===De.m.RECONNECTING?(0,n.jsx)(ge.Z,{variant:"inherit",children:p("waitingForConnection")}):i?(0,n.jsx)(ge.Z,{variant:"inherit",component:"span",children:(0,n.jsx)(Tc,{text:i})}):(0,n.jsx)(ge.Z,{className:d.numericValue,variant:"inherit",children:"\u2014"})]}),(0,n.jsxs)(X.Z,{children:[(0,n.jsx)(ge.Z,{className:d.overline,variant:"overline",children:p("startTime")}),r===De.m.INITIALIZING?(0,n.jsx)(ts.Z,{animation:"wave",width:"50%"}):c?(0,n.jsx)(Cc,{horizontal:!0,time:c}):(0,n.jsx)(ge.Z,{className:d.numericValue,variant:"inherit",children:"\u2014"})]}),!h&&(0,n.jsxs)(X.Z,{children:[(0,n.jsx)(ge.Z,{className:d.overline,variant:"overline",children:p("endTime")}),r===De.m.INITIALIZING?(0,n.jsx)(ts.Z,{animation:"wave",width:"50%"}):(0,n.jsx)(ge.Z,{className:d.numericValue,variant:"inherit",ref:a,children:"\u2014"})]}),(0,n.jsxs)(X.Z,{children:[(0,n.jsx)(ge.Z,{className:d.overline,variant:"overline",children:p("duration")}),r===De.m.INITIALIZING?(0,n.jsx)(ts.Z,{animation:"wave",width:100}):(0,n.jsx)(ge.Z,{className:d.numericValue,variant:"inherit",ref:s,children:"\u2014"})]})]})}const Lc=Pc.memo(jc),Oa="\u2014";function Oc({disableSource:e}){const t=(0,Qe.An)(Mc),s=(0,Qe.An)(Dc),a=(0,Qe.An)(Bc),i=(0,Qe.An)(wc),r=(0,Qe.An)(Rc),c=(0,l.useRef)(null),d=(0,l.useRef)(null),{formatDate:p,formatTime:h}=(0,at.v)();return(0,l.useEffect)(()=>{if(c.current){const f=s&&t?(0,Sc.Ai)(s,t):void 0;if(f){const m=(0,Fe.LU)(f);c.current.innerText=m}else c.current.innerText=Oa}if(d.current)if(s){const f=p(s);d.current.innerText=(0,Ve.D3)(s)?`${f} ${h(s)}`:`${(0,Ve.Eo)(s)}`}else d.current.innerHTML=Oa},[s,h,t,i,p]),(0,n.jsx)(Lc,{disableSource:e,durationRef:c,endTimeRef:d,playerName:a,playerPresence:i,startTime:t,isLiveConnection:r==null})}function Nc(e){return(0,n.jsx)(He.Z,{...e,children:(0,n.jsx)("path",{d:"M18.03,3.03H6.03c-.55,0-1,.45-1,1v3h0v9.42c0,.36,.18,.69,.5,.87l6.5,3.71,6.5-3.71c.31-.18,.5-.51,.5-.87V4.03c0-.55-.45-1-1-1Z"})})}function Zc(e){return(0,n.jsx)(He.Z,{...e,children:(0,n.jsx)("path",{d:"M17.03,5.03V15.87l-5,2.85-5-2.85V5.03h10m1-2H6.03c-.55,0-1,.45-1,1v12.42c0,.36,.18,.69,.5,.87l6.5,3.71,6.5-3.71c.31-.18,.5-.51,.5-.87V4.03c0-.55-.45-1-1-1h0Z"})})}const kc=[.01,.02,.05,.1,.2,.5,.8,1,2,3,5],Na=e=>`${e<.1?e.toFixed(2):e}\xD7`,Fc=e=>e.selectedLayout?.data?.playbackConfig.speed,Uc=(0,L.ZL)()(e=>({button:{padding:e.spacing(.625,.5),backgroundColor:"transparent",":hover":{backgroundColor:e.palette.action.hover}}}));function zc(){const{classes:e}=Uc(),[t,s]=(0,l.useState)(void 0),a=Boolean(t),i=(0,bt.NS)(Fc),r=(0,Qe.An)((0,l.useCallback)(({playerState:y})=>y.activeData?.speed,[])),c=(0,Qe.An)((0,l.useCallback)(y=>y.setPlaybackSpeed,[])),{setPlaybackConfig:d}=(0,bt._B)(),p=(0,l.useCallback)(y=>{d({speed:y}),c?.(y)},[d,c]),h=y=>{s(y.currentTarget)},f=()=>{s(void 0)};(0,l.useEffect)(()=>{i!=null&&c?.(i)},[i,c]);const m=r??i;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)($.Z,{className:e.button,id:"playback-speed-button","aria-controls":a?"playback-speed-menu":void 0,"aria-haspopup":"true","aria-expanded":a?"true":void 0,onClick:h,"data-testid":"PlaybackSpeedControls-Dropdown",disabled:c==null,disableRipple:!0,variant:"contained",color:"inherit",endIcon:(0,n.jsx)(_n.Z,{}),children:m==null?"\u2013":Na(m)}),(0,n.jsx)(ve.Z,{id:"playback-speed-menu",anchorEl:t,open:a,onClose:f,MenuListProps:{"aria-labelledby":"playback-speed-button",dense:!0},anchorOrigin:{vertical:"top",horizontal:"left"},transformOrigin:{vertical:"bottom",horizontal:"left"},children:kc.map(y=>(0,n.jsxs)(Se.Z,{selected:m===y,onClick:()=>{p(y),f()},children:[m===y&&(0,n.jsx)(Lo.Z,{children:(0,n.jsx)(Ns.Z,{fontSize:"small"})}),(0,n.jsx)(Un.Z,{inset:m!==y,primary:Na(y),primaryTypographyProps:{variant:"inherit"}})]},y))})]})}var nn=o(27803),Wc=o(35296),Za=o(87723),ka=o(27728),Fa=o(1309);const Gc=(0,L.ZL)()((e,{timeDisplayMethod:t})=>({textField:{borderRadius:e.shape.borderRadius,"&.Mui-disabled":{[`.${Za.Z.root}`]:{backgroundColor:"transparent"}},"&:not(.Mui-disabled):hover":{backgroundColor:e.palette.action.hover,[`.${ka.Z.root}`]:{visibility:"visible"}},[`.${Za.Z.root}`]:{backgroundColor:"transparent",":hover":{backgroundColor:"transparent"}},[`.${Fa.Z.input}`]:{fontFeatureSettings:`${e.typography.fontFeatureSettings}, 'zero' !important`,minWidth:t==="TOD"?"28ch":"20ch"},[`.${ka.Z.root}`]:{borderTopLeftRadius:0,borderBottomLeftRadius:0,borderLeft:`1px solid ${e.palette.background.paper}`,visibility:"hidden",marginRight:e.spacing(-1)}},textFieldError:{outline:`1px solid ${e.palette.error.main}`,outlineOffset:-1,[`.${Fa.Z.root}`]:{color:e.palette.error.main,borderLeftColor:e.palette.error.main}}}));function Qc({timeFormat:e,timeRawString:t,timeOfDayString:s,setTimeFormat:a}){const[i,r]=(0,l.useState)(void 0),c=Boolean(i),d=h=>{r(h.currentTarget)},p=()=>{r(void 0)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(be.Z,{id:"playback-time-display-toggle-button","aria-controls":c?"playback-time-display-toggle-menu":void 0,"aria-haspopup":"true","aria-expanded":c?"true":void 0,onClick:d,children:(0,n.jsx)(_n.Z,{})}),(0,n.jsx)(ve.Z,{id:"playback-time-display-toggle-menu",anchorEl:i,open:c,onClose:p,MenuListProps:{dense:!0,"aria-labelledby":"playback-time-display-toggle-button"},anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"bottom",horizontal:"right"},children:[{key:"TOD",label:s??"Time of Day"},{key:"SEC",label:t??"Seconds"}].map(h=>(0,n.jsxs)(Se.Z,{selected:e===h.key,onClick:async()=>{await a(h.key),p()},children:[e===h.key&&(0,n.jsx)(Lo.Z,{children:(0,n.jsx)(Ns.Z,{fontSize:"small"})}),(0,n.jsx)(Un.Z,{inset:e!==h.key,primary:h.label,primaryTypographyProps:{variant:"inherit"}})]},h.key))})]})}function Yc({appTimeFormat:e,currentTime:t,startTime:s,endTime:a,timezone:i,onSeek:r,onPause:c,isPlaying:d}){const{classes:p,cx:h}=Gc({timeDisplayMethod:e.timeFormat}),f=(0,l.useRef)(void 0),m=(0,l.useMemo)(()=>t?(0,Ve.Eo)(t):void 0,[t]),y=(0,l.useMemo)(()=>t?`${(0,Fe.p6)(t,i)} ${(0,Fe.mr)(t,i)}`:void 0,[t,i]),B=(0,l.useMemo)(()=>e.timeFormat==="SEC"?m:y,[e.timeFormat,m,y]),[k,z]=(0,l.useState)(!1),[G,q]=(0,l.useState)(B??void 0),[V,me]=(0,l.useState)(!1),le=(0,l.useCallback)(oe=>{if(oe.preventDefault(),G==null||G.length===0||!s||!t||!a)return;const te=(0,Fe._v)({text:G,timezone:i});if(te==null){me(!0);return}me(!1),te.time&&(0,ne.isTimeInRangeInclusive)(te.time,s,a)&&(r(te.time),te.method!==e.timeFormat&&e.setTimeFormat(te.method))},[G,s,t,a,i,r,e]);return(0,l.useEffect)(()=>(V&&(G==null||G.length===0||d)&&(z(!1),me(!1)),()=>{f.current!=null&&clearTimeout(f.current)}),[V,G,d]),(0,n.jsx)(X.Z,{direction:"row",alignItems:"center",flexGrow:0,gap:.5,children:t?(0,n.jsx)("form",{onSubmit:le,style:{width:"100%"},children:(0,n.jsx)(Ot.Z,{className:h(p.textField,{[p.textFieldError]:V}),"aria-label":"Playback Time Method","data-testid":"PlaybackTime-text",value:k?G:B,error:V,variant:"filled",size:"small",InputProps:{startAdornment:V?(0,n.jsx)(Wc.Z,{color:"error"}):void 0,endAdornment:(0,n.jsx)(Qc,{currentTime:t,timezone:i,timeOfDayString:y,timeRawString:m,timeFormat:e.timeFormat,setTimeFormat:e.setTimeFormat})},onFocus:oe=>{c(),me(!1),z(!0),q(B),oe.target.select()},onBlur:oe=>{le(oe),z(!1),f.current=setTimeout(()=>{me(!1)},600)},onChange:oe=>{q(oe.target.value)}})}):(0,n.jsx)(Ot.Z,{className:h(p.textField,"Mui-disabled"),disabled:!0,variant:"filled",size:"small",defaultValue:e.timeFormat==="SEC"?"0000000000.000000000":"0000-00-00 00:00:00.000",InputProps:{endAdornment:(0,n.jsx)(be.Z,{edge:"end",disabled:!0,children:(0,n.jsx)(_n.Z,{})})}})})}const Hc=e=>e.playerState.activeData?.isPlaying,Vc=e=>e.playerState.activeData?.startTime,Kc=e=>e.playerState.activeData?.endTime,Xc=e=>e.playerState.activeData?.currentTime;function $c(e){const[t]=(0,nn.b)(K.o.TIMEZONE),s=(0,Qe.An)(Hc),a=(0,Qe.An)(Vc),i=(0,Qe.An)(Kc),r=(0,Qe.An)(Xc),c=(0,at.v)();return(0,n.jsx)(Yc,{appTimeFormat:c,currentTime:r,startTime:a,endTime:i,onSeek:e.onSeek,onPause:e.onPause,isPlaying:s??!1,timezone:t})}function Jc(e){return e.playerState.activeData}function qc(e){const{play:t,seek:s,repeatEnabled:a}=e,i=(0,Qe.An)(Jc);return(0,l.useLayoutEffect)(()=>{if(!a)return;const r=i?.currentTime,c=i?.endTime,d=i?.startTime;d&&r&&c&&(0,ne.compare)(r,c)>=0&&(s(d),t())},[i,t,a,s]),(0,n.jsx)(n.Fragment,{})}var _c=o(17055),ed=o(2784);const Ua=(0,L.ZL)()(({transitions:e,palette:t})=>({root:{inset:0,pointerEvents:"none",position:"absolute",display:"flex",alignItems:"center"},tick:{transition:e.create("height",{duration:e.duration.shortest}),backgroundBlendMode:"overlay",backgroundColor:(0,kn.Fq)(t.info.main,.58),position:"absolute",height:6},tickHovered:{transition:e.create("height",{duration:e.duration.shortest}),backgroundColor:(0,kn.Fq)(t.info.main,.58),border:`1px solid ${t.info.main}`,height:12},tickSelected:{transition:e.create("height",{duration:e.duration.shortest}),backgroundColor:(0,kn.Fq)(t.info.main,.67),height:12}})),td=e=>e.events,nd=e=>e.hoveredEvent,sd=e=>e.eventsAtHoverValue,od=e=>e.selectedEventId;function ad({event:e}){const t=(0,fe.oA)(sd),s=(0,fe.oA)(nd),a=O(od),{classes:i,cx:r}=Ua(),c=`calc(${Jn.Z(e.startPosition,0,1)*100}% - 1px)`,d=`calc(100% - ${Jn.Z(e.endPosition,0,1)*100}% - 1px)`;return(0,n.jsx)("div",{className:r(i.tick,{[i.tickHovered]:s?e.event.id===s.event.id:t[e.event.id]!=null,[i.tickSelected]:a===e.event.id}),style:{left:c,right:d}})}const id=ed.memo(ad);function rd(){const e=O(td),{classes:t}=Ua();return(0,n.jsx)("div",{className:t.root,children:(e.value??[]).map(s=>(0,n.jsx)(id,{event:s},s.event.id))})}var ld=o(62515),cd=o(23144);const dd=(0,L.ZL)()(e=>({tick:{position:"absolute",height:16,borderRadius:1,width:2,top:8,transform:"translate(-50%, 0)",backgroundColor:e.palette.warning.main},tooltip:{'&[data-popper-placement*="top"] .MuiTooltip-tooltip':{marginBottom:`${e.spacing(1)} !important`}}}));function ud(e){return e.playerState.activeData?.startTime}function pd(e){return e.playerState.activeData?.endTime}function fd(e){const{componentId:t}=e,{classes:s}=dd(),a=(0,Qe.An)(ud),i=(0,Qe.An)(pd),r=(0,fe.hx)({componentId:t,isPlaybackSeconds:!0}),{formatTime:c}=(0,at.v)(),{width:d,ref:p}=(0,ld.NB)({handleHeight:!1,refreshMode:"debounce",refreshRate:0}),h=(0,l.useMemo)(()=>{if(!r||r.type!=="PLAYBACK_SECONDS"||!a||r.value<0)return;const y=(0,ne.add)(a,(0,ne.fromSec)(r.value));return c(y)},[c,r,a]),f=(0,l.useMemo)(()=>{if(!(a==null||i==null))return{x:{min:0,max:(0,ne.toSec)(i)-(0,ne.toSec)(a),pixelMin:0,pixelMax:d??0}}},[d,a,i]),m=r!=null&&r.componentId!==t;return(0,n.jsx)(X.Z,{ref:p,flex:"auto",children:f&&(0,n.jsx)(cd.Z,{componentId:t,scales:f,isPlaybackSeconds:!0,children:(0,n.jsx)(H.Z,{arrow:!0,classes:{popper:s.tooltip},placement:"top",disableFocusListener:!0,disableHoverListener:!0,disableTouchListener:!0,disableInteractive:!0,TransitionProps:{timeout:0},open:m,title:(0,n.jsx)(ge.Z,{align:"center",variant:"caption",fontFamily:rt.R.MONOSPACE,noWrap:!0,children:h}),children:(0,n.jsx)("div",{className:s.tick})})})})}var Dn=o(7279);const hd=(0,L.ZL)()(e=>({tooltipDivider:{gridColumn:"span 2",marginBlock:e.spacing(.5),opacity:.5},tooltipWrapper:{fontFeatureSettings:`${e.typography.fontFeatureSettings}, "zero"`,fontFamily:rt.R.SANS_SERIF,whiteSpace:"nowrap",columnGap:e.spacing(.5),display:"grid",alignItems:"center",gridTemplateColumns:"auto auto",width:"100%",flexDirection:"column"},itemKey:{fontSize:"0.7rem",opacity:.7,textAlign:"end",textTransform:"lowercase"}})),gd=e=>e.eventsAtHoverValue,md=e=>e.playerState.activeData?.startTime;function yd(e){const{stamp:t}=e,{timeFormat:s,formatTime:a,formatDate:i}=(0,at.v)(),r=(0,fe.oA)(gd),c=(0,Qe.An)(md),{classes:d}=hd();if(!c)return null;const p=(0,ne.subtract)(t,c),h=[];switch(Dn.Z(r)||Object.values(r).forEach(({event:f})=>{h.push({type:"item",title:"Start",value:a(f.startTime)}),h.push({type:"item",title:"End",value:a(f.endTime)}),Dn.Z(f.metadata)||Object.entries(f.metadata).forEach(([m,y])=>{h.push({type:"item",title:m,value:y})}),h.push({type:"divider"})}),s){case"TOD":h.push({type:"item",title:"Date",value:i(t)}),h.push({type:"item",title:"Time",value:a(t)});break;case"SEC":h.push({type:"item",title:"SEC",value:a(t)});break}return h.push({type:"item",title:"Elapsed",value:`${(0,ne.toSec)(p).toFixed(9)} sec`}),(0,n.jsx)("div",{className:d.tooltipWrapper,children:h.map((f,m)=>f.type==="divider"?(0,n.jsx)(Ce.Z,{className:d.tooltipDivider},`divider_${m}`):(0,n.jsxs)(l.Fragment,{children:[(0,n.jsx)(ge.Z,{className:d.itemKey,noWrap:!0,children:f.title}),(0,n.jsx)(ge.Z,{variant:"subtitle2",noWrap:!0,children:f.value})]},`${f.title}_${m}`))})}var vd=o(28165),za=o(43345);const bs=8,Ad=(0,vd.F4)`
  0% { background-position: 0 0; }
  100% { background-position: ${bs*2}px 0; }
`,bd=(0,L.ZL)()(e=>({loadingIndicator:{label:"ProgressPlot-loadingIndicator",position:"absolute",width:"100%",height:"100%",animation:`${Ad} 300ms linear infinite`,backgroundRepeat:"repeat-x",backgroundSize:`${bs*2}px 100%`,backgroundImage:`repeating-linear-gradient(${["90deg",`${e.palette.background.paper}`,`${e.palette.background.paper} ${bs/2}px`,`transparent ${bs/2}px`,`transparent ${bs}px`].join(",")})`},range:{label:"ProgressPlot-range",position:"absolute",backgroundColor:e.palette.mode==="dark"?(0,de.Z)(e.palette.text.secondary).darken(25).toHexString():(0,de.Z)(e.palette.text.secondary).lighten(25).toHexString(),height:"100%"}}));function xd(e){const{availableRanges:t,loading:s}=e,{classes:a}=bd(),i=(0,l.useMemo)(()=>{if(t)return t.map(c=>({start:Jn.Z(c.start,0,1),end:Jn.Z(c.end,0,1)}))},[t]),r=(0,l.useMemo)(()=>{if(!i)return(0,n.jsx)(n.Fragment,{});const c=(0,za.og)(i);return(0,dn.Z)(c,(d,p)=>{const h=d.end-d.start;if(h!==0)return(0,n.jsx)("div",{className:a.range,style:{width:`${h*100}%`,left:`${d.start*100}%`}},p)})},[i,a.range]);return(0,n.jsxs)(X.Z,{position:"relative",fullHeight:!0,children:[s&&(0,n.jsx)("div",{className:a.loadingIndicator}),r]})}function Ed(e,t,s){return t+(s-t)*e}function Cd(e,t,s,a,i){return Ed((e-t)/(s-t),a,i)}const Sd=(0,L.ZL)()(e=>({root:{label:"Slider-root",display:"flex",width:"100%",height:"100%",position:"relative",alignItems:"center",cursor:"pointer"},rootDisabled:{label:"Slider-rootDisabled",cursor:"not-allowed",opacity:e.palette.action.disabledOpacity},range:{label:"Slider-range",backgroundColor:e.palette.action.active,position:"absolute",height:"100%"}}));function Td(e,t){return e==null||isNaN(e)?null:(0,n.jsx)("div",{className:t,style:{width:`${e*100}%`}})}function Pd(e){const{fraction:t,disabled:s=!1,renderSlider:a=Td,onHoverOver:i,onHoverOut:r,onChange:c}=e,{classes:d,cx:p}=Sd(),h=(0,l.useRef)(null),f=(0,l.useCallback)(te=>{if(!h.current)return 0;const{left:Z,right:Ae}=h.current.getBoundingClientRect(),nt=Cd(te.clientX,Z,Ae,0,1);return Jn.Z(nt,0,1)},[]),[m,y]=(0,l.useState)(!1),B=(0,l.useRef)(m);(0,l.useLayoutEffect)(()=>{B.current=m},[m]);const[k,z]=(0,l.useState)(!1),G=(0,l.useRef)(k);(0,l.useLayoutEffect)(()=>{G.current=k},[k]);const q=(0,l.useCallback)(()=>{z(!0)},[]),V=(0,l.useCallback)(()=>{z(!1),B.current||r?.()},[r]),me=(0,l.useCallback)(()=>{y(!1),G.current||r?.()},[r]),le=(0,l.useCallback)(te=>{if(B.current&&te.currentTarget!==window||s)return;const Z=f(te);if(h.current){const Ae=h.current.getBoundingClientRect();i?.({fraction:Z,clientX:te.clientX,clientY:Ae.y+Ae.height/2})}B.current&&c(Z)},[s,f,c,i]),oe=(0,l.useCallback)(te=>{s||(document.activeElement instanceof HTMLElement&&document.activeElement.blur(),te.preventDefault(),c(f(te)),y(!0))},[s,f,c]);return(0,l.useEffect)(()=>{if(m)return window.addEventListener("pointerup",me),window.addEventListener("pointermove",le),()=>{window.removeEventListener("pointerup",me),window.removeEventListener("pointermove",le)}},[m,le,me]),(0,n.jsx)("div",{ref:h,onPointerDown:oe,onPointerMove:le,onMouseEnter:q,onMouseLeave:V,className:p(d.root,{[d.rootDisabled]:s}),children:a(t,d.range)})}var Id=o(2784);const Md=(0,L.ZL)()(e=>({marker:{backgroundColor:e.palette.text.primary,position:"absolute",height:16,borderRadius:1,width:2,transform:"translate(-50%, 0)"},track:{position:"absolute",left:0,right:0,height:6,backgroundColor:e.palette.action.focus},trackDisabled:{opacity:e.palette.action.disabledOpacity}})),Dd=e=>e.playerState.activeData?.startTime,Bd=e=>e.playerState.activeData?.currentTime,wd=e=>e.playerState.activeData?.endTime,Rd=e=>e.playerState.progress.fullyLoadedFractionRanges,jd=e=>e.playerState.presence;function Ld(e){const{onSeek:t}=e,{classes:s,cx:a}=Md(),[i]=(0,l.useState)(()=>(0,$t.Z)()),r=(0,Qe.An)(Dd),c=(0,Qe.An)(Bd),d=(0,Qe.An)(wd),p=(0,Qe.An)(jd),h=(0,Qe.An)(Rd),f=(0,fe.D4)(),[m,y]=(0,l.useState)(),B=(0,As.Z)(m),k=(0,As.Z)(r),z=(0,As.Z)(d),G=(0,l.useCallback)(Pt=>{!k.current||!z.current||t((0,ne.add)(k.current,(0,ne.fromSec)(Pt*(0,ne.toSec)((0,ne.subtract)(z.current,k.current)))))},[t,z,k]),q=(0,l.useCallback)(({fraction:Pt,clientX:vt,clientY:Rt})=>{if(!k.current||!z.current)return;const lt=(0,ne.toSec)((0,ne.subtract)(z.current,k.current)),mt=(0,ne.fromSec)(Pt*lt);y({stamp:(0,ne.add)(k.current,mt),clientX:vt,clientY:Rt}),f({componentId:i,type:"PLAYBACK_SECONDS",value:(0,ne.toSec)(mt)})},[i,z,k,f]),V=(0,fe.Js)(),me=(0,l.useCallback)(()=>{V(i),y(void 0)},[V,i]);(0,l.useEffect)(()=>me,[me]);const le=(0,l.useCallback)(Pt=>{if(Pt!=null)return(0,n.jsx)("div",{className:s.marker,style:{left:`${Pt*100}%`}})},[s.marker]),oe=r&&(0,ne.toSec)(r),te=d&&(0,ne.toSec)(d),Z=c&&r&&d?(0,ne.toSec)((0,ne.subtract)(c,r))/(0,ne.toSec)((0,ne.subtract)(d,r)):void 0,Ae=p===De.m.INITIALIZING||p===De.m.BUFFERING,nt=Id.useRef(null),xt=m!=null,Et=(0,l.useMemo)(()=>({open:xt,popperRef:nt,modifiers:[{name:"computeStyles",options:{gpuAcceleration:!1}},{name:"offset",options:{offset:[0,4]}}],anchorEl:{getBoundingClientRect:()=>new DOMRect(B.current?.clientX??0,B.current?.clientY??0,0,0)}}),[xt,B]);return(0,l.useEffect)(()=>{nt.current!=null&&nt.current.update()},[m]),(0,n.jsx)(H.Z,{title:m!=null?(0,n.jsx)(yd,{stamp:m.stamp}):"",placement:"top",disableInteractive:!0,TransitionComponent:_c.Z,TransitionProps:{timeout:0},PopperProps:Et,children:(0,n.jsxs)(X.Z,{direction:"row",flexGrow:1,alignItems:"center",position:"relative",style:{height:32},children:[(0,n.jsx)("div",{className:a(s.track,{[s.trackDisabled]:!r})}),(0,n.jsx)(X.Z,{position:"absolute",flex:"auto",fullWidth:!0,style:{height:6},children:(0,n.jsx)(xd,{loading:Ae,availableRanges:h})}),(0,n.jsx)(X.Z,{fullHeight:!0,fullWidth:!0,position:"absolute",flex:1,children:(0,n.jsx)(Pd,{disabled:oe==null||te==null,fraction:Z,onHoverOver:q,onHoverOut:me,onChange:G,renderSlider:le})}),(0,n.jsx)(rd,{}),(0,n.jsx)(fd,{componentId:i})]})})}const Od=500,Nd=100,Zd=10,Wa={FORWARD:1,BACKWARD:-1},Ga=(e,t,s)=>{const a=(0,ne.toMillis)(t),i=s?.altKey===!0?Od:s?.shiftKey===!0?Zd:Nd;return(0,ne.fromMillis)(a+i*e)},kd=(0,L.ZL)()(e=>({root:{display:"flex",flexDirection:"column",padding:e.spacing(.5,1,1,1),position:"relative",backgroundColor:e.palette.background.paper,borderTop:`1px solid ${e.palette.divider}`,zIndex:1e5},disabled:{opacity:e.palette.action.disabledOpacity},popper:{"&[data-popper-placement*=top] .MuiTooltip-tooltip":{margin:e.spacing(.5,.5,.75)}},dataSourceInfoButton:{cursor:"default"}})),Fd=e=>e.playerState.presence,Ud=e=>e.eventsSupported,zd=e=>e.playbackControls.repeat;function Wd(e){const{play:t,pause:s,seek:a,isPlaying:i,getTimeInfo:r,playUntil:c}=e,d=(0,Qe.An)(Fd),{classes:p,cx:h}=kd(),f=(0,Ye.Q)(zd),[m,y]=(0,l.useState)(!1),{currentUser:B}=Xe(),k=O(Ud),{playbackControlActions:{setRepeat:z}}=(0,it.W)(),G=(0,l.useCallback)(()=>{z(Z=>!Z)},[z]),q=(0,l.useCallback)(()=>{if(i)s();else{const{startTime:Z,endTime:Ae,currentTime:nt}=r();nt&&Ae&&Z&&(0,ne.compare)(nt,Ae)>=0&&a(Z),t()}},[i,s,r,t,a]),V=(0,l.useCallback)(Z=>{const{currentTime:Ae}=r();if(!Ae)return;const nt=Ga(Wa.FORWARD,Ae,Z);c?c(nt):a(nt)},[r,c,a]),me=(0,l.useCallback)(Z=>{const{currentTime:Ae}=r();Ae&&a(Ga(Wa.BACKWARD,Ae,Z))},[r,a]),le=(0,l.useMemo)(()=>({" ":q,ArrowLeft:Z=>{me(Z)},ArrowRight:Z=>{V(Z)}}),[me,V,q]),oe=(0,l.useCallback)(()=>{s(),y(Z=>!Z)},[s]),te=d===De.m.ERROR;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(qc,{play:t,seek:a,repeatEnabled:f}),(0,n.jsx)(ya.Z,{global:!0,keyDownHandlers:le}),(0,n.jsxs)("div",{className:p.root,children:[(0,n.jsx)(Ld,{onSeek:a}),(0,n.jsxs)(X.Z,{direction:"row",alignItems:"center",flex:1,gap:1,overflowX:"auto",children:[(0,n.jsxs)(X.Z,{direction:"row",flex:1,gap:.5,children:[B&&k&&(0,n.jsx)(zn.Z,{size:"small",title:"Create event",icon:(0,n.jsx)(Zc,{}),activeIcon:(0,n.jsx)(Nc,{}),onClick:oe}),(0,n.jsx)(H.Z,{disableFocusListener:!0,classes:{popper:p.popper},title:(0,n.jsx)(X.Z,{paddingY:.75,children:(0,n.jsx)(Oc,{disableSource:!0})}),children:(0,n.jsx)(zn.Z,{className:h(p.dataSourceInfoButton,{[p.disabled]:te}),size:"small",icon:(0,n.jsx)(ks.Myy,{})})}),(0,n.jsx)($c,{onSeek:a,onPause:s})]}),(0,n.jsxs)(X.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,n.jsx)(zn.Z,{disabled:te,size:"small",title:"Seek backward",icon:(0,n.jsx)(Fs.b6L,{}),activeIcon:(0,n.jsx)(Fs.tE8,{}),onClick:()=>{me()}}),(0,n.jsx)(zn.Z,{disabled:te,size:"small",title:i?"Pause":"Play",onClick:q,icon:i?(0,n.jsx)(Ie.EPH,{}):(0,n.jsx)(Fs.wNO,{}),activeIcon:i?(0,n.jsx)(Ie.nYY,{}):(0,n.jsx)(Fs._kM,{})}),(0,n.jsx)(zn.Z,{disabled:te,size:"small",title:"Seek forward",icon:(0,n.jsx)(Ie.Jnl,{}),activeIcon:(0,n.jsx)(Ie.yI2,{}),onClick:()=>{V()}})]}),(0,n.jsxs)(X.Z,{direction:"row",flex:1,alignItems:"center",justifyContent:"flex-end",gap:.5,children:[(0,n.jsx)(zn.Z,{size:"small",title:"Loop playback",color:f?"primary":"inherit",onClick:G,icon:f?(0,n.jsx)(ms.zst,{}):(0,n.jsx)(ms.lfW,{})}),(0,n.jsx)(zc,{})]})]}),m&&k&&(0,n.jsx)(xc,{onClose:oe})]})]})}var Qa=o(76100),ko=o(36952),Gd=o(63355),Qd=o(63285),Yd=o(53711);const Fo=(0,L.ZL)()(e=>({acccordion:{background:"none",boxShadow:"none",borderBottom:`1px solid ${e.palette.divider}`,"&:before":{display:"none"},"&.Mui-expanded":{margin:0}},accordionDetails:{display:"flex",flexDirection:"column",fontFamily:rt.R.MONOSPACE,fontSize:"0.6875rem",padding:e.spacing(1.125),gap:e.spacing(1)},acccordionSummary:{height:30,minHeight:"auto",padding:e.spacing(0,.5,0,.75),fontWeight:500,"&:hover":{backgroundColor:e.palette.action.hover},"&.Mui-expanded":{minHeight:"auto"},[`& .${ko.Z.content}`]:{gap:e.spacing(.5),overflow:"hidden",alignItems:"center",margin:"0 !important"},[`& .${ko.Z.expandIconWrapper}`]:{transform:"rotate(-90deg)"},[`& .${ko.Z.expandIconWrapper}.Mui-expanded`]:{transform:"rotate(0deg)"}},detailsText:{color:e.palette.text.primary,fontSize:e.typography.caption.fontSize,lineHeight:1.5,whiteSpace:"pre-wrap",maxHeight:"30vh",overflow:"auto",flex:1,backgroundColor:e.palette.action.hover,padding:e.spacing(1)},icon:{flex:"none"}})),Hd=({playerState:e})=>e.problems;function Vd({severity:e}){const{palette:t}=(0,P.Z)(),{classes:s}=Fo();switch(e){case"warn":return(0,n.jsx)(Qa.kxT,{className:s.icon,primaryFill:t.warning.main});case"error":return(0,n.jsx)(fn.yf,{className:s.icon,primaryFill:t.error.main});case"info":return(0,n.jsx)(ks.IZT,{className:s.icon,primaryFill:t.info.main});default:return(0,n.jsx)(n.Fragment,{})}}function Kd(e){const{details:t,tip:s}=e,{classes:a}=Fo(),i=(0,l.useMemo)(()=>t instanceof Error?(0,n.jsx)("div",{className:a.detailsText,children:t.message}):t!=null&&t!==""?(0,n.jsx)(ge.Z,{style:{whiteSpace:"pre-line"},children:t}):s!=null&&s!==""?void 0:"No details provided",[a,t,s]);return(0,n.jsxs)(Gd.Z,{className:a.accordionDetails,children:[s&&(0,n.jsx)("div",{children:s}),i]})}function Xd(){const{classes:e}=Fo(),t=(0,Qe.An)(Hd);return t==null||t.length===0?(0,n.jsx)(Xn.Z,{children:"No problems found"}):(0,n.jsx)(X.Z,{fullHeight:!0,flex:"auto",overflow:"auto",children:t.map((s,a)=>(0,n.jsxs)(Qd.Z,{className:e.acccordion,TransitionProps:{unmountOnExit:!0},defaultExpanded:!0,children:[(0,n.jsxs)(Yd.Z,{className:e.acccordionSummary,expandIcon:(0,n.jsx)(_n.Z,{}),title:s.message,children:[(0,n.jsx)(Vd,{severity:s.severity}),(0,n.jsx)(ge.Z,{variant:"inherit",noWrap:!0,children:s.message})]}),(0,n.jsx)(Ce.Z,{}),(0,n.jsx)(Kd,{details:s.error,tip:s.tip})]},`${a}.${s.severity}.${s.message}`))})}function $d(e){const t=(0,l.useCallback)(({children:s})=>(e.value,(0,n.jsx)(n.Fragment,{children:s})),[e.value]);return(0,n.jsx)(t,{children:e.children})}var wt=o(28219),Us=o(38256),Jd=o(71001);const qd=(0,L.ZL)()(e=>({root:{boxSizing:"content-box",backgroundColor:e.palette.background.paper},badgeRoot:{display:"flex",alignItems:"baseline",gap:e.spacing(1)},badge:{fontSize:e.typography.caption.fontSize,padding:e.spacing(.125,.75),borderRadius:8,transform:"none",position:"relative"},badgeInvisible:{display:"none"},anchorRight:{borderLeft:`1px solid ${e.palette.divider}`},anchorLeft:{borderRight:`1px solid ${e.palette.divider}`},tabs:{minHeight:"auto",flex:"1 1 auto",overflow:"hidden",paddingLeft:e.spacing(.25),".MuiTabs-indicator":{transform:"scaleX(0.5)",height:2},".MuiTab-root":{minHeight:30,minWidth:e.spacing(4),padding:e.spacing(0,1),color:e.palette.text.secondary,fontSize:"0.6875rem","&.Mui-selected":{color:e.palette.text.primary}}},iconButton:{padding:e.spacing(.91125),color:e.palette.text.secondary,borderRadius:0,":hover":{color:e.palette.text.primary}},tabContent:{flex:"auto",overflow:"auto"}}));function _d(){return null}function Ya({items:e,anchor:t,onClose:s,activeTab:a,setActiveTab:i}){const{classes:r,cx:c}=qd(),d=(a&&e.get(a)?.component)??_d;return(0,n.jsxs)(X.Z,{className:c(r.root,{[r.anchorLeft]:t==="left",[r.anchorRight]:t==="right"}),flexShrink:0,overflow:"hidden","data-tourid":`sidebar-${t}`,children:[(0,n.jsxs)(X.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",children:[(0,n.jsx)(gn.Z,{className:r.tabs,textColor:"inherit",value:a??!1,onChange:(p,h)=>{h!==a&&i(h)},children:Array.from(e.entries(),([p,h])=>(0,n.jsx)(tn.Z,{label:(0,n.jsx)(Jd.Z,{invisible:h.badge==null,badgeContent:h.badge?.count,color:h.badge?.color,classes:{root:r.badgeRoot,badge:r.badge,invisible:r.badgeInvisible},children:h.title}),value:p,"data-testid":`${p}-${t}`},p))}),(0,n.jsx)(be.Z,{className:r.iconButton,onClick:s,size:"small","data-testid":`sidebar-close-${t}`,children:(0,n.jsx)(et.Z,{fontSize:"inherit"})})]}),(0,n.jsx)(Ce.Z,{}),a!=null&&(0,n.jsx)("div",{className:r.tabContent,children:(0,n.jsx)(d,{})})]})}var oy=o(24426);const eu=(0,L.ZL)()({mosaicWrapper:{flex:"1 1 100%","& > .mosaic > .drop-target-container":{display:"none !important"}}});function zs(e){if(typeof e=="object")return e.first==="leftbar"?e.splitPercentage:zs(e.first)??zs(e.second)}function Ws(e){if(typeof e=="object")return e.second==="rightbar"?e.splitPercentage:Ws(e.first)??Ws(e.second)}function tu(e){const{children:t,leftItems:s,selectedLeftKey:a,onSelectLeftKey:i,leftSidebarSize:r,setLeftSidebarSize:c,rightItems:d,selectedRightKey:p,onSelectRightKey:h,rightSidebarSize:f,setRightSidebarSize:m}=e,[y,B]=(0,l.useState)("children"),{classes:k}=eu(),z=a!=null&&s.has(a),G=p!=null&&d.has(p);(0,l.useEffect)(()=>{const le=100*(320/window.innerWidth),oe=100*(1-320/window.innerWidth);B(te=>{let Z="children";return G&&(Z={direction:"row",first:Z,second:"rightbar",splitPercentage:f??Ws(te)??oe}),z&&(Z={direction:"row",first:"leftbar",second:Z,splitPercentage:r??zs(te)??le}),Z})},[r,f,z,G]);const q=(0,l.useCallback)(V=>{V!=null&&(B(V),c(zs(V)),m(Ws(V)))},[c,m]);return(0,n.jsx)(X.Z,{direction:"row",fullHeight:!0,overflow:"hidden",children:(0,n.jsx)("div",{className:k.mosaicWrapper,children:(0,n.jsx)(wt.wB,{className:"",value:y,onChange:q,renderTile:V=>{switch(V){case"children":return(0,n.jsx)(Us.Z,{children:t});case"leftbar":return(0,n.jsx)(Us.Z,{children:(0,n.jsx)(Ya,{anchor:"left",onClose:()=>{i(void 0)},items:s,activeTab:a,setActiveTab:i})});case"rightbar":return(0,n.jsx)(Us.Z,{children:(0,n.jsx)(Ya,{anchor:"right",onClose:()=>{h(void 0)},items:d,activeTab:p,setActiveTab:h})})}},resize:{minimumPaneSizePercentage:10}})})})}var nu="../../packages/studio-base/src/components/StudioLogsSettings/useStudioLogsSettingsTree.ts";const su=ae.ZP.getLogger(nu);function ou(){const e=ye();return(0,l.useMemo)(()=>{const t=new Map,s={Settings:{label:"Settings",fields:{level:{label:"level",input:"select",value:e.globalLevel,options:[{label:"error",value:"error"},{label:"warn",value:"warn"},{label:"info",value:"info"},{label:"debug",value:"debug"}]}}}},a={label:"Misc",defaultExpansionState:"expanded",children:{}};for(const i of e.channels){const r=i.name,c=r.split("/"),d=/^(studio\/)/.test(r)?`${c.shift()}/`:"",[p,h,f,m,...y]=c;if(p!=="packages"){a.children[r]={label:r,visible:i.enabled},t.set(`misc/${r}`,{type:"channel",fullPath:i.name});continue}if(!h)continue;if(f!=="src"||!m){a.children[i.name]={label:i.name,visible:i.enabled},t.set(`misc/${r}`,{type:"channel",fullPath:i.name});continue}const B=s[h]??={label:h,visible:!1,children:{}};t.set(h,{type:"prefix",fullPath:`${d}packages/${h}`});const k=B.children[m]??={label:m,visible:!1};if(i.enabled&&(B.visible=!0,k.visible=!0),(0,Ze.extname)(m)){t.set(`${h}/${m}`,{type:"channel",fullPath:`${d}packages/${h}/src/${m}`});continue}if(t.set(`${h}/${m}`,{type:"prefix",fullPath:`${d}packages/${h}/src/${m}`}),y.length>0){k.children??={};const z=y.join("/");k.children[z]={label:z,visible:i.enabled},t.set(`${h}/${m}/${z}`,{type:"channel",fullPath:`${d}packages/${h}/src/${m}/${z}`})}}return s.misc=a,{enableFilter:!0,actionHandler:i=>{if(su.debug("action",i),i.action==="update"&&i.payload.path.join(".")==="Settings.level"){if(typeof i.payload.value!="string")return;e.setGlobalLevel((0,ae.A_)(i.payload.value));return}if(i.action!=="update"||i.payload.input!=="boolean")return;const r=i.payload.path;if(r[r.length-1]!=="visible")return;const d=i.payload.value===!0,h=r.slice(0,r.length-1).join("/"),f=t.get(h);switch(f?.type){case"prefix":d?e.enablePrefix(f.fullPath):e.disablePrefix(f.fullPath);break;case"channel":d?e.enableChannel(f.fullPath):e.disableChannel(f.fullPath);break;default:break}},nodes:s}},[e])}function au(){const e=ou();return(0,n.jsx)(wa,{variant:"log",settings:e})}var iu=o(71696),Ha=o.n(iu),ns=o(7738);const ru={speed:1};function Ut(e,{layout:t,trimConfigById:s=!0}){const a=(0,wt.fY)(t??null).filter(c=>!Dn.Z(c)),i=(0,Be.bP)(a,e.configById),r=s?ns.Z(e.configById,[...i,...a]):e.configById;return{...e,configById:r,layout:t}}function kt(e,t){const{configs:s}=t,a=e.configById,i=s.reduce((c,{id:d,config:p,defaultConfig:h={},override:f=!1})=>{if(f)return{...c,[d]:p};const m=c[d],y={...h,...c[d],...p};return U.Z(m,y)?c:{...c,[d]:y}},e.configById);if(s.find(({id:c})=>(0,Be.$k)(c)===Mn.bm)){const c=(0,wt.fY)(e.layout??null),d=(0,Be.bP)(c,i);return{...e,configById:ns.Z(i,[...d,...c])}}return a===i?e:{...e,configById:i}}function lu(e,t){const{panelType:s,perPanelFunc:a}=t,i={...e.configById},r=e.configById;for(const[c,d]of Object.entries(r))(0,Be.$k)(c)===s&&(i[c]=a(d));return{...e,configById:i}}const cu=(e,{tabId:t,root:s,path:a})=>{if(t!=null){const c=e.configById[t],d=(0,Be.VJ)(a,c,t);return kt(e,d)}else if(typeof s=="string")return Ut(e,{layout:void 0});const i=(0,wt.NO)(s,a),r=(0,wt.Xw)(s,[i]);return Ut(e,{layout:r})},du=(e,{id:t,tabId:s,direction:a,config:i,root:r,path:c})=>{const d=(0,Be.$k)(t),p=(0,Be.nJ)(d);let h={...e};const{configById:f}=h;if(s!=null){const m=f[s],y=m.tabs[m.activeTabIdx]?.layout;if(y!=null){const B=(0,wt.Xw)(y,[{path:(0,Be.p9)(t,y),spec:{$set:{first:t,second:p,direction:a}}}]),k=(0,Be.p1)(B,m);h=kt(h,{configs:[{id:s,config:k},{id:p,config:i}]})}}else{h=Ut(h,{layout:(0,wt.Xw)(r,[{path:c,spec:{$set:{first:t,second:p,direction:a}}}]),trimConfigById:d!==Mn.bm});const m=d===Mn.bm?(0,Be.bP)([t],f).reduce((y,B)=>({...y,[B]:f[B]}),{}):void 0;h=kt(h,(0,Be.jQ)({id:p,config:i,relatedConfigs:m}))}return h},uu=(e,{tabId:t,originalId:s,type:a,config:i,relatedConfigs:r,root:c,path:d})=>{const p=(0,Be.nJ)(a);let h={...e};if(t!=null&&s!=null){const f=h.configById[t];if(f){const m=f.tabs[f.activeTabIdx]?.layout;if(m!=null){const y=(0,Be.fG)({originalId:s,newId:p},m),B=(0,Be.p1)(y,f);h=kt(h,{configs:[{id:t,config:B}]})}}}else h=Ut(h,{layout:(0,wt.Xw)(c,[{path:d,spec:{$set:p}}]),trimConfigById:a!==Mn.bm});return h=kt(h,(0,Be.jQ)({id:p,config:i,relatedConfigs:r})),h},pu=(e,{idToReplace:t,layout:s,idsToRemove:a})=>{const i=(0,Be.nJ)(Mn.bm),{configById:r}=e,c=(0,Be.IP)(s,r,a),d=(0,Be.CD)(s,r).filter(B=>!a.includes(B)),p=(0,Be.fG)({idsToRemove:d},c),h=(0,Be.fG)({originalId:t,newId:i,idsToRemove:a},s);let f=Ut(e,{layout:h??"",trimConfigById:!1});const m={id:i,config:{...Be.kY,tabs:[{title:"1",layout:p}]}},y=(0,Be.w$)(t,i,a,r);return f=kt(f,{configs:[m,...y]}),f},fu=(e,{idToReplace:t,layout:s,idsToRemove:a})=>{const{configById:i}=e,r=(0,Be.nJ)(Mn.bm),c=(0,Be.fG)({originalId:t,newId:r,idsToRemove:a},s);let d=Ut({...e},{layout:c??"",trimConfigById:!1});const p=a.map(m=>({title:(0,Be.$k)(m),layout:m})),h={id:r,config:{...Be.kY,tabs:p}},f=(0,Be.w$)(t,r,a,i);return d=kt(d,{configs:[h,...f]}),d},hu=(e,{source:t,target:s})=>{const a=t.panelId===s.panelId?(0,Be.A$)({source:t,target:s,savedProps:e.configById}):(0,Be.rZ)({source:t,target:s,savedProps:e.configById});return kt(e,a)},gu=(e,{tabId:t,id:s,config:a,relatedConfigs:i})=>{let r={...e},c={configs:[]};a&&(c=(0,Be.jQ)({id:s,config:a,relatedConfigs:i}));let d;if(t!=null){const f=e.configById[t];(0,Be.dr)(f)&&(d=f.tabs[f.activeTabIdx]?.layout)}else d=e.layout;const h={layout:Dn.Z(d)?s:{direction:"row",first:s,second:d},trimConfigById:!i};return t!=null&&typeof h.layout=="string"?r=kt(r,{configs:[{id:t,config:(0,Be.p1)(h.layout,{...Be.kY,...e.configById[t]})}]}):r=Ut(r,h),r=kt(r,c),r},mu=(e,{newPanelType:t,destinationPath:s=[],position:a,tabId:i,config:r,relatedConfigs:c})=>{const d=(0,Be.nJ)(t),p=[];if(i!=null){const{configs:m}=(0,Be.th)(d,s,a,e.configById[i],i);p.push(...m)}const h=i!=null?e.layout:(0,wt.Xw)(e.layout,(0,Be._f)(e.layout,d,s,a??"left"));if(r){const{configs:m}=(0,Be.jQ)({id:d,config:r,relatedConfigs:c});p.push(...m)}let f=Ut(e,{layout:h,trimConfigById:!c});return f=kt(f,{configs:p}),f},yu=(e,{originalLayout:t,sourceTabId:s,position:a,destinationPath:i,ownPath:r,sourceTabConfig:c,sourceTabChildConfigs:d})=>{const p=c.tabs[c.activeTabIdx]?.layout;let h={...e};if(typeof p=="string")h=Ut(e,{layout:t,trimConfigById:!1}),h=kt(h,{configs:[{id:s,config:(0,Be.p1)(p,c)},...d]});else if(p!=null){const f=(0,wt.uz)(p,r,i,a),m=(0,wt.Xw)(p,f);h=Ut(e,{layout:t,trimConfigById:!1}),h=kt(h,{configs:[{id:s,config:(0,Be.p1)(m,e.configById[s])},...d]})}return h},vu=(e,{originalLayout:t,sourceTabId:s,position:a,destinationPath:i,ownPath:r,sourceTabConfig:c,sourceTabChildConfigs:d})=>{const p=c.tabs[c.activeTabIdx]?.layout;if(p==null)return e;const h=(0,Be.VJ)(r,e.configById[s],s),f={...h,configs:[...h.configs,...d]},m=(0,wt.PC)(p,r);if(typeof m!="string")return e;const y=(0,wt.Xw)(t,(0,Be._f)(t,m,i,a));let B=Ut(e,{layout:y,trimConfigById:!1});return B=kt(B,f),B},Au=(e,{originalLayout:t,panelId:s,targetTabId:a,position:i,destinationPath:r,ownPath:c,targetTabConfig:d,sourceTabChildConfigs:p})=>{const h=(0,Be.th)(s,r,i,d,a),f={...h,configs:[...h.configs,...p]},m=(0,wt.NO)(t,c),y=(0,wt.Xw)(t,[m]);let B=Ut(e,{layout:y,trimConfigById:!1});return B=kt(B,{configs:f.configs}),B},bu=(e,{originalLayout:t,panelId:s,sourceTabId:a,targetTabId:i,position:r,destinationPath:c,ownPath:d,targetTabConfig:p,sourceTabConfig:h,sourceTabChildConfigs:f})=>{const{configs:m}=(0,Be.VJ)(d,h,a),{configs:y}=(0,Be.th)(s,c,r,p,i);let B=Ut(e,{layout:t,trimConfigById:!1});return B=kt(B,{configs:[...m,...y,...f.filter(({id:k})=>k!==i)]}),B},xu=(e,{path:t,sourceTabId:s})=>{if(t.length>0){if(s!=null){const a=e.configById[s],i=a.tabs[a.activeTabIdx]?.layout;if(i==null)return e;const r=(0,wt.Xw)(i,[(0,wt.kq)(t)]),c=(0,Be.p1)(r,a);return kt(e,{configs:[{id:s,config:c}]})}return Ut(e,{layout:(0,wt.Xw)(e.layout??"",[(0,wt.kq)(t)]),trimConfigById:!1})}else if(s!=null){const a=e.configById[s];return kt(e,{configs:[{id:s,config:(0,Be.p1)(void 0,a)}]})}throw new Error("Can't drag the top-level panel of a layout")},Eu=(e,t)=>{const{originalLayout:s,originalSavedProps:a,panelId:i,sourceTabId:r,targetTabId:c,position:d,destinationPath:p,ownPath:h}=t,f=r!=null&&c==null,m=r==null&&c!=null,y=r!=null&&c!=null,B=r===c&&y,k=r!=null?a[r]:void 0,z=c!=null?a[c]:void 0,G=r!=null?(0,Be.bP)([r],a):[],q=(0,dn.Z)(G,V=>{const me=a[V];return me?{id:V,config:me}:void 0});if(B&&d==null&&p==null)return{...e,layout:s,configById:a};if(B&&k&&d!=null&&p!=null)return yu(e,{originalLayout:s,sourceTabId:r,position:d,destinationPath:p,ownPath:h,sourceTabConfig:k,sourceTabChildConfigs:q});if(f&&k&&d!=null&&p!=null)return vu(e,{originalLayout:s,sourceTabId:r,position:d,destinationPath:p,ownPath:h,sourceTabConfig:k,sourceTabChildConfigs:q});if(m)return Au(e,{originalLayout:s,panelId:i,targetTabId:c,position:d,destinationPath:p,ownPath:h,targetTabConfig:z,sourceTabChildConfigs:q});if(y&&k)return bu(e,{originalLayout:s,panelId:i,sourceTabId:r,targetTabId:c,position:d,destinationPath:p,ownPath:h,targetTabConfig:z,sourceTabConfig:k,sourceTabChildConfigs:q});if(d!=null&&p!=null&&!U.Z(p,h)){const V=(0,wt.uz)(s,h,p,d),me=(0,wt.Xw)(s,V);return Ut(e,{layout:me,trimConfigById:!1})}return{...e,layout:s,configById:a}};function Cu(e,t){switch(t.type){case"CHANGE_PANEL_LAYOUT":return Ut(e,t.payload);case"SAVE_PANEL_CONFIGS":return kt(e,t.payload);case"SAVE_FULL_PANEL_CONFIG":return lu(e,t.payload);case"CREATE_TAB_PANEL":return t.payload.singleTab?pu(e,t.payload):fu(e,t.payload);case"OVERWRITE_GLOBAL_DATA":return{...e,globalVariables:t.payload};case"SET_GLOBAL_DATA":{const s={...e.globalVariables,...t.payload};return Object.keys(s).forEach(a=>{s[a]==null&&delete s[a]}),{...e,globalVariables:s}}case"SET_USER_NODES":{const s={...e.userNodes};for(const[a,i]of Object.entries(t.payload))i==null?delete s[a]:s[a]=i;return{...e,userNodes:s}}case"SET_PLAYBACK_CONFIG":return{...e,playbackConfig:{...e.playbackConfig,...t.payload}};case"CLOSE_PANEL":return cu(e,t.payload);case"SPLIT_PANEL":return du(e,t.payload);case"SWAP_PANEL":return uu(e,t.payload);case"MOVE_TAB":return hu(e,t.payload);case"ADD_PANEL":return gu(e,t.payload);case"DROP_PANEL":return mu(e,t.payload);case"START_DRAG":return xu(e,t.payload);case"END_DRAG":return Eu(e,t.payload);default:throw new Error("This reducer should only be used for panel actions")}return e}const Su=globalThis.FOXGLOVE_STUDIO_DEFAULT_LAYOUT??{configById:{"3D!18i6zy7":{layers:{"845139cb-26bc-40b3-8161-8ab60af4baf5":{visible:!0,frameLocked:!0,label:"Grid",instanceId:"845139cb-26bc-40b3-8161-8ab60af4baf5",layerId:"foxglove.Grid",size:10,divisions:10,lineWidth:1,color:"#248eff",position:[0,0,0],rotation:[0,0,0],order:1}}},"RawMessages!os6rgs":{},"Image!3mnp456":{}},globalVariables:{},userNodes:{},playbackConfig:{...ru},layout:{first:"3D!18i6zy7",second:{first:"Image!3mnp456",second:"RawMessages!os6rgs",direction:"column",splitPercentage:30},direction:"row",splitPercentage:70}};var Va=o(74354);function Gs(e,t,s){return typeof e=="string"?e===t?s:e:{...e,first:Gs(e.first,t,s),second:Gs(e.second,t,s)}}function Ka(e,t,s,a){const i={...e,configById:{...e.configById,[s]:a}};if(delete i.configById[t],i.layout!=null){i.layout=Gs(i.layout,t,s);const r=Object.keys(i.configById).filter(Be.lD);for(const c of r){const d=i.configById[c];(0,Be.dr)(d)&&(i.configById[c]={...d,tabs:d.tabs.map(p=>({...p,layout:p.layout!=null?Gs(p.layout,t,s):void 0}))})}}return i}const ss={type:"point",poseTopic:"/move_base_simple/goal",pointTopic:"/clicked_point",poseEstimateTopic:"/initialpose",poseEstimateXDeviation:.5,poseEstimateYDeviation:.5,poseEstimateThetaDeviation:Os.Z(Math.PI/12,8)};function Tu(e){return{followTf:e.followTf,followMode:e.followMode==="follow-orientation"?"follow-pose":e.followMode==="follow"?"follow-position":"follow-none",cameraState:{...Va.d,...e.cameraState,phi:(e.cameraState?.phi??Math.PI/3)*180/Math.PI,thetaOffset:(e.cameraState?.thetaOffset??0)*180/Math.PI,fovy:(e.cameraState?.fovy??Math.PI/4)*180/Math.PI},publish:{type:"point",poseTopic:e.clickToPublishPoseTopic??ss.poseTopic,pointTopic:e.clickToPublishPointTopic??ss.pointTopic,poseEstimateTopic:e.clickToPublishPoseEstimateTopic??ss.poseEstimateTopic,poseEstimateXDeviation:e.clickToPublishPoseEstimateXDeviation??ss.poseEstimateXDeviation,poseEstimateYDeviation:e.clickToPublishPoseEstimateYDeviation??ss.poseEstimateYDeviation,poseEstimateThetaDeviation:e.clickToPublishPoseEstimateThetaDeviation??ss.poseEstimateThetaDeviation},topics:Object.fromEntries((0,dn.Z)(e.checkedKeys??[],t=>t.startsWith("t:")?[t.substring(2),{visible:!0}]:void 0)),scene:{},transforms:{},layers:{},imageMode:{}}}function Pu(e){if(e.layout==null)return e;const t=(0,Be.CD)(e.layout,e.configById).filter(a=>(0,Be.$k)(a)==="3D Panel");let s=e;for(const a of t){const i=e.configById[a];i!=null&&(s=Ka(s,a,(0,Be.nJ)("3D"),Tu(i)))}return s}var Iu=o(86073);function Mu(e){return{cameraState:Va.d,followMode:"follow-pose",followTf:void 0,scene:{},transforms:{},topics:{},layers:{},publish:Iu.B,imageMode:{imageTopic:e.cameraTopic,calibrationTopic:void 0,synchronize:e.synchronize,rotation:e.rotation!=null&&[0,90,180,270].includes(e.rotation)?e.rotation:0,flipHorizontal:e.flipHorizontal,flipVertical:e.flipVertical,minValue:e.minValue,maxValue:e.maxValue,annotations:Object.fromEntries((e.enabledMarkerTopics??[]).map(t=>[t,{visible:!0}]))}}}function Du(e){if(e.layout==null)return e;const t=(0,Be.CD)(e.layout,e.configById).filter(a=>(0,Be.$k)(a)==="ImageViewPanel");let s=e;for(const a of t){const i=e.configById[a];i!=null&&(s=Ka(s,a,(0,Be.nJ)("Image"),Mu(i)))}return s}function Bu(e){let t={...e,configById:e.configById??e.savedProps??{}};return delete t.savedProps,t=Pu(t),t=Du(t),t}var wu="../../packages/studio-base/src/components/CurrentLayoutLocalStorageSyncAdapter.tsx";function Ru(e){return e.selectedLayout?.data}const Uo=ae.ZP.getLogger(wu),zo="studio.layout";function ju(){const{selectedSource:e}=(0,Ue.n)(),{setCurrentLayout:t}=(0,bt._B)(),s=(0,bt.NS)(Ru);(0,l.useEffect)(()=>{e?.sampleLayout&&t({data:e.sampleLayout})},[e,t]);const[a]=(0,Ls.Nr)(s,250,{maxWait:500});return(0,l.useEffect)(()=>{if(!a)return;const i=JSON.stringify(a);Ha()(i),localStorage.setItem(zo,i)},[a]),(0,l.useEffect)(()=>{Uo.debug(`Reading layout from local storage: ${zo}`);const i=localStorage.getItem(zo);i?Uo.debug("Restoring layout from local storage"):Uo.debug("No layout found in local storage. Using default layout.");const r=Bu(i?JSON.parse(i):Su);t({data:r})},[t]),(0,n.jsx)(n.Fragment,{})}var Lu=o(84006),Ou=o(1284),Nu=o(7154);function Zu(e,t){const s=new URL(e.href);return"time"in t&&(t.time?s.searchParams.set("time",(0,ne.toRFC3339String)(t.time)):s.searchParams.delete("time")),"ds"in t&&(t.ds?s.searchParams.set("ds",t.ds):s.searchParams.delete("ds")),"dsParams"in t&&([...s.searchParams].forEach(([a])=>{a.startsWith("ds.")&&s.searchParams.delete(a)}),Object.entries(t.dsParams??"").forEach(([a,i])=>{s.searchParams.set("ds."+a,i)})),s.searchParams.sort(),s}function ku(e){const t=e.searchParams.get("ds")??void 0,s=e.searchParams.get("time"),a=s==null?void 0:(0,ne.fromRFC3339String)(s),i={};e.searchParams.forEach((c,d)=>{if(d&&c&&d.startsWith("ds.")){const p=d.replace(/^ds./,"");i[p]=c}});const r=Nu.Z({time:a,ds:t,dsParams:Dn.Z(i)?void 0:i},Dn.Z);return Dn.Z(r)?void 0:r}const Fu=e=>e.playerState.capabilities.includes(De.C.playbackControl),Uu=e=>e.playerState.activeData?.currentTime,zu=e=>e.playerState.urlState,Wu=e=>e.selectedEventId;function Xa(e){const t=Zu(new URL(window.location.href),e);window.history.replaceState(void 0,"",t.href)}function Gu(){const e=(0,Qe.An)(zu),t=(0,j.vE)(e),s=(0,Qe.An)(Fu),a=(0,Qe.An)(Uu),[i]=(0,Ls.Nr)(a,500,{maxWait:500}),r=O(Wu);(0,l.useEffect)(()=>{Xa({time:s?i:void 0})},[s,i]),(0,l.useEffect)(()=>{t!=null&&Xa({ds:t.sourceId,dsParams:Lu.Z({...t.parameters,eventId:r},Ou.Z)})},[r,t])}function Qu(){return Gu(),null}function Yu(){const{syncAdapters:e}=(0,ze.b)();return(0,l.useMemo)(()=>e?(0,n.jsxs)(n.Fragment,{children:[...e]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Qu,{}),(0,n.jsx)(ju,{})]}),[e])}var Hu=o(68181),Vu=o(8301),Ku=o(29796),Wo=o(16727),$a=o(43234);const Ja=(0,L.ZL)()((e,t,s)=>({root:{containerType:"inline-size"},aliasedTopicName:{color:e.palette.primary.main,display:"block",textAlign:"start"},row:{whiteSpace:"nowrap",boxSizing:"border-box",[`:not(:hover) .${s.dragHandle}`]:{visibility:"hidden"},":focus":{outline:`1px solid ${e.palette.primary.main}`,outlineOffset:-1,[`.${s.dragHandle}`]:{visibility:"visible"}},position:"relative",display:"flex",alignItems:"center",height:"100%",gap:e.spacing(.75),paddingLeft:e.spacing(2),paddingRight:e.spacing(.75),backgroundColor:e.palette.background.paper,borderTop:`1px solid ${e.palette.action.selected}`,[`&.${s.isDragging}:active`]:{backgroundColor:(0,de.Z)(e.palette.primary.main).setAlpha(e.palette.action.hoverOpacity).toRgbString(),outline:`1px solid ${e.palette.primary.main}`,outlineOffset:-1,borderRadius:e.shape.borderRadius}},fieldRow:{borderTop:`1px solid ${e.palette.background.paper}`,backgroundColor:e.palette.action.hover},dragHandle:{opacity:.6,cursor:"grab"},isDragging:{}}));function Xu({messagePathResult:e,style:t}){const{cx:s,classes:a}=Ja(),{fullPath:i,suffix:{pathSuffix:r,type:c,isLeaf:d},topic:p}=e.item,{connectDragSource:h,cursor:f,isDragging:m}=(0,$a.W)({path:i,rootSchemaName:p.schemaName,isTopic:!1,isLeaf:d});return(0,n.jsxs)("div",{ref:h,className:s(a.row,a.fieldRow,{[a.isDragging]:m}),style:{...t,cursor:f},children:[(0,n.jsxs)(X.Z,{flex:"auto",direction:"row",gap:2,overflow:"hidden",children:[(0,n.jsx)(ge.Z,{variant:"body2",noWrap:!0,children:(0,n.jsx)(Wo.e,{str:r,indices:e.positions,offset:e.item.offset})}),(0,n.jsx)(ge.Z,{variant:"caption",color:"text.secondary",noWrap:!0,children:c})]}),(0,n.jsx)("div",{"data-testid":"TopicListDragHandle",style:{cursor:f},className:a.dragHandle,children:(0,n.jsx)(fo.TXB,{})})]})}var $u=o(72283);const Ju=(0,L.ZL)()(e=>({root:{display:"flex",borderColor:e.palette.action.selected,borderRadius:"1em",color:e.palette.text.secondary,backgroundColor:e.palette.background.paper,["@container (max-width: 320px)"]:{display:"none"}},stat:{whiteSpace:"nowrap",minWidth:"1em",textAlign:"center",fontSize:e.typography.caption.fontSize,color:e.palette.text.secondary,paddingBlock:e.spacing(.25),fontFeatureSettings:`${e.typography.fontFeatureSettings}, 'tnum'`,"&:nth-child(1)":{paddingInlineStart:e.spacing(.75)},"&:nth-last-child(1)":{paddingInlineEnd:e.spacing(.75)}},divider:{borderColor:e.palette.action.selected,marginInline:e.spacing(.5)}}));function qu({topicName:e}){const{classes:t}=Ju();return(0,n.jsxs)($u.Z,{variant:"outlined",className:t.root,children:[(0,n.jsx)("div",{className:t.stat,"data-topic":e,"data-topic-stat":"frequency",children:"\u2013"}),(0,n.jsx)(Ce.Z,{className:t.divider,orientation:"vertical",flexItem:!0}),(0,n.jsx)("div",{className:t.stat,"data-topic":e,"data-topic-stat":"count",children:"\u2013"})]})}function _u({topicResult:e,style:t}){const{cx:s,classes:a}=Ja(),i=e.item,{connectDragSource:r,connectDragPreview:c,cursor:d,isDragging:p}=(0,$a.W)({path:i.name,rootSchemaName:i.schemaName,isTopic:!0,isLeaf:!1});return(0,n.jsxs)("div",{ref:c,className:s(a.row,{[a.isDragging]:p}),style:t,children:[(0,n.jsxs)(X.Z,{flex:"auto",overflow:"hidden",children:[(0,n.jsxs)(ge.Z,{variant:"body2",noWrap:!0,children:[(0,n.jsx)(Wo.e,{str:i.name,indices:e.positions}),i.aliasedFromName!=null&&(0,n.jsxs)(ge.Z,{variant:"caption",className:a.aliasedTopicName,children:["from ",i.aliasedFromName]})]}),(0,n.jsx)(ge.Z,{variant:"caption",color:"text.secondary",children:i.schemaName==null?"\u2014":(0,n.jsx)(Wo.e,{str:i.schemaName,indices:e.positions,offset:i.name.length+1})})]}),(0,n.jsx)(qu,{topicName:i.name}),(0,n.jsx)("div",{"data-testid":"TopicListDragHandle",ref:r,style:{cursor:d},className:a.dragHandle,children:(0,n.jsx)(fo.TXB,{})})]})}var Go=o(16037),Qs=o(67154),qa=o(1012);function*_a(e,t,s,a){for(const{name:i,isArray:r,isConstant:c,isComplex:d,type:p}of e.definitions){if(c===!0)continue;const h=`${s}.${(0,qa.UY)(i)}`;if(yield{pathSuffix:h,type:r===!0?`${p}[]`:p,isLeaf:d!==!0},d===!0){if(a.includes(p))continue;const f=t.get(p);if(!f)continue;yield*_a(f,t,r===!0?`${h}[:]`:h,[...a,p])}}}function ep(e,t){const s=[],a=new Map,i=Qs.Z(e.filter(r=>r.schemaName!=null),r=>r.schemaName);for(const[r,c]of Object.entries(i)){const d=t.get(r);if(d)for(const p of _a(d,t,"",[r]))for(const h of c){const f=(0,qa.dH)(h.name),m={topic:h,suffix:p,fullPath:f+p.pathSuffix,offset:f.length};s.push(m);let y=a.get(h.name);y||(y=[],a.set(h.name,y)),y.push(m)}}return{items:s,itemsByTopicName:a}}function ei(e){return{item:e,score:0,positions:new Set,start:0,end:0}}function tp(e){const{topics:t,datatypes:s,filterText:a}=e,i=(0,l.useMemo)(()=>new Go.Av(t,{selector:f=>`${f.name}|${f.schemaName}`}),[t]),r=(0,l.useMemo)(()=>ep(t,s),[t,s]),c=(0,l.useMemo)(()=>new Go.Av(r.items,{selector:f=>f.fullPath,match(f){return Go.x8.call(this,f).filter(y=>y.end>y.item.offset+1)}}),[r]),d=(0,l.useMemo)(()=>a?i.find(a):t.map(ei),[a,t,i]),p=(0,l.useMemo)(()=>a?c.find(a):[],[a,c]);return(0,l.useMemo)(()=>{const f=[],m=Qs.Z(p,z=>z.item.topic.name),y=new Map,B=new Map;for(const z of d)y.set(z.item.name,z.item),B.set(z.item.name,z);for(const{item:{topic:z}}of p)y.set(z.name,z);const k=Array.from(y.values()).sort((z,G)=>{const q=B.has(z.name),V=B.has(G.name);return q&&!V?-1:!q&&V?1:z.name.localeCompare(G.name)});for(const z of k){f.push({type:"topic",item:B.get(z.name)??ei(z)});const G=m[z.name];if(G!=null)for(const q of G)f.push({type:"schema",item:q})}return f},[d,p])}const np=(0,L.ZL)()((e,t,s)=>({root:{width:"100%",height:"100%",overflow:"hidden",display:"flex",flexDirection:"column"},appBar:{top:0,zIndex:e.zIndex.appBar,padding:e.spacing(.5),position:"sticky",backgroundColor:e.palette.background.paper},listItem:{backgroundColor:e.palette.background.paper,containerType:"inline-size",paddingRight:0,"&.isDragging:active":{backgroundColor:(0,de.Z)(e.palette.primary.main).setAlpha(e.palette.action.hoverOpacity).toRgbString(),outline:`1px solid ${e.palette.primary.main}`,outlineOffset:-1,borderRadius:e.shape.borderRadius},[`:not(:hover) .${s.dragHandle}`]:{visibility:"hidden"}},listItemText:{marginTop:e.spacing(.5),marginBottom:e.spacing(.5)},startAdornment:{display:"flex"},dragHandle:{opacity:.6,cursor:"grab"}})),sp=({playerState:e})=>e.presence;function op(){const{classes:e,cx:t}=np(),[s,a]=(0,l.useState)(""),[i]=(0,Ls.Nr)(s,50),r=(0,Qe.An)(sp),{topics:c,datatypes:d}=(0,Eo.Ui)(),p=(0,l.useRef)(null),h=tp({topics:c,datatypes:d,filterText:i});return(0,l.useEffect)(()=>{p.current?.resetAfterIndex(0)},[h]),r===De.m.NOT_PRESENT?(0,n.jsx)(Xn.Z,{children:"No data source selected"}):r===De.m.ERROR?(0,n.jsx)(Xn.Z,{children:"An error occurred"}):r===De.m.INITIALIZING?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("header",{className:e.appBar,children:(0,n.jsx)(Ot.Z,{disabled:!0,variant:"filled",fullWidth:!0,placeholder:"Waiting for data...",InputProps:{size:"small",startAdornment:(0,n.jsx)(js.Z,{fontSize:"small"})}})}),(0,n.jsx)(ys.Z,{dense:!0,disablePadding:!0,children:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15].map(f=>(0,n.jsx)(vs.ZP,{className:t(e.listItem,"loading"),divider:!0,children:(0,n.jsx)(Un.Z,{className:e.listItemText,primary:(0,n.jsx)(ts.Z,{animation:!1,width:"20%"}),secondary:(0,n.jsx)(ts.Z,{animation:"wave",width:"55%"}),secondaryTypographyProps:{variant:"caption"}})},f))},"loading")]}):(0,n.jsxs)("div",{className:e.root,children:[(0,n.jsx)("header",{className:e.appBar,children:(0,n.jsx)(Ot.Z,{id:"topic-filter",variant:"filled",disabled:r!==De.m.PRESENT,onChange:f=>{a(f.target.value)},value:s,fullWidth:!0,placeholder:"Filter by topic or schema name\u2026",InputProps:{size:"small",startAdornment:(0,n.jsx)("label",{className:e.startAdornment,htmlFor:"topic-filter",children:(0,n.jsx)(js.Z,{fontSize:"small"})}),endAdornment:s&&(0,n.jsx)(be.Z,{size:"small",title:"Clear filter",onClick:()=>{a("")},edge:"end",children:(0,n.jsx)(bo.Z,{fontSize:"small"})})}})}),h.length>0?(0,n.jsx)("div",{style:{flex:"1 1 100%"},children:(0,n.jsx)(Hu.qj,{children:({width:f,height:m})=>(0,n.jsx)(Vu.S_,{ref:p,width:f,height:m,itemCount:h.length,itemSize:y=>h[y]?.type==="topic"?50:28,overscanCount:10,children:({index:y,style:B})=>{const k=h[y];switch(k.type){case"topic":return(0,n.jsx)(_u,{style:B,topicResult:k.item});case"schema":return(0,n.jsx)(Xu,{style:B,messagePathResult:k.item})}}})})}):(0,n.jsxs)(Xn.Z,{children:[r===De.m.PRESENT&&s?`No topics or datatypes matching 
 \u201C${s}\u201D`:"No topics available. ",r===De.m.RECONNECTING&&"Waiting for connection"]}),(0,n.jsx)(Ku.v,{interval:6})]})}var ap=o(84585),ti=o(36423),ip=o(8640),rp=o(47824),lp=o(2784);const cp=(0,L.ZL)()((e,t,s)=>({root:{"@media (pointer: fine)":{[`&:not(:hover) .${s.copyButton}`]:{visibility:"hidden"}}},copyButton:{top:0,right:0,zIndex:e.zIndex.mobileStepper,"&.MuiButton-root":{position:"absolute",paddingLeft:e.spacing(1),paddingRight:e.spacing(1),margin:e.spacing(.75),minWidth:"auto"}},input:{font:"inherit",flex:"auto",".MuiInputBase-input":{padding:0},"&.Mui-error":{color:e.palette.error.main}},edgeEnd:{marginRight:e.spacing(-1.625)},editorWrapper:{position:"relative",backgroundColor:e.palette.grey[50]},listItemButton:{"&:focus-within":{backgroundColor:"transparent"},"&.Mui-selected":{color:e.palette.primary.main,transition:"background-color 300ms ease-in-out"}},listItemText:{marginTop:e.spacing(.125),marginBottom:e.spacing(.125)}})),dp=(e,t,s,a,i)=>{const r=Object.keys(s);i({...ns.Z(s,r.slice(0,a)),[e]:s[t],...ns.Z(s,r.slice(a+1))})};function up(e){const{name:t,selected:s=!1,index:a}=e,{classes:i}=cp(),[r,c]=(0,l.useState)(),[d,p]=(0,l.useState)(!0),[h,f]=lp.useState(void 0),[m,y]=(0,l.useState)(!1),B=Boolean(h),{globalVariables:k,setGlobalVariables:z,overwriteGlobalVariables:G}=(0,ti.Z)(),q=vt=>{f(vt.currentTarget)},V=()=>{f(void 0)},me=(0,Le.z)(),le=(0,l.useCallback)(()=>{z({[t]:void 0}),me.logEvent(Te.q.VARIABLE_DELETE),V()},[me,t,z]),oe=(0,l.useMemo)(()=>k[t],[k,t]),te=(0,l.useCallback)(vt=>{z({[t]:vt}),y(!1)},[t,z]),Z=()=>{r!=null&&k[r]==null&&t!==r&&dp(r,t,k,a,G),c(void 0)},Ae=(0,l.useRef)(null),nt=Ae.current?.contains(document.activeElement)===!0,xt=s&&!nt,Et=r!=null&&r!==t&&k[r]!=null,Pt=(0,l.useCallback)(()=>JSON.stringify(oe,void 0,2)??"",[oe]);return(0,n.jsxs)(X.Z,{className:i.root,ref:Ae,children:[(0,n.jsx)(vs.ZP,{dense:!0,disablePadding:!0,secondaryAction:(0,n.jsxs)(X.Z,{className:i.edgeEnd,direction:"row",alignItems:"center",gap:.25,children:[(0,n.jsx)(be.Z,{size:"small",id:"variable-action-button","data-testid":"variable-action-button","aria-controls":d?"variable-action-menu":void 0,"aria-haspopup":"true","aria-expanded":d?"true":void 0,onClick:q,children:(0,n.jsx)(Co.Z,{fontSize:"small"})}),(0,n.jsx)(ve.Z,{id:"variable-action-menu",anchorEl:h,open:B,onClose:V,MenuListProps:{"aria-labelledby":"variable-action-button",dense:!0},children:(0,n.jsx)(Se.Z,{onClick:le,children:(0,n.jsx)(ge.Z,{color:"error.main",variant:"inherit",children:"Delete variable"})})})]}),children:(0,n.jsx)(vo.Z,{className:i.listItemButton,selected:xt,onClick:()=>{p(!d)},children:(0,n.jsx)(Un.Z,{className:i.listItemText,primary:(0,n.jsxs)(X.Z,{direction:"row",alignItems:"center",style:{marginLeft:-12},children:[(0,n.jsx)(_n.Z,{style:{transform:d?void 0:"rotate(-90deg)"}}),(0,n.jsx)(ip.ZP,{className:i.input,autoFocus:t==="",error:Et,value:r??t,placeholder:"variable_name","data-testid":`global-variable-key-input-${t}`,onClick:vt=>{vt.stopPropagation()},onFocus:()=>{r===""&&p(!0)},onChange:vt=>{c(vt.target.value)},onBlur:Z,endAdornment:Et&&(0,n.jsx)(H.Z,{arrow:!0,title:"A variable with this name already exists. Please select a unique variable name to save changes.",children:(0,n.jsx)(To.Z,{className:i.edgeEnd,fontSize:"small",color:"error"})})})]}),primaryTypographyProps:{component:"div",fontWeight:600,variant:"body2"}})})}),d&&(0,n.jsxs)("div",{className:i.editorWrapper,children:[(0,n.jsx)(Ce.Z,{}),(0,n.jsx)(Zo.Z,{className:i.copyButton,size:"small",color:m?"primary":"inherit",getText:Pt,children:m?"Copied":"Copy"}),(0,n.jsx)(rp.Z,{value:oe,onChange:te})]}),(0,n.jsx)(Ce.Z,{})]})}const ni=1500;function pp(){const{globalVariables:e,setGlobalVariables:t}=(0,ti.Z)(),s=(0,l.useMemo)(()=>Object.keys(e),[e]),a=(0,l.useRef)(!0),i=(0,Le.z)();(0,l.useEffect)(()=>{const p=setTimeout(()=>a.current=!1,ni);return()=>{clearTimeout(p)}},[]);const r=(0,l.useRef)(e),[c,d]=(0,l.useState)([]);return(0,l.useEffect)(()=>{if(a.current){r.current=e;return}const p=ap.Z(Object.keys(e),Object.keys(r.current??{})).filter(f=>r.current?.[f]!==e[f]);d(p),r.current=e;const h=setTimeout(()=>{d([])},ni);return()=>{clearTimeout(h)}},[e,a]),(0,n.jsxs)(X.Z,{flex:"auto",fullWidth:!0,overflowX:"auto",children:[s.map((p,h)=>(0,n.jsx)(up,{name:p,selected:!a.current&&c.includes(p),index:h},p)),(0,n.jsx)(X.Z,{direction:"row",padding:1,children:(0,n.jsx)($.Z,{color:"inherit",fullWidth:!0,"data-testid":"add-variable-button",variant:"contained",disabled:e[""]!=null,onClick:()=>{t({"":'""'}),i.logEvent(Te.q.VARIABLE_ADD)},children:"Add variable"},"add-global-variable")})]})}var fp=o(89025),hp=o(13787),xs=o(2940);const si=o.g.ctxbridge,gp=(0,L.ZL)()({checkbox:{"&.MuiCheckbox-root":{paddingTop:0}},formControlLabel:{"&.MuiFormControlLabel-root":{alignItems:"start"}}});function mp(){const{t:e}=(0,ee.$G)("appSettings");return[{key:K.o.SHOW_DEBUG_PANELS,name:e("studioDebugPanels"),description:(0,n.jsx)(n.Fragment,{children:e("studioDebugPanelsDescription")})},{key:K.o.ENABLE_MEMORY_USE_INDICATOR,name:e("memoryUseIndicator"),description:(0,n.jsx)(n.Fragment,{children:e("memoryUseIndicatorDescription")})}]}function yp(e){const{feature:t}=e,{classes:s}=gp(),a=(0,Le.z)(),[i,r]=(0,nn.b)(t.key);return(0,n.jsx)(xs.Z,{className:s.formControlLabel,control:(0,n.jsx)(es.Z,{className:s.checkbox,checked:i??!1,onChange:(c,d)=>{r(d),a.logEvent(Te.q.EXPERIMENTAL_FEATURE_TOGGLE,{feature:t.key,checked:d})}}),label:(0,n.jsxs)(X.Z,{gap:.25,paddingLeft:.5,children:[(0,n.jsx)(ge.Z,{fontWeight:600,children:t.name}),(0,n.jsx)(ge.Z,{variant:"body2",color:"text.secondary",children:t.description})]})})}const vp=()=>{const e=mp(),{t}=(0,ee.$G)("appSettings");return(0,n.jsxs)(X.Z,{gap:2,children:[e.length===0&&(0,n.jsx)(ge.Z,{fontStyle:"italic",children:t("noExperimentalFeatures")}),e.map(s=>(0,n.jsx)(yp,{feature:s},s.key))]})};var Ap=o(83717),bp=o(78639),Qo=o(4812),xp=o(46964),Ep=o(49436);const oi=(0,l.createContext)(()=>{});oi.displayName="LinkHandlerContext";const Cp=oi,Sp=(0,L.ZL)()(({palette:e,shape:t,spacing:s,typography:a,shadows:i})=>({root:{fontFamily:a.body2.fontFamily,fontSize:a.body2.fontSize,fontWeight:a.body2.fontWeight,lineHeight:a.body2.lineHeight,backgroundColor:"transparent",color:e.text.secondary,"h1, h2, h3, h4, h5, h6":{color:e.text.primary,"&:first-child":{marginTop:0}},h1:{fontFamily:a.h4.fontFamily,fontSize:a.h4.fontSize,lineHeight:a.h4.lineHeight,marginBottom:s(1),fontWeight:500},h2:{fontFamily:a.h5.fontFamily,fontSize:a.h5.fontSize,lineHeight:a.h5.lineHeight,marginBottom:s(1),fontWeight:500},h3:{fontFamily:a.h6.fontFamily,fontSize:a.h6.fontSize,lineHeight:a.h6.lineHeight,marginBottom:s(1),color:e.text.secondary,fontWeight:500},h4:{fontFamily:a.subtitle1.fontFamily,fontSize:a.subtitle1.fontSize,lineHeight:a.subtitle1.lineHeight,marginBottom:s(.5),color:e.text.secondary,fontWeight:500},"h5, h6":{fontFamily:a.body1.fontFamily,fontSize:a.body1.fontSize,lineHeight:a.body1.lineHeight,marginBottom:s(.5),color:e.text.secondary,fontWeight:500},"ol, ul":{paddingLeft:s(2.5),marginBottom:s(2.5)},li:{margin:s(.5,0)},"b, strong":{fontWeight:"700 !important"},"p, ul":{margin:s(1,0),"&:only-child":{margin:s(.5,0)}},img:{maxWidth:"100%"},pre:{whiteSpace:"pre-wrap",fontFamily:rt.R.MONOSPACE,backgroundColor:e.action.hover,padding:s(0,.5),borderRadius:i[2],code:{backgroundColor:"transparent",padding:0}},code:{fontFamily:rt.R.MONOSPACE,backgroundColor:e.action.hover,borderRadius:"0.2em",padding:s(0,.5)},kbd:{display:"inline-flex",flex:"none",fontFamily:rt.R.MONOSPACE,color:e.text.secondary,backgroundColor:e.background.default,boxShadow:`inset 0 1px 0 ${e.action.hover}`,borderRadius:t.borderRadius,fontSize:a.body2.fontSize,padding:s(0,.5),fontWeight:500,minWidth:20,alignItems:"center",justifyContent:"center"},table:{borderCollapse:"collapse",borderSpacing:0,margin:s(1,-.5),border:`1px solid ${e.divider}`},"td, th":{padding:s(.5),borderBottom:`1px solid ${e.divider}`,borderRight:`1px solid ${e.divider}`,"&:last-child":{borderRight:"none"}},th:{whiteSpace:"nowrap"},tr:{"&:last-child":{"td, th":{borderBottom:"none"}}}}}));function ai(e){const{children:t,style:s,allowMarkdownHtml:a}=e,{classes:i}=Sp(),r=(0,l.useContext)(Cp),c=(0,l.useCallback)(d=>(0,n.jsx)(cn.Z,{color:"primary",underline:"hover",variant:"inherit",href:d.href,rel:"noopener noreferrer",onClick:p=>{r(p,d.href??"")},target:"_blank",children:d.children}),[r]);return(0,n.jsx)("div",{className:i.root,style:s,children:typeof t=="string"?(0,n.jsx)(xp.D,{rehypePlugins:a===!0?[Ep.Z]:[],components:{a:c},children:t}):t})}var Bn=o(51390);const Yo=(0,l.createContext)(void 0);Yo.displayName="ExtensionMarketplaceContext";function ii(){const e=(0,l.useContext)(Yo);if(e==null)throw new Error("An ExtensionMarketplaceContext provider is required to useExtensionMarketplace");return e}const Tp=Yo;var Gn=o(61969);const Pp=(0,L.ZL)()(e=>({backButton:{marginLeft:e.spacing(-1.5),marginBottom:e.spacing(1)},installButton:{minWidth:100}}));function Ip({extension:e,onClose:t,installed:s}){const{classes:a}=Pp(),[i,r]=(0,l.useState)(s),[c,d]=(0,l.useState)(0),p=(0,gs.Z)(),h=(0,Bn.I)(Z=>Z.downloadExtension),f=(0,Bn.I)(Z=>Z.installExtension),m=(0,Bn.I)(Z=>Z.uninstallExtension),y=ii(),{enqueueSnackbar:B}=(0,we.Ds)(),k=e.readme,z=e.changelog,G=e.foxe!=null,q=e.namespace!=="org",{value:V}=(0,Qo.Z)(async()=>k!=null?await y.getMarkdown(k):"",[y,k]),{value:me}=(0,Qo.Z)(async()=>z!=null?await y.getMarkdown(z):"",[y,z]),le=(0,Le.z)(),oe=(0,l.useCallback)(async()=>{if(!(0,Gn.Z)()){B("Download the desktop app to use marketplace extensions.",{variant:"error"});return}const Z=e.foxe;try{if(Z==null)throw new Error(`Cannot install extension ${e.id}, "foxe" URL is missing`);const Ae=await h(Z);await f("local",Ae),p()&&(r(!0),le.logEvent(Te.q.EXTENSION_INSTALL,{type:e.id}))}catch(Ae){B(`Failed to download extension ${e.id}. ${Ae.message}`,{variant:"error"})}},[le,h,B,e.foxe,e.id,f,p]),te=(0,l.useCallback)(async()=>{await m(e.namespace??"local",e.id),p()&&(r(!1),le.logEvent(Te.q.EXTENSION_UNINSTALL,{type:e.id}))},[le,e.id,e.namespace,p,m]);return(0,n.jsxs)(X.Z,{fullHeight:!0,flex:"auto",gap:1,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)($.Z,{className:a.backButton,onClick:t,size:"small",startIcon:(0,n.jsx)(yo.Z,{}),children:"Back"}),(0,n.jsx)(ge.Z,{variant:"h3",fontWeight:500,children:e.name})]}),(0,n.jsxs)(X.Z,{gap:1,alignItems:"flex-start",children:[(0,n.jsxs)(X.Z,{gap:.5,paddingBottom:1,children:[(0,n.jsxs)(X.Z,{direction:"row",gap:1,alignItems:"baseline",children:[(0,n.jsx)(cn.Z,{variant:"body2",color:"primary",href:e.homepage,target:"_blank",underline:"hover",children:e.id}),(0,n.jsx)(ge.Z,{variant:"caption",color:"text.secondary",children:`v${e.version}`}),(0,n.jsx)(ge.Z,{variant:"caption",color:"text.secondary",children:e.license})]}),(0,n.jsx)(ge.Z,{variant:"subtitle2",gutterBottom:!0,children:e.publisher}),(0,n.jsx)(ge.Z,{variant:"body2",gutterBottom:!0,children:e.description})]}),i&&q?(0,n.jsx)($.Z,{className:a.installButton,size:"small",color:"inherit",variant:"contained",onClick:te,children:"Uninstall"},"uninstall"):G&&(0,n.jsx)($.Z,{className:a.installButton,size:"small",color:"inherit",variant:"contained",onClick:oe,children:"Install"},"install")]}),(0,n.jsxs)(X.Z,{paddingTop:2,style:{marginLeft:-16,marginRight:-16},children:[(0,n.jsxs)(gn.Z,{textColor:"inherit",value:c,onChange:(Z,Ae)=>{d(Ae)},children:[(0,n.jsx)(tn.Z,{disableRipple:!0,label:"README",value:0}),(0,n.jsx)(tn.Z,{disableRipple:!0,label:"CHANGELOG",value:1})]}),(0,n.jsx)(Ce.Z,{})]}),(0,n.jsxs)(X.Z,{flex:"auto",paddingY:2,children:[c===0&&(0,n.jsx)(ai,{children:V}),c===1&&(0,n.jsx)(ai,{children:me})]})]})}var Mp="../../packages/studio-base/src/components/ExtensionsSettings/index.tsx";const Dp=ae.ZP.getLogger(Mp),Bp=(0,L.ZL)()(e=>({listItemButton:{"&:hover":{color:e.palette.primary.main}}}));function wp(e){switch(e){case"org":return"Organization";default:return e}}function ri(e){const{entry:{id:t,description:s,name:a,publisher:i,version:r},onClick:c}=e,{classes:d}=Bp();return(0,n.jsx)(vs.ZP,{disablePadding:!0,children:(0,n.jsx)(vo.Z,{className:d.listItemButton,onClick:c,children:(0,n.jsx)(Un.Z,{disableTypography:!0,primary:(0,n.jsxs)(X.Z,{direction:"row",alignItems:"baseline",gap:.5,children:[(0,n.jsx)(ge.Z,{variant:"subtitle2",fontWeight:600,children:a}),(0,n.jsx)(ge.Z,{variant:"caption",color:"text.secondary",children:r})]}),secondary:(0,n.jsxs)(X.Z,{gap:.5,children:[(0,n.jsx)(ge.Z,{variant:"body2",color:"text.secondary",children:s}),(0,n.jsx)(ge.Z,{color:"text.primary",variant:"body2",children:i})]})})})},t)}function Rp(){const[e,t]=(0,l.useState)(void 0),s=(0,Bn.I)(f=>f.installedExtensions),a=ii(),[i,r]=(0,La.Z)(async()=>await a.getAvailableExtensions(),[a]),c=(0,l.useMemo)(()=>Q.Z(i.value??[],f=>f.id),[i]),d=(0,l.useMemo)(()=>(s??[]).map(f=>{const m=c[f.id];return m!=null?{...m,namespace:f.namespace}:{id:f.id,installed:!0,name:f.displayName,displayName:f.displayName,description:f.description,publisher:f.publisher,homepage:f.homepage,license:f.license,version:f.version,keywords:f.keywords,namespace:f.namespace,qualifiedName:f.qualifiedName}}),[s,c]),p=(0,l.useMemo)(()=>Qs.Z(d,f=>f.namespace),[d]),h=(0,l.useMemo)(()=>bp.Z(i.value??[],s??[],(f,m)=>f.id===m.id&&f.namespace===m.namespace),[i,s]);return(0,l.useEffect)(()=>{r().catch(f=>{Dp.error(f)})},[r]),e!=null?(0,n.jsx)(Ip,{installed:e.installed,extension:e.entry,onClose:()=>{t(void 0)}}):(0,n.jsxs)(X.Z,{gap:1,children:[i.error&&(0,n.jsxs)(Nn.Z,{severity:"error",action:(0,n.jsx)($.Z,{color:"inherit",onClick:async()=>await r(),children:"Retry"}),children:[(0,n.jsx)(Ap.Z,{children:"Failed to retrieve the list of available marketplace extensions"}),"Check your internet connection and try again."]}),Dn.Z(p)?(0,n.jsx)(ys.Z,{children:(0,n.jsx)(vs.ZP,{children:(0,n.jsx)(Un.Z,{primary:"No installed extensions"})})}):Object.entries(p).map(([f,m])=>(0,n.jsxs)(ys.Z,{children:[(0,n.jsx)(X.Z,{paddingY:.25,paddingX:2,children:(0,n.jsx)(ge.Z,{component:"li",variant:"overline",color:"text.secondary",children:wp(f)})}),m.map(y=>(0,n.jsx)(ri,{entry:y,onClick:()=>{t({installed:!0,entry:y})}},`${y.id}`))]},f)),(0,n.jsxs)(ys.Z,{children:[(0,n.jsx)(X.Z,{paddingY:.25,paddingX:2,children:(0,n.jsx)(ge.Z,{component:"li",variant:"overline",color:"text.secondary",children:"Available"})}),h.map(f=>(0,n.jsx)(ri,{entry:f,onClick:()=>{t({installed:!1,entry:f})}},`${f.id}_${f.namespace}`))]})]})}var jp=o(27045),li=o(86231),Lp=o(10222),Op=o(85584),Np=o(55404),Zp=o(54764),Ys=o.n(Zp),ci=o(2661),Mt;(function(e){e.ASK="ask",e.WEB="web",e.DESKTOP="desktop"})(Mt||(Mt={}));const kp=[1,3,5,10,15,20,30,60],Fp=[{key:"en",value:"English"},{key:"zh",value:"\u4E2D\u6587"},{key:"ja",value:"\u65E5\u672C\u8A9E"}],Hs=(0,L.ZL)()(e=>({autocompleteInput:{"&.MuiOutlinedInput-input":{padding:0}},checkbox:{"&.MuiCheckbox-root":{paddingTop:0}},formControlLabel:{"&.MuiFormControlLabel-root":{alignItems:"start"}},toggleButton:{display:"flex !important",flexDirection:"column",gap:e.spacing(.75),lineHeight:"1 !important"}}));function Ho(e){const t=Ys().tz(e),s=t.zoneAbbr(),a=t.utcOffset(),i=(a>=0?"+":"")+Ys().duration(a,"minutes").format("hh:mm",{trim:!1});return e===s?`${s} (${i})`:`${e} (${s}, ${i})`}function Up(){const{classes:e}=Hs(),[t="system",s]=(0,nn.b)(K.o.COLOR_SCHEME),{t:a}=(0,ee.$G)("appSettings"),i=(0,l.useCallback)((r,c)=>{c!=null&&s(c)},[s]);return(0,n.jsxs)(X.Z,{children:[(0,n.jsxs)(Wn.Z,{children:[a("colorScheme"),":"]}),(0,n.jsxs)($n.Z,{color:"primary",size:"small",fullWidth:!0,exclusive:!0,value:t,onChange:i,children:[(0,n.jsxs)(Xt.Z,{className:e.toggleButton,value:"dark",children:[(0,n.jsx)(Lp.Z,{})," ",a("dark")]}),(0,n.jsxs)(Xt.Z,{className:e.toggleButton,value:"light",children:[(0,n.jsx)(jp.Z,{})," ",a("light")]}),(0,n.jsxs)(Xt.Z,{className:e.toggleButton,value:"system",children:[(0,n.jsx)(li.Z,{})," ",a("followSystem")]})]})]})}function zp(){const{classes:e}=Hs(),{t}=(0,ee.$G)("appSettings"),[s,a]=(0,nn.b)(K.o.TIMEZONE),i=(0,l.useMemo)(()=>({key:"detect",label:`Detect from system: ${Ho(Ys().tz.guess())}`,data:void 0}),[]),r=(0,l.useMemo)(()=>[i,{key:"zone:UTC",label:`${Ho("UTC")}`,data:"UTC"},{key:"sep",label:"",divider:!0}],[i]),c=(0,l.useMemo)(()=>(0,dn.Z)(Ys().tz.names(),h=>{if(h!=="UTC")return{key:`zone:${h}`,label:Ho(h),data:h}}),[]),d=(0,l.useMemo)(()=>[...r,...c],[r,c]),p=(0,l.useMemo)(()=>s!=null?d.find(h=>h.data===s)??i:i,[d,i,s]);return(0,n.jsxs)(Ra.Z,{fullWidth:!0,children:[(0,n.jsxs)(ge.Z,{color:"text.secondary",marginBottom:.5,children:[t("displayTimestampsIn"),":"]}),(0,n.jsx)(va.Z,{options:[...r,...c],value:p,renderOption:(h,f)=>f.divider===!0?(0,n.jsx)(Ce.Z,{},f.key):(0,l.createElement)("li",{...h,key:f.key},f.label),renderInput:h=>(0,n.jsx)(Ot.Z,{...h,inputProps:{...h.inputProps,className:e.autocompleteInput}}),onChange:(h,f)=>void a(f?.data)})]})}function Wp({orientation:e="vertical"}){const{timeFormat:t,setTimeFormat:s}=(0,at.v)(),{t:a}=(0,ee.$G)("appSettings"),[i]=(0,nn.b)(K.o.TIMEZONE),r={sec:946713600,nsec:0};return(0,n.jsxs)(X.Z,{children:[(0,n.jsxs)(Wn.Z,{children:[a("timestampFormat"),":"]}),(0,n.jsxs)($n.Z,{color:"primary",size:"small",orientation:e,fullWidth:!0,exclusive:!0,value:t,onChange:(c,d)=>d!=null&&void s(d),children:[(0,n.jsx)(Xt.Z,{value:"SEC","data-testid":"timeformat-seconds",children:(0,Ve.Eo)(r)}),(0,n.jsx)(Xt.Z,{value:"TOD","data-testid":"timeformat-local",children:(0,Fe.mr)(r,i)})]})]})}function Gp(){const{classes:e}=Hs(),{t}=(0,ee.$G)("appSettings"),[s,a]=(0,nn.b)(K.o.LAUNCH_PREFERENCE);let i;switch(s){case Mt.WEB:case Mt.DESKTOP:case Mt.ASK:i=s;break;default:i=Mt.WEB}return(0,n.jsxs)(X.Z,{children:[(0,n.jsxs)(Wn.Z,{children:[t("openLinksIn"),":"]}),(0,n.jsxs)($n.Z,{color:"primary",size:"small",fullWidth:!0,exclusive:!0,value:i,onChange:(r,c)=>c!=null&&void a(c),children:[(0,n.jsxs)(Xt.Z,{value:Mt.WEB,className:e.toggleButton,children:[(0,n.jsx)(Np.Z,{})," ",t("webApp")]}),(0,n.jsxs)(Xt.Z,{value:Mt.DESKTOP,className:e.toggleButton,children:[(0,n.jsx)(li.Z,{})," ",t("desktopApp")]}),(0,n.jsxs)(Xt.Z,{value:Mt.ASK,className:e.toggleButton,children:[(0,n.jsx)(Op.Z,{})," ",t("askEachTime")]})]})]})}function Qp(){const{t:e}=(0,ee.$G)("appSettings"),[t,s]=(0,nn.b)(K.o.MESSAGE_RATE),a=(0,l.useMemo)(()=>kp.map(i=>({key:i,text:`${i}`,data:i})),[]);return(0,n.jsxs)(X.Z,{children:[(0,n.jsxs)(Wn.Z,{children:[e("messageRate")," (Hz):"]}),(0,n.jsx)(Po.Z,{value:t??60,fullWidth:!0,onChange:i=>void s(i.target.value),children:a.map(i=>(0,n.jsx)(Se.Z,{value:i.key,children:i.text},i.key))})]})}function Yp(){const[e=!0,t]=(0,nn.b)(K.o.UPDATES_ENABLED),{classes:s}=Hs();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ge.Z,{color:"text.secondary",marginBottom:.5,children:"Updates:"}),(0,n.jsx)(xs.Z,{className:s.formControlLabel,control:(0,n.jsx)(es.Z,{className:s.checkbox,checked:e,onChange:(a,i)=>void t(i)}),label:"Automatically install updates"})]})}function Hp(){const[e,t]=(0,nn.b)(K.o.ROS_PACKAGE_PATH),s=(0,l.useMemo)(()=>si?.getEnvVar("ROS_PACKAGE_PATH"),[]);return(0,n.jsx)(Ot.Z,{fullWidth:!0,label:"ROS_PACKAGE_PATH",placeholder:s,value:e??"",onChange:a=>void t(a.target.value)})}function Vp(){const{t:e,i18n:t}=(0,ee.$G)("appSettings"),[s="en",a]=(0,nn.b)(K.o.LANGUAGE),i=(0,l.useCallback)(c=>{const d=c.target.value;a(d),t.changeLanguage(d).catch(p=>{console.error("Failed to switch languages",p),(0,ci.e)(p)})},[t,a]),r=(0,l.useMemo)(()=>Fp.map(c=>({key:c.key,text:`${c.value}`,data:c.key})),[]);return(0,n.jsxs)(X.Z,{children:[(0,n.jsxs)(Wn.Z,{children:[e("language"),":"]}),(0,n.jsx)(Po.Z,{value:s,fullWidth:!0,onChange:i,children:r.map(c=>(0,n.jsx)(Se.Z,{value:c.key,children:c.text},c.key))})]})}const Kp=(0,L.ZL)()(e=>({layoutGrid:{display:"grid",gap:e.spacing(2),height:"70vh",paddingLeft:e.spacing(1),overflowY:"hidden",[e.breakpoints.up("sm")]:{gridTemplateColumns:"auto minmax(0, 1fr)"}},logo:{width:212,height:"auto",marginLeft:e.spacing(-1)},tabPanel:{display:"none",marginRight:"-100%",width:"100%",padding:e.spacing(0,4,4)},tabPanelActive:{display:"block"},checkbox:{"&.MuiCheckbox-root":{paddingTop:0}},dialogActions:{position:"sticky",backgroundColor:e.palette.background.paper,borderTop:`${e.palette.divider} 1px solid`,padding:e.spacing(1),bottom:0},formControlLabel:{"&.MuiFormControlLabel-root":{alignItems:"start"}},tab:{svg:{fontSize:"inherit"},"> span, > .MuiSvgIcon-root":{display:"flex",color:e.palette.primary.main,marginRight:e.spacing(1.5),height:e.typography.pxToRem(21),width:e.typography.pxToRem(21)},[e.breakpoints.up("sm")]:{textAlign:"right",flexDirection:"row",justifyContent:"flex-start",alignItems:"center",minHeight:"auto",paddingTop:e.spacing(1.5),paddingBottom:e.spacing(1.5)}},indicator:{[e.breakpoints.up("sm")]:{right:0,width:"100%",backgroundColor:e.palette.action.hover,borderRadius:e.shape.borderRadius}}})),Vs=new Map([["resources",{subheader:"External resources",links:[...(0,Gn.Z)()?[]:[{title:"Desktop app",url:"https://foxglove.dev/download"}],{title:"Browse docs",url:"https://foxglove.dev/docs"},{title:"Join our community",url:"https://foxglove.dev/community"}]}],["products",{subheader:"Products",links:[{title:"Foxglove Studio",url:"https://foxglove.dev/studio"},{title:"Foxglove Data Platform",url:"https://foxglove.dev/data-platform"}]}],["contact",{subheader:"Contact",links:[{title:"Give feedback",url:"https://foxglove.dev/contact"},{title:"Schedule a demo",url:"https://foxglove.dev/demo"}]}],["legal",{subheader:"Legal",links:[{title:"License terms",url:"https://foxglove.dev/legal/studio-license"},{title:"Privacy policy",url:"https://foxglove.dev/legal/privacy"}]}]]),Xp=e=>e.dialogs.preferences.initialTab;function $p(e){const{t}=(0,ee.$G)("appSettings"),{activeTab:s}=e,a=(0,Ye.Q)(Xp),[i,r]=(0,l.useState)(s??a??"general"),[c,d]=(0,at.b)(K.o.CRASH_REPORTING_ENABLED),[p,h]=(0,at.b)(K.o.TELEMETRY_ENABLED),{classes:f,cx:m,theme:y}=Kp(),B=(0,Rs.Z)(y.breakpoints.up("sm")),k=(0,Gn.Z)()&&si?.platform!=="linux",z=(q,V)=>{r(V)},G=q=>{e.onClose!=null&&e.onClose(q,"backdropClick")};return(0,n.jsxs)(Gt.Z,{...e,fullWidth:!0,maxWidth:"md",children:[(0,n.jsxs)(X.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",paddingX:3,paddingY:2,children:[(0,n.jsx)(ge.Z,{variant:"h3",fontWeight:600,children:t("settings")}),(0,n.jsx)(be.Z,{edge:"end",onClick:G,children:(0,n.jsx)(et.Z,{})})]}),(0,n.jsxs)("div",{className:f.layoutGrid,children:[(0,n.jsxs)(gn.Z,{classes:{indicator:f.indicator},value:i,orientation:B?"vertical":"horizontal",onChange:z,children:[(0,n.jsx)(tn.Z,{className:f.tab,label:t("general"),value:"general"}),(0,n.jsx)(tn.Z,{className:f.tab,label:t("privacy"),value:"privacy"}),(0,n.jsx)(tn.Z,{className:f.tab,label:t("extensions"),value:"extensions"}),(0,n.jsx)(tn.Z,{className:f.tab,label:t("experimentalFeatures"),value:"experimental-features"}),(0,n.jsx)(tn.Z,{className:f.tab,label:t("about"),value:"about"})]}),(0,n.jsxs)(X.Z,{direction:"row",fullHeight:!0,overflowY:"auto",children:[(0,n.jsx)("section",{className:m(f.tabPanel,{[f.tabPanelActive]:i==="general"}),children:(0,n.jsxs)(X.Z,{gap:2,children:[(0,n.jsx)(Up,{}),(0,n.jsx)(zp,{}),(0,n.jsx)(Wp,{orientation:B?"horizontal":"vertical"}),(0,n.jsx)(Qp,{}),(0,n.jsx)(Vp,{}),k&&(0,n.jsx)(Yp,{}),!(0,Gn.Z)()&&(0,n.jsx)(Gp,{}),(0,Gn.Z)()&&(0,n.jsx)(Hp,{})]})}),(0,n.jsx)("section",{className:m(f.tabPanel,{[f.tabPanelActive]:i==="privacy"}),children:(0,n.jsxs)(X.Z,{gap:2,children:[(0,n.jsx)(Nn.Z,{color:"info",icon:(0,n.jsx)(fp.Z,{}),children:t("privacyDescription")}),(0,n.jsxs)(X.Z,{gap:.5,paddingLeft:2,children:[(0,n.jsx)(xs.Z,{className:f.formControlLabel,control:(0,n.jsx)(es.Z,{className:f.checkbox,checked:p??!0,onChange:(q,V)=>void h(V)}),label:t("sendAnonymizedUsageData")}),(0,n.jsx)(xs.Z,{className:f.formControlLabel,control:(0,n.jsx)(es.Z,{className:f.checkbox,checked:c??!0,onChange:(q,V)=>void d(V)}),label:t("sendAnonymizedCrashReports")})]})]})}),(0,n.jsx)("section",{className:m(f.tabPanel,{[f.tabPanelActive]:i==="extensions"}),children:(0,n.jsx)(X.Z,{gap:2,children:(0,n.jsx)(Rp,{})})}),(0,n.jsx)("section",{className:m(f.tabPanel,{[f.tabPanelActive]:i==="experimental-features"}),children:(0,n.jsxs)(X.Z,{gap:2,children:[(0,n.jsx)(Nn.Z,{color:"warning",icon:(0,n.jsx)(hp.Z,{}),children:t("experimentalFeaturesDescription")}),(0,n.jsx)(X.Z,{paddingLeft:2,children:(0,n.jsx)(vp,{})})]})}),(0,n.jsx)("section",{className:m(f.tabPanel,{[f.tabPanelActive]:i==="about"}),children:(0,n.jsxs)(X.Z,{gap:2,alignItems:"flex-start",children:[(0,n.jsx)("header",{children:(0,n.jsx)(ma,{color:"primary",className:f.logo})}),(0,n.jsxs)(X.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,n.jsxs)(ge.Z,{variant:"body2",children:["Foxglove Studio version ","1.69.0-dev"]}),(0,n.jsx)(Zo.Z,{size:"small",getText:()=>"1.69.0-dev".toString()??""})]}),[Vs.get("resources"),Vs.get("products"),Vs.get("contact"),Vs.get("legal")].map(q=>(0,n.jsxs)(X.Z,{gap:1,children:[q?.subheader&&(0,n.jsx)(ge.Z,{children:q.subheader}),q?.links.map(V=>(0,n.jsx)(cn.Z,{variant:"body2",underline:"hover","data-testid":V.title,href:V.url,target:"_blank",children:V.title},V.title))]},q?.subheader))]})})]})]}),(0,n.jsx)(Sn.Z,{className:f.dialogActions,children:(0,n.jsx)($.Z,{onClick:G,children:"Done"})})]})}const Jp=e=>e.dialogs.preferences.open;function qp(){const e=(0,Ye.Q)(Jp),{dialogActions:t}=(0,it.W)();return(0,n.jsx)(n.Fragment,{children:e&&(0,n.jsx)($p,{id:"app-settings-dialog",open:!0,onClose:()=>{t.preferences.close()}})})}const _p=e=>e.playerState.urlState!=null;function ef(){const e=(0,Qe.An)(_p),[t,s]=(0,j.UG)(K.o.LAUNCH_PREFERENCE);(0,l.useEffect)(()=>{(0,Gn.Z)()||e&&!t&&s(Mt.WEB)},[t,s,e])}var tf="../../packages/studio-base/src/hooks/useElectronFilesToOpen.ts";const nf=ae.ZP.getLogger(tf);function sf(){const[e]=(0,l.useState)(()=>document.querySelector("#electron-open-file-input")),[t,s]=(0,l.useState)(e?.files??void 0);return(0,l.useEffect)(()=>{if(!e){nf.info("#electron-open-file-input not found - native open-file support will not be available");return}const a=()=>{s(e.files??void 0)};return e.addEventListener("change",a),()=>{e.removeEventListener("change",a)}},[e]),t}const Vo=(0,l.createContext)(void 0);Vo.displayName="NativeAppMenuContext";function of(){return(0,l.useContext)(Vo)}const af=Vo;function wn(e,t){const s=of();(0,l.useEffect)(()=>{if(s)return s.on(e,t)},[e,t,s])}var rf=o(39367),lf=o(47832);function cf(e,t){const s=e;return{dialogs:{dataSource:{activeDataSource:void 0,item:void 0,open:!1},preferences:{initialTab:void 0,open:!1}},featureTours:{active:void 0,shown:s.featureTours.shown},sidebars:{left:{item:s.leftSidebarItem,open:s.leftSidebarOpen,size:s.leftSidebarSize},right:{item:s.rightSidebarItem,open:s.rightSidebarOpen,size:s.rightSidebarSize}},playbackControls:{repeat:s.playbackControls.repeat}}}function df(){return{dialogs:{dataSource:{activeDataSource:void 0,item:void 0,open:!1},preferences:{initialTab:void 0,open:!1}},featureTours:{active:void 0,shown:[]},sidebars:{left:{item:"panel-settings",open:!0,size:void 0},right:{item:void 0,open:!1,size:void 0}},playbackControls:{repeat:!1}}}function uf(e,t){const s=()=>({...df(),...e});return t?.disablePersistenceForStorybook===!0?(0,F.M)()(s):(0,F.M)()((0,lf.tJ)(s,{name:"fox.workspace",version:1,migrate:cf,partialize:a=>ns.Z(a,["featureTours","playbackControls","sidebars"])}))}function pf(e){const{children:t,initialState:s,workspaceStoreCreator:a,disablePersistenceForStorybook:i}=e,[r]=(0,l.useState)(()=>a?a(s,{disablePersistenceForStorybook:i}):uf(s,{disablePersistenceForStorybook:i}));return(0,n.jsx)(Ye.C5.Provider,{value:r,children:t})}var ff="../../packages/studio-base/src/Workspace.tsx";const os=ae.ZP.getLogger(ff),hf=(0,L.ZL)()({container:{width:"100%",height:"100%",display:"flex",flexDirection:"column",position:"relative",flex:"1 1 100%",outline:"none",overflow:"hidden"}}),gf=({playerState:e})=>e.presence,mf=({playerState:e})=>e.presence!==De.m.NOT_PRESENT,yf=({playerState:e})=>e.problems,vf=e=>e.playerState.activeData?.isPlaying===!0,Af=e=>e.pausePlayback,bf=e=>e.startPlayback,xf=e=>e.seekPlayback,Ef=e=>e.playUntil,Cf=e=>e.playerState.playerId,Sf=e=>e.eventsSupported,Tf=e=>e.selectEvent,Pf=e=>e.dialogs.dataSource,If=e=>e.sidebars.left.item,Mf=e=>e.sidebars.left.open,Df=e=>e.sidebars.left.size,Bf=e=>e.sidebars.right.item,wf=e=>e.sidebars.right.open,Rf=e=>e.sidebars.right.size;function jf(e){const{classes:t}=hf(),s=(0,l.useRef)(null),{availableSources:a,selectSource:i}=(0,Ue.n)(),r=(0,Qe.An)(gf),c=(0,Qe.An)(yf),d=(0,Ye.Q)(Pf),p=(0,Ye.Q)(If),h=(0,Ye.Q)(Mf),f=(0,Ye.Q)(Df),m=(0,Ye.Q)(Bf),y=(0,Ye.Q)(wf),B=(0,Ye.Q)(Rf),{dialogActions:k,sidebarActions:z}=(0,it.W)(),G=(0,l.useMemo)(()=>{const At=[".foxe"];for(const Wt of a)Wt.type==="file"&&Wt.supportedFileTypes&&At.push(...Wt.supportedFileTypes);return At},[a]),q=(0,Qe.An)(Cf),{currentUser:V}=Xe();ef();const[me=!1]=(0,at.b)(K.o.SHOW_DEBUG_PANELS),{workspaceExtensions:le}=(0,ze.b)();(0,l.useLayoutEffect)(()=>{(r===De.m.PRESENT||r===De.m.INITIALIZING)&&k.dataSource.close()},[k.dataSource,r]),(0,l.useEffect)(()=>{s.current&&s.current.focus()},[]),wn("open",(0,l.useCallback)(async()=>{k.dataSource.open("start")},[k.dataSource])),wn("open-file",(0,l.useCallback)(async()=>{await k.openFile.open()},[k.openFile])),wn("open-connection",(0,l.useCallback)(()=>{k.dataSource.open("connection")},[k.dataSource])),wn("open-demo",(0,l.useCallback)(()=>{k.dataSource.open("demo")},[k.dataSource])),wn("open-help-about",(0,l.useCallback)(()=>{k.preferences.open("about")},[k.preferences])),wn("open-help-general",(0,l.useCallback)(()=>{k.preferences.open("general")},[k.preferences])),wn("open-help-docs",()=>{window.open("https://foxglove.dev/docs","_blank")}),wn("open-help-slack",()=>{window.open("https://foxglove.dev/slack","_blank")});const{enqueueSnackbar:oe}=(0,we.Ds)(),te=(0,Bn.I)(At=>At.installExtension),Z=(0,l.useCallback)(async At=>{os.debug("open handle",At);const Wt=await At.getFile();if(Wt.name.endsWith(".foxe"))try{const qt=await Wt.arrayBuffer(),Hn=new Uint8Array(qt),Is=await te("local",Hn);oe(`Installed extension ${Is.id}`,{variant:"success"})}catch(qt){os.error(qt),oe(`Failed to install extension ${Wt.name}: ${qt.message}`,{variant:"error"})}const pn=a.find(qt=>{const Hn=(0,Ze.extname)(Wt.name);return qt.supportedFileTypes?.includes(Hn)});pn&&i(pn.id,{type:"file",handle:At})},[a,oe,te,i]),Ae=(0,l.useCallback)(async At=>{const Wt=[];os.debug("open files",At);for(const pn of At)if(pn.name.endsWith(".foxe"))try{const qt=await pn.arrayBuffer(),Hn=new Uint8Array(qt),Is=await te("local",Hn);oe(`Installed extension ${Is.id}`,{variant:"success"})}catch(qt){os.error(qt),oe(`Failed to install extension ${pn.name}: ${qt.message}`,{variant:"error"})}else Wt.push(pn);if(Wt.length>0){for(const pn of a)if(Wt.filter(Hn=>{const Is=(0,Ze.extname)(Hn.name);return pn.supportedFileTypes?.includes(Is)}).length>0){i(pn.id,{type:"file",files:Wt});break}}},[a,oe,te,i]),nt=sf();(0,l.useEffect)(()=>{nt&&Ae(Array.from(nt))},[nt,Ae]);const xt=(0,l.useCallback)(At=>{const Wt=At.handles?.[0];Wt&&At.handles?.length===1?Z(Wt):At.files&&Ae(At.files)},[Ae,Z]),Et=O(Sf),Pt=V!=null&&Et,vt=(0,l.useMemo)(()=>new Map([["panel-settings",{title:"Panel",component:uc}],["topics",{title:"Topics",component:op}],["problems",{title:"Problems",component:Xd,badge:c&&c.length>0?{count:c.length,color:"error"}:void 0}]]),[c]),Rt=(0,l.useMemo)(()=>{const At=new Map([["variables",{title:"Variables",component:pp}]]);return me&&At.set("studio-logs-settings",{title:"Studio Logs",component:au}),Pt&&At.set("events",{title:"Events",component:Lr}),At},[me,Pt]),lt=(0,l.useMemo)(()=>({"[":()=>{z.left.setOpen(At=>!At)},"]":()=>{z.right.setOpen(At=>!At)}}),[z.left,z.right]),mt=(0,Qe.An)(bf),Dt=(0,Qe.An)(Ef),Ct=(0,Qe.An)(Af),Ge=(0,Qe.An)(xf),gt=(0,Qe.An)(vf),Jt=(0,Qe.m7)(),fs=(0,l.useCallback)(()=>Jt().playerState.activeData??{},[Jt]),jn=(0,l.useMemo)(()=>{const At=e.deepLinks??[];return At[0]?ku(new URL(At[0])):void 0},[e.deepLinks]),[un,Fi]=(0,l.useState)(jn?{ds:jn.ds,dsParams:jn.dsParams}:void 0),Ui=O(Tf);(0,l.useEffect)(()=>{un&&un.ds&&(os.debug("Initialising source from url",un),i(un.ds,{type:"connection",params:un.dsParams}),Ui(un.dsParams?.eventId),Fi({ds:void 0,dsParams:void 0}))},[Ui,i,un,Fi]);const[no,ty]=(0,l.useState)(jn?{time:jn.time}:void 0);return(0,l.useEffect)(()=>{no?.time==null||!Ge||r===De.m.PRESENT&&(os.debug("Seeking to url time:",no.time),Ge(no.time),ty({time:void 0}))},[r,Ge,no]),(0,n.jsxs)(rf.vv,{children:[d.open&&(0,n.jsx)(dr,{}),(0,n.jsx)(mr,{onDrop:xt,allowedExtensions:G}),(0,n.jsx)(Yu,{}),(0,n.jsx)(ya.Z,{global:!0,keyDownHandlers:lt}),(0,n.jsxs)("div",{className:t.container,ref:s,tabIndex:0,children:[(0,n.jsx)(Pn,{leftInset:e.appBarLeftInset,onDoubleClick:e.onAppBarDoubleClick,showCustomWindowControls:e.showCustomWindowControls,isMaximized:e.isMaximized,onMinimizeWindow:e.onMinimizeWindow,onMaximizeWindow:e.onMaximizeWindow,onUnmaximizeWindow:e.onUnmaximizeWindow,onCloseWindow:e.onCloseWindow}),(0,n.jsx)(tu,{leftItems:vt,selectedLeftKey:h?p:void 0,onSelectLeftKey:z.left.selectItem,leftSidebarSize:f,setLeftSidebarSize:z.left.setSize,rightItems:Rt,selectedRightKey:y?m:void 0,onSelectRightKey:z.right.selectItem,rightSidebarSize:B,setRightSidebarSize:z.right.setSize,children:(0,n.jsx)($d,{value:q,children:(0,n.jsx)(X.Z,{children:(0,n.jsx)(Or.Z,{})})})}),mt&&Ct&&Ge&&(0,n.jsx)("div",{style:{flexShrink:0},children:(0,n.jsx)(Wd,{play:mt,pause:Ct,seek:Ge,playUntil:Dt,isPlaying:gt,getTimeInfo:fs})})]}),le,(0,n.jsx)(qp,{})]})}function Lf(e){const[t=!0]=(0,at.b)(K.o.SHOW_OPEN_DIALOG_ON_STARTUP),{workspaceStoreCreator:s}=(0,ze.b)(),i=(0,Qe.An)(mf)||!t?void 0:"start",r={dialogs:{dataSource:{activeDataSource:void 0,open:i!=null,item:i},preferences:{initialTab:void 0,open:!1}}};return(0,n.jsx)(pf,{initialState:r,workspaceStoreCreator:s,disablePersistenceForStorybook:e.disablePersistenceForStorybook,children:(0,n.jsx)(jf,{...e})})}var Of=o(6917),Nf=o(88724);function Zf({children:e}){const[t="system"]=(0,at.b)(K.o.COLOR_SCHEME),s=(0,Of.Z)("(prefers-color-scheme: dark)"),a=t==="dark"||t==="system"&&s;return(0,n.jsx)(Nf.Z,{isDark:a,children:e})}var kf=o(98512);const Ff=e=>e.playerState.name;function Uf(){const e=(0,Qe.An)(Ff);return(0,l.useEffect)(()=>{if(!e){window.document.title="Foxglove Studio";return}window.document.title=navigator.userAgent.includes("Mac")?e:`${e} \u2013 Foxglove Studio`},[e]),(0,n.jsx)(n.Fragment,{})}var zf=o(2784);function Wf({children:e,providers:t}){const s=t.reduceRight((a,i)=>zf.cloneElement(i,void 0,a),e);return(0,n.jsx)(n.Fragment,{children:s})}const Ko=(0,l.createContext)(void 0);Ko.displayName="NativeWindowContext";function Gf(){return(0,l.useContext)(Ko)}const Qf=Ko;var di=o(31748),Xo=o(10186),Yf="../../packages/studio-base/src/hooks/useIndexedDbRecents.ts";const Hf=ae.ZP.getLogger(Yf),ui="recents",pi=(0,Xo.MT)("foxglove-recents","recents");function Vf(){const{value:e,loading:t}=(0,Qo.Z)(async()=>await(0,Xo.U2)(ui,pi),[]),[s,a]=(0,l.useState)([]),i=(0,l.useRef)([]),r=(0,l.useCallback)(async()=>{if(t)return;const d=[];for(const p of i.current){let h=!1;for(const f of d)h||(f.type==="file"&&p.type===f.type&&await f.handle.isSameEntry(p.handle)&&(h=!0),f.type==="connection"&&p.type===f.type&&f.sourceId===p.sourceId&&U.Z(p.extra,f.extra)&&(h=!0));!h&&d.length<5&&d.push(p)}a(d),(0,Xo.t8)(ui,d,pi).catch(p=>{Hf.error(p)})},[t]);(0,l.useLayoutEffect)(()=>{if(t)return;const d=i.current.length>0;e&&i.current.push(...e),d?r():a(i.current)},[t,e,r]);const c=(0,l.useCallback)(d=>{const p={id:(0,$t.Z)(),...d};i.current.unshift(p),r()},[r]);return(0,l.useMemo)(()=>({recents:s,addRecent:c,save:r}),[c,s,r])}const Kf=Vf;var Xf="../../packages/studio-base/src/players/AnalyticsMetricsCollector.ts";const $f=ae.ZP.getLogger(Xf);class Jf{#e={};#t;constructor(t){$f.debug("New AnalyticsMetricsCollector"),this.#t=t}setProperty(t,s){this.#e[t]=s}logEvent(t,s){this.#t.logEvent(t,{...this.#e,...s})}playerConstructed(){this.logEvent(Te.q.PLAYER_CONSTRUCTED)}play(t){this.logEvent(Te.q.PLAYER_PLAY,{speed:t})}seek(t){}setSpeed(t){}pause(){this.logEvent(Te.q.PLAYER_PAUSE)}close(){this.logEvent(Te.q.PLAYER_CLOSE)}setSubscriptions(t){}recordBytesReceived(t){}recordPlaybackTime(t,s){}recordDataProviderPerformance(t){}recordUncachedRangeRequest(){}recordTimeToFirstMsgs(){}recordDataProviderInitializePerformance(t){}recordDataProviderStall(t){}}var fi=o(68773),$o=o(4e4);const sn=new Map;function qf(e,t){return t===sn?e:e.map(s=>{if(s!=null)return{...s,messagesByTopic:fi.Z(s.messagesByTopic,(a,i,r)=>{const c=t.get(r);if(c)for(const d of c)a[d]=i.map(p=>({...p,topic:d}));a[r]=i},{})}})}function _f(e,t){if(t===sn)return e;const s=[];for(const a of e){s.push(a);const i=t.get(a.topic);if(i)for(const r of i)s.push({...a,topic:r})}return s}function eh(e,t){if(t===sn)return e;const s=new Map;for(const[a,i]of e){const r=[...i].flatMap(c=>t.get(c)??c);s.set(a,new Set([...i,...r]))}return s}function th(e,t,s){if(t===sn)return e;const a=Qs.Z(s,r=>r.topic),i=new Map;for(const[r,c]of e){const d=[...c].flatMap(p=>{const h=t.get(p);return a[p]?[p,...h??[]]:h||p});i.set(r,new Set(d))}return i}function nh(e,t){return t===sn||e.messageCache==null?e:{...e,messageCache:{...e.messageCache,blocks:mn.aliasBlocks(e.messageCache.blocks,t)}}}function sh(e,t){return t===sn?e:e.flatMap(s=>{const a=t.get(s.name);return a?[s,...a.map(i=>({...s,name:i,aliasedFromName:s.name}))]:s})}function oh(e,t){if(t===sn)return e;const s=new Map;for(const[a,i]of e){s.set(a,i);const r=t.get(a);if(r)for(const c of r)s.set(c,i)}return s}function ah(e){if(e===sn)return sn;const t=new Map;for(const[s,a]of e.entries())for(const i of a){const r=t.get(i)??[];r.push(s),t.set(i,r)}return t}function ih(e,t){const s=new Map,a=[],i=new Map,r=t.topics??[];for(const{extensionId:c,aliases:d}of e)for(const{name:p,sourceTopicName:h}of d){const f=s.get(p);if(r.some(m=>m.name===p))a.push({severity:"error",message:"Disallowed topic alias",tip:`Extension ${c} aliased topic ${p} is already present in the data source.`});else if(f!=null&&f!==h)a.push({severity:"error",message:"Disallowed topic alias",tip:`Extension ${c} requested duplicate alias from topic ${h} to topic ${p}.`});else{s.set(p,h);const m=$o.Z(i.get(h)??[]).concat(p);i.set(h,m)}}return{aliasMap:i,problems:a.length>0?a:void 0}}function rh(e){const t=e.aliasFunctions.map(a=>({extensionId:a.extensionId,aliases:a.aliasFunction({topics:e.topics??[],globalVariables:e.variables})}));return t.some(a=>[...a.aliases].length>0)?ih(t,e):{aliasMap:sn,problems:void 0}}const mn={buildAliases:Kt()(rh),aliasBlocks:Kt()(qf),aliasMessages:Kt()(_f),aliasProgress:Kt()(nh),aliasPublishedTopics:Kt()(eh),aliasSubscribedTopics:Kt()(th),aliasTopics:Kt()(sh),aliasTopicStats:Kt()(oh)};function lh(e,t,s){const a={...s,activeData:s.activeData?{...s.activeData}:void 0},{aliasMap:i,problems:r}=mn.buildAliases(e);return a.activeData&&(a.activeData.topics=mn.aliasTopics(a.activeData.topics,i),a.activeData.messages=mn.aliasMessages(a.activeData.messages,i),a.activeData.publishedTopics&&(a.activeData.publishedTopics=mn.aliasPublishedTopics(a.activeData.publishedTopics,i)),a.activeData.subscribedTopics&&(a.activeData.subscribedTopics=mn.aliasSubscribedTopics(a.activeData.subscribedTopics,i,t)),a.activeData.topicStats=mn.aliasTopicStats(a.activeData.topicStats,i)),a.progress.messageCache&&(a.progress=mn.aliasProgress(a.progress,i)),r!=null&&(a.problems=(a.problems??[]).concat(r)),a}const ch=Kt()((e,t)=>{const{aliasMap:s}=mn.buildAliases(e);if(s===sn)return t;const a=ah(s);return t.flatMap(i=>{const r=a.get(i.topic);return r?r.map(c=>({...i,topic:c})):i})});class dh{#e;#t;#n;#s=[];#i;#o;constructor(t,s,a){this.#e=t,this.#i=s.length===0,this.#t={aliasFunctions:s,topics:void 0,variables:a}}setListener(t){this.#o=t,this.#e.setListener(async s=>{await this.#a(s)})}setAliasFunctions(t){this.#t={...this.#t,aliasFunctions:t},this.#i=t.length===0}close(){this.#e.close()}setSubscriptions(t){if(this.#s=t,this.#i)this.#e.setSubscriptions(t);else if(this.#t.topics!=null){const s=ch(this.#t,t);this.#e.setSubscriptions(s),this.#n=void 0}else this.#n=t}setPublishers(t){this.#e.setPublishers(t)}setParameter(t,s){this.#e.setParameter(t,s)}publish(t){this.#e.publish(t)}async callService(t,s){return await this.#e.callService(t,s)}startPlayback(){this.#e.startPlayback?.()}pausePlayback(){this.#e.pausePlayback?.()}seekPlayback(t){this.#e.seekPlayback?.(t)}playUntil(t){if(this.#e.playUntil){this.#e.playUntil(t);return}this.#e.seekPlayback?.(t)}setPlaybackSpeed(t){this.#e.setPlaybackSpeed?.(t)}setGlobalVariables(t){this.#e.setGlobalVariables(t),this.#t={...this.#t,variables:t}}async fetchAsset(t){if(this.#e.fetchAsset)return await this.#e.fetchAsset(t);throw Error("Player does not support fetching assets")}async#a(t){if(this.#i){await this.#o?.(t);return}t.activeData?.topics!==this.#t.topics&&(this.#t={...this.#t,topics:t.activeData?.topics});const s=lh(this.#t,this.#s,t);await this.#o?.(s),this.#n&&this.#t.topics&&this.setSubscriptions(this.#n)}}var uh=o(79044),ph=o(79064),hi=o(28316),fh=o(88665),gi=o.n(fh),Qn=o(69363),hh=o(85266);class mi{#e;#t;#n;#s;constructor(t){this.#n=t}async update(t){if(t.topics===this.#t&&t.datatypes===this.#e&&this.#s!=null)return{didUpdate:!1,lib:this.#s};const s=await this.#n(t);return this.#t=t.topics,this.#e=t.datatypes,this.#s=s,{didUpdate:!0,lib:s}}}var gh=o(1375),zt=o(56924);const mh=e=>e.diagnostics.some(({severity:t})=>t===zt.H_.Error);var yi=o(45243),Es=o(38215),vi=o(87472);const yn=new Map;for(const[e,t]of Object.entries(Es.ros2galactic))yn.set(e,t);for(const[e,t]of Object.entries(Es.ros1))yn.set(e,t);for(const e of Object.values(vi.foxgloveMessageSchemas)){const t=(0,vi.generateRosMsgDefinition)(e,{rosVersion:1});yn.set(t.rosMsgInterfaceName,{name:t.rosMsgInterfaceName,definitions:t.fields}),yn.set(`foxglove.${e.name}`,{name:`foxglove.${e.name}`,definitions:t.fields})}yn.set("foxglove_msgs/ImageMarkerArray",{definitions:[{name:"markers",type:"visualization_msgs/ImageMarker",isComplex:!0,isArray:!0}]});var yh="../../packages/studio-base/src/players/UserNodePlayer/index.ts",Jo;const Yn=ae.ZP.getLogger(yh);function vh(e){return typeof e=="object"&&e&&"toJSON"in e?e.toJSON():e}class Ai{#e;#t=[];#n=[];#s=[];#i={};#o;#a=[];#c;#r;#l;#y={};#u;#b;#x;#m;#f=new Map;#D=new Map;#P=new Set;#d=new Qn.jK({userNodes:{},nodeRegistrations:[],nodeRegistrationCache:[],lastPlayerStateActiveData:void 0,inputsByOutputTopic:new Map});#k=new uh.WU;static CreateNodeTransformWorker=()=>new SharedWorker(new URL(o.p+o.u(5617),o.b),{name:(0,$t.Z)()});static CreateNodeRuntimeWorker=()=>new SharedWorker(new URL(o.p+o.u(492),o.b),{name:(0,$t.Z)()});constructor(t,s){this.#e=t,this.#u=s;const{setUserNodeDiagnostics:a,addUserNodeLogs:i}=s;this.#c=(r,c)=>{a(r,c)},this.#r=(r,c)=>{c.length>0&&i(r,c)},this.#x=new mi(async r=>(0,gh.Wr)({topics:r.topics,datatypes:new Map([...yn,...r.datatypes])})),this.#b=new mi(async r=>await this.#p().send("generateRosLib",{topics:r.topics,datatypes:new Map([...yn,...r.datatypes])}))}#S=Kt()((t,s)=>[...t,...s]);#I=Kt()((t,s)=>s.reduce((a,i)=>new Map([...a,...i]),new Map([...yn,...t])));#v={result:[]};async#B(t,s,a){if(t.length===0)return[];const i=c=>c,r=[];for(const c of t){const d=[];for(const h of a)if(this.#i[h.output.name]&&h.inputs.includes(c.topic)){const f=h.processMessage(c,s);d.push(f)}const p=await Promise.all(d);r.push(...(0,dn.Z)(p,i))}return r}async#T(t,s,a){if(gi()(this.#v.input,{blocks:t,globalVariables:s,nodeRegistrations:a}))return this.#v.result;const i=a.filter(d=>this.#i[d.output.name]?.preloadType==="full");if(i.length===0)return t;const r=$o.Z(i.flatMap(d=>d.inputs)),c=[];for(const d of t){if(!d){c.push(d);continue}const p={...d.messagesByTopic},h=r.flatMap(f=>p[f]??[]).sort((f,m)=>(0,ne.compare)(f.receiveTime,m.receiveTime));for(const f of i){const m=f.output.name;p[m]!=null&&(p[m]=[]);for(const y of h)if(f.inputs.includes(y.topic)){const B=await f.processBlockMessage(y,s);B&&(p[m]||(p[m]=[]),p[m]?.push(B))}}c.push({messagesByTopic:p,needTopics:d.needTopics,sizeInBytes:d.sizeInBytes})}return this.#v={input:{blocks:t,globalVariables:s,nodeRegistrations:a},result:c},c}setGlobalVariables(t){this.#y=t}async setUserNodes(t){const s=await this.#d.runExclusive(async a=>{for(const d of Object.keys(t)){const p=a.userNodes[d],h=t[d];p&&h&&p.sourceCode!==h.sourceCode&&this.#P.add(d)}a.userNodes=t;const i=Object.keys(t).length+1;a.nodeRegistrationCache.splice(i),await this.#A(a),this.#j(this.#s,a);const r=this.#m,c=a.lastPlayerStateActiveData;if(r&&c?.isPlaying===!1)return{...r,activeData:{...c,messages:[]}}});s&&await this.#R(s)}async#U(t,s,a,i,r){for(const Ae of a.nodeRegistrationCache)if(t===Ae.nodeId&&U.Z(s,Ae.userNode))return Ae.result;const{topics:c=[],datatypes:d=new Map}=a.lastPlayerStateActiveData??{},p=new Map([...yn,...d]),{name:h,sourceCode:f}=s,m={name:h,sourceCode:f,topics:c,rosLib:i,typesLib:r,datatypes:p},B=await this.#p().send("transform",m),{inputTopics:k,outputTopic:z,transpiledCode:G,projectCode:q,outputDatatype:V}=B,me=`node-id-${t}`,le=()=>{let Ae;return{registration:async(Et,Pt)=>{if(!Ae){if(Ae=this.#a.pop(),!Ae){const Ct=Jo.CreateNodeRuntimeWorker();Ct.onerror=gt=>{Yn.error(gt),this.#f.set(me,{message:`User script runtime error: ${gt.message}`,severity:"error"}),this.#g()};const Ge=Ct.port;Ge.onmessageerror=gt=>{Yn.error(gt),this.#f.set(me,{severity:"error",message:`User script runtime error: ${String(gt.data)}`}),this.#g()},Ge.start(),Ae=new yi.Z(Ge),Ae.receive("error",gt=>{Yn.error(gt),this.#f.set(me,{severity:"error",message:`User script runtime error: ${gt}`}),this.#g()})}const{error:lt,userNodeDiagnostics:mt,userNodeLogs:Dt}=await Ae.send("registerNode",{projectCode:q,nodeCode:G});if(lt!=null){this.#c(t,[...mt,{source:zt.Fb.Runtime,severity:zt.H_.Error,message:lt,code:zt.SM.RUNTIME}]);return}this.#r(t,Dt)}const vt=await Ae.send("processMessage",{message:{topic:Et.topic,receiveTime:Et.receiveTime,message:vh(Et.message),datatype:Et.schemaName},globalVariables:Pt}),Rt=vt.userNodeDiagnostics;if(vt.error&&Rt.push({source:zt.Fb.Runtime,severity:zt.H_.Error,message:vt.error,code:zt.SM.RUNTIME}),this.#r(t,vt.userNodeLogs),Rt.length>0){this.#f.set(me,{severity:"error",message:`User Script ${t} encountered an error.`,tip:"Open the User Scripts panel and check the Problems tab for errors."}),this.#c(t,Rt);return}if(!vt.message){this.#f.set(me,{severity:"warn",message:`User Script ${t} did not produce a message.`,tip:"Check that all code paths in the user script return a message."});return}return this.#f.delete(me),{topic:z,receiveTime:Et.receiveTime,message:vt.message,sizeInBytes:Et.sizeInBytes,schemaName:V}},terminate:()=>{this.#f.delete(me),Ae&&(this.#a.push(Ae),Ae=void 0)}}},oe=le(),te=le(),Z={nodeId:t,nodeData:B,inputs:k,output:{name:z,schemaName:V},processMessage:oe.registration,processBlockMessage:te.registration,terminate:()=>{oe.terminate(),te.terminate()}};return a.nodeRegistrationCache.push({nodeId:t,userNode:s,result:Z}),Z}#p(){if(!this.#l){const t=Jo.CreateNodeTransformWorker();t.onerror=i=>{Yn.error(i),this.#f.set("worker-error",{severity:"error",message:`User Script error: ${i.message}`}),this.#g()};const s=t.port;s.onmessageerror=i=>{Yn.error(i),this.#f.set("worker-error",{severity:"error",message:`User Script error: ${String(i.data)}`}),this.#g()},s.start();const a=new yi.Z(s);a.receive("error",i=>{Yn.error(i),this.#f.set("worker-error",{severity:"error",message:`User Script error: ${i}`}),this.#g()}),this.#l=a}return this.#l}async#A(t){if(!t.lastPlayerStateActiveData||t.nodeRegistrations.length===0&&Object.entries(t.userNodes).length===0)return;for(const m of t.nodeRegistrations)m.terminate();t.nodeRegistrations=[];const s=await this.#w(t),a=await this.#N(t),i=await Promise.all(Object.entries(t.userNodes).map(async([m,y])=>await this.#U(m,y,t,s,a))),r=[],c=new Set(t.lastPlayerStateActiveData.topics.map(m=>m.name)),d=new Set(i.map(({nodeData:m})=>m.outputTopic));t.inputsByOutputTopic.clear();for(const m of i){const{nodeData:y,nodeId:B}=m;if(!y.outputTopic){this.#c(B,[...y.diagnostics,{severity:zt.H_.Error,message:"Output topic cannot be an empty string.",source:zt.Fb.OutputTopicChecker,code:zt.SM.OutputTopicChecker.NOT_UNIQUE}]);continue}if(t.inputsByOutputTopic.has(y.outputTopic)){this.#c(B,[...y.diagnostics,{severity:zt.H_.Error,message:`Output "${y.outputTopic}" must be unique`,source:zt.Fb.OutputTopicChecker,code:zt.SM.OutputTopicChecker.NOT_UNIQUE}]);continue}if(t.inputsByOutputTopic.set(y.outputTopic,y.inputTopics),c.has(y.outputTopic)){this.#c(B,[...y.diagnostics,{severity:zt.H_.Error,message:`Output topic "${y.outputTopic}" is already present in the data source`,source:zt.Fb.OutputTopicChecker,code:zt.SM.OutputTopicChecker.EXISTING_TOPIC}]);continue}if(mh(y)){this.#c(B,y.diagnostics);continue}for(const k of y.inputTopics)if(d.has(k))throw new Error(`Input "${k}" cannot equal another node's output`);r.push(m)}let p=!1;t.nodeRegistrations=r;const h=t.nodeRegistrations.map(({output:m})=>m);U.Z(h,this.#n)||(this.#n=h,p=!0);const f=t.nodeRegistrations.map(({nodeData:{datatypes:m}})=>m);if(U.Z(f,this.#t)||(this.#t=f,p=!0),hi.unstable_batchedUpdates(()=>{for(const m of t.nodeRegistrations)this.#c(m.nodeId,[])}),p&&this.#m?.activeData){const m=ph.Z(this.#m.activeData.topics,this.#n,B=>B.name),y=this.#I(this.#m.activeData.datatypes,this.#t);this.#m={...this.#m,activeData:{...this.#m.activeData,datatypes:y,topics:m}},await this.#g()}}async#w(t){if(!t.lastPlayerStateActiveData)throw new Error("_getRosLib was called before `_lastPlayerStateActiveData` set");const{topics:s,datatypes:a}=t.lastPlayerStateActiveData,{didUpdate:i,lib:r}=await this.#b.update({topics:s,datatypes:a});return i&&this.#u.setUserNodeRosLib(r),r}async#N(t){if(!t.lastPlayerStateActiveData)throw new Error("_getTypesLib was called before `_lastPlayerStateActiveData` set");const{topics:s,datatypes:a}=t.lastPlayerStateActiveData,{didUpdate:i,lib:r}=await this.#x.update({topics:s,datatypes:a});return i&&this.#u.setUserNodeTypesLib(r),r}async#R(t){try{const s=this.#y,{activeData:a}=t;if(!a){this.#m=t,await this.#g();return}const{messages:i,topics:r,datatypes:c}=a,d=await this.#d.runExclusive(async p=>{if(!p.lastPlayerStateActiveData)p.lastPlayerStateActiveData=a,await this.#A(p),this.#j(this.#s,p);else{let G=a.lastSeekTime!==p.lastPlayerStateActiveData.lastSeekTime;(a.topics!==p.lastPlayerStateActiveData.topics||a.datatypes!==p.lastPlayerStateActiveData.datatypes)&&(G=!0,p.nodeRegistrationCache=[]),p.lastPlayerStateActiveData=a,G&&await this.#A(p)}const h=this.#I(c,this.#t),f=new Set;for(const G of this.#P){const q=p.nodeRegistrations.find(({nodeId:me})=>me===G);if(!q)continue;const V=q.inputs;for(const me of V)f.add(me)}for(const G of i)f.delete(G.topic);const m=[];for(const G of f){const q=this.#D.get(G);q&&m.push(q)}this.#P.clear();for(const G of i)this.#D.set(G.topic,G);const y=await this.#B(i,s,p.nodeRegistrations),B=await this.#B(m,s,p.nodeRegistrations),k=i.concat(B).concat(y).sort((G,q)=>(0,ne.compare)(G.receiveTime,q.receiveTime)),z={...t.progress};if(z.messageCache){const G=await this.#T(z.messageCache.blocks,s,p.nodeRegistrations);z.messageCache={startTime:z.messageCache.startTime,blocks:G}}return{...t,progress:z,activeData:{...a,messages:k,topics:this.#S(r,this.#n),datatypes:h}}});this.#m=d,this.#f.delete("player-state-update")}catch(s){this.#f.set("player-state-update",{severity:"error",message:s.message,error:s}),this.#m=t}finally{await this.#g()}}async#g(){await this.#k.runExclusive(async()=>{if(!this.#m)return;let t=this.#m.problems;this.#f.size>0&&(t=(t??[]).concat(Array.from(this.#f.values())));const s={...this.#m,problems:t};this.#o&&await this.#o(s)})}setListener(t){this.#o=t,this.#e.setListener(async s=>{await this.#R(s)})}setSubscriptions(t){this.#s=t,this.#d.runExclusive(async s=>{this.#j(t,s)}).catch(s=>{Yn.error(s),(0,ci.e)(s)})}#j(t,s){const a={},i=[];for(const c of t){const d=s.inputsByOutputTopic.get(c.topic);if(!d){a[c.topic]=c,i.push(c);continue}if(d.length!==0){a[c.topic]=c;for(const p of d)i.push({topic:p,preloadType:c.preloadType??"partial"})}}this.#i=a;const r=(0,hh.I)(i);this.#e.setSubscriptions(r)}close=()=>{this.#d.runExclusive(async t=>{for(const s of t.nodeRegistrations)s.terminate()}),this.#e.close(),this.#l&&this.#l.send("close")};setPublishers(t){this.#e.setPublishers(t)}setParameter(t,s){this.#e.setParameter(t,s)}publish(t){this.#e.publish(t)}async callService(t,s){return await this.#e.callService(t,s)}async fetchAsset(t){if(this.#e.fetchAsset)return await this.#e.fetchAsset(t);throw Error("Player does not support fetching assets")}startPlayback(){this.#e.startPlayback?.()}pausePlayback(){this.#e.pausePlayback?.()}playUntil(t){if(this.#e.playUntil){this.#e.playUntil(t);return}this.#e.seekPlayback?.(t)}setPlaybackSpeed(t){this.#e.setPlaybackSpeed?.(t)}seekPlayback(t){this.#e.seekPlayback?.(t)}}Jo=Ai;const Ah=Ai;var bh="../../packages/studio-base/src/components/PlayerManager.tsx";const xh=ae.ZP.getLogger(bh),Eh=Object.freeze({}),Ch=Object.freeze({}),Sh=e=>e.selectedLayout?.data?.userNodes??Eh,Th=e=>e.selectedLayout?.data?.globalVariables??Ch,Ph=e=>e.installedTopicAliasFunctions;function Ih(e){const{children:t,playerSources:s}=e;(0,j.Wk)();const{setUserNodeDiagnostics:a,addUserNodeLogs:i,setUserNodeRosLib:r,setUserNodeTypesLib:c}=(0,di.B)(),d=(0,j.O4)({setUserNodeDiagnostics:a,addUserNodeLogs:i,setUserNodeRosLib:r,setUserNodeTypesLib:c}),p=Gf(),h=(0,gs.Z)(),f=(0,Le.z)(),m=(0,l.useMemo)(()=>new Jf(f),[f]),[y,B]=(0,l.useState)(),k=(0,bt.NS)(Sh),z=(0,bt.NS)(Th),G=(0,Bn.I)(Ph),{recents:q,addRecent:V}=Kf(),me=(0,As.Z)(z),[le]=(0,l.useState)(G),[oe]=(0,l.useState)(z),te=(0,l.useMemo)(()=>{if(y)return new dh(y,le??[],oe)},[y,oe,le]);(0,l.useEffect)(()=>{G!==le&&te?.setAliasFunctions(G??[])},[le,te,G]),(0,l.useEffect)(()=>{z!==oe&&te?.setGlobalVariables(z)},[z,oe,te]);const Z=(0,l.useMemo)(()=>{if(!te)return;const lt=new Ah(te,d);return lt.setGlobalVariables(me.current),lt},[me,te,d]);(0,l.useLayoutEffect)(()=>void Z?.setUserNodes(k),[Z,k]);const{enqueueSnackbar:Ae}=(0,we.Ds)(),[nt,xt]=(0,l.useState)(),Et=(0,l.useCallback)(async(lt,mt)=>{xh.debug(`Select Source: ${lt}`),p?.setRepresentedFilename(void 0);const Dt=s.find(Ct=>Ct.id===lt||Ct.legacyIds?.includes(lt));if(!Dt){Ae(`Unknown data source: ${lt}`,{variant:"warning"});return}if(m.setProperty("player",lt),xt(Dt),Dt.type==="sample"){const Ct=Dt.initialize({metricsCollector:m});B(Ct);return}if(!mt){Ae("Unable to initialize player: no args",{variant:"error"}),xt(void 0);return}try{switch(mt.type){case"connection":{const Ct=Dt.initialize({metricsCollector:m,params:mt.params});B(Ct),mt.params?.url&&V({type:"connection",sourceId:Dt.id,title:mt.params.url,label:Dt.displayName,extra:mt.params});return}case"file":{const Ct=mt.handle,Ge=mt.files;if(Ge){let gt=Ge[0];const Jt=[];for(const un of Ge)gt??=un,Jt.push(un);const fs=Dt.supportsMultiFile===!0&&Jt.length>1,jn=Dt.initialize({file:fs?void 0:gt,files:fs?Jt:void 0,metricsCollector:m});gt&&p?.setRepresentedFilename(gt.path),B(jn);return}else if(Ct){const gt=await Ct.queryPermission({mode:"read"});if(!h())return;if(gt!=="granted"&&await Ct.requestPermission({mode:"read"})!=="granted")throw new Error(`Permission denied: ${Ct.name}`);const Jt=await Ct.getFile();if(!h())return;p?.setRepresentedFilename(Jt.path);const fs=Dt.initialize({file:Jt,metricsCollector:m});B(fs),V({type:"file",title:Ct.name,sourceId:Dt.id,handle:Ct});return}}}Ae("Unable to initialize player",{variant:"error"})}catch(Ct){Ae(Ct.message,{variant:"error"})}},[s,m,Ae,h,V,p]),Pt=(0,l.useCallback)(Mh(q,Et,Ae),[q,Ae,Et]),vt=(0,l.useMemo)(()=>q.map(lt=>({id:lt.id,title:lt.title,label:lt.label})),[q]),Rt={selectSource:Et,selectRecent:Pt,selectedSource:nt,availableSources:s,recentSources:vt};return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Ue.Z.Provider,{value:Rt,children:(0,n.jsx)(Qe.D2,{player:Z,globalVariables:me.current,children:t})})})}function Mh(e,t,s){return a=>{const i=e.find(r=>r.id===a);if(!i){s(`Failed to restore recent: ${a}`,{variant:"error"});return}switch(i.type){case"connection":{t(i.sourceId,{type:"connection",params:i.extra});break}case"file":t(i.sourceId,{type:"file",handle:i.handle})}}}const Dh=(0,L.ZL)()(e=>({container:{alignItems:"stretch",display:"flex",flexDirection:"column",maxHeight:"50vw",marginBlockEnd:e.spacing(3),marginInline:e.spacing(3)},paper:{maxWidth:700,width:"70%"},text:{backgroundColor:e.palette.background.default,color:e.palette.text.primary,fontSize:e.typography.body1.fontSize,flex:1,padding:e.spacing(1),overflowY:"auto",whiteSpace:"pre-wrap"},iconButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1)}}));function Bh({notification:{details:e,message:t,severity:s,subText:a},onRequestClose:i}){const{classes:r,theme:c}=Dh(),d={error:c.palette.error.main,warn:c.palette.warning.main,info:c.palette.info.main},p=(0,l.useMemo)(()=>e instanceof Error?(0,n.jsx)("div",{className:r.text,children:e.stack}):e!=null&&e!==""?(0,n.jsx)(ge.Z,{style:{whiteSpace:"pre-line"},children:e}):a?void 0:"No details provided",[r,e,a]);return(0,n.jsxs)(Gt.Z,{classes:{paper:r.paper},fullWidth:!0,open:!0,onClose:()=>i?.(),children:[(0,n.jsx)(Vn.Z,{color:d[s],children:t}),(0,n.jsxs)("div",{className:r.container,children:[a&&(0,n.jsx)(ge.Z,{mb:3,children:a}),p]}),(0,n.jsx)(be.Z,{"aria-label":"close",onClick:()=>i?.(),className:r.iconButton,children:(0,n.jsx)(et.Z,{})})]})}var bi=o(42146);const wh=e=>{switch(e){case"error":return"error";case"warn":return"warning";case"info":return"default";default:return"default"}};function Rh(){const{enqueueSnackbar:e}=(0,we.Ds)(),[t,s]=(0,l.useState)(void 0);return(0,l.useLayoutEffect)(()=>((0,bi.tm)((a,i,r,c)=>{e((0,n.jsxs)("div",{children:[a," ",(0,n.jsx)(cn.Z,{onClick:()=>{s({message:a,details:i,severity:c})},variant:"inherit",fontStyle:"italic",color:"inherit",underline:"hover",children:"(see details)"})]}),{variant:wh(c),persist:c==="error"})}),()=>{(0,bi.X8)()}),[e]),t==null?(0,n.jsx)(n.Fragment,{}):(0,n.jsx)(Bh,{notification:t,onRequestClose:()=>{s(void 0)}})}var jh=o(6693);const as=e=>({"&.notistack-SnackbarContainer":{top:e==="top"?En.h:void 0}}),qo=(0,L.ZL)()((e,t,s)=>({icon:{},dismissButton:{color:e.palette.common.white,"svg:not(.MuiSvgIcon-root)":{fontSize:16}},root:{"#notistack-snackbar":{padding:0,gap:e.spacing(.75)},"&.notistack-MuiContent":{padding:e.spacing(.5,1.5,.5,1),fontSize:e.typography.body2.fontSize},"&.notistack-MuiContent-default":{backgroundColor:e.palette.background.paper,color:e.palette.text.primary,[`.${s.icon}`]:{color:e.palette.primary.main},[`.${s.dismissButton}`]:{color:e.palette.text.primary}},"&.notistack-MuiContent-success":{backgroundColor:e.palette.success.main},"&.notistack-MuiContent-error":{backgroundColor:e.palette.error.main},"&.notistack-MuiContent-info":{backgroundColor:e.palette.info.main},"&.notistack-MuiContent-warning":{backgroundColor:e.palette.warning.main}}})),Lh=(0,L.ZL)()({containerAnchorOriginBottomCenter:as("bottom"),containerAnchorOriginBottomRight:as("bottom"),containerAnchorOriginBottomLeft:as("bottom"),containerAnchorOriginTopCenter:as("top"),containerAnchorOriginTopRight:as("top"),containerAnchorOriginTopLeft:as("top")}),Oh=({id:e})=>{const{closeSnackbar:t}=(0,we.Ds)(),{classes:s}=qo();return(0,n.jsx)(be.Z,{size:"small",className:s.dismissButton,onClick:()=>{t(e)},children:(0,n.jsx)(Zn.BkL,{})})},is=(0,l.forwardRef)((e,t)=>{const{classes:s}=qo();return(0,n.jsx)(we.pk,{ref:t,...e,className:s.root})});is.displayName="Snackbar";function Nh({children:e}){const{classes:t}=Lh(),{classes:s}=qo();return(0,n.jsx)(we.wT,{Components:{default:is,error:is,success:is,warning:is,info:is},action:a=>(0,n.jsx)(Oh,{id:a}),iconVariant:{default:(0,n.jsx)(ks.qSj,{className:s.icon}),info:(0,n.jsx)(ks.qSj,{className:s.icon}),error:(0,n.jsx)(Zn.AGC,{className:s.icon}),warning:(0,n.jsx)(Qa.ONB,{className:s.icon}),success:(0,n.jsx)(re.KXr,{className:s.icon})},anchorOrigin:{vertical:"top",horizontal:"center"},maxSnack:5,preventDuplicate:!0,TransitionComponent:jh.Z,classes:t,children:e})}var Zh=o(82799),kh=o(58702),xi=o(52691);function Fh(e){const{isDesktop:t,onClose:s}=e,{t:a}=(0,ee.$G)("incompatibleLayoutVersion"),i=t??(0,Gn.Z)();return(0,n.jsxs)(Gt.Z,{open:!0,onClose:s,children:[(0,n.jsx)(Vn.Z,{children:a("title")}),(0,n.jsxs)(Kn.Z,{children:[i&&(0,n.jsxs)(xi.Z,{children:[a("desktopText"),(0,n.jsx)(cn.Z,{target:"_blank",href:"https://foxglove.dev/download",children:"https://foxglove.dev/download"}),"."]}),!i&&(0,n.jsx)(xi.Z,{children:a("webText")})]}),(0,n.jsx)(Sn.Z,{children:(0,n.jsx)($.Z,{onClick:s,variant:"contained",children:"OK"})})]})}var Uh="../../packages/studio-base/src/providers/CurrentLayoutProvider/index.tsx";const zh=ae.ZP.getLogger(Uh),Wh=1;function Gh({children:e}){const t=(0,Le.z)(),[s]=(0,l.useState)(()=>(0,$t.Z)()),a=(0,l.useRef)(new Set),i=(0,l.useCallback)(Z=>{a.current.add(Z)},[]),r=(0,l.useCallback)(Z=>{a.current.delete(Z)},[]),[c,d]=(0,l.useState)({selectedLayout:void 0}),p=(0,l.useRef)(c),[h,f]=(0,l.useState)(!1),m=(0,l.useCallback)(Z=>{const Ae=Z.selectedLayout?.data?.version;if(Ae!=null&&Ae>Wh){f(!0),d({selectedLayout:void 0});return}d(Z),p.current=Z;for(const nt of[...a.current])nt(Z)},[]),y=(0,l.useRef)([]),B=(0,l.useRef)(new Set),k=(0,l.useCallback)(Z=>{B.current.add(Z)},[]),z=(0,l.useCallback)(Z=>{B.current.delete(Z)},[]),G=(0,l.useCallback)(()=>y.current,[]),q=(0,l.useCallback)(Z=>{const Ae=typeof Z=="function"?Z(y.current):Z;if(!gi()(Ae,y.current)){y.current=Ae;for(const nt of[...B.current])nt(y.current)}},[]),V=(0,l.useCallback)(Z=>{if(p.current.selectedLayout?.data==null)return;const Ae=p.current.selectedLayout.data,nt=Cu(Ae,Z);if(U.Z(Ae,nt)){zh.warn("Panel action resulted in identical config:",Z);return}const xt=$o.Z(Object.keys(nt.configById).map(Be.$k));m({sharedPanelState:ns.Z(p.current.sharedPanelState,xt),selectedLayout:{data:nt,name:p.current.selectedLayout.name,edited:!0}})},[m]),me=(0,l.useCallback)(Z=>{m({sharedPanelState:{},selectedLayout:Z})},[m]),le=(0,l.useCallback)((Z,Ae)=>{p.current.selectedLayout?.data!=null&&m({...p.current,sharedPanelState:{...p.current.sharedPanelState,[Z]:Ae}})},[m]),oe=(0,l.useMemo)(()=>({getCurrentLayoutState:()=>p.current,setCurrentLayout:me,updateSharedPanelState:le,savePanelConfigs:Z=>{V({type:"SAVE_PANEL_CONFIGS",payload:Z})},updatePanelConfigs:(Z,Ae)=>{V({type:"SAVE_FULL_PANEL_CONFIG",payload:{panelType:Z,perPanelFunc:Ae}})},createTabPanel:Z=>{V({type:"CREATE_TAB_PANEL",payload:Z}),q([]),t.logEvent(Te.q.PANEL_ADD,{type:"Tab"})},changePanelLayout:Z=>{V({type:"CHANGE_PANEL_LAYOUT",payload:Z})},overwriteGlobalVariables:Z=>{V({type:"OVERWRITE_GLOBAL_DATA",payload:Z})},setGlobalVariables:Z=>{V({type:"SET_GLOBAL_DATA",payload:Z})},setUserNodes:Z=>{V({type:"SET_USER_NODES",payload:Z})},setPlaybackConfig:Z=>{V({type:"SET_PLAYBACK_CONFIG",payload:Z})},closePanel:Z=>{V({type:"CLOSE_PANEL",payload:Z});const Ae=(0,wt.PC)(Z.root,Z.path);q(nt=>nt.filter(xt=>xt!==Ae)),t.logEvent(Te.q.PANEL_DELETE,typeof Ae=="string"?{type:(0,Be.$k)(Ae)}:void 0)},splitPanel:Z=>{V({type:"SPLIT_PANEL",payload:Z})},swapPanel:Z=>{const Ae=y.current.includes(Z.originalId),nt=Object.keys(p.current.selectedLayout?.data?.configById??{});if(V({type:"SWAP_PANEL",payload:Z}),Ae){const xt=Object.keys(p.current.selectedLayout?.data?.configById??{});q(kh.Z(xt,nt))}t.logEvent(Te.q.PANEL_ADD,{type:Z.type,action:"swap"}),t.logEvent(Te.q.PANEL_DELETE,{type:(0,Be.$k)(Z.originalId),action:"swap"})},moveTab:Z=>{V({type:"MOVE_TAB",payload:Z})},addPanel:Z=>{V({type:"ADD_PANEL",payload:Z}),t.logEvent(Te.q.PANEL_ADD,{type:(0,Be.$k)(Z.id)})},dropPanel:Z=>{V({type:"DROP_PANEL",payload:Z}),t.logEvent(Te.q.PANEL_ADD,{type:Z.newPanelType,action:"drop"})},startDrag:Z=>{V({type:"START_DRAG",payload:Z})},endDrag:Z=>{V({type:"END_DRAG",payload:Z})}}),[t,V,me,q,le]),te=(0,j.O4)({addLayoutStateListener:i,removeLayoutStateListener:r,addSelectedPanelIdsListener:k,removeSelectedPanelIdsListener:z,mosaicId:s,getSelectedPanelIds:G,setSelectedPanelIds:q,actions:oe});return(0,n.jsxs)(bt.ZP.Provider,{value:te,children:[e,h&&(0,n.jsx)(Fh,{onClose:()=>{f(!1)}})]})}var Qh="../../packages/studio-base/src/providers/ExtensionCatalogProvider.tsx";const vn=ae.ZP.getLogger(Qh);function Yh(e,t){const s={},a=[],i=[];vn.debug(`Activating extension ${e.qualifiedName}`);const r={exports:{}},c=h=>({react:l,"react-dom":hi})[h],p={mode:"production",registerPanel:h=>{vn.debug(`Extension ${e.qualifiedName} registering panel: ${h.name}`);const f=`${e.qualifiedName}.${h.name}`;if(s[f]){vn.warn(`Panel ${f} is already registered`);return}s[f]={extensionName:e.qualifiedName,extensionNamespace:e.namespace,registration:h}},registerMessageConverter:h=>{vn.debug(`Extension ${e.qualifiedName} registering message converter from: ${h.fromSchemaName} to: ${h.toSchemaName}`),a.push(h)},registerTopicAliases:h=>{i.push({aliasFunction:h,extensionId:e.id})}};try{new Function("module","require",t)(r,c,{}),r.exports.activate(p)}catch(h){vn.error(h)}return{panels:s,messageConverters:a,topicAliasFunctions:i}}function Hh(e,t){return(0,F.M)((s,a)=>({downloadExtension:async i=>{const r=await fetch(i);return new Uint8Array(await r.arrayBuffer())},installExtension:async(i,r)=>{const c=e.find(p=>p.namespace===i);if(c==null)throw new Error("No extension loader found for namespace "+i);const d=await c.installExtension(r);return await a().refreshExtensions(),d},refreshExtensions:async()=>{if(e.length===0)return;const i=[],r={panels:{},messageConverters:[],topicAliasFunctions:[]};for(const c of e)try{for(const d of await c.getExtensions())try{i.push(d);const p=await c.loadExtension(d.id),h=Yh(d,p);Object.assign(r.panels,h.panels),r.messageConverters.push(...h.messageConverters),r.topicAliasFunctions.push(...h.topicAliasFunctions)}catch(p){vn.error("Error loading extension",p)}}catch(d){vn.error("Error loading extension list",d)}vn.debug(`Found ${i.length} extension(s)`),s({installedExtensions:i,installedPanels:r.panels,installedMessageConverters:r.messageConverters,installedTopicAliasFunctions:r.topicAliasFunctions})},installedExtensions:e.length===0?[]:void 0,installedPanels:{},installedMessageConverters:t??[],installedTopicAliasFunctions:[],uninstallExtension:async(i,r)=>{const c=e.find(d=>d.namespace===i);if(c==null)throw new Error("No extension loader found for namespace "+i);await c.uninstallExtension(r),await a().refreshExtensions()}}))}function Vh({children:e,loaders:t,mockMessageConverters:s}){const[a]=(0,l.useState)(Hh(t,s)),i=a.getState().refreshExtensions;return(0,l.useEffect)(()=>{i().catch(r=>{vn.error(r)})},[i]),(0,n.jsx)(Bn.d.Provider,{value:a,children:e})}const Kh="https://raw.githubusercontent.com/foxglove/studio-extension-marketplace/main/extensions.json";function Xh({children:e}){const t=(0,l.useCallback)(async()=>await(await fetch(Kh)).json(),[]),s=(0,l.useCallback)(async i=>await(await fetch(i)).text(),[]),a=(0,j.O4)({getAvailableExtensions:t,getMarkdown:s});return(0,n.jsx)(Tp.Provider,{value:a,children:e})}var $h=o(75017),Jh=o(14123);const qh="data:image/png;base64,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",_h=o.p+"e7bf3d07c33884215d85.png",eg=o.p+"fb62755380433e4f4f1c.png",tg="data:image/png;base64,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",ng="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAASjSURBVHgB7d3BTRtbAIXh4QkJdtRABbRCGSzZUQMdUAYdUQM7WL33nMhRQCYOeH7jO/4+KVJMIoWg6OQwPnPn5Orq6t8JIPDPBBARMEBGwACZ0/cfuLy8nEb09PT05vWofw/43ft/16PRYIDM6Ue/MEpybmsqo/8PwHFaSgPXYICMgAEyAgbICBggI2CAjIABMgIGyHy4g1nK+/AWvfB9NBggc+I8GKCiwQAZAQNkBAyQOfn/h2swQEKDATICBsgIGCDz4ZL37u7uzev7+/tpH25ubqaLi4tfrx8eHqbn5+cJGI8GA2ROt/2GfTWXtVVjWXnfoIDxHHyDeX19nYAxbW0w711fX0+Fx8fHjR9/eXl583rXZrNuZIfSkA7t81kKX9fdzPWdi2swQEbAABkBA2Q23ot0dnY23d7e/vj5vt9FWlt/7/xdfz6wu40N5vz8fALY1dZ3kVZNYrWkXe9Taq76w3K4BgNkhjsPZpT9ytJ3GKPuiexjGh9dK9VggIyAATICBsg4kxfIaDBARsAAGQEDZAQMkBEwQEbAABkBA2Q8FwnIaDBAxnORgIznIgGZo3su0lxGOw/GOSiNYzn356tcgwEyAgbICBgg47lIQMZzkYCM5yIBGddggIznIh05z3dyja+kwQAZAQNkBAyQ8VwkIKPBABkBA2QEDJD59Hkw380O5mv+du8Cc9JggIyAATICBsjYwQAZDQbICBggI2CAzHA7mG3sZOZlH8MuNBggI2CAjIABMnYwQEaDATICBsgIGCCzuB3MNnYy87KT4U80GCAjYICMgAEydjBARoMBMgIGyAgYIOM8GP7IzoVdaDBARsAAGQEDZOxggIwGA2QEDJARMEBmuB3MUncu9iYskQYDZAQMkBEwQMYOBshoMEBGwAAZAQNkBAyQETBARsAAGQEDZD68F+n9PT/7ulfm5uZmuri4+PX64eFhen5+noDxaDBAZuvd1Pu+y3fVWFY8HQDGd/AN5vX1dQLG9OnzYK6vr6fC4+Pjxo+/vLy8eb1rs1k3skNpSIf2+SzF0r+uo5wf5BoMkBEwQEbAAJmN58GcnZ1Nt7e3P37+Xd/rrb93dlYtjGtjgzk/P58AdrX1XaRVk1gtadf7lJp3U2A5XIMBMsOdyTvKfuVYdhij7Ylc09svDQbICBggI2CAjOciARkNBsgIGCAjYIDMp8+D+W6WvvNyHk3D3uYnDQbICBggI2CAjB0MkNFggIyAATICBsgIGCAjYIDMcEvev2WZOi/LVL5CgwEyAgbICBggY8kLZDQYICNggIyAATKL3cFsYyczLyfjNUbfH2kwQEbAABkBA2TsYICMBgNkBAyQETBA5mh3MB+x45iXc2SOmwYDZAQMkBEwQMYOBshoMEBGwAAZAQNknAfDLOxd2ESDATICBsgIGCBjBwNkNBggI2CAjIABMovdwdi5zMvOha/QYICMgAEyAgbI2MEAGQ0GyAgYICNggIyAATICBsgIGCAjYIDMcPciucdoXut7jHxd5+XerZ80GCAjYICMgAEy7kUCMhoMkBEwQEbAABkBA2QEDJARMEBGwAAZAQNkBAyQ+Q/etxTOEdcWZAAAAABJRU5ErkJggg==",sg=o.p+"0513b23d545c2bbec05a.png",og="data:image/png;base64,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",ag="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAORSURBVHgB7dxRTttAFEBRU7HALCLLyiKyw1b94BMCwdcznpzzXanBRFfPmuG9bdv2dwMI/NkAIgIDZAQGyAgMkBEYICMwQEZggMz7o39wu902Pne9XrdneK6s4NH33wQDZAQGyAgMkHnb/C0SEDHBABmBATICA2QEBsgIDJARGCAjMEBGYIDM++Vy2QAKbvICGa9IQEZggIzAABmBATICA2Qe7uR1jP21+/2+PcNz5b9nvz9nYYIBMgIDZAQGyLjJC2RMMEBGYICMwAAZgQEy9sEAGadIQMYrEpARGCAjMEBGYICMwACZ5ffBzLpv47fP9ePnmuX3M+vnYSwTDJARGCAjMEDGTV4gY4IBMgIDZAQGyAgMkLEPBsg4RQIyXpGAjMAAGYEBMgIDZAQGyCy/D+a7jt4f4noAIx31fTfBABmBATICA2Tc5AUyJhggIzBARmCAjMAAGftggIxTJCDjFQnICAyQERggIzBARmCAzOn2wRy9t6WyyvWAj9/Haj8P+zDBABmBATICA2Tc5AUyJhggIzBARmCAjMAAGftggIxTJCDjFQnICAyQERggIzBARmCAzOn2wext1P6Po5/rqL0to/9fxjLBABmBATICA2Tc5AUyJhggIzBARmCAjMAAGftggIxTJCDjFQnICAyQERggIzBARmCAzMvvg3mk2iviesDXRu2ROZvZ996YYICMwAAZgQEybvICGRMMkBEYICMwQEZggIx9MEDGKRKQ8YoEZAQGyAgMkBEYICMwQGbafTCz77n4raOf66j9Kq+y12X17+uzTDBARmCAjMAAGTd5gYwJBsgIDJARGCAjMEDGPhgg4xQJyHhFAjICA2QEBsgIDJARGCAz7T6Yo4za4+F6wM+8yl6ZvY3eU2OCATICA2QEBsi4yQtkTDBARmCAjMAAGYEBMvbBABmnSEDGKxKQERggIzBARmCAjMAAmWX2wYzee/FTr3o9YJa9LrN9jlWZYICMwAAZgQEybvICGRMMkBEYICMwQEZggIx9MEDGKRKQ8YoEZAQGyAgMkBEYICMwQGaZfTCVal+H6wH72Huvy+r7WY5mggEyAgNkBAbIuMkLZEwwQEZggIzAABmBATL2wQAZp0hAxisSkBEYICMwQEZggIzAAJmX2Qcz256Psz7XvfevHG2Vz38WJhggIzBARmCAjJu8QMYEA2QEBsgIDJARGCAjMEBGYICMwACZfyykld/DJR2SAAAAAElFTkSuQmCC",ig="data:image/png;base64,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",Ei="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAVmSURBVHgB7d2/a11lHAbwt6JcVDCLioII4iZx6KKDhYot/gVubjorxSWTk1MWF/dubv4FQtQOd+iiww3dilAKij+GW1AIDjVvaDAmhDQ373Pu+fH5QCiFkJssD8/5nvd7zqVSysMCEPBEAQgRMECMgAFiBAwQI2CAGAEDxAgYIEbAADECBogRMECMgAFiBAwQI2CAGAEDxAgYIObJ0sjm5ma5fv16mc1mBRim5XJZ5vN5WSwWpYVmDebKlSvCBQZuY2OjXLt2rbTSrMHUX6za3t4uwDBtbW01LQpmMECMgAFiBAwQ02wGc5Z6bXeUWQ2MnwYDxHTWYA5pLjAdGgwQE28wx2cvwHRoMECMgAFiBAwQEw+YetfInSOYJg0GiOk8YOpdJXeWYBo0GCCms5O85jAwPRoMECNggBgBA8QIGCBGwAAxAgaIETBATOdPtDuu9ane087bdPU5wH80GCBGwAAxAgaIWfsMpqtZRupzbty4cfAuXzMZOEmDuaCdnZ2yXC4LcNLaG8zQLRaLgy/gJA0GiBEwQIyAAWIEDBAjYICYwe8i2T2C/tJggBgBA8QIGCBmtLtIdo9g/TSYc7J7BI/PLtI52T2Cx6fBADECBogRMECMgAFiBAwQM7r3Ip3GzhJ0T4MBYgQMECNggJjJvBep68+3swQaTIydJbCLFGNnCTQYIEiDeeT4eRizE7g4DQaI0WCO0VygHQ0GiBnde5HO+nnn/X5gdRoMECNggBgBA8SMbhfpvD/v8PvNYqA9DQaIETDH1CajzUAbAgaIcZL3ESd4oT0NBogRMECMgAFiBAwQI2CAmMHcRep667o1d6mYIg0GiBEwQIyAAWIGM4NZ99Z1K974yJRoMB3zxkemxC5Sx7zxkSnRYIAYAQPECBggRsAAMQIGiLGLdEHOs8DpNBggRsAAMQIGiLGL1IgdIzhJg2nEjhGcZBepETtGcJIGA8QIGCBGwAAxAgaIETBAjF2kkXD+hj7SYIAYAQPECBggxi7SyNiJok80mJGxE0Wf2EUaGTtR9IkGA8QIGCBGwAAxa5/BHD9R6+4HjIcGA8SsPWBqY9FaYJw0GCCmdwFTZzJj23SGqdJggBgBA8QIGCCmd7tI7ijBeGgwQEzvTvIC46HBADFrbzBmLjBeGgwQI2CAGAEDxAgYIEbAADHxu0ieWAfTpcEAMfGA8cQ6mC4NBojpPGA8sQ6mQ4MBYgQMECNggJjOt6ndUYLp0GCAmM5P8gLTocEAMfEGY+YC06XBADECBogRMEBMsxnM3t5emc1m7hrBwC2Xy9JKswazs7PT9BcDuleLwnw+L61c2v96WAACzGCAGAEDxAgYIGbt76aGoXrmxefK5U/eLxuvvVCeenZWhu6X23fL7s1b5e/fHpRWDHlhBTVc3v3yw1EEy1H//LVXfvjs62Yh4xIJVrD50dXRhUtV/6bayloRMLCCl99+vYxVveRrRcAA/9OymQkYGLg6L/lj937pIwEDA1cDZv75N+Xed3dK3wgYGLjnN185GMz+9NW3vQsZ52BgBF59742Df2vIHP3/ugkYWIPDIGitns/pU8gIGFiH8PHWvpzRETCwBpc/bXeY7VCdv9z7/s7BPKYv53QMeWEEarjUS6MaLn2Zv1QCBgbuz937vQyXyiUSDNzT+4Pdd7744OB2dd8IGBi4eueofvWRSyRYQX2sAWcTMLCCBz//Xsbq19t3SysCBlbw4/5QdYwtpv5Ni5u3SiueaAcrqnOPNz++Wl56a/jPhqnBUltZDU6PzAQGwSUSECNggBgBA8QIGCBGwAAxAgaIETBAjIABYgQMECNggBgBA8QIGCBGwAAx/wLclk8IqQ/rwwAAAABJRU5ErkJggg==",rg="data:image/png;base64,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",lg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAVaSURBVHgB7d0/bttWAMfxp0BLTiF4KBzAcNwhS6dewTlDMhTw4LFnyNjBQAf1DPUVPHnxUNcwYMODwVt4Kus/AVSqQl06/IkU/fkAhJuXAnlglC+eSImvlFLqvo69vb3e/uyXHPXp5sx1E8+v+Y5vvm8KQIjAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPETAvfZH9/vwzZ1tZWGaLj4+PC+FnBADGTr08a53/449fz8v1Pe42xoa4Qhu729rYwftPz8/PSl/u4lT7//JdYnq/AvMyqv/dNez2Y7/Ncg+nY0dFR6dLBwUGBTeUaDBBjBdMxKw5YsIIBYqa785vSl7/uj91n/p/DclL68Gnn88rx+rT5649fmr/e3t4uQ3B9fV2GbPk8Pnn+AuT7y/5er8tWvX77er0OlRUMECMwQIzAADHTu+qiPHyU9+2s+W5yaONVVT3+nM1max0/u3r6+eFdWTm+bOjXPobqufO8PD7U121pvnx6e90OZfz+NvWkrDa0cfgnr9tNMLm/izTo7yIN7S7Sso9fhv1t6qH6/eeXfZt6SHeRVnEXqck1GCDGJ3k75rtIsGAFA8Q8XJnq7RrMpn3d/eHTp5MfmmNDf6LdUK16op3HH2T1MV8rGCDGNZiO+S4SLFjBADECA8QIDBBjV4EW7CrQHbsKvA52FWjJrgLdsKvA+rlNDYyKwAAxPgfTMd9FggUrGCDGCqZjVhywYAUDxFjBdMx3kWDBCgaIERggRmCAGNdgOubaByxYwQAxAgPECAwQ4xrMN1r1dPyh2MTHYTAuVjBAjMAAMQIDxAgMECMwQIxdBVpYtasA8N/qvo6vcduYoz7dnLlu4vk13/HN11skIEZggBiBAWIEBoiZ7M5v6sLa/LnzXYGu/XY5L0NkBQPECAwQIzBAzPSuunj8RMzb2W7jN4xnxstOY7icXT39/PDOuPGXjy+rqurx52w263V8en+dt6xmfD3jMF7uIq2Zu0gkuIsEvDoCA8QIDBBV93V4XIPza77jnq8VDBAjMECMwAAxAgPECAwQY1eBFuwqAO3VfR1uUzu/5jvu+XqLBMQIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMXYVaMGuAtBe3ddhVwHn13zHPV9vkYAYgQFiBAaIERggZjKfz+vCaP1Sfiysz2E5KSxYwQAxAgPECAwQM62q6vE/ZrNZ4zeMj2P8rrp4/MTT29mu8TWMl+bpf/Wvw2lh5CbGex1/3dxFGjl3kdbLXaQm12CAGIEBYgQGiKr7Ojyuwfk133HP1woGiBEYIEZggBiBAWIEBoixq0ALdhWA9uq+DrepnV/zHfd8vUUCYgQGiBEYIEZggBiBAWIEBogRGCBGYIAYgQFiBAaIERggRmCAGIEBYgQGiBEYIEZggBiBAWIEBogRGCBGYIAYuwq0YFcBaK/u67CrgPNrvuOer7dIQIzAADECA8QIDBAzmc/ndRmwTzufC3Tt/eVN6dJhOSn8mxUMECMwQIzAADFvqqoqD8eyoY2fXT0dxo13Od6VTfl3tO5xKxggxl0kXiV3kdbDCgaIERggRmCAqLqvw+ManF/zHfd8rWCAGIEBYgQGiBEYIEZggBi7CrRgVwFor+7rcJva+TXfcc/XWyQgRmCAGIEBYgQGiBEYIEZggBiBAWIEBogRGCBGYIAYgQFiBAaIERggRmCAGIEBYgQGiBEYIEZggBiBAWIEBogRGCBGYICYvwFzCRzd8/E02wAAAABJRU5ErkJggg==",cg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAReSURBVHgB7d3PKnRxHMfxHyHkX0hplCwsrOQK7LkG92DrLlyILVvXYGVB2ZBSLFgoqefpnPI0T8/QmScfc6Zer9JIpyxmznt+v++ZPyPb29u/CkDAaAEIERggRmCAGIEBYgQGiBEYIEZggJix0qfR0dEyPz9fJicn6x/a5+3trTw/P5eXl5cCg9RXYMbGxsrq6mp9S3tNTEyU5eXlsrCwUO7v78v7+3uBQehriyQuw+XjCaFadcIgNH7kzczMiMsQqu6zaksLg9A4MB6kw8usjEFpHJhqX89wEhgGxeYciBEYIEZggBiBAWIEBogRGCBGYIAYgaGxubm5MjU1VaApgWmJxcXFcnR0VNbW1j49Zm9vrxweHg7sJN/Z2SmdTqdAUwLTEq+vr/VtFZBekanisr+/X66urv4cC20nMC1RReP4+Lg8Pj7+E5mPuJydnZXT09MCw0JgWqRXZMSFYTbS9JsdNzY2Cj+jmrF0r2K+Iy43Nzd9Hb+yslIPdbutr6/Xn5L39PT019/v7u5s2+jJB7y0UHWyXlxc1IH5+P2nLS0t1ZHpNj4+XmZnZ/8ZMlfBERh6sYJpoY9t0fn5ednc3KxP9mrrdHt7W/5XvyuYXnZ3d+vVyvX1dYEmzGBapnvmcnJy8ungF4aBwLRIr4HuV1eXoO0EpiWqrdBnV4u6I3NwcFBgWJjBtEgVmeqFdJ+phqvT09N1aPr1HTOYra2t+n8/PDwUaMJVpBb5Ki6VaiUzyKs1l5eXBfphiwTECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAz0ul0Gr0XCaBfVjBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPECAwQIzBAjMAAMQIDxAgMECMwQIzAADECA8QIDBAjMECMwAAxAgPE/Aa7QMSy8qBRaAAAAABJRU5ErkJggg==",dg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAO4SURBVHgB7dzBbVpBGEbRcUQXtEIRrwjKogiKoC+yjvVblnjvSg4+R5pFFGWRb3FFzGQ+1lrPBRD4swAiAgNkBAbICAyQERggIzBARmCAzOmr33g8Hv/8+nK5rFfcbrf1zq7X63qFXWZ2mf3UXb77+/gEA2QEBsgIDJD5WP4vEhDxCQbICAyQERggIzBARmCAjMAAGYEBMgIDZE7bti2AynPPOZ/Pu/78ux672MUu6+mfSEBGYICMwAAZgQEyAgNk8jd53/1r8Pv9vl5hl5ldZj91l+/+Pj7BABmBATICA6TcQAyOXexiFzd5gZDAABmBATICA2QEBsgIDJD52LbtuQAivr8Pjl3sYhf3YICQwAAZgQEyAgNkBAbInFbMC2Uzu8zsMvOiHcAn+Zu8wO/lEwyQyX8G8+q/Od+dXWZ2mf2vu/gEA2S+/ATjZy7AXj7BABmBATICA2QEBsh40Q5IeYkrOHaxi128aAeEBAbICAyQERggIzBAJn8PxgtlM7vM7DLzoh3AJwIDZAQGSLmBGBy72MUubvICIYEBMgIDZAQGyAgMkBEYIONFOyDl+/vg2MUudnEPBggJDJARGCAjMEBGYICMF+128nLbzC4zL9oBHERggIzAACk3EINjF7vYxU1eICQwQEZggIzAABmBATICA2S8aAekfH8fHLvYxS7uwQAhgQEyAgNkBAbICAyQ8aLdTl5um9ll5kU7gIMIDJARGCDlBmJw7GIXu7jJC4QEBsgIDJARGCAjMEBGYICMF+2AlO/vg2MXu9jFPRggJDBARmCAjMAAGYEBMl6028nLbTO7zLxoB3AQgQEyAgOk3EAMjl3sYhc3eYGQwAAZgQEyAgNkBAbICAyQ8aIdkPL9fXDsYhe7uAcDhAQGyAgMkBEYICMwQMaLdjt5uW1ml5kX7QAOIjBARmCAlBuIwbGLXeziJi8QEhggIzBARmCAjMAAGYEBMl60A1K+vw+OXexiF/dggJDAABmBATICA2QEBsh40W4nL7fN7DLzoh3AQQQGyAgMkHIDMTh2sYtd3OQFQgIDZAQGyAgMkBEYICMwQMaLdkDK9/fBsYtd7OIeDBASGCAjMEBGYICMwAAZL9rt5OW2mV1mXrQDOIjAABmBAVJuIAbHLnaxi5u8QEhggIzAABmBATICA2QEBsh40Q5I+f4+OHaxi13cgwFCAgNkBAbICAyQERgg40W7nbzcNrPLzIt2AAcRGCAjMEDKDcTg2MUudnGTFwgJDJARGCAjMEBGYIDMX00akEYmuJ9MAAAAAElFTkSuQmCC",ug="data:image/png;base64,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",pg=o.p+"26c813b3e19fb7c31c1d.png",fg="data:image/png;base64,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",hg="data:image/png;base64,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",gg="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAARgAAADICAYAAAAzx/4XAAAACXBIWXMAABYlAAAWJQFJUiTwAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAdWSURBVHgB7d2xiyNVHMDxd3KQJUqwCGhrcUWqYJOFQMBKrkqdxl7/Iv8ALVKnEWwUAoFNY5nC4toTUhxBwwYOlAlcce6OmY35zZubfD7dpdnse798eVx2Zp6llP5OAAE+SgBBBAYIIzBAmOeJWnz59efp5Xcv0s3HljynN3/cp19/eJV++/l1Ip4TTE2++uYLcWmATz+7SS+/fZGoh8DUpBhsmuHmE6Gvi8AAYQQGCCMwQBiBAcIIDBBGYGpy/9fbRDO8eX2fqIfA1OSn738//pEXed3/+Tb98uOrRD2eJVdTA0GcYIAwAgOEERggzPPhcJjglJub96+lur/3H9ac5gQDhBEYIIzAAGEEBggjMEAYgQHClN47cDAYpMlkkjqdTqJ+u90urdfrtNlsUpvknqu2rmtTlZ5gRqORuGTU6/WOH8S2yT1XbV3XpioNjLjkdzgcUts0Ya7auK5NVRqY5XJ5PE6SR/EhKI7ybZN7rtq6rk31bDgcul0DJ7lUgHP4FgkIIzBAGIEBwggMEEZggDACA4TxVAEqub29fe/fd3d3CU5xggHCCAwQRmCAMAIDhBEYIIzAAGFK72g3Ho/TbDZL3W43XZPtdpsWi0VarVaJy7vUXNmnD0PpCWY6nV5dXAr9fv/4ASDGpebKPn0YSgNzjXF5Z7/fJ2Jccq7sU/OVBmY+nx+PodemGNri6E2MS82VffowuFSASlwqwDl8iwSEERggjMAAYQQGCCMwQBiBAcJ48BqVePAa53CCAcIIDBBGYIAwAgOEERggjMAAYUrvaDcYDNJkMkmdTidd0m63S+v1Om02m6w/jzyi9rkq81Cv0hPMaDQKGYJer3ccsNw/jzyi9rkq81Cv0sBEDsHhcEi5fx555IzLO+ahPqWBWS6Xx+PkpRWbWxxRc/888oja56rMQ71cKkAlLhXgHL5FAsIIDBBGYIAwAgOEERggjMAAYTx4jUo8eI1zOMEAYQQGCCMwQBiBAcIIDBBGYIAwpXe0G4/HaTabpW63m9pku92mxWKRVqvVe69f2++bS9V1btr75jylJ5jpdNq6D1uh3+8fB/zfru33zaXqOjftfXOe0sC08cP2zn6/f/Datf2+uTxlnZv0vjlPaWDm8/nxmNo2xdAWR+9/u7bfN5eq69y09815XCpAJS4V4By+RQLCCAwQRmCAMAIDhBEYIIzAAGEEBggjMEAYj46lEo+O5RxOMEAYgQHCCAwQRmCAMAIDhBEYIEzpPXkHg0GaTCap0+kk6rfb7dJ6vU6bzSa1Se65auu6NlXpCWY0GolLRr1e7/hBbJvcc9XWdW2q0sCIS36HwyG1TRPmqo3r2lSlgVkul8fjJHkUH4LiKN82ueeqrevaVC4VoBKXCnAO3yIBYQQGCCMwQBiBAcIIDBBGYIAwHh0LhHGCAcIIDBBGYIAwzxP/6cuvP08vv3uRbj62VDm9+eM+/frDq/Tbz6/fe73u/Sl7HzzOCeaEr775Qlwa4NPPbtLLb188eL3u/Sl7HzxOYE4oBopmuPnkYUhy7M9j74PHCQwQRmCAMAIDhBEYIIzAAGEE5oT7v94mmuHN64e36cyxP4+9Dx4nMCf89P3vxz+uIq/7P9+mX3589eD1uven7H3wOFdTA2GcYIAwAgOEERggzPPhcJjgFA9e4xxOMEAYgQHCCAwQRmCAMAIDhBEYIEzpvf8Gg0GaTCap0+mka7Lb7dJ6vU6bzSZxebnnyv7Wq/QEMxqNri4uhV6vd/wAECP3XNnfepUG5hrj8s7hcEjEaMJc2d/6lAZmuVwej5PXphi+4ghNjNxzZX/r9Ww4HLpdAye5VIBz+BYJCCMwQBiBAcIIDBBGYIAwAgOE8VQBKrm9vX3v33d3dwlOcYIBwggMEEZggDACA4QRGCCMwABhSu9oNx6P02w2S91uN/HQdrtNi8UirVarRHVV56psfXPPpX1/mtITzHQ6FZf/0O/3j4PO01Sdq7L1zT2X9v1pSgMjLqft9/vE0zxlrh5b3ybMpX2vrjQw8/n8eBzkccWQFUdlnqbqXJWtb+65tO9P41IBKnGpAOfwLRIQRmCAMAIDhBEYIIzAAGEEBgjjwWtU4sFrnMMJBggjMEAYgQHCCAwQRmCAMAIDhCm9o91gMEiTySR1Op30f+x2u7Rer9Nms0lwqbk6l3msV+kJZjQaXWQIer3ecaCgcKm5Opd5rFdpYC45BIfDIUEhZ1zeMY/1KQ3Mcrk8Hif/r2IziyMpFC41V+cyj/VyqQCVuFSAc/gWCQgjMEAYgQHCCAwQRmCAMAIDhPHgNSrx4DXO4QQDhBEYIIzAAGEEBggjMEAYgQHClN7Rbjwep9lslrrdbqJ+2+02LRaLtFqtUpvknqu2rmtTlZ5gptOpuGTU7/ePH8S2yT1XbV3XpioNjLjkt9/vU9s0Ya7auK5NVRqY+Xx+PE6SR/EhKI7ybZN7rtq6rk3lUgEqcakA5/AtEhBGYIAwAgOEERggjMAAYQQGCPMPoCOaGtegr8IAAAAASUVORK5CYII=",mg="data:image/png;base64,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",yg=e=>[{title:e("3D"),type:"3D",description:e("3DPanelDescription"),thumbnail:pg,module:async()=>await Promise.all([o.e(7984),o.e(650),o.e(7340),o.e(4248)]).then(o.bind(o,74248))},{title:e("ROSDiagnosticsDetail"),type:"DiagnosticStatusPanel",description:e("ROSDiagnosticsDetailDescription"),thumbnail:gg,module:async()=>await Promise.all([o.e(7955),o.e(7984),o.e(6160),o.e(5836),o.e(5658),o.e(6289),o.e(3067),o.e(6750),o.e(2421),o.e(1234),o.e(1194)]).then(o.bind(o,97287)),hasCustomToolbar:!0},{title:e("ROSDiagnosticSummary"),type:"DiagnosticSummary",description:e("ROSDiagnosticSummaryDescription"),thumbnail:mg,module:async()=>await o.e(610).then(o.bind(o,60610)),hasCustomToolbar:!0},{title:e("image"),type:"Image",description:e("imageDescription"),thumbnail:eg,module:async()=>await Promise.all([o.e(7984),o.e(650),o.e(7340),o.e(4248),o.e(2657)]).then(o.bind(o,72657))},{title:e("indicator"),type:"Indicator",description:e("indicatorDescription"),thumbnail:tg,module:async()=>await o.e(5807).then(o.bind(o,15807))},{title:e("gauge"),type:"Gauge",description:e("gaugeDescription"),thumbnail:_h,module:async()=>await o.e(9235).then(o.bind(o,9235))},{title:e("teleop"),type:"Teleop",description:e("teleopDescription"),thumbnail:ug,module:async()=>await o.e(5144).then(o.bind(o,55144))},{title:e("map"),type:"map",description:e("mapDescription"),thumbnail:sg,module:async()=>await Promise.all([o.e(2531),o.e(6503)]).then(o.bind(o,6503))},{title:e("parameters"),type:"Parameters",description:e("parametersDescription"),thumbnail:ag,module:async()=>await Promise.all([o.e(6289),o.e(6060)]).then(o.bind(o,16060))},{title:e("plot"),type:"Plot",description:e("plotDescription"),thumbnail:ig,module:async()=>await Promise.all([o.e(7955),o.e(7984),o.e(6160),o.e(5836),o.e(5658),o.e(6750),o.e(2421)]).then(o.bind(o,62421))},{title:e("publish"),type:"Publish",description:e("publishDescription"),thumbnail:Ei,module:async()=>await o.e(1815).then(o.bind(o,11815))},{title:e("callService"),type:"CallService",description:e("callServiceDescription"),thumbnail:Ei,module:async()=>await o.e(9701).then(o.bind(o,59701))},{title:e("rawMessages"),type:"RawMessages",description:e("rawMessagesDescription"),thumbnail:rg,module:async()=>await Promise.all([o.e(7955),o.e(7984),o.e(6160),o.e(5836),o.e(650),o.e(5658),o.e(7717),o.e(6750),o.e(2421),o.e(1234),o.e(2455)]).then(o.bind(o,42455)),hasCustomToolbar:!0},{title:e("log"),type:"RosOut",description:e("logDescription"),thumbnail:ng,module:async()=>await o.e(5142).then(o.bind(o,55142))},{title:e("stateTransitions"),type:"StateTransitions",description:e("stateTransitionsDescription"),thumbnail:lg,module:async()=>await Promise.all([o.e(7955),o.e(7984),o.e(6160),o.e(5836),o.e(5658),o.e(6750),o.e(2421),o.e(1234),o.e(9839)]).then(o.bind(o,11234))},{title:e("table"),type:"Table",description:e("tableDescription"),thumbnail:dg,module:async()=>await Promise.all([o.e(1340),o.e(4933)]).then(o.bind(o,44933)),hasCustomToolbar:!0},{title:e("topicGraph"),type:"TopicGraph",description:e("topicGraphDescription"),thumbnail:fg,module:async()=>await Promise.all([o.e(1961),o.e(1015)]).then(o.bind(o,71015))},{title:e("dataSourceInfo"),type:"SourceInfo",description:e("dataSourceInfoDescription"),thumbnail:qh,module:async()=>await o.e(1739).then(o.bind(o,31739))},{title:e("variableSlider"),type:"GlobalVariableSliderPanel",description:e("variableSliderDescription"),thumbnail:hg,module:async()=>await Promise.all([o.e(1077),o.e(4585)]).then(o.bind(o,74585))},{title:e("userScripts"),type:"NodePlayground",description:e("userScriptsDescription"),thumbnail:og,module:async()=>await Promise.all([o.e(650),o.e(9308),o.e(2605),o.e(4942),o.e(1159)]).then(o.bind(o,66838))},{title:e("tab"),type:Mn.bm,description:e("tabDescription"),thumbnail:cg,module:async()=>await o.e(4216).then(o.bind(o,14216)),hasCustomToolbar:!0}],vg=e=>[{title:e("studioPlaybackPerformance"),type:"PlaybackPerformance",description:e("studioPlaybackPerformanceDescription"),module:async()=>await o.e(7986).then(o.bind(o,47986))}];function Ag(e){const[t=!1]=(0,nn.b)(K.o.SHOW_DEBUG_PANELS),{t:s}=(0,ee.$G)("panels"),a=(0,Bn.I)(f=>f.installedPanels),i=(0,l.useMemo)(()=>Object.values(a??{}).map(f=>{const m=`${f.extensionName}.${f.registration.name}`,y=B=>(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(Jh._,{config:B.config,saveConfig:B.saveConfig,initPanel:f.registration.initPanel})});return y.panelType=m,y.defaultConfig={},{category:"misc",title:f.registration.name,type:m,module:async()=>({default:(0,$h.Z)(y)}),extensionNamespace:f.extensionNamespace}}),[a]),r=(0,l.useMemo)(()=>({builtin:yg(s),debug:vg(s)}),[s]),c=(0,l.useMemo)(()=>[...r.builtin,...r.debug,...i],[i,r]),d=(0,l.useMemo)(()=>{const f=[...r.builtin];return t&&f.push(...r.debug),f.push(...i),f},[t,i,r]),p=(0,l.useMemo)(()=>{const f=new Map;for(const m of c){const y=m.type;f.set(y,m)}return f},[c]),h=(0,l.useMemo)(()=>({getPanels(){return d},getPanelByType(f){return p.get(f)}}),[p,d]);return(0,n.jsx)(Ro.Z.Provider,{value:h,children:e.children})}var _o=o(33853);const bg=(0,L.ZL)()(e=>({button:{textAlign:"left",justifyContent:"flex-start",padding:e.spacing(2),gap:e.spacing(1.5),borderColor:e.palette.divider,height:"100%"},paper:{maxWidth:480}}));function xg(){const{classes:e}=bg(),[t,s]=(0,at.b)(K.o.LAUNCH_PREFERENCE),[,a]=(0,j.UG)(K.o.LAUNCH_PREFERENCE),[i,r]=(0,l.useState)(t!=null);async function c(){a(Mt.WEB),await s(i?Mt.WEB:void 0)}async function d(){a(Mt.DESKTOP),await s(i?Mt.DESKTOP:void 0)}function p(){r(!i)}const h=[{key:Mt.WEB,primary:"Web",secondary:"Requires Chrome v76+",onClick:()=>void c()},{key:Mt.DESKTOP,primary:"Desktop App",secondary:"For Linux, Windows, and macOS",onClick:()=>void d()}];return(0,n.jsxs)(Gt.Z,{open:!0,classes:{paper:e.paper},children:[(0,n.jsx)(X.Z,{paddingX:2,paddingTop:3,children:(0,n.jsx)(ge.Z,{align:"center",variant:"h2",fontWeight:600,children:"Launch Foxglove Studio"})}),(0,n.jsx)(Kn.Z,{children:(0,n.jsxs)(_o.ZP,{container:!0,spacing:1,children:[h.map(f=>(0,n.jsx)(_o.ZP,{item:!0,xs:12,sm:6,children:(0,n.jsx)($.Z,{className:e.button,fullWidth:!0,color:"inherit",variant:"outlined",size:"large",onClick:f.onClick,children:(0,n.jsxs)(X.Z,{flex:"auto",zeroMinWidth:!0,children:[(0,n.jsx)(ge.Z,{variant:"subtitle1",color:"text.primary",children:f.primary}),(0,n.jsx)(ge.Z,{variant:"body2",color:"text.secondary",children:f.secondary})]})})},f.key)),(0,n.jsx)(_o.ZP,{item:!0,xs:12,children:(0,n.jsx)(xs.Z,{label:"Remember my preference",control:(0,n.jsx)(es.Z,{color:"primary",checked:i,onChange:p})})})]})})]})}function Eg(){const[,e]=(0,j.UG)(K.o.LAUNCH_PREFERENCE),t=new URL(window.location.href);t.searchParams.delete("openIn");function s(){e(Mt.WEB),window.location.href=t.href}return(0,l.useEffect)(()=>{const a=new URL("foxglove://open");t.searchParams.forEach((i,r)=>{if(r&&i)switch(a.searchParams.set(r,i),r){case"ds":a.searchParams.set("type",i);break;case"ds.deviceId":a.searchParams.set("deviceId",i);break;case"ds.importId":a.searchParams.set("importId",i);break;case"ds.end":a.searchParams.set("end",i);break;case"ds.start":a.searchParams.set("start",i);break;case"ds.url":a.searchParams.set("url",i);break;case"time":a.searchParams.set("seekTo",i);break}}),window.location.href=a.href}),(0,n.jsx)(X.Z,{alignItems:"center",justifyContent:"center",fullHeight:!0,children:(0,n.jsxs)(X.Z,{alignItems:"center",justifyContent:"center",fullHeight:!0,gap:2.5,style:{maxWidth:480},children:[(0,n.jsx)(ge.Z,{align:"center",variant:"h2",fontWeight:600,children:"Launching Foxglove Studio\u2026"}),(0,n.jsx)(ge.Z,{align:"center",fontWeight:600,children:"We\u2019ve directed you to the desktop app."}),(0,n.jsxs)(X.Z,{gap:.5,children:[(0,n.jsxs)(ge.Z,{align:"center",children:["You can also"," ",(0,n.jsx)(cn.Z,{color:"primary",underline:"hover",onClick:s,children:"open this link in your browser"}),"."]}),(0,n.jsxs)(ge.Z,{align:"center",children:["Don\u2019t have the app installed?\xA0",(0,n.jsx)(cn.Z,{color:"primary",underline:"hover",href:"https://foxglove.dev/download",target:"_blank",children:"Download Foxglove Studio"})]})]})]})})}function Cg(e){const[t]=(0,at.b)(K.o.LAUNCH_PREFERENCE),[s]=(0,j.UG)(K.o.LAUNCH_PREFERENCE),a=new URL(window.location.href);let i=s??a.searchParams.get("openIn")??t;switch(i){case Mt.WEB:case Mt.DESKTOP:case Mt.ASK:break;default:i=Mt.WEB}const r=Array.from(a.searchParams.entries()).length>0;return i===Mt.ASK&&r?(0,n.jsx)(xg,{}):i===Mt.DESKTOP&&r?(0,n.jsx)(Eg,{}):(0,n.jsx)(n.Fragment,{children:e.children})}function Ci(e){if(!(e.target instanceof HTMLInputElement||e.target instanceof HTMLTextAreaElement))return e.preventDefault(),!1}function Sg(e){const{appConfiguration:t,dataSources:s,extensionLoaders:a,nativeAppMenu:i,nativeWindow:r,deepLinks:c,enableLaunchPreferenceScreen:d,enableGlobalCss:p=!1,extraProviders:h}=e,f=[(0,n.jsx)(je,{}),(0,n.jsx)(di.V,{}),(0,n.jsx)(Gh,{}),(0,n.jsx)(Xh,{}),(0,n.jsx)(Vh,{loaders:a}),(0,n.jsx)(Ih,{playerSources:s}),(0,n.jsx)(se,{})];i&&f.push((0,n.jsx)(af.Provider,{value:i})),r&&f.push((0,n.jsx)(Qf.Provider,{value:r})),h&&f.unshift(...h),f.unshift((0,n.jsx)(Nh,{})),f.unshift((0,n.jsx)(ue,{}));const m=d===!0?Cg:l.Fragment;return(0,l.useEffect)(()=>(document.addEventListener("contextmenu",Ci),()=>{document.removeEventListener("contextmenu",Ci)}),[]),(0,n.jsx)(Zh.Z.Provider,{value:t,children:(0,n.jsxs)(Zf,{children:[p&&(0,n.jsx)(R,{}),(0,n.jsx)(kf.Z,{children:(0,n.jsx)(Us.Z,{children:(0,n.jsx)(m,{children:(0,n.jsxs)(Wf,{providers:f,children:[(0,n.jsx)(Uf,{}),(0,n.jsx)(Rh,{}),(0,n.jsx)(S.W,{backend:T.PD,children:(0,n.jsx)(l.Suspense,{fallback:(0,n.jsx)(n.Fragment,{}),children:(0,n.jsx)(Ag,{children:(0,n.jsx)(Lf,{deepLinks:c,appBarLeftInset:e.appBarLeftInset,onAppBarDoubleClick:e.onAppBarDoubleClick,showCustomWindowControls:e.showCustomWindowControls,isMaximized:e.isMaximized,onMinimizeWindow:e.onMinimizeWindow,onMaximizeWindow:e.onMaximizeWindow,onUnmaximizeWindow:e.onUnmaximizeWindow,onCloseWindow:e.onCloseWindow})})})})]})})})})]})})}var Tg=o(1313),Pg=o.n(Tg),Ig=o(36537);const Mg=null,Dg=(()=>{function e(s){const a=["span",{}];let i=0,r=s.length%3;for(r===0&&(r=3);i<s.length;)a.push(["span",{style:r<s.length?"margin-right: 2px;":""},s.substring(i,r)]),i=r,r+=3;return a}return{header(s){const a=s;if(!(0,ne.isTime)(s)||a.sec<0||a.nsec<0||a.nsec>=1e9||!Number.isInteger(a.sec)||!Number.isInteger(a.nsec))return Mg;const i=a.nsec.toFixed().padStart(9,"0"),r=Pg()(`${a.sec}.${i}`);return["span",{style:`color: hsl(${r()*360}deg, ${40+r()*60}%, ${20+r()*40}%);`},e(String(a.sec)),".",e(i)]},hasBody(){return!1}}})();function Bg(){window.devtoolsFormatters=(0,Ig.N)(window).devtoolsFormatters??[],window.devtoolsFormatters.push(Dg)}var wg=o(64578);async function Rg(){return await Promise.all([...document.fonts].map(async e=>await e.load()))}var ea=o(24991),jg=o(42754);const Lg={addPanel:"Add panel",noLayoutSelected:"<selectLayoutLink>Select a layout</selectLayoutLink> to get started!",noPanelsMatchSearchCriteria:"No panels match search criteria.",searchPanels:"Search panels",selectPanelToAddToLayout:"Select a panel below to add it to your layout."},Og={about:"About",exploreSampleData:"Explore sample data",open:"Open\u2026",openLocalFile:"Open local file\u2026",openConnection:"Open connection\u2026",noDataSource:"No data source",joinOurSlack:"Join our Slack",recentDataSources:"Recent data sources",hideLeftSidebar:"Hide left sidebar",showLeftSidebar:"Show left sidebar",hideRightSidebar:"Hide right sidebar",showRightSidebar:"Show right sidebar",viewOurDocs:"View our docs",file:"File",view:"View",help:"Help",signIn:"Sign in",unknown:"unknown",importLayoutFromFile:"Import layout from file\u2026",exportLayoutToFile:"Export layout to file\u2026"},Ng={settings:"Settings",colorScheme:"Color scheme",dark:"Dark",light:"Light",followSystem:"Follow system",language:"Language",displayTimestampsIn:"Display timestamps in",timestampFormat:"Timestamp format",messageRate:"Message rate",openLinksIn:"Open links in",webApp:"Web app",desktopApp:"Desktop app",askEachTime:"Ask each time",general:"General",ros:"ROS",privacy:"Privacy",privacyDescription:"Changes will take effect the next time Foxglove Studio is launched.",extensions:"Extensions",about:"About",sendAnonymizedUsageData:"Send anonymized usage data to help us improve Foxglove Studio",sendAnonymizedCrashReports:"Send anonymized crash reports",experimentalFeatures:"Experimental features",experimentalFeaturesDescription:"These features are unstable and not recommended for daily use.",noExperimentalFeatures:"Currently there are no experimental features.",studioDebugPanels:"Studio debug panels",studioDebugPanelsDescription:"Show Foxglove Studio debug panels in the \u201CAdd panel\u201D list.",memoryUseIndicator:"Memory use indicator",memoryUseIndicatorDescription:"Show the app memory use in the sidebar.",newNavigation:"New navigation",newNavigationDescription:"New top navigation bar.",restartTheAppForChangesToTakeEffect:" Restart the app for changes to take effect.",layoutDebugging:"Layout debugging",layoutDebuggingDescription:"Show extra controls for developing and debugging layout storage."},Zg={dataSource:"Data source",currentSource:"Current source",waitingForConnection:"Waiting for connection\u2026",startTime:"Start time",endTime:"End time",duration:"Duration"},kg={foxglove:"Foxglove",learnMore:"Learn more"},Fg={title:"Incompatible layout version",desktopText:"This layout was created with a newer version of Foxglove Studio. Please update to the latest version at ",webText:"This layout was created with a newer version of Foxglove Studio. Please refresh your browser."},Ug={topicError:"Topic {{topic}} is not available",topic:"Topic",minLogLevel:"Log level",nameFilter:"Namespaces",showAll:"Show all",hideAll:"Hide all"},zg={newToFoxgloveStudio:"New to Foxglove Studio?",newToFoxgloveStudioDescription:"Start by exploring a sample dataset or checking out our documentation.",exploreSampleData:"Explore sample data",viewOurDocs:"View our docs",joinOurCommunity:"Join our community",joinOurCommunityDescription:"Join us on Slack or GitHub to get help, make feature requests, and report bugs.",joinOurSlack:"Join our Slack",openAGitHubIssue:"Open a GitHub issue",needHelp:"Need help?",needHelpDescription:"View our documentation, or check out the tutorials on the Foxglove blog.",seeTutorials:"See tutorials",collaborateTitle:"Accelerate development with Foxglove Data Platform",secureStorageOfData:"Securely store petabytes of ROS or custom data",convenientWebInterface:"Use a convenient web interface to tag, search, and retrieve data at lightning speed",canBeShared:"Share data files, visualization layouts, and custom extensions with teammates",createAFreeAccount:"Create a free account",signIn:"Sign in",learnMore:"Learn more",startCollaborating:"Start collaborating with your Foxglove organization",startCollaboratingDescription:"Make the most of your Foxglove account \u2013 whether you want to dive deep on your data or share tools with your teammates.",uploadToDataPlatform:"Upload to Data Platform",shareLayouts:"Share layouts",openLocalFile:"Open local file",openLocalFileDescription:"Visualize data directly from your local filesystem.",openUrl:"Upload and share data",openUrlDescription:"Use Foxglove Data Platform to share data with your team.",openConnection:"Open connection",openConnectionDescription:"Connect to a live robot or server.",openDataSource:"Open data source",recentDataSources:"Recent data sources"},Wg={instructions:"Please update to the latest version of the app.",warning:"This layout requires a more recent version of this panel."},Gg={"3D":"3D","3DPanelDescription":"Display markers, camera images, meshes, URDFs, and more in a 3D scene.",callService:"Call Service",callServiceDescription:"Call a service and view the service call result",dataSourceInfo:"Data Source Info",dataSourceInfoDescription:"View details like topics and timestamps for the current data source.",gauge:"Gauge",gaugeDescription:"Display a colored gauge based on a continuous value.",image:"Image",imageLegacy:"Image (Legacy)",imageDescription:"Display annotated images.",indicator:"Indicator",indicatorDescription:"Display a colored and/or textual indicator based on a threshold value.",log:"Log",logDescription:"Display logs by node and severity level.",map:"Map",mapDescription:"Display points on a map.",parameters:"Parameters",parametersDescription:"Read and set parameters for a data source.",plot:"Plot",plotDescription:"Plot numerical values over time or other values.",publish:"Publish",publishDescription:"Publish messages to the data source (live connections only).",rawMessages:"Raw Messages",rawMessagesDescription:"Inspect topic messages.",ROSDiagnosticsDetail:"Diagnostics \u2013 Detail (ROS)",ROSDiagnosticsDetailDescription:"Display ROS DiagnosticArray messages for a specific hardware_id.",ROSDiagnosticSummary:"Diagnostics \u2013 Summary (ROS)",ROSDiagnosticSummaryDescription:"Display a summary of all ROS DiagnosticArray messages.",stateTransitions:"State Transitions",stateTransitionsDescription:"Track when values change over time.",studioPlaybackPerformance:"Studio - Playback Performance",studioPlaybackPerformanceDescription:"Display playback and data-streaming performance statistics.",tab:"Tab",tabDescription:"Group panels together in a tabbed interface.",table:"Table",tableDescription:"Display topic messages in a tabular format.",teleop:"Teleop",teleopDescription:"Teleoperate a robot over a live connection.",topicGraph:"Topic Graph",topicGraphDescription:"Display a graph of active nodes, topics, and services.",userScripts:"User Scripts",userScriptsDescription:"Write custom data transformations in TypeScript. Previously known as Node Playground.",variableSlider:"Variable Slider",variableSliderDescription:"Update numerical variable values for a layout."},Qg={importOrExportSettings:"Import/export settings",importOrExportSettingsWithEllipsis:"Import/export settings...",resetToDefaults:"Reset to defaults",panelSettings:"Panel settings",selectAPanelToEditItsSettings:"Select a panel to edit its settings.",loadingPanelSettings:"Loading panel settings...",currentSettingsPanelName:"{{title}} panel settings",panelName:"{{title}} panel",panelDoesNotHaveSettings:"This panel does not have any settings",unknown:"Unknown"},Yg={deleteSeries:"Delete series",messagePath:"Message path",label:"Label",color:"Color",timestamp:"Timestamp",receiveTime:"Receive Time",headerStamp:"Header Stamp",series:"Series",addSeries:"Add series",maxYError:"Y max must be greater than Y min.",maxXError:"X max must be greater than X min.",general:"General",syncWithOtherPlots:"Sync with other plots",legend:"Legend",position:"Position",floating:"Floating",left:"Left",top:"Top",hidden:"Hidden",showValues:"Show values",yAxis:"Y Axis",showLabels:"Show labels",showLine:"Show lines",min:"Min",max:"Max",xAxis:"X Axis",value:"Value",index:"Index",currentPath:"Path (current)",accumulatedPath:"Path (accumulated)",secondsRange:"Range (seconds)"},Hg={searchPanelSettings:"Search panel settings\u2026",title:"Title",clearSearch:"Clear search",labels:"Labels",showAll:"Show All",hideAll:"Hide All",filterList:"Filter list",filterListHelp:"Filter list by visibility",listAll:"List all",listVisible:"List visible",listInvisible:"List invisible",general:"General"},Vg={maxXError:"X max must be greater than X min.",min:"Min",max:"Max",xAxis:"X Axis",secondsRange:"Range (seconds)"},Kg={frame:"Frame",color:"Color",position:"Position",lineWidth:"Line width",rotation:"Rotation",reset:"Reset",displayFrame:"Display frame",displayFrameHelp:"The coordinate frame to place the camera in. The camera position and orientation will be relative to the origin of this frame.",followMode:"Follow mode",followModeHelp:"Change the camera behavior during playback to follow the display frame or not.",pose:"Pose",fixed:"Fixed",frameNotFound:"Frame {{frameId}} not found",noCoordinateFramesFound:"No coordinate frames found",enablePreloading:"Enable preloading",lineColor:"Line color",axisScale:"Axis scale",labelSize:"Label size",labels:"Labels",editable:"Editable",settings:"Settings",transforms:"Transforms",showAll:"Show All",hideAll:"Hide All",scene:"Scene",renderStats:"Render stats",debugPicking:"Debug picking",background:"Background",labelScale:"Label scale",labelScaleHelp:"Scale factor to apply to all labels",ignoreColladaUpAxis:"Ignore COLLADA <up_axis>",ignoreColladaUpAxisHelp:"Match the behavior of rviz by ignoring the <up_axis> tag in COLLADA files",takeEffectAfterReboot:"This setting requires a restart to take effect",meshUpAxis:"Mesh up axis",meshUpAxisHelp:"The direction to use as \u201Cup\u201D when loading meshes without orientation info (STL and OBJ)",YUp:"Y-up",ZUp:"Z-up",view:"View",distance:"Distance",perspective:"Perspective",target:"Target",theta:"Theta",phi:"Phi",fovy:"Y-Axis FOV",near:"Near",far:"Far",syncCamera:"Sync camera",syncCameraHelp:"Sync the camera with other panels that also have this setting enabled.",topics:"Topics",customLayers:"Custom layers",addURDF:"Add URDF",size:"Size",divisions:"Divisions",grid:"Grid",delete:"Delete",addGrid:"Add Grid",imageAnnotations:"Image annotations",resetView:"Reset view"},Xg={newWindow:"New Window",settings:"Settings\u2026",file:"File",edit:"Edit",view:"View",advanced:"Advanced",inspectSharedWorker:"Inspect Shared Worker\u2026",noSharedWorkers:"No Shared Workers",checkForUpdates:"Check for Updates\u2026"},$g={settings:"\u8A2D\u5B9A",colorScheme:"\u30AB\u30E9\u30FC\u30B9\u30AD\u30FC\u30E0",dark:"\u30C0\u30FC\u30AF",light:"\u30E9\u30A4\u30C8",followSystem:"\u30B7\u30B9\u30C6\u30E0\u306B\u5F93\u3046",language:"\u8A00\u8A9E",displayTimestampsIn:"\u30BF\u30A4\u30E0\u30B9\u30BF\u30F3\u30D7\u3092\u8868\u793A",timestampFormat:"\u30BF\u30A4\u30E0\u30B9\u30BF\u30F3\u30D7\u5F62\u5F0F",messageRate:"\u30E1\u30C3\u30BB\u30FC\u30B8\u30EC\u30FC\u30C8",openLinksIn:"\u30EA\u30F3\u30AF\u3092\u958B\u304F",webApp:"\u30A6\u30A7\u30D6\u30A2\u30D7\u30EA",desktopApp:"\u30C7\u30B9\u30AF\u30C8\u30C3\u30D7\u30A2\u30D7\u30EA",askEachTime:"\u6BCE\u56DE\u78BA\u8A8D\u3059\u308B",general:"\u4E00\u822C",ros:"ROS",privacy:"\u30D7\u30E9\u30A4\u30D0\u30B7\u30FC",privacyDescription:"\u5909\u66F4\u306F\u6B21\u56DE\u306EFoxglove Studio\u8D77\u52D5\u6642\u306B\u6709\u52B9\u306B\u306A\u308A\u307E\u3059\u3002",extensions:"\u62E1\u5F35\u6A5F\u80FD",about:"\u60C5\u5831",sendAnonymizedUsageData:"\u533F\u540D\u5316\u3055\u308C\u305F\u4F7F\u7528\u30C7\u30FC\u30BF\u3092\u9001\u4FE1\u3057\u3066\u3001Foxglove Studio\u306E\u6539\u5584\u306B\u5F79\u7ACB\u3066\u308B",sendAnonymizedCrashReports:"\u533F\u540D\u5316\u3055\u308C\u305F\u30AF\u30E9\u30C3\u30B7\u30E5\u30EC\u30DD\u30FC\u30C8\u3092\u9001\u4FE1",experimentalFeatures:"\u5B9F\u9A13\u7684\u6A5F\u80FD",experimentalFeaturesDescription:"\u3053\u308C\u3089\u306E\u6A5F\u80FD\u306F\u6319\u52D5\u304C\u4E0D\u5B89\u5B9A\u306A\u305F\u3081\u3001\u65E5\u3005\u306E\u5229\u7528\u306F\u63A8\u5968\u3055\u308C\u307E\u305B\u3093\u3002",noExperimentalFeatures:"\u73FE\u5728\u3001\u5B9F\u9A13\u7684\u6A5F\u80FD\u306F\u3042\u308A\u307E\u305B\u3093\u3002",studioDebugPanels:"Studio\u30C7\u30D0\u30C3\u30B0\u30D1\u30CD\u30EB",studioDebugPanelsDescription:"\u300C\u30D1\u30CD\u30EB\u3092\u8FFD\u52A0\u300D\u30EA\u30B9\u30C8\u306BFoxglove Studio\u30C7\u30D0\u30C3\u30B0\u30D1\u30CD\u30EB\u3092\u8868\u793A\u3059\u308B\u3002",memoryUseIndicator:"\u30E1\u30E2\u30EA\u4F7F\u7528\u30A4\u30F3\u30B8\u30B1\u30FC\u30BF",memoryUseIndicatorDescription:"\u30B5\u30A4\u30C9\u30D0\u30FC\u306B\u30A2\u30D7\u30EA\u306E\u30E1\u30E2\u30EA\u4F7F\u7528\u91CF\u3092\u8868\u793A\u3059\u308B\u3002",newNavigation:"\u65B0\u3057\u3044\u30CA\u30D3\u30B2\u30FC\u30B7\u30E7\u30F3",newNavigationDescription:"\u65B0\u3057\u3044\u30C8\u30C3\u30D7\u30CA\u30D3\u30B2\u30FC\u30B7\u30E7\u30F3\u30D0\u30FC\u3002",restartTheAppForChangesToTakeEffect:"\u5909\u66F4\u3092\u53CD\u6620\u3059\u308B\u306B\u306F\u3001\u30A2\u30D7\u30EA\u3092\u518D\u8D77\u52D5\u3057\u3066\u304F\u3060\u3055\u3044\u3002",layoutDebugging:"\u30EC\u30A4\u30A2\u30A6\u30C8\u30C7\u30D0\u30C3\u30B0",layoutDebuggingDescription:"\u30EC\u30A4\u30A2\u30A6\u30C8\u30B9\u30C8\u30EC\u30FC\u30B8\u306E\u958B\u767A\u304A\u3088\u3073\u30C7\u30D0\u30C3\u30B0\u7528\u306E\u8FFD\u52A0\u30B3\u30F3\u30C8\u30ED\u30FC\u30EB\u3092\u8868\u793A\u3059\u308B\u3002"},Jg={foxglove:"Foxglove",learnMore:"\u3082\u3063\u3068\u5B66\u3076"},qg={"3D":"3D","3DPanelDescription":"\u30DE\u30FC\u30AB\u30FC\u3084\u30AB\u30E1\u30E9\u6620\u50CF\u3001\u30E1\u30C3\u30B7\u30E5\u3001URDF\u306A\u3069\u30923D\u30B7\u30FC\u30F3\u3067\u8868\u793A\u3057\u307E\u3059\u3002",dataSourceInfo:"\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\u60C5\u5831",dataSourceInfoDescription:"\u73FE\u5728\u306E\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\u306B\u95A2\u3059\u308B\u30C8\u30D4\u30C3\u30AF\u3084\u30BF\u30A4\u30E0\u30B9\u30BF\u30F3\u30D7\u306A\u3069\u306E\u8A73\u7D30\u3092\u8868\u793A\u3057\u307E\u3059\u3002",gauge:"\u30B2\u30FC\u30B8",gaugeDescription:"\u9023\u7D9A\u5024\u306B\u57FA\u3065\u304F\u8272\u4ED8\u304D\u306E\u30B2\u30FC\u30B8\u3092\u8868\u793A\u3057\u307E\u3059\u3002",image:"\u753B\u50CF",imageLegacy:"\u753B\u50CF (Legacy)",imageDescription:"\u6CE8\u91C8\u4ED8\u304D\u306E\u753B\u50CF\u3092\u8868\u793A\u3057\u307E\u3059\u3002",indicator:"\u30A4\u30F3\u30B8\u30B1\u30FC\u30BF\u30FC",indicatorDescription:"\u95BE\u5024\u306B\u57FA\u3065\u3044\u305F\u8272\u3084\u30C6\u30AD\u30B9\u30C8\u3067\u8868\u793A\u3055\u308C\u308B\u30A4\u30F3\u30B8\u30B1\u30FC\u30BF\u30FC\u3092\u8868\u793A\u3057\u307E\u3059\u3002",log:"\u30ED\u30B0",logDescription:"\u30CE\u30FC\u30C9\u3068\u91CD\u8981\u5EA6\u30EC\u30D9\u30EB\u5225\u306B\u30ED\u30B0\u3092\u8868\u793A\u3057\u307E\u3059\u3002",map:"\u5730\u56F3",mapDescription:"\u5730\u56F3\u4E0A\u306B\u70B9\u3092\u8868\u793A\u3057\u307E\u3059\u3002",parameters:"\u30D1\u30E9\u30E1\u30FC\u30BF\u30FC",parametersDescription:"\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\u306E\u30D1\u30E9\u30E1\u30FC\u30BF\u30FC\u3092\u8AAD\u307F\u53D6\u308A\u3001\u8A2D\u5B9A\u3057\u307E\u3059\u3002",plot:"\u30D7\u30ED\u30C3\u30C8",plotDescription:"\u6642\u9593\u307E\u305F\u306F\u4ED6\u306E\u5024\u306B\u5BFE\u3059\u308B\u6570\u5024\u3092\u30D7\u30ED\u30C3\u30C8\u3057\u307E\u3059\u3002",publish:"\u30D1\u30D6\u30EA\u30C3\u30B7\u30E5",publishDescription:"\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\u306B\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u30D1\u30D6\u30EA\u30C3\u30B7\u30E5\u3057\u307E\u3059\uFF08\u30E9\u30A4\u30D6\u63A5\u7D9A\u306E\u307F\uFF09\u3002 ",rawMessages:"\u751F\u30C7\u30FC\u30BF\u306E\u30E1\u30C3\u30BB\u30FC\u30B8",rawMessagesDescription:"\u30C8\u30D4\u30C3\u30AF\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u691C\u67FB\u3057\u307E\u3059\u3002",ROSDiagnosticsDetail:"\u8A3A\u65AD - \u8A73\u7D30 (ROS)",ROSDiagnosticsDetailDescription:"\u7279\u5B9A\u306Ehardware_id\u306EROS DiagnosticArray\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u793A\u3057\u307E\u3059\u3002",ROSDiagnosticSummary:"\u8A3A\u65AD - \u6982\u8981 (ROS)",ROSDiagnosticSummaryDescription:"\u3059\u3079\u3066\u306EROS DiagnosticArray\u30E1\u30C3\u30BB\u30FC\u30B8\u306E\u6982\u8981\u3092\u8868\u793A\u3057\u307E\u3059\u3002",stateTransitions:"\u30B9\u30C6\u30FC\u30C8\u30C8\u30E9\u30F3\u30B8\u30B7\u30E7\u30F3",stateTransitionsDescription:"\u6642\u9593\u3068\u3068\u3082\u306B\u5024\u304C\u5909\u5316\u3059\u308B\u3068\u304D\u3092\u8FFD\u8DE1\u3057\u307E\u3059\u3002",studioPlaybackPerformance:"Studio - \u518D\u751F\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9",studioPlaybackPerformanceDescription:"\u518D\u751F\u304A\u3088\u3073\u30C7\u30FC\u30BF\u30B9\u30C8\u30EA\u30FC\u30DF\u30F3\u30B0\u306E\u30D1\u30D5\u30A9\u30FC\u30DE\u30F3\u30B9\u7D71\u8A08\u60C5\u5831\u3092\u8868\u793A\u3057\u307E\u3059\u3002",tab:"\u30BF\u30D6",tabDescription:"\u8907\u6570\u306E\u30D1\u30CD\u30EB\u3092\u30BF\u30D6\u3067\u30B0\u30EB\u30FC\u30D7\u5316\u3057\u3066\u8868\u793A\u3057\u307E\u3059\u3002",table:"\u30C6\u30FC\u30D6\u30EB",tableDescription:"\u30C8\u30D4\u30C3\u30AF\u30E1\u30C3\u30BB\u30FC\u30B8\u3092\u8868\u5F62\u5F0F\u3067\u8868\u793A\u3057\u307E\u3059\u3002",teleop:"Teleop",teleopDescription:"\u30E9\u30A4\u30D6\u63A5\u7D9A\u3067\u30ED\u30DC\u30C3\u30C8\u3092\u64CD\u4F5C\u3057\u307E\u3059\u3002",topicGraph:"\u30C8\u30D4\u30C3\u30AF\u30B0\u30E9\u30D5",topicGraphDescription:"\u30A2\u30AF\u30C6\u30A3\u30D6\u306A\u30CE\u30FC\u30C9\u3001\u30C8\u30D4\u30C3\u30AF\u3001\u30B5\u30FC\u30D3\u30B9\u306E\u30B0\u30E9\u30D5\u3092\u8868\u793A\u3057\u307E\u3059\u3002",userScripts:"\u30E6\u30FC\u30B6\u30FC\u30B9\u30AF\u30EA\u30D7\u30C8",userScriptsDescription:"TypeScript\u3067\u30AB\u30B9\u30BF\u30E0\u30C7\u30FC\u30BF\u5909\u63DB\u3092\u8A18\u8FF0\u3057\u307E\u3059\u3002\u4EE5\u524D\u306FNode Playground\u3068\u3057\u3066\u77E5\u3089\u308C\u3066\u3044\u307E\u3057\u305F\u3002",variableSlider:"\u5909\u6570\u30B9\u30E9\u30A4\u30C0\u30FC",variableSliderDescription:"\u30EC\u30A4\u30A2\u30A6\u30C8\u306E\u6570\u5024\u5909\u6570\u3092\u66F4\u65B0\u3057\u307E\u3059\u3002"},_g={addPanel:"\u30D1\u30CD\u30EB\u3092\u8FFD\u52A0",noLayoutSelected:"<selectLayoutLink>\u30EC\u30A4\u30A2\u30A6\u30C8\u3092\u9078\u629E</selectLayoutLink>\u3057\u3066\u59CB\u3081\u307E\u3057\u3087\u3046\uFF01",noPanelsMatchSearchCriteria:"\u691C\u7D22\u6761\u4EF6\u306B\u4E00\u81F4\u3059\u308B\u30D1\u30CD\u30EB\u304C\u3042\u308A\u307E\u305B\u3093\u3002",searchPanels:"\u30D1\u30CD\u30EB\u3092\u691C\u7D22",selectPanelToAddToLayout:"\u4E0B\u306E\u30D1\u30CD\u30EB\u3092\u9078\u629E\u3057\u3066\u30EC\u30A4\u30A2\u30A6\u30C8\u306B\u8FFD\u52A0\u3057\u3066\u304F\u3060\u3055\u3044\u3002"},em={importOrExportSettings:"\u8A2D\u5B9A\u306E\u30A4\u30F3\u30DD\u30FC\u30C8/\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8",importOrExportSettingsWithEllipsis:"\u8A2D\u5B9A\u306E\u30A4\u30F3\u30DD\u30FC\u30C8/\u30A8\u30AF\u30B9\u30DD\u30FC\u30C8...",resetToDefaults:"\u30C7\u30D5\u30A9\u30EB\u30C8\u306B\u30EA\u30BB\u30C3\u30C8",panelSettings:"\u30D1\u30CD\u30EB\u8A2D\u5B9A",selectAPanelToEditItsSettings:"\u7DE8\u96C6\u3059\u308B\u30D1\u30CD\u30EB\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044\u3002",loadingPanelSettings:"\u30D1\u30CD\u30EB\u8A2D\u5B9A\u3092\u8AAD\u307F\u8FBC\u3093\u3067\u3044\u307E\u3059...",currentSettingsPanelName:"{{title}}\u30D1\u30CD\u30EB\u306E\u8A2D\u5B9A",panelName:"{{title}}\u30D1\u30CD\u30EB",panelDoesNotHaveSettings:"\u3053\u306E\u30D1\u30CD\u30EB\u306B\u306F\u8A2D\u5B9A\u304C\u3042\u308A\u307E\u305B\u3093\u3002",unknown:"\u4E0D\u660E"},tm={topicError:"{{topic}}\u3068\u3044\u3046\u30C8\u30D4\u30C3\u30AF\u306F\u5229\u7528\u3067\u304D\u307E\u305B\u3093\u3002",topic:"\u30C8\u30D4\u30C3\u30AF"},nm={deleteSeries:"\u30B7\u30EA\u30FC\u30BA\u3092\u524A\u9664\u3059\u308B",messagePath:"\u30E1\u30C3\u30BB\u30FC\u30B8\u30D1\u30B9",label:"\u30E9\u30D9\u30EB",color:"\u30AB\u30E9\u30FC",timestamp:"\u30BF\u30A4\u30E0\u30B9\u30BF\u30F3\u30D7",receiveTime:"\u53D7\u4FE1\u6642\u9593",headerStamp:"\u30D8\u30C3\u30C0\u30FC\u30B9\u30BF\u30F3\u30D7",series:"\u30B7\u30EA\u30FC\u30BA",addSeries:"\u30B7\u30EA\u30FC\u30BA\u3092\u8FFD\u52A0\u3059\u308B",maxYError:"Y\u6700\u5927\u5024\u306F\u3001Y\u6700\u5C0F\u5024\u3088\u308A\u5927\u304D\u304F\u306A\u3051\u308C\u3070\u306A\u308A\u307E\u305B\u3093\u3002",maxXError:"X\u6700\u5927\u5024\u306F\u3001X\u6700\u5C0F\u5024\u3088\u308A\u5927\u304D\u304F\u306A\u3051\u308C\u3070\u306A\u308A\u307E\u305B\u3093\u3002",general:"\u4E00\u822C\u7684\u306A",syncWithOtherPlots:"\u4ED6\u306E\u30D7\u30ED\u30C3\u30C8\u3068\u540C\u671F\u3059\u308B",legend:"\u51E1\u4F8B",position:"\u30DD\u30B8\u30B7\u30E7\u30F3",floating:"\u30D5\u30ED\u30FC\u30C6\u30A3\u30F3\u30B0",left:"\u5DE6",top:"\u4E0A",hidden:"\u96A0\u3059",showValues:"\u5024\u3092\u8868\u793A\u3059\u308B",yAxis:"Y\u8EF8",showLabels:"\u30E9\u30D9\u30EB\u3092\u8868\u793A\u3059\u308B",min:"\u6700\u5C0F",max:"\u6700\u5927",xAxis:"X\u8EF8",value:"\u5024",index:"\u30A4\u30F3\u30C7\u30C3\u30AF\u30B9",currentPath:"\u30D1\u30B9\uFF08\u73FE\u5728\uFF09",accumulatedPath:"\u30D1\u30B9\uFF08\u7D2F\u7A4D\uFF09",secondsRange:"\u7BC4\u56F2\uFF08\u79D2\u6570\uFF09"},sm={dataSource:"\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9",currentSource:"\u73FE\u5728\u306E\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9",waitingForConnection:"\u63A5\u7D9A\u5F85\u6A5F\u4E2D\u2026",startTime:"\u958B\u59CB\u6642\u523B",endTime:"\u7D42\u4E86\u6642\u523B",duration:"\u6240\u8981\u6642\u9593"},om={newToFoxgloveStudio:"Foxglove Studio\u3092\u521D\u3081\u3066\u3054\u5229\u7528\u3067\u3059\u304B\uFF1F",newToFoxgloveStudioDescription:"\u30B5\u30F3\u30D7\u30EB\u30C7\u30FC\u30BF\u30BB\u30C3\u30C8\u3092\u63A2\u7D22\u3057\u305F\u308A\u3001\u30C9\u30AD\u30E5\u30E1\u30F3\u30C6\u30FC\u30B7\u30E7\u30F3\u3092\u30C1\u30A7\u30C3\u30AF\u3057\u3066\u958B\u59CB\u3057\u3066\u304F\u3060\u3055\u3044\u3002",exploreSampleData:"\u30B5\u30F3\u30D7\u30EB\u30C7\u30FC\u30BF\u3092\u63A2\u7D22\u3059\u308B",viewOurDocs:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C6\u30FC\u30B7\u30E7\u30F3\u3092\u898B\u308B",joinOurCommunity:"\u30B3\u30DF\u30E5\u30CB\u30C6\u30A3\u306B\u53C2\u52A0\u3059\u308B",joinOurCommunityDescription:"Slack\u3084GitHub\u306B\u53C2\u52A0\u3057\u3066\u3001\u30D8\u30EB\u30D7\u3092\u5F97\u305F\u308A\u3001\u6A5F\u80FD\u30EA\u30AF\u30A8\u30B9\u30C8\u3092\u884C\u3063\u305F\u308A\u3001\u30D0\u30B0\u3092\u5831\u544A\u3057\u307E\u3057\u3087\u3046\u3002",joinOurSlack:"Slack\u306B\u53C2\u52A0\u3059\u308B",openAGitHubIssue:"GitHub\u306E\u554F\u984C\u3092\u958B\u304F",needHelp:"\u30D8\u30EB\u30D7\u304C\u5FC5\u8981\u3067\u3059\u304B\uFF1F",needHelpDescription:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C6\u30FC\u30B7\u30E7\u30F3\u3092\u898B\u305F\u308A\u3001Foxglove\u30D6\u30ED\u30B0\u306E\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u3092\u30C1\u30A7\u30C3\u30AF\u3057\u3066\u307F\u307E\u3057\u3087\u3046\u3002",seeTutorials:"\u30C1\u30E5\u30FC\u30C8\u30EA\u30A2\u30EB\u3092\u898B\u308B",collaborateTitle:"Foxglove Data Platform\u3067\u958B\u767A\u3092\u52A0\u901F\u3059\u308B",secureStorageOfData:"ROS\u307E\u305F\u306F\u30AB\u30B9\u30BF\u30E0\u30C7\u30FC\u30BF\u3092\u30DA\u30BF\u30D0\u30A4\u30C8\u5358\u4F4D\u3067\u5B89\u5168\u306B\u4FDD\u5B58",convenientWebInterface:"\u4FBF\u5229\u306AWeb\u30A4\u30F3\u30BF\u30FC\u30D5\u30A7\u30FC\u30B9\u3092\u4F7F\u7528\u3057\u3066\u3001\u30C7\u30FC\u30BF\u3092\u30BF\u30B0\u4ED8\u3051\u3001\u691C\u7D22\u3001\u304A\u3088\u3073\u9AD8\u901F\u306B\u53D6\u5F97",canBeShared:"\u30C1\u30FC\u30E0\u30E1\u30A4\u30C8\u3068\u30C7\u30FC\u30BF\u30D5\u30A1\u30A4\u30EB\u3001\u53EF\u8996\u5316\u30EC\u30A4\u30A2\u30A6\u30C8\u3001\u304A\u3088\u3073\u30AB\u30B9\u30BF\u30E0\u62E1\u5F35\u5B50\u3092\u5171\u6709\u3067\u304D\u307E\u3059",createAFreeAccount:"\u7121\u6599\u306E\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u4F5C\u6210\u3059\u308B",signIn:"\u30ED\u30B0\u30A4\u30F3",learnMore:"\u8A73\u7D30\u3092\u898B\u308B",startCollaborating:"Foxglove\u306E\u7D44\u7E54\u3068\u30B3\u30E9\u30DC\u30EC\u30FC\u30B7\u30E7\u30F3\u3092\u958B\u59CB\u3059\u308B",startCollaboratingDescription:"Foxglove\u30A2\u30AB\u30A6\u30F3\u30C8\u3092\u6700\u5927\u9650\u306B\u6D3B\u7528\u3057\u307E\u3057\u3087\u3046\u3002\u305F\u3068\u3048\u3070\u3001\u30C7\u30FC\u30BF\u3092\u8A73\u7D30\u306B\u5206\u6790\u3057\u305F\u308A\u3001\u30C1\u30FC\u30E0\u30E1\u30A4\u30C8\u3068\u30C4\u30FC\u30EB\u3092\u5171\u6709\u3057\u305F\u308A\u3059\u308B\u3053\u3068\u304C\u3067\u304D\u307E\u3059\u3002",uploadToDataPlatform:"Data Platform\u306B\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3059\u308B",shareLayouts:"\u30EC\u30A4\u30A2\u30A6\u30C8\u3092\u5171\u6709\u3059\u308B",openLocalFile:"\u30ED\u30FC\u30AB\u30EB\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u304F",openLocalFileDescription:"\u30ED\u30FC\u30AB\u30EB\u30D5\u30A1\u30A4\u30EB\u30B7\u30B9\u30C6\u30E0\u304B\u3089\u76F4\u63A5\u30C7\u30FC\u30BF\u3092\u53EF\u8996\u5316\u3057\u307E\u3059\u3002",openUrl:"\u30C7\u30FC\u30BF\u3092\u30A2\u30C3\u30D7\u30ED\u30FC\u30C9\u3057\u3066\u5171\u6709\u3059\u308B",openUrlDescription:"Foxglove Data Platform\u3092\u4F7F\u7528\u3057\u3066\u3001\u30C1\u30FC\u30E0\u3068\u30C7\u30FC\u30BF\u3092\u5171\u6709\u3057\u307E\u3059\u3002",openConnection:"\u63A5\u7D9A\u3092\u958B\u304F",openConnectionDescription:"\u30E9\u30A4\u30D6\u30ED\u30DC\u30C3\u30C8\u307E\u305F\u306F\u30B5\u30FC\u30D0\u30FC\u306B\u63A5\u7D9A\u3057\u307E\u3059\u3002",openDataSource:"\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9\u3092\u958B\u304F",recentDataSources:"\u6700\u8FD1\u306E\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9"},am={searchPanelSettings:"\u691C\u7D22\u30D1\u30CD\u30EB\u306E\u8A2D\u5B9A...",title:"\u30BF\u30A4\u30C8\u30EB",clearSearch:"\u691C\u7D22\u3092\u30AF\u30EA\u30A2\u3059\u308B",labels:"\u30E9\u30D9\u30EB",showAll:"\u3059\u3079\u3066\u8868\u793A",hideAll:"\u3059\u3079\u3066\u975E\u8868\u793A",filterList:"\u30EA\u30B9\u30C8\u3092\u30D5\u30A3\u30EB\u30BF\u30EA\u30F3\u30B0\u3059\u308B",filterListHelp:"\u53EF\u8996\u6027\u3067\u30EA\u30B9\u30C8\u3092\u30D5\u30A3\u30EB\u30BF\u30EA\u30F3\u30B0\u3059\u308B",listAll:"\u3059\u3079\u3066\u306E\u30EA\u30B9\u30C8",listVisible:"\u8868\u793A\u3055\u308C\u3066\u3044\u308B\u30EA\u30B9\u30C8",listInvisible:"\u975E\u8868\u793A\u306E\u30EA\u30B9\u30C8",general:"\u4E00\u822C\u7684\u306A"},im={frame:"\u30D5\u30EC\u30FC\u30E0",color:"\u8272",position:"\u4F4D\u7F6E",lineWidth:"\u30E9\u30A4\u30F3\u5E45",rotation:"\u56DE\u8EE2",reset:"\u30EA\u30BB\u30C3\u30C8",displayFrame:"\u30D5\u30EC\u30FC\u30E0\u3092\u8868\u793A\u3059\u308B",displayFrameHelp:"\u30AB\u30E1\u30E9\u3092\u914D\u7F6E\u3059\u308B\u305F\u3081\u306E\u5EA7\u6A19\u30D5\u30EC\u30FC\u30E0\u3067\u3059\u3002\u30AB\u30E1\u30E9\u306E\u4F4D\u7F6E\u3068\u5411\u304D\u306F\u3001\u3053\u306E\u30D5\u30EC\u30FC\u30E0\u306E\u539F\u70B9\u3092\u57FA\u6E96\u3068\u3057\u305F\u76F8\u5BFE\u7684\u306A\u3082\u306E\u3068\u306A\u308A\u307E\u3059\u3002",followMode:"\u30D5\u30A9\u30ED\u30FC\u30E2\u30FC\u30C9",followModeHelp:"\u518D\u751F\u4E2D\u306E\u30AB\u30E1\u30E9\u306E\u52D5\u4F5C\u3092\u5909\u66F4\u3057\u3001\u8868\u793A\u30D5\u30EC\u30FC\u30E0\u3092\u30D5\u30A9\u30ED\u30FC\u3059\u308B\u304B\u3069\u3046\u304B\u3092\u9078\u629E\u3067\u304D\u307E\u3059\u3002",pose:"\u30DD\u30FC\u30BA",fixed:"\u56FA\u5B9A",frameNotFound:"\u30D5\u30EC\u30FC\u30E0 {{frameId}} \u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",noCoordinateFramesFound:"\u5EA7\u6A19\u30D5\u30EC\u30FC\u30E0\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093",enablePreloading:"\u4E8B\u524D\u306E\u8AAD\u307F\u8FBC\u307F\u3092\u6709\u52B9\u306B\u3059\u308B",lineColor:"\u30E9\u30A4\u30F3\u306E\u8272",axisScale:"\u8EF8\u306E\u30B9\u30B1\u30FC\u30EB",labelSize:"\u30E9\u30D9\u30EB\u306E\u30B5\u30A4\u30BA",labels:"\u30E9\u30D9\u30EB",editable:"\u7DE8\u96C6\u53EF\u80FD",settings:"\u8A2D\u5B9A",transforms:"\u5909\u63DB",showAll:"\u3059\u3079\u3066\u8868\u793A",hideAll:"\u3059\u3079\u3066\u975E\u8868\u793A",scene:"\u30B7\u30FC\u30F3",renderStats:"\u30EC\u30F3\u30C0\u30EA\u30F3\u30B0\u306E\u7D71\u8A08\u60C5\u5831",background:"\u80CC\u666F",labelScale:"\u30E9\u30D9\u30EB\u306E\u30B9\u30B1\u30FC\u30EB",labelScaleHelp:"\u3059\u3079\u3066\u306E\u30E9\u30D9\u30EB\u306B\u9069\u7528\u3059\u308B\u30B9\u30B1\u30FC\u30EB\u30D5\u30A1\u30AF\u30BF\u30FC",ignoreColladaUpAxis:"COLLADA <up_axis> \u3092\u7121\u8996",ignoreColladaUpAxisHelp:"COLLADA \u30D5\u30A1\u30A4\u30EB\u5185\u306E <up_axis> \u30BF\u30B0\u3092\u7121\u8996\u3059\u308B\u3053\u3068\u3067\u3001rviz \u306E\u52D5\u4F5C\u306B\u5408\u308F\u305B\u307E\u3059\u3002",takeEffectAfterReboot:"\u3053\u306E\u8A2D\u5B9A\u306F\u518D\u8D77\u52D5\u5F8C\u306B\u6709\u52B9\u306B\u306A\u308A\u307E\u3059\u3002",meshUpAxis:"\u30E1\u30C3\u30B7\u30E5\u306E\u4E0A\u8EF8",meshUpAxisHelp:"\u65B9\u5411\u3092\u4F7F\u7528\u3057\u3066\u30E1\u30C3\u30B7\u30E5\u3092\u8AAD\u307F\u8FBC\u3080\u3068\u304D\u306B '\u4E0A' \u3068\u3057\u3066\u4F7F\u7528\u3059\u308B\u65B9\u5411\uFF08STL \u304A\u3088\u3073 OBJ\uFF09",YUp:"Y-up",ZUp:"Z-up",view:"\u30D3\u30E5\u30FC",distance:"\u8DDD\u96E2",perspective:"\u9060\u8FD1\u6CD5",target:"\u30BF\u30FC\u30B2\u30C3\u30C8",theta:"Theta",phi:"Phi",fovy:"Y\u8EF8 FOV",near:"Near",far:"Far",syncCamera:"\u30AB\u30E1\u30E9\u3092\u540C\u671F\u3059\u308B",syncCameraHelp:"\u3053\u306E\u8A2D\u5B9A\u304C\u6709\u52B9\u306B\u306A\u3063\u3066\u3044\u308B\u4ED6\u306E\u30D1\u30CD\u30EB\u3068\u30AB\u30E1\u30E9\u3092\u540C\u671F\u3057\u307E\u3059\u3002",topics:"\u30C8\u30D4\u30C3\u30AF",customLayers:"\u30AB\u30B9\u30BF\u30E0\u30EC\u30A4\u30E4\u30FC",addURDF:"URDF \u3092\u8FFD\u52A0\u3059\u308B",size:"\u30B5\u30A4\u30BA",divisions:"\u5206\u5272\u6570",grid:"\u30B0\u30EA\u30C3\u30C9",delete:"\u524A\u9664",addGrid:"\u30B0\u30EA\u30C3\u30C9\u3092\u8FFD\u52A0\u3059\u308B"},rm={about:"\u60C5\u5831",exploreSampleData:"\u30B5\u30F3\u30D7\u30EB\u30C7\u30FC\u30BF\u3092\u63A2\u7D22\u3059\u308B",open:"\u3092\u958B\u304F",openLocalFile:"\u30ED\u30FC\u30AB\u30EB\u30D5\u30A1\u30A4\u30EB\u3092\u958B\u304F",openConnection:"\u63A5\u7D9A\u3092\u958B\u304F",noDataSource:void 0,joinOurSlack:"Slack\u306B\u53C2\u52A0\u3059\u308B",recentDataSources:"\u6700\u8FD1\u306E\u30C7\u30FC\u30BF\u30BD\u30FC\u30B9",viewOurDocs:"\u30C9\u30AD\u30E5\u30E1\u30F3\u30C6\u30FC\u30B7\u30E7\u30F3\u3092\u898B\u308B",file:"\u30D5\u30A1\u30A4\u30EB",view:"\u8868\u793A",help:"\u30D8\u30EB\u30D7",signIn:"\u30ED\u30B0\u30A4\u30F3",unknown:"\u4E0D\u660E"},lm={settings:"\u8BBE\u7F6E",colorScheme:"\u914D\u8272\u65B9\u6848",dark:"\u6697\u8272",light:"\u4EAE\u8272",followSystem:"\u8DDF\u968F\u7CFB\u7EDF",language:"\u8BED\u8A00",displayTimestampsIn:"\u663E\u793A\u65F6\u95F4\u6233\u5728",timestampFormat:"\u65F6\u95F4\u6233\u683C\u5F0F",messageRate:"\u6D88\u606F\u901F\u7387",openLinksIn:"\u6253\u5F00\u94FE\u63A5",webApp:"\u7F51\u9875\u5E94\u7528",desktopApp:"\u684C\u9762\u5E94\u7528",askEachTime:"\u6BCF\u6B21\u8BE2\u95EE",general:"\u901A\u7528",ros:"ROS",privacy:"\u9690\u79C1",privacyDescription:"\u66F4\u6539\u5C06\u5728\u4E0B\u6B21\u542F\u52A8 Foxglove Studio \u65F6\u751F\u6548",sendAnonymizedUsageData:"\u53D1\u9001\u533F\u540D\u4F7F\u7528\u6570\u636E\u4EE5\u5E2E\u52A9\u6211\u4EEC\u6539\u8FDB Foxglove Studio",sendAnonymizedCrashReports:"\u53D1\u9001\u533F\u540D\u5D29\u6E83\u62A5\u544A",experimentalFeatures:"\u5B9E\u9A8C\u6027\u529F\u80FD",experimentalFeaturesDescription:"\u8FD9\u4E9B\u529F\u80FD\u4E0D\u7A33\u5B9A\uFF0C\u4E0D\u5EFA\u8BAE\u65E5\u5E38\u4F7F\u7528\u3002",studioDebugPanels:"Studio \u8C03\u8BD5\u9762\u677F",studioDebugPanelsDescription:"\u5728\u201C\u6DFB\u52A0\u9762\u677F\u201D\u5217\u8868\u4E2D\u663E\u793A Foxglove Studio \u8C03\u8BD5\u9762\u677F\u3002",memoryUseIndicator:"\u5185\u5B58\u4F7F\u7528\u6307\u793A\u5668",memoryUseIndicatorDescription:"\u5728\u4FA7\u8FB9\u680F\u663E\u793A\u5E94\u7528\u7A0B\u5E8F\u7684\u5185\u5B58\u4F7F\u7528\u60C5\u51B5\u3002",newNavigation:"\u65B0\u7248\u5BFC\u822A\u680F",newNavigationDescription:"\u4F7F\u7528\u65B0\u7248\u5BFC\u822A\u680F\u3002",restartTheAppForChangesToTakeEffect:" \u91CD\u65B0\u542F\u52A8\u5E94\u7528\u7A0B\u5E8F\u4EE5\u4F7F\u66F4\u6539\u751F\u6548\u3002",layoutDebugging:"\u5E03\u5C40\u8C03\u8BD5",layoutDebuggingDescription:"\u663E\u793A\u7528\u4E8E\u5F00\u53D1\u548C\u8C03\u8BD5\u5E03\u5C40\u5B58\u50A8\u7684\u989D\u5916\u63A7\u4EF6\u3002",extensions:"\u6269\u5C55",about:"\u5173\u4E8E",noExperimentalFeatures:"\u76EE\u524D\u6CA1\u6709\u5B9E\u9A8C\u6027\u7684\u529F\u80FD\u3002"},cm={foxglove:"Foxglove",learnMore:"\u4E86\u89E3\u66F4\u591A"},dm={"3D":"\u4E09\u7EF4","3DPanelDescription":"\u5728\u4E09\u7EF4\u573A\u666F\u4E2D\u663E\u793A\u6807\u8BB0\u3001\u76F8\u673A\u56FE\u50CF\u3001\u7F51\u683C\u3001URDF \u548C\u5176\u4ED6\u5185\u5BB9\u3002",dataSourceInfo:"\u6570\u636E\u6E90\u4FE1\u606F",dataSourceInfoDescription:"\u67E5\u770B\u5F53\u524D\u6570\u636E\u6E90\u7684\u4E3B\u9898\u548C\u65F6\u95F4\u6233\u7B49\u8BE6\u7EC6\u4FE1\u606F\u3002",gauge:"\u4EEA\u8868",gaugeDescription:"\u57FA\u4E8E\u8FDE\u7EED\u503C\u663E\u793A\u5F69\u8272\u4EEA\u8868\u3002",image:"\u56FE\u50CF",imageLegacy:"\u56FE\u50CF\uFF08Legacy\uFF09",imageDescription:"\u663E\u793A\u5E26\u6CE8\u91CA\u7684\u56FE\u50CF\u3002",indicator:"\u6307\u793A\u5668",indicatorDescription:"\u57FA\u4E8E\u9608\u503C\u503C\u663E\u793A\u5F69\u8272\u548C/\u6216\u6587\u672C\u6307\u793A\u5668\u3002",log:"\u65E5\u5FD7",logDescription:"\u6309\u8282\u70B9\u548C\u4E25\u91CD\u7A0B\u5EA6\u7EA7\u522B\u663E\u793A\u65E5\u5FD7\u3002",map:"\u5730\u56FE",mapDescription:"\u5728\u5730\u56FE\u4E0A\u663E\u793A\u70B9\u3002",parameters:"\u53C2\u6570",parametersDescription:"\u8BFB\u53D6\u548C\u8BBE\u7F6E\u6570\u636E\u6E90\u7684\u53C2\u6570\u3002",plot:"\u56FE\u8868",plotDescription:"\u7ED8\u5236\u968F\u65F6\u95F4\u6216\u5176\u4ED6\u503C\u53D8\u5316\u7684\u6570\u5B57\u503C\u3002",publish:"\u53D1\u5E03",publishDescription:"\u5411\u6570\u636E\u6E90\u53D1\u5E03\u6D88\u606F\uFF08\u4EC5\u9650\u5B9E\u65F6\u8FDE\u63A5\uFF09\u3002",rawMessages:"\u539F\u59CB\u6D88\u606F",rawMessagesDescription:"\u68C0\u67E5\u4E3B\u9898\u6D88\u606F\u3002",ROSDiagnosticsDetail:"\u8BCA\u65AD - \u8BE6\u7EC6\u4FE1\u606F\uFF08ROS\uFF09",ROSDiagnosticsDetailDescription:"\u663E\u793A\u7279\u5B9A hardware_id \u7684 ROS DiagnosticArray \u6D88\u606F\u3002",ROSDiagnosticSummary:"\u8BCA\u65AD - \u6982\u8981\uFF08ROS\uFF09",ROSDiagnosticSummaryDescription:"\u663E\u793A\u6240\u6709 ROS DiagnosticArray \u6D88\u606F\u7684\u6458\u8981\u3002",stateTransitions:"\u72B6\u6001\u8F6C\u6362",stateTransitionsDescription:"\u8DDF\u8E2A\u503C\u968F\u65F6\u95F4\u53D8\u5316\u7684\u60C5\u51B5\u3002",studioPlaybackPerformance:"Studio - \u64AD\u653E\u6027\u80FD",studioPlaybackPerformanceDescription:"\u663E\u793A\u56DE\u653E\u548C\u6570\u636E\u6D41\u5F0F\u5904\u7406\u6027\u80FD\u7EDF\u8BA1\u4FE1\u606F\u3002",tab:"\u9009\u9879\u5361",tabDescription:"\u5C06\u9762\u677F\u5206\u7EC4\u5728\u9009\u9879\u5361\u754C\u9762\u4E2D\u3002",table:"\u8868\u683C",tableDescription:"\u4EE5\u8868\u683C\u683C\u5F0F\u663E\u793A\u4E3B\u9898\u6D88\u606F\u3002",teleop:"\u8FDC\u7A0B\u64CD\u7EB5",teleopDescription:"\u901A\u8FC7\u5B9E\u65F6\u8FDE\u63A5\u8FDC\u7A0B\u64CD\u7EB5\u673A\u5668\u4EBA\u3002",topicGraph:"\u4E3B\u9898\u56FE",topicGraphDescription:"\u663E\u793A\u6D3B\u52A8\u8282\u70B9\u3001\u4E3B\u9898\u548C\u670D\u52A1\u7684\u56FE\u5F62\u3002",userScripts:"\u7528\u6237\u811A\u672C",userScriptsDescription:"\u4F7F\u7528 TypeScript \u7F16\u5199\u81EA\u5B9A\u4E49\u6570\u636E\u8F6C\u6362\u3002\u4EE5\u524D\u79F0\u4E3A Node Playground\u3002",variableSlider:"\u53D8\u91CF\u6ED1\u5757",variableSliderDescription:"\u66F4\u65B0\u5E03\u5C40\u7684\u6570\u5B57\u53D8\u91CF\u503C\u3002"},um={addPanel:"\u6DFB\u52A0\u9762\u677F",noLayoutSelected:"<selectLayoutLink>\u9009\u62E9\u4E00\u4E2A\u5E03\u5C40</selectLayoutLink>\u6765\u5F00\u59CB\u4F7F\u7528!",noPanelsMatchSearchCriteria:"\u6CA1\u6709\u7B26\u5408\u641C\u7D22\u6761\u4EF6\u7684\u9762\u677F\u3002",searchPanels:"\u641C\u7D22\u9762\u677F",selectPanelToAddToLayout:"\u5728\u4E0B\u9762\u9009\u62E9\u4E00\u4E2A\u9762\u677F\uFF0C\u5C06\u5176\u6DFB\u52A0\u5230\u4F60\u7684\u5E03\u5C40\u4E2D\u3002"},pm={importOrExportSettings:"\u5BFC\u5165/\u5BFC\u51FA\u8BBE\u7F6E",importOrExportSettingsWithEllipsis:"\u5BFC\u5165/\u5BFC\u51FA\u8BBE\u7F6E\u2026\u2026",panelSettings:"\u9762\u677F\u8BBE\u7F6E",selectAPanelToEditItsSettings:"\u9009\u62E9\u4E00\u4E2A\u9762\u677F\u6765\u7F16\u8F91\u5176\u8BBE\u7F6E\u3002",loadingPanelSettings:"\u6B63\u5728\u52A0\u8F7D\u9762\u677F\u8BBE\u7F6E\u2026\u2026",currentSettingsPanelName:"{{title}}\u9762\u677F\u8BBE\u7F6E",panelName:"{{title}}\u9762\u677F",panelDoesNotHaveSettings:"\u6B64\u9762\u677F\u6CA1\u6709\u4EFB\u4F55\u8BBE\u7F6E",resetToDefaults:"\u91CD\u7F6E\u4E3A\u9ED8\u8BA4\u503C",unknown:"\u672A\u77E5"},fm={topicError:"\u8BDD\u9898 {{topic}} \u4E0D\u53EF\u7528",topic:"\u8BDD\u9898"},hm={deleteSeries:"\u5220\u9664\u6570\u636E\u7CFB\u5217",messagePath:"\u6D88\u606F\u5730\u5740",label:"\u6807\u7B7E",color:"\u989C\u8272",timestamp:"\u65F6\u95F4\u6233",receiveTime:"\u63A5\u6536\u65F6\u95F4",headerStamp:"\u5934\u65F6\u95F4\u6233",series:"\u6570\u636E\u7CFB\u5217",addSeries:"\u6DFB\u52A0\u6570\u636E\u7CFB\u5217",maxYError:"Y \u7684\u6700\u5927\u503C\u5FC5\u987B\u5927\u4E8E Y \u7684\u6700\u5C0F\u503C\u3002",maxXError:"X \u7684\u6700\u5927\u503C\u5FC5\u987B\u5927\u4E8E X \u7684\u6700\u5C0F\u503C\u3002",general:"\u901A\u7528",syncWithOtherPlots:"\u4E0E\u5176\u4ED6\u56FE\u8868\u540C\u6B65",legend:"\u56FE\u4F8B",position:"\u4F4D\u7F6E",floating:"\u6D6E\u52A8",left:"\u5DE6",top:"\u4E0A",hidden:"\u9690\u85CF",showValues:"\u663E\u793A\u503C",yAxis:"Y \u8F74",showLabels:"\u663E\u793A\u6807\u7B7E",min:"\u6700\u5C0F\u503C",max:"\u6700\u5927\u503C",xAxis:"X \u8F74",value:"\u503C",index:"\u7D22\u5F15",currentPath:"\u5730\u5740\uFF08\u5F53\u524D\uFF09",accumulatedPath:"\u5730\u5740\uFF08\u7D2F\u79EF\uFF09",secondsRange:"\u8303\u56F4\uFF08\u79D2\uFF09"},gm={dataSource:"\u6570\u636E\u6E90",currentSource:"\u5F53\u524D\u6E90",waitingForConnection:"\u7B49\u5F85\u8FDE\u63A5\u2026\u2026",startTime:"\u5F00\u59CB\u65F6\u95F4",endTime:"\u7ED3\u675F\u65F6\u95F4",duration:"\u6301\u7EED\u65F6\u95F4"},mm={newToFoxgloveStudio:"\u7B2C\u4E00\u6B21\u4F7F\u7528 Foxglove Studio\uFF1F",newToFoxgloveStudioDescription:"\u4ECE\u63A2\u7D22\u4E00\u4E2A\u6837\u672C\u6570\u636E\u96C6\u5F00\u59CB\uFF0C\u6216\u67E5\u770B\u6211\u4EEC\u7684\u6587\u6863\u3002",exploreSampleData:"\u63A2\u7D22\u6837\u672C\u6570\u636E",viewOurDocs:"\u67E5\u770B\u6211\u4EEC\u7684\u6587\u6863",joinOurCommunity:"\u52A0\u5165\u6211\u4EEC\u7684\u793E\u533A",joinOurCommunityDescription:"\u5728 Slack \u4E0A\u4E0E\u6211\u4EEC\u7684\u5F00\u53D1\u4EBA\u5458\u548C\u7528\u6237\u4EA4\u6D41\uFF0C\u6216\u5728 GitHub \u4E0A\u63D0\u51FA\u95EE\u9898\u3002",joinOurSlack:"\u52A0\u5165\u6211\u4EEC\u7684 Slack",openAGitHubIssue:"\u6253\u5F00 GitHub issue",needHelp:"\u9700\u8981\u5E2E\u52A9\uFF1F",needHelpDescription:"\u67E5\u770B\u6211\u4EEC\u7684\u6587\u6863\uFF0C\u6216\u67E5\u770B Foxglove \u535A\u5BA2\u4E0A\u7684\u6559\u7A0B\u3002",seeTutorials:"\u67E5\u770B\u6559\u7A0B",collaborateTitle:"\u4F7F\u7528 Foxglove \u6570\u636E\u5E73\u53F0\u52A0\u901F\u5F00\u53D1",secureStorageOfData:"\u5B89\u5168\u5730\u5B58\u50A8 PB \u7EA7\u7684 ROS \u6216\u81EA\u5B9A\u4E49\u6570\u636E",convenientWebInterface:"\u4F7F\u7528\u4E00\u4E2A\u65B9\u4FBF\u7684\u7F51\u7EDC\u754C\u9762\uFF0C\u4EE5\u95EA\u7535\u822C\u7684\u901F\u5EA6\u6807\u8BB0\u3001\u641C\u7D22\u548C\u68C0\u7D22\u6570\u636E",canBeShared:"\u4E0E\u961F\u53CB\u5206\u4EAB\u6570\u636E\u6587\u4EF6\u3001\u53EF\u89C6\u5316\u5E03\u5C40\u548C\u81EA\u5B9A\u4E49\u6269\u5C55\u7A0B\u5E8F",createAFreeAccount:"\u521B\u5EFA\u514D\u8D39\u5E10\u6237",signIn:"\u767B\u5F55",learnMore:"\u4E86\u89E3\u66F4\u591A",startCollaborating:"\u4E0E\u60A8\u7684 Foxglove \u7EC4\u7EC7\u5F00\u59CB\u5408\u4F5C",startCollaboratingDescription:"\u5145\u5206\u5229\u7528\u4F60\u7684 Foxglove \u8D26\u6237\u2014\u2014\u65E0\u8BBA\u4F60\u60F3\u6DF1\u5165\u7814\u7A76\u4F60\u7684\u6570\u636E\u8FD8\u662F\u4E0E\u4F60\u7684\u56E2\u961F\u6210\u5458\u5206\u4EAB\u5DE5\u5177\u3002",uploadToDataPlatform:"\u4E0A\u4F20\u5230\u6570\u636E\u5E73\u53F0",shareLayouts:"\u5206\u4EAB\u5E03\u5C40",openLocalFile:"\u6253\u5F00\u672C\u5730\u6587\u4EF6",openLocalFileDescription:"\u76F4\u63A5\u4ECE\u672C\u5730\u6587\u4EF6\u7CFB\u7EDF\u53EF\u89C6\u5316\u6570\u636E\u3002",openUrl:"\u4E0A\u4F20\u548C\u5171\u4EAB\u6570\u636E",openUrlDescription:"\u4F7F\u7528 Foxglove \u6570\u636E\u5E73\u53F0\u4E0E\u60A8\u7684\u56E2\u961F\u5171\u4EAB\u6570\u636E\u3002",openConnection:"\u6253\u5F00\u8FDE\u63A5",openConnectionDescription:"\u8FDE\u63A5\u5230\u5B9E\u65F6\u673A\u5668\u4EBA\u6216\u670D\u52A1\u5668\u3002",openDataSource:"\u6253\u5F00\u6570\u636E\u6E90",recentDataSources:"\u6700\u8FD1\u4F7F\u7528\u7684\u6570\u636E\u6E90"},ym={searchPanelSettings:"\u641C\u7D22\u9762\u677F\u8BBE\u7F6E\u2026\u2026",title:"\u6807\u9898",clearSearch:"\u6E05\u7A7A\u641C\u7D22",labels:"\u6807\u7B7E",showAll:"\u663E\u793A\u5168\u90E8",hideAll:"\u9690\u85CF\u5168\u90E8",filterList:"\u8FC7\u6EE4\u5217\u8868",filterListHelp:"\u6309\u7167\u53EF\u89C1\u6027\u8FC7\u6EE4\u5217\u8868",listAll:"\u5217\u51FA\u5168\u90E8",listVisible:"\u5217\u51FA\u53EF\u89C1",listInvisible:"\u5217\u51FA\u4E0D\u53EF\u89C1",general:"\u901A\u7528"},vm={frame:"\u53C2\u8003\u7CFB",reset:"\u91CD\u7F6E",color:"\u989C\u8272",position:"\u4F4D\u7F6E",lineWidth:"\u7EBF\u5BBD",rotation:"\u65CB\u8F6C",displayFrame:"\u5C55\u793A\u53C2\u8003\u7CFB",displayFrameHelp:"\u653E\u7F6E\u76F8\u673A\u7528\u4E8E\u663E\u793A\u5750\u6807\u7CFB\u3002\u76F8\u673A\u7684\u4F4D\u7F6E\u548C\u65B9\u5411\u5C06\u76F8\u5BF9\u4E8E\u8BE5\u5750\u6807\u7CFB\u7684\u539F\u70B9\u3002",followMode:"\u8DDF\u8E2A\u6A21\u5F0F",followModeHelp:"\u66F4\u6539\u56DE\u653E\u671F\u95F4\u76F8\u673A\u7684\u884C\u4E3A\uFF0C\u662F\u5426\u8DDF\u8E2A\u663E\u793A\u5750\u6807\u7CFB\u3002",pose:"\u59FF\u6001",fixed:"\u56FA\u5B9A",frameNotFound:"\u672A\u627E\u5230\u53C2\u8003\u7CFB {{frameId}}",noCoordinateFramesFound:"\u672A\u627E\u5230\u5750\u6807\u7CFB",enablePreloading:"\u542F\u7528\u9884\u52A0\u8F7D",lineColor:"\u7EBF\u989C\u8272",axisScale:"\u8F74\u6BD4\u4F8B",labelSize:"\u6807\u7B7E\u5927\u5C0F",labels:"\u6807\u7B7E",editable:"\u53EF\u7F16\u8F91",settings:"\u8BBE\u7F6E",transforms:"\u53D8\u6362",showAll:"\u663E\u793A\u5168\u90E8",hideAll:"\u9690\u85CF\u5168\u90E8",scene:"\u573A\u666F",renderStats:"\u6E32\u67D3\u7EDF\u8BA1",background:"\u80CC\u666F",labelScale:"\u6807\u7B7E\u6BD4\u4F8B",labelScaleHelp:"\u5E94\u7528\u4E8E\u6240\u6709\u6807\u7B7E\u7684\u6BD4\u4F8B\u56E0\u5B50",ignoreColladaUpAxis:"\u5FFD\u7565 COLLADA \u7684 <up_axis>",ignoreColladaUpAxisHelp:"\u901A\u8FC7\u5FFD\u7565 COLLADA \u6587\u4EF6\u4E2D\u7684 <up_axis> \u6807\u8BB0\uFF0C\u5339\u914D rviz \u7684\u884C\u4E3A",takeEffectAfterReboot:"\u6B64\u8BBE\u7F6E\u9700\u8981\u91CD\u65B0\u542F\u52A8\u4EE5\u751F\u6548",meshUpAxis:"\u7F51\u683C\u4E0A\u8F74",meshUpAxisHelp:"\u52A0\u8F7D\u7F3A\u5C11\u65B9\u5411\u4FE1\u606F\u7684\u7F51\u683C\uFF08STL \u548C OBJ\uFF09\u65F6\u4F7F\u7528\u7684\u201C\u4E0A\u201D\u65B9\u5411",YUp:"Y-up",ZUp:"Z-up",view:"\u89C6\u56FE",distance:"\u8DDD\u79BB",perspective:"\u900F\u89C6",target:"\u76EE\u6807",theta:"\u6781\u89D2",phi:"\u65B9\u5411\u89D2",fovy:"Y\u8F74\u89C6\u91CE",near:"\u8FD1\u9762",far:"\u8FDC\u9762",syncCamera:"\u540C\u6B65\u76F8\u673A",syncCameraHelp:"\u5C06\u76F8\u673A\u4E0E\u5176\u4ED6\u542F\u7528\u6B64\u8BBE\u7F6E\u7684\u9762\u677F\u540C\u6B65\u3002",topics:"\u8BDD\u9898",customLayers:"\u81EA\u5B9A\u4E49\u56FE\u5C42",addURDF:"\u6DFB\u52A0 URDF",size:"\u5927\u5C0F",divisions:"\u5212\u5206",grid:"\u7F51\u683C",delete:"\u5220\u9664",addGrid:"\u6DFB\u52A0\u7F51\u683C"},Am={about:"\u5173\u4E8E",exploreSampleData:"\u63A2\u7D22\u6837\u672C\u6570\u636E",open:"\u6253\u5F00\u2026\u2026",openConnection:"\u6253\u5F00\u8FDE\u63A5\u2026\u2026",noDataSource:void 0,openLocalFile:"\u6253\u5F00\u672C\u5730\u6587\u4EF6\u2026\u2026",joinOurSlack:"\u52A0\u5165\u6211\u4EEC\u7684 Slack",recentDataSources:"\u6700\u8FD1\u4F7F\u7528\u7684\u6570\u636E\u6E90",hideLeftSidebar:"\u9690\u85CF\u5DE6\u4FA7\u8FB9\u680F",hideRightSidebar:"\u9690\u85CF\u53F3\u4FA7\u8FB9\u680F",showLeftSidebar:"\u663E\u793A\u5DE6\u4FA7\u8FB9\u680F",showRightSidebar:"\u663E\u793A\u53F3\u4FA7\u8FB9\u680F",viewOurDocs:"\u67E5\u770B\u6211\u4EEC\u7684\u6587\u6863",file:"\u6587\u4EF6",view:"\u67E5\u770B",help:"\u5E2E\u52A9",signIn:"\u767B\u5F55",unknown:"\u672A\u77E5"},bm={en:u,zh:v,ja:g},xm="general";async function Em(e){const{context:t="browser"}=e??{};t==="browser"&&(ea.ZP.use(ee.Db),ea.ZP.use(jg.Z)),await ea.ZP.init({resources:bm,detection:t==="browser"?{order:["localStorage","navigator"],caches:["localStorage"]}:void 0,fallbackLng:"en",defaultNS:xm,interpolation:{escapeValue:!1}})}var Cm=o(1297),Si=o.n(Cm),Sm=o(56348),Tm="../../packages/studio-base/src/services/IdbExtensionStorage.ts";const Cs=ae.ZP.getLogger(Tm),Pm="foxglove-extensions",rs="metadata",ls="extensions";class Im{#e;namespace;constructor(t){this.namespace=t,this.#e=Sm.X3([Pm,t].join("-"),1,{upgrade:s=>{Cs.debug("Creating extension object stores"),s.createObjectStore(rs,{keyPath:"id"}),s.createObjectStore(ls,{keyPath:"info.id"})}})}async list(){const t=await(await this.#e).getAll(rs);return Cs.debug(`Found ${t.length} extensions`),t}async get(t){return Cs.debug("Getting extension",t),await(await this.#e).get(ls,t)}async put(t){Cs.debug("Storing extension",{extension:t});const s=(await this.#e).transaction([rs,ls],"readwrite");return await Promise.all([s.db.put(rs,t.info),s.db.put(ls,t),s.done]),t}async delete(t){Cs.debug("Deleting extension",t);const s=(await this.#e).transaction([rs,ls],"readwrite");await Promise.all([s.db.delete(rs,t),s.db.delete(ls,t),s.done])}}var Mm="../../packages/studio-base/src/services/IdbExtensionLoader.ts";const Ks=ae.ZP.getLogger(Mm);function Dm(e){const t=/^@([^/]+)\/(.+)/.exec(e);return t==null?{name:e}:{publisher:t[1],name:t[2]}}function Bm(e,t,s){switch(e){case"local":return s.displayName;case"org":return[e,t,s.name].join(":")}}function wm(e){if(e.name==null||e.name.length===0)throw new Error("Invalid extension: missing name");const{publisher:t,name:s}=Dm(e.name),a=e.publisher??t;if(a==null||a.length===0)throw new Error("Invalid extension: missing publisher");return{...e,publisher:a,name:s.toLowerCase()}}class Rm{#e;namespace;constructor(t){this.namespace=t,this.#e=new Im(t)}async getExtensions(){return Ks.debug("Listing extensions"),await this.#e.list()}async loadExtension(t){Ks.debug("Loading extension",t);const s=await this.#e.get(t),a=new(Si());if(s?.content==null)throw new Error("Extension is corrupted");const r=await(await a.loadAsync(s.content)).file("dist/extension.js")?.async("string");if(r==null)throw new Error("Extension is corrupted");return r}async installExtension(t){Ks.debug("Installing extension");const i=await(await new(Si())().loadAsync(t)).file("package.json")?.async("string");if(i==null)throw new Error("Invalid extension: missing package.json");const r=wm(JSON.parse(i)),c=r.publisher.replace(/[^A-Za-z0-9_\s]+/g,""),d={...r,id:`${c}.${r.name}`,namespace:this.namespace,qualifiedName:Bm(this.namespace,c,r)};return await this.#e.put({content:t,info:d}),d}async uninstallExtension(t){Ks.debug("Uninstalling extension",t),await this.#e.delete(t)}}var cs=o(87026),jm=o(57633);function Lm(e,t){const s=new Map;function a(r,c,d){let p=f=>f;const h=[];if(r.type!=="object")throw new Error(`Expected "type": "object" for schema ${c}, got ${JSON.stringify(r.type)}`);for(const[f,m]of Object.entries(r.properties)){if(Array.isArray(m.oneOf))if(m.oneOf.every(y=>typeof y.const=="number")){for(const y of m.oneOf)h.push({name:y.title,type:"uint32",isConstant:!0,value:y.const});h.push({name:f,type:"uint32"});continue}else throw new Error(`Unsupported type for ${d.concat(f).join(".")}: oneOf alternatives must have number values`);switch(m.type){case"boolean":h.push({name:f,type:"bool"});break;case"string":switch(m.contentEncoding){case void 0:h.push({name:f,type:"string"});break;case"base64":{h.push({name:f,type:"uint8",isArray:!0});const y=p;p=B=>{const k=B[f];if(typeof k=="string"){const z=new Uint8Array(cs.length(k));if(cs.decode(k,z,0)!==z.byteLength)throw new Error(`Failed to decode base64 data for ${d.concat(f).join(".")}`);B[f]=z}return y(B)};break}default:throw new Error(`Unsupported contentEncoding ${JSON.stringify(m.contentEncoding)} in ${d.concat(f).join(".")}`)}break;case"number":case"integer":h.push({name:f,type:"float64"});break;case"object":{const y=`${c}.${f}`,B=a(m,y,d.concat(f)),k=p;p=z=>{const G=z[f];return G!=null&&typeof G=="object"&&(z[f]=B(G)),k(z)},h.push({name:f,type:y,isComplex:!0});break}case"array":{const y=m.items;switch(y.type){case"boolean":h.push({name:f,type:"bool",isArray:!0});break;case"string":if(y.contentEncoding!=null)throw new Error(`Unsupported contentEncoding ${JSON.stringify(y.contentEncoding)} for array item ${d.concat(f).join(".")}`);h.push({name:f,type:"string",isArray:!0});break;case"number":case"integer":h.push({name:f,type:"float64",isArray:!0});break;case"object":{const B=`${c}.${f}`,k=a(m.items,B,d.concat(f)),z=p;p=G=>{const q=G[f];return Array.isArray(q)&&(G[f]=q.map(k)),z(G)},h.push({name:f,type:B,isComplex:!0,isArray:!0});break}default:throw new Error(`Unsupported type ${JSON.stringify(y.type)} for array item ${d.concat(f).join(".")}`)}break}case"null":default:throw new Error(`Unsupported type ${JSON.stringify(m.type)} for ${d.concat(f).join(".")}`)}}return s.set(c,{definitions:h}),p}const i=a(e,t,[]);return{datatypes:s,postprocessValue:i}}var Om=o(11168),ta=o.n(Om);function Nm(e){switch(e){case"double":return"float64";case"float":return"float32";case"int32":case"sint32":case"sfixed32":return"int32";case"uint32":case"fixed32":return"uint32";case"int64":case"sint64":case"sfixed64":return"int64";case"uint64":case"fixed64":return"uint64";case"bool":return"bool";case"string":return"string"}throw new Error(`Expected protobuf scalar type, got ${e}`)}function na(e){return e.replace(/^\./,"")}function Ti(e,t){const s=[];e.set(na(t.fullName),{definitions:s});for(const a of t.fieldsArray)if(a.resolvedType instanceof ta().Enum){for(const[i,r]of Object.entries(a.resolvedType.values))s.push({name:i,type:"int32",isConstant:!0,value:r});s.push({type:"int32",name:a.name})}else if(a.resolvedType){const i=na(a.resolvedType.fullName);s.push({type:i,name:a.name,isComplex:!0,isArray:a.repeated}),e.has(i)||Ti(e,a.resolvedType)}else if(a.type==="bytes"){if(a.repeated)throw new Error("Repeated bytes are not currently supported");s.push({type:"uint8",name:a.name,isArray:!0})}else s.push({type:Nm(a.type),name:a.name,isArray:a.repeated})}var Zm=o(68217),km=o(25490),Fm=o(10955),Xs=o(17417),Ss=o(92897),$s=o(62098),Pi=o(15356),_e=o(98357);function Ii(e){switch(e){case _e.rB.Bool:return"bool";case _e.rB.Byte:return"int8";case _e.rB.UType:case _e.rB.UByte:return"uint8";case _e.rB.Short:return"int16";case _e.rB.UShort:return"uint16";case _e.rB.Int:return"int32";case _e.rB.UInt:return"uint32";case _e.rB.Long:return"int64";case _e.rB.ULong:return"uint64";case _e.rB.Float:return"float32";case _e.rB.Double:return"float64";case _e.rB.String:return"string";case _e.rB.Vector:case _e.rB.Obj:case _e.rB.Union:case _e.rB.Array:throw new Error(`${e} is not a simple type.`);case _e.rB.None:case _e.rB.MaxBaseType:throw new Error("None is not a valid type.")}}function An(e){if(typeof e=="string")return e;throw new Error(`Expected string, found ${typeof e}`)}function Um(e,t){const s=[];switch(t.type?.baseType){case _e.rB.UType:case _e.rB.Bool:case _e.rB.Byte:case _e.rB.UByte:case _e.rB.Short:case _e.rB.UShort:case _e.rB.Int:case _e.rB.UInt:case _e.rB.Long:case _e.rB.ULong:case _e.rB.Float:case _e.rB.Double:case _e.rB.String:case _e.rB.None:{const a=Ii(t.type.baseType);if(t.type.index!==-1){const i=e.enums[t.type.index]?.values;if(i==null)throw new Error(`Invalid schema, missing enum values for field type ${e.enums[t.type.index]?.name}`);for(const r of i)s.push({name:An(r.name),type:a,isConstant:!0,value:r.value})}s.push({name:An(t.name),type:a});break}case _e.rB.Vector:switch(t.type.element){case _e.rB.Vector:case _e.rB.Union:case _e.rB.Array:case _e.rB.None:throw new Error("Vectors of vectors, unions, arrays, and None's are unsupported.");case _e.rB.Obj:s.push({name:An(t.name),type:An(e.objects[t.type.index]?.name),isComplex:!0,isArray:!0});break;default:{const a=Ii(t.type.element);if(t.type.index!==-1){const i=e.enums[t.type.index]?.values;if(i==null)throw new Error("Invalid schema");for(const r of i)s.push({name:An(r.name),type:a,isConstant:!0,value:r.value})}s.push({name:An(t.name),type:a,isArray:!0});break}}break;case _e.rB.Obj:s.push({name:An(t.name),type:An(e.objects[t.type.index]?.name),isComplex:!0});break;case _e.rB.Union:case _e.rB.Array:case _e.rB.MaxBaseType:case void 0:throw new Error("Unions and Arrays are not supported in mcap-support currently.")}return s}function zm(e,t){const s=new Map,a=new Pi.cZ(t),i=_e.V_.getRootAsSchema(a),r=i.unpack();let c=-1;for(let f=0;f<r.objects.length;++f){const m=r.objects[f];m?.name===e&&(c=f);let y=[];if(m?.fields!=null){for(const B of m.fields)y=y.concat(Um(r,B));s.set(An(m.name),{definitions:y})}}if(c===-1&&r.rootTable?.name!==e)throw new Error(`Type "${e}" is not available in the schema for "${r.rootTable?.name}".`);const p=new _e._b(i).toObjectLambda(c,!0);return{datatypes:s,deserialize:f=>{const m=new Pi.cZ(new Uint8Array(f.buffer,f.byteOffset,f.byteLength)),y=new _e.iA(m,c,m.readInt32(m.position())+m.position(),!1);return p(y)}}}var Wm=o(70943);function Gm(e,t){const s=Wm.FileDescriptorSet.decode(t),a=ta().Root.fromDescriptor(s);a.resolveAll();const i=a.lookupType(e),r=p=>{if(!p||!(p instanceof ta().Type))return;for(const m of p.fieldsArray)m.name==="seconds"?m.name="sec":m.name==="nanos"&&(m.name="nsec");p.setup();const h=p.toObject,f=(m,y)=>{const B=h.call(p,m,y),{sec:k,nsec:z}=B;if(typeof k!="bigint"||typeof z!="number")return B;if(k>BigInt(Number.MAX_SAFE_INTEGER))throw new Error(`Timestamps with seconds greater than 2^53-1 are not supported (found seconds=${k}, nanos=${z})`);return{sec:Number(k),nsec:z}};p.toObject=f};r(a.lookup(".google.protobuf.Timestamp")),r(a.lookup(".google.protobuf.Duration"));const c=p=>i.toObject(i.decode(new Uint8Array(p.buffer,p.byteOffset,p.byteLength)),{defaults:!0}),d=new Map;if(Ti(d,i),!d.has(e))throw new Error(`Protobuf schema does not contain an entry for '${e}'. The schema name should be fully-qualified, e.g. '${na(i.fullName)}'.`);return{deserialize:c,datatypes:d}}function Qm(e,t){const s=i=>{if(i.aggregatedKind==="union"){const r=i.cases.map(d=>({...d.type,predicates:d.predicates}));i.defaultCase!=null&&r.push(i.defaultCase);const{name:c}=i;return{name:c,definitions:r}}return i},a=e.map(s);return sa(a,t)}function sa(e,t){const s=new Map;return e.forEach(({name:a,definitions:i},r)=>{t!=null&&r===0?s.set(t,{name:t,definitions:i}):a!=null&&s.set(a,{name:a,definitions:i})}),s}function oa(e){if(e.messageEncoding==="json"){if(e.schema!=null&&e.schema.encoding!=="jsonschema")throw new Error(`Message encoding ${e.messageEncoding} with schema encoding '${e.schema.encoding}' is not supported (expected jsonschema or no schema)`);const t=new TextDecoder;let s=new Map,a=i=>JSON.parse(t.decode(i));if(e.schema!=null){const i=e.schema.data.length>0?JSON.parse(t.decode(e.schema.data)):void 0;if(i!=null){if(typeof i!="object")throw new Error(`Invalid schema, expected JSON object, got ${typeof i}`);const{datatypes:r,postprocessValue:c}=Lm(i,e.schema.name);s=r,a=d=>c(JSON.parse(t.decode(d)))}}return{deserialize:a,datatypes:s}}if(e.messageEncoding==="flatbuffer"){if(e.schema?.encoding!=="flatbuffer")throw new Error(`Message encoding ${e.messageEncoding} with ${e.schema==null?"no encoding":`schema encoding '${e.schema.encoding}'`} is not supported (expected flatbuffer)`);return zm(e.schema.name,e.schema.data)}if(e.messageEncoding==="protobuf"){if(e.schema?.encoding!=="protobuf")throw new Error(`Message encoding ${e.messageEncoding} with ${e.schema==null?"no encoding":`schema encoding '${e.schema.encoding}'`} is not supported (expected protobuf)`);return Gm(e.schema.name,e.schema.data)}if(e.messageEncoding==="ros1"){if(e.schema?.encoding!=="ros1msg")throw new Error(`Message encoding ${e.messageEncoding} with ${e.schema==null?"no encoding":`schema encoding '${e.schema.encoding}'`} is not supported (expected ros1msg)`);const t=new TextDecoder().decode(e.schema.data),s=(0,Xs.parse)(t),a=new Ss.MessageReader(s);return{datatypes:sa(s,e.schema.name),deserialize:i=>a.readMessage(i)}}if(e.messageEncoding==="cdr"){if(e.schema?.encoding!=="ros2msg"&&e.schema?.encoding!=="ros2idl"&&e.schema?.encoding!=="omgidl")throw new Error(`Message encoding ${e.messageEncoding} with ${e.schema==null?"no encoding":`schema encoding '${e.schema.encoding}'`} is not supported (expected "ros2msg" or "ros2idl")`);const t=new TextDecoder().decode(e.schema.data);if(e.schema.encoding==="omgidl"){const s=(0,Zm.parseIDL)(t),a=new km.MessageReader(e.schema.name,s);return{datatypes:Qm(s),deserialize:r=>a.readMessage(r)}}else{const a=e.schema.encoding==="ros2idl"?(0,Fm.parseRos2idl)(t):(0,Xs.parse)(t,{ros2:!0}),i=new $s.MessageReader(a);return{datatypes:sa(a,e.schema.name),deserialize:r=>i.readMessage(r)}}}throw new Error(`Unsupported encoding ${e.messageEncoding}`)}var Ym=o(48653);class aa{#e=new Map;#t;problems(){return this.#t??=Array.from(this.#e.values())}addProblem(t,s){console[s.severity].call(console,"Player problem",t,s),this.#e.set(t,s),this.#t=void 0}hasProblem(t){return this.#e.has(t)}removeProblem(t){const s=this.#e.delete(t);return s&&(this.#t=void 0),s}removeProblems(t){let s=!1;for(const[a,i]of this.#e)t(a,i)&&this.#e.delete(a)&&(s=!0);return s&&(this.#t=void 0),s}clear(){this.#e.clear(),this.#t=void 0}}function Mi(e,t){const s=[],a=new Set([t]),i=[t];for(;i.length>0;){const r=i.pop();if(r==null)throw new Error("Invariant violation - Array.pop() when length > 0");const c=e.get(r);if(!c)throw new Error(`While searching datatypes for "${t}", could not find datatype "${r}"`);const d=r===t?{definitions:c.definitions}:{name:r,definitions:c.definitions};s.push(d);for(const p of c.definitions)p.isComplex===!0&&!a.has(p.type)&&(i.push(p.type),a.add(p.type))}return s}var Nt=o(72841),Hm=o(48834).Buffer;class Vm{writeMessage(t){return new Uint8Array(Hm.from(JSON.stringify(t)??""))}}class Km{#e;#t=!1;binaryType="";protocol="";onerror=void 0;onopen=void 0;onclose=void 0;onmessage=void 0;constructor(t,s){this.#e=new Worker(new URL(o.p+o.u(1478),o.b)),this.#n({type:"open",data:{wsUrl:t,protocols:s}}),this.#e.onerror=a=>{this.onerror&&this.onerror(a)},this.#e.onmessage=a=>{switch(a.data.type){case"open":this.onopen&&(this.protocol=a.data.protocol,this.onopen(a.data));break;case"close":this.#t=!0,this.#e.terminate(),this.onclose&&this.onclose(a.data);break;case"error":this.onerror&&this.onerror(a.data);break;case"message":this.onmessage&&this.onmessage(a.data);break}}}close(){this.#t||this.#n({type:"close",data:void 0})}send(t){this.#n({type:"data",data:t})}#n(t){if(this.#t)throw Error("Can't send message over closed websocket connection");this.#e.postMessage(t)}}var Xm="../../packages/studio-base/src/players/FoxgloveWebSocketPlayer",$m=o(48834).Buffer;const Rn=ae.ZP.getLogger(Xm),Ts=new TextEncoder,Jm=new TextDecoder,qm=2e3,_m=Object.freeze({sec:0,nsec:0}),ia="get-all-params",e0=15e3,Ps=["ros1","cdr"],Di=["json",...Ps],t0="json",Bi=["json",...Ps];class n0{#e;#t;#n;#s;#i=(0,$t.Z)();#o=[];#a=[];#c;#r;#l=!1;#y;#u=new Map;#b=new Map;#x=[];#m=0;#f;#D=!1;#P=De.m.INITIALIZING;#d=new aa;#k=0;#S;#I;#v;#B;#T;#U=!1;#p=new Set;#A=new Map;#w=new Map;#N=new Map;#R=new Map;#g=new Set;#j=new Set;#h=new Map;#C;#G;#M;#F=[];#O=new Map;#Z;#Q=new Map;#E=new Map;#Y;#z;#V;#q=0;#W=0;#K=new Map;#H=new Map;#X=new Map;constructor({url:t,metricsCollector:s,sourceId:a}){this.#f=s,this.#t=t,this.#n=t,this.#f.playerConstructed(),this.#e=a,this.#I={sourceId:this.#e,parameters:{url:this.#t}},this.#J()}#J=()=>{if(!this.#l){if(this.#s!=null)throw new Error("Attempted to open a second Foxglove WebSocket connection");Rn.info(`Opening connection to ${this.#t}`),this.#M=setTimeout(()=>{this.#s?.close()},1e4),this.#s=new Nt.Xq({ws:typeof Worker<"u"?new Km(this.#t,[Nt.Xq.SUPPORTED_SUBPROTOCOL]):new WebSocket(this.#t,[Nt.Xq.SUPPORTED_SUBPROTOCOL])}),this.#s.on("open",()=>{if(!this.#l){this.#M!=null&&clearTimeout(this.#M),this.#P=De.m.PRESENT,this.#se(),this.#d.clear(),this.#R.clear(),this.#N.clear(),this.#Q.clear(),this.#E.clear(),this.#O.clear();for(const t of this.#A.keys())this.#p.add(t);this.#w.clear(),this.#A.clear(),this.#S=void 0,this.#Y=void 0,this.#z=void 0,this.#V=void 0,this.#b=new Map,this.#h=new Map}}),this.#s.on("error",t=>{Rn.error(t),t?.message!=null&&t.message.includes("insecure WebSocket connection")&&(this.#d.addProblem("ws:connection-failed",{severity:"error",message:"Insecure WebSocket connection",tip:`Check that the WebSocket server at ${this.#t} is reachable and supports protocol version ${Nt.Xq.SUPPORTED_SUBPROTOCOL}.`}),this.#L())}),this.#s.on("close",t=>{Rn.info("Connection closed:",t),this.#P=De.m.RECONNECTING,this.#C!=null&&(clearInterval(this.#C),this.#C=void 0),this.#M!=null&&clearTimeout(this.#M),this.#s?.close(),this.#s=void 0,this.#d.addProblem("ws:connection-failed",{severity:"error",message:"Connection failed",tip:`Check that the WebSocket server at ${this.#t} is reachable and supports protocol version ${Nt.Xq.SUPPORTED_SUBPROTOCOL}.`}),this.#L(),this.#G=setTimeout(this.#J,3e3)}),this.#s.on("serverInfo",t=>{Array.isArray(t.capabilities)||this.#d.addProblem("ws:invalid-capabilities",{severity:"warn",message:`Server sent an invalid or missing capabilities field: '${t.capabilities}'`});const s=t.sessionId??(0,$t.Z)();this.#i!==s&&this.#se(),this.#i=s,this.#n=`${this.#t}
${t.name}`,this.#o=Array.isArray(t.capabilities)?t.capabilities:[],this.#U=this.#o.includes(Nt.$8.time),this.#c=t.supportedEncodings,this.#b=new Map,this.#U&&(this.#T=void 0);const a=t.metadata?.ROS_DISTRO;if(a){const i=a,r=["melodic","noetic"].includes(i);this.#S=r?"ros1":"ros2";const c=r?Es.default.ros1:["foxy","galactic"].includes(i)?Es.default.ros2galactic:Es.default.ros2humble,d=new Map;for(const p in c){const h=c[p];d.set(p,h)}this.#$(d)}if(t.capabilities.includes(Nt.$8.clientPublish)&&(this.#a=this.#a.concat(De.C.advertise),this.#oe()),t.capabilities.includes(Nt.$8.services)){this.#Z=t.supportedEncodings?.find(r=>Bi.includes(r));const i="callService:unsupportedEncoding";this.#Z?(this.#a=this.#a.concat(De.C.callServices),this.#d.removeProblem(i)):this.#d.addProblem(i,{severity:"warn",message:`Calling services is disabled as no compatible encoding could be found.             The server supports [${t.supportedEncodings?.join(", ")}],             but Studio only supports [${Bi.join(", ")}]`})}t.capabilities.includes(Nt.$8.parameters)&&(this.#a=this.#a.concat(De.C.getParameters,De.C.setParameters),this.#C=setInterval(()=>{this.#s?.getParameters([],ia)},e0),this.#s?.getParameters([],ia)),t.capabilities.includes(Nt.$8.connectionGraph)&&this.#s?.subscribeConnectionGraph(),t.capabilities.includes(Nt.$8.assets)&&(this.#a=this.#a.concat(De.C.assets)),this.#L()}),this.#s.on("status",t=>{const s=`FoxgloveWebSocket: ${t.message}`;t.level===Nt.wR.INFO?Rn.info(s):t.level===Nt.wR.WARNING?Rn.warn(s):Rn.error(s);const a={message:t.message,severity:s0(t.level)};t.message==="Send buffer limit reached"&&(a.tip="Server is dropping messages to the client. Check if you are subscribing to large or frequent topics or adjust your server send buffer limit."),this.#d.addProblem(t.message,a),this.#L()}),this.#s.on("advertise",t=>{for(const s of t){let a;try{let c,d;if(s.encoding==="json"&&(s.schemaEncoding==null||s.schemaEncoding==="jsonschema"))c="jsonschema",d=Ts.encode(s.schema);else if(s.encoding==="protobuf"&&(s.schemaEncoding==null||s.schemaEncoding==="protobuf")){if(c="protobuf",d=new Uint8Array(cs.length(s.schema)),cs.decode(s.schema,d,0)!==d.byteLength)throw new Error(`Failed to decode base64 schema on channel ${s.id}`)}else if(s.encoding==="flatbuffer"&&(s.schemaEncoding==null||s.schemaEncoding==="flatbuffer")){if(c="flatbuffer",d=new Uint8Array(cs.length(s.schema)),cs.decode(s.schema,d,0)!==d.byteLength)throw new Error(`Failed to decode base64 schema on channel ${s.id}`)}else if(s.encoding==="ros1"&&(s.schemaEncoding==null||s.schemaEncoding==="ros1msg"))c="ros1msg",d=Ts.encode(s.schema);else if(s.encoding==="cdr"&&(s.schemaEncoding==null||["ros2idl","ros2msg","omgidl"].includes(s.schemaEncoding)))c=s.schemaEncoding??"ros2msg",d=Ts.encode(s.schema);else{const p=s.schemaEncoding?`Unsupported combination of message / schema encoding: (${s.encoding} / ${s.schemaEncoding})`:`Unsupported message encoding ${s.encoding}`;throw new Error(p)}a=oa({messageEncoding:s.encoding,schema:{name:s.schemaName,encoding:c,data:d}})}catch(c){this.#g.add(s.id),this.#d.addProblem(`schema:${s.topic}`,{severity:"error",message:`Failed to parse channel schema on ${s.topic}`,error:c}),this.#L();continue}const i=this.#N.get(s.topic);if(i&&!U.Z(s,i.channel)){this.#d.addProblem(`duplicate-topic:${s.topic}`,{severity:"error",message:`Multiple channels advertise the same topic: ${s.topic} (${i.channel.id} and ${s.id})`}),this.#L();continue}const r={channel:s,parsedChannel:a};this.#R.set(s.id,r),this.#N.set(s.topic,r)}this.#_(),this.#L(),this.#ee()}),this.#s.on("unadvertise",t=>{for(const s of t){const a=this.#R.get(s);if(!a){this.#g.delete(s)||(this.#d.addProblem(`unadvertise:${s}`,{severity:"error",message:`Server unadvertised channel ${s} that was not advertised`}),this.#L());continue}for(const[i,{channel:r}]of this.#w)r.id===s&&(this.#w.delete(i),this.#A.delete(r.topic),this.#s?.unsubscribe(i),this.#p.add(r.topic));this.#R.delete(s),this.#N.delete(a.channel.topic)}this.#_(),this.#L()}),this.#s.on("message",({subscriptionId:t,data:s})=>{this.#D||(this.#D=!0,this.#f.recordTimeToFirstMsgs());const a=this.#w.get(t);if(!a){this.#j.has(t)||(this.#d.addProblem(`message-missing-subscription:${t}`,{severity:"warn",message:`Received message on unknown subscription id: ${t}. This might be a WebSocket server bug.`}),this.#L());return}try{this.#m+=s.byteLength;const i=this.#te(),r=a.channel.topic;this.#x.push({topic:r,receiveTime:i,message:a.parsedChannel.deserialize(s),sizeInBytes:s.byteLength,schemaName:a.channel.schemaName});const c=new Map(this.#u);let d=c.get(r);d||(d={numMessages:0},c.set(r,d)),d.numMessages++,this.#u=c}catch(i){this.#d.addProblem(`message:${a.channel.topic}`,{severity:"error",message:`Failed to parse message on ${a.channel.topic}`,error:i})}this.#L()}),this.#s.on("time",({timestamp:t})=>{if(!this.#U)return;const s=(0,ne.fromNanoSec)(t);this.#T!=null&&(0,ne.isLessThan)(s,this.#T)&&(this.#k++,this.#x=[]),this.#T=s,this.#L()}),this.#s.on("parameterValues",({parameters:t,id:s})=>{const a=t.map(d=>d.type==="byte_array"?{...d,value:Uint8Array.from(atob(d.value),p=>p.charCodeAt(0))}:d),i=t.map(d=>[d.name,d.type]),r=new Map(i),c=a.filter(d=>!this.#h.has(d.name));if(s===ia)this.#h=new Map(a.map(d=>[d.name,d.value])),this.#X=r;else{const d=new Map(this.#h);a.forEach(p=>d.set(p.name,p.value)),this.#h=d;for(const[p,h]of r)this.#X.set(p,h)}this.#L(),c.length>0&&this.#o.includes(Nt.$8.parametersSubscribe)&&this.#s?.subscribeParameterUpdates(c.map(d=>d.name))}),this.#s.on("advertiseServices",t=>{if(!this.#Z)return;let s;if(this.#Z==="json")s="jsonschema";else if(this.#Z==="ros1")s="ros1msg";else if(this.#Z==="cdr")s="ros2msg";else throw new Error(`Unsupported encoding "${this.#Z}"`);for(const a of t){const i=`${a.type}_Request`,r=`${a.type}_Response`,c=oa({messageEncoding:this.#Z,schema:{name:i,encoding:s,data:Ts.encode(a.requestSchema)}}),d=oa({messageEncoding:this.#Z,schema:{name:r,encoding:s,data:Ts.encode(a.responseSchema)}}),p=Mi(c.datatypes,i),h=Ps.includes(this.#Z)?this.#Z==="ros1"?new Ss.MessageWriter(p):new $s.MessageWriter(p):new Vm;this.#$(c.datatypes),this.#$(d.datatypes);const f={service:a,parsedResponse:d,requestMessageWriter:h};this.#Q.set(a.name,f)}this.#L()}),this.#s.on("unadvertiseServices",t=>{for(const s of t){const a=Object.values(this.#Q).find(i=>i.service.id===s);a&&this.#Q.delete(a.service.name)}}),this.#s.on("serviceCallResponse",t=>{const s=this.#E.get(t.callId);if(!s){this.#d.addProblem(`callService:${t.callId}`,{severity:"error",message:"Received a response for a service for which no callback was registered"});return}s(t),this.#E.delete(t.callId)}),this.#s.on("connectionGraphUpdate",t=>{if(t.publishedTopics.length>0||t.removedTopics.length>0){const s=new Map(this.#Y??new Map);for(const{name:a,publisherIds:i}of t.publishedTopics)s.set(a,new Set(i));t.removedTopics.forEach(a=>s.delete(a)),this.#Y=s}if(t.subscribedTopics.length>0||t.removedTopics.length>0){const s=new Map(this.#z??new Map);for(const{name:a,subscriberIds:i}of t.subscribedTopics)s.set(a,new Set(i));t.removedTopics.forEach(a=>s.delete(a)),this.#z=s}if(t.advertisedServices.length>0||t.removedServices.length>0){const s=new Map(this.#V??new Map);for(const{name:a,providerIds:i}of t.advertisedServices)s.set(a,new Set(i));t.removedServices.forEach(a=>s.delete(a)),this.#V=s}this.#L()}),this.#s.on("fetchAssetResponse",t=>{const s=this.#K.get(t.requestId);if(!s)throw Error("Received a response for a fetch asset request for which no callback was registered");s(t),this.#E.delete(t.requestId)})}};#_(){const t=Array.from(this.#R.values(),i=>({name:i.channel.topic,schemaName:i.channel.schemaName})),s=new Set(t.map(i=>i.name)),a=new Map(this.#u);for(const i of a.keys())s.has(i)||a.delete(i);this.#u=a,this.#y=t;for(const{parsedChannel:i}of this.#R.values())this.#$(i.datatypes);this.#L()}#L=(0,Qn.HF)(()=>{if(!this.#r||this.#l)return Promise.resolve();if(!this.#y)return this.#r({name:this.#n,presence:this.#P,progress:{},capabilities:this.#a,profile:void 0,playerId:this.#i,activeData:void 0,problems:this.#d.problems(),urlState:this.#I});const t=this.#te();(!this.#v||(0,ne.isLessThan)(t,this.#v))&&(this.#v=t),(!this.#B||(0,ne.isGreaterThan)(t,this.#B))&&(this.#B=t);const s=this.#x;return this.#x=[],this.#r({name:this.#n,presence:this.#P,progress:{},capabilities:this.#a,profile:this.#S,playerId:this.#i,problems:this.#d.problems(),urlState:this.#I,activeData:{messages:s,totalBytesReceived:this.#m,startTime:this.#v,endTime:this.#B,currentTime:t,isPlaying:!0,speed:1,lastSeekTime:this.#k,topics:this.#y,topicStats:this.#u,datatypes:this.#b,parameters:this.#h,publishedTopics:this.#Y,subscribedTopics:this.#z,services:this.#V}})});setListener(t){this.#r=t,this.#L()}close(){this.#l=!0,this.#s?.close(),this.#f.close(),this.#D=!1,this.#G!=null&&(clearTimeout(this.#G),this.#G=void 0),this.#C!=null&&(clearInterval(this.#C),this.#C=void 0)}setSubscriptions(t){const s=new Set(t.map(({topic:i})=>i));if(!this.#s||this.#l){this.#p=s;return}for(const i of s)this.#A.has(i)||this.#p.add(i);const a=new Map(this.#u);for(const[i,r]of this.#A)s.has(i)||(this.#s.unsubscribe(r),this.#A.delete(i),this.#w.delete(r),this.#j.add(r),a.delete(i),setTimeout(()=>this.#j.delete(r),qm));this.#u=a;for(const i of this.#p)s.has(i)||this.#p.delete(i);this.#ee()}#ee(){if(this.#s)for(const t of this.#p){const s=this.#N.get(t);if(s){const a=this.#s.subscribe(s.channel.id);this.#p.delete(t),this.#A.set(t,a),this.#w.set(a,s)}}}setPublishers(t){const s=jm.Z(t,U.Z);if(!this.#s||this.#l||!this.#a.includes(De.C.advertise)){this.#F=s;return}const a=Array.from(this.#O.values()),i=a.filter(c=>s.find(({topic:d,schemaName:p})=>c.topic===d&&c.schemaName===p)==null),r=s.filter(({topic:c,schemaName:d})=>a.find(p=>p.topic===c&&p.schemaName===d)==null);for(const c of i)this.#ae(c);for(const c of r)this.#ne(c);(i.length>0||r.length>0)&&this.#L()}setParameter(t,s){if(!this.#s)throw new Error("Attempted to set parameters without a valid Foxglove WebSocket connection");Rn.debug(`FoxgloveWebSocketPlayer.setParameter(key=${t}, value=${s})`);const a=s instanceof Uint8Array,i=a?btoa(Jm.decode(s)):s;this.#s.setParameters([{name:t,value:i,type:a?"byte_array":this.#X.get(t)}],(0,$t.Z)()),this.#h.set(t,s),this.#L()}publish({topic:t,msg:s}){if(!this.#s)throw new Error("Attempted to publish without a valid Foxglove WebSocket connection");const a=this.#O.get(t);if(!a)throw new Error(`Tried to publish on topic '${t}' that has not been advertised before.`);if(a.encoding==="json"){const i=(c,d)=>ArrayBuffer.isView(d)?Array.from(d):d,r=$m.from(JSON.stringify(s,i)??"");this.#s.sendMessage(a.id,r)}else if(Ps.includes(a.encoding)&&a.messageWriter!=null){const i=a.messageWriter.writeMessage(s);this.#s.sendMessage(a.id,i)}}async callService(t,s){if(!this.#s)throw new Error(`Attempted to call service ${t} without a valid Foxglove WebSocket connection.`);if(s==null||typeof s!="object")throw new Error("FoxgloveWebSocketPlayer#callService request must be an object.");const a=this.#Q.get(t);if(!a)throw new Error(`Tried to call service '${t}' that has not been advertised before.`);const{service:i,parsedResponse:r,requestMessageWriter:c}=a,d={serviceId:i.id,callId:++this.#q,encoding:this.#Z,data:new DataView(new Uint8Array().buffer)},p=c.writeMessage(s);return d.data=new DataView(p.buffer),this.#s.sendServiceCallRequest(d),await new Promise((h,f)=>{this.#E.set(d.callId,m=>{try{const y=r.deserialize(m.data);h(y)}catch(y){f(y)}})})}async fetchAsset(t){if(this.#s){if(!this.#o.includes(Nt.$8.assets))throw new Error(`Fetching assets (${t}) is not supported for FoxgloveWebSocketPlayer`)}else throw new Error(`Attempted to fetch assset ${t} without a valid Foxglove WebSocket connection.`);let s=this.#H.get(t);return s?await s:(s=new Promise((a,i)=>{const r=this.#H.get(t);if(r){a(r);return}const c=++this.#W;this.#K.set(c,d=>{if(d.status===Nt.ep.SUCCESS){const p={uri:t,data:new Uint8Array(d.data.buffer,d.data.byteOffset,d.data.byteLength)};a(p)}else i(new Error(`Failed to fetch asset: ${d.error}`))}),this.#s?.fetchAsset(t,c)}),this.#H.set(t,s),await s)}setGlobalVariables(){}#te(){return this.#U||(this.#T=this.#P===De.m.PRESENT?(0,ne.fromMillis)(Date.now()):this.#T),this.#T??_m}#oe(){if(!(!this.#s||this.#l)&&this.#F.length!==0){this.#d.removeProblems(t=>t.startsWith("pub:"));for(const t of this.#F)this.#ne(t);this.#F=[],this.#L()}}#ne(t){if(!this.#s)return;const s=this.#c?this.#c.find(f=>Di.includes(f)):t0,{topic:a,schemaName:i,options:r}=t,c=`pub:encoding:${a}`,d=`pub:msgdef:${a}`;if(!s){this.#d.addProblem(c,{severity:"warn",message:`Cannot advertise topic '${a}': Server does not support one of the following encodings for client-side publishing: ${Di}`});return}let p;if(Ps.includes(s)){let f;try{const m=r?.datatypes??this.#b;if(!(m instanceof Map))throw new Error("Datatypes option must be a map");f=Mi(m,i)}catch(m){Rn.debug(m),this.#d.addProblem(d,{severity:"warn",message:`Unknown message definition for "${a}"`,tip:`Try subscribing to the topic "${a}" before publishing to it`});return}p=s==="ros1"?new Ss.MessageWriter(f):new $s.MessageWriter(f)}const h=this.#s.advertise({topic:a,encoding:s,schemaName:i});this.#O.set(a,{id:h,topic:a,encoding:s,schemaName:i,messageWriter:p});for(const f of[c,d])this.#d.hasProblem(f)&&this.#d.removeProblem(f)}#ae(t){if(!this.#s)return;this.#s.unadvertise(t.id),this.#O.delete(t.topic);const s=[`pub:encoding:${t.topic}`,`pub:msgdef:${t.topic}`];for(const a of s)this.#d.hasProblem(a)&&this.#d.removeProblem(a)}#se(){this.#v=void 0,this.#B=void 0,this.#T=void 0,this.#u=new Map,this.#x=[],this.#m=0,this.#D=!1,this.#d.clear(),this.#h=new Map,this.#H.clear();for(const[t,s]of this.#K)s({op:Nt._y.FETCH_ASSET_RESPONSE,status:Nt.ep.ERROR,requestId:t,error:"WebSocket connection reset"});this.#K.clear(),this.#X.clear()}#$(t){let s;const a=["ros1","ros2"].includes(this.#S??"");for(const[i,r]of t){const c=this.#b.get(i);if(c&&!(0,Ym.isMsgDefEqual)(r,c))this.#d.addProblem(`schema-changed-${i}`,{message:`Definition of schema '${i}' has changed during the server's runtime`,severity:"error"});else{s==null&&(s=new Map(this.#b)),s.set(i,r);const d=wi(i);a&&d!==i&&s.set(d,{...r,name:r.name?wi(r.name):void 0})}}s!=null&&(this.#b=s)}}function wi(e){const t=e.split("/");return t.length===2?`${t[0]}/msg/${t[1]}`:e}function s0(e){return e===Nt.wR.INFO?"info":e===Nt.wR.WARNING?"warn":"error"}class o0{id="foxglove-websocket";type="connection";displayName="Foxglove WebSocket";iconName="Flow";description="Connect to a ROS 1, ROS 2, or custom system using the Foxglove WebSocket protocol. For ROS systems, be sure to first install the foxglove_bridge ROS package.";docsLinks=[{label:"ROS 1",url:"https://foxglove.dev/docs/studio/connection/ros1#foxglove-websocket"},{label:"ROS 2",url:"https://foxglove.dev/docs/studio/connection/ros2#foxglove-websocket"},{label:"custom data",url:"https://foxglove.dev/docs/studio/connection/custom#foxglove-websocket"}];formConfig={fields:[{id:"url",label:"WebSocket URL",defaultValue:"ws://localhost:8765",validate:t=>{try{const s=new URL(t);return s.protocol!=="ws:"&&s.protocol!=="wss:"?new Error(`Invalid protocol: ${s.protocol}`):void 0}catch{return new Error("Enter a valid url")}}}]};initialize(t){const s=t.params?.url;if(s)return new n0({url:s,metricsCollector:t.metricsCollector,sourceId:this.id})}}class a0{setProperty(t,s){}playerConstructed(){}play(t){}seek(t){}setSpeed(t){}pause(){}close(){}setSubscriptions(t){}recordPlaybackTime(t){}recordBytesReceived(t){}recordDataProviderPerformance(){}recordUncachedRangeRequest(){}recordTimeToFirstMsgs(){}recordDataProviderInitializePerformance(){}recordDataProviderStall(){}}async function Ri(e){await new Promise(t=>setTimeout(t,e))}const i0=Object.freeze({sec:0,nsec:0});class r0{#e;#t;#n;constructor(t,s){this.#e=t,this.#n=s}async next(){return this.#n?.aborted===!0?void 0:(await this.#e.next()).value}async nextBatch(t){const s=await this.next();if(!s)return;if(s.type==="problem")return[s];const a=[s];let i=i0;switch(s.type){case"stamp":i=(0,ne.add)(s.stamp,{sec:0,nsec:t*1e6});break;case"message-event":i=(0,ne.add)(s.msgEvent.receiveTime,{sec:0,nsec:t*1e6});break}for(;;){const r=await this.next();if(!r)return a;if(a.push(r),r.type==="problem"||r.type==="stamp"&&(0,ne.compare)(r.stamp,i)>0||r.type==="message-event"&&(0,ne.compare)(r.msgEvent.receiveTime,i)>0)break}return a}async readUntil(t){if(this.#n?.aborted===!0)return;const a=[];if(this.#t?.type==="stamp"&&(0,ne.compare)(this.#t.stamp,t)>=0||this.#t?.type==="message-event"&&(0,ne.compare)(this.#t.msgEvent.receiveTime,t)>0)return a;for(this.#t&&(a.push(this.#t),this.#t=void 0);;){const i=await this.#e.next();if(this.#n?.aborted===!0)return;if(i.done===!0)break;const r=i.value;if(r.type==="stamp"&&(0,ne.compare)(r.stamp,t)>=0){this.#t=r;break}if(r.type==="message-event"&&(0,ne.compare)(r.msgEvent.receiveTime,t)>0){this.#t=r;break}a.push(r)}return a}async end(){await this.#e.return?.()}}var l0="../../packages/studio-base/src/players/IterablePlayer/BlockLoader.ts";const ds=ae.ZP.getLogger(l0);class c0{#e;#t=[];#n;#s;#i;#o=new Map;#a=0;#c;#r=!1;#l=new Qn.fQ;#y;constructor(t){this.#e=t.source,this.#n=t.start,this.#s=t.end,this.#a=t.cacheSizeBytes,this.#c=t.problemManager,this.#y=new AbortController;const s=Number((0,ne.toNanoSec)((0,ne.subtract)(this.#s,this.#n)))+1;if(s>Number.MAX_SAFE_INTEGER*.9)throw new Error("Time range is too long to be supported");this.#i=Math.ceil(Math.max(t.minBlockDurationNs,s/t.maxBlocks));const a=Math.ceil(s/this.#i);ds.debug(`Block count: ${a}`),this.#t=Array.from({length:a})}setTopics(t){if(!U.Z(t,this.#o)){this.#y.abort(),this.#l.notifyAll(),ds.debug(`Preloaded topics: ${[...t].join(", ")}`);for(const s of this.#t)if(s){const a=Object.keys(s.messagesByTopic),i=new Map(t);for(const r of a)this.#o.get(r)===t.get(r)&&i.delete(r);s.needTopics=i}this.#o=t}}#u(){const t=this.#o;let s=0;for(let a=0;a<this.#t.length;a++){const i=this.#t[a];if(i){let r=0;const c={...i.messagesByTopic},d=Object.keys(c);for(const p of d)if(!t.has(p)&&c[p]){for(const h of c[p])r+=h.sizeInBytes;delete c[p]}r>0&&(this.#t[a]={...i,messagesByTopic:c,sizeInBytes:i.sizeInBytes-r},s+=r)}}return s}async stopLoading(){ds.debug("Stop loading blocks"),this.#r=!0,this.#l.notifyAll()}async startLoading(t){for(ds.debug("Start loading process"),this.#r=!1;!this.#r;){this.#y=new AbortController;const s=this.#o;if(await this.#b({progress:t.progress}),this.#r)break;this.#o===s&&await this.#l.wait()}}async#b(t){const s=this.#o;if(s.size===0){t.progress(this.#x(s));return}if(this.#t.length===0)return;ds.debug("loading blocks",{topics:s});const{progress:a}=t;let i=this.#m();for(let r=0;r<this.#t.length;++r){let c;{const y=this.#t[r];if(y?.needTopics.size===0)continue;c=y?.needTopics??s}let d=r;for(let y=r+1;y<this.#t.length;++y){const B=this.#t[y]?.needTopics??s;if(!U.Z(c,B))break;d=y}const p=this.#f(r),h=(0,ne.clampTime)(this.#D(d),this.#n,this.#s),f={topics:c,start:p,end:h,consumptionType:"full"},m=this.#e.getMessageCursor?.({...f,abort:this.#y.signal})??new r0(this.#e.messageIterator(f),this.#y.signal);ds.debug("Loading range",{blockId:r,endBlockId:d});for(let y=r;y<=d;++y){const B=(0,ne.clampTime)(this.#D(y),this.#n,this.#s),k=await m.readUntil(B);if(!k){await m.end();return}const z={};for(const V of c.keys())z[V]=[];let G=0;for(const V of k){if(V.type==="problem"){this.#c.addProblem(`connid-${V.connectionId}`,V.problem);continue}if(V.type!=="message-event")continue;const me=V.msgEvent.topic,le=z[me],oe=`unexpected-topic-${me}`;if(!le){this.#c.addProblem(oe,{severity:"error",message:`Received a message on an unexpected topic: ${me}.`});continue}this.#c.removeProblem(oe);const te=V.msgEvent.sizeInBytes;if(i+=te,le.push(V.msgEvent),G+=te,i<this.#a){this.#c.removeProblem("cache-full");continue}const Z=this.#u();if(i-=Z,i>this.#a){this.#c.addProblem("cache-full",{severity:"error",message:`Cache is full. Preloading for topics [${Array.from(c).join(", ")}] has stopped on block ${y+1}/${this.#t.length}.`,tip:"Try reducing the number of topics that require preloading at a given time (e.g. in plots), or try to reduce the time range of the file."}),a(this.#x(s));return}}const q=this.#t[y];this.#t[y]={needTopics:new Map,messagesByTopic:{...q?.messagesByTopic,...z},sizeInBytes:(q?.sizeInBytes??0)+G},a(this.#x(s))}await m.end(),r=d}}#x(t){return{fullyLoadedFractionRanges:(0,za.og)((0,dn.Z)(this.#t,(a,i)=>{if(a){for(const r of t.keys())if(!a.messagesByTopic[r])return;return{start:i,end:i+1}}})).map(a=>({start:a.start/this.#t.length,end:a.end/this.#t.length})),messageCache:{blocks:this.#t.slice(),startTime:this.#n}}}#m(){return this.#t.reduce((t,s)=>s?t+s.sizeInBytes:t,0)}#f(t){return(0,ne.add)(this.#n,(0,ne.fromNanoSec)(BigInt(t)*BigInt(this.#i)))}#D(t){return(0,ne.add)(this.#n,(0,ne.fromNanoSec)(BigInt(t+1)*BigInt(this.#i)-1n))}}var ji=o(30686);class d0{#e=0;#t=0;#n=new Array(4);enqueue(t){this.#t>=this.#n.length&&(this.#e===0?this.#s():this.#t=this.#t%this.#n.length),this.#e-this.#t===1&&this.#s(),this.#n[this.#t]=t,this.#t++}dequeue(){if(this.#e===this.#t)return;this.#e>=this.#n.length&&(this.#e=this.#e%this.#n.length);const t=this.#n[this.#e];return this.#n[this.#e]=void 0,this.#e+=1,t}size(){return this.#t>=this.#e?this.#t-this.#e:this.#n.length-this.#e+this.#t}capacity(){return this.#n.length}clear(){this.#n.length=0,this.#t=0,this.#e=0}#s(){const t=this.#n.length;if(this.#n.length=this.#n.length*2,this.#e<=this.#t)return;const s=this.#n.length;if(this.#t>=t/2){const a=t-this.#e,i=s-a;for(let r=0;r<a;++r)this.#n[i+r]=this.#n[this.#e+r],this.#n[this.#e+r]=void 0;this.#e=i}else{for(let a=0;a<this.#t;++a)this.#n[t+a]=this.#n[a],this.#n[a]=void 0;this.#t=t+this.#t}}}var Li=o(83102);function Oi(e,t){const s=e;if(s.length===0)return-1;let a=0,i=s.length-1;for(;a<=i;){const r=a+i>>1,c=s[r][0];if(c===t)return r;t<c?i=r-1:a=r+1}return~a}function u0(e,t){if(e.length===0)return-1;let s=0,a=e[0];for(let i=1;i<e.length;++i){const r=e[i];t(r,a)<0&&(s=i,a=r)}return s}var p0="../../packages/studio-base/src/players/IterablePlayer/CachingIterableSource.ts";const f0=ae.ZP.getLogger(p0);class ra extends ji.Z{#e;#t=new Map;#n=[];#s=[{start:0,end:0}];#i;#o=0;#a;#c;#r={sec:0,nsec:0};#l=BigInt(0);#y=[];constructor(t,s){super(),this.#e=t,this.#a=s?.maxTotalSize??1073741824,this.#c=s?.maxBlockSize??52428800}async initialize(){return this.#i=await this.#e.initialize(),this.#i}async terminate(){this.#n.length=0,this.#t.clear()}loadedRanges(){return this.#s}async*messageIterator(t){if(!this.#i)throw new Error("Invariant: uninitialized");const s=t.end??this.#i.end,a=(0,ne.toNanoSec)(s);U.Z(t.topics,this.#t)||(f0.debug("topics changed - clearing cache, resetting range"),this.#t=t.topics,this.#n.length=0,this.#o=0,this.#u());let i=t.start??this.#i.start;const r=d=>(0,ne.compare)(d.start,i)<=0&&(0,ne.compare)(d.end,i)>=0,c=d=>(0,ne.compare)(i,d.start)<0;for(this.#r=i,this.#y=this.#b(this.#r);!((0,ne.compare)(i,s)>0);){const d=this.#n.findIndex(r);let p=this.#n[d];if(p&&(0,ne.compare)(p.start,p.end)===0&&p.items.length===0){p=void 0,this.#n.splice(d,1);continue}if(p){const G=ra.#m(p.items,(0,ne.toNanoSec)(i));for(let q=G;q<p.items.length;++q){const V=p.items[q];if(!V)break;if(V[0]>a)return;p.lastAccess=Date.now(),yield V[1]}i=(0,ne.add)(p.end,{sec:0,nsec:1});continue}const h=i,f=this.#n.findIndex(c),m=this.#n[f];let y=m?(0,ne.subtract)(m.start,{sec:0,nsec:1}):s;if((0,ne.compare)(h,y)>0)throw new Error("Invariant: sourceReadStart > sourceReadEnd");(0,ne.compare)(y,s)>0&&(y=s);const B=this.#e.messageIterator({topics:this.#t,start:h,end:y,consumptionType:t.consumptionType});let k=(0,ne.toNanoSec)(h);const z=[];for await(const G of B){if(!p){const V={id:this.#l++,start:i,end:i,items:[],size:0,lastAccess:Date.now()},me=Li.Z(this.#n,V,le=>(0,ne.toNanoSec)(le.start));this.#n.splice(me,0,V),p=V,this.#u()}if(G.type==="message-event"||G.type==="stamp"){const V=G.type==="stamp"?G.stamp:G.msgEvent.receiveTime,me=(0,ne.toNanoSec)(V);if(me>k){for(const le of z){const oe=le[1],te=oe.type==="message-event"?oe.msgEvent.sizeInBytes:0;p.items.push(le),p.size+=te}z.length=0,p.lastAccess=Date.now(),p.end=(0,ne.subtract)(V,{sec:0,nsec:1}),k=me,this.#u()}}p.size>=this.#c&&(i=(0,ne.add)(p.end,{sec:0,nsec:1}),p=void 0);const q=G.type==="message-event"?G.msgEvent.sizeInBytes:0;this.#x({activeBlock:p,sizeInBytes:q})&&this.#u(),this.#o+=q,z.push([k,G]),yield G}if(p){p.end=y,p.lastAccess=Date.now();for(const G of z){const q=G[1],V=q.type==="message-event"?q.msgEvent.sizeInBytes:0;p.items.push(G),p.size+=V}this.#u()}else{const G={id:this.#l++,start:i,end:y,items:z,size:0,lastAccess:Date.now()};for(const V of z){const me=V[1],le=me.type==="message-event"?me.msgEvent.sizeInBytes:0;G.size+=le}const q=Li.Z(this.#n,G,V=>(0,ne.toNanoSec)(V.start));this.#n.splice(q,0,G),this.#u()}i=(0,ne.add)(y,{sec:0,nsec:1})}}async getBackfillMessages(t){if(!this.#i)throw new Error("Invariant: uninitialized");const s=this.#n.findIndex(c=>(0,ne.compare)(c.start,t.time)<=0&&(0,ne.compare)(c.end,t.time)>=0),a=[],i=new Map(t.topics);for(let c=s;c>=0&&i.size>0;--c){const d=this.#n[c];if(!d)break;const p=(0,ne.toNanoSec)(t.time);let h=Oi(d.items,p);if(h<0)h=~h,h-=1;else for(let m=h+1;m<d.items.length&&d.items[m]?.[0]===p;++m)h=m;for(let m=h;m>=0;--m){const y=d.items[m];if(!y||y[1].type!=="message-event")continue;const B=y[1].msgEvent;i.has(B.topic)&&(i.delete(B.topic),a.push(B))}const f=this.#n[c-1];if(f&&(0,ne.compare)((0,ne.add)(f.end,{sec:0,nsec:1}),d.start)!==0)break}if(i.size===0)return a;const r=await this.#e.getBackfillMessages({...t,topics:i});return a.push(...r),a.sort((c,d)=>(0,ne.compare)(c.receiveTime,d.receiveTime)),a}#u(){if(!this.#i)throw new Error("Invariant: uninitialized");const t=(0,ne.toNanoSec)(this.#i.start),s=Number((0,ne.toNanoSec)((0,ne.subtract)(this.#i.end,this.#i.start)));if(s===0){this.#s=[{start:0,end:1}],this.emit("loadedRangesChange");return}if(this.#n.length===0){this.#s=[{start:0,end:0}],this.emit("loadedRangesChange");return}const a=[];let i;for(const r of this.#n){const c={start:(0,ne.toNanoSec)(r.start),end:(0,ne.toNanoSec)(r.end)};i?i.end+1n===c.start?i.end=c.end:(a.push({start:Number(i.start-t)/s,end:Number(i.end-t)/s}),i=c):i=c}i&&a.push({start:Number(i.start-t)/s,end:Number(i.end-t)/s}),this.#s=a,this.emit("loadedRangesChange")}setCurrentReadHead(t){this.#r=t}canReadMore(){return this.#o<this.#a?!0:this.#y.length>0}#b(t){if(this.#n.length===0)return[];const s=this.#n.map(p=>({id:p.id,start:p.start,end:p.end}));s.sort((p,h)=>(0,ne.compare)(p.end,h.end));const a=s.findIndex(p=>(0,ne.compare)(p.start,t)<=0&&(0,ne.compare)(p.end,t)>=0);if(a===-1){const p=u0(this.#n,(f,m)=>f.lastAccess-m.lastAccess),h=this.#n[p];if(!h)throw new Error("Failed to retrieve oldest block from cache");return[h.id]}const i=s.splice(0,a).map(p=>p.id);let r,c=0;for(c=0;c<s.length;++c){const p=s[c],h=(0,ne.toNanoSec)(p.start),f=(0,ne.toNanoSec)(p.end);if(r==null||r+1n===h)r=f;else break}const d=s.splice(c).map(p=>p.id);return[...i,...d.reverse()]}#x(t){const{activeBlock:s,sizeInBytes:a}=t;if(this.#o+a<=this.#a||(this.#y=this.#b(this.#r),this.#y.length===0))return!1;const i=this.#y.splice(0,1)[0],r=this.#n.findIndex(d=>d.id===i),c=this.#n[r];if(c){if(c===s)throw new Error("Cannot evict the active cache block.");return this.#o-=c.size,this.#n.splice(r,1),!0}return!1}static#m(t,s){if(t[0]!=null&&t[0][0]>=s)return 0;let a=Oi(t,s);if(a<0)return~a;for(let i=a-1;i>=0;--i){const r=t[i];if(r!=null&&r[0]!==s)break;a=i}return a}}var h0="../../packages/studio-base/src/players/IterablePlayer/BufferedIterableSource.ts";const Js=ae.ZP.getLogger(h0),g0={sec:10,nsec:0},m0={sec:1,nsec:0};class y0 extends ji.Z{#e;#t=!1;#n=!1;#s=new Qn.fQ;#i=new Qn.fQ;#o=new d0;#a={sec:0,nsec:0};#c;#r;#l;#y;constructor(t,s){if(super(),this.#l=s?.readAheadDuration??g0,this.#y=s?.minReadAheadDuration??m0,this.#e=new ra(t),(0,ne.compare)(this.#l,this.#y)<0)throw new Error("Invariant: readAheadDuration < minReadAheadDuration");this.#e.on("loadedRangesChange",()=>this.emit("loadedRangesChange"))}async initialize(){return this.#r=await this.#e.initialize(),this.#r}async#u(t){if(!this.#r)throw new Error("Invariant: uninitialized");if(t.topics.size===0){this.#t=!0;return}Js.debug("Starting producer"),this.#o.clear();try{const s=this.#e.messageIterator({topics:t.topics,start:this.#a,consumptionType:"partial"});let a=(0,ne.clampTime)((0,ne.add)(this.#a,this.#l),this.#r.start,this.#r.end);for await(const i of s){if(this.#n)return;if(a=(0,ne.add)(this.#a,this.#l),i.type==="stamp"&&(0,ne.compare)(i.stamp,a)>=0){for(;(0,ne.compare)(i.stamp,a)>=0;){if(this.#n)return;this.#o.enqueue(i),this.#s.notifyAll(),await this.#i.wait(),a=(0,ne.add)(this.#a,this.#l)}continue}this.#o.enqueue(i);const r=i.type==="message-event"?i.msgEvent.receiveTime:void 0,c=(0,ne.add)(this.#a,this.#y);r&&(0,ne.compare)(r,c)<0||(this.#s.notifyAll(),this.#e.setCurrentReadHead(this.#a),!(r&&(0,ne.compare)(r,a)<=0&&this.#e.canReadMore())&&this.#o.size()!==0&&await this.#i.wait())}}finally{this.#s.notifyAll(),this.#t=!0}Js.debug("producer done")}async terminate(){this.#o.clear(),this.#e.removeAllListeners("loadedRangesChange"),await this.#e.terminate()}async stopProducer(){Js.debug("Stopping producer"),this.#n=!0,this.#i.notifyAll(),await this.#c,this.#c=void 0}loadedRanges(){return this.#e.loadedRanges()}messageIterator(t){if(!this.#r)throw new Error("Invariant: uninitialized");if(this.#c)throw new Error("Invariant: BufferedIterableSource allows only one messageIterator");const s=t.start??this.#r.start;this.#a=s,this.#n=!1,this.#t=!1,this.#c=this.#u(t);const a=this;return async function*(){try{if(t.topics.size===0)return;for(;;){const r=a.#o.dequeue();if(!r){if(a.#t)break;await a.#s.wait();continue}r.type==="stamp"&&(a.#a=r.stamp),r.type==="message-event"&&(a.#a=r.msgEvent.receiveTime),a.#i.notifyAll(),yield r}}finally{Js.debug("ending buffered message iterator"),await a.stopProducer()}}()}async getBackfillMessages(t){return await this.#e.getBackfillMessages(t)}}var v0="../../packages/studio-base/src/players/IterablePlayer/IterablePlayer.ts";const Yt=ae.ZP.getLogger(v0),A0=1e9,b0=100,x0=1e8,E0=400,C0=BigInt(99*1e6);class us{#e;#t;#n;#s="preinit";#i=!1;#o=!1;#a;#c=1;#r;#l;#y=!0;#u;#b=Date.now();#x=[];#m=new Map;#f=new Map;#D=[De.C.setSpeed,De.C.playbackControl];#P;#d;#k=[];#S=new Map;#I=new Map;#v={};#B=(0,$t.Z)();#T=[];#U=0;#p=!1;#A;#w;#N;#R=new Map;#g;#j=De.m.INITIALIZING;#h;#C=new aa;#G;#M;#F;#O;#Z;#Q;#E;#Y;#z;isClosed;#V=()=>{};constructor(t){const{metricsCollector:s,urlParams:a,source:i,name:r,enablePreload:c,sourceId:d}=t;this.#G=i,this.#M=new y0(i),this.#t=r,this.#e=a,this.#d=s??new a0,this.#d.playerConstructed(),this.#y=c??!0,this.#Y=d,this.isClosed=new Promise(p=>{this.#V=p}),this.#E=(0,Qn.HF)(this.#te.bind(this))}setListener(t){if(this.#a)throw new Error("Cannot setListener again");this.#a=t,this.#W("initialize")}startPlayback(){this.#q()}playUntil(t){this.#q({untilTime:t})}#q(t){if(!(this.#o||this.#z!=null||!this.#r||!this.#l)){if(t?.untilTime){if(this.#h&&(0,ne.compare)(t.untilTime,this.#h)<=0)throw new Error("Invariant: playUntil time must be after the current time");this.#z=(0,ne.clampTime)(t.untilTime,this.#r,this.#l)}this.#d.play(this.#c),this.#o=!0,this.#s==="idle"&&(!this.#n||this.#n==="idle")?this.#W("play"):this.#E()}}pausePlayback(){this.#o&&(this.#d.pause(),this.#u=void 0,this.#o=!1,this.#z=void 0,this.#A=void 0,this.#s==="play"?this.#W("idle"):this.#E())}setPlaybackSpeed(t){this.#A=void 0,this.#c=t,this.#d.setSpeed(t),this.#E()}seekPlayback(t){if(this.#s==="preinit"||this.#s==="initialize"){Yt.debug(`Ignoring seek, state=${this.#s}`),this.#g=t;return}if(!this.#r||!this.#l)throw new Error("invariant: initialized but no start/end set");const s=(0,ne.clampTime)(t,this.#r,this.#l);if(this.#g&&(0,ne.compare)(this.#g,s)===0){Yt.debug("Ignoring seek, already seeking to this time");return}if(this.#h&&(0,ne.compare)(this.#h,s)===0){Yt.debug("Ignoring seek, already at this time");return}this.#d.seek(s),this.#g=s,this.#z=void 0,this.#u=void 0,this.#A=void 0,this.#W("seek-backfill")}setSubscriptions(t){Yt.debug("set subscriptions",t),this.#k=t,this.#d.setSubscriptions(t);const s=new Map(this.#k.map(i=>[i.topic,i])),a=new Map((0,dn.Z)(this.#k,i=>i.preloadType==="full"?[i.topic,i]:void 0));U.Z(s,this.#S)&&U.Z(a,this.#I)||(this.#S=s,this.#I=a,this.#Z?.setTopics(this.#I),(this.#s==="idle"||this.#s==="seek-backfill"||this.#s==="play")&&!this.#o&&this.#h&&(this.#g??=this.#h,this.#z=void 0,this.#u=void 0,this.#A=void 0,this.#W("seek-backfill")))}setPublishers(t){}setParameter(t,s){throw new Error("Parameter editing is not supported by this data source")}publish(t){throw new Error("Publishing is not supported by this data source")}async callService(){throw new Error("Service calls are not supported by this data source")}close(){this.#W("close")}setGlobalVariables(){}#W(t){this.#n!=="close"&&(Yt.debug(`Set next state: ${t}`),this.#n=t,this.#F?.abort(),this.#F=void 0,this.#K())}async#K(){if(!this.#i){this.#i=!0;try{for(;this.#n;){const t=this.#s=this.#n;switch(this.#n=void 0,Yt.debug(`Start state: ${t}`),t!=="idle"&&t!=="play"&&this.#O&&(Yt.debug("Ending playback iterator because next state is not IDLE or PLAY"),await this.#O.return?.(),this.#O=void 0),t){case"preinit":this.#E();break;case"initialize":await this.#X();break;case"start-play":await this.#L();break;case"idle":await this.#ne();break;case"seek-backfill":await this.#ee();break;case"play":await this.#ae();break;case"close":await this.#se();break;case"reset-playback-iterator":await this.#_()}Yt.debug(`Done state ${t}`)}}catch(t){Yt.error(t),this.#H(t.message,t),this.#E()}finally{this.#i=!1}}}#H(t,s){this.#p=!0,this.#C.addProblem("global-error",{severity:"error",message:t,error:s}),this.#o=!1}async#X(){this.#E();try{const{start:t,end:s,topics:a,profile:i,topicStats:r,problems:c,publishersByTopic:d,datatypes:p,name:h}=await this.#M.initialize();this.#g&&(this.#g=(0,ne.clampTime)(this.#g,t,s)),this.#P=i,this.#r=t,this.#h=this.#g??t,this.#l=s,this.#R=d,this.#f=p,this.#t=h??this.#t;const f=new Map;for(const y of a){const B=f.get(y.name);if(B){c.push({severity:"warn",message:`Inconsistent datatype for topic: ${y.name}`,tip:`Topic ${y.name} has messages with multiple datatypes: ${B.schemaName}, ${y.schemaName}. This may result in errors during visualization.`});continue}f.set(y.name,y)}this.#x=Array.from(f.values()),this.#m=r;let m=0;for(const y of c)this.#C.addProblem(`init-problem-${m}`,y),m+=1;if(this.#y)try{this.#Z=new c0({cacheSizeBytes:A0,source:this.#G,start:this.#r,end:this.#l,maxBlocks:E0,minBlockDurationNs:x0,problemManager:this.#C})}catch(y){Yt.error(y);const B=(0,ne.toRFC3339String)(this.#r),k=(0,ne.toRFC3339String)(this.#l);this.#C.addProblem("block-loader",{severity:"warn",message:"Failed to initialize message preloading",tip:`The start (${B}) and end (${k}) of your data is too far apart.`,error:y})}this.#j=De.m.PRESENT}catch(t){this.#H(`Error initializing: ${t.message}`,t)}this.#E(),!this.#p&&this.#r&&(await Ri(b0),this.#Z?.setTopics(this.#I),this.#Q=this.#$(),this.#W("start-play"))}async#J(){if(!this.#h)throw new Error("Invariant: Tried to reset playback iterator with no current time.");const t=(0,ne.add)(this.#h,{sec:0,nsec:1});Yt.debug("Ending previous iterator"),await this.#O?.return?.(),await this.#M.stopProducer(),Yt.debug("Initializing forward iterator from",t),this.#O=this.#M.messageIterator({topics:this.#S,start:t,consumptionType:"partial"})}async#_(){if(!this.#h)throw new Error("Invariant: Tried to reset playback iterator with no current time.");await this.#J(),this.#W(this.#o?"play":"idle")}async#L(){if(!this.#r||!this.#l)throw new Error("Invariant: start and end must be set");if(this.#g){this.#W("seek-backfill");return}const t=(0,ne.clampTime)((0,ne.add)(this.#r,(0,ne.fromNanoSec)(C0)),this.#r,this.#l);if(Yt.debug(`Playing from ${(0,ne.toString)(this.#r)} to ${(0,ne.toString)(t)}`),this.#O)throw new Error("Invariant. playbackIterator was already set");Yt.debug("Initializing forward iterator from",this.#r),this.#O=this.#M.messageIterator({topics:this.#S,start:this.#r,consumptionType:"partial"}),this.#w=void 0,this.#T=[];const s=[],a=setTimeout(()=>{this.#j=De.m.BUFFERING,this.#E()},100);try{for(;;){const i=await this.#O.next();if(i.done===!0)break;const r=i.value;if(this.#n)return;if(r.type==="problem"){this.#C.addProblem(`connid-${r.connectionId}`,r.problem);continue}if(r.type==="stamp"&&(0,ne.compare)(r.stamp,t)>=0){this.#N=r.stamp;break}if(r.type==="message-event"){if((0,ne.compare)(r.msgEvent.receiveTime,t)>0){this.#w=r.msgEvent;break}s.push(r.msgEvent)}}}finally{clearTimeout(a)}this.#h=t,this.#T=s,this.#j=De.m.PRESENT,this.#E(),this.#W("idle")}async#ee(){if(!this.#r||!this.#l)throw new Error("invariant: stateSeekBackfill prior to initialization");if(!this.#g)return;const t=(0,ne.clampTime)(this.#g,this.#r,this.#l);this.#w=void 0;const s=setTimeout(()=>{this.#j=De.m.BUFFERING,this.#T=[],this.#h=t,this.#E()},100);try{this.#F=new AbortController;const a=await this.#M.getBackfillMessages({topics:this.#S,time:t,abortSignal:this.#F.signal});if(clearTimeout(s),this.#n)return;this.#T=a,this.#h=t,this.#b=Date.now(),this.#j=De.m.PRESENT,this.#E(),await this.#J(),this.#W(this.#o?"play":"idle")}catch(a){if(this.#n&&a.name==="AbortError")Yt.debug("Aborted backfill");else throw a}finally{this.#n!=="seek-backfill"&&(this.#g=void 0),clearTimeout(s),this.#F=void 0}}async#te(){if(!this.#a)return;if(this.#p){await this.#a({name:this.#t,presence:De.m.ERROR,progress:{},capabilities:this.#D,profile:this.#P,playerId:this.#B,activeData:void 0,problems:this.#C.problems(),urlState:{sourceId:this.#Y,parameters:this.#e}});return}const t=this.#T;this.#T=[];let s;this.#r&&this.#l&&this.#h&&(s={messages:t,totalBytesReceived:this.#U,currentTime:this.#h,startTime:this.#r,endTime:this.#l,isPlaying:this.#o,speed:this.#c,lastSeekTime:this.#b,topics:this.#x,topicStats:this.#m,datatypes:this.#f,publishedTopics:this.#R});const a={name:this.#t,presence:this.#j,progress:this.#v,capabilities:this.#D,profile:this.#P,playerId:this.#B,problems:this.#C.problems(),activeData:s,urlState:{sourceId:this.#Y,parameters:this.#e}};await this.#a(a)}async#oe(){if(!this.#o)return;if(!this.#r||!this.#l)throw new Error("Invariant: start & end should be set before tick()");const t=performance.now(),s=this.#u!=null&&this.#u!==0?t-this.#u:20;this.#u=t;let a=Math.min(s*this.#c,300);if(this.#A!=null&&(a=this.#A*.9+a*.1),this.#A=a,!this.#h)throw new Error("Invariant: Tried to play with no current time.");const i=(0,ne.add)(this.#h,(0,ne.fromMillis)(a)),r=(0,ne.clampTime)(i,this.#r,this.#z??this.#l);if(this.#N){if((0,ne.compare)(this.#N,r)>=0){await this.#E.currentPromise,this.#h=r,this.#T=[],this.#E(),this.#z&&(0,ne.compare)(this.#h,this.#z)>=0&&this.pausePlayback();return}this.#N=void 0}const c=[];if(this.#w){if((0,ne.compare)(this.#w.receiveTime,r)>0){await this.#E.currentPromise,this.#h=r,this.#T=c,this.#E(),this.#z&&(0,ne.compare)(this.#h,this.#z)>=0&&this.pausePlayback();return}c.push(this.#w),this.#w=void 0}const d=setTimeout(()=>{this.#j=De.m.BUFFERING,this.#E()},500);try{for(;;){if(!this.#O)throw new Error("Invariant. this._playbackIterator is undefined.");const p=await this.#O.next();if(p.done===!0||this.#n)break;const h=p.value;if(h.type==="problem"){this.#C.addProblem(`connid-${h.connectionId}`,h.problem);continue}if(h.type==="stamp"&&(0,ne.compare)(h.stamp,r)>=0){this.#N=h.stamp;break}if(h.type==="message-event"){if((0,ne.compare)(h.msgEvent.receiveTime,r)>0){this.#w=h.msgEvent;break}c.push(h.msgEvent)}}}finally{clearTimeout(d)}this.#j=De.m.PRESENT,!this.#n&&(await this.#E.currentPromise,this.#h=r,this.#T=c,this.#E(),this.#z&&(0,ne.compare)(this.#h,this.#z)>=0&&this.pausePlayback())}async#ne(){Ha()(this.#F==null,"Invariant: some other abort controller exists"),this.#o=!1,this.#j=De.m.PRESENT,this.#v={fullyLoadedFractionRanges:this.#M.loadedRanges(),messageCache:this.#v.messageCache};const t=this.#F=new AbortController,s=new Promise(i=>{t.signal.addEventListener("abort",i)}),a=()=>{this.#v={fullyLoadedFractionRanges:this.#M.loadedRanges(),messageCache:this.#v.messageCache},this.#E()};this.#M.on("loadedRangesChange",a),this.#E(),await s,this.#M.off("loadedRangesChange",a)}async#ae(){if(this.#j=De.m.PRESENT,!this.#h)throw new Error("Invariant: currentTime not set before statePlay");if(!this.#r||!this.#l)throw new Error("Invariant: start & end should be set before statePlay");const t=this.#S;try{for(;this.#o&&!this.#p&&!this.#n;){if((0,ne.compare)(this.#h,this.#l)>=0){this.#u=void 0,this.#A=void 0,this.#N=void 0,this.#W("idle");return}const s=Date.now();if(await this.#oe(),this.#n)return;if(this.#v={fullyLoadedFractionRanges:this.#M.loadedRanges(),messageCache:this.#v.messageCache},this.#S!==t){this.#w=void 0,this.#W("reset-playback-iterator");return}const a=Date.now()-s;a<16&&await Ri(16-a)}}catch(s){this.#H(s.message,s),this.#E()}}async#se(){this.#o=!1,this.#d.close(),await this.#Z?.stopLoading(),await this.#Q,await this.#M.stopProducer(),await this.#M.terminate(),await this.#O?.return?.(),this.#O=void 0,await this.#G.terminate?.(),this.#V()}async#$(){await this.#Z?.startLoading({progress:async t=>{this.#v={fullyLoadedFractionRanges:this.#v.fullyLoadedFractionRanges,messageCache:t.messageCache},this.#s!=="play"&&this.#E()}})}}var la=o(90758);const S0={canHandle:e=>e instanceof AbortSignal,deserialize:([e,t])=>{const s=new AbortController;return e?s.abort():t.onmessage=()=>{s.abort()},s.signal},serialize:e=>{const{port1:t,port2:s}=new MessageChannel;return e.addEventListener("abort",()=>{t.postMessage("aborted")}),[[e.aborted,s],[s]]}};la.Y6.set("abortsignal",S0);class ps{#e;#t;#n;constructor(t){this.#e=t}async initialize(){this.#t=this.#e.initWorker();const t=la.Ud(this.#t);return await(this.#n=await t(this.#e.initArgs)).initialize()}async*messageIterator(t){if(this.#n==null)throw new Error("WorkerIterableSource is not initialized");const s=this.getMessageCursor(t);try{for(;;){const a=await s.nextBatch(17);if(!a||a.length===0)break;yield*a}}finally{await s.end()}}async getBackfillMessages(t){if(this.#n==null)throw new Error("WorkerIterableSource is not initialized");const{abortSignal:s,...a}=t;return await this.#n.getBackfillMessages(a,s)}getMessageCursor(t){if(this.#n==null)throw new Error("WorkerIterableSource is not initialized");const{abort:s,...a}=t,i=this.#n.getMessageCursor(a,s);return{async next(){return await(await i).next()},async nextBatch(c){return await(await i).nextBatch(c)},async readUntil(c){return await(await i).readUntil(c)},async end(){const c=await i;try{await c.end()}finally{c[la.Yy]()}}}}async terminate(){this.#t?.terminate()}}class T0{id="ros1-local-bagfile";type="file";displayName="ROS 1 Bag";iconName="OpenFile";supportedFileTypes=[".bag"];initialize(t){const s=t.file;if(!s)return;const a=new ps({initWorker:()=>new Worker(new URL(o.p+o.u(4334),o.b)),initArgs:{file:s}});return new us({metricsCollector:t.metricsCollector,source:a,name:s.name,sourceId:this.id})}}const P0=T0;var ly=o(4201),cy=o(96683),I0="../../packages/studio-base/src/players/Ros1Player.ts";const qs=ae.ZP.getLogger(I0),M0=ae.ZP.getLogger("ROS1"),Ni=[De.C.advertise,De.C.getParameters,De.C.setParameters];var bn;(function(e){e.Connection="Connection",e.Parameters="Parameters",e.Graph="Graph",e.Publish="Publish",e.Node="Node"})(bn||(bn={}));class dy{#e;#t;#n;#s=uuidv4();#i;#o=!1;#a;#c=new Map;#r=new Map;#l=new Map;#y=new Map;#u=new Map;#b=new Map;#x;#m;#f=[];#D=[];#P=[];#d;#k=!1;#S;#I=PlayerPresence.INITIALIZING;#v=new PlayerProblemManager;#B;#T;constructor({url:t,hostname:s,metricsCollector:a,sourceId:i}){qs.info(`initializing Ros1Player (url=${t}, hostname=${s})`),this.#S=a,this.#e=t,this.#t=s,this.#x=this.#F(),this.#S.playerConstructed(),this.#T=i,this.#U()}#U=async()=>{const t=OsContextSingleton;if(this.#o||t==null)return;this.#I=PlayerPresence.INITIALIZING;const s=this.#t??RosNode.GetRosHostname(t.getEnvVar,t.getHostname,t.getNetworkInterfaces),a=await Sockets.Create(),i=await a.createHttpServer(),r=async p=>await a.createSocket(p.host,p.port),c=await a.createServer();let d="0.0.0.0";if(s==="localhost"&&(d="localhost"),await c.listen(void 0,d,10),this.#n==null){const p=new RosNode({name:`/foxglovestudio_${t.pid}`,hostname:s,pid:t.pid,rosMasterUri:this.#e,httpServer:i,tcpSocketCreate:r,tcpServer:c,log:M0});this.#n=p,p.on("paramUpdate",({key:h,value:f,prevValue:m,callerId:y})=>{qs.debug("paramUpdate",h,f,m,y),this.#b=new Map(p.parameters)}),p.on("error",h=>{this.#p(bn.Node,{severity:"warn",message:"ROS node error",tip:"Connectivity will be automatically re-established",error:h})})}await this.#n.start(),this.setPublishers(this.#f),await this.#R(),this.#I=PlayerPresence.PRESENT};#p(t,s,{skipEmit:a=!1}={}){this.#v.addProblem(t,s),a||this.#g()}#A(t,{skipEmit:s=!1}={}){this.#v.removeProblem(t)&&(s||this.#g())}#w({skipEmit:t=!1}={}){this.#v.removeProblems(s=>s.startsWith("msgdef:")||s.startsWith("advertise:")||s.startsWith("publish:"))&&(t||this.#g())}#N=t=>!this.#a||t.length!==this.#a.length?!0:!_.isEqual(this.#a,t);#R=async()=>{this.#d&&clearTimeout(this.#d);const t=this.#n;if(!(!t||this.#o))try{const a=(await t.getPublishedTopics()).map(([r,c])=>({name:r,schemaName:c})),i=_.sortBy(a,"name");if(this.#N(i)){const r=new Set(a.map(c=>c.name));for(const c of this.#c.keys())r.has(c)||this.#c.delete(c);this.#a=i}this.setSubscriptions(this.#D);try{const r=await t.subscribeAllParams();_.isEqual(r,this.#b)||(this.#b=new Map,r.forEach((c,d)=>this.#b.set(d,c))),this.#A(bn.Parameters,{skipEmit:!0})}catch(r){this.#p(bn.Parameters,{severity:"warn",message:"ROS parameter fetch failed",tip:`Ensure that roscore is running and accessible at: ${this.#e}`,error:r},{skipEmit:!0})}await this.#M(t),this.#A(bn.Connection,{skipEmit:!0}),this.#I=PlayerPresence.PRESENT,this.#g()}catch(s){this.#I=PlayerPresence.INITIALIZING,this.#p(bn.Connection,{severity:"error",message:"ROS connection failed",tip:`Ensure that roscore is running and accessible at: ${this.#e}`,error:s},{skipEmit:!1})}finally{this.#d=setTimeout(this.#R,3e3)}};#g=debouncePromise(()=>{if(!this.#i||this.#o)return Promise.resolve();const t=this.#a,s=this.#x;if(!t||!s)return this.#i({name:this.#e,presence:this.#I,progress:{},capabilities:Ni,profile:"ros1",playerId:this.#s,problems:this.#v.problems(),activeData:void 0});this.#I===PlayerPresence.PRESENT&&(this.#B!=null&&clearTimeout(this.#B),this.#B=setTimeout(this.#g,100));const a=this.#F(),i=this.#P;return this.#P=[],this.#i({name:this.#e,presence:this.#I,progress:{},capabilities:Ni,profile:"ros1",playerId:this.#s,problems:this.#v.problems(),urlState:{sourceId:this.#T,parameters:{url:this.#e}},activeData:{messages:i,totalBytesReceived:this.#n?.receivedBytes()??0,startTime:s,endTime:a,currentTime:a,isPlaying:!0,speed:1,lastSeekTime:1,topics:t,topicStats:new Map(this.#c),datatypes:this.#r,publishedTopics:this.#l,subscribedTopics:this.#y,services:this.#u,parameters:this.#b}})});setListener(t){this.#i=t,this.#g()}close(){this.#o=!0,this.#n&&this.#n.shutdown(),this.#B!=null&&(clearTimeout(this.#B),this.#B=void 0),this.#S.close(),this.#k=!1}setSubscriptions(t){if(this.#D=t,!this.#n||this.#o)return;this.#C(t);const s=_.keyBy(this.#a??[],({name:i})=>i),a=t.map(({topic:i})=>i).filter(i=>s[i]);for(const i of a){const r=s[i];if(!r||this.#n.subscriptions.has(i))continue;const{schemaName:c}=r,d=this.#n.subscribe({topic:i,dataType:c});d.on("header",(p,h,f)=>{const m=this.#h(c,h);this.#r=new Map([...this.#r,...m])}),d.on("message",(p,h,f)=>{this.#j(i,p,h.byteLength,c,!0),this.#A(`subscribe:${i}`,{skipEmit:!0})}),d.on("error",p=>{this.#p(`subscribe:${i}`,{severity:"warn",message:`Topic subscription error for "${i}"`,tip:`The subscription to "${i}" will be automatically re-established`,error:p})})}for(const i of this.#n.subscriptions.keys())a.includes(i)||(this.#n.unsubscribe(i),this.#c.delete(i))}#j=(t,s,a,i,r)=>{if(this.#a==null)return;const c=this.#F();r&&!this.#k&&(this.#k=!0,this.#S.recordTimeToFirstMsgs());const d={topic:t,receiveTime:c,message:s,sizeInBytes:a,schemaName:i};this.#P.push(d),this.#G(d);let p=this.#c.get(t);this.#n?.subscriptions.has(t)===!0&&(p||(p={numMessages:0},this.#c.set(t,p)),p.numMessages++,p.firstMessageTime??=c,(p.lastMessageTime==null||isGreaterThan(c,p.lastMessageTime))&&(p.lastMessageTime=c)),this.#g()};setPublishers(t){if(this.#f=t,!this.#n||this.#o)return;const s=t.filter(({topic:i})=>i.length>0&&i!=="/"),a=new Set(s.map(({topic:i})=>i));this.#w({skipEmit:!0});for(const i of this.#n.publications.keys())a.has(i)||this.#n.unadvertise(i);for(const{topic:i,schemaName:r}of s){const c=this.#n.publications.get(i);c!=null&&c.dataType!==r&&this.#n.unadvertise(i)}for(const i of s){const{topic:r,schemaName:c,options:d}=i;if(this.#n.publications.has(r))continue;const p=`msgdef:${r}`,h=`advertise:${r}`;let f;try{const m=d?.datatypes;if(!m||!(m instanceof Map))throw new Error("The datatypes option is required for publishing");f=rosDatatypesToMessageDefinition(m,c)}catch(m){qs.debug(m),this.#p(p,{severity:"warn",message:`Unknown message definition for "${r}"`,tip:`Try subscribing to the topic "${r}" before publishing to it`});continue}this.#n.advertise({topic:r,dataType:c,messageDefinition:f}).catch(m=>{this.#p(h,{severity:"error",message:`Failed to advertise "${r}"`,error:m})})}this.#g()}setParameter(t,s){qs.debug(`Ros1Player.setParameter(key=${t}, value=${s})`),this.#n?.setParameter(t,s)}publish({topic:t,msg:s}){const a=`publish:${t}`;this.#n!=null&&(this.#n.isAdvertising(t)?this.#n.publish(t,s).then(()=>{this.#A(a)}).catch(i=>{this.#p(a,{severity:"error",message:`Publishing to ${t} failed`,error:i})}):this.#p(a,{severity:"warn",message:`Unable to publish to "${t}"`,tip:"ROS1 may be disconnected. Please try again in a moment"}))}async callService(){throw new Error("Service calls are not supported by this data source")}setGlobalVariables(){}#h=(t,s)=>{const a=new Map;for(const i of s)i.name==null?a.set(t,i):a.set(i.name,i);return a};#C(t){t.find(s=>s.topic==="/clock")==null&&t.unshift({topic:"/clock"})}#G(t){const s=t.message;if(t.topic==="/clock"&&s.clock&&!isNaN(s.clock.sec)){const a=s.clock,i=toSec(s.clock);if(isNaN(i))return;this.#m==null&&(this.#x=a),this.#m=a,t.receiveTime=this.#F()}}async#M(t){try{const s=await t.getSystemState();(!_.isEqual(this.#l,s.publishers)||!_.isEqual(this.#y,s.subscribers)||!_.isEqual(this.#u,s.services))&&(this.#l=s.publishers,this.#y=s.subscribers,this.#u=s.services),this.#A(bn.Graph,{skipEmit:!0})}catch(s){this.#p(bn.Graph,{severity:"warn",message:"Unable to update connection graph",tip:`The connection graph contains information about publishers and subscribers. A
stale graph may result in missing topics you expect. Ensure that roscore is reachable at ${this.#e}.`,error:s},{skipEmit:!0}),this.#l=new Map,this.#y=new Map,this.#u=new Map}}#F(){return this.#m??fromMillis(Date.now())}}class uy{id="ros1-socket";type="connection";displayName="ROS 1";iconName="ROS";description="Connect to a running ROS 1 system via a native TCP connection that accesses your ROS master and nodes directly.";docsLinks=[{url:"https://foxglove.dev/docs/studio/connection/native"}];formConfig={fields:[{id:"url",label:"ROS_MASTER_URI",defaultValue:OsContextSingleton?.getEnvVar("ROS_MASTER_URI")??"http://localhost:11311",description:"Tells ROS nodes where they can locate the master"},{id:"hostname",label:"ROS_HOSTNAME",defaultValue:OsContextSingleton?RosNode.GetRosHostname(OsContextSingleton.getEnvVar,OsContextSingleton.getHostname,OsContextSingleton.getNetworkInterfaces):"localhost",description:"Acts as the declared network address of a ROS node or tool"}]};initialize(t){const s=t.params?.url;if(!s)return;const a=t.params?.hostname;if(!_.isUndefined(a)&&!_.isString(a))throw new Error(`Unable to initialize Ros1. Invalid hostname ${a}`);return new Ros1Player({url:s,hostname:a,metricsCollector:t.metricsCollector,sourceId:this.id})}}const py=null;class D0{id="ros2-local-bagfile";type="file";displayName="ROS 2 Bag";iconName="OpenFile";supportedFileTypes=[".db3"];supportsMultiFile=!0;initialize(t){const s=t.file?[t.file]:t.files,a=t.file?t.file.name:t.files?.map(r=>r.name).join(", ");if(!s)return;const i=new ps({initWorker:()=>new Worker(new URL(o.p+o.u(4975),o.b)),initArgs:{files:s}});return new us({metricsCollector:t.metricsCollector,source:i,name:a,sourceId:this.id})}}const B0=D0;var w0=o(34055),_s=o.n(w0);function R0(e,{ros2:t}){const s=new Map;return e.forEach(a=>{(0,Xs.parse)(a.messageDefinition,{ros2:t}).forEach(({name:r,definitions:c},d)=>{d===0?s.set(a.type,{name:a.type,definitions:c}):r!=null&&s.set(r,{name:r,definitions:c})})}),s}var j0="../../packages/studio-base/src/players";const eo=ae.ZP.getLogger(j0),Zi=[De.C.advertise,De.C.callServices];function ca(e,t){return fi.Z(e,(s,a)=>{const{node:i,values:r}=a[t];for(const c of r)s.has(c)||s.set(c,new Set),s.get(c)?.add(i)},new Map)}function L0(e,t){const s=t;return e==="/clock"&&s.clock!=null&&!isNaN(s.clock.sec)}function O0(e){return typeof e=="object"&&e!=null}class N0{#e;#t;#n=(0,$t.Z)();#s=!1;#i;#o=!1;#a;#c=new Map;#r;#l=new Map;#y=new Map;#u=new Map;#b={};#x;#m;#f=new Map;#D=[];#P=[];#d;#k=new Map;#S=[];#I=new Set;#v=0;#B;#T=!1;#U=De.m.NOT_PRESENT;#p=new aa;#A;#w=new Map;#N;#R;constructor({url:t,metricsCollector:s,sourceId:a}){this.#U=De.m.INITIALIZING,this.#B=s,this.#e=t,this.#x=(0,ne.fromMillis)(Date.now()),this.#B.playerConstructed(),this.#N=a,this.#g()}#g=()=>{if(this.#o)return;if(this.#t!=null)throw new Error("Attempted to open a second Rosbridge connection");this.#p.removeProblem("rosbridge:connection-failed"),eo.info(`Opening connection to ${this.#e}`);const t=new(_s()).Ros({url:this.#e,transportLibrary:"workersocket"});t.on("connection",()=>{eo.info(`Connected to ${this.#e}`),!this.#o&&(this.#U=De.m.PRESENT,this.#p.removeProblem("rosbridge:connection-failed"),this.#t=t,this.#M(),this.#h({forceUpdate:!0}))}),t.on("error",s=>{s&&(this.#p.addProblem("rosbridge:error",{severity:"warn",message:"Rosbridge error",error:s}),this.#C())}),t.on("close",()=>{this.#U=De.m.RECONNECTING,this.#d&&clearTimeout(this.#d);for(const[s,a]of this.#f)a.unsubscribe(),this.#f.delete(s);t.close(),this.#t=void 0,this.#p.addProblem("rosbridge:connection-failed",{severity:"error",message:"Connection failed",tip:`Check that the rosbridge WebSocket server at ${this.#e} is reachable.`}),this.#C(),setTimeout(this.#g,3e3)})};#j=t=>!this.#a||t.length!==this.#a.length?!0:!U.Z(this.#a,t);async#h(t){const{forceUpdate:s=!1}=t??{};this.#p.removeProblems(r=>r.startsWith("requestTopics:")),this.#d&&clearTimeout(this.#d);const a=this.#t;if(!a||this.#o)return;const i=setTimeout(()=>{this.#p.addProblem("topicsAndRawTypesTimeout",{severity:"warn",message:"Taking too long to get topics and raw types."}),this.#C()},5e3);try{const r=await new Promise((y,B)=>{a.getTopicsAndRawTypes(y,B)});clearTimeout(i),this.#p.removeProblem("topicsAndRawTypesTimeout");const c=[],d=[],p=[],h={};r.types.includes("rcl_interfaces/msg/Log")?(this.#R=2,this.#p.removeProblem("unknownRosVersion")):r.types.includes("rosgraph_msgs/Log")?(this.#R=1,this.#p.removeProblem("unknownRosVersion")):(this.#R=1,this.#p.addProblem("unknownRosVersion",{severity:"warn",message:"Unable to detect ROS version, assuming ROS 1"}));for(let y=0;y<r.topics.length;y++){const B=r.topics[y],k=r.types[y],z=r.typedefs_full_text[y];if(k==null||z==null){c.push(B);continue}d.push({name:B,schemaName:k}),p.push({type:k,messageDefinition:z});const G=(0,Xs.parse)(z,{ros2:this.#R===2});h[k]||(h[k]=this.#R!==2?new Ss.LazyMessageReader(G):new $s.MessageReader(G))}const f=Pa.Z(d,"name");if(!s&&!this.#j(f))return;c.length>0&&this.#p.addProblem("requestTopics:missing-types",{severity:"warn",message:"Could not resolve all message types",tip:`Message types could not be found for these topics: ${c.join(",")}`});const m=new Set(d.map(y=>y.name));for(const y of this.#c.keys())m.has(y)||this.#c.delete(y);this.#a=f,this.#r=R0(p,{ros2:this.#R===2}),this.#b=h,this.setSubscriptions(this.#D),this.#Z().catch(y=>{eo.error(y)})}catch(r){eo.error(r),clearTimeout(i),this.#p.removeProblem("topicsAndRawTypesTimeout"),this.#p.addProblem("requestTopics:error",{severity:"error",message:"Failed to fetch topics from rosbridge",error:r})}finally{this.#C(),this.#d=setTimeout(()=>void this.#h(),3e3)}}#C=(0,Qn.HF)(()=>{if(!this.#i||this.#o)return Promise.resolve();const t=this.#a,s=this.#r,a=this.#x;if(!t||!s||!a)return this.#i({name:this.#e,presence:this.#U,progress:{},capabilities:Zi,profile:void 0,playerId:this.#n,activeData:void 0,problems:this.#p.problems(),urlState:{sourceId:this.#N,parameters:{url:this.#e}}});this.#U===De.m.PRESENT&&(this.#A!=null&&clearTimeout(this.#A),this.#A=setTimeout(this.#C,100));const i=this.#O(),r=this.#P;return this.#P=[],this.#i({name:this.#e,presence:this.#U,progress:{},capabilities:Zi,profile:this.#R===2?"ros2":"ros1",playerId:this.#n,problems:this.#p.problems(),urlState:{sourceId:this.#N,parameters:{url:this.#e}},activeData:{messages:r,totalBytesReceived:this.#v,startTime:a,endTime:i,currentTime:i,isPlaying:!0,speed:1,lastSeekTime:1,topics:t,topicStats:new Map(this.#c),datatypes:s,publishedTopics:this.#l,subscribedTopics:this.#y,services:this.#u}})});setListener(t){this.#i=t,this.#C()}close(){this.#o=!0,this.#t&&this.#t.close(),this.#A!=null&&(clearTimeout(this.#A),this.#A=void 0),this.#B.close(),this.#T=!1}setSubscriptions(t){if(this.#D=t,!this.#t||this.#o)return;this.#F(t),this.#I=new Set(t.map(({topic:i})=>i));const s=Q.Z(this.#a??[],({name:i})=>i),a=t.map(({topic:i})=>i).filter(i=>s[i]);for(const i of a){if(this.#f.has(i))continue;const r=new(_s()).Topic({ros:this.#t,name:i,compression:"cbor-raw"}),c=s[i];if(!c)continue;const{schemaName:d}=c,p=this.#b[d];if(!p)continue;const h=`message:${i}`;r.subscribe(f=>{if(this.#a){try{const m=f.bytes,y=new Uint8Array(m);if(p instanceof Ss.LazyMessageReader){const G=p.size(y);if(G>y.byteLength){this.#p.addProblem(h,{severity:"error",message:`Message buffer not large enough on ${i}`,error:new Error(`Cannot read ${G} byte message from ${y.byteLength} byte buffer`)}),this.#C();return}}const B=p.readMessage(y);if(L0(i,B)){const G=B.clock,q=(0,ne.toSec)(B.clock);isNaN(q)||(this.#m==null&&(this.#x=G),this.#m=G)}const k=this.#O();if(this.#T||(this.#T=!0,this.#B.recordTimeToFirstMsgs()),this.#I.has(i)){const G={topic:i,receiveTime:k,message:B,schemaName:d,sizeInBytes:y.byteLength};this.#P.push(G)}this.#p.removeProblem(h);let z=this.#c.get(i);this.#f.has(i)&&(z||(z={numMessages:0},this.#c.set(i,z)),z.numMessages++)}catch(m){this.#p.addProblem(h,{severity:"error",message:`Failed to parse message on ${i}`,error:m})}this.#C()}}),this.#f.set(i,r)}for(const[i,r]of this.#f)a.includes(i)||(r.unsubscribe(),this.#f.delete(i),this.#c.delete(i))}setPublishers(t){for(const s of this.#k.values())s.unadvertise();this.#k.clear(),this.#S=t,this.#M()}setParameter(t,s){throw new Error("Parameter editing is not supported by the Rosbridge connection")}publish({topic:t,msg:s}){const a=this.#k.get(t);if(!a){if(this.#S.some(i=>i.topic===t))return;throw new Error(`Tried to publish on a topic that is not registered as a publisher: ${t}`)}a.publish(s)}async#G(t){if(!this.#t)throw new Error("Not connected");const s=this.#w.get(t);if(s)return await s;const a=this.#t,i=new Promise((r,c)=>{a.getServiceType(t,r,c)});return this.#w.set(t,i),await i}async callService(t,s){if(!this.#t)throw new Error("Not connected");if(!O0(s))throw new Error("RosbridgePlayer#callService request must be an object");const a=await this.#G(t),i=new(_s()).Service({ros:this.#t,name:t,serviceType:a});return await new Promise((r,c)=>{i.callService(s,d=>{r(d)},d=>{c(d)})})}startPlayback(){}pausePlayback(){}seekPlayback(t){}setPlaybackSpeed(t){}setGlobalVariables(){}#M(){if(this.#t&&!(this.#S.length<=0))for(const{topic:t,schemaName:s}of this.#S){const a=new(_s()).Topic({ros:this.#t,name:t,messageType:s,queue_size:0});this.#k.set(t,a),a.advertise()}}#F(t){t.find(s=>s.topic==="/clock")==null&&t.unshift({topic:"/clock"})}#O(){return this.#m??(0,ne.fromMillis)(Date.now())}async#Z(){if(!this.#s)try{this.#s=!0;const s=(await new Promise((r,c)=>{this.#t?.getNodes(d=>{r(d)},c)})).map(async r=>await new Promise((c,d)=>{this.#t?.getNodeDetails(r,(p,h,f)=>{c({publications:{node:r,values:h},services:{node:r,values:f},subscriptions:{node:r,values:p}})},d)})),a=await Promise.allSettled(s),i=(0,dn.Z)(a,r=>r.status==="fulfilled"?r.value:void 0);this.#l=ca(i,"publications"),this.#y=ca(i,"subscriptions"),this.#u=ca(i,"services"),this.#C()}catch(t){this.#p.addProblem("requestTopics:system-state",{severity:"error",message:"Failed to fetch node details from rosbridge",error:t})}finally{this.#s=!1}}}class Z0{id="rosbridge-websocket";type="connection";displayName="Rosbridge";iconName="Flow";docsLinks=[{url:"https://foxglove.dev/docs/studio/connection/rosbridge"}];description="Connect to a ROS 1 or ROS 2 system using the Rosbridge WebSocket protocol.";formConfig={fields:[{id:"url",label:"WebSocket URL",defaultValue:"ws://localhost:9090",validate:t=>{try{const s=new URL(t);return s.protocol!=="ws:"&&s.protocol!=="wss:"?new Error(`Invalid protocol: ${s.protocol}`):void 0}catch{return new Error("Enter a valid url")}}}]};initialize(t){const s=t.params?.url;if(s)return new N0({url:s,metricsCollector:t.metricsCollector,sourceId:this.id})}}const k0=Z0;class F0{id="ulog-local-file";type="file";displayName="PX4 ULog";iconName="OpenFile";supportedFileTypes=[".ulg",".ulog"];initialize(t){const s=t.file;if(!s)return;const a=new ps({initWorker:()=>new Worker(new URL(o.p+o.u(2042),o.b)),initArgs:{file:s}});return new us({metricsCollector:t.metricsCollector,source:a,name:s.name,sourceId:this.id})}}const U0=F0,z0={".bag":()=>new Worker(new URL(o.p+o.u(6548),o.b)),".mcap":()=>new Worker(new URL(o.p+o.u(4268),o.b))};class W0{id="remote-file";legacyIds=["mcap-remote-file","ros1-remote-bagfile"];type="connection";displayName="Remote file";iconName="FileASPX";supportedFileTypes=[".bag",".mcap"];description="Open pre-recorded .bag or .mcap files from a remote location.";docsLinks=[{label:"ROS 1",url:"https://foxglove.dev/docs/studio/connection/ros1#cloud-data"},{label:"MCAP",url:"https://foxglove.dev/docs/studio/connection/mcap#cloud-data"}];formConfig={fields:[{id:"url",label:"Remote file URL",placeholder:"https://example.com/file.bag",validate:t=>this.#e(t)}]};warning=(0,n.jsxs)(n.Fragment,{children:["Loading large files over HTTP can be slow. For better performance, we recommend"," ",(0,n.jsx)(cn.Z,{href:"https://foxglove.dev/data-platform",target:"_blank",children:"Foxglove Data Platform"}),"."]});initialize(t){const s=t.params?.url;if(!s)throw new Error("Missing url argument");const a=Ke().extname(new URL(s).pathname),i=z0[a];if(!i)throw new Error(`Unsupported extension: ${a}`);const r=new ps({initWorker:i,initArgs:{url:s}});return new us({source:r,name:s,metricsCollector:t.metricsCollector,urlParams:{url:s},sourceId:this.id})}#e(t){try{const s=new URL(t),a=Ke().extname(s.pathname);if(a.length===0)return new Error("URL must end with a filename and extension");if(!this.supportedFileTypes.includes(a)){const i=new Intl.ListFormat("en-US",{style:"long"}).format(this.supportedFileTypes);return new Error(`Only ${i} files are supported.`)}return}catch{return new Error("Enter a valid url")}}}const G0=W0;var fy=o(3890),Q0="../../packages/studio-base/src/players/VelodynePlayer.ts";const da=ae.ZP.getLogger(Q0),Y0=2369,H0=600,ua="SOCKET_ERROR",to="/velodyne_points",ki={name:to,schemaName:"velodyne_msgs/VelodyneScan"},V0=new Map(Object.entries({"velodyne_msgs/VelodyneScan":{name:"velodyne_msgs/VelodyneScan",definitions:[{type:"std_msgs/Header",name:"header",isArray:!1,isComplex:!0},{type:"velodyne_msgs/VelodynePacket",name:"packets",isArray:!0,isComplex:!0}]},"velodyne_msgs/VelodynePacket":{name:"velodyne_msgs/VelodynePacket",definitions:[{type:"time",name:"stamp",isArray:!1,isComplex:!1},{type:"uint8",name:"data",isArray:!0,arrayLength:1206,isComplex:!1}]},"std_msgs/Header":{name:"std_msgs/Header",definitions:[{name:"seq",type:"uint32",isArray:!1},{name:"stamp",type:"time",isArray:!1},{name:"frame_id",type:"string",isArray:!1}]}})),K0=null;class hy{#e=uuidv4();#t;#n;#s;#i=0;#o=0;#a=!1;#c={...ki};#r=[this.#c];#l=new Map;#y;#u=[];#b=[];#x;#m=PlayerPresence.INITIALIZING;#f;#D=[];#P=new Map;constructor({port:t,metricsCollector:s}){this.#t=t??Y0,da.info(`initializing VelodynePlayer on port ${this.#t}`),this.#x=s,this.#y=fromMillis(Date.now()),this.#x.playerConstructed(),this.#d()}#d=async()=>{if(!this.#a){if(this.#m=PlayerPresence.PRESENT,this.#v(),this.#s==null){const t=await Sockets.Create();this.#s=await t.createUdpSocket(),this.#s.on("error",s=>{this.#S(ua,{message:"Networking error listening for Velodyne data",severity:"error",error:s,tip:"Check that your are connected to the same local network (subnet) as the Velodyne sensor"})}),this.#s.on("message",this.#k)}else try{await this.#s.close()}catch(t){da.error(`Failed to close socket: ${t}`)}try{await this.#s.bind({address:"0.0.0.0",port:this.#t}),da.debug(`Bound Velodyne UDP listener socket to port ${this.#t}`)}catch(t){this.#S(ua,{message:"Could not bind to the Velodyne UDP data port",severity:"error",error:t,tip:`Check that port ${this.#t} is not in use by another application`})}}};#k=(t,s)=>{const a=fromMillis(Date.now()),i=toDate(a);i.setMinutes(0,0,0);const r=fromDate(i);this.#o+=t.byteLength,this.#m=PlayerPresence.PRESENT,this.#I(ua,{skipEmit:!0}),this.#i===0&&this.#x.recordTimeToFirstMsgs();const c=new RawPacket(t),d=H0/60,p=c.returnMode===ReturnMode.DualReturn?packetRate(c.inferModel()??Model.HDL64E)*2:packetRate(c.inferModel()??Model.HDL64E),h=Math.ceil(p/d);if(this.#u.push(c),this.#u.length>=h){const f={header:{seq:this.#i++,stamp:a,frame_id:s.address},packets:this.#u.map(k=>X0(k,r))},m=this.#u.reduce((k,z)=>k+z.data.byteLength,0),y={topic:to,receiveTime:a,message:f,sizeInBytes:m,schemaName:ki.schemaName??""};this.#b.push(y),this.#u=[];let B=this.#l.get(to);B||(B={numMessages:0},this.#l.set(to,B)),B.numMessages++,B.firstMessageTime??=a,B.lastMessageTime=a,this.#v()}};#S(t,s,{skipEmit:a=!1}={}){this.#P.set(t,s),this.#D=Array.from(this.#P.values()),a||this.#v()}#I(t,{skipEmit:s=!1}={}){this.#P.delete(t)&&(this.#D=Array.from(this.#P.values()),s||this.#v())}#v=debouncePromise(()=>{if(!this.#n||this.#a)return Promise.resolve();this.#m===PlayerPresence.PRESENT&&(this.#f!=null&&clearTimeout(this.#f),this.#f=setTimeout(this.#v,100));const t=fromMillis(Date.now()),s=this.#b;return this.#b=[],this.#n({name:"Velodyne",presence:this.#m,progress:{},capabilities:K0,profile:"velodyne",playerId:this.#e,problems:this.#D,activeData:{messages:s,totalBytesReceived:this.#o,startTime:this.#y,endTime:t,currentTime:t,isPlaying:!0,speed:1,lastSeekTime:1,topics:this.#r,topicStats:new Map(this.#l),datatypes:V0,publishedTopics:void 0,subscribedTopics:void 0,services:void 0,parameters:void 0}})});setListener(t){this.#n=t,this.#v()}close(){this.#a=!0,this.#s&&(this.#s.dispose(),this.#s=void 0),this.#f!=null&&(clearTimeout(this.#f),this.#f=void 0),this.#x.close(),this.#o=0,this.#i=0,this.#u=[],this.#b=[]}setSubscriptions(t){}setPublishers(t){}setParameter(t,s){throw new Error("Parameter modification is not supported for VelodynePlayer")}publish(t){throw new Error("Publishing is not supported for VelodynePlayer")}async callService(){throw new Error("Service calls are not supported for VelodynePlayer")}setGlobalVariables(t){}}function X0(e,t){const s=e.gpsTimestamp;return{stamp:addTimes(t,fromMicros(s)),data:e.data}}class gy{id="velodyne-device";type="connection";displayName="Velodyne Lidar";iconName="GenericScan";description="Connect directly to Velodyne Lidar hardware to inspect incoming sensor data.";docsLinks=[{url:"https://foxglove.dev/docs/studio/connection/velodyne"}];formConfig={fields:[{id:"port",label:"UDP Port",defaultValue:"2369"}]};initialize(t){const s=t.params?.port;if(s==null)return;const a=parseInt(s);return new VelodynePlayer({port:a,metricsCollector:t.metricsCollector})}}const my=null;class $0{id="mcap-local-file";type="file";displayName="MCAP";iconName="OpenFile";supportedFileTypes=[".mcap"];initialize(t){const s=t.file;if(!s)return;const a=new ps({initWorker:()=>new Worker(new URL(o.p+o.u(5358),o.b)),initArgs:{file:s}});return new us({metricsCollector:t.metricsCollector,source:a,name:s.name,sourceId:this.id})}}const J0=$0,q0=JSON.parse('{"configById":{"Image!s2ii8x":{"imageMode":{"imageTopic":"/CAM_FRONT_LEFT/image_rect_compressed","calibrationTopic":"/CAM_FRONT_LEFT/camera_info","synchronize":false,"rotation":0,"annotations":{"/CAM_FRONT_LEFT/annotations":{"visible":true},"/CAM_FRONT_LEFT/lidar":{"visible":false}}},"cameraState":{"distance":20,"perspective":true,"phi":60,"target":[0,0,0],"targetOffset":[0,0,0],"targetOrientation":[0,0,0,1],"thetaOffset":45,"fovy":45,"near":0.5,"far":5000},"followMode":"follow-pose","scene":{},"transforms":{},"topics":{"/LIDAR_TOP":{"visible":true,"colorField":"intensity","colorMode":"colormap","colorMap":"turbo"},"/semantic_map":{"visible":true}},"layers":{},"publish":{"type":"point","poseTopic":"/move_base_simple/goal","pointTopic":"/clicked_point","poseEstimateTopic":"/initialpose","poseEstimateXDeviation":0.5,"poseEstimateYDeviation":0.5,"poseEstimateThetaDeviation":0.26179939}},"Image!qd8g5l":{"imageMode":{"imageTopic":"/CAM_FRONT/image_rect_compressed","calibrationTopic":"/CAM_FRONT/camera_info","synchronize":false,"rotation":0,"annotations":{"/CAM_FRONT/lidar":{"visible":false},"/CAM_FRONT/annotations":{"visible":true}}},"cameraState":{"distance":20,"perspective":true,"phi":60,"target":[0,0,0],"targetOffset":[0,0,0],"targetOrientation":[0,0,0,1],"thetaOffset":45,"fovy":45,"near":0.5,"far":5000},"followMode":"follow-pose","scene":{},"transforms":{},"topics":{"/LIDAR_TOP":{"visible":true,"colorField":"intensity","colorMode":"colormap","colorMap":"turbo"},"/semantic_map":{"visible":true}},"layers":{},"publish":{"type":"point","poseTopic":"/move_base_simple/goal","pointTopic":"/clicked_point","poseEstimateTopic":"/initialpose","poseEstimateXDeviation":0.5,"poseEstimateYDeviation":0.5,"poseEstimateThetaDeviation":0.26179939}},"Image!37zuv25":{"imageMode":{"imageTopic":"/CAM_FRONT_RIGHT/image_rect_compressed","calibrationTopic":"/CAM_FRONT_RIGHT/camera_info","synchronize":false,"rotation":0,"annotations":{"/CAM_FRONT_RIGHT/annotations":{"visible":true},"/CAM_FRONT_RIGHT/lidar":{"visible":false}}},"cameraState":{"distance":20,"perspective":true,"phi":60,"target":[0,0,0],"targetOffset":[0,0,0],"targetOrientation":[0,0,0,1],"thetaOffset":45,"fovy":45,"near":0.5,"far":5000},"followMode":"follow-pose","scene":{},"transforms":{},"topics":{"/LIDAR_TOP":{"visible":true,"colorField":"intensity","colorMode":"colormap","colorMap":"turbo"},"/semantic_map":{"visible":true}},"layers":{},"publish":{"type":"point","poseTopic":"/move_base_simple/goal","pointTopic":"/clicked_point","poseEstimateTopic":"/initialpose","poseEstimateXDeviation":0.5,"poseEstimateYDeviation":0.5,"poseEstimateThetaDeviation":0.26179939}},"3D!12ucir":{"cameraState":{"distance":35,"perspective":true,"phi":60,"target":[0,0,0],"targetOffset":[0,0,0],"targetOrientation":[0,0,0,1],"thetaOffset":45,"fovy":45,"near":1,"far":5000},"scene":{},"transforms":{},"topics":{"/semantic_map":{"visible":true},"/markers/annotations":{"visible":true},"/map":{"visible":true,"colorField":"color","colorMode":"rgba-fields","colorMap":"turbo","gradient":["#ffffff","#000000"]},"/drivable_area":{"visible":false,"minColor":"#ffffff","colorField":"drivable_area","colorMode":"gradient","colorMap":"turbo","gradient":["#ffffff","#ffffff00"],"maxValue":1,"minValue":0},"/RADAR_FRONT":{"visible":true,"colorField":"x","colorMode":"colormap","colorMap":"turbo"},"/RADAR_FRONT_LEFT":{"visible":true,"colorField":"x","colorMode":"colormap","colorMap":"turbo"},"/RADAR_FRONT_RIGHT":{"visible":true,"colorField":"x","colorMode":"colormap","colorMap":"turbo"},"/RADAR_BACK_LEFT":{"visible":true,"colorField":"x","colorMode":"colormap","colorMap":"turbo"},"/RADAR_BACK_RIGHT":{"visible":true,"colorField":"x","colorMode":"colormap","colorMap":"turbo"},"/LIDAR_TOP":{"visible":true,"colorField":"intensity","colorMode":"colormap","colorMap":"turbo"},"/markers/car":{"visible":true}},"layers":{},"publish":{"type":"point","poseTopic":"/move_base_simple/goal","pointTopic":"/clicked_point","poseEstimateTopic":"/initialpose","poseEstimateXDeviation":0.5,"poseEstimateYDeviation":0.5,"poseEstimateThetaDeviation":0.26179939},"followMode":"follow-pose","followTf":"base_link","imageMode":{}},"map!2vkib4e":{"disabledTopics":[],"zoomLevel":17,"layer":"map","customTileUrl":"","followTopic":"","center":{"lat":1.2988182017789598,"lon":103.78844261169435},"topicColors":{},"maxNativeZoom":18},"3D!3edtgyg":{"cameraState":{"perspective":false,"distance":100,"phi":45,"thetaOffset":90,"targetOffset":[0,0,0],"target":[0,0,0],"targetOrientation":[0,0,0,1],"fovy":45,"near":0.01,"far":5000},"scene":{},"transforms":{},"topics":{"/semantic_map":{"visible":true},"/markers/annotations":{"visible":true},"/map":{"visible":true,"colorField":"value","colorMode":"gradient","colorMap":"turbo","gradient":["#ffffff","#000000"]},"/drivable_area":{"visible":true,"minColor":"#ffffff","colorField":"drivable_area","colorMode":"gradient","colorMap":"turbo","gradient":["#ffffff","#ffffff00"],"maxValue":1,"minValue":0},"/markers/car":{"visible":true}},"layers":{},"publish":{"type":"point","poseTopic":"/move_base_simple/goal","pointTopic":"/clicked_point","poseEstimateTopic":"/initialpose","poseEstimateXDeviation":0.5,"poseEstimateYDeviation":0.5,"poseEstimateThetaDeviation":0.26179939},"followMode":"follow-pose","followTf":"base_link","imageMode":{}},"Plot!2pb7zl7":{"paths":[{"value":"/imu.linear_accel.x","enabled":true,"timestampMethod":"receiveTime"},{"value":"/diagnostics.status[:].values[:]{key==\\"throttle_sensor\\"}.value","enabled":true,"timestampMethod":"headerStamp"}],"minYValue":"","maxYValue":"","showLegend":true,"isSynced":true,"xAxisVal":"timestamp","showXAxisLabels":true,"showYAxisLabels":true,"legendDisplay":"floating","showPlotValuesInLegend":false,"sidebarDimension":240,"foxglovePanelTitle":"Plot"},"Plot!4792hqu":{"paths":[{"value":"/diagnostics.status[:].values[:]{key==\\"FL_wheel_speed\\"}.value","enabled":true,"timestampMethod":"headerStamp"},{"value":"/diagnostics.status[:].values[:]{key==\\"FR_wheel_speed\\"}.value","enabled":true,"timestampMethod":"headerStamp"},{"value":"/diagnostics.status[:].values[:]{key==\\"RL_wheel_speed\\"}.value","enabled":true,"timestampMethod":"headerStamp"},{"value":"/diagnostics.status[:].values[:]{key==\\"RR_wheel_speed\\"}.value","enabled":true,"timestampMethod":"headerStamp"}],"minYValue":"","maxYValue":"","showLegend":true,"isSynced":true,"xAxisVal":"timestamp","showXAxisLabels":true,"showYAxisLabels":true,"legendDisplay":"floating","showPlotValuesInLegend":false,"sidebarDimension":240,"foxglovePanelTitle":"Plot"},"StateTransitions!3i4dk1l":{"paths":[{"value":"/diagnostics.status[:].values[:]{key==\\"brake_switch\\"}.value","timestampMethod":"headerStamp"}],"isSynced":true},"DiagnosticSummary!3equ26v":{"minLevel":0,"pinnedIds":[],"hardwareIdFilter":"","topicToRender":"/diagnostics","sortByLevel":true},"DiagnosticStatusPanel!4bdyip2":{"topicToRender":"/diagnostics","collapsedSections":[],"selectedHardwareId":"","splitFraction":0.49345370528837923},"SourceInfo!7dc2bd":{},"RawMessages!21ab95j":{"topicPath":"/markers/annotations.entities[:]{id==\\"6dd2\\"}","diffTopicPath":"","diffMethod":"custom","diffEnabled":false,"showFullMessageForDiff":false,"autoExpandMode":"auto"},"Tab!1xyw5ix":{"activeTabIdx":0,"tabs":[{"title":"Perception","layout":{"first":{"first":"Image!s2ii8x","second":{"first":"Image!qd8g5l","second":"Image!37zuv25","direction":"row","splitPercentage":50},"direction":"row","splitPercentage":33.333},"second":"3D!12ucir","direction":"column","splitPercentage":30}},{"title":"Planning","layout":{"first":"map!2vkib4e","second":"3D!3edtgyg","direction":"row","splitPercentage":30}},{"title":"Controls","layout":{"first":"Plot!2pb7zl7","second":"Plot!4792hqu","direction":"column","splitPercentage":50}},{"title":"Diagnostics","layout":{"first":{"first":"StateTransitions!3i4dk1l","second":{"first":"DiagnosticSummary!3equ26v","second":"DiagnosticStatusPanel!4bdyip2","direction":"column","splitPercentage":27},"direction":"column","splitPercentage":18},"second":{"first":"SourceInfo!7dc2bd","second":"RawMessages!21ab95j","direction":"column","splitPercentage":60},"direction":"row","splitPercentage":50}}]}},"globalVariables":{},"userNodes":{},"playbackConfig":{"speed":1},"layout":"Tab!1xyw5ix"}');class _0{id="sample-nuscenes";type="sample";displayName="Sample: Nuscenes";iconName="FileASPX";hidden=!0;sampleLayout=q0;initialize(t){const s="https://assets.foxglove.dev/NuScenes-v1.0-mini-scene-0061-df24c12.mcap",a=new ps({initWorker:()=>new Worker(new URL(o.p+o.u(4647),o.b)),initArgs:{url:s}});return new us({source:a,isSampleDataSource:!0,name:"Adapted from nuScenes dataset. Copyright \xA9 2020 nuScenes. https://www.nuscenes.org/terms-of-use",metricsCollector:t.metricsCollector,urlParams:{},sourceId:this.id})}}const ey=_0},41531:(ce,C,o)=>{"use strict";o.d(C,{d:()=>b});var u=o(88967),g=o(25513),v=o(96995),l=o(93254),A=o(10336);class b extends v.Tme{extensionId;renderer;renderables=new Map;constructor(n,S){super(),this.extensionId=this.name=n,this.renderer=S,queueMicrotask(()=>{this.updateSettingsTree()})}dispose(){for(const n of this.renderables.values())n.dispose();this.children.length=0,this.renderables.clear()}getSubscriptions(){return[]}removeAllRenderables(){for(const n of this.renderables.values())n.dispose(),this.remove(n);this.renderables.clear(),this.updateSettingsTree()}settingsNodes(){return[]}handleSettingsAction=n=>{};updateSettingsTree(){this.renderer.settings.setNodesForKey(this.extensionId,this.settingsNodes())}saveSetting(n,S){this.renderer.updateConfig(T=>{S==null?u.Z(T,n):g.Z(T,n,S)}),this.updateSettingsTree()}setColorScheme(n,S){}startFrame(n,S,T){for(const P of this.renderables.values()){const D=P.userData.settingsPath;if(P.visible=P.userData.settings.visible,!P.visible){this.renderer.settings.errors.clearPath(D);continue}const F=P.userData.settings.frameLocked??!0?n:P.userData.messageTime,M=P.userData.frameId;if((0,A.S)(P,this.renderer.transformTree,S,T,M,n,F))this.renderer.settings.errors.remove(D,l.o);else{const I=(0,l.v)(S,T,M);this.renderer.settings.errors.add(D,l.o,I)}}}}},74354:(ce,C,o)=>{"use strict";o.d(C,{d:()=>u});const u={distance:20,perspective:!0,phi:60,target:[0,0,0],targetOffset:[0,0,0],targetOrientation:[0,0,0,1],thetaOffset:45,fovy:45,near:.5,far:5e3}},86073:(ce,C,o)=>{"use strict";o.d(C,{B:()=>l,Q:()=>A});var u=o(51321),g=o(25513),v=o(41531);const l={type:"point",poseTopic:"/move_base_simple/goal",pointTopic:"/clicked_point",poseEstimateTopic:"/initialpose",poseEstimateXDeviation:.5,poseEstimateYDeviation:.5,poseEstimateThetaDeviation:u.Z(Math.PI/12,8)};class A extends v.d{constructor(E){super("foxglove.PublishSettings",E),E.publishClickTool.addEventListener("foxglove.publish-type-change",this.#e)}dispose(){this.renderer.publishClickTool.removeEventListener("foxglove.publish-type-change",this.#e),super.dispose()}settingsNodes(){const E=this.renderer.config,{publish:n}=E,S=this.handleSettingsAction;return[{path:["publish"],node:{label:"Publish",fields:{type:{label:"Type",input:"select",value:n.type,options:[{label:"Point (geometry_msgs/Point)",value:"point"},{label:"Pose (geometry_msgs/PoseStamped)",value:"pose"},{label:"Pose estimate (geometry_msgs/PoseWithCovarianceStamped)",value:"pose_estimate"}],help:"The type of message to publish when clicking in the scene"},topic:{label:"Topic",input:"string",value:{point:n.pointTopic,pose:n.poseTopic,pose_estimate:n.poseEstimateTopic}[n.type],help:`The topic on which to publish ${{point:"points",pose:"poses",pose_estimate:"pose estimates"}[n.type]}`},...n.type==="pose_estimate"&&{poseEstimateXDeviation:{label:"X deviation",input:"number",value:n.poseEstimateXDeviation,help:"The X standard deviation to publish with pose estimates"},poseEstimateYDeviation:{label:"Y deviation",input:"number",value:n.poseEstimateYDeviation,help:"The Y standard deviation to publish with pose estimates"},poseEstimateThetaDeviation:{label:"Theta deviation",input:"number",value:n.poseEstimateThetaDeviation,help:"The theta standard deviation to publish with pose estimates"}}},defaultExpansionState:"collapsed",handler:S}}]}handleSettingsAction=E=>{if(E.action!=="update"||E.payload.path.length===0)return;const n=E.payload.path,S=n[0],T=E.payload.value;if(S==="publish")n[1]==="topic"?this.renderer.updateConfig(P=>{switch(P.publish.type){case"point":P.publish.pointTopic=T??l.pointTopic;break;case"pose":P.publish.poseTopic=T??l.poseTopic;break;case"pose_estimate":P.publish.poseEstimateTopic=T??l.poseEstimateTopic;break}}):n[1]==="type"?this.renderer.publishClickTool.publishClickType!==T&&(this.renderer.publishClickTool.setPublishClickType(T),this.renderer.publishClickTool.stop()):this.renderer.updateConfig(P=>g.Z(P,n,T));else return;this.updateSettingsTree()};#e=()=>{this.renderer.updateConfig(E=>(E.publish.type=this.renderer.publishClickTool.publishClickType,E)),this.updateSettingsTree()}}},93254:(ce,C,o)=>{"use strict";o.d(C,{o:()=>g,v:()=>v});var u=o(61175);const g="MISSING_TRANSFORM";function v(l,A,b){const E=l===b?A:l;return b!==E?`Missing transform from frame <${u.W$.DisplayName(b)}> to frame <${u.W$.DisplayName(E)}>`:b!==A?`Missing transform from frame <${u.W$.DisplayName(b)}> to fixed frame <${u.W$.DisplayName(A)}> to frame <${u.W$.DisplayName(E)}>`:`Identity transform failed for frame <${u.W$.DisplayName(b)}>`}},20414:(ce,C,o)=>{"use strict";o.d(C,{A6:()=>T,EI:()=>v,N2:()=>g,OC:()=>E,Th:()=>j,sx:()=>l});var u=o(25740);function g(){return{position:{x:0,y:0,z:0},orientation:{x:0,y:0,z:0,w:1}}}function v(I,O){const w=u.Su([0,0,0,1],O[0],O[1],O[2]);return{position:{x:I[0],y:I[1],z:I[2]},orientation:{x:w[0],y:w[1],z:w[2],w:w[3]}}}function l(){return[0,0,0]}function A(I,O,w){return[I,O,w]}function b(I){return[I[0],I[1],I[2]]}function E(){return[0,0,0,1]}function n(I,O,w,Y){return[I,O,w,Y]}function S(I){return[I[0],I[1],I[2],I[3]]}function T(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function P(I,O,w,Y,se,Ee,ae,Pe,ye,pe,x,N,W,ue,Q,U){return[I,O,w,Y,se,Ee,ae,Pe,ye,pe,x,N,W,ue,Q,U]}function D(I){return[I[0],I[1],I[2],I[3],I[4],I[5],I[6],I[7],I[8],I[9],I[10],I[11],I[12],I[13],I[14],I[15]]}function R(I,O,w=1e-5){return Math.abs(I-O)<=w}function F(I,O){return R(I.x,O.x)&&R(I.y,O.y)&&R(I.z,O.z)&&R(I.w,O.w)}function M(I,O){return R(I.position.x,O.position.x)&&R(I.position.y,O.position.y)&&R(I.position.z,O.position.z)&&F(I.orientation,O.orientation)}function j(I,O){const w=O[0],Y=O[1],se=O[2],Ee=O[4],ae=O[5],Pe=O[6],ye=O[8],pe=O[9],x=O[10],N=w+ae+x;let W=0;return N>0?(W=Math.sqrt(N+1)*2,I[3]=.25*W,I[0]=(Pe-pe)/W,I[1]=(ye-se)/W,I[2]=(Y-Ee)/W):w>ae&&w>x?(W=Math.sqrt(1+w-ae-x)*2,I[3]=(Pe-pe)/W,I[0]=.25*W,I[1]=(Y+Ee)/W,I[2]=(ye+se)/W):ae>x?(W=Math.sqrt(1+ae-w-x)*2,I[3]=(ye-se)/W,I[0]=(Y+Ee)/W,I[1]=.25*W,I[2]=(Pe+pe)/W):(W=Math.sqrt(1+x-w-ae)*2,I[3]=(Y-Ee)/W,I[0]=(ye+se)/W,I[1]=(Pe+pe)/W,I[2]=.25*W),I}},61175:(ce,C,o)=>{"use strict";o.d(C,{ug:()=>ae,W$:()=>w,Zf:()=>T,wx:()=>b,v8:()=>ye,N2:()=>A.N2,EI:()=>A.EI});var u=o(70159),g=o(25740),v=o(66867);class l{#e=[];get size(){return this.#e.length}clear(){this.#e.length=0}at(x){return this.#e[x]}set(x,N){const W=this.binarySearch(x);if(W>=0)this.#e[W][1]=N;else{const ue=~W,Q=[x,N];ue>=this.#e.length?this.#e.push(Q):this.#e.splice(ue,0,Q)}}shift(){return this.#e.shift()}pop(){return this.#e.pop()}remove(x){const N=this.binarySearch(x);N>=0&&this.#e.splice(N,1)}removeAfter(x){const N=this.binarySearch(x),W=N>=0?N+1:~N;this.#e.length=W}removeBefore(x){const N=this.binarySearch(x),W=N>=0?N:~N;this.#e.splice(0,W)}minEntry(){return this.#e[0]}maxEntry(){return this.#e[this.#e.length-1]}minKey(){return this.#e[0]?.[0]}maxKey(){return this.#e[this.#e.length-1]?.[0]}binarySearch(x){const N=this.#e;if(N.length===0)return-1;let W=0,ue=N.length-1;if(x<N[W][0])return~W;if(x>N[ue][0])return~(ue+1);for(;W<=ue;){const Q=W+ue>>1,U=N[Q][0];if(U===x)return Q;x<U?ue=Q-1:W=Q+1}return~W}}var A=o(20414);class b{#e;#t;#n;constructor(x,N){if(x.length===16)this.#n=x,this.#e=[0,0,0],this.#t=[0,0,0,1],u.i0(this.#e,this.#n),(0,A.Th)(this.#t,this.#n);else if(x.length===3&&N!=null)this.#e=x,this.#t=N,g.Fv(this.#t,this.#t),this.#n=u.yl((0,A.A6)(),this.#t,this.#e);else throw new Error("new Transform() expected either mat4 or vec3 + quat")}position(){return this.#e}rotation(){return this.#t}matrix(){return this.#n}setPosition(x){return v.JG(this.#e,x),u.yl(this.#n,this.#t,this.#e),this}setRotation(x){return g.Fv(this.#t,x),u.yl(this.#n,this.#t,this.#e),this}setPositionRotation(x,N){return v.JG(this.#e,x),g.Fv(this.#t,N),u.yl(this.#n,this.#t,this.#e),this}setPose(x){return v.t8(this.#e,x.position.x,x.position.y,x.position.z),g.t8(this.#t,x.orientation.x,x.orientation.y,x.orientation.z,x.orientation.w),g.Fv(this.#t,this.#t),u.yl(this.#n,this.#t,this.#e),this}setMatrixUnscaled(x){return u.JG(this.#n,x),u.i0(this.#e,x),(0,A.Th)(this.#t,x),this}copy(x){return v.JG(this.#e,x.#e),g.JG(this.#t,x.#t),u.JG(this.#n,x.#n),this}toPose(x){x.position.x=this.#e[0],x.position.y=this.#e[1],x.position.z=this.#e[2],x.orientation.x=this.#t[0],x.orientation.y=this.#t[1],x.orientation.z=this.#t[2],x.orientation.w=this.#t[3]}static Identity(){return new b((0,A.sx)(),(0,A.OC)())}static Interpolate(x,N,W,ue){return v.t7(x.#e,N.position(),W.position(),ue),g.ZA(x.#t,N.rotation(),W.rotation(),ue),x.setPositionRotation(x.#e,x.#t),x}}function E(pe,x){return pe<x?-1:pe>x?1:0}function n(pe,x,N){const W=x-pe,ue=N-pe;return Number(ue)/Number(W)}function S(pe,x,N){const W=Number(x-pe);return pe+BigInt(Math.round(W*N))}const T=4294967295n*BigInt(1e9),P=Math.PI/180,D=[0n,b.Identity()],R=[0n,b.Identity()],F=[0,0,0,0],M=[0,0,0,0],j=b.Identity(),I=(0,A.A6)(),O=Symbol("FALLBACK_FRAME_ID");class w{static FALLBACK_FRAME_ID=O;id;maxStorageTime;maxCapacity;capacityOverfillPercentage;offsetPosition;offsetEulerDegrees;#e;#t;constructor(x,N,W,ue,Q=.1){N&&(this.#e=N),this.id=x,this.maxStorageTime=W,this.maxCapacity=ue,this.capacityOverfillPercentage=Q,this.#t=new l}static assertUserFrame(x){if(x.id===O)throw new Error("Expected user frame")}parent(){return this.#e}root(){if(this.id===O)return this;w.assertUserFrame(this);let x=this;for(;x.#e;)x=x.#e;return x}isRoot(){return this.#e==null}transformsSize(){return this.#t.size}setParent(x){this.#e&&this.#e!==x&&this.#t.clear(),this.#e=x}findAncestor(x){let N=this.#e;for(;N;){if(N.id===x)return N;N=N.#e}}addTransform(x,N){if(this.#t.set(x,N),Math.max(0,this.#t.size-this.maxCapacity)/this.maxCapacity>this.capacityOverfillPercentage){const ue=this.#t.size-this.maxCapacity;let Q=this.#t.at(ue)[0];const fe=this.#t.maxKey()-this.maxStorageTime;Q=fe>Q?fe:Q,this.#t.removeBefore(Q)}}removeTransformsAfter(x){this.#t.removeAfter(x)}removeTransformAt(x){this.#t.remove(x)}findClosestTransforms(x,N,W,ue){const Q=this.#t.size;if(Q===0)return!1;if(Q===1){const[L,K]=this.#t.maxEntry();return W<=L+ue?(x[0]=N[0]=L,x[1]=N[1]=K,!0):!1}const U=this.#t.binarySearch(W);if(U>=0){const[,L]=this.#t.at(U);return x[0]=N[0]=W,x[1]=N[1]=L,!0}const fe=~U;if(fe>=this.#t.size){const[L,K]=this.#t.maxEntry();return W<=L+ue?(x[0]=N[0]=L,x[1]=N[1]=K,!0):!1}const Me=fe-1;if(Me<0){const[L,K]=this.#t.minEntry();return L+ue>=W?(x[0]=N[0]=L,x[1]=N[1]=K,!0):!1}const[je,we]=this.#t.at(Me),[Ze,Ke]=this.#t.at(fe);return x[0]=je,x[1]=we,N[0]=Ze,N[1]=Ke,!0}applyLocal(x,N,W,ue,Q=T){if(this.id===O||W.id===O)return x;if(w.assertUserFrame(this),w.assertUserFrame(W),W===this)return Y(x,N),x;if(W.findAncestor(this.id))return w.Apply(x,N,this,W,!1,ue,Q)?x:void 0;if(this.findAncestor(W.id))return w.Apply(x,N,W,this,!0,ue,Q)?x:void 0;let U=W;for(;U;){const fe=this.findAncestor(U.id);if(fe)return w.Apply(x,N,fe,W,!1,ue,Q)&&w.Apply(x,x,fe,this,!0,ue,Q)?x:void 0;U=U.#e}}apply(x,N,W,ue,Q,U,fe=T){if(W.applyLocal(x,N,ue,U,fe)!=null)return this.applyLocal(x,x,W,Q,fe)}displayName(){return w.DisplayName(this.id)}static Interpolate(x,N,W,ue){const[Q,U]=N,[fe,Me]=W;if(Q===fe){x[0]=fe,x[1].copy(Me);return}const je=Math.max(0,Math.min(1,n(Q,fe,ue)));x[0]=S(Q,fe,je),b.Interpolate(x[1],U,Me,je)}static InterpolateTransform(x,N,W,ue){const[Q,U]=N,[fe,Me]=W;if(Q===fe){x.copy(Me);return}const je=Math.max(0,Math.min(1,n(Q,fe,ue)));b.Interpolate(x,U,Me,je)}static GetTransformMatrix(x,N,W,ue,Q){u.yR(x);let U=W;for(;U!==N;){if(!U.findClosestTransforms(D,R,ue,Q))return!1;if(w.InterpolateTransform(j,D,R,ue),U.offsetEulerDegrees){const fe=j.rotation(),Me=se(F,U.offsetEulerDegrees);g.Jp(M,fe,Me),j.setRotation(M)}if(U.offsetPosition){const fe=j.position();v.IH(fe,fe,U.offsetPosition),j.setPosition(fe)}if(u.Jp(x,j.matrix(),x),U.#e==null)throw new Error(`Frame "${N.displayName()}" is not a parent of "${W.displayName()}"`);U=U.#e}return!0}static Apply(x,N,W,ue,Q,U,fe){return w.GetTransformMatrix(I,W,ue,U,fe)?(Q&&u.U_(I,I),u.Jp(I,I,j.setPose(N).matrix()),j.setMatrixUnscaled(I).toPose(x),!0):!1}static DisplayName(x){return x===O?"(none)":x===""||x.startsWith(" ")||x.endsWith(" ")?`"${x}"`:x}}function Y(pe,x){const N=x.position,W=x.orientation;pe.position.x=N.x,pe.position.y=N.y,pe.position.z=N.z,pe.orientation.x=W.x,pe.orientation.y=W.y,pe.orientation.z=W.z,pe.orientation.w=W.w}function se(pe,x){const N=x[0]*P,W=x[1]*P,ue=x[2]*P,Q=Math.cos(N/2),U=Math.cos(W/2),fe=Math.cos(ue/2),Me=Math.sin(N/2),je=Math.sin(W/2),we=Math.sin(ue/2);return pe[0]=Me*U*fe+Q*je*we,pe[1]=Q*je*fe-Me*U*we,pe[2]=Q*U*we+Me*je*fe,pe[3]=Q*U*fe-Me*je*we,pe}const Ee=5e4;var ae;(function(pe){pe[pe.NOT_UPDATED=0]="NOT_UPDATED",pe[pe.UPDATED=1]="UPDATED",pe[pe.CYCLE_DETECTED=2]="CYCLE_DETECTED"})(ae||(ae={}));const Pe=["base_link","odom","map","earth"];class ye{#e=new Map;#t;#n;defaultRootFrame;constructor(x=T,N=Ee){this.#t=x,this.#n=N,this.defaultRootFrame=new w(w.FALLBACK_FRAME_ID,void 0,this.#t,this.#n),this.defaultRootFrame.addTransform(0n,b.Identity())}addTransform(x,N,W,ue){let Q=!this.hasFrame(x),U=!1;const fe=this.getOrCreateFrame(x),Me=fe.parent();return(Me==null||Me.id!==N)&&(U=this.#i(x,N),U||(fe.setParent(this.getOrCreateFrame(N)),Q=!0)),U||fe.addTransform(W,ue),U?ae.CYCLE_DETECTED:Q?ae.UPDATED:ae.NOT_UPDATED}removeTransform(x,N,W){const ue=this.frame(x);ue&&ue.parent()?.id===N&&(ue.removeTransformAt(W),this.#s(ue))}#s(x){if(x.transformsSize()>0)return;const N=new Map;for(const W of this.#e.values())N.set(W.id,new Set);for(const W of this.#e.values()){const ue=W.parent();if(ue===x)return;if(ue==null)continue;const Q=N.get(ue.id);if(!Q)throw new Error("invariant: should have children array");Q.add(W.id)}for(let W=x;W;W=W.parent()){if(W.transformsSize()>0)return;const ue=N.get(W.id);if(ue&&ue.size>0)return;this.#e.delete(W.id),N.delete(W.id);const Q=W.parent()?.id;Q&&N.get(Q)?.delete(W.id)}}clear(){this.#e.clear()}clearAfter(x){for(const N of this.#e.values())N.removeTransformsAfter(x)}hasFrame(x){return x===w.FALLBACK_FRAME_ID?!0:this.#e.has(x)}frame(x){return x===w.FALLBACK_FRAME_ID?this.defaultRootFrame:this.#e.get(x)}getOrCreateFrame(x){let N=this.#e.get(x);return N||(N=new w(x,void 0,this.#t,this.#n),this.#e.set(x,N)),N}frames(){return this.#e}apply(x,N,W,ue,Q,U,fe,Me){const je=this.frame(W),we=this.frame(Q);if(!je||!we)return;const Ze=(ue!=null?this.frame(ue):je.root())??je.root();return je.apply(x,N,Ze,we,U,fe,Me)}frameList(){const x=Array.from(this.#e.values()),N=new Map(x.map(U=>[U.id,{id:U.id,children:[]}])),W=[];for(const U of x){const fe=N.get(U.id),Me=U.parent()?.id;if(Me==null)W.push(fe);else{const je=N.get(Me);if(je==null)continue;je.children.push(fe)}}const ue=[];function Q(U,fe){const Me=w.DisplayName(U.id);ue.push({value:U.id,label:`${"\xA0\xA0".repeat(fe)}${Me}`}),U.children.sort((je,we)=>je.id.localeCompare(we.id));for(const je of U.children)Q(je,fe+1)}W.sort((U,fe)=>U.id.localeCompare(fe.id));for(const U of W)Q(U,0);return ue}getDefaultFollowFrameId(){const x=this.frames();if(x.size===0)return;for(const Q of Pe){const U=this.frame(Q);if(U)return U.id}const N=new Map;for(const Q of x.values()){const fe=Q.root().id;N.set(fe,(N.get(fe)??0)+1)}return Array.from(N.entries()).sort((Q,U)=>U[1]-Q[1])[0]?.[0]}#i(x,N){if(x===N)return!0;let W=this.frame(N);for(;W?.parent();){if(W.parent()?.id===x)return!0;W=W.parent()}return!1}static Clone(x){const N=new ye(x.#t,x.#n);return N.#e=x.#e,N}}},10336:(ce,C,o)=>{"use strict";o.d(C,{S:()=>v});var u=o(61175);const g=(0,u.N2)();function v(l,A,b,E,n,S,T){const P=l.userData.pose;if(!P)throw new Error(`Missing userData.pose for ${l.name}`);const D=Boolean(A.apply(g,P,b,E,n,S,T));if(l.visible=D,D){const R=g.position,F=g.orientation;l.position.set(R.x,R.y,R.z),l.quaternion.set(F.x,F.y,F.z,F.w)}return D}},1375:(ce,C,o)=>{"use strict";o.d(C,{Wr:()=>b,ym:()=>n});const u=new Map([["uint8","number"],["int8","number"],["uint16","number"],["int16","number"],["uint32","number"],["int32","number"],["float32","number"],["float64","number"],["int64","bigint"],["uint64","bigint"],["string","string"],["bool","boolean"],["time","Time"],["duration","Duration"]]),g=new Map([["uint8","Uint8Array"],["int8","Int8Array"],["int16","Int16Array"],["uint16","Uint16Array"],["int32","Int32Array"],["uint32","Uint32Array"],["int64","BigInt64Array"],["uint64","BigUint64Array"],["float32","Float32Array"],["float64","Float64Array"]]);function v(S){return JSON.stringify(S)}const l=S=>{const T=new Set;let P=`
    /**
     * MessageTypeBySchemaName enumerates the message types for for all the schema names
     * in the current data source.
     *
     * You probably want to use Message<...> instead.
     */
    export type MessageTypeBySchemaName = {
  `;for(const[D,R]of S){if(T.has(D)){P+=`
// ${D} appeared multiple times`;continue}T.add(D),P+=`
${v(D)}: {`;for(const F of R.definitions){const{type:M,isConstant:j,isArray:I}=F,O=g.get(M),w=u.get(M),Y=v(F.name),se=F.optional===!0?"?":"";j===!0?P+=`
 // ${F.name} = ${F.valueText}`:I===!0?O?P+=`
${Y}${se}: ${O},`:w?P+=`
${Y}${se}: ${w}[],`:P+=`
${Y}${se}: MessageTypeBySchemaName[${v(M)}][],`:w?P+=`
${Y}${se}: ${w},`:P+=`
${Y}${se}: MessageTypeBySchemaName[${v(M)}],`}P+=`
},`}return P+=`
};`,P};function A(S){let T=`
    /**
     * MessageTypeByTopic enumerates the Messages types for all the topics in
     * the current data source.
     *
     * You probably want to use Input<"/my-topic"> instead of MessageTypeByTopic.
     */
    export type MessageTypeByTopic = {`;for(const P of S)T+=`${v(P.name)}: MessageTypeBySchemaName[${v(P.schemaName??"")}]
`;return T+=`
};`,T}function b(S){const T=A(S.topics),P=new Map(S.datatypes);for(const F of S.topics)(F.schemaName==null||!P.has(F.schemaName))&&P.set(F.schemaName??"",{name:F.schemaName,definitions:[]});return`
// NOTE:
// This file is generated from the current data source.
// It contains helper types for looking up message definitions by schema name or topic.
//
// You likely want to use the higher-level types in \`./types\` rather than the types in this file directly.

type Time = {
  sec: number,
  nsec: number,
};

type Duration = Time;

${l(P)}

${T}
`}let E;function n(){return E??=b({topics:[],datatypes:new Map})}},23621:(ce,C,o)=>{"use strict";o.d(C,{Y:()=>u,k:()=>g});const u="ros/index.d.ts",g=`
  export declare interface Duration {
    sec: number;
    nsec: number;
  }

  export declare interface Time {
    sec: number;
    nsec: number;
  }

  // Once a data source Messages will be populated with interfaces matching the data source messages.
  export declare namespace Messages {}

  // Once a data source TopicsToMessageDefinition will be populated with topic names to message interfaces.
  export declare interface TopicsToMessageDefinition {}

  /**
   * To correctly type your inputs, you use this type to refer to specific
   * input topics, e.g. 'Input<"/your_input_topic">'. If you have
   * multiple input topics, use a union type, e.g.
   * 'Input<"/your_input_topic_1"> |
   * Input<"/your_input_topic_2">'.
   *
   * These types are dynamically generated from the bag(s) currently in your
   * Foxglove Studio session, so if a datatype changes, your User Script
   * may not compile on the newly formatted bag.
   */
  export declare interface Input<T extends keyof TopicsToMessageDefinition> {
    topic: T;
    receiveTime: Time;
    message: TopicsToMessageDefinition[T];
  }

`},27332:(ce,C,o)=>{"use strict";o.d(C,{Ai:()=>l});const u=(A,b)=>A.sec===b.sec&&A.nsec===b.nsec,g=(A,b)=>{const E=A.sec-b.sec;return E!==0?E:A.nsec-b.nsec},v=A=>{let{sec:b,nsec:E}=A;for(;E>1e9;)E-=1e9,b+=1;for(;E<0;)E+=1e9,b-=1;return{sec:b,nsec:E}},l=({sec:A,nsec:b},{sec:E,nsec:n})=>v({sec:A-E,nsec:b-n})},56924:(ce,C,o)=>{"use strict";o.d(C,{Fb:()=>g,H_:()=>u,SM:()=>v});const u={Hint:1,Info:2,Warning:4,Error:8},g={Typescript:"Typescript",DatatypeExtraction:"DatatypeExtraction",InputTopicsChecker:"InputTopicsChecker",OutputTopicChecker:"OutputTopicChecker",Runtime:"Runtime"},v={RUNTIME:1,DatatypeExtraction:{NO_DEFAULT_EXPORT:1,NON_FUNC_DEFAULT_EXPORT:2,NO_TYPE_RETURN:3,BAD_TYPE_RETURN:4,UNKNOWN_ERROR:5,NO_UNIONS:6,NO_FUNCTIONS:7,NO_CLASSES:8,NO_TYPE_LITERALS:9,NO_TUPLES:10,NO_INTERSECTION_TYPES:11,NO_TYPEOF:12,PREFER_ARRAY_LITERALS:13,STRICT_MARKERS_RETURN_TYPE:14,LIMITED_UNIONS:15,NO_NESTED_ANY:16,NO_MAPPED_TYPES:17,INVALID_PROPERTY:18,INVALID_INDEXED_ACCESS:19},InputTopicsChecker:{NO_TOPIC_AVAIL:1,NO_INPUTS_EXPORT:2,EMPTY_INPUTS_EXPORT:3,BAD_INPUTS_TYPE:4},OutputTopicChecker:{NO_OUTPUTS:1,NOT_UNIQUE:2,EXISTING_TOPIC:3}}},24304:(ce,C,o)=>{"use strict";o.d(C,{C:()=>g,m:()=>u});var u;(function(v){v.NOT_PRESENT="NOT_PRESENT",v.INITIALIZING="INITIALIZING",v.RECONNECTING="RECONNECTING",v.BUFFERING="BUFFERING",v.PRESENT="PRESENT",v.ERROR="ERROR"})(u||(u={}));const g={advertise:"advertise",assets:"assets",callServices:"callServices",setSpeed:"setSpeed",playbackControl:"playbackControl",getParameters:"getParameters",setParameters:"setParameters"}},32614:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>l});var u=o(40099),g=o(76788),v=o(40301);function l(A,b,E,n){const S=[],T=E[A];if((0,v.lD)(A)&&T){const{activeTabIdx:j,tabs:I}=T,O=I[j]?.layout;if(O!=null){const w=(0,v.CD)(O,E);S.push(...w)}}const P=(0,v.m2)(E);let D=b;const R=[];for(;D!=null;)R.push(D),D=P[D];S.push(...R);const F=u.Z(n,[A]);return g.Z(F,...S)}},39367:(ce,C,o)=>{"use strict";o.d(C,{W0:()=>n,_N:()=>T,vv:()=>P});var u=o(52322),g=o(2784),v=o(42893),l=o(82044),A=o(96715);function b(D){return(0,v.M)(R=>({sequenceNumbers:{},settingsTrees:{},defaultTitles:{},incrementSequenceNumber:F=>{R(M=>({sequenceNumbers:{...M.sequenceNumbers,[F]:(M.sequenceNumbers[F]??0)+1}}))},updateSettingsTree:(F,M)=>{R(j=>({settingsTrees:{...j.settingsTrees,[F]:M}}))},updateDefaultTitle:(F,M)=>{R(j=>({defaultTitles:{...j.defaultTitles,[F]:M}}))},...D}))}const E=D=>D.updateSettingsTree;function n(){const{id:D}=(0,l.R)(),R=(0,A.J)(E),F=(0,g.useCallback)(M=>{R(D,M)},[D,R]);return(0,g.useEffect)(()=>()=>{R(D,void 0)},[D,R]),F}const S=D=>D.updateDefaultTitle;function T(){const D=(0,l.R)().id,R=(0,g.useCallback)(I=>I.defaultTitles[D],[D]),F=(0,A.J)(S),M=(0,A.J)(R),j=(0,g.useCallback)(I=>{F(D,I)},[D,F]);return[M,j]}function P(D){const{children:R,initialState:F}=D,[M]=(0,g.useState)(()=>b(F));return(0,u.jsx)(A.c.Provider,{value:M,children:R})}},2661:(ce,C,o)=>{"use strict";o.d(C,{e:()=>g});const u=o.g;function g(l){u.foxgloveStudioReportErrorFn?.(l)}function v(l){u.foxgloveStudioReportErrorFn=l}},28904:(ce,C,o)=>{"use strict";o.d(C,{q:()=>u});var u;(function(g){g.APP_INIT="Studio: App Initialized",g.DIALOG_SELECT_VIEW="Studio: Dialog View Selected",g.DIALOG_CLOSE="Studio: Dialog Closed",g.DIALOG_CLICK_CTA="Studio: Dialog CTA Clicked",g.APP_BAR_CLICK_CTA="Studio: App Bar CTA CLicked",g.TOUR_PROMPT_SHOWN="Studio: New UI Tour prompt shown",g.TOUR_STARTED="Studio: New UI Tour started",g.TOUR_BACK="Studio: New UI Tour step back",g.TOUR_NEXT="Studio: New UI Tour step next",g.TOUR_COMPLETED="Studio: New UI Tour completed",g.TOUR_DISMISSED="Studio: New UI Tour dismissed",g.APP_MENU_CLICK="Studio: App Menu Clicked",g.HELP_MENU_CLICK_CTA="Studio: Help Menu CTA Clicked",g.PLAYER_CONSTRUCTED="Studio: Player Constructed",g.PLAYER_PLAY="Studio: Player Played",g.PLAYER_SEEK="Studio: Player Seeked",g.PLAYER_SET_SPEED="Studio: Player Speed Set",g.PLAYER_PAUSE="Studio: Player Paused",g.PLAYER_CLOSE="Studio: Player Closed",g.LAYOUT_UPDATE="Studio: Layout Updated",g.LAYOUT_CREATE="Studio: Layout Created",g.LAYOUT_DUPLICATE="Studio: Layout Duplicated",g.LAYOUT_RENAME="Studio: Layout Renamed",g.LAYOUT_DELETE="Studio: Layout Deleted",g.LAYOUT_SELECT="Studio: Layout Selected",g.LAYOUT_IMPORT="Studio: Layout Imported",g.LAYOUT_EXPORT="Studio: Layout Exported",g.LAYOUT_SHARE="Studio: Layout Shared",g.LAYOUT_OVERWRITE="Studio: Layout Overwritten",g.LAYOUT_REVERT="Studio: Layout Reverted",g.LAYOUT_MAKE_PERSONAL_COPY="Studio: Layout Personal Copy Made",g.PANEL_ADD="Studio: Panel Added",g.PANEL_DELETE="Studio: Panel Deleted",g.VARIABLE_ADD="Studio: Variable Added",g.VARIABLE_DELETE="Studio: Variable Deleted",g.IMAGE_DOWNLOAD="Studio: Image Downloaded",g.EXTENSION_INSTALL="Studio: Extension Installed",g.EXTENSION_UNINSTALL="Studio: Extension Uninstalled",g.EXPERIMENTAL_FEATURE_TOGGLE="Studio: Experimental Feature Toggled"})(u||(u={}))},43234:(ce,C,o)=>{"use strict";o.d(C,{W:()=>A,o:()=>b});var u=o(2784),g=o(42689),v=o(8533);const l=Symbol("MESSAGE_PATH_DRAG_TYPE");function A({path:E,rootSchemaName:n,isTopic:S,isLeaf:T}){const[P,D]=(0,u.useState)(),R=(0,u.useRef)(new Set),F=(0,u.useMemo)(()=>({path:E,rootSchemaName:n,isTopic:S,isLeaf:T,setDropStatus:D,overDropTargets:R.current}),[E,n,S,T]),[{isDragging:M},j,I]=(0,g.c)({type:l,item:F,options:{dropEffect:"move"},collect(w){return{isDragging:w.isDragging()}}});let O;return M&&(P?P.canDrop?P.effect==="add"?O="copy":O="auto":O="no-drop":O="auto"),{connectDragSource:j,connectDragPreview:I,cursor:O,isDragging:M}}function b(){const[E,n]=(0,u.useState)(),[{isDragging:S,isOver:T,isValidTarget:P,message:D},R]=(0,v.L)({accept:l,canDrop(F,M){return E?!!E.getDropStatus(F).canDrop:!1},collect(F){if(F.getItemType()!==l)return{isDragging:!1,isOver:!1,isValidTarget:!1};const M=F.getItem(),j=F.getHandlerId();if(!M||j==null)return{isDragging:M!=null,isOver:!1,isValidTarget:!1};const I=F.isOver({shallow:!0}),O=E?.getDropStatus(M)??{canDrop:!1};return I?(M.overDropTargets.add(j),M.setDropStatus(O)):(M.overDropTargets.delete(j),M.overDropTargets.size===0&&M.setDropStatus(void 0)),{isDragging:!0,isOver:I&&F.canDrop(),isValidTarget:O.canDrop,message:O.message??(O.effect==="add"?`Add ${M.path}`:`View ${M.path}`)}},drop(F,M){E?.handleDrop(F)}});return{isDragging:S,isOver:T,isValidTarget:P,dropMessage:D,connectMessagePathDropTarget:R,setMessagePathDropConfig:n}}},88724:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>P});var u=o(52322),g=o(39721),v=o(79396),l=o(76919),A=o(2784),b=o(68588),E=o(1851),n=o(2784);const S=(0,g.Z)({key:"mui",prepend:!0}),T=n.forwardRef((D,R)=>(0,u.jsx)(u.Fragment,{children:D.children}));T.displayName="ThemeContainer";function P({children:D,isDark:R}){(0,A.useEffect)(()=>{document.documentElement.setAttribute("data-color-mode",R?"dark":"light"),document.querySelector("#loading-styles")?.remove()},[R]);const{i18n:F}=(0,b.$G)(),M=(0,A.useMemo)(()=>(0,E.A)(R?"dark":"light",F.language),[F.language,R]);return(0,A.useLayoutEffect)(()=>{const j=document.createElement("meta");return j.name="theme-color",j.content=M.palette.background.paper,document.head.appendChild(j),()=>{j.remove()}},[M]),(0,u.jsx)(v.C,{value:S,children:(0,u.jsx)(l.Z,{theme:M,children:D})})}},45243:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>b,t:()=>l});var u;const g="$$RESPONSE",v="$$ERROR";function l(){const E={onmessage:void 0,postMessage(S,T){const P=new MessageEvent("message",{data:S});n.onmessage&&n.onmessage(P)},terminate:()=>{}},n={onmessage:void 0,postMessage(S,T){const P=new MessageEvent("message",{data:S});E.onmessage&&E.onmessage(P)},terminate:()=>{}};return{local:E,remote:n}}class A{static transferables="$$TRANSFERABLES";#e;#t=0;#n={};#s=new Map;constructor(n){if(this.#e=n,this.#e.onmessage)throw new Error("channel.onmessage is already set. Can only use one Rpc instance per channel.");this.#e.onmessage=this.#i}#i=n=>{const{id:S,topic:T,data:P}=n.data;if(T===g){this.#n[S]?.(n.data),delete this.#n[S];return}new Promise(D=>{const R=this.#s.get(T);if(!R)throw new Error(`no receiver registered for ${T}`);D(R(P))}).then(D=>{if(!D){this.#e.postMessage({topic:g,id:S});return}const R=D[u.transferables];delete D[u.transferables];const F={topic:g,id:S,data:D};this.#e.postMessage(F,R)}).catch(D=>{const R={topic:g,id:S,data:{[v]:!0,name:D.name,message:D.message,stack:D.stack}};this.#e.postMessage(R)})};terminate(){for(const[n,S]of Object.entries(this.#n))S({topic:g,id:n,data:{[v]:!0,name:"Error",message:"Rpc terminated",stack:new Error().stack}})}async send(n,S,T){const P=this.#t++,D={topic:n,id:P,data:S},R=new Promise((F,M)=>{this.#n[P]=j=>{if(j.data?.[v]!=null){const I=new Error(j.data.message);I.name=j.data.name,I.stack=j.data.stack,M(I)}else F(j.data)}});return this.#e.postMessage(D,T),await R}receive(n,S){if(this.#s.has(n))throw new Error(`Receiver already registered for topic: ${n}`);this.#s.set(n,S)}}u=A;const b=A},10363:(ce,C,o)=>{"use strict";o.d(C,{v:()=>u});function u(g,v){throw new Error(v)}},28e3:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>v});var u=o(36537);function g(l){const A=document.body,b=document.createElement("textarea");A.appendChild(b),b.value=l,b.select(),document.execCommand("copy"),A.removeChild(b)}const v={async copy(l){if((0,u.N)(navigator.clipboard).writeText!=null)try{await navigator.clipboard.writeText(l);return}catch{g(l)}else g(l)}}},86286:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>u});function u(g,v,l){const A=l-v.length,b=A<=0?[]:g.slice(-A),E=l-b.length;for(let n=Math.max(0,v.length-E);n<v.length;++n)b.push(v[n]);return b}},55433:(ce,C,o)=>{"use strict";o.d(C,{G:()=>g,W:()=>u});function u(v,l){g([{blob:new Blob([v]),fileName:l}])}function g(v){const l=document.body,A=document.createElement("a");A.style.display="none",l.appendChild(A);const b=v.map(E=>{const n=window.URL.createObjectURL(E.blob);return A.setAttribute("download",E.fileName),A.setAttribute("href",n),A.click(),n});window.requestAnimationFrame(()=>{l.removeChild(A),b.forEach(E=>{URL.revokeObjectURL(E)})})}},53542:(ce,C,o)=>{"use strict";o.d(C,{g:()=>u});class u extends Error{details;extraInfo;message;constructor(v,l){if(super(),this.details=v,this.extraInfo=l,this.name="AppError",this.message="",v instanceof Error?this.message=v.stack??v.message:typeof v=="string"&&(this.message=v),l!=null)if(l.componentStack!=null)this.message+=`

${l.componentStack}`;else try{const A=JSON.stringify(l);this.message+=`

${A}`}catch{this.message+=`

[ Either cyclic object or object with BigInt(s) ]`}this.message===""&&(this.message="Unknown Error")}}},59635:(ce,C,o)=>{"use strict";o.d(C,{LU:()=>P,WU:()=>n,_v:()=>F,mr:()=>T,p6:()=>S});var u=o(98321),g=o.n(u),v=o(54764),l=o.n(v),A=o(44668),b=o.n(A),E=o(24643);g()(l());function n(M,j){return`${S(M,j)} ${T(M,j)}`}function S(M,j){return M.sec<0||M.nsec<0?(console.error("Times are not allowed to be negative"),"(invalid negative time)"):l().tz((0,A.toDate)(M),j??l().tz.guess()).format("YYYY-MM-DD")}function T(M,j){return M.sec<0||M.nsec<0?(console.error("Times are not allowed to be negative"),"(invalid negative time)"):l().tz((0,A.toDate)(M),j??l().tz.guess()).format("h:mm:ss.SSS A z")}function P(M){return l().duration(Math.round(M.sec*1e3+M.nsec/1e6)).format("h:mm:ss.SSS",{trim:!1})}function D(M,j){const I=j!=null?l().tz(M,"YYYY-MM-DD h:mm:ss.SSS A z",j):l()(M,"YYYY-MM-DD h:mm:ss.SSS A z"),O=I.toDate(),w=I.isValid()?(0,A.fromDate)(O):void 0;if(!(!w||w.sec<=0||w.nsec<0))return w}const R=/^\d+-\d+-\d+\s+\d+:\d+:\d+.\d+\s[PpAa][Mm]\s[A-Za-z$]+/,F=({text:M,timezone:j})=>{if(M==null||M==="")return;const I=isNaN(+M),O=!(R.test(M)&&D(M,j));if(!(I&&O))return{time:I?D(M,j):(0,E.Z)(M),method:I?"TOD":"SEC"}}},11701:(ce,C,o)=>{"use strict";o.d(C,{bm:()=>l,lk:()=>v,wd:()=>g});var u=o(47746);const g="/studio_script/";function v(){const{palette:{mode:A,text:b}}=(0,u.Z)();return{dark:{base00:"transparent",base0B:"#ffa657",base09:"#7ee787",base07:"#79c0ff",base08:"#ff7b72",base0D:"#79c0ff",base03:b.secondary},light:{base00:"transparent",base0B:"#953800",base09:"#116329",base07:"#0550ae",base08:"#cf222e",base0D:"#0550ae",base03:b.secondary}}[A]}const l="Tab"},61969:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>u});function u(){return Boolean(o.g.desktopBridge)}},40301:(ce,C,o)=>{"use strict";var u="../../packages/studio-base/src/util/layout.ts";o.d(C,{$k:()=>F,A$:()=>je,CD:()=>N,IP:()=>Ee,VJ:()=>Q,_f:()=>U,bP:()=>pe,dr:()=>j,fG:()=>Ze,jQ:()=>ye,kY:()=>x,lD:()=>M,m2:()=>ae,nJ:()=>R,p1:()=>ue,p9:()=>I,rZ:()=>we,th:()=>fe,w$:()=>Ke,xS:()=>D});var g=o(49609),v=o(40099),l=o(4e4),A=o(28245),b=o(28219),E=o(8220),n=o(23503),S=o(2661),T=o(11701);const P=n.ZP.getLogger(u),D="foxglovePanelTitle";function R(L){const re=Math.round(Math.random()*1e10).toString(36);return`${L}!${re}`}function F(L){return L.split("!")[0]??""}function M(L){return F(L)===T.bm}function j(L){return L!=null&&"tabs"in L&&"activeTabIdx"in L}function I(L,K,re=[]){if(K===L)return re;if(K!=null&&(0,b.UY)(K)){const J=I(L,K.first,[...re,"first"]);if(J.length>0)return J;const Ie=I(L,K.second,[...re,"second"]);if(Ie.length>0)return Ie}return[]}function O(L){const K={};for(const re of L)K[re]=R(F(re));return K}function w(L,K){if(typeof L=="string")return K[L]??R(F(L));if(L==null)return;const re={};for(const J in L)typeof L[J]=="object"&&!Array.isArray(L[J])?re[J]=w(L[J],K):typeof L[J]=="string"&&K[L[J]]!=null?re[J]=K[L[J]]:re[J]=L[J];return re}function Y(L){if(typeof L=="string")return L;const K=[L.first,L.second].filter(Boolean).map(Y),[re,J]=K;return re==null&&J==null?"":re!=null&&J!=null?{...L,first:re,second:J}:{...L,first:re??J??"",second:""}}function se(L,K){return typeof L=="string"?K(L):{...L,first:se(L.first,K),second:se(L.second,K)}}function Ee(L,K,re){const J=se(L,Ie=>{if(typeof Ie=="string"&&M(Ie)&&!re.includes(Ie)){const be=Me(Ie,K),$=be.tabs[be.activeTabIdx]?.layout;if($!=null)return Ee($,K,re)}return Ie});return Y(J)}const ae=L=>Object.entries(L).reduce((K,[re,J])=>(M(re)&&J!=null&&J.tabs?.forEach(be=>{(0,b.fY)(be.layout??null).forEach(H=>K[H]=re)}),K),{}),Pe=L=>({id:K,config:re})=>re.tabs?{id:K,config:{...re,tabs:re.tabs.map(J=>({...J,layout:w(J.layout,L)}))}}:{id:K,config:re},ye=({id:L,config:K,relatedConfigs:re})=>{if(!re)return{configs:[{id:L,config:K}]};const J=pe([L],{[L]:K}),Ie=O(J);return{configs:[...(0,E.Z)(J,H=>{const xe=Ie[H],ee=re[H];if(!(xe==null||ee==null))return{id:xe,config:ee}}),{id:L,config:K}].map(Pe(Ie))}};function pe(L,K){const re=L.filter(M),J=[];return re.forEach(Ie=>{const be=K[Ie];be?.tabs&&be.tabs.forEach($=>{J.push($.layout,...pe((0,b.fY)($.layout??null),K))})}),g.Z(J,b.fY)}const x={activeTabIdx:0,tabs:[{title:"1",layout:void 0}]};function N(L,K){const re=(0,b.fY)(L),J=pe(re,K);return[...re,...J]}const W=L=>{if(!L)return!1;if(!Array.isArray(L.tabs)||typeof L.activeTabIdx!="number"){const K=new Error("A non-Tab panel config is being operated on as if it were a Tab panel.");return P.info(`Invalid Tab panel config: ${K.message}`,L),(0,S.e)(K),!1}if(L.activeTabIdx>=L.tabs.length){const K=new Error("A Tab panel has an activeTabIdx for a nonexistent tab.");return P.info(`Invalid Tab panel config: ${K.message}`,L),(0,S.e)(K),!1}return!0},ue=(L,K)=>{const re=K.tabs.map((J,Ie)=>Ie===K.activeTabIdx?{...J,layout:L}:J);return K.activeTabIdx===-1&&re.push({layout:L,title:"1"}),{...K,tabs:re,activeTabIdx:Math.max(0,K.activeTabIdx)}},Q=(L=[],K,re)=>{if(!W(K))return{configs:[]};const J=K.tabs[K.activeTabIdx]?.layout;let Ie;if(L.length===0)Ie=void 0;else{const $=(0,b.NO)(J??null,L);Ie=(0,b.Xw)(J,[$])}return{configs:[{id:re,config:ue(Ie,K)}]}},U=(L,K,re,J)=>{if(L==null)return[];const Ie=(0,b.PC)(L,re),be=J==="left"||J==="top",[$,H]=be?[K,Ie]:[Ie,K];return[{path:re,spec:{$set:{first:$,second:H,direction:J==="left"||J==="right"?"row":"column"}}}]},fe=(L,K,re,J,Ie)=>{const be=W(J)?J:x,$=be.tabs[be.activeTabIdx]?.layout,H=$!=null&&K&&re!=null?(0,b.Xw)($,U($,L,K,re)):L;return{configs:[{id:Ie,config:ue(H,be)}]}};function Me(L,K){const re=K[L];return re&&W(re)?re:x}const je=({source:L,target:K,savedProps:re})=>{const{tabs:J,activeTabIdx:Ie}=Me(L.panelId,re),be=L.tabIndex??J.length-1,$=K.tabIndex??J.length-1,H=[...J.slice(0,be),...J.slice(be+1)];H.splice($,0,J[be]);const xe=Ie===L.tabIndex,ee=$<=Ie&&be>=Ie,de=be<=Ie&&$>=Ie;let he=Ie;return xe?he=$:ee?he++:de&&he--,{configs:[{id:L.panelId,config:{tabs:H,activeTabIdx:he}}]}},we=({source:L,target:K,savedProps:re})=>{const J=Me(L.panelId,re),Ie=Me(K.panelId,re),be=L.tabIndex??J.tabs.length,$=K.tabIndex??Ie.tabs.length,H=[...J.tabs.slice(0,be),...J.tabs.slice(be+1)],xe=Ie.tabs.slice();xe.splice($,0,J.tabs[be]);const de=be<=J.activeTabIdx?Math.max(0,J.activeTabIdx-1):J.activeTabIdx,ie=$<=Ie.activeTabIdx?Ie.activeTabIdx+1:Ie.activeTabIdx;return{configs:[{id:L.panelId,config:{tabs:H,activeTabIdx:de}},{id:K.panelId,config:{tabs:xe,activeTabIdx:ie}}]}},Ze=(L,K)=>{const{originalId:re,newId:J,idsToRemove:Ie=[]}=L,be=(0,b.fY)(K);return v.Z(be,Ie).length===0?J:l.Z(A.Z([...Ie,re])).reduce(($,H)=>{if(be.includes(H)){if($===re)return J;if($==null||$===H)return}else return $;const xe=I(H,$),ee=H===re?{path:xe,spec:{$set:J}}:(0,b.NO)($,xe);return(0,b.Xw)($,[ee])},K)};function Ke(L,K,re,J){const Ie=[];return Object.keys(J).filter(M).forEach($=>{const{tabs:H,activeTabIdx:xe}=Me($,J),ee=H[xe]?.layout;if(ee!=null&&(0,b.fY)(ee).some(de=>re.includes(de))){const de=Ze({originalId:L,newId:K,idsToRemove:re},ee),he=ue(de,J[$]);Ie.push({id:$,config:he})}}),Ie}},23571:(ce,C,o)=>{"use strict";o.d(C,{Y:()=>u});function u(g){return g}},36537:(ce,C,o)=>{"use strict";o.d(C,{N:()=>u});function u(g){return g}},83352:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>l});var u=o(71747);const g=(0,u.Z)({insensitive:!0});function v(A){return A==null?g:(b,E)=>g(b[A],E[A])}const l=v},64578:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>u});function u(){const g=o.g.fetch;o.g.fetch=async(v,l)=>{const A=new TypeError(`Failed to fetch: ${v}`);return await g(v,l).catch(b=>{throw b.message==="Failed to fetch"?A:b})}}},24643:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>l});const u=/^\d+$/,g=/^(?!\.$)(\d*)\.(\d*)$/,v=1000n*365n*24n*60n*60n*BigInt(1e9);function l(A){const b=A.trim();if(u.test(b)){let n=BigInt(b)*BigInt(1e9);for(;n>v;)n/=1000n;return{sec:Number(n/BigInt(1e9)),nsec:Number(n%BigInt(1e9))}}const E=g.exec(b);if(E?.[1]!=null&&E[2]!=null)return{sec:Number(E[1]),nsec:Number(E[2].substr(0,9).padEnd(9,"0"))}}},63136:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>g});const g={nextTick:(v,...l)=>{queueMicrotask(()=>{v(...l)})},title:"browser",browser:!0,env:{},argv:[]}},42146:(ce,C,o)=>{"use strict";o.d(C,{X8:()=>E,ZP:()=>n,tm:()=>b});var u=o(2661),g=o(53542),v=o(77498);const l=(S,T,P,D)=>{if((0,v.KC)()){(D==="error"?console.error:D==="warn"?console.warn:console.info)("Web Worker has uninitialized sendNotification function; this means this error message cannot show up in the UI (so we show it here in the console instead).",S,T,P);return}console.error("Notification before error display is mounted",S,T,P)};let A=l;function b(S){if(A!==l)throw new Error("Tried to overwrite existing NotificationHandler");A=S}function E(){if(A===l)throw new Error("Tried to unset NotificationHandler but it was already the default");A=l}function n(S,T,P,D){P==="app"&&(D==="warn"||D==="error")&&(0,u.e)(new g.g(T,S)),A(S,T,P,D)}n.expectCalledDuringTest=()=>{throw new Error("Should be overriden in setupTestFramework.ts")}},67649:(ce,C,o)=>{"use strict";o.d(C,{Z:()=>u});function u(g,...v){Promise.resolve().then(()=>{g(...v)})}},27999:(ce,C,o)=>{"use strict";o.d(C,{AB:()=>A,D3:()=>l,Eo:()=>g,w0:()=>b});var u=o(23503);function g(n){return n.sec<0||n.nsec<0?(u.ZP.error("Times are not allowed to be negative"),"(invalid negative time)"):`${n.sec}.${n.nsec.toFixed().padStart(9,"0")}`}const v=20*365*24*60*60;function l(n){return n.sec>v}function A({sec:n,nsec:S}){return`${n}.${String.prototype.padStart.call(S,9,"0")}`}function b(n,S){return S==="headerStamp"?E(n.message):n.receiveTime}function E(n){if(n.header!=null){const S=n.header?.stamp;if(S!=null&&"sec"in S&&"nsec"in S)return S}else if(n.markers?.[0]?.header!=null){const S=n.markers[0]?.header.stamp;if(S!=null&&"sec"in S&&"nsec"in S)return S}}},77498:(ce,C,o)=>{"use strict";o.d(C,{KC:()=>u});const u=()=>typeof o.g.postMessage<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope,g=()=>typeof SharedWorkerGlobalScope<"u"&&self instanceof SharedWorkerGlobalScope,v=l=>{const A=typeof fetch<"u"&&fetch("data:test").then(()=>!0).catch(()=>!1);return async(...b)=>{if(await A)throw new Error("Content security policy too loose.");return l(...b)}}},80660:()=>{}}]);

//# sourceMappingURL=8955.7290aa7dad366d9ea4ac.js.map