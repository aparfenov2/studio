"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4933],{96133:(re,w,n)=>{n.d(w,{J:()=>t});function t(U,u){if(typeof U.value=="object")throw new Error("filterMatches only works on paths where global variables have been filled in");if(U.value==null)return!1;let A=u;for(const p of U.path)if(typeof A!="object"||A==null||(A=A[p],A==null))return!1;return A!=null&&A==U.value}},36922:(re,w,n)=>{n.d(w,{Iq:()=>m,wm:()=>ie});var t=n(76635),U=n.n(t),u=n(2784),A=n(8220),p=n(75845),K=n(75785),G=n(36423),J=n(79064),W=n(96133),x=n(60351),B=n(21337),S=n(1012);function m(N){const{topics:i,datatypes:s}=K.Ui(),{globalVariables:c}=(0,G.Z)(),d=(0,p.O4)(N),C=(0,u.useMemo)(()=>(0,A.Z)(d,o=>{const a=(0,S.ZP)(o);return a?[o,a]:void 0}),[d]),F=(0,u.useMemo)(()=>{const o={};for(const[a,r]of C)o[a]=k(r,c);return o},[c,C]),O=(0,p.vE)(F),j=(0,u.useMemo)(()=>(0,t.keyBy)(i,({name:o})=>o),[i]),l=(0,u.useMemo)(()=>{const o=new Set,a=[];for(const[r,T]of C){if(o.has(T.topicName))continue;o.add(T.topicName);const z=j[T.topicName];z&&a.push(z)}return a},[j,C]),P=(0,p.vE)(l),I=(0,u.useMemo)(()=>{const o=new Map;function a(r,T){if(T.includes(r))return;const z=s.get(r);if(z){o.set(r,z);for(const D of z.definitions)(D.isComplex===!0||(0,J.bV)(D.name)!=null)&&a(D.type,[...T,r])}}for(const{schemaName:r}of P.values())r!=null&&a(r,[]);return o},[s,P]),M=(0,p.vE)(I),b=(0,u.useMemo)(()=>(0,B.pb)(M),[M]),$=(0,u.useMemo)(()=>(0,J.Hh)(M),[M]);return(0,u.useCallback)((o,a)=>{if(!d.includes(o))throw new Error(`path (${o}) was not in the list of cached paths`);const r=O[o];return r?Q(a,r,j,b,$):void 0},[d,O,j,b,$])}function k(N,i){return{...N,messagePath:N.messagePath.map(s=>{if(s.type==="slice"){const c=typeof s.start=="object"?Number(i[s.start.variableName]):s.start,d=typeof s.end=="object"?Number(i[s.end.variableName]):s.end;return{...s,start:isNaN(c)?0:c,end:isNaN(d)?1/0:d}}else if(s.type==="filter"&&typeof s.value=="object"){let c;const d=i[s.value.variableName];return(typeof d=="number"||typeof d=="string")&&(c=d),{...s,value:c}}return s})}}function Q(N,i,s,c,d){const C=s[i.topicName];if(!C||N.topic!==i.topicName)return;for(const l of i.messagePath)if(l.type==="filter"){if(!(0,W.J)(l,N.message))return[]}else break;const F=[];function O(l,P,I,M){if(l==null||M==null)return;const b=i.messagePath[P],$=i.messagePath[P+1];if(b)if(b.type==="name"&&M.structureType==="message"){const o=M.nextByName[b.name];O(l[b.name],P+1,`${I}.${b.repr}`,o)}else if(b.type==="slice"&&M.structureType==="array"){const{start:o,end:a}=b;if(typeof o=="object"||typeof a=="object")throw new Error("getMessagePathDataItems only works on paths where global variables have been filled in");const r=o,T=a;if(typeof r!="number"||typeof T!="number")return;const z=l.length;for(let D=r;D<=Math.min(T,z-1);D++){const ne=D>=0?D:z+D,Y=l[ne];if(Y==null)continue;let H;if($&&$.type==="filter")H=`${I}[:]`;else if(typeof Y=="object"){const q=x.H.find(e=>e in Y);q!=null?H=`${I}[:]{${q}==${Y[q]}}`:H=`${I}[${D}]`}else H=`${I}[${D}]`;O(Y,P+1,H,M.next)}}else b.type==="filter"?(0,W.J)(b,l)&&O(l,P+1,`${I}{${b.repr}}`,M):console.warn(`Unknown pathItem.type ${b.type} for structureType: ${M.structureType}`);else{let o;const a=i.messagePath[P-1];if(a&&a.type==="name"){const r=a.name;o=d[M.datatype]?.[r]?.[l]}F.push({value:l,path:I,constantName:o})}}const j=C.schemaName==null?{structureType:"message",datatype:"",nextByName:{}}:c[C.schemaName];return j&&O(N.message,0,(0,S.dH)(i.topicName),j),F}function ie(N){const i=(0,p.O4)(N),s=m(i);return(0,u.useCallback)(c=>{const d={};for(const C of i){const F=(0,S.ZP)(C);if(!F){d[C]=[];continue}const O=c[F.topicName];if(!O)continue;const j=[];d[C]=j;for(const l of O){const P=s(C,l);P&&j.push({messageEvent:l,queriedData:P})}}return d},[i,s])}},44933:(re,w,n)=>{n.r(w),n.d(w,{default:()=>q});var t=n(52322),U=n(2784),u=n(72970),A=n(75785),p=n(29268),K=n(43684),G=n(1012),J=n(36922),W=n(75017),x=n(82044),B=n(76479),S=n(93812),m=n(77075),k=n(71963),Q=n(59169),ie=n(23468),N=n(31373),i=n(36673),s=n(24544),c=n(87037),d=n(41939),C=n(68434),F=n(29800),O=n(80078),j=n(73705),l=n(95412);function P(e){return e.replace(/\./g,"-")}var I=n(2784);const M=(0,u.ZL)()(e=>({objectCell:{fontStyle:"italic",cursor:"pointer"},iconButton:{marginTop:e.spacing(-.5),marginLeft:e.spacing(-.5),"&:hover":{backgroundColor:"transparent"}}}));function b({row:e,accessorPath:g,children:h}){const{classes:y}=M(),[V,E]=I.useState(!1),v=I.useCallback(()=>{E(R=>!R)},[]);return e.getIsExpanded()||V?(0,t.jsxs)("div",{children:[V&&(0,t.jsx)(c.Z,{size:"small",onClick:v,className:y.iconButton,children:(0,t.jsx)(Q.Z,{fontSize:"small"})}),h]}):(0,t.jsx)("span",{className:y.objectCell,"data-testid":`expand-cell-${P(g)}-${e.index}`,onClick:v,children:"Object"})}var $=n(2784);function o(e){return e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Uint32Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}const a=(0,u.ZL)()((e,g,h)=>({table:{border:"none",width:"100%",borderCollapse:"collapse",borderSpacing:0},tableRow:{svg:{opacity:.6},"&:nth-of-type(even)":{backgroundColor:e.palette.action.hover},"&:hover":{backgroundColor:e.palette.action.focus,[`.${h.tableData}`]:{backgroundColor:e.palette.action.hover,cursor:"pointer"},svg:{opacity:.8}},[`.${h.tableHeader}:first-of-type`]:{paddingTop:e.spacing(.5),paddingBottom:e.spacing(.5)}},tableData:{border:`1px solid ${e.palette.divider}`,lineHeight:"1.3em",padding:`${e.spacing(.5)} !important`,verticalAlign:"top"},tableHeader:{color:e.palette.text.primary,verticalAlign:"top",border:`1px solid ${e.palette.divider}`,lineHeight:"1.3em",borderLeftColor:"transparent",borderRightColor:"transparent",padding:e.spacing(.5),fontWeight:"bold !important",cursor:"pointer",width:"auto",textAlign:"left","&#expander":{width:28}},sortAsc:{borderBottomColor:e.palette.primary.main},sortDesc:{borderTopColor:e.palette.primary.main},iconButton:{margin:e.spacing(-.5),"&:hover":{backgroundColor:"transparent"}},textContent:{maxWidth:"75vw",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}})),r=(0,j.Cl)();function T(e,g,h){const y=e.toJSON?.()??e;if(o(y))return[r.accessor(E=>E,{id:"typedArray",header:"",cell:E=>E.getValue()})];const V=Object.keys(y).map(E=>{const v=g.length!==0?`${g}.${E}`:E;return r.accessor(E,{header:E,id:v,cell:R=>{const L=R.getValue(),X=R.row;return Array.isArray(L)&&typeof L[0]!="object"?JSON.stringify(L):typeof L=="object"&&L!=null?(0,t.jsx)(b,{row:X,accessorPath:v,children:(0,t.jsx)(D,{value:L,accessorPath:g})}):(0,t.jsx)(z,{value:`${L}`})}})});if(g.length===0){const E=r.display({id:"expander",header:"",cell:({row:v})=>(0,t.jsx)(c.Z,{className:h,size:"small","data-testid":`expand-row-${v.index}`,onClick:()=>{v.toggleExpanded()},children:v.getIsExpanded()?(0,t.jsx)(Q.Z,{fontSize:"small"}):(0,t.jsx)(k.Z,{fontSize:"small"})})});V.unshift(E)}return V}function z(e){const{classes:g}=a();return(0,t.jsx)("div",{className:g.textContent,children:e.value})}function D({value:e,accessorPath:g}){const h=g.length>0,{classes:y,cx:V}=a(),E=$.useMemo(()=>{if(e==null||typeof e!="object"||Array.isArray(e)&&typeof e[0]!="object"&&e[0]!=null)return[];const Z=Array.isArray(e)?e[0]??{}:e;return T(Z,g,y.iconButton)},[g,y.iconButton,e]),[{pageIndex:v,pageSize:R},L]=$.useState({pageIndex:0,pageSize:10}),X=$.useMemo(()=>({pageIndex:v,pageSize:R}),[v,R]),_=$.useMemo(()=>Array.isArray(e)?e:o(e)?Array.from(e):[e],[e]),[oe,se]=$.useState({}),f=(0,l.b7)({autoResetExpanded:!1,columns:E,data:_.slice(v*R,(v+1)*R),getCoreRowModel:(0,j.sC)(),getExpandedRowModel:(0,j.rV)(),getSortedRowModel:(0,j.tj)(),initialState:{pagination:X},onExpandedChange:se,manualPagination:!0,pageCount:Math.ceil(_.length/X.pageSize),onPaginationChange:L,state:{expanded:oe,pagination:X}});return typeof e!="object"||e==null||!h&&Array.isArray(e)&&typeof e[0]!="object"?(0,t.jsx)(p.Z,{children:"Cannot render primitive values in a table. Try using the Raw Messages panel instead."}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("table",{className:y.table,children:[(0,t.jsx)("thead",{children:f.getHeaderGroups().map((Z,ee)=>(0,t.jsx)("tr",{className:y.tableRow,children:Z.headers.map(ae=>{const te=ae.column;return(0,t.jsx)("th",{className:V(y.tableHeader,{[y.sortAsc]:te.getIsSorted()==="asc",[y.sortDesc]:te.getIsSorted()==="desc"}),id:te.id,onClick:ae.column.getToggleSortingHandler(),"data-testid":`column-header-${P(te.id)}`,children:(0,l.ie)(ae.column.columnDef.header,ae)},te.id)})},ee))}),(0,t.jsx)("tbody",{children:f.getRowModel().rows.map(Z=>(0,t.jsx)("tr",{className:y.tableRow,children:Z.getVisibleCells().map(ee=>(0,t.jsx)("td",{className:y.tableData,children:(0,l.ie)(ee.column.columnDef.cell,ee.getContext())},ee.id))},Z.id))})]}),!h&&(0,t.jsx)(d.Z,{maxWidth:"xs",disableGutters:!0,children:(0,t.jsxs)(S.Z,{direction:"row",flexWrap:"wrap",gap:1,paddingX:.5,paddingTop:.5,alignItems:"center",children:[(0,t.jsx)(c.Z,{onClick:()=>{f.setPageIndex(0)},disabled:!f.getCanPreviousPage(),children:(0,t.jsx)(i.Z,{fontSize:"small"})}),(0,t.jsx)(c.Z,{onClick:()=>{f.previousPage()},disabled:!f.getCanPreviousPage(),children:(0,t.jsx)(ie.Z,{fontSize:"small"})}),(0,t.jsxs)(C.Z,{flex:"auto",variant:"inherit",align:"center",noWrap:!0,children:["Page"," ",(0,t.jsxs)("strong",{children:[f.getState().pagination.pageIndex+1," of ",f.getPageOptions().length]})]}),(0,t.jsx)(c.Z,{onClick:()=>{f.nextPage()},disabled:!f.getCanNextPage(),children:(0,t.jsx)(N.Z,{fontSize:"small"})}),(0,t.jsx)(c.Z,{onClick:()=>{f.setPageIndex(f.getPageCount()-1)},disabled:!f.getCanNextPage(),children:(0,t.jsx)(s.Z,{fontSize:"small"})}),(0,t.jsx)(F.Z,{value:R,size:"small",onChange:Z=>{f.setPageSize(Number(Z.target.value))},MenuProps:{MenuListProps:{dense:!0}},children:[10,20,30,40,50].map(Z=>(0,t.jsx)(O.Z,{value:Z,children:`Show ${Z}`},Z))})]})})]})}var ne=n(2784);const Y=(0,u.ZL)()({inputWrapper:{width:"100%",lineHeight:"20px"},monospace:{fontFamily:m.R.MONOSPACE}});function H({config:e,saveConfig:g}){const{topicPath:h}=e,{classes:y}=Y(),V=ne.useCallback(f=>{g({topicPath:f})},[g]),v=ne.useMemo(()=>(0,G.ZP)(h),[h])?.topicName??"",R=(0,A.V7)({topics:[v],historySize:1})[v],L=(0,J.Iq)([h]),X=R?.[0],_=X?L(h,X)??[]:[],oe=_[0],{setMessagePathDropConfig:se}=(0,x.R)();return(0,U.useEffect)(()=>{se({getDropStatus(f){return{canDrop:!0,effect:"replace"}},handleDrop(f){g({topicPath:f.path})}})},[se,g]),(0,t.jsxs)(S.Z,{flex:"auto",overflow:"hidden",position:"relative",children:[(0,t.jsx)(B.Z,{children:(0,t.jsx)("div",{className:y.inputWrapper,children:(0,t.jsx)(K.ZP,{index:0,path:h,onChange:V,inputStyle:{height:20}})})}),h.length===0&&(0,t.jsx)(p.Z,{children:"No topic selected"}),h.length!==0&&_.length===0&&(0,t.jsx)(p.Z,{children:"Waiting for next message"}),h.length!==0&&oe&&(0,t.jsx)(S.Z,{overflow:"auto",className:y.monospace,children:(0,t.jsx)(D,{value:oe.value,accessorPath:""})})]})}H.panelType="Table",H.defaultConfig={topicPath:""};const q=(0,W.Z)(H)},79064:(re,w,n)=>{n.d(w,{Hh:()=>A,bV:()=>u});const t=p=>{const K={};for(const[G,J]of p){const W=K[G]={};for(const x of J.definitions)x.isConstant===!0&&x.value!=null&&typeof x.value!="boolean"&&(W[x.value.toString()]!=null?W[x.value.toString()]="<multiple constants match>":W[x.value.toString()]=x.name)}return K},U=/(.*)__(foxglove|webviz)_enum$/;function u(p){return U.exec(p)?.[1]}const A=p=>{const K=t(p),G={};for(const[J,W]of p){const x={};let B={},S;for(const m of W.definitions){if(S!=null&&m.type!==S&&(B={},S=void 0),m.isConstant===!0&&m.value!=null&&typeof m.value!="boolean"){S=m.type,B[m.value.toString()]!=null?B[m.value.toString()]="<multiple constants match>":B[m.value.toString()]=m.name;continue}const k=u(m.name);if(k!=null){const Q=K[m.type];Q&&(x[k]=Q);continue}x[m.name]||(Object.keys(B).length>0&&(x[m.name]=B),B={})}Object.keys(x).length>0&&(G[J]=x)}return G}}}]);

//# sourceMappingURL=4933.e1ffb8977ee93643c6d3.js.map