"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4446],{14571:(z,f,s)=>{s.d(f,{o:()=>v});var e=s(52322),d=s(2784);class v extends d.Component{state={hadError:!1};componentDidCatch(E){this.setState({hadError:!0}),this.props.onError(E)}render(){return this.state.hadError?(0,e.jsx)(e.Fragment,{}):this.props.children}}},24446:(z,f,s)=>{s.r(f),s.d(f,{default:()=>he});var e=s(52322),d=s(2784),v=s(28316),O=s(75845),E=s(14571),J=s(75017),$=s(14123),H=s(38642),K=s(35936),U=s(48907),Y=s(52691),Q=s(60189),h=s(38677),n=s(33853),X=s(48982),w=s(30531),I=s(2940),F=s(31692),x=s(75186),k=s(48845),P=s(12197),C=s(11188),q=s(51077),_=s(12984),y=s(83422),ee=s(96437),B=s(41574),te=s(76635),se=s(38215),R=s(29268),M=s(93812),ne=s(88724),u=s(2784);function re(t,r){return{general:{label:"General",fields:{topic:{label:"Topic",input:"autocomplete",value:t.topic,items:r.map(l=>l.name)}},children:{}}}}function ae({text:t,open:r,setOpen:a}){const l=()=>{a(!1)};return(0,e.jsxs)(H.Z,{open:r,onClose:l,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,e.jsx)(K.Z,{id:"alert-dialog-title",children:"Backend Message"}),(0,e.jsx)(U.Z,{children:(0,e.jsx)(Y.Z,{id:"alert-dialog-description",children:t})}),(0,e.jsx)(Q.Z,{children:(0,e.jsx)(h.Z,{onClick:l,autoFocus:!0,children:"OK"})})]})}function ie({message:t,sendMsg:r}){const[a,l]=u.useState("manual");return(0,d.useEffect)(()=>{if(t){let o=JSON.parse(t?.message.data);o.state&&l(o.state?.op_mode_state)}},[t]),(0,e.jsxs)(n.ZP,{container:!0,maxWidth:"sm",alignItems:"center",padding:2,children:[(0,e.jsx)(n.ZP,{item:!0,xs:8,children:(0,e.jsx)(X.Z,{children:(0,e.jsxs)(w.Z,{row:!0,"aria-labelledby":"demo-controlled-radio-buttons-group",name:"controlled-radio-buttons-group",value:a,children:[(0,e.jsx)(I.Z,{disabled:!0,value:"manual",control:(0,e.jsx)(F.Z,{}),label:"Manual"}),(0,e.jsx)(I.Z,{disabled:!0,value:"auto",control:(0,e.jsx)(F.Z,{}),label:"Automatic"})]})})}),(0,e.jsx)(n.ZP,{item:!0,xs:4,children:(0,e.jsx)(h.Z,{sx:{width:1},onClick:()=>{r({cmd:"switch_op_mode",displayed_value:a})},children:"Switch"})})]})}function le(t){const{message:r,sendMsg:a}=t,[l,o]=u.useState(0),[j,p]=u.useState(0),[g,m]=u.useState(0);return(0,d.useEffect)(()=>{if(r){let c=JSON.parse(r?.message.data);c.state&&(o(c.state.progress),p(c.state.curr_speed))}},[r]),(0,e.jsxs)(n.ZP,{container:!0,maxWidth:"sm",alignItems:"center",padding:2,children:[(0,e.jsx)(n.ZP,{item:!0,xs:4,children:(0,e.jsx)(x.Z,{children:"Operation Mode:"})}),(0,e.jsx)(n.ZP,{item:!0,xs:8,children:(0,e.jsx)(ie,{...t})}),(0,e.jsx)(n.ZP,{item:!0,xs:4,children:(0,e.jsx)(x.Z,{children:"Path Ops:"})}),(0,e.jsx)(n.ZP,{item:!0,xs:8,children:(0,e.jsxs)(M.Z,{direction:"row",gap:2,children:[(0,e.jsx)(h.Z,{sx:{width:1},onClick:()=>{a({cmd:"add_poly"})},children:"Add Poly"}),(0,e.jsx)(h.Z,{sx:{width:1},onClick:()=>{a({cmd:"build_path"})},children:"Build Path"})]})}),(0,e.jsx)(n.ZP,{item:!0,xs:4,children:(0,e.jsx)(x.Z,{children:"Robot Control:"})}),(0,e.jsx)(n.ZP,{item:!0,xs:8,children:(0,e.jsxs)(M.Z,{direction:"row",gap:2,children:[(0,e.jsx)(h.Z,{sx:{width:1},onClick:()=>{a({cmd:"start"})},children:"Start"}),(0,e.jsx)(h.Z,{sx:{width:1},onClick:()=>{a({cmd:"stop"})},children:"Stop"}),(0,e.jsx)(h.Z,{sx:{width:1},onClick:()=>{a({cmd:"reset"})},children:"Reset"})]})}),(0,e.jsx)(n.ZP,{item:!0,xs:4,children:(0,e.jsx)(x.Z,{children:"Progress:"})}),(0,e.jsx)(n.ZP,{item:!0,xs:8,children:(0,e.jsx)(k.Z,{variant:"determinate",value:l})}),(0,e.jsx)(n.ZP,{item:!0,xs:4,children:(0,e.jsx)(x.Z,{children:"Current Speed:"})}),(0,e.jsx)(n.ZP,{item:!0,xs:5,children:(0,e.jsx)(P.Z,{value:j,disabled:!0,InputProps:{endAdornment:(0,e.jsx)(C.Z,{position:"end",children:"km/h"})}})}),(0,e.jsx)(n.ZP,{item:!0,xs:4,children:(0,e.jsx)(x.Z,{children:"Desired Speed:"})}),(0,e.jsx)(n.ZP,{item:!0,xs:5,children:(0,e.jsx)(P.Z,{defaultValue:"5.0",InputProps:{endAdornment:(0,e.jsx)(C.Z,{position:"end",children:"km/h"})},onChange:c=>{let S=parseFloat(c.target.value);isNaN(S)||m(S)}})}),(0,e.jsx)(n.ZP,{item:!0,xs:3,children:(0,e.jsx)(h.Z,{sx:{width:1},onClick:()=>{a({cmd:"set_desired_speed",desired_speed:g})},children:"Apply"})})]})}function de({message:t,sendMsg:r}){const[a,l]=u.useState(0),[o,j]=u.useState(0),[p,g]=u.useState(!0);return(0,e.jsxs)(n.ZP,{container:!0,maxWidth:"sm",alignItems:"center",padding:2,children:[(0,e.jsx)(n.ZP,{item:!0,xs:4,children:(0,e.jsx)(x.Z,{children:"Step Size:"})}),(0,e.jsx)(n.ZP,{item:!0,xs:8,children:(0,e.jsx)(P.Z,{defaultValue:"0.5",InputProps:{endAdornment:(0,e.jsx)(C.Z,{position:"end",children:"m"})},onChange:m=>{let c=parseFloat(m.target.value);isNaN(c)||l(c)}})}),(0,e.jsx)(n.ZP,{item:!0,xs:4,children:(0,e.jsx)(x.Z,{children:"Angle:"})}),(0,e.jsx)(n.ZP,{item:!0,xs:8,children:(0,e.jsx)(P.Z,{disabled:!0,value:o,InputProps:{endAdornment:(0,e.jsx)(C.Z,{position:"end",children:"grad"})}})}),(0,e.jsx)(n.ZP,{item:!0,xs:4}),(0,e.jsx)(n.ZP,{item:!0,xs:8,children:(0,e.jsx)(q.ZP,{min:-90,max:90,step:1,defaultValue:30,onChange:(m,c)=>{j(c)}})}),(0,e.jsx)(n.ZP,{item:!0,xs:4,children:(0,e.jsx)(x.Z,{children:"Auto Angle"})}),(0,e.jsx)(n.ZP,{item:!0,xs:8,children:(0,e.jsx)(_.Z,{defaultChecked:!0,onChange:m=>{g(m.target.checked)}})}),(0,e.jsx)(n.ZP,{item:!0,xs:12,children:(0,e.jsx)(h.Z,{sx:{width:1},onClick:()=>{r({cmd:"set_pathgen_props",step_size:a,angle:o,auto_angle:p})},children:"Apply"})})]})}function N(t){const{children:r,value:a,index:l,...o}=t;return(0,e.jsx)("div",{role:"tabpanel",hidden:a!==l,id:`simple-tabpanel-${l}`,"aria-labelledby":`simple-tab-${l}`,...o,children:a===l&&(0,e.jsx)(y.Z,{sx:{p:3},children:r})})}function G(t){return{id:`simple-tab-${t}`,"aria-controls":`simple-tabpanel-${t}`}}function oe(t){const[r,a]=u.useState(0),l=(o,j)=>{a(j)};return(0,e.jsxs)(y.Z,{sx:{width:"100%"},children:[(0,e.jsx)(y.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,e.jsxs)(ee.Z,{value:r,onChange:l,"aria-label":"basic tabs example",children:[(0,e.jsx)(B.Z,{label:"General",...G(0)}),(0,e.jsx)(B.Z,{label:"PathGen",...G(1)})]})}),(0,e.jsx)(N,{value:r,index:0,children:(0,e.jsx)(le,{...t})}),(0,e.jsx)(N,{value:r,index:1,children:(0,e.jsx)(de,{...t})})]})}function ce({context:t}){const{saveState:r}=t,[a,l]=(0,d.useState)([]),[o,j]=(0,d.useState)(()=>{const i=t.initialState,{topic:Z}=i;return{topic:Z}}),p=(0,d.useCallback)(i=>{i.action==="update"&&j(Z=>{const W={...Z};return(0,te.set)(W,i.payload.path.slice(1),i.payload.value),W})},[]),[g,m]=(0,d.useState)(()=>()=>{}),[c,S]=(0,d.useState)("light"),[A,xe]=(0,d.useState)();(0,d.useLayoutEffect)(()=>{t.watch("topics"),t.watch("colorScheme"),t.watch("currentFrame"),t.onRender=(i,Z)=>{l(i.topics??[]),m(()=>Z),i.colorScheme&&S(i.colorScheme),i.currentFrame&&i.currentFrame.length>0&&xe(i.currentFrame[i.currentFrame.length-1])}},[t]),(0,d.useEffect)(()=>{const i=re(o,a);t.updatePanelSettingsEditor({actionHandler:p,nodes:i}),r(o)},[o,t,r,p,a]);const T="/ui_cmd";(0,d.useLayoutEffect)(()=>(t.advertise?.(T,"std_msgs/String",{datatypes:new Map([["std_msgs/String",se.ros1["std_msgs/String"]]])}),()=>{t.unadvertise?.(T)}),[t]),(0,d.useEffect)(()=>(t.subscribe(["/ui_updates"]),()=>{t.unsubscribeAll()}),[t]),(0,d.useLayoutEffect)(()=>{g()},[g]);const D=t.publish!=null,L=!0;function me(i){D&&L&&t.publish?.(T,{data:JSON.stringify(i)})}const[je,V]=u.useState(!1),[pe,ge]=u.useState("");return(0,d.useEffect)(()=>{if(A){let i=JSON.parse(A?.message.data);i.error&&(ge(i.error),V(!0))}},[A]),(0,e.jsx)(ne.Z,{isDark:c==="dark",children:(0,e.jsxs)(M.Z,{fullHeight:!0,justifyContent:"top",alignItems:"top",style:{padding:"min(5%, 8px)",textAlign:"center"},children:[!D&&(0,e.jsx)(R.Z,{children:"Please connect to a datasource that supports publishing in order to use this panel"}),D&&!L&&(0,e.jsx)(R.Z,{children:"Please select a publish topic in the panel settings"}),(0,e.jsx)(oe,{message:A,sendMsg:me}),(0,e.jsx)(ae,{open:je,setOpen:V,text:pe})]})})}function ue(t,r){return v.render((0,e.jsx)(d.StrictMode,{children:(0,e.jsx)(E.o,{onError:t,children:(0,e.jsx)(ce,{context:r})})}),r.panelElement),()=>{v.unmountComponentAtNode(r.panelElement)}}function b(t){const r=(0,O.iY)(),a=(0,d.useMemo)(()=>ue.bind(void 0,r),[r]);return(0,e.jsx)($._,{config:t.config,saveConfig:t.saveConfig,initPanel:a,highestSupportedConfigVersion:1})}b.panelType="Mower",b.defaultConfig={};const he=(0,J.Z)(b)}}]);

//# sourceMappingURL=4446.dd1f76e25100c6e10ffa.js.map