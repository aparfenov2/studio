"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2455],{42455:(Ve,te,o)=>{o.r(te),o.d(te,{default:()=>fn});var t=o(52322),re=o(47746),W=o(68434),Me=o(2940),ue=o(41518),w=o(47786),le=o(82228),ne=o(65741),pe=o(60012),he=o(90772),u=o(2784),Ze=o(30398),ge=o(30650),L=o(72970),B=o(75785),S=o(29268),oe=o(93455),se=o(27803),Je=o(84803);function Oe(){const[e]=(0,se.b)(oe.o.TIMEZONE);return(0,u.useCallback)((s,n,c,p)=>(0,Je.D)(s,n,c,p,[],e),[e])}var K=o(21337),me=o(1012),v=o(4750),C=o(36922);function M(e,s){const{historySize:n=1}=s??{},c=(0,u.useMemo)(()=>{const r=(0,v.V)(e,"partial");return r?[r]:[]},[e]),p=(0,C.Iq)([e]),d=(0,u.useCallback)((r,l)=>{if(l.length===0)return r;const f=[];for(let P=l.length-1;P>=0&&f.length<n;--P){const X=l[P],k=p(e,X);k&&k.length>0&&f.push({messageEvent:X,queriedData:k})}const h=f.reverse();return f.length===n?{matches:h,messageEvents:l,path:e}:{matches:r.matches.concat(h).slice(-n),messageEvents:l,path:e}},[p,n,e]),i=(0,u.useCallback)(r=>{if(!r)return{matches:[],messageEvents:[],path:e};const l=[];for(const f of r.messageEvents){const h=p(e,f);h&&h.length>0&&l.push({messageEvent:f,queriedData:h})}return l.length>0||e!==r.path?{matches:l.slice(-n),messageEvents:r.messageEvents,path:e}:r},[p,n,e]);return(0,B.CC)({topics:c,addMessages:d,restore:i}).matches}var H=o(75017),q=o(82044),$=o(93812),ye=o(42861),xe=o(56317),Ae=o(26029),Ne=o(6377),Te=o(87037),mt=o(29800),Ke=o(80078),Qe=o(43684),yt=o(76479),O;(function(e){e.Collapsed="c",e.Expanded="e"})(O||(O={}));const Q={CUSTOM_METHOD:"custom",PREV_MSG_METHOD:"previous message",FONT_SIZE_OPTIONS:[8,9,10,11,12,14,16,18,24,30,36,48,60,72]};var xt=o(2784);const Tt=(0,L.ZL)()(e=>({iconButton:{"&.MuiIconButton-root":{padding:e.spacing(.25)}}}));function vt(e){const{canExpandAll:s,diffEnabled:n,diffMethod:c,diffTopicPath:p,onDiffTopicPathChange:d,onToggleDiff:i,onToggleExpandAll:a,onTopicPathChange:r,saveConfig:l,topic:f,topicPath:h}=e,{classes:j}=Tt();return(0,t.jsxs)(yt.Z,{children:[(0,t.jsx)(Te.Z,{className:j.iconButton,title:"Toggle diff",onClick:i,color:n?"default":"inherit",size:"small",children:n?(0,t.jsx)(ye.Z,{fontSize:"small"}):(0,t.jsx)(xe.Z,{fontSize:"small"})}),(0,t.jsx)(Te.Z,{className:j.iconButton,title:s?"Expand all":"Collapse all",onClick:a,"data-testid":"expand-all",size:"small",children:s?(0,t.jsx)(Ne.Z,{fontSize:"small"}):(0,t.jsx)(Ae.Z,{fontSize:"small"})}),(0,t.jsxs)($.Z,{fullWidth:!0,paddingLeft:.25,children:[(0,t.jsx)(Qe.ZP,{index:0,path:h,onChange:r,inputStyle:{height:20}}),n&&(0,t.jsxs)($.Z,{direction:"row",flex:"auto",children:[(0,t.jsxs)(mt.Z,{variant:"filled",size:"small",title:"Diff method",value:c,MenuProps:{MenuListProps:{dense:!0}},onChange:P=>{l({diffMethod:P.target.value})},children:[(0,t.jsx)(Ke.Z,{value:Q.PREV_MSG_METHOD,children:Q.PREV_MSG_METHOD}),(0,t.jsx)(Ke.Z,{value:Q.CUSTOM_METHOD,children:"custom"})]}),c===Q.CUSTOM_METHOD&&(0,t.jsx)(Qe.ZP,{index:1,path:p,onChange:d,inputStyle:{height:"100%"},...f?{prioritizedDatatype:f.schemaName}:{}})]})]})]})}const bt=xt.memo(vt);var Xe=o(49164),Dt=o(31186),Le=o(4e4),$e=o(7279),Ye=o(60351);const we="->",T={ADDED:{labelText:"STUDIO_DIFF___ADDED",color:"#404047",backgroundColor:"#daffe7",invertedBackgroundColor:"#182924",indicator:"+"},DELETED:{labelText:"STUDIO_DIFF___DELETED",color:"#404047",backgroundColor:"#ffdee3",invertedBackgroundColor:"#3d2327",indicator:"-"},CHANGED:{labelText:"STUDIO_DIFF___CHANGED",color:"#eba800"},ID:{labelText:"STUDIO_DIFF___ID"}},V=Xe.Z(Object.values(T),"labelText");function ve({before:e,after:s,idLabel:n,showFullMessageForDiff:c=!1}){if(Array.isArray(e)&&Array.isArray(s)){let i;const a=e.concat(s);if(typeof a[0]=="object"&&a[0]!=null){let r={};a[0].id!=null&&(r.id={before:[],after:[]});for(const l in a[0])(0,Ye.Q)(l)&&(r[l]={before:[],after:[]});Dt.Z(a,l=>typeof l=="object"&&l)||(r={});for(const[l,f]of Object.entries(r))for(const h of e)h[l]!=null&&f.before.push(h[l]);for(const[l,f]of Object.entries(r))for(const h of s)h[l]!=null&&f.after.push(h[l]);for(const[l,{before:f,after:h}]of Object.entries(r))if(Le.Z(f).length===e.length&&Le.Z(h).length===s.length){i=l;break}}if(i!=null){const r=Xe.Z(s,i),l=[];for(const f of e){if(f==null||typeof f!="object")throw new Error("beforeItem is invalid; should have checked this earlier");const h=f[i],j=ve({before:f,after:r[h],idLabel:i,showFullMessageForDiff:c});if(delete r[h],!$e.Z(j)){const P=Object.keys(j).length===1&&Object.keys(j)[0]===T.DELETED.labelText;l.push(P?j:{[T.ID.labelText]:{[i]:h},...j})}}for(const f of Object.values(r)){const h=ve({before:void 0,after:f,idLabel:i,showFullMessageForDiff:c});$e.Z(h)||l.push(h)}return l}}if(typeof e=="object"&&typeof s=="object"&&e&&s){const i={},a=Object.keys(e).concat(Object.keys(s));for(const r of Le.Z(a)){const l=ve({before:e[r],after:s[r],idLabel:void 0,showFullMessageForDiff:c});$e.Z(l)?c&&(i[r]=e[r]):i[r]=l}return i}if(e===s)return;if(e==null){const i=Array.isArray(s)||typeof s!="object";if(!n||i)return{[T.ADDED.labelText]:s};const a={[T.ID.labelText]:{[n]:{...s}[n]}};return{[T.ADDED.labelText]:{...a,...s}}}if(s==null){const i=Array.isArray(e)||typeof e!="object";if(!n||i)return{[T.DELETED.labelText]:e};const a={[T.ID.labelText]:{[n]:{...e}[n]}};return{[T.DELETED.labelText]:{...a,...e}}}const p=typeof e=="bigint"?e.toString():JSON.stringify(e),d=typeof s=="bigint"?s.toString():JSON.stringify(s);return{[T.CHANGED.labelText]:`${p} ${we} ${d}`}}var St=o(39367),Ct=o(72659),jt=o(11701),Et=o(77075);const Pt=(0,L.ZL)()(e=>({root:{padding:e.spacing(0,.5),textDecoration:"inherit",whiteSpace:"pre-line"}}));function ze(e){const{children:s,style:n}=e,{classes:c}=Pt();return(0,t.jsx)("span",{className:c.root,style:n,children:s})}var It=o(43192),Mt=o(38215),Zt=o(87472);const qe=20,_e=new Set(Object.keys(Mt.ros1).map(e=>e.split("/")[0]));_e.add("turtlesim");function Ot(e){return Boolean(e!=null&&typeof e=="object"&&ArrayBuffer.isView(e)&&!(e instanceof DataView))}function et(e){return e===O.Expanded?O.Collapsed:O.Expanded}function At(e,s,n){if(e==="all"||e==="none"){const d=e==="all"?O.Expanded:O.Collapsed,i={};for(const a of s)d===O.Collapsed&&a.endsWith(n)||(i[a]=a===n?et(d):d);return i}const c=e[n],p=c!=null?et(c):O.Collapsed;return{...e,[n]:p}}function Nt(e,s){const n=new Set,c=(p,d)=>{if(d!=null&&!(typeof d!="object"&&typeof d!="function")&&!(Array.isArray(d)&&d.length>s)&&!Ot(d)){p.length>0&&n.add(p.join("~"));for(const i of Object.getOwnPropertyNames(d)){const a=[i,...p],r=d[i];c(a,r)}}};return c([],e),n}function tt(e,s){for(const n in e)n===T.ADDED.labelText||n===T.CHANGED.labelText||n===T.DELETED.labelText?s[n]++:typeof e[n]=="object"&&e[n]!=null&&tt(e[n],s);return s}const be=new Map;for(const e of Object.values(Zt.foxgloveMessageSchemas)){const s=`https://foxglove.dev/docs/studio/messages/${It.Z(e.name)}`;be.set(`foxglove_msgs/${e.name}`,s),be.set(`foxglove_msgs/msg/${e.name}`,s),be.set(`foxglove.${e.name}`,s)}function Lt(e){const s=e.split(/[/.]/),n=pe.Z(s),c=le.Z(s);if(n!=null&&_e.has(n))return`https://docs.ros.org/api/${n}/html/msg/${c}.html`;const p=be.get(e);if(p!=null)return p}const $t=(0,L.ZL)()(e=>({diff:{float:"right",display:"flex",alignItems:"center",gap:e.spacing(.75),marginRight:e.spacing(.75)},badge:{display:"inline-flex",alignItems:"center",gap:e.spacing(.25),padding:e.spacing(0,.75),borderRadius:e.shape.borderRadius,backgroundColor:e.palette.background.paper},changeIndicator:{display:"inline-block",width:e.spacing(.75),height:e.spacing(.75),borderRadius:"50%",backgroundColor:e.palette.warning.main}}));function zt({data:e,itemType:s}){const{classes:n}=$t(),{ADDED:c,DELETED:p,CHANGED:d,ID:i}=T,a=e[i.labelText],r=a?Object.keys(a).map(f=>`${f}: ${a[f]}`).join(", "):void 0,l=tt(e,{[c.labelText]:0,[d.labelText]:0,[p.labelText]:0});return(0,t.jsxs)(t.Fragment,{children:[a&&(0,t.jsxs)(t.Fragment,{children:[s," ",r]}),(0,t.jsxs)("div",{className:n.diff,children:[(l[c.labelText]!==0||l[p.labelText]!==0)&&(0,t.jsxs)("div",{className:n.badge,children:[l[c.labelText]!==0&&(0,t.jsx)(W.Z,{variant:"caption",color:"success.main",children:`${T.ADDED.indicator}${l[c.labelText]}`}),l[p.labelText]!==0&&(0,t.jsx)(W.Z,{variant:"caption",color:"error.main",children:`${T.DELETED.indicator}${l[p.labelText]}`})]}),l[d.labelText]!==0&&(0,t.jsx)("div",{className:n.changeIndicator})]})]})}var Re=o(20379);const nt=512;function De({itemLabel:e}){const s=e.length>=nt,[n,c]=(0,u.useState)(!s),p=(0,u.useCallback)(()=>{c(!0)},[]),d=n?e:e.slice(0,nt);return s?(0,t.jsx)(Re.Z,{title:n?"":"Text was truncated, click to see all",placement:"top",children:(0,t.jsx)("span",{onClick:p,style:{cursor:n?"inherit":"pointer"},children:`${d}${n?"":"..."}`})}):(0,t.jsx)("span",{children:e})}var Rt=o(63249),ot=o(16003),Fe=o(90546),st=o(27999),Ft=o(49302);function Se(e,s){if(s!=null)return typeof s=="bigint"?s.toString():(0,Ft.f)(s)?Array.from(s):s}const Bt=(0,L.ZL)()(e=>({button:{padding:e.spacing(.125),".MuiSvgIcon-root":{fontSize:`${e.typography.pxToRem(16)} !important`},".MuiButton-startIcon":{marginRight:e.spacing(.5)},"&:hover":{backgroundColor:"transparent"}}}));function Ht({data:e,diffData:s,diff:n,datatype:c,message:p,diffMessage:d}){const{classes:i}=Bt(),a=(0,ot.Z)(e),r=(0,ot.Z)(s),l=c?Lt(c):void 0,f=(0,u.useCallback)(()=>JSON.stringify(a.current,Se,2)??"",[a]),h=(0,u.useCallback)(()=>JSON.stringify(r.current,Se,2)??"",[r]),j=(0,u.useCallback)(()=>JSON.stringify(n,Se,2)??"",[n]);return(0,t.jsxs)($.Z,{alignItems:"flex-start",paddingInline:.25,paddingBlockStart:.75,children:[(0,t.jsxs)($.Z,{direction:"row",alignItems:"center",gap:.5,children:[(0,t.jsxs)(W.Z,{variant:"caption",lineHeight:1.2,color:"text.secondary",children:[d?"base":l?(0,t.jsx)(Rt.Z,{target:"_blank",color:"inherit",variant:"caption",underline:"hover",rel:"noopener noreferrer",href:l,children:c}):c,` @ ${(0,st.Eo)(p.receiveTime)} sec`]}),(0,t.jsx)(Fe.Z,{size:"small",iconSize:"inherit",className:i.button,getText:f})]}),d?.receiveTime&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)($.Z,{direction:"row",alignItems:"center",gap:.5,children:[(0,t.jsx)(W.Z,{variant:"caption",lineHeight:1.2,color:"text.secondary",children:`diff @ ${(0,st.Eo)(d.receiveTime)} sec `}),(0,t.jsx)(Fe.Z,{size:"small",iconSize:"inherit",className:i.button,getText:h})]}),(0,t.jsx)(Fe.Z,{size:"small",iconSize:"inherit",className:i.button,getText:j,children:"Copy diff of msgs"})]})]})}var kt=o(42713),Gt=o(98967),Ut=o(85321),Wt=o(27147),Vt=o(21580),Jt=o(42012),Kt=o(96511),Qt=o(76217),it=o(62421),at=o(11234),Xt=o(28e3);function Yt({itemLabel:e}){const s=` ${we} `,n=`${e}`.split(s);if(n.length===2){const[p,d]=n,i=JSON.parse(JSON.stringify(p)??""),a=JSON.parse(JSON.stringify(d)??"");return(0,t.jsxs)(ze,{style:{color:T.CHANGED.color},children:[(0,t.jsx)(De,{itemLabel:i}),s,(0,t.jsx)(De,{itemLabel:a})]})}return(0,t.jsx)(ze,{children:(0,t.jsx)(De,{itemLabel:e})})}var wt=o(2784);const rt=(0,L.D2)(Qt.Z,e=>({root:{"&.MuiIconButton-root":{fontSize:e.typography.pxToRem(16),opacity:.6,padding:0}}})),qt=(0,L.ZL)()({placeholderActionContainer:{alignItems:"inherit",display:"inherit",gap:"inherit",visibility:"hidden"}}),_t={key:"",tooltip:"",icon:(0,t.jsx)(Ut.Z,{fontSize:"inherit"})},en=4;function tn(e){const s=(0,u.useRef)(void 0),{arrLabel:n,basePath:c,itemLabel:p,itemValue:d,valueAction:i,onTopicPathChange:a,openSiblingPanel:r}=e,[l,f]=(0,u.useState)(!1),h=(0,u.useCallback)(y=>()=>{(0,it.openSiblingPlotPanel)(r,`${c}${y}`)},[c,r]),j=(0,u.useCallback)(y=>()=>{(0,at.openSiblingStateTransitionsPanel)(r,`${c}${y}`)},[c,r]),P=(0,u.useCallback)(()=>{a(`${c}${i?.filterPath}`)},[c,i,a]),X=(0,u.useCallback)(y=>{Xt.Z.copy(y).then(()=>{f(!0),s.current=setTimeout(()=>{f(!1)},1500)}).catch(b=>{console.warn(b)})},[]),k=(0,u.useMemo)(()=>{const y=[];if(n.length>0&&y.push({key:"Copy",activeColor:l?"success":"primary",tooltip:l?"Copied":"Copy to Clipboard",icon:l?(0,t.jsx)(kt.Z,{fontSize:"inherit"}):(0,t.jsx)(Gt.Z,{fontSize:"inherit"}),onClick:()=>{X(JSON.stringify(d,Se,2)??"")}}),i!=null){const b=it.plotableRosTypes.includes(i.primitiveType),fe=at.transitionableRosTypes.includes(i.primitiveType),J=i.multiSlicePath===i.singleSlicePath;i.filterPath.length>0&&y.push({key:"Filter",tooltip:"Filter on this value",icon:(0,t.jsx)(Wt.Z,{fontSize:"inherit"}),onClick:P}),b&&y.push({key:"line",tooltip:"Plot this value on a line chart",icon:(0,t.jsx)(Kt.Z,{fontSize:"inherit"}),onClick:h(i.singleSlicePath)}),b&&!J&&y.push({key:"scatter",tooltip:"Plot this value on a scatter plot",icon:(0,t.jsx)(Jt.Z,{fontSize:"inherit"}),onClick:h(i.multiSlicePath)}),fe&&J&&y.push({key:"stateTransitions",tooltip:"View state transitions for this value",icon:(0,t.jsx)(Vt.Z,{fontSize:"inherit"}),onClick:j(i.singleSlicePath)})}return y},[n.length,l,X,d,P,h,j,i]),je=(0,u.useMemo)(()=>{const y=[];for(let b=k.length;b<en;b++)y.push({..._t,key:`empty-${b}`});return y},[k.length]),{classes:Ee,cx:Y}=qt();(0,u.useEffect)(()=>()=>{s.current!=null&&clearTimeout(s.current)},[]);const[z,ce]=(0,u.useState)(!1);return(0,t.jsxs)($.Z,{inline:!0,flexWrap:"wrap",direction:"row",alignItems:"center",gap:.25,onPointerEnter:()=>{ce(!0)},onPointerLeave:()=>{ce(!1)},children:[(0,t.jsx)(Yt,{itemLabel:p}),n,z&&k.map(y=>(0,t.jsx)(Re.Z,{arrow:!0,title:y.tooltip,placement:"top",children:(0,t.jsx)(rt,{size:"small",activeColor:y.activeColor,onClick:y.onClick,color:"inherit",icon:y.icon})},y.key)),(0,t.jsx)("span",{className:Y(Ee.placeholderActionContainer),children:z&&je.map(y=>(0,t.jsx)(Re.Z,{arrow:!0,title:y.tooltip,placement:"top",children:(0,t.jsx)(rt,{size:"small",color:"inherit",icon:y.icon})},y.key))})]})}const lt=wt.memo(tn),nn=(e,s,n)=>typeof s=="string"&&n.structureType==="message"&&typeof e=="object",on=(e,s,n)=>typeof s=="number"&&n.structureType==="array"&&Array.isArray(e);function sn(e,s,n){let c="",p="",d="",i=e,a=s;for(const r of n){if(a==null||i==null)break;if(nn(i,r,a))a=a.structureType==="message"&&typeof r=="string"?a.nextByName[r]:void 0,i=i[r],p.endsWith("[:]")&&a?.structureType==="primitive"?typeof i=="bigint"?d=`${p}{${r}==${i.toString()}}`:d=`${p}{${r}==${JSON.stringify(i)??""}}`:d="",c+=`.${r}`,p+=`.${r}`;else if(on(i,r,a)){i=i[r],a=a.structureType==="array"?a.next:void 0,p=`${c}[:]`;let l;if(a?.structureType==="message"&&(l=Object.entries(a.nextByName).find(([f,h])=>h.structureType==="primitive"&&(0,Ye.Q)(f))?.[0]),typeof i=="object"&&i!=null&&typeof l=="string"){const f=i[l];c+=`[:]{${l}==${typeof f=="bigint"?f.toString():JSON.stringify(f)??""}}`}else c+=`[${r}]`}else{if(a.structureType==="primitive")return;throw new Error(`Invalid structureType: ${a.structureType} for value/pathItem.`)}}if(a&&a.structureType==="primitive"&&i!=null)return{singleSlicePath:c,multiSlicePath:p,primitiveType:a.primitiveType,filterPath:d}}const an=(e,s)=>{let n=e;for(const c of s){if(n==null)break;if(n.structureType==="message"&&typeof c=="string")n=n.nextByName[c];else if(n.structureType==="array"&&typeof c=="number")n=n.next;else{if(n.structureType==="primitive")return n;throw new Error(`Invalid structureType: ${n.structureType} for value/pathItem.`)}}return n},Be=e=>Array.isArray(e)?e.filter(s=>s!=null).length===1:!1,He=e=>Be(e)&&typeof e[0]=="object"?e[0]:e;function Ce(e){return typeof e=="object"&&e!=null&&"toJSON"in e?e.toJSON():e}const rn=(0,L.ZL)()(e=>({topic:{fontFamily:Et.R.SANS_SERIF,fontFeatureSettings:`${e.typography.fontFeatureSettings}, "zero"`},hoverObserver:{display:"inline-flex",alignItems:"center"}}));function ln(e){const{palette:{mode:s}}=(0,re.Z)(),{classes:n}=rn(),c=(0,jt.lk)(),{config:p,saveConfig:d}=e,{openSiblingPanel:i}=(0,q.R)(),{topicPath:a,diffMethod:r,diffTopicPath:l,diffEnabled:f,showFullMessageForDiff:h}=p,{topics:j,datatypes:P}=(0,B.Ui)(),X=(0,St.W0)(),{setMessagePathDropConfig:k}=(0,q.R)();(0,u.useEffect)(()=>{k({getDropStatus(g){return{canDrop:!0,effect:"replace"}},handleDrop(g){d({topicPath:g.path})}})},[k,d]);const je=Oe(),Ee=(0,u.useMemo)(()=>f?(g,x,Z)=>(0,t.jsx)(zt,{data:x,itemType:Z}):je,[je,f]),Y=(0,u.useMemo)(()=>(0,me.ZP)(a),[a]),z=(0,u.useMemo)(()=>Y&&j.find(({name:g})=>g===Y.topicName),[Y,j]),ce=(0,u.useMemo)(()=>(0,K.pb)(P),[P]),y=(0,u.useMemo)(()=>{if(!(!z||!Y||z.schemaName==null))return(0,K.eT)(ce[z.schemaName],Y.messagePath).structureItem},[ce,z,Y]),[b,fe]=(0,u.useState)(p.expansion),[J,dn]=(0,u.useState)(),Pe=M(z?a:"",{historySize:2}),un=M(f?l:"")[0],ct=Pe[Pe.length-1],pn=Pe[Pe.length-2],ft=f&&r===Q.PREV_MSG_METHOD,A=ft?pn:ct,ie=ft?ct:un,dt=(0,u.useMemo)(()=>{if(A){const g=He(A.queriedData.map(({value:x})=>x));return Nt(Ce(g),5)}else return new Set},[A]),ke=(0,u.useMemo)(()=>b==="none"?!0:b==="all"?!1:!!(typeof b=="object"&&Object.values(b).some(g=>g===O.Collapsed)),[b]),de=(0,u.useCallback)(g=>{fe(void 0),d({topicPath:g})},[d]),hn=(0,u.useCallback)(g=>{d({diffTopicPath:g})},[d]),gn=(0,u.useCallback)(()=>{d({diffEnabled:!f})},[f,d]),mn=(0,u.useCallback)(()=>{fe(ke?"all":"none")},[ke]),Ge=(0,u.useCallback)(g=>{fe(x=>At(x??"all",dt,g.join("~")))},[dt]);(0,u.useEffect)(()=>{d({expansion:b})},[b,d]);const Ie=(0,u.useCallback)(({constantName:g,label:x,itemValue:Z,keyPath:_})=>{let I=x;typeof Z=="bigint"&&(I=Z.toString());let N="";if(ArrayBuffer.isView(Z)){const G=Z,m=G.slice(0,qe).join(", "),D=G.length;N=`(${D}) [${m}${D>=qe?", ...":""}] `,I=Z.constructor.name}return g!=null&&(I=`${I} (${g})`),_[0]==="nsec"&&typeof Z=="number"&&(I=w.Z(I,9,"0")),{arrLabel:N,itemLabel:I}},[]),ut=(0,u.useCallback)((g,x)=>{let Z;const{arrLabel:_,itemLabel:I}=Ie({constantName:Z,label:g,itemValue:x,keyPath:[]});return(0,t.jsx)(lt,{arrLabel:_,basePath:"",itemLabel:I,itemValue:x,valueAction:void 0,onTopicPathChange:de,openSiblingPanel:i})},[Ie,de,i]),pt=(0,u.useMemo)(()=>(0,Ct.Hh)(P),[P]),Ue=(0,u.useCallback)((g,x,Z,_,I,...N)=>(0,t.jsx)(Ze.Z,{className:n.hoverObserver,children:({isHovering:G})=>{const m=le.Z(N);let D;G&&g&&(D=sn(x[m],g,N.slice(0,-1).reverse()));let E;if(g){const U=an(g,N.slice(0,-1).reverse());if(U){const ee=N.findIndex(We=>typeof We=="string"),gt=N[ee];if(typeof gt=="string"){const We=U.datatype;E=pt[We]?.[gt]?.[String(I)]}}}const R=Z[m]?.path??"",{arrLabel:F,itemLabel:ae}=Ie({constantName:E,label:_,itemValue:I,keyPath:N});return(0,t.jsx)(lt,{arrLabel:F,basePath:R,itemLabel:ae,itemValue:I,valueAction:D,onTopicPathChange:de,openSiblingPanel:i})}}),[n.hoverObserver,pt,Ie,de,i]),yn=(0,u.useCallback)(()=>{const g=m=>{if(b==="all")return!0;if(b==="none")return!1;const D=m.join("~");return b&&b[D]===O.Collapsed?!1:(b&&b[D]===O.Expanded,!0)};if(a.length===0)return(0,t.jsx)(S.Z,{children:"No topic selected"});if(f&&r===Q.CUSTOM_METHOD&&(!A||!ie))return(0,t.jsx)(S.Z,{children:`Waiting to diff next messages from "${a}" and "${l}"`});if(!A)return(0,t.jsx)(S.Z,{children:"Waiting for next message"});const x=He(A.queriedData.map(({value:m})=>m)),Z=A.queriedData.length===1&&typeof A.queriedData[0]?.value=="object",_=x!=null&&typeof x!="object"||Be(x)&&x[0]!=null&&typeof x[0]!="object",I=Be(x)?x[0]:x,N=ie&&He(ie.queriedData.map(({value:m})=>m)),G=f?ve({before:Ce(x),after:Ce(N),idLabel:void 0,showFullMessageForDiff:h}):{};return(0,t.jsxs)($.Z,{className:n.topic,flex:"auto",overflowX:"hidden",paddingLeft:.75,"data-testid":"panel-scroll-container",children:[(0,t.jsx)(Ht,{data:x,diffData:N,diff:G,message:A.messageEvent,...z?{datatype:z.schemaName}:void 0,...ie?{diffMessage:ie.messageEvent}:void 0}),_?(0,t.jsx)(W.Z,{variant:"h1",fontSize:J,whiteSpace:"pre-wrap",style:{wordWrap:"break-word"},children:(0,t.jsx)(De,{itemLabel:String(I)})}):f&&ne.Z({},G)?(0,t.jsx)(S.Z,{children:"No difference found"}):(0,t.jsxs)(t.Fragment,{children:[f&&(0,t.jsx)(Me.Z,{disableTypography:!0,checked:h,control:(0,t.jsx)(ue.Z,{size:"small",defaultChecked:!0,onChange:()=>{d({showFullMessageForDiff:!h})}}),label:"Show full msg"}),(0,t.jsx)(ge.ZP,{labelRenderer:m=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(ze,{children:pe.Z(m)}),(0,t.jsx)("span",{style:{fontSize:0},children:"\xA0"})]}),shouldExpandNode:g,onExpand:(m,D,E)=>{Ge(E)},onCollapse:(m,D,E)=>{Ge(E)},hideRoot:!0,invertTheme:!1,getItemString:Ee,valueRenderer:(m,D,...E)=>f?ut(m,D):Z?Ue(y,[x],A.queriedData,m,D,...E,0):Ue(y,x,A.queriedData,m,D,...E),postprocessValue:m=>{if(m==null)return m;const D=m[T.ID.labelText],E=m[T.ADDED.labelText],R=m[T.CHANGED.labelText],F=m[T.DELETED.labelText];return(E!=null?1:0)+(R!=null?1:0)+(F!=null?1:0)==1&&D==null?E??R??F:Ce(m)},theme:{...c,tree:{margin:0},nestedNode:({style:m},D)=>{const E={...m,fontSize:J,paddingTop:2,paddingBottom:2,marginTop:2,textDecoration:"inherit"};if(!f)return{style:E};let R,F;V[D[0]]&&(R=s==="dark"?V[D[0]].invertedBackgroundColor:V[D[0]].backgroundColor,F=D[0]===T.DELETED.labelText?"line-through":"none");const ae=he.Z(G,D.slice().reverse(),{}),U=Object.keys(ae)[0];return U!=null&&V[U]&&(R=s==="dark"?V[U].invertedBackgroundColor:V[U].backgroundColor,F=U===T.DELETED.labelText?"line-through":"none"),{style:{...E,backgroundColor:R,textDecoration:F??"inherit"}}},nestedNodeLabel:({style:m})=>({style:{...m,textDecoration:"inherit"}}),nestedNodeChildren:({style:m})=>({style:{...m,textDecoration:"inherit"}}),value:({style:m},D,E)=>{const R={...m,fontSize:J,textDecoration:"inherit"};if(!f)return{style:R};let F,ae;const U=he.Z(G,E.slice().reverse(),{}),ee=Object.keys(U)[0];return ee!=null&&V[ee]&&(F=s==="dark"?V[ee].invertedBackgroundColor:V[ee].backgroundColor,ae=ee===T.DELETED.labelText?"line-through":"none"),{style:{...R,backgroundColor:F,textDecoration:ae??"inherit"}}},label:{textDecoration:"inherit"}},data:f?G:x})]})]})},[A,n.topic,J,f,ie,r,l,b,Ee,c,Ge,ut,y,d,h,s,z,a,Ue]),ht=(0,u.useCallback)(g=>{g.action==="update"&&g.payload.path[0]==="general"&&g.payload.path[1]==="fontSize"&&dn(g.payload.value!=null?g.payload.value:void 0)},[]);return(0,u.useEffect)(()=>{X({actionHandler:ht,nodes:{general:{label:"General",fields:{fontSize:{label:"Font size",input:"select",options:[{label:"auto",value:void 0},...Q.FONT_SIZE_OPTIONS.map(g=>({label:`${g} px`,value:g}))],value:J}}}}})},[ht,J,X]),(0,t.jsxs)($.Z,{flex:"auto",overflow:"hidden",position:"relative",children:[(0,t.jsx)(bt,{canExpandAll:ke,diffEnabled:f,diffMethod:r,diffTopicPath:l,onDiffTopicPathChange:hn,onToggleDiff:gn,onToggleExpandAll:mn,onTopicPathChange:de,saveConfig:d,topicPath:a}),yn()]})}const cn={diffEnabled:!1,diffMethod:Q.CUSTOM_METHOD,diffTopicPath:"",showFullMessageForDiff:!1,topicPath:""},fn=(0,H.Z)(Object.assign(ln,{panelType:"RawMessages",defaultConfig:cn}))},49302:(Ve,te,o)=>{o.d(te,{f:()=>re});var t=o(98127);function re(W){return t.Z(W)}},84803:(Ve,te,o)=>{o.d(te,{D:()=>Ze});var t=o(52322),re=o(1547),W=o(8220),Me=o(60351),ue=o(59635),w=o(96995);const le=new w._fP,ne=new w.USm;function pe(B,S,oe,se){return le.set(B,S,oe,se),ne.setFromQuaternion(le,"XYZ"),[w.M8C.radToDeg(ne.x),w.M8C.radToDeg(ne.y),w.M8C.radToDeg(ne.z)]}const he=20*365*24*60*60,u=["string","number","bigint","boolean"];function Ze(B,S,oe,se,Je,Oe){if(typeof S!="object"||S==null)return(0,t.jsxs)("span",{children:[oe," ",se]});const K=Object.keys(S);if(K.length===2){const{sec:v,nsec:C}=S;if(typeof v=="number"&&typeof C=="number")return v<he?(0,ue.LU)({sec:v,nsec:C}):(0,t.jsx)("span",{children:(0,ue.WU)({sec:v,nsec:C},Oe)})}if(K.length===2){const{x:v,y:C}=S;if(typeof v=="number"&&typeof C=="number"){const q=Math.sqrt(v*v+C*C);return(0,t.jsxs)("span",{children:["norm = ",q.toFixed(2)," ",ge(v,C)]})}const{key:M,value:H}=S;if(M!=null&&H!=null&&u.includes(typeof M)&&u.includes(typeof H))return`${M}: ${H}`}else if(K.length===3){const{x:v,y:C,z:M}=S;if(typeof v=="number"&&typeof C=="number"&&typeof M=="number"){const H=Math.sqrt(v*v+C*C+M*M);return(0,t.jsxs)("span",{children:["norm = ",H.toFixed(2)," ",M===0?ge(v,C):void 0]})}}else if(K.length===4){const{x:v,y:C,z:M,w:H}=S;if(typeof v=="number"&&typeof C=="number"&&typeof M=="number"&&typeof H=="number"){const[Ae,Ne,Te]=pe(v,C,M,H);return(0,t.jsxs)("span",{children:["rpy = [",L(Ae),", ",L(Ne),", ",L(Te),"]"]})}const{r:q,g:$,b:ye,a:xe}=S;if(typeof q=="number"&&typeof $=="number"&&typeof ye=="number"&&typeof xe=="number")return(0,t.jsx)("span",{children:(0,re.Z)({r:q*255,g:$*255,b:ye*255,a:xe}).toHex8String()})}const me=(0,W.Z)(K,v=>{const C=S[v];if((0,Me.Q)(v)&&(C==null||u.includes(typeof C)))return`${v}: ${C}`}).join(", ");return(0,t.jsxs)("span",{children:[oe," ",me.length>0?me:se]})}function ge(B,S){if(!(B===0&&S===0))return(0,t.jsx)("span",{style:{transform:`rotate(${Math.atan2(-S,B)}rad)`,display:"inline-block"},children:"\u2192"})}function L(B,S=2){return Number(B.toFixed(S))}}}]);

//# sourceMappingURL=2455.aba26a6edd2a1c138d36.js.map