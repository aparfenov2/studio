"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5142],{89600:(K,b,o)=>{var a,Z=o(71600);a={value:!0},b.Z=void 0;var x=Z(o(68671)),f=o(52322),r=(0,x.default)([(0,f.jsx)("path",{d:"M18 6.41 16.59 5 12 9.58 7.41 5 6 6.41l6 6z"},"0"),(0,f.jsx)("path",{d:"m18 13-1.41-1.41L12 16.17l-4.59-4.58L6 13l6 6z"},"1")],"KeyboardDoubleArrowDown");b.Z=r},55142:(K,b,o)=>{o.r(b),o.d(b,{default:()=>Ve});var a=o(52322),Z=o(56961),x=o(67067),f=o(25513),r=o(2784),L=o(68588),N=o(75785),M=o(75017),P=o(76479),j=o(93812),y=o(68234),O=o(23759),T=o(72970);const H=(0,T.ZL)()(e=>({input:{".MuiInputBase-root.MuiInputBase-sizeSmall .MuiAutocomplete-input.MuiInputBase-inputSizeSmall":{paddingBottom:e.spacing(.425),paddingTop:e.spacing(.425)},".MuiInputBase-root.MuiInputBase-sizeSmall":{padding:e.spacing(.125),gap:e.spacing(.25)}},chip:{"&.MuiAutocomplete-tag":{margin:0}}}));function W({items:e,suggestions:s,onChange:t}){const{classes:n}=H();return(0,a.jsx)(O.Z,{value:e,multiple:!0,onChange:(l,c)=>{t(c)},id:"tags-filled",options:s,freeSolo:!0,fullWidth:!0,ChipProps:{className:n.chip,variant:"filled",size:"small"},renderInput:l=>(0,a.jsx)(y.Z,{...l,size:"small",className:n.input,placeholder:"Search filter"})})}var B=o(39367),d=o(89600),i=o(31461),m=o(7896),S=o(40489),w=o(69075),Y=o(47021),$=o(7342),J=o(43853),Q=o(69222),k=o(15672);function q(e){return(0,k.Z)("MuiFab",e)}const V=(0,Q.Z)("MuiFab",["root","primary","secondary","extended","circular","focusVisible","disabled","colorInherit","sizeSmall","sizeMedium","sizeLarge","info","error","warning","success"]);var _=o(65992);const ue=["children","className","color","component","disabled","disableFocusRipple","focusVisibleClassName","size","variant"],de=e=>{const{color:s,variant:t,classes:n,size:l}=e,c={root:["root",t,`size${(0,$.Z)(l)}`,s==="inherit"?"colorInherit":s]},p=(0,w.Z)(c,q,n);return(0,m.Z)({},n,p)},fe=(0,_.ZP)(Y.Z,{name:"MuiFab",slot:"Root",shouldForwardProp:e=>(0,_.FO)(e)||e==="classes",overridesResolver:(e,s)=>{const{ownerState:t}=e;return[s.root,s[t.variant],s[`size${(0,$.Z)(t.size)}`],t.color==="inherit"&&s.colorInherit,s[(0,$.Z)(t.size)],s[t.color]]}})(({theme:e,ownerState:s})=>{var t,n;return(0,m.Z)({},e.typography.button,{minHeight:36,transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short}),borderRadius:"50%",padding:0,minWidth:0,width:56,height:56,zIndex:(e.vars||e).zIndex.fab,boxShadow:(e.vars||e).shadows[6],"&:active":{boxShadow:(e.vars||e).shadows[12]},color:e.vars?e.vars.palette.text.primary:(t=(n=e.palette).getContrastText)==null?void 0:t.call(n,e.palette.grey[300]),backgroundColor:(e.vars||e).palette.grey[300],"&:hover":{backgroundColor:(e.vars||e).palette.grey.A100,"@media (hover: none)":{backgroundColor:(e.vars||e).palette.grey[300]},textDecoration:"none"},[`&.${V.focusVisible}`]:{boxShadow:(e.vars||e).shadows[6]}},s.size==="small"&&{width:40,height:40},s.size==="medium"&&{width:48,height:48},s.variant==="extended"&&{borderRadius:48/2,padding:"0 16px",width:"auto",minHeight:"auto",minWidth:48,height:48},s.variant==="extended"&&s.size==="small"&&{width:"auto",padding:"0 8px",borderRadius:34/2,minWidth:34,height:34},s.variant==="extended"&&s.size==="medium"&&{width:"auto",padding:"0 16px",borderRadius:40/2,minWidth:40,height:40},s.color==="inherit"&&{color:"inherit"})},({theme:e,ownerState:s})=>(0,m.Z)({},s.color!=="inherit"&&s.color!=="default"&&(e.vars||e).palette[s.color]!=null&&{color:(e.vars||e).palette[s.color].contrastText,backgroundColor:(e.vars||e).palette[s.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[s.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[s.color].main}}}),({theme:e})=>({[`&.${V.disabled}`]:{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground}})),me=r.forwardRef(function(s,t){const n=(0,J.Z)({props:s,name:"MuiFab"}),{children:l,className:c,color:p="default",component:u="button",disabled:A=!1,disableFocusRipple:g=!1,focusVisibleClassName:h,size:F="large",variant:E="circular"}=n,z=(0,i.Z)(n,ue),U=(0,m.Z)({},n,{color:p,component:u,disabled:A,disableFocusRipple:g,size:F,variant:E}),R=de(U);return(0,a.jsx)(fe,(0,m.Z)({className:(0,S.Z)(R.root,c),component:u,disabled:A,focusRipple:!g,focusVisibleClassName:(0,S.Z)(R.focusVisible,h),ownerState:U,ref:t},z,{classes:R,children:l}))});var ge=o(62515),ve=o(16003),he=o(68181),pe=o(8301),Re=o(74602),ae=o(47786);const be=(0,T.ZL)()(({palette:e})=>({fatal:{color:e.error.main,fontWeight:"bold"},error:{color:e.error.main},warn:{color:e.warning.main},info:{color:e.info.main},debug:{color:e.text.secondary}}));var xe=o(77075),v;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.FATAL=5]="FATAL"})(v||(v={}));function Le(e){switch(e){case v.DEBUG:return"DEBUG";case v.INFO:return"INFO";case v.WARN:return"WARN";case v.ERROR:return"ERROR";case v.FATAL:return"FATAL";default:return"?????"}}var Ae=o(59635);function ne(e,s){return ae.Z(`${e}`,s,"0")}function Ce(e){if(e.timestampFormat==="TOD"){const s=(0,Ae.mr)(e.stamp,e.timeZone);return(0,a.jsx)("span",{children:s})}else return(0,a.jsxs)("span",{children:[ne(e.stamp.sec,10),".",ne(e.stamp.nsec,9)]})}const Fe=Ce;var Ze=o(2784);const Ne=(0,T.ZL)()({root:{textIndent:-20,paddingLeft:20,whiteSpace:"pre-wrap",paddingTop:1,paddingBottom:1,lineHeight:1,fontFamily:xe.R.MONOSPACE}}),Se=Ze.memo(function(s){const{value:t,timestampFormat:n,timeZone:l}=s,{classes:c,cx:p}=Ne(),{classes:u}=be(),A=`${t.file}:${t.line}`,g=Le(t.level),h=t.stamp,F=t.message.split(`
`);return(0,a.jsxs)("div",{title:A,className:p(c.root,{[u.fatal]:g==="FATAL",[u.error]:g==="ERROR",[u.warn]:g==="WARN",[u.info]:g==="INFO",[u.debug]:g==="DEBUG"}),children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",{children:["[",ae.Z(g,5," "),"]"]}),(0,a.jsxs)("span",{children:["[",(0,a.jsx)(Fe,{stamp:h,timestampFormat:n,timeZone:l}),"]"]}),t.name!=null&&(0,a.jsxs)("span",{children:["[",t.name,"]:"]}),(0,a.jsx)("span",{children:"\xA0"}),(0,a.jsx)("span",{children:F[0]})]}),(0,a.jsx)("div",{children:F.slice(1).map((E,z)=>(0,a.jsxs)("div",{children:["\xA0\xA0\xA0\xA0",E]},z))})]})});var re=o(2784);const Te=(0,T.ZL)()(e=>({floatingButton:{position:"absolute",bottom:0,right:0,margin:e.spacing(1.5)}}));function Ee(e){const{timeFormat:s,timeZone:t}=(0,Re.v)(),n=(0,r.useRef)(null);(0,r.useEffect)(()=>{n.current&&e.data.setRowHeight(e.index,n.current.clientHeight)},[e.data,e.index]);const l=e.data.items[e.index];return(0,a.jsx)("div",{style:{...e.style,height:"auto"},ref:n,children:(0,a.jsx)(Se,{value:l,timestampFormat:s,timeZone:t})})}function je({items:e}){const{classes:s}=Te(),t=(0,r.useRef)(null),n=(0,r.useRef)(null),l=(0,ve.Z)(e),[c,p]=(0,r.useState)(!0),u=re.useCallback(()=>{p(!0),t.current?.scrollToItem(l.current.length-1,"end")},[l]);(0,r.useEffect)(()=>{c&&t.current?.scrollToItem(e.length-1,"end")},[c,e.length]);const A=re.useCallback(({scrollDirection:R,scrollOffset:G,scrollUpdateWasRequested:se})=>{const oe=G+(n.current?.offsetHeight??0)===n.current?.scrollHeight;!se&&R==="backward"&&!oe?p(!1):R==="forward"&&oe&&p(!0)},[]),g=(0,r.useRef)({}),h=(0,r.useCallback)(R=>g.current[R]??16,[]),F=(0,r.useCallback)((R,G)=>{g.current[R]=G,t.current?.resetAfterIndex(R)},[]),{width:E,ref:z}=(0,ge.NB)({refreshRate:0,refreshMode:"debounce"}),U=(0,r.useMemo)(()=>({items:e,setRowHeight:F}),[e,F,E]);return(0,a.jsx)(he.qj,{children:({width:R,height:G})=>(0,a.jsxs)("div",{style:{position:"relative",width:R,height:G},ref:z,children:[(0,a.jsx)(pe.S_,{ref:t,width:R,height:G,style:{outline:"none"},itemData:U,itemSize:h,itemCount:e.length,outerRef:n,onScroll:A,children:Ee}),!c&&(0,a.jsx)(me,{size:"small",title:"Scroll to bottom",onClick:u,className:s.floatingButton,children:(0,a.jsx)(d.Z,{})})]})})}const ye=je;var Oe=o(44668);function ie(e){return"msg"in e?e.msg:"message"in e?e.message:""}function le(e,s){switch(e){case"foxglove_msgs/Log":case"foxglove_msgs/msg/Log":case"foxglove::Log":case"foxglove.Log":return s.level;case"rosgraph_msgs/Log":case"rcl_interfaces/msg/Log":return Ie(s.level)}return v.UNKNOWN}function ze(e,s){switch(e){case"foxglove_msgs/Log":case"foxglove_msgs/msg/Log":case"foxglove::Log":case"foxglove.Log":{const t=s.timestamp;return typeof t=="bigint"?(0,Oe.fromNanoSec)(t):t}case"rosgraph_msgs/Log":return s.header.stamp;case"rcl_interfaces/msg/Log":return s.stamp}return{sec:0,nsec:0}}function Me(e,s){const t=ie(s),n=ze(e,s),l=le(e,s);return{message:t,stamp:n,level:l,name:s.name,file:s.file,line:s.line}}function Ie(e){switch(e){case 1:case 10:return v.DEBUG;case 2:case 20:return v.INFO;case 4:case 30:return v.WARN;case 8:case 40:return v.ERROR;case 16:case 50:return v.FATAL;default:return v.UNKNOWN}}function Ue(e,s){const{minLogLevel:t,searchTerms:n,nameFilter:l}=s;if(!(t>1||n.length>0||Object.values(l).some(({visible:u})=>u===!1)))return e;const p=n.map(u=>u.toLowerCase());return e.filter(u=>{const A=u.message;if(le(u.schemaName,A)<t)return!1;const h=A.name;if(h!=null&&l[h]?.visible===!1)return!1;if(n.length===0)return!0;const F=A.name?.toLowerCase()??"",E=ie(A).toLowerCase();return p.some(z=>F.includes(z)||E.includes(z))})}const Pe=[{label:">= DEBUG",value:v.DEBUG},{label:">= INFO",value:v.INFO},{label:">= WARN",value:v.WARN},{label:">= ERROR",value:v.ERROR},{label:">= FATAL",value:v.FATAL}];function We(e,s,t,n,l,c){const p=n.map(h=>({label:h.name,value:h.name})),u=n.some(h=>h.name===e);u||p.unshift({value:e,label:e});const A=u?void 0:c("topicError",{topic:e}),g=Object.fromEntries(l.map(h=>[h,{label:h,visible:t[h]?.visible??!0}]));return{general:{fields:{topicToRender:{input:"select",label:c("topic"),value:e,error:A,options:p},minLogLevel:{input:"select",label:c("minLogLevel"),value:s,options:Pe}}},nameFilter:{enableVisibilityFilter:!0,children:g,label:c("nameFilter"),actions:[{id:"show-all",type:"action",label:c("showAll")},{id:"hide-all",type:"action",label:c("hideAll")}]}}}var Be=o(2784);function De(e){return(0,a.jsx)(W,{items:[...e.searchTerms],suggestions:[],onChange:s=>{e.onFilterChange({minLogLevel:e.minLogLevel,searchTerms:s})}})}const He=["foxglove_msgs/Log","foxglove_msgs/msg/Log","foxglove.Log","foxglove::Log","rcl_interfaces/msg/Log","ros.rcl_interfaces.Log","ros.rosgraph_msgs.Log","rosgraph_msgs/Log"],ce=Be.memo(({config:e,saveConfig:s})=>{const{topics:t}=(0,N.Ui)(),{minLogLevel:n,searchTerms:l,nameFilter:c}=e,p=(0,B.W0)(),{t:u}=(0,L.$G)("log"),A=(0,r.useCallback)(C=>{s({minLogLevel:C.minLogLevel,searchTerms:C.searchTerms})},[s]),g=(0,r.useMemo)(()=>t.filter(C=>C.schemaName!=null&&He.includes(C.schemaName)),[t]),h=(0,r.useMemo)(()=>g[0]?.name,[g]),F=e.topicToRender??h??"/rosout",{[F]:E=[]}=(0,N.V7)({topics:[F],historySize:1e5}),z=(0,r.useRef)(new Set),U=(0,r.useMemo)(()=>{for(const C of E){const D=C.message.name;D!=null&&z.current.add(D)}return z.current},[E]),R=(0,r.useCallback)(C=>{if(C.action==="update"){const{path:D,value:ee}=C.payload;D[0]==="nameFilter"?s((0,x.Uy)(X=>f.Z(X,D,ee))):s((0,x.Uy)(X=>f.Z(X,D.slice(1),ee)))}else{if(!["show-all","hide-all"].includes(C.payload.id))return;const D=C.payload.id==="show-all";s((0,x.Uy)(ee=>{const X=Object.fromEntries(Object.entries(ee.nameFilter??{}).map(([te,$e])=>[te,{visible:D}]));return U.forEach(te=>X[te]={visible:D}),f.Z(ee,["nameFilter"],X)}))}},[s,U]);(0,r.useEffect)(()=>{p({actionHandler:R,enableFilter:!0,nodes:We(F,n,c??{},g,Array.from(U),u)})},[R,g,F,n,c,p,U,U.size,u]);const G=(0,r.useMemo)(()=>new Set(l),[l]),se=(0,r.useMemo)(()=>Ue(E,{minLogLevel:n,searchTerms:l,nameFilter:c??{}}),[E,n,l,c]),oe=(0,r.useMemo)(()=>se.map(C=>Me(C.schemaName,C.message)),[se]);return(0,a.jsxs)(j.Z,{fullHeight:!0,children:[(0,a.jsx)(P.Z,{}),(0,a.jsx)(j.Z,{flexGrow:0,padding:.5,children:(0,a.jsx)(De,{searchTerms:G,minLogLevel:n,onFilterChange:A})}),(0,a.jsx)(Z.Z,{}),(0,a.jsx)(j.Z,{flexGrow:1,children:(0,a.jsx)(ye,{items:oe})})]})});ce.displayName="Log";const Ve=(0,M.Z)(Object.assign(ce,{defaultConfig:{searchTerms:[],minLogLevel:1},panelType:"RosOut"}))},81441:(K,b,o)=>{o.d(b,{Z:()=>x});var a=o(82472);function Z(f,r,L){var N=f.length;return L=L===void 0?N:L,!r&&L>=N?f:(0,a.Z)(f,r,L)}const x=Z},32690:(K,b,o)=>{o.d(b,{Z:()=>j});var a="\\ud800-\\udfff",Z="\\u0300-\\u036f",x="\\ufe20-\\ufe2f",f="\\u20d0-\\u20ff",r=Z+x+f,L="\\ufe0e\\ufe0f",N="\\u200d",M=RegExp("["+N+a+r+L+"]");function P(y){return M.test(y)}const j=P},90241:(K,b,o)=>{o.d(b,{Z:()=>I});var a=o(95523),Z=(0,a.Z)("length");const x=Z;var f=o(32690),r="\\ud800-\\udfff",L="\\u0300-\\u036f",N="\\ufe20-\\ufe2f",M="\\u20d0-\\u20ff",P=L+N+M,j="\\ufe0e\\ufe0f",y="["+r+"]",O="["+P+"]",T="\\ud83c[\\udffb-\\udfff]",H="(?:"+O+"|"+T+")",W="[^"+r+"]",B="(?:\\ud83c[\\udde6-\\uddff]){2}",d="[\\ud800-\\udbff][\\udc00-\\udfff]",i="\\u200d",m=H+"?",S="["+j+"]?",w="(?:"+i+"(?:"+[W,B,d].join("|")+")"+S+m+")*",Y=S+m+w,$="(?:"+[W+O+"?",O,B,d,y].join("|")+")",J=RegExp(T+"(?="+T+")|"+$+Y,"g");function Q(V){for(var _=J.lastIndex=0;J.test(V);)++_;return _}const k=Q;function q(V){return(0,f.Z)(V)?k(V):x(V)}const I=q},222:(K,b,o)=>{o.d(b,{Z:()=>q});function a(I){return I.split("")}const Z=a;var x=o(32690),f="\\ud800-\\udfff",r="\\u0300-\\u036f",L="\\ufe20-\\ufe2f",N="\\u20d0-\\u20ff",M=r+L+N,P="\\ufe0e\\ufe0f",j="["+f+"]",y="["+M+"]",O="\\ud83c[\\udffb-\\udfff]",T="(?:"+y+"|"+O+")",H="[^"+f+"]",W="(?:\\ud83c[\\udde6-\\uddff]){2}",B="[\\ud800-\\udbff][\\udc00-\\udfff]",d="\\u200d",i=T+"?",m="["+P+"]?",S="(?:"+d+"(?:"+[H,W,B].join("|")+")"+m+i+")*",w=m+i+S,Y="(?:"+[H+y+"?",y,W,B,j].join("|")+")",$=RegExp(O+"(?="+O+")|"+Y+w,"g");function J(I){return I.match($)||[]}const Q=J;function k(I){return(0,x.Z)(I)?Q(I):Z(I)}const q=k},47786:(K,b,o)=>{o.d(b,{Z:()=>B});var a=9007199254740991,Z=Math.floor;function x(d,i){var m="";if(!d||i<1||i>a)return m;do i%2&&(m+=d),i=Z(i/2),i&&(d+=d);while(i);return m}const f=x;var r=o(79200),L=o(81441),N=o(32690),M=o(90241),P=o(222),j=Math.ceil;function y(d,i){i=i===void 0?" ":(0,r.Z)(i);var m=i.length;if(m<2)return m?f(i,d):i;var S=f(i,j(d/(0,M.Z)(i)));return(0,N.Z)(i)?(0,L.Z)((0,P.Z)(S),0,d).join(""):S.slice(0,d)}const O=y;var T=o(33286),H=o(25186);function W(d,i,m){d=(0,H.Z)(d),i=(0,T.Z)(i);var S=i?(0,M.Z)(d):0;return i&&S<i?O(i-S,m)+d:d}const B=W}}]);

//# sourceMappingURL=5142.5b5214203c3ce09eb766.js.map