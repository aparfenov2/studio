"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4933],{96133:(ae,H,t)=>{t.d(H,{J:()=>n});function n(g,Z){if(typeof g.value=="object")throw new Error("filterMatches only works on paths where global variables have been filled in");if(g.value==null)return!1;let h=Z;for(const M of g.path)if(typeof h!="object"||h==null||(h=h[M],h==null))return!1;return h!=null&&h==g.value}},36922:(ae,H,t)=>{t.d(H,{Iq:()=>I,wm:()=>G});var n=t(49164),g=t(2784),Z=t(8220),h=t(75845),M=t(75785),z=t(36423),L=t(72659),w=t(96133),W=t(60351),y=t(21337),D=t(1012);function I(S){const{topics:u,datatypes:l}=M.Ui(),{globalVariables:E}=(0,z.Z)(),r=(0,h.O4)(S),b=(0,g.useMemo)(()=>(0,Z.Z)(r,o=>{const f=(0,D.ZP)(o);return f?[o,f]:void 0}),[r]),U=(0,g.useMemo)(()=>{const o={};for(const[f,s]of b)o[f]=x(s,E);return o},[E,b]),T=(0,h.vE)(U),N=(0,g.useMemo)(()=>n.Z(u,({name:o})=>o),[u]),d=(0,g.useMemo)(()=>{const o=new Set,f=[];for(const[,s]of b){if(o.has(s.topicName))continue;o.add(s.topicName);const A=N[s.topicName];A&&f.push(A)}return f},[N,b]),C=(0,h.vE)(d),O=(0,g.useMemo)(()=>{const o=new Map;function f(s,A){if(A.includes(s))return;const $=l.get(s);if($){o.set(s,$);for(const P of $.definitions)(P.isComplex===!0||(0,L.bV)(P.name)!=null)&&f(P.type,[...A,s])}}for(const{schemaName:s}of C.values())s!=null&&f(s,[]);return o},[l,C]),j=(0,h.vE)(O),v=(0,g.useMemo)(()=>(0,y.pb)(j),[j]),V=(0,g.useMemo)(()=>(0,L.Hh)(j),[j]);return(0,g.useCallback)((o,f)=>{if(!r.includes(o))throw new Error(`path (${o}) was not in the list of cached paths`);const s=T[o];return s?Q(f,s,N,v,V):void 0},[r,T,N,v,V])}function x(S,u){return{...S,messagePath:S.messagePath.map(l=>{if(l.type==="slice"){const E=typeof l.start=="object"?Number(u[l.start.variableName]):l.start,r=typeof l.end=="object"?Number(u[l.end.variableName]):l.end;return{...l,start:isNaN(E)?0:E,end:isNaN(r)?1/0:r}}else if(l.type==="filter"&&typeof l.value=="object"){let E;const r=u[l.value.variableName];return(typeof r=="number"||typeof r=="string")&&(E=r),{...l,value:E}}return l})}}function Q(S,u,l,E,r){const b=l[u.topicName];if(!b||S.topic!==u.topicName)return;for(const d of u.messagePath)if(d.type==="filter"){if(!(0,w.J)(d,S.message))return[]}else break;const U=[];function T(d,C,O,j){if(d==null||j==null)return;const v=u.messagePath[C],V=u.messagePath[C+1];if(v)if(v.type==="name"&&j.structureType==="message"){const o=j.nextByName[v.name];T(d[v.name],C+1,`${O}.${v.repr}`,o)}else if(v.type==="slice"&&j.structureType==="array"){const{start:o,end:f}=v;if(typeof o=="object"||typeof f=="object")throw new Error("getMessagePathDataItems only works on paths where global variables have been filled in");const s=o,A=f;if(typeof s!="number"||typeof A!="number")return;const $=d.length;for(let P=s;P<=Math.min(A,$-1);P++){const re=P>=0?P:$+P,J=d[re];if(J==null)continue;let X;if(V&&V.type==="filter")X=`${O}[:]`;else if(typeof J=="object"){const k=W.H.find(te=>te in J);k!=null?X=`${O}[:]{${k}==${J[k]}}`:X=`${O}[${P}]`}else X=`${O}[${P}]`;T(J,C+1,X,j.next)}}else v.type==="filter"?(0,w.J)(v,d)&&T(d,C+1,`${O}{${v.repr}}`,j):console.warn(`Unknown pathItem.type ${v.type} for structureType: ${j.structureType}`);else{let o;const f=u.messagePath[C-1];if(f&&f.type==="name"){const s=f.name;o=r[j.datatype]?.[s]?.[d]}U.push({value:d,path:O,constantName:o})}}const N=b.schemaName==null?{structureType:"message",datatype:"",nextByName:{}}:E[b.schemaName];return N&&T(S.message,0,(0,D.dH)(u.topicName),N),U}function G(S){const u=(0,h.O4)(S),l=I(u);return(0,g.useCallback)(E=>{const r={};for(const b of u){const U=(0,D.ZP)(b);if(!U){r[b]=[];continue}const T=E[U.topicName];if(!T)continue;const N=[];r[b]=N;for(const d of T){const C=l(b,d);C&&N.push({messageEvent:d,queriedData:C})}}return r},[u,l])}},44933:(ae,H,t)=>{t.r(H),t.d(H,{default:()=>fe});var n=t(52322),g=t(2784),Z=t(72970),h=t(75785),M=t(29268),z=t(43684),L=t(1012),w=t(36922),W=t(75017),y=t(82044),D=t(76479),I=t(93812),x=t(77075),Q=t(71963),G=t(59169),S=t(23468),u=t(31373),l=t(36673),E=t(24544),r=t(87037),b=t(41939),U=t(68434),T=t(29800),N=t(80078),d=t(73705),C=t(95412),O=t(5817),j=t.n(O);function v(e){return e.replace(/\./g,"-")}var V=t(2784);const o=(0,Z.ZL)()(e=>({objectCell:{fontStyle:"italic",cursor:"pointer"},iconButton:{marginTop:e.spacing(-.5),marginLeft:e.spacing(-.5),"&:hover":{backgroundColor:"transparent"}}}));function f({row:e,accessorPath:c,children:i}){const{classes:p}=o(),[a,K]=V.useState(!1),B=V.useCallback(()=>{K(F=>!F)},[]);return e.getIsExpanded()||a?(0,n.jsxs)("div",{children:[a&&(0,n.jsx)(r.Z,{size:"small",onClick:B,className:p.iconButton,children:(0,n.jsx)(G.Z,{fontSize:"small"})}),i]}):(0,n.jsx)("span",{className:p.objectCell,"data-testid":`expand-cell-${v(c)}-${e.index}`,onClick:B,children:"Object"})}var s=t(2784);function A(e){return e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Int8Array||e instanceof Uint16Array||e instanceof Int16Array||e instanceof Uint32Array||e instanceof Int32Array||e instanceof Float32Array||e instanceof Float64Array}const $=(0,Z.ZL)()((e,c,i)=>({table:{border:"none",width:"100%",borderCollapse:"collapse",borderSpacing:0},tableRow:{svg:{opacity:.6},"&:nth-of-type(even)":{backgroundColor:e.palette.action.hover},"&:hover":{backgroundColor:e.palette.action.focus,[`.${i.tableData}`]:{backgroundColor:e.palette.action.hover,cursor:"pointer"},svg:{opacity:.8}},[`.${i.tableHeader}:first-of-type`]:{paddingTop:e.spacing(.5),paddingBottom:e.spacing(.5)}},tableData:{border:`1px solid ${e.palette.divider}`,lineHeight:"1.3em",padding:`${e.spacing(.5)} !important`,verticalAlign:"top"},tableHeader:{color:e.palette.text.primary,verticalAlign:"top",border:`1px solid ${e.palette.divider}`,lineHeight:"1.3em",borderLeftColor:"transparent",borderRightColor:"transparent",padding:e.spacing(.5),fontWeight:"bold !important",cursor:"pointer",width:"auto",textAlign:"left","&#expander":{width:28}},sortAsc:{borderBottomColor:e.palette.primary.main},sortDesc:{borderTopColor:e.palette.primary.main},iconButton:{margin:e.spacing(-.5),"&:hover":{backgroundColor:"transparent"}},textContent:{maxWidth:"75vw",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"}})),P=(0,d.Cl)(),re=j()((e,c)=>function(p){const a=p.getValue(),K=p.row;return Array.isArray(a)&&typeof a[0]!="object"?JSON.stringify(a):typeof a=="object"&&a!=null?(0,n.jsx)(f,{row:K,accessorPath:c,children:(0,n.jsx)(te,{value:a,accessorPath:e})}):(0,n.jsx)(k,{value:`${a}`})});function J(e){const{classes:c}=$(),{row:i}=e;return(0,n.jsx)(r.Z,{className:c.iconButton,size:"small","data-testid":`expand-row-${i.index}`,onClick:()=>{i.toggleExpanded()},children:i.getIsExpanded()?(0,n.jsx)(G.Z,{fontSize:"small"}):(0,n.jsx)(Q.Z,{fontSize:"small"})})}function X(e,c){const i=e.toJSON?.()??e;if(A(i))return[P.accessor(a=>a,{id:"typedArray",header:"",cell:a=>a.getValue()})];const p=Object.keys(i).map(a=>{const K=c.length!==0?`${c}.${a}`:a;return P.accessor(a,{header:a,id:K,cell:re(c,K)})});if(c.length===0){const a=P.display({id:"expander",header:"",cell:J});p.unshift(a)}return p}function k(e){const{classes:c}=$();return(0,n.jsx)("div",{className:c.textContent,children:e.value})}function te({value:e,accessorPath:c}){const i=c.length>0,{classes:p,cx:a}=$(),K=s.useMemo(()=>{if(e==null||typeof e!="object"||Array.isArray(e)&&typeof e[0]!="object"&&e[0]!=null)return[];const R=Array.isArray(e)?e[0]??{}:e;return X(R,c)},[c,e]),[{pageIndex:B,pageSize:F},le]=s.useState({pageIndex:0,pageSize:10}),Y=s.useMemo(()=>({pageIndex:B,pageSize:F}),[B,F]),q=s.useMemo(()=>Array.isArray(e)?e:A(e)?Array.from(e):[e],[e]),[ne,oe]=s.useState({}),m=(0,C.b7)({autoResetExpanded:!1,columns:K,data:q.slice(B*F,(B+1)*F),getCoreRowModel:(0,d.sC)(),getExpandedRowModel:(0,d.rV)(),getSortedRowModel:(0,d.tj)(),initialState:{pagination:Y},onExpandedChange:oe,manualPagination:!0,pageCount:Math.ceil(q.length/Y.pageSize),onPaginationChange:le,state:{expanded:ne,pagination:Y}});return typeof e!="object"||e==null||!i&&Array.isArray(e)&&typeof e[0]!="object"?(0,n.jsx)(M.Z,{children:"Cannot render primitive values in a table. Try using the Raw Messages panel instead."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("table",{className:p.table,children:[(0,n.jsx)("thead",{children:m.getHeaderGroups().map((R,_)=>(0,n.jsx)("tr",{className:p.tableRow,children:R.headers.map(se=>{const ee=se.column;return(0,n.jsx)("th",{className:a(p.tableHeader,{[p.sortAsc]:ee.getIsSorted()==="asc",[p.sortDesc]:ee.getIsSorted()==="desc"}),id:ee.id,onClick:se.column.getToggleSortingHandler(),"data-testid":`column-header-${v(ee.id)}`,children:(0,C.ie)(se.column.columnDef.header,se)},ee.id)})},_))}),(0,n.jsx)("tbody",{children:m.getRowModel().rows.map(R=>(0,n.jsx)("tr",{className:p.tableRow,children:R.getVisibleCells().map(_=>(0,n.jsx)("td",{className:p.tableData,children:(0,C.ie)(_.column.columnDef.cell,_.getContext())},_.id))},R.id))})]}),!i&&(0,n.jsx)(b.Z,{maxWidth:"xs",disableGutters:!0,children:(0,n.jsxs)(I.Z,{direction:"row",flexWrap:"wrap",gap:1,paddingX:.5,paddingTop:.5,alignItems:"center",children:[(0,n.jsx)(r.Z,{onClick:()=>{m.setPageIndex(0)},disabled:!m.getCanPreviousPage(),children:(0,n.jsx)(l.Z,{fontSize:"small"})}),(0,n.jsx)(r.Z,{onClick:()=>{m.previousPage()},disabled:!m.getCanPreviousPage(),children:(0,n.jsx)(S.Z,{fontSize:"small"})}),(0,n.jsxs)(U.Z,{flex:"auto",variant:"inherit",align:"center",noWrap:!0,children:["Page"," ",(0,n.jsxs)("strong",{children:[m.getState().pagination.pageIndex+1," of ",m.getPageOptions().length]})]}),(0,n.jsx)(r.Z,{onClick:()=>{m.nextPage()},disabled:!m.getCanNextPage(),children:(0,n.jsx)(u.Z,{fontSize:"small"})}),(0,n.jsx)(r.Z,{onClick:()=>{m.setPageIndex(m.getPageCount()-1)},disabled:!m.getCanNextPage(),children:(0,n.jsx)(E.Z,{fontSize:"small"})}),(0,n.jsx)(T.Z,{value:F,size:"small",onChange:R=>{m.setPageSize(Number(R.target.value))},MenuProps:{MenuListProps:{dense:!0}},children:[10,20,30,40,50].map(R=>(0,n.jsx)(N.Z,{value:R,children:`Show ${R}`},R))})]})})]})}var ce=t(2784);const de=(0,Z.ZL)()({inputWrapper:{width:"100%",lineHeight:"20px"},monospace:{fontFamily:x.R.MONOSPACE}});function ie({config:e,saveConfig:c}){const{topicPath:i}=e,{classes:p}=de(),a=ce.useCallback(m=>{c({topicPath:m})},[c]),B=ce.useMemo(()=>(0,L.ZP)(i),[i])?.topicName??"",F=(0,h.V7)({topics:[B],historySize:1})[B],le=(0,w.Iq)([i]),Y=F?.[0],q=Y?le(i,Y)??[]:[],ne=q[0],{setMessagePathDropConfig:oe}=(0,y.R)();return(0,g.useEffect)(()=>{oe({getDropStatus(m){return{canDrop:!0,effect:"replace"}},handleDrop(m){c({topicPath:m.path})}})},[oe,c]),(0,n.jsxs)(I.Z,{flex:"auto",overflow:"hidden",position:"relative",children:[(0,n.jsx)(D.Z,{children:(0,n.jsx)("div",{className:p.inputWrapper,children:(0,n.jsx)(z.ZP,{index:0,path:i,onChange:a,inputStyle:{height:20}})})}),i.length===0&&(0,n.jsx)(M.Z,{children:"No topic selected"}),i.length!==0&&q.length===0&&(0,n.jsx)(M.Z,{children:"Waiting for next message"}),i.length!==0&&ne&&(0,n.jsx)(I.Z,{overflow:"auto",className:p.monospace,children:(0,n.jsx)(te,{value:ne.value,accessorPath:""})})]})}ie.panelType="Table",ie.defaultConfig={topicPath:""};const fe=(0,W.Z)(ie)},72659:(ae,H,t)=>{t.d(H,{Hh:()=>h,bV:()=>Z});const n=M=>{const z={};for(const[L,w]of M){const W=z[L]={};for(const y of w.definitions)y.isConstant===!0&&y.value!=null&&typeof y.value!="boolean"&&(W[y.value.toString()]!=null?W[y.value.toString()]="<multiple constants match>":W[y.value.toString()]=y.name)}return z},g=/(.*)__(foxglove|webviz)_enum$/;function Z(M){return g.exec(M)?.[1]}const h=M=>{const z=n(M),L={};for(const[w,W]of M){const y={};let D={},I;for(const x of W.definitions){if(I!=null&&x.type!==I&&(D={},I=void 0),x.isConstant===!0&&x.value!=null&&typeof x.value!="boolean"){I=x.type,D[x.value.toString()]!=null?D[x.value.toString()]="<multiple constants match>":D[x.value.toString()]=x.name;continue}const Q=Z(x.name);if(Q!=null){const G=z[x.type];G&&(y[Q]=G);continue}y[x.name]||(Object.keys(D).length>0&&(y[x.name]=D),D={})}Object.keys(y).length>0&&(L[w]=y)}return L}}}]);

//# sourceMappingURL=4933.64bc9bd2cabfcf522cfa.js.map