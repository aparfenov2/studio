"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4446],{14571:(P,c,e)=>{e.d(c,{o:()=>d});var s=e(52322),n=e(2784);class d extends n.Component{state={hadError:!1};componentDidCatch(f){this.setState({hadError:!0}),this.props.onError(f)}render(){return this.state.hadError?(0,s.jsx)(s.Fragment,{}):this.props.children}}},24446:(P,c,e)=>{e.r(c),e.d(c,{default:()=>O});var s=e(52322),n=e(2784),d=e(28316),m=e(75845),f=e(14571),j=e(75017),y=e(14123),M=e(38677),T=e(76635),D=e(38215),v=e(29268),A=e(93812),B=e(88724);function L(r,t){return{general:{label:"General",fields:{topic:{label:"Topic",input:"autocomplete",value:r.topic,items:t.map(u=>u.name)}},children:{}}}}function Z(r){const{context:t}=r,{saveState:i}=t,[u,R]=(0,n.useState)([]),[h,H]=(0,n.useState)(()=>{const o=t.initialState,{topic:l}=o;return{topic:l}}),E=(0,n.useCallback)(o=>{o.action==="update"&&H(l=>{const x={...l};return(0,T.set)(x,o.payload.path.slice(1),o.payload.value),x})},[]),[C,G]=(0,n.useState)(()=>()=>{}),[K,U]=(0,n.useState)("light");(0,n.useLayoutEffect)(()=>{t.watch("topics"),t.watch("colorScheme"),t.onRender=(o,l)=>{R(o.topics??[]),G(()=>l),o.colorScheme&&U(o.colorScheme)}},[t]),(0,n.useEffect)(()=>{const o=L(h,u);t.updatePanelSettingsEditor({actionHandler:E,nodes:o}),i(h)},[h,t,i,E,u]);const{topic:a}=h;(0,n.useLayoutEffect)(()=>{if(a)return t.advertise?.(a,"std_msgs/String",{datatypes:new Map([["std_msgs/String",D.ros1["std_msgs/String"]]])}),()=>{t.unadvertise?.(a)}},[t,a]),(0,n.useLayoutEffect)(()=>{C()},[C]);const g=t.publish!=null,S=Boolean(a);return(0,s.jsx)(B.Z,{isDark:K==="dark",children:(0,s.jsxs)(A.Z,{fullHeight:!0,justifyContent:"center",alignItems:"center",style:{padding:"min(5%, 8px)",textAlign:"center"},children:[!g&&(0,s.jsx)(v.Z,{children:"Please connect to a datasource that supports publishing in order to use this panel"}),g&&!S&&(0,s.jsx)(v.Z,{children:"Please select a publish topic in the panel settings"}),(0,s.jsx)(M.Z,{onClick:()=>{g&&S&&t.publish?.(a,{data:"go"})},children:"Lets Go!"})]})})}function I(r,t){return d.render((0,s.jsx)(n.StrictMode,{children:(0,s.jsx)(f.o,{onError:r,children:(0,s.jsx)(Z,{context:t})})}),t.panelElement),()=>{d.unmountComponentAtNode(t.panelElement)}}function p(r){const t=(0,m.iY)(),i=(0,n.useMemo)(()=>I.bind(void 0,t),[t]);return(0,s.jsx)(y._,{config:r.config,saveConfig:r.saveConfig,initPanel:i,highestSupportedConfigVersion:1})}p.panelType="Mower",p.defaultConfig={};const O=(0,j.Z)(p)}}]);

//# sourceMappingURL=4446.fc8ea01fc040bf39a048.js.map