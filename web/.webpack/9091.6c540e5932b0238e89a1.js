(self.webpackChunk=self.webpackChunk||[]).push([[9091],{68217:se=>{(()=>{var q={569:function(z,S){var O,F,V;(function(D,y){F=[],O=y,V=typeof O=="function"?O.apply(S,F):O,V!==void 0&&(z.exports=V)})(this,function(){"use strict";var D=Object.prototype.hasOwnProperty,y=Object.prototype.toString,d=typeof new RegExp().sticky=="boolean";function x(i){return i&&y.call(i)==="[object RegExp]"}function c(i){return i&&typeof i=="object"&&!x(i)&&!Array.isArray(i)}function _(i){return i.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function m(i){var f=new RegExp("|"+i);return f.exec("").length-1}function h(i){return"("+i+")"}function w(i){if(!i.length)return"(?!)";var f=i.map(function(b){return"(?:"+b+")"}).join("|");return"(?:"+f+")"}function r(i){if(typeof i=="string")return"(?:"+_(i)+")";if(x(i)){if(i.ignoreCase)throw new Error("RegExp /i flag not allowed");if(i.global)throw new Error("RegExp /g flag is implied");if(i.sticky)throw new Error("RegExp /y flag is implied");if(i.multiline)throw new Error("RegExp /m flag is implied");return i.source}else throw new Error("Not a pattern: "+i)}function u(i,f){return i.length>f?i:Array(f-i.length+1).join(" ")+i}function I(i,f){for(var b=i.length,p=0;;){var T=i.lastIndexOf(`
`,b-1);if(T===-1||(p++,b=T,p===f)||b===0)break}var a=p<f?0:b+1;return i.substring(a).split(`
`)}function L(i){for(var f=Object.getOwnPropertyNames(i),b=[],p=0;p<f.length;p++){var T=f[p],a=i[T],$=[].concat(a);if(T==="include"){for(var N=0;N<$.length;N++)b.push({include:$[N]});continue}var A=[];$.forEach(function(M){c(M)?(A.length&&b.push(l(T,A)),b.push(l(T,M)),A=[]):A.push(M)}),A.length&&b.push(l(T,A))}return b}function B(i){for(var f=[],b=0;b<i.length;b++){var p=i[b];if(p.include){for(var T=[].concat(p.include),a=0;a<T.length;a++)f.push({include:T[a]});continue}if(!p.type)throw new Error("Rule has no type: "+JSON.stringify(p));f.push(l(p.type,p))}return f}function l(i,f){if(c(f)||(f={match:f}),f.include)throw new Error("Matching rules cannot also include states");var b={defaultType:i,lineBreaks:!!f.error||!!f.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var p in f)D.call(f,p)&&(b[p]=f[p]);if(typeof b.type=="string"&&i!==b.type)throw new Error("Type transform cannot be a string (type '"+b.type+"' for token '"+i+"')");var T=b.match;return b.match=Array.isArray(T)?T:T?[T]:[],b.match.sort(function(a,$){return x(a)&&x($)?0:x($)?-1:x(a)?1:$.length-a.length}),b}function E(i){return Array.isArray(i)?B(i):L(i)}var P=l("error",{lineBreaks:!0,shouldThrow:!0});function R(i,f){for(var b=null,p=Object.create(null),T=!0,a=null,$=[],N=[],A=0;A<i.length;A++)i[A].fallback&&(T=!1);for(var A=0;A<i.length;A++){var M=i[A];if(M.include)throw new Error("Inheritance is not allowed in stateless lexers");if(M.error||M.fallback){if(b)throw!M.fallback==!b.fallback?new Error("Multiple "+(M.fallback?"fallback":"error")+" rules not allowed (for token '"+M.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+M.defaultType+"')");b=M}var U=M.match.slice();if(T)for(;U.length&&typeof U[0]=="string"&&U[0].length===1;){var W=U.shift();p[W.charCodeAt(0)]=M}if(M.pop||M.push||M.next){if(!f)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+M.defaultType+"')");if(M.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+M.defaultType+"')")}if(U.length!==0){T=!1,$.push(M);for(var X=0;X<U.length;X++){var H=U[X];if(x(H)){if(a===null)a=H.unicode;else if(a!==H.unicode&&M.fallback===!1)throw new Error("If one rule is /u then all must be")}}var G=w(U.map(r)),j=new RegExp(G);if(j.test(""))throw new Error("RegExp matches empty string: "+j);var Y=m(G);if(Y>0)throw new Error("RegExp has capture groups: "+j+`
Use (?: \u2026 ) instead`);if(!M.lineBreaks&&j.test(`
`))throw new Error("Rule should declare lineBreaks: "+j);N.push(h(G))}}var Z=b&&b.fallback,J=d&&!Z?"ym":"gm",ee=d||Z?"":"|";a===!0&&(J+="u");var te=new RegExp(w(N)+ee,J);return{regexp:te,groups:$,fast:p,error:b||P}}function g(i){var f=R(E(i));return new t({start:f},"start")}function C(i,f,b){var p=i&&(i.push||i.next);if(p&&!b[p])throw new Error("Missing state '"+p+"' (in token '"+i.defaultType+"' of state '"+f+"')");if(i&&i.pop&&+i.pop!=1)throw new Error("pop must be 1 (in token '"+i.defaultType+"' of state '"+f+"')")}function v(i,f){var b=i.$all?E(i.$all):[];delete i.$all;var p=Object.getOwnPropertyNames(i);f||(f=p[0]);for(var T=Object.create(null),a=0;a<p.length;a++){var $=p[a];T[$]=E(i[$]).concat(b)}for(var a=0;a<p.length;a++)for(var $=p[a],N=T[$],A=Object.create(null),M=0;M<N.length;M++){var U=N[M];if(U.include){var W=[M,1];if(U.include!==$&&!A[U.include]){A[U.include]=!0;var X=T[U.include];if(!X)throw new Error("Cannot include nonexistent state '"+U.include+"' (in state '"+$+"')");for(var H=0;H<X.length;H++){var G=X[H];N.indexOf(G)===-1&&W.push(G)}}N.splice.apply(N,W),M--}}for(var j=Object.create(null),a=0;a<p.length;a++){var $=p[a];j[$]=R(T[$],!0)}for(var a=0;a<p.length;a++){for(var Y=p[a],Z=j[Y],J=Z.groups,M=0;M<J.length;M++)C(J[M],Y,j);for(var ee=Object.getOwnPropertyNames(Z.fast),M=0;M<ee.length;M++)C(Z.fast[ee[M]],Y,j)}return new t(j,f)}function e(i){for(var f=typeof Map<"u",b=f?new Map:Object.create(null),p=Object.getOwnPropertyNames(i),T=0;T<p.length;T++){var a=p[T],$=i[a],N=Array.isArray($)?$:[$];N.forEach(function(A){if(typeof A!="string")throw new Error("keyword must be string (in keyword '"+a+"')");f?b.set(A,a):b[A]=a})}return function(A){return f?b.get(A):b[A]}}var t=function(i,f){this.startState=f,this.states=i,this.buffer="",this.stack=[],this.reset()};t.prototype.reset=function(i,f){return this.buffer=i||"",this.index=0,this.line=f?f.line:1,this.col=f?f.col:1,this.queuedToken=f?f.queuedToken:null,this.queuedText=f?f.queuedText:"",this.queuedThrow=f?f.queuedThrow:null,this.setState(f?f.state:this.startState),this.stack=f&&f.stack?f.stack.slice():[],this},t.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},t.prototype.setState=function(i){if(!(!i||this.state===i)){this.state=i;var f=this.states[i];this.groups=f.groups,this.error=f.error,this.re=f.regexp,this.fast=f.fast}},t.prototype.popState=function(){this.setState(this.stack.pop())},t.prototype.pushState=function(i){this.stack.push(this.state),this.setState(i)};var s=d?function(i,f){return i.exec(f)}:function(i,f){var b=i.exec(f);return b[0].length===0?null:b};t.prototype._getGroup=function(i){for(var f=this.groups.length,b=0;b<f;b++)if(i[b+1]!==void 0)return this.groups[b];throw new Error("Cannot find token type for matched text")};function n(){return this.value}if(t.prototype.next=function(){var i=this.index;if(this.queuedGroup){var f=this._token(this.queuedGroup,this.queuedText,i);return this.queuedGroup=null,this.queuedText="",f}var b=this.buffer;if(i!==b.length){var $=this.fast[b.charCodeAt(i)];if($)return this._token($,b.charAt(i),i);var p=this.re;p.lastIndex=i;var T=s(p,b),a=this.error;if(T==null)return this._token(a,b.slice(i,b.length),i);var $=this._getGroup(T),N=T[0];return a.fallback&&T.index!==i?(this.queuedGroup=$,this.queuedText=N,this._token(a,b.slice(i,T.index),i)):this._token($,N,i)}},t.prototype._token=function(i,f,b){var p=0;if(i.lineBreaks){var T=/\n/g,a=1;if(f===`
`)p=1;else for(;T.exec(f);)p++,a=T.lastIndex}var $={type:typeof i.type=="function"&&i.type(f)||i.defaultType,value:typeof i.value=="function"?i.value(f):f,text:f,toString:n,offset:b,lineBreaks:p,line:this.line,col:this.col},N=f.length;if(this.index+=N,this.line+=p,p!==0?this.col=N-a+1:this.col+=N,i.shouldThrow){var A=new Error(this.formatError($,"invalid syntax"));throw A}return i.pop?this.popState():i.push?this.pushState(i.push):i.next&&this.setState(i.next),$},typeof Symbol<"u"&&Symbol.iterator){var o=function(i){this.lexer=i};o.prototype.next=function(){var i=this.lexer.next();return{value:i,done:!i}},o.prototype[Symbol.iterator]=function(){return this},t.prototype[Symbol.iterator]=function(){return new o(this)}}return t.prototype.formatError=function(i,f){if(i==null)var b=this.buffer.slice(this.index),i={text:b,offset:this.index,lineBreaks:b.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var p=2,T=Math.max(i.line-p,1),a=i.line+p,$=String(a).length,N=I(this.buffer,this.line-i.line+p+1).slice(0,5),A=[];A.push(f+" at line "+i.line+" col "+i.col+":"),A.push("");for(var M=0;M<N.length;M++){var U=N[M],W=T+M;A.push(u(String(W),$)+"  "+U),W===i.line&&A.push(u("",$+i.col+1)+"^")}return A.join(`
`)},t.prototype.clone=function(){return new t(this.states,this.state)},t.prototype.has=function(i){return!0},{compile:g,states:v,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:e}})},461:(z,S,O)=>{(function(){function F(r){return r[0]}const D=[,"struct","module","enum","const","include","typedef","union","switch","case","boolean","wstring","string","sequence","TRUE","FALSE","byte","octet","wchar","char","double","float","int8","uint8","int16","uint16","int32","uint32","int64","uint64","unsigned","short","long"].reduce((r,u)=>(r[u]=u,r),{}),y=O(569),d=y.compile({SPACE:{match:/\s+/,lineBreaks:!0},DECIMALEXP:/(?:(?:\d+\.\d*)|(?:\d*\.\d+)|(?:[0-9]+))[eE](?:[+|-])?[0-9]+/,DECIMAL:/(?:(?:\d+\.\d*)|(?:\d*\.\d+))/,INTEGER:/\d+/,COMMENT:/(?:\/\/[^\n]*)|(?:\/\*(?:.|\n)+?\*\/)/,HEX_LITERAL:/0x(?:[0-9a-fA-F])+?/,STRING:{match:/"(?:\\["\\rnu]|[^"\\])*"/,value:r=>r.slice(1,-1)},LCBR:"{",RCBR:"}",LBR:"[",RBR:"]",LT:"<",GT:">",LPAR:"(",RPAR:")",":":":",";":";",",":",",AT:"@",PND:"#",PT:".","/":"/",SIGN:/[+-]/,EQ:/=[^\n]*?/,NAME:{match:/[a-zA-Z_][a-zA-Z0-9_]*(?:\:\:[a-zA-Z][a-zA-Z0-9_]*)*/,type:y.keywords(D)}}),x=["SPACE","COMMENT"];d.next=(r=>()=>{let u;for(;(u=r.call(d))&&x.includes(u.type););return u})(d.next);function c(r){return r.join("")}function _(r){return r.filter(Boolean).reduce((u,I)=>({...u,...I}),{})}function m(){return null}function h(r){const u=parseInt(r);return isNaN(u)?r?.value?{usesConstant:!0,name:r.value}:void 0:u}var w={Lexer:d,ParserRules:[{name:"main$ebnf$1$subexpression$1$ebnf$1",symbols:[]},{name:"main$ebnf$1$subexpression$1$ebnf$1",symbols:["main$ebnf$1$subexpression$1$ebnf$1","importDcl"],postprocess:function(u){return u[0].concat([u[1]])}},{name:"main$ebnf$1$subexpression$1",symbols:["main$ebnf$1$subexpression$1$ebnf$1","definition"]},{name:"main$ebnf$1",symbols:["main$ebnf$1$subexpression$1"]},{name:"main$ebnf$1$subexpression$2$ebnf$1",symbols:[]},{name:"main$ebnf$1$subexpression$2$ebnf$1",symbols:["main$ebnf$1$subexpression$2$ebnf$1","importDcl"],postprocess:function(u){return u[0].concat([u[1]])}},{name:"main$ebnf$1$subexpression$2",symbols:["main$ebnf$1$subexpression$2$ebnf$1","definition"]},{name:"main$ebnf$1",symbols:["main$ebnf$1","main$ebnf$1$subexpression$2"],postprocess:function(u){return u[0].concat([u[1]])}},{name:"main",symbols:["main$ebnf$1"],postprocess:r=>r[0].flatMap(u=>u[1])},{name:"importDcl$subexpression$1",symbols:[d.has("STRING")?{type:"STRING"}:STRING]},{name:"importDcl$subexpression$1$ebnf$1",symbols:[]},{name:"importDcl$subexpression$1$ebnf$1$subexpression$1",symbols:[{literal:"/"},d.has("NAME")?{type:"NAME"}:NAME]},{name:"importDcl$subexpression$1$ebnf$1",symbols:["importDcl$subexpression$1$ebnf$1","importDcl$subexpression$1$ebnf$1$subexpression$1"],postprocess:function(u){return u[0].concat([u[1]])}},{name:"importDcl$subexpression$1",symbols:[{literal:"<"},d.has("NAME")?{type:"NAME"}:NAME,"importDcl$subexpression$1$ebnf$1",{literal:"."},{literal:"idl"},{literal:">"}]},{name:"importDcl",symbols:[{literal:"#"},{literal:"include"},"importDcl$subexpression$1"],postprocess:m},{name:"moduleDcl$ebnf$1$subexpression$1",symbols:["definition"]},{name:"moduleDcl$ebnf$1",symbols:["moduleDcl$ebnf$1$subexpression$1"]},{name:"moduleDcl$ebnf$1$subexpression$2",symbols:["definition"]},{name:"moduleDcl$ebnf$1",symbols:["moduleDcl$ebnf$1","moduleDcl$ebnf$1$subexpression$2"],postprocess:function(u){return u[0].concat([u[1]])}},{name:"moduleDcl",symbols:[{literal:"module"},"fieldName",{literal:"{"},"moduleDcl$ebnf$1",{literal:"}"}],postprocess:function(u){const I=u[1].name,L=u[3];return{declarator:"module",name:I,definitions:L.flat(1)}}},{name:"definition$subexpression$1",symbols:["typeDcl"]},{name:"definition$subexpression$1",symbols:["constantDcl"]},{name:"definition$subexpression$1",symbols:["moduleDcl"]},{name:"definition$subexpression$1",symbols:["union"]},{name:"definition",symbols:["multiAnnotations","definition$subexpression$1","semi"],postprocess:r=>{const u=r[0],I=r[1][0];return _([u,I])}},{name:"typeDcl$subexpression$1",symbols:["struct"]},{name:"typeDcl$subexpression$1",symbols:["typedef"]},{name:"typeDcl$subexpression$1",symbols:["enum"]},{name:"typeDcl",symbols:["typeDcl$subexpression$1"],postprocess:r=>r[0][0]},{name:"union",symbols:[{literal:"union"},"fieldName",{literal:"switch"},{literal:"("},"switchTypedef",{literal:")"},{literal:"{"},"switchBody",{literal:"}"}],postprocess:r=>{const u=r[1].name,I=r[4].type,B=r[7],l=B.find(R=>"default"in R),E=B.filter(R=>"predicates"in R),P={declarator:"union",name:u,switchType:I,cases:E};return l&&(P.defaultCase=l.default),P}},{name:"switchTypedef$subexpression$1",symbols:["customType"]},{name:"switchTypedef$subexpression$1",symbols:["numericType"]},{name:"switchTypedef$subexpression$1",symbols:["booleanType"]},{name:"switchTypedef",symbols:["switchTypedef$subexpression$1"],postprocess:r=>r[0][0]},{name:"switchBody$ebnf$1",symbols:["case"]},{name:"switchBody$ebnf$1",symbols:["switchBody$ebnf$1","case"],postprocess:function(u){return u[0].concat([u[1]])}},{name:"switchBody",symbols:["switchBody$ebnf$1"],postprocess:r=>r.flat(2)},{name:"case$ebnf$1",symbols:["caseLabel"]},{name:"case$ebnf$1",symbols:["case$ebnf$1","caseLabel"],postprocess:function(u){return u[0].concat([u[1]])}},{name:"case",symbols:["case$ebnf$1","elementSpec",{literal:";"}],postprocess:r=>{const u=r[0],I=r[1],L=u.filter(E=>E!=="default"),B=u.length!==L.length,l=[];return B&&l.push({default:I}),L.length>0&&l.push({predicates:L,type:I}),l}},{name:"caseLabel$subexpression$1",symbols:[{literal:"case"},"constExpression",{literal:":"}]},{name:"caseLabel",symbols:["caseLabel$subexpression$1"],postprocess:r=>r[0][1]},{name:"caseLabel$subexpression$2",symbols:[{literal:"default"},{literal:":"}]},{name:"caseLabel",symbols:["caseLabel$subexpression$2"],postprocess:()=>"default"},{name:"elementSpec",symbols:["typeDeclarator"],postprocess:r=>r[0]},{name:"enum$ebnf$1",symbols:[]},{name:"enum$ebnf$1$subexpression$1",symbols:[{literal:","},"enumFieldName"]},{name:"enum$ebnf$1",symbols:["enum$ebnf$1","enum$ebnf$1$subexpression$1"],postprocess:function(u){return u[0].concat([u[1]])}},{name:"enum",symbols:[{literal:"enum"},"fieldName",{literal:"{"},"enumFieldName","enum$ebnf$1",{literal:"}"}],postprocess:r=>{const u=r[1].name,I=r[3],L=r[4].flat(2).filter(B=>Boolean(B)&&B.type!==",");return{declarator:"enum",name:u,enumerators:[I,...L]}}},{name:"enumFieldName",symbols:["multiAnnotations","fieldName"],postprocess:r=>{const u=r[0],I=r[1];return _([u,I])}},{name:"struct$ebnf$1$subexpression$1",symbols:["member"]},{name:"struct$ebnf$1",symbols:["struct$ebnf$1$subexpression$1"]},{name:"struct$ebnf$1$subexpression$2",symbols:["member"]},{name:"struct$ebnf$1",symbols:["struct$ebnf$1","struct$ebnf$1$subexpression$2"],postprocess:function(u){return u[0].concat([u[1]])}},{name:"struct",symbols:[{literal:"struct"},"fieldName",{literal:"{"},"struct$ebnf$1",{literal:"}"}],postprocess:r=>{const u=r[1].name,I=r[3].flat(2).filter(L=>L!==null);return{declarator:"struct",name:u,definitions:I}}},{name:"typedef",symbols:[{literal:"typedef"},"typeDeclarator"],postprocess:([r,u])=>({declarator:"typedef",...u})},{name:"typeDeclarator$subexpression$1",symbols:["allTypes","fieldName","arrayLengths"]},{name:"typeDeclarator$subexpression$1",symbols:["allTypes","fieldName"]},{name:"typeDeclarator$subexpression$1",symbols:["sequenceType","fieldName"]},{name:"typeDeclarator",symbols:["typeDeclarator$subexpression$1"],postprocess:r=>_(r[0])},{name:"constantDcl",symbols:["constType"],postprocess:r=>r[0]},{name:"member",symbols:["fieldWithAnnotation","semi"],postprocess:r=>r[0]},{name:"fieldWithAnnotation",symbols:["multiAnnotations","fieldDcl"],postprocess:r=>{const u=r[0];return r[1].map(B=>_([u,B]))}},{name:"fieldDcl$subexpression$1",symbols:["allTypes","multiFieldNames","arrayLengths"]},{name:"fieldDcl$subexpression$1",symbols:["allTypes","multiFieldNames"]},{name:"fieldDcl$subexpression$1",symbols:["sequenceType","multiFieldNames"]},{name:"fieldDcl",symbols:["fieldDcl$subexpression$1"],postprocess:r=>r[0].splice(1,1)[0].map(L=>({..._([...r[0],L]),declarator:"struct-member"}))},{name:"multiFieldNames$ebnf$1",symbols:[]},{name:"multiFieldNames$ebnf$1$subexpression$1",symbols:[{literal:","},"fieldName"]},{name:"multiFieldNames$ebnf$1",symbols:["multiFieldNames$ebnf$1","multiFieldNames$ebnf$1$subexpression$1"],postprocess:function(u){return u[0].concat([u[1]])}},{name:"multiFieldNames",symbols:["fieldName","multiFieldNames$ebnf$1"],postprocess:r=>r.flat(2).filter(I=>I!==null&&I.name)},{name:"multiAnnotations$ebnf$1",symbols:[]},{name:"multiAnnotations$ebnf$1",symbols:["multiAnnotations$ebnf$1","annotation"],postprocess:function(u){return u[0].concat([u[1]])}},{name:"multiAnnotations",symbols:["multiAnnotations$ebnf$1"],postprocess:r=>r[0].length>0?{annotations:r[0].reduce((u,I)=>(u[I.name]=I,u),{})}:null},{name:"annotation$ebnf$1$subexpression$1",symbols:[{literal:"("},"annotationParams",{literal:")"}]},{name:"annotation$ebnf$1",symbols:["annotation$ebnf$1$subexpression$1"],postprocess:F},{name:"annotation$ebnf$1",symbols:[],postprocess:function(r){return null}},{name:"annotation",symbols:["at",d.has("NAME")?{type:"NAME"}:NAME,"annotation$ebnf$1"],postprocess:r=>{const u=r[1].value,I=r[2]?r[2][1]:void 0;if(I==null)return{type:"no-params",name:u};if(Array.isArray(I)){const L=_(I);return{type:"named-params",name:u,namedParams:L}}return{type:"const-param",value:I,name:u}}},{name:"annotationParams$subexpression$1",symbols:["multipleNamedAnnotationParams"]},{name:"annotationParams$subexpression$1",symbols:["constExpression"]},{name:"annotationParams",symbols:["annotationParams$subexpression$1"],postprocess:r=>r[0][0]},{name:"multipleNamedAnnotationParams$ebnf$1",symbols:[]},{name:"multipleNamedAnnotationParams$ebnf$1$subexpression$1",symbols:[{literal:","},"namedAnnotationParam"]},{name:"multipleNamedAnnotationParams$ebnf$1",symbols:["multipleNamedAnnotationParams$ebnf$1","multipleNamedAnnotationParams$ebnf$1$subexpression$1"],postprocess:function(u){return u[0].concat([u[1]])}},{name:"multipleNamedAnnotationParams",symbols:["namedAnnotationParam","multipleNamedAnnotationParams$ebnf$1"],postprocess:r=>[r[0],...r[1].flatMap(([,u])=>u)]},{name:"constExpression",symbols:[d.has("NAME")?{type:"NAME"}:NAME],postprocess:r=>({usesConstant:!0,name:r[0].value})},{name:"constExpression",symbols:["literal"],postprocess:r=>r[0].value},{name:"namedAnnotationParam$subexpression$1",symbols:[d.has("NAME")?{type:"NAME"}:NAME,"assignment"]},{name:"namedAnnotationParam",symbols:["namedAnnotationParam$subexpression$1"],postprocess:r=>({[r[0][0].value]:r[0][1].value})},{name:"at",symbols:[{literal:"@"}],postprocess:m},{name:"constType$subexpression$1",symbols:["constKeyword","numericType","fieldName","floatAssignment","simple"]},{name:"constType$subexpression$1",symbols:["constKeyword","numericType","fieldName","intAssignment","simple"]},{name:"constType$subexpression$1",symbols:["constKeyword","stringType","fieldName","stringAssignment","simple"]},{name:"constType$subexpression$1",symbols:["constKeyword","booleanType","fieldName","booleanAssignment","simple"]},{name:"constType$subexpression$1",symbols:["constKeyword","customType","fieldName","variableAssignment","simple"]},{name:"constType",symbols:["constType$subexpression$1"],postprocess:r=>_(r[0])},{name:"constKeyword",symbols:[{literal:"const"}],postprocess:r=>({isConstant:!0,declarator:"const"})},{name:"fieldName",symbols:[d.has("NAME")?{type:"NAME"}:NAME],postprocess:r=>({name:r[0].value})},{name:"sequenceType$ebnf$1$subexpression$1$subexpression$1",symbols:["INT"]},{name:"sequenceType$ebnf$1$subexpression$1$subexpression$1",symbols:[d.has("NAME")?{type:"NAME"}:NAME]},{name:"sequenceType$ebnf$1$subexpression$1",symbols:[{literal:","},"sequenceType$ebnf$1$subexpression$1$subexpression$1"]},{name:"sequenceType$ebnf$1",symbols:["sequenceType$ebnf$1$subexpression$1"],postprocess:F},{name:"sequenceType$ebnf$1",symbols:[],postprocess:function(r){return null}},{name:"sequenceType",symbols:[{literal:"sequence"},{literal:"<"},"allTypes","sequenceType$ebnf$1",{literal:">"}],postprocess:r=>{const u=r[3]!==null?h(r[3][1][0]):void 0;return{...r[2],isArray:!0,arrayUpperBound:u}}},{name:"arrayLengths$ebnf$1",symbols:["arrayLength"]},{name:"arrayLengths$ebnf$1",symbols:["arrayLengths$ebnf$1","arrayLength"],postprocess:function(u){return u[0].concat([u[1]])}},{name:"arrayLengths",symbols:["arrayLengths$ebnf$1"],postprocess:r=>{const u={isArray:!0},I=r.flat(2).filter(L=>L!=null);return u.arrayLengths=I,u}},{name:"arrayLength$subexpression$1",symbols:["INT"]},{name:"arrayLength$subexpression$1",symbols:[d.has("NAME")?{type:"NAME"}:NAME]},{name:"arrayLength",symbols:[{literal:"["},"arrayLength$subexpression$1",{literal:"]"}],postprocess:([,r])=>h(r?r[0]:void 0)},{name:"assignment$subexpression$1",symbols:["floatAssignment"]},{name:"assignment$subexpression$1",symbols:["intAssignment"]},{name:"assignment$subexpression$1",symbols:["stringAssignment"]},{name:"assignment$subexpression$1",symbols:["booleanAssignment"]},{name:"assignment$subexpression$1",symbols:["variableAssignment"]},{name:"assignment",symbols:["assignment$subexpression$1"],postprocess:r=>r[0][0]},{name:"floatAssignment$subexpression$1",symbols:["SIGNED_FLOAT"]},{name:"floatAssignment$subexpression$1",symbols:["FLOAT"]},{name:"floatAssignment",symbols:[d.has("EQ")?{type:"EQ"}:EQ,"floatAssignment$subexpression$1"],postprocess:([,r])=>({valueText:r[0],value:parseFloat(r[0])})},{name:"intAssignment$subexpression$1",symbols:["SIGNED_INT"]},{name:"intAssignment$subexpression$1",symbols:["INT"]},{name:"intAssignment",symbols:[d.has("EQ")?{type:"EQ"}:EQ,"intAssignment$subexpression$1"],postprocess:([,r])=>({valueText:r[0],value:parseInt(r[0])})},{name:"stringAssignment",symbols:[d.has("EQ")?{type:"EQ"}:EQ,"STR"],postprocess:([,r])=>({valueText:r,value:r})},{name:"booleanAssignment",symbols:[d.has("EQ")?{type:"EQ"}:EQ,"BOOLEAN"],postprocess:([,r])=>({valueText:r,value:r==="TRUE"})},{name:"variableAssignment",symbols:[d.has("EQ")?{type:"EQ"}:EQ,d.has("NAME")?{type:"NAME"}:NAME],postprocess:([,r])=>({valueText:r.value,value:{usesConstant:!0,name:r.value}})},{name:"allTypes$subexpression$1",symbols:["primitiveTypes"]},{name:"allTypes$subexpression$1",symbols:["customType"]},{name:"allTypes",symbols:["allTypes$subexpression$1"],postprocess:r=>r[0][0]},{name:"primitiveTypes$subexpression$1",symbols:["stringType"]},{name:"primitiveTypes$subexpression$1",symbols:["numericType"]},{name:"primitiveTypes$subexpression$1",symbols:["booleanType"]},{name:"primitiveTypes",symbols:["primitiveTypes$subexpression$1"],postprocess:r=>({...r[0][0],isComplex:!1})},{name:"customType",symbols:[d.has("NAME")?{type:"NAME"}:NAME],postprocess:r=>({type:r[0].value})},{name:"stringType$subexpression$1",symbols:[{literal:"string"}]},{name:"stringType$subexpression$1",symbols:[{literal:"wstring"}]},{name:"stringType$ebnf$1$subexpression$1$subexpression$1",symbols:["INT"]},{name:"stringType$ebnf$1$subexpression$1$subexpression$1",symbols:[d.has("NAME")?{type:"NAME"}:NAME]},{name:"stringType$ebnf$1$subexpression$1",symbols:[{literal:"<"},"stringType$ebnf$1$subexpression$1$subexpression$1",{literal:">"}]},{name:"stringType$ebnf$1",symbols:["stringType$ebnf$1$subexpression$1"],postprocess:F},{name:"stringType$ebnf$1",symbols:[],postprocess:function(r){return null}},{name:"stringType",symbols:["stringType$subexpression$1","stringType$ebnf$1"],postprocess:r=>{let u;return r[1]!==null&&(u=h(r[1][1]?r[1][1][0]:void 0)),{type:"string",upperBound:u}}},{name:"booleanType",symbols:[{literal:"boolean"}],postprocess:r=>({type:"bool"})},{name:"numericType$subexpression$1",symbols:[{literal:"byte"}]},{name:"numericType$subexpression$1",symbols:[{literal:"octet"}]},{name:"numericType$subexpression$1",symbols:[{literal:"wchar"}]},{name:"numericType$subexpression$1",symbols:[{literal:"char"}]},{name:"numericType$subexpression$1",symbols:[{literal:"long"},{literal:"double"}]},{name:"numericType$subexpression$1",symbols:[{literal:"double"}]},{name:"numericType$subexpression$1",symbols:[{literal:"float"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int8"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint8"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int16"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint16"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int32"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint32"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int64"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint64"}]},{name:"numericType$subexpression$1",symbols:[{literal:"unsigned"},{literal:"short"}]},{name:"numericType$subexpression$1",symbols:[{literal:"short"}]},{name:"numericType$subexpression$1",symbols:[{literal:"unsigned"},{literal:"long"},{literal:"long"}]},{name:"numericType$subexpression$1",symbols:[{literal:"long"},{literal:"long"}]},{name:"numericType$subexpression$1",symbols:[{literal:"unsigned"},{literal:"long"}]},{name:"numericType$subexpression$1",symbols:[{literal:"long"}]},{name:"numericType",symbols:["numericType$subexpression$1"],postprocess:r=>({type:r[0].map(I=>I?.value).filter(I=>!!I).join(" ")})},{name:"literal$subexpression$1",symbols:["booleanLiteral"]},{name:"literal$subexpression$1",symbols:["strLiteral"]},{name:"literal$subexpression$1",symbols:["floatLiteral"]},{name:"literal$subexpression$1",symbols:["intLiteral"]},{name:"literal",symbols:["literal$subexpression$1"],postprocess:r=>r[0][0]},{name:"booleanLiteral",symbols:["BOOLEAN"],postprocess:r=>({value:r[0]==="TRUE"})},{name:"strLiteral",symbols:["STR"],postprocess:r=>({value:r[0]})},{name:"floatLiteral$subexpression$1",symbols:["SIGNED_FLOAT"]},{name:"floatLiteral$subexpression$1",symbols:["FLOAT"]},{name:"floatLiteral",symbols:["floatLiteral$subexpression$1"],postprocess:r=>({value:parseFloat(r[0][0])})},{name:"intLiteral$subexpression$1",symbols:["SIGNED_INT"]},{name:"intLiteral$subexpression$1",symbols:["INT"]},{name:"intLiteral",symbols:["intLiteral$subexpression$1"],postprocess:r=>({value:parseInt(r[0][0])})},{name:"BOOLEAN$subexpression$1",symbols:[{literal:"TRUE"}]},{name:"BOOLEAN$subexpression$1",symbols:[{literal:"FALSE"}]},{name:"BOOLEAN",symbols:["BOOLEAN$subexpression$1"],postprocess:c},{name:"STR$ebnf$1",symbols:[d.has("STRING")?{type:"STRING"}:STRING]},{name:"STR$ebnf$1",symbols:["STR$ebnf$1",d.has("STRING")?{type:"STRING"}:STRING],postprocess:function(u){return u[0].concat([u[1]])}},{name:"STR",symbols:["STR$ebnf$1"],postprocess:r=>c(r.flat(1).filter(u=>u!==null))},{name:"SIGNED_FLOAT$subexpression$1",symbols:[{literal:"+"}]},{name:"SIGNED_FLOAT$subexpression$1",symbols:[{literal:"-"}]},{name:"SIGNED_FLOAT",symbols:["SIGNED_FLOAT$subexpression$1","FLOAT"],postprocess:c},{name:"FLOAT$subexpression$1",symbols:[d.has("DECIMAL")?{type:"DECIMAL"}:DECIMAL]},{name:"FLOAT$subexpression$1",symbols:[d.has("DECIMALEXP")?{type:"DECIMALEXP"}:DECIMALEXP]},{name:"FLOAT",symbols:["FLOAT$subexpression$1"],postprocess:c},{name:"FLOAT$subexpression$2",symbols:[d.has("DECIMAL")?{type:"DECIMAL"}:DECIMAL,{literal:"d"}]},{name:"FLOAT",symbols:["FLOAT$subexpression$2"],postprocess:r=>r[0][0].value},{name:"FLOAT$subexpression$3",symbols:["INT",{literal:"d"}]},{name:"FLOAT",symbols:["FLOAT$subexpression$3"],postprocess:r=>r[0][0]},{name:"SIGNED_INT$subexpression$1",symbols:[{literal:"+"}]},{name:"SIGNED_INT$subexpression$1",symbols:[{literal:"-"}]},{name:"SIGNED_INT",symbols:["SIGNED_INT$subexpression$1","INT"],postprocess:c},{name:"INT",symbols:[d.has("INTEGER")?{type:"INTEGER"}:INTEGER],postprocess:c},{name:"semi",symbols:[{literal:";"}],postprocess:m},{name:"simple",symbols:[],postprocess:()=>({isComplex:!1})}],ParserStart:"main"};typeof z.exports<"u"?z.exports=w:window.grammar=w})()},614:function(z){(function(S,O){z.exports?z.exports=O():S.nearley=O()})(this,function(){function S(c,_,m){return this.id=++S.highestId,this.name=c,this.symbols=_,this.postprocess=m,this}S.highestId=0,S.prototype.toString=function(c){var _=typeof c>"u"?this.symbols.map(x).join(" "):this.symbols.slice(0,c).map(x).join(" ")+" \u25CF "+this.symbols.slice(c).map(x).join(" ");return this.name+" \u2192 "+_};function O(c,_,m,h){this.rule=c,this.dot=_,this.reference=m,this.data=[],this.wantedBy=h,this.isComplete=this.dot===c.symbols.length}O.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},O.prototype.nextState=function(c){var _=new O(this.rule,this.dot+1,this.reference,this.wantedBy);return _.left=this,_.right=c,_.isComplete&&(_.data=_.build(),_.right=void 0),_},O.prototype.build=function(){var c=[],_=this;do c.push(_.right.data),_=_.left;while(_.left);return c.reverse(),c},O.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,y.fail))};function F(c,_){this.grammar=c,this.index=_,this.states=[],this.wants={},this.scannable=[],this.completed={}}F.prototype.process=function(c){for(var _=this.states,m=this.wants,h=this.completed,w=0;w<_.length;w++){var r=_[w];if(r.isComplete){if(r.finish(),r.data!==y.fail){for(var u=r.wantedBy,I=u.length;I--;){var L=u[I];this.complete(L,r)}if(r.reference===this.index){var B=r.rule.name;(this.completed[B]=this.completed[B]||[]).push(r)}}}else{var B=r.rule.symbols[r.dot];if(typeof B!="string"){this.scannable.push(r);continue}if(m[B]){if(m[B].push(r),h.hasOwnProperty(B))for(var l=h[B],I=0;I<l.length;I++){var E=l[I];this.complete(r,E)}}else m[B]=[r],this.predict(B)}}},F.prototype.predict=function(c){for(var _=this.grammar.byName[c]||[],m=0;m<_.length;m++){var h=_[m],w=this.wants[c],r=new O(h,0,this.index,w);this.states.push(r)}},F.prototype.complete=function(c,_){var m=c.nextState(_);this.states.push(m)};function V(c,_){this.rules=c,this.start=_||this.rules[0].name;var m=this.byName={};this.rules.forEach(function(h){m.hasOwnProperty(h.name)||(m[h.name]=[]),m[h.name].push(h)})}V.fromCompiled=function(h,_){var m=h.Lexer;h.ParserStart&&(_=h.ParserStart,h=h.ParserRules);var h=h.map(function(r){return new S(r.name,r.symbols,r.postprocess)}),w=new V(h,_);return w.lexer=m,w};function D(){this.reset("")}D.prototype.reset=function(c,_){this.buffer=c,this.index=0,this.line=_?_.line:1,this.lastLineBreak=_?-_.col:0},D.prototype.next=function(){if(this.index<this.buffer.length){var c=this.buffer[this.index++];return c===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:c}}},D.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},D.prototype.formatError=function(c,_){var m=this.buffer;if(typeof m=="string"){var h=m.split(`
`).slice(Math.max(0,this.line-5),this.line),w=m.indexOf(`
`,this.index);w===-1&&(w=m.length);var r=this.index-this.lastLineBreak,u=String(this.line).length;return _+=" at line "+this.line+" col "+r+`:

`,_+=h.map(function(L,B){return I(this.line-h.length+B+1,u)+" "+L},this).join(`
`),_+=`
`+I("",u+r)+`^
`,_}else return _+" at index "+(this.index-1);function I(L,B){var l=String(L);return Array(B-l.length+1).join(" ")+l}};function y(c,_,m){if(c instanceof V)var h=c,m=_;else var h=V.fromCompiled(c,_);this.grammar=h,this.options={keepHistory:!1,lexer:h.lexer||new D};for(var w in m||{})this.options[w]=m[w];this.lexer=this.options.lexer,this.lexerState=void 0;var r=new F(h,0),u=this.table=[r];r.wants[h.start]=[],r.predict(h.start),r.process(),this.current=0}y.fail={},y.prototype.feed=function(c){var _=this.lexer;_.reset(c,this.lexerState);for(var m;;){try{if(m=_.next(),!m)break}catch(g){var u=new F(this.grammar,this.current+1);this.table.push(u);var h=new Error(this.reportLexerError(g));throw h.offset=this.current,h.token=g.token,h}var w=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var r=this.current+1,u=new F(this.grammar,r);this.table.push(u);for(var I=m.text!==void 0?m.text:m.value,L=_.constructor===D?m.value:m,B=w.scannable,l=B.length;l--;){var E=B[l],P=E.rule.symbols[E.dot];if(P.test?P.test(L):P.type?P.type===m.type:P.literal===I){var R=E.nextState({data:L,token:m,isToken:!0,reference:r-1});u.states.push(R)}}if(u.process(),u.states.length===0){var h=new Error(this.reportError(m));throw h.offset=this.current,h.token=m,h}this.options.keepHistory&&(w.lexerState=_.save()),this.current++}return w&&(this.lexerState=_.save()),this.results=this.finish(),this},y.prototype.reportLexerError=function(c){var _,m,h=c.token;return h?(_="input "+JSON.stringify(h.text[0])+" (lexer error)",m=this.lexer.formatError(h,"Syntax error")):(_="input (lexer error)",m=c.message),this.reportErrorCommon(m,_)},y.prototype.reportError=function(c){var _=(c.type?c.type+" token: ":"")+JSON.stringify(c.value!==void 0?c.value:c),m=this.lexer.formatError(c,"Syntax error");return this.reportErrorCommon(m,_)},y.prototype.reportErrorCommon=function(c,_){var m=[];m.push(c);var h=this.table.length-2,w=this.table[h],r=w.states.filter(function(I){var L=I.rule.symbols[I.dot];return L&&typeof L!="string"});if(r.length===0)m.push("Unexpected "+_+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(w.states,m);else{m.push("Unexpected "+_+`. Instead, I was expecting to see one of the following:
`);var u=r.map(function(I){return this.buildFirstStateStack(I,[])||[I]},this);u.forEach(function(I){var L=I[0],B=L.rule.symbols[L.dot],l=this.getSymbolDisplay(B);m.push("A "+l+" based on:"),this.displayStateStack(I,m)},this)}return m.push(""),m.join(`
`)},y.prototype.displayStateStack=function(c,_){for(var m,h=0,w=0;w<c.length;w++){var r=c[w],u=r.rule.toString(r.dot);u===m?h++:(h>0&&_.push("    ^ "+h+" more lines identical to this"),h=0,_.push("    "+u)),m=u}},y.prototype.getSymbolDisplay=function(c){return d(c)},y.prototype.buildFirstStateStack=function(c,_){if(_.indexOf(c)!==-1)return null;if(c.wantedBy.length===0)return[c];var m=c.wantedBy[0],h=[c].concat(_),w=this.buildFirstStateStack(m,h);return w===null?null:[c].concat(w)},y.prototype.save=function(){var c=this.table[this.current];return c.lexerState=this.lexerState,c},y.prototype.restore=function(c){var _=c.index;this.current=_,this.table[_]=c,this.table.splice(_+1),this.lexerState=c.lexerState,this.results=this.finish()},y.prototype.rewind=function(c){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[c])},y.prototype.finish=function(){var c=[],_=this.grammar.start,m=this.table[this.table.length-1];return m.states.forEach(function(h){h.rule.name===_&&h.dot===h.rule.symbols.length&&h.reference===0&&h.data!==y.fail&&c.push(h)}),c.map(function(h){return h.data})};function d(c){var _=typeof c;if(_==="string")return c;if(_==="object"){if(c.literal)return JSON.stringify(c.literal);if(c instanceof RegExp)return"character matching "+c;if(c.type)return c.type+" token";if(c.test)return"token matching "+String(c.test);throw new Error("Unknown symbol type: "+c)}}function x(c){var _=typeof c;if(_==="string")return c;if(_==="object"){if(c.literal)return JSON.stringify(c.literal);if(c instanceof RegExp)return c.toString();if(c.type)return"%"+c.type;if(c.test)return"<"+String(c.test)+">";throw new Error("Unknown symbol type: "+c)}}return{Parser:y,Grammar:V,Rule:S}})},549:(z,S,O)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.ConstantIDLNode=void 0;const F=O(561),V=O(76),D=O(205);class y extends V.IDLNode{typeNeedsResolution=!1;constructor(x,c,_){super(x,c,_),D.SIMPLE_TYPES.has(c.type)||(this.typeNeedsResolution=!0)}get type(){return this.typeNeedsResolution?this.getReferencedEnumNode().type:this.astNode.type}referencedEnumNode=void 0;getReferencedEnumNode(){if(this.referencedEnumNode==null){const x=this.getNode(this.scopePath,this.astNode.type);if(!(x instanceof F.EnumIDLNode))throw new Error(`Expected ${this.astNode.type} to be an enum in ${this.scopedIdentifier}`);this.referencedEnumNode=x}return this.referencedEnumNode}get isConstant(){return!0}get value(){return typeof this.astNode.value=="object"?this.getConstantNode(this.astNode.value.name).value:this.astNode.value}toIDLMessageDefinitionField(){return{name:this.name,type:(0,D.normalizeType)(this.type),value:this.value,isConstant:!0,isComplex:!1,...this.astNode.valueText!=null?{valueText:this.astNode.valueText}:void 0}}}S.ConstantIDLNode=y},561:(z,S,O)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.EnumIDLNode=void 0;const F=O(76);class V extends F.IDLNode{constructor(y,d,x){super(y,d,x)}get type(){return"uint32"}enumeratorNodes(){return this.astNode.enumerators.map(y=>this.getConstantNode((0,F.toScopedIdentifier)([...this.scopePath,this.name,y.name])))}toIDLMessageDefinition(){const y=this.enumeratorNodes().map(d=>d.toIDLMessageDefinitionField());return{name:(0,F.toScopedIdentifier)([...this.scopePath,this.name]),definitions:y,aggregatedKind:"module"}}}S.EnumIDLNode=V},76:(z,S)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.toScopedIdentifier=S.IDLNode=void 0;class O{map;astNode;scopePath;constructor(y,d,x){this.scopePath=y,this.astNode=d,this.map=x}get declarator(){return this.astNode.declarator}get name(){return this.astNode.name}get annotations(){return this.astNode.annotations}get scopedIdentifier(){return V([...this.scopePath,this.name])}getNode(y,d){const x=F({usedIdentifier:d,scopeOfUsage:y,definitionMap:this.map});if(x==null)throw new Error(`Could not find node ${d} in ${y.join("::")} referenced by ${this.scopedIdentifier}`);return x}getConstantNode(y,d=this.scopePath){const x=this.getNode(d,y);if(x.declarator!=="const")throw new Error(`Expected ${this.name} to be a constant in ${this.scopedIdentifier}`);return x}}S.IDLNode=O;function F({usedIdentifier:D,scopeOfUsage:y,definitionMap:d}){let x;const c=[...y],_=[];for(;;){const m=V([..._,D]);if(x=d.get(m),x!=null||c.length===0)break;_.push(c.shift())}return x}function V(D){return D.join("::")}S.toScopedIdentifier=V},667:(z,S,O)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.ModuleIDLNode=void 0;const F=O(549),V=O(76);class D extends V.IDLNode{constructor(d,x,c){super(d,x,c)}toIDLMessageDefinition(){const d=this.definitions.flatMap(x=>x instanceof F.ConstantIDLNode?[x.toIDLMessageDefinitionField()]:[]);if(d.length!==0)return{name:this.scopedIdentifier,definitions:d,aggregatedKind:"module"}}get definitions(){return this.astNode.definitions.map(d=>this.getNode([...this.scopePath,this.name],d.name))}}S.ModuleIDLNode=D},212:(z,S,O)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.ReferenceTypeIDLNode=void 0;const F=O(76),V=O(205);class D extends F.IDLNode{typeNeedsResolution=!1;typeRefNode;constructor(d,x,c){super(d,x,c),V.SIMPLE_TYPES.has(x.type)||(this.typeNeedsResolution=!0)}get type(){if(this.typeNeedsResolution){const d=this.typeRef();return d.declarator==="typedef"||d.declarator==="enum"?d.type:d.scopedIdentifier}return this.astNode.type}get isComplex(){if(!this.typeNeedsResolution)return!1;const d=this.typeRef();return d.declarator==="typedef"?d.isComplex:d.declarator==="struct"||d.declarator==="union"}get isArray(){let d=this.astNode.isArray;if(this.typeNeedsResolution){const x=this.typeRef();x.declarator==="typedef"&&(d||=x.isArray)}return d}get arrayLengths(){const d=this.astNode.arrayLengths?[...this.astNode.arrayLengths]:[];if(this.typeNeedsResolution){const c=this.typeRef();c.declarator==="typedef"&&c.arrayLengths&&d.push(...c.arrayLengths)}const x=[];for(const c of d){const _=this.resolvePossibleNumericConstantUsage(c);_!=null&&x.push(_)}return x.length>0?x:void 0}get arrayUpperBound(){let d;if(this.typeNeedsResolution){const x=this.typeRef();x.declarator==="typedef"&&(d=x.arrayUpperBound)}return this.astNode.arrayUpperBound!=null&&(d=this.astNode.arrayUpperBound),this.resolvePossibleNumericConstantUsage(d)}get upperBound(){let d;if(this.typeNeedsResolution){const x=this.typeRef();x.declarator==="typedef"&&(d=x.upperBound)}return this.astNode.upperBound!=null&&(d=this.astNode.upperBound),this.resolvePossibleNumericConstantUsage(d)}get annotations(){let d;if(this.typeNeedsResolution){const x=this.typeRef();x.declarator==="typedef"&&x.annotations!=null&&(d={...x.annotations})}return this.astNode.annotations!=null&&(d={...d,...this.astNode.annotations}),d}resolvePossibleNumericConstantUsage(d){if(typeof d=="number"||d==null)return d;const x=d.name,c=this.getConstantNode(x).value;if(typeof c!="number")throw Error(`Expected constant value ${x} in ${this.scopedIdentifier} to be a number, but got ${c.toString()}`);return c}getValidTypeReference(d){const x=this.getNode(this.scopePath,d);if(x.declarator!=="struct"&&x.declarator!=="typedef"&&x.declarator!=="union"&&x.declarator!=="enum")throw new Error(`Expected ${d} to be non-module, non-constant type in ${this.scopedIdentifier}`);return x}typeRef(){if(this.typeRefNode==null&&(this.typeRefNode=this.getValidTypeReference(this.astNode.type)),!(this.typeRefNode instanceof D))return this.typeRefNode;if(this.astNode.isArray===!0&&this.typeRefNode.isArray===!0){const d=this.astNode.arrayLengths!=null,x=this.typeRefNode.arrayLengths!=null;if(!d||!x)throw new Error(`We do not support composing variable length arrays with typedefs: ${this.scopedIdentifier} referencing ${this.typeRefNode.scopedIdentifier}`)}return this.typeRefNode}}S.ReferenceTypeIDLNode=D},801:(z,S,O)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.StructIDLNode=void 0;const F=O(76);class V extends F.IDLNode{constructor(y,d,x){super(y,d,x)}get type(){return this.astNode.name}get definitions(){return this.astNode.definitions.map(y=>this.getStructMemberNode(y.name))}toIDLMessageDefinition(){const y=this.definitions.map(d=>d.toIDLMessageDefinitionField());return{name:this.scopedIdentifier,definitions:y,aggregatedKind:"struct",...this.astNode.annotations?{annotations:this.astNode.annotations}:void 0}}getStructMemberNode(y){const d=this.getNode([...this.scopePath,this.name],y);if(d.declarator!=="struct-member")throw new Error(`Expected ${y} to be a struct member in ${this.scopedIdentifier}`);return d}}S.StructIDLNode=V},605:(z,S,O)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.StructMemberIDLNode=void 0;const F=O(212),V=O(205);class D extends F.ReferenceTypeIDLNode{constructor(d,x,c){super(d,x,c)}toIDLMessageDefinitionField(){const d={name:this.name,type:(0,V.normalizeType)(this.type),isComplex:this.isComplex};this.arrayLengths!=null&&(d.arrayLengths=this.arrayLengths),this.arrayUpperBound!=null&&(d.arrayUpperBound=this.arrayUpperBound),this.upperBound!=null&&(d.upperBound=this.upperBound),this.annotations!=null&&(d.annotations=this.annotations),this.isArray!=null&&(d.isArray=this.isArray);const x=this.annotations?.default;if(x&&x.type!=="no-params"){const c=x.type==="const-param"?x.value:x.namedParams.value;typeof c!="object"?d.defaultValue=c:d.defaultValue=this.getConstantNode(c.name).value}return d}}S.StructMemberIDLNode=D},647:(z,S,O)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.TypedefIDLNode=void 0;const F=O(212);class V extends F.ReferenceTypeIDLNode{constructor(y,d,x){super(y,d,x)}}S.TypedefIDLNode=V},57:(z,S,O)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.UnionIDLNode=void 0;const F=O(76),V=O(605),D=O(205);class y extends F.IDLNode{switchTypeNeedsResolution=!1;constructor(c,_,m){super(c,_,m),D.SIMPLE_TYPES.has(this.astNode.switchType)||(this.switchTypeNeedsResolution=!0)}get type(){return this.astNode.name}get isComplex(){return!0}_switchTypeNode;switchTypeNode(){if(this._switchTypeNode)return this._switchTypeNode;const c=this.getNode(this.scopePath,this.astNode.switchType);if(c.declarator!=="enum"&&c.declarator!=="typedef")throw new Error(`Invalid switch type "${c.scopedIdentifier}" ${this.astNode.switchType} in ${this.scopedIdentifier}`);return this._switchTypeNode=c,c}get switchType(){let c=this.astNode.switchType;if(this.switchTypeNeedsResolution&&(c=this.switchTypeNode().type),!d(c))throw new Error(`Invalid resolved switch type ${c} in ${this.scopedIdentifier}`);return c}get cases(){const _=this.switchTypeNeedsResolution&&this.switchTypeNode().declarator==="enum"?this.switchTypeNode().scopedIdentifier.split("::"):this.scopePath;return this.astNode.cases.map(m=>{const h=new V.StructMemberIDLNode([...this.scopePath,this.name],{...m.type,declarator:"struct-member"},this.map),w=m.predicates.map(u=>typeof u=="object"?this.getConstantNode(u.name,_).value:u);return{type:h.toIDLMessageDefinitionField(),predicates:w}})}get defaultCase(){return this.astNode.defaultCase?new V.StructMemberIDLNode([...this.scopePath,this.name],{...this.astNode.defaultCase,declarator:"struct-member"},this.map).toIDLMessageDefinitionField():void 0}toIDLMessageDefinition(){const c=this.annotations;return{name:this.scopedIdentifier,switchType:this.switchType,cases:this.cases,aggregatedKind:"union",...this.astNode.defaultCase?{defaultCase:this.defaultCase}:void 0,...c?{annotations:c}:void 0}}}S.UnionIDLNode=y;function d(x){return D.INTEGER_TYPES.has(x)||x==="bool"}},732:function(z,S,O){"use strict";var F=this&&this.__createBinding||(Object.create?function(D,y,d,x){x===void 0&&(x=d);var c=Object.getOwnPropertyDescriptor(y,d);(!c||("get"in c?!y.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return y[d]}}),Object.defineProperty(D,x,c)}:function(D,y,d,x){x===void 0&&(x=d),D[x]=y[d]}),V=this&&this.__exportStar||function(D,y){for(var d in D)d!=="default"&&!Object.prototype.hasOwnProperty.call(y,d)&&F(y,D,d)};Object.defineProperty(S,"__esModule",{value:!0}),V(O(549),S),V(O(561),S),V(O(76),S),V(O(667),S),V(O(801),S),V(O(605),S),V(O(647),S)},654:function(z,S,O){"use strict";var F=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}};Object.defineProperty(S,"__esModule",{value:!0}),S.IDL_GRAMMAR=void 0;const V=O(614),D=F(O(461));S.IDL_GRAMMAR=V.Grammar.fromCompiled(D.default)},715:function(z,S,O){"use strict";var F=this&&this.__createBinding||(Object.create?function(D,y,d,x){x===void 0&&(x=d);var c=Object.getOwnPropertyDescriptor(y,d);(!c||("get"in c?!y.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return y[d]}}),Object.defineProperty(D,x,c)}:function(D,y,d,x){x===void 0&&(x=d),D[x]=y[d]}),V=this&&this.__exportStar||function(D,y){for(var d in D)d!=="default"&&!Object.prototype.hasOwnProperty.call(y,d)&&F(y,D,d)};Object.defineProperty(S,"__esModule",{value:!0}),V(O(494),S),V(O(862),S)},494:(z,S,O)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseIDL=void 0;const F=O(171),V=O(940);function D(y){const d=(0,F.parseIDLToAST)(y),x=(0,V.buildMap)(d);return(0,V.toIDLMessageDefinitions)(x)}S.parseIDL=D},171:(z,S,O)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseIDLToAST=void 0;const F=O(614),V=O(654);function D(y){const d=new F.Parser(V.IDL_GRAMMAR);d.feed(y),d.finish();const x=d.results;if(x.length===0)throw new Error(`Could not parse message definition (unexpected end of input): '${y}'`);if(x.length>1)throw new Error(`Ambiguous grammar: '${y}'`);return x[0]}S.parseIDLToAST=D},205:(z,S)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.normalizeType=S.SIMPLE_TYPES=S.INTEGER_TYPES=void 0;const O={"unsigned short":"uint16","unsigned long":"uint32","unsigned long long":"uint64",short:"int16",long:"int32","long long":"int64",double:"float64",float:"float32",octet:"uint8",wchar:"uint8",char:"uint8",byte:"int8"};S.INTEGER_TYPES=new Set(["int8","uint8","int16","uint16","int32","uint32","int64","uint64","char","byte","octet","unsigned short","unsigned long","unsigned long long","short","long","long long"]),S.SIMPLE_TYPES=new Set(["bool","string","int8","uint8","int16","uint16","int32","uint32","int64","uint64",...Object.keys(O)]);function F(V){const D=O[V];return D??V}S.normalizeType=F},940:(z,S,O)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.toIDLMessageDefinitions=S.buildMap=void 0;const F=O(732),V=O(57);function D(_){const m=new Map;for(const h of _)c([h],w=>{const r=w[w.length-1],u=w.map(B=>B.name),I=u.slice(0,-1),L=x(I,r,m);if(m.set(L.scopedIdentifier,L),r.declarator==="enum"){let B=0;const l=r.enumerators.map(E=>({declarator:"const",isConstant:!0,name:E.name,type:"unsigned long",value:y(E.annotations)??B++,isComplex:!1}));for(const E of l){const P=new F.ConstantIDLNode(u,E,m);m.set(P.scopedIdentifier,P)}}});return m}S.buildMap=D;function y(_){if(!_)return;const m=_.value;if(m&&m.type==="const-param")return m.value}function d(_){const m=[],h=[];for(const w of _.values())if(w.declarator==="struct")m.push(w.toIDLMessageDefinition());else if(w.declarator==="module"){const r=w.toIDLMessageDefinition();r!=null&&m.push(r)}else w.declarator==="const"?w.scopePath.length===0&&h.push(w.toIDLMessageDefinitionField()):(w.declarator==="enum"||w.declarator==="union")&&m.push(w.toIDLMessageDefinition());return h.length>0&&m.push({name:"",definitions:h,aggregatedKind:"module"}),m}S.toIDLMessageDefinitions=d;const x=(_,m,h)=>{switch(m.declarator){case"module":return new F.ModuleIDLNode(_,m,h);case"enum":return new F.EnumIDLNode(_,m,h);case"const":return new F.ConstantIDLNode(_,m,h);case"struct":return new F.StructIDLNode(_,m,h);case"struct-member":return new F.StructMemberIDLNode(_,m,h);case"typedef":return new F.TypedefIDLNode(_,m,h);case"union":return new V.UnionIDLNode(_,m,h)}};function c(_,m){const h=_[_.length-1];"definitions"in h&&h.definitions.forEach(w=>c([..._,w],m)),m(_)}},862:(z,S)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0})}},Q={};function K(z){var S=Q[z];if(S!==void 0)return S.exports;var O=Q[z]={exports:{}};return q[z].call(O.exports,O,O.exports,K),O.exports}var k=K(715);se.exports=k})()},25490:function(se,q,Q){"use strict";var K=this&&this.__createBinding||(Object.create?function(z,S,O,F){F===void 0&&(F=O);var V=Object.getOwnPropertyDescriptor(S,O);(!V||("get"in V?!S.__esModule:V.writable||V.configurable))&&(V={enumerable:!0,get:function(){return S[O]}}),Object.defineProperty(z,F,V)}:function(z,S,O,F){F===void 0&&(F=O),z[F]=S[O]}),k=this&&this.__exportStar||function(z,S){for(var O in z)O!=="default"&&!Object.prototype.hasOwnProperty.call(S,O)&&K(S,z,O)};Object.defineProperty(q,"__esModule",{value:!0}),k(Q(41738),q),k(Q(14809),q)},10955:se=>{(()=>{var q={27:function(z,S,O){"use strict";var F=this&&this.__createBinding||(Object.create?function(D,y,d,x){x===void 0&&(x=d);var c=Object.getOwnPropertyDescriptor(y,d);(!c||("get"in c?!y.__esModule:c.writable||c.configurable))&&(c={enumerable:!0,get:function(){return y[d]}}),Object.defineProperty(D,x,c)}:function(D,y,d,x){x===void 0&&(x=d),D[x]=y[d]}),V=this&&this.__exportStar||function(D,y){for(var d in D)d!=="default"&&!Object.prototype.hasOwnProperty.call(y,d)&&F(y,D,d)};Object.defineProperty(S,"__esModule",{value:!0}),V(O(526),S)},526:(z,S,O)=>{"use strict";Object.defineProperty(S,"__esModule",{value:!0}),S.parseRos2idl=void 0;const F=O(394);function V(c){const _=c.replaceAll(y,""),h=(0,F.parseIDL)(_).map(D);for(const w of h){w.name=x(w.name);for(const r of w.definitions)r.type=x(r.type);if(w.name==="builtin_interfaces/msg/Time"||w.name==="builtin_interfaces/msg/Duration")for(const r of w.definitions)r.name==="nanosec"&&(r.name="nsec")}return h}S.parseRos2idl=V;function D(c){if(c.aggregatedKind==="union")throw new Error("Unions are not supported in MessageDefinition type");const{definitions:_,annotations:m,aggregatedKind:h,...w}=c,r=_.map(u=>{const{annotations:I,arrayLengths:L,...B}=u,l={...B};if(L!=null){if(L.length>1)throw new Error("Multi-dimensional arrays are not supported in MessageDefinition type");const[E]=L;l.arrayLength=E}return l});return{...w,definitions:r}}const y=/={80}\nIDL: [a-zA-Z][\w]+(?:\/[a-zA-Z][\w]+)*/g;function d(c){return c.replaceAll("::","/")}function x(c){return c.includes("::")?d(c):c}},394:z=>{(()=>{var S={569:function(D,y){var d,x,c;(function(_,m){x=[],d=m,c=typeof d=="function"?d.apply(y,x):d,c!==void 0&&(D.exports=c)})(this,function(){"use strict";var _=Object.prototype.hasOwnProperty,m=Object.prototype.toString,h=typeof new RegExp().sticky=="boolean";function w(a){return a&&m.call(a)==="[object RegExp]"}function r(a){return a&&typeof a=="object"&&!w(a)&&!Array.isArray(a)}function u(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function I(a){var $=new RegExp("|"+a);return $.exec("").length-1}function L(a){return"("+a+")"}function B(a){if(!a.length)return"(?!)";var $=a.map(function(N){return"(?:"+N+")"}).join("|");return"(?:"+$+")"}function l(a){if(typeof a=="string")return"(?:"+u(a)+")";if(w(a)){if(a.ignoreCase)throw new Error("RegExp /i flag not allowed");if(a.global)throw new Error("RegExp /g flag is implied");if(a.sticky)throw new Error("RegExp /y flag is implied");if(a.multiline)throw new Error("RegExp /m flag is implied");return a.source}else throw new Error("Not a pattern: "+a)}function E(a,$){return a.length>$?a:Array($-a.length+1).join(" ")+a}function P(a,$){for(var N=a.length,A=0;;){var M=a.lastIndexOf(`
`,N-1);if(M===-1||(A++,N=M,A===$)||N===0)break}var U=A<$?0:N+1;return a.substring(U).split(`
`)}function R(a){for(var $=Object.getOwnPropertyNames(a),N=[],A=0;A<$.length;A++){var M=$[A],U=a[M],W=[].concat(U);if(M==="include"){for(var X=0;X<W.length;X++)N.push({include:W[X]});continue}var H=[];W.forEach(function(G){r(G)?(H.length&&N.push(C(M,H)),N.push(C(M,G)),H=[]):H.push(G)}),H.length&&N.push(C(M,H))}return N}function g(a){for(var $=[],N=0;N<a.length;N++){var A=a[N];if(A.include){for(var M=[].concat(A.include),U=0;U<M.length;U++)$.push({include:M[U]});continue}if(!A.type)throw new Error("Rule has no type: "+JSON.stringify(A));$.push(C(A.type,A))}return $}function C(a,$){if(r($)||($={match:$}),$.include)throw new Error("Matching rules cannot also include states");var N={defaultType:a,lineBreaks:!!$.error||!!$.fallback,pop:!1,next:null,push:null,error:!1,fallback:!1,value:null,type:null,shouldThrow:!1};for(var A in $)_.call($,A)&&(N[A]=$[A]);if(typeof N.type=="string"&&a!==N.type)throw new Error("Type transform cannot be a string (type '"+N.type+"' for token '"+a+"')");var M=N.match;return N.match=Array.isArray(M)?M:M?[M]:[],N.match.sort(function(U,W){return w(U)&&w(W)?0:w(W)?-1:w(U)?1:W.length-U.length}),N}function v(a){return Array.isArray(a)?g(a):R(a)}var e=C("error",{lineBreaks:!0,shouldThrow:!0});function t(a,$){for(var N=null,A=Object.create(null),M=!0,U=null,W=[],X=[],H=0;H<a.length;H++)a[H].fallback&&(M=!1);for(var H=0;H<a.length;H++){var G=a[H];if(G.include)throw new Error("Inheritance is not allowed in stateless lexers");if(G.error||G.fallback){if(N)throw!G.fallback==!N.fallback?new Error("Multiple "+(G.fallback?"fallback":"error")+" rules not allowed (for token '"+G.defaultType+"')"):new Error("fallback and error are mutually exclusive (for token '"+G.defaultType+"')");N=G}var j=G.match.slice();if(M)for(;j.length&&typeof j[0]=="string"&&j[0].length===1;){var Y=j.shift();A[Y.charCodeAt(0)]=G}if(G.pop||G.push||G.next){if(!$)throw new Error("State-switching options are not allowed in stateless lexers (for token '"+G.defaultType+"')");if(G.fallback)throw new Error("State-switching options are not allowed on fallback tokens (for token '"+G.defaultType+"')")}if(j.length!==0){M=!1,W.push(G);for(var Z=0;Z<j.length;Z++){var J=j[Z];if(w(J)){if(U===null)U=J.unicode;else if(U!==J.unicode&&G.fallback===!1)throw new Error("If one rule is /u then all must be")}}var ee=B(j.map(l)),te=new RegExp(ee);if(te.test(""))throw new Error("RegExp matches empty string: "+te);var re=I(ee);if(re>0)throw new Error("RegExp has capture groups: "+te+`
Use (?: \u2026 ) instead`);if(!G.lineBreaks&&te.test(`
`))throw new Error("Rule should declare lineBreaks: "+te);X.push(L(ee))}}var ne=N&&N.fallback,ie=h&&!ne?"ym":"gm",oe=h||ne?"":"|";U===!0&&(ie+="u");var ae=new RegExp(B(X)+oe,ie);return{regexp:ae,groups:W,fast:A,error:N||e}}function s(a){var $=t(v(a));return new f({start:$},"start")}function n(a,$,N){var A=a&&(a.push||a.next);if(A&&!N[A])throw new Error("Missing state '"+A+"' (in token '"+a.defaultType+"' of state '"+$+"')");if(a&&a.pop&&+a.pop!=1)throw new Error("pop must be 1 (in token '"+a.defaultType+"' of state '"+$+"')")}function o(a,$){var N=a.$all?v(a.$all):[];delete a.$all;var A=Object.getOwnPropertyNames(a);$||($=A[0]);for(var M=Object.create(null),U=0;U<A.length;U++){var W=A[U];M[W]=v(a[W]).concat(N)}for(var U=0;U<A.length;U++)for(var W=A[U],X=M[W],H=Object.create(null),G=0;G<X.length;G++){var j=X[G];if(j.include){var Y=[G,1];if(j.include!==W&&!H[j.include]){H[j.include]=!0;var Z=M[j.include];if(!Z)throw new Error("Cannot include nonexistent state '"+j.include+"' (in state '"+W+"')");for(var J=0;J<Z.length;J++){var ee=Z[J];X.indexOf(ee)===-1&&Y.push(ee)}}X.splice.apply(X,Y),G--}}for(var te=Object.create(null),U=0;U<A.length;U++){var W=A[U];te[W]=t(M[W],!0)}for(var U=0;U<A.length;U++){for(var re=A[U],ne=te[re],ie=ne.groups,G=0;G<ie.length;G++)n(ie[G],re,te);for(var oe=Object.getOwnPropertyNames(ne.fast),G=0;G<oe.length;G++)n(ne.fast[oe[G]],re,te)}return new f(te,$)}function i(a){for(var $=typeof Map<"u",N=$?new Map:Object.create(null),A=Object.getOwnPropertyNames(a),M=0;M<A.length;M++){var U=A[M],W=a[U],X=Array.isArray(W)?W:[W];X.forEach(function(H){if(typeof H!="string")throw new Error("keyword must be string (in keyword '"+U+"')");$?N.set(H,U):N[H]=U})}return function(H){return $?N.get(H):N[H]}}var f=function(a,$){this.startState=$,this.states=a,this.buffer="",this.stack=[],this.reset()};f.prototype.reset=function(a,$){return this.buffer=a||"",this.index=0,this.line=$?$.line:1,this.col=$?$.col:1,this.queuedToken=$?$.queuedToken:null,this.queuedText=$?$.queuedText:"",this.queuedThrow=$?$.queuedThrow:null,this.setState($?$.state:this.startState),this.stack=$&&$.stack?$.stack.slice():[],this},f.prototype.save=function(){return{line:this.line,col:this.col,state:this.state,stack:this.stack.slice(),queuedToken:this.queuedToken,queuedText:this.queuedText,queuedThrow:this.queuedThrow}},f.prototype.setState=function(a){if(!(!a||this.state===a)){this.state=a;var $=this.states[a];this.groups=$.groups,this.error=$.error,this.re=$.regexp,this.fast=$.fast}},f.prototype.popState=function(){this.setState(this.stack.pop())},f.prototype.pushState=function(a){this.stack.push(this.state),this.setState(a)};var b=h?function(a,$){return a.exec($)}:function(a,$){var N=a.exec($);return N[0].length===0?null:N};f.prototype._getGroup=function(a){for(var $=this.groups.length,N=0;N<$;N++)if(a[N+1]!==void 0)return this.groups[N];throw new Error("Cannot find token type for matched text")};function p(){return this.value}if(f.prototype.next=function(){var a=this.index;if(this.queuedGroup){var $=this._token(this.queuedGroup,this.queuedText,a);return this.queuedGroup=null,this.queuedText="",$}var N=this.buffer;if(a!==N.length){var W=this.fast[N.charCodeAt(a)];if(W)return this._token(W,N.charAt(a),a);var A=this.re;A.lastIndex=a;var M=b(A,N),U=this.error;if(M==null)return this._token(U,N.slice(a,N.length),a);var W=this._getGroup(M),X=M[0];return U.fallback&&M.index!==a?(this.queuedGroup=W,this.queuedText=X,this._token(U,N.slice(a,M.index),a)):this._token(W,X,a)}},f.prototype._token=function(a,$,N){var A=0;if(a.lineBreaks){var M=/\n/g,U=1;if($===`
`)A=1;else for(;M.exec($);)A++,U=M.lastIndex}var W={type:typeof a.type=="function"&&a.type($)||a.defaultType,value:typeof a.value=="function"?a.value($):$,text:$,toString:p,offset:N,lineBreaks:A,line:this.line,col:this.col},X=$.length;if(this.index+=X,this.line+=A,A!==0?this.col=X-U+1:this.col+=X,a.shouldThrow){var H=new Error(this.formatError(W,"invalid syntax"));throw H}return a.pop?this.popState():a.push?this.pushState(a.push):a.next&&this.setState(a.next),W},typeof Symbol<"u"&&Symbol.iterator){var T=function(a){this.lexer=a};T.prototype.next=function(){var a=this.lexer.next();return{value:a,done:!a}},T.prototype[Symbol.iterator]=function(){return this},f.prototype[Symbol.iterator]=function(){return new T(this)}}return f.prototype.formatError=function(a,$){if(a==null)var N=this.buffer.slice(this.index),a={text:N,offset:this.index,lineBreaks:N.indexOf(`
`)===-1?0:1,line:this.line,col:this.col};var A=2,M=Math.max(a.line-A,1),U=a.line+A,W=String(U).length,X=P(this.buffer,this.line-a.line+A+1).slice(0,5),H=[];H.push($+" at line "+a.line+" col "+a.col+":"),H.push("");for(var G=0;G<X.length;G++){var j=X[G],Y=M+G;H.push(E(String(Y),W)+"  "+j),Y===a.line&&H.push(E("",W+a.col+1)+"^")}return H.join(`
`)},f.prototype.clone=function(){return new f(this.states,this.state)},f.prototype.has=function(a){return!0},{compile:s,states:o,error:Object.freeze({error:!0}),fallback:Object.freeze({fallback:!0}),keywords:i}})},461:(D,y,d)=>{(function(){function x(l){return l[0]}const _=[,"struct","module","enum","const","include","typedef","union","switch","case","boolean","wstring","string","sequence","TRUE","FALSE","byte","octet","wchar","char","double","float","int8","uint8","int16","uint16","int32","uint32","int64","uint64","unsigned","short","long"].reduce((l,E)=>(l[E]=E,l),{}),m=d(569),h=m.compile({SPACE:{match:/\s+/,lineBreaks:!0},DECIMALEXP:/(?:(?:\d+\.\d*)|(?:\d*\.\d+)|(?:[0-9]+))[eE](?:[+|-])?[0-9]+/,DECIMAL:/(?:(?:\d+\.\d*)|(?:\d*\.\d+))/,INTEGER:/\d+/,COMMENT:/(?:\/\/[^\n]*)|(?:\/\*(?:.|\n)+?\*\/)/,HEX_LITERAL:/0x(?:[0-9a-fA-F])+?/,STRING:{match:/"(?:\\["\\rnu]|[^"\\])*"/,value:l=>l.slice(1,-1)},LCBR:"{",RCBR:"}",LBR:"[",RBR:"]",LT:"<",GT:">",LPAR:"(",RPAR:")",":":":",";":";",",":",",AT:"@",PND:"#",PT:".","/":"/",SIGN:/[+-]/,EQ:/=[^\n]*?/,NAME:{match:/[a-zA-Z_][a-zA-Z0-9_]*(?:\:\:[a-zA-Z][a-zA-Z0-9_]*)*/,type:m.keywords(_)}}),w=["SPACE","COMMENT"];h.next=(l=>()=>{let E;for(;(E=l.call(h))&&w.includes(E.type););return E})(h.next);function r(l){return l.join("")}function u(l){return l.filter(Boolean).reduce((E,P)=>({...E,...P}),{})}function I(){return null}function L(l){const E=parseInt(l);return isNaN(E)?l?.value?{usesConstant:!0,name:l.value}:void 0:E}var B={Lexer:h,ParserRules:[{name:"main$ebnf$1$subexpression$1$ebnf$1",symbols:[]},{name:"main$ebnf$1$subexpression$1$ebnf$1",symbols:["main$ebnf$1$subexpression$1$ebnf$1","importDcl"],postprocess:function(E){return E[0].concat([E[1]])}},{name:"main$ebnf$1$subexpression$1",symbols:["main$ebnf$1$subexpression$1$ebnf$1","definition"]},{name:"main$ebnf$1",symbols:["main$ebnf$1$subexpression$1"]},{name:"main$ebnf$1$subexpression$2$ebnf$1",symbols:[]},{name:"main$ebnf$1$subexpression$2$ebnf$1",symbols:["main$ebnf$1$subexpression$2$ebnf$1","importDcl"],postprocess:function(E){return E[0].concat([E[1]])}},{name:"main$ebnf$1$subexpression$2",symbols:["main$ebnf$1$subexpression$2$ebnf$1","definition"]},{name:"main$ebnf$1",symbols:["main$ebnf$1","main$ebnf$1$subexpression$2"],postprocess:function(E){return E[0].concat([E[1]])}},{name:"main",symbols:["main$ebnf$1"],postprocess:l=>l[0].flatMap(E=>E[1])},{name:"importDcl$subexpression$1",symbols:[h.has("STRING")?{type:"STRING"}:STRING]},{name:"importDcl$subexpression$1$ebnf$1",symbols:[]},{name:"importDcl$subexpression$1$ebnf$1$subexpression$1",symbols:[{literal:"/"},h.has("NAME")?{type:"NAME"}:NAME]},{name:"importDcl$subexpression$1$ebnf$1",symbols:["importDcl$subexpression$1$ebnf$1","importDcl$subexpression$1$ebnf$1$subexpression$1"],postprocess:function(E){return E[0].concat([E[1]])}},{name:"importDcl$subexpression$1",symbols:[{literal:"<"},h.has("NAME")?{type:"NAME"}:NAME,"importDcl$subexpression$1$ebnf$1",{literal:"."},{literal:"idl"},{literal:">"}]},{name:"importDcl",symbols:[{literal:"#"},{literal:"include"},"importDcl$subexpression$1"],postprocess:I},{name:"moduleDcl$ebnf$1$subexpression$1",symbols:["definition"]},{name:"moduleDcl$ebnf$1",symbols:["moduleDcl$ebnf$1$subexpression$1"]},{name:"moduleDcl$ebnf$1$subexpression$2",symbols:["definition"]},{name:"moduleDcl$ebnf$1",symbols:["moduleDcl$ebnf$1","moduleDcl$ebnf$1$subexpression$2"],postprocess:function(E){return E[0].concat([E[1]])}},{name:"moduleDcl",symbols:[{literal:"module"},"fieldName",{literal:"{"},"moduleDcl$ebnf$1",{literal:"}"}],postprocess:function(E){const P=E[1].name,R=E[3];return{declarator:"module",name:P,definitions:R.flat(1)}}},{name:"definition$subexpression$1",symbols:["typeDcl"]},{name:"definition$subexpression$1",symbols:["constantDcl"]},{name:"definition$subexpression$1",symbols:["moduleDcl"]},{name:"definition$subexpression$1",symbols:["union"]},{name:"definition",symbols:["multiAnnotations","definition$subexpression$1","semi"],postprocess:l=>{const E=l[0],P=l[1][0];return u([E,P])}},{name:"typeDcl$subexpression$1",symbols:["struct"]},{name:"typeDcl$subexpression$1",symbols:["typedef"]},{name:"typeDcl$subexpression$1",symbols:["enum"]},{name:"typeDcl",symbols:["typeDcl$subexpression$1"],postprocess:l=>l[0][0]},{name:"union",symbols:[{literal:"union"},"fieldName",{literal:"switch"},{literal:"("},"switchTypedef",{literal:")"},{literal:"{"},"switchBody",{literal:"}"}],postprocess:l=>{const E=l[1].name,P=l[4].type,g=l[7],C=g.find(t=>"default"in t),v=g.filter(t=>"predicates"in t),e={declarator:"union",name:E,switchType:P,cases:v};return C&&(e.defaultCase=C.default),e}},{name:"switchTypedef$subexpression$1",symbols:["customType"]},{name:"switchTypedef$subexpression$1",symbols:["numericType"]},{name:"switchTypedef$subexpression$1",symbols:["booleanType"]},{name:"switchTypedef",symbols:["switchTypedef$subexpression$1"],postprocess:l=>l[0][0]},{name:"switchBody$ebnf$1",symbols:["case"]},{name:"switchBody$ebnf$1",symbols:["switchBody$ebnf$1","case"],postprocess:function(E){return E[0].concat([E[1]])}},{name:"switchBody",symbols:["switchBody$ebnf$1"],postprocess:l=>l.flat(2)},{name:"case$ebnf$1",symbols:["caseLabel"]},{name:"case$ebnf$1",symbols:["case$ebnf$1","caseLabel"],postprocess:function(E){return E[0].concat([E[1]])}},{name:"case",symbols:["case$ebnf$1","elementSpec",{literal:";"}],postprocess:l=>{const E=l[0],P=l[1],R=E.filter(v=>v!=="default"),g=E.length!==R.length,C=[];return g&&C.push({default:P}),R.length>0&&C.push({predicates:R,type:P}),C}},{name:"caseLabel$subexpression$1",symbols:[{literal:"case"},"constExpression",{literal:":"}]},{name:"caseLabel",symbols:["caseLabel$subexpression$1"],postprocess:l=>l[0][1]},{name:"caseLabel$subexpression$2",symbols:[{literal:"default"},{literal:":"}]},{name:"caseLabel",symbols:["caseLabel$subexpression$2"],postprocess:()=>"default"},{name:"elementSpec",symbols:["typeDeclarator"],postprocess:l=>l[0]},{name:"enum$ebnf$1",symbols:[]},{name:"enum$ebnf$1$subexpression$1",symbols:[{literal:","},"enumFieldName"]},{name:"enum$ebnf$1",symbols:["enum$ebnf$1","enum$ebnf$1$subexpression$1"],postprocess:function(E){return E[0].concat([E[1]])}},{name:"enum",symbols:[{literal:"enum"},"fieldName",{literal:"{"},"enumFieldName","enum$ebnf$1",{literal:"}"}],postprocess:l=>{const E=l[1].name,P=l[3],R=l[4].flat(2).filter(g=>Boolean(g)&&g.type!==",");return{declarator:"enum",name:E,enumerators:[P,...R]}}},{name:"enumFieldName",symbols:["multiAnnotations","fieldName"],postprocess:l=>{const E=l[0],P=l[1];return u([E,P])}},{name:"struct$ebnf$1$subexpression$1",symbols:["member"]},{name:"struct$ebnf$1",symbols:["struct$ebnf$1$subexpression$1"]},{name:"struct$ebnf$1$subexpression$2",symbols:["member"]},{name:"struct$ebnf$1",symbols:["struct$ebnf$1","struct$ebnf$1$subexpression$2"],postprocess:function(E){return E[0].concat([E[1]])}},{name:"struct",symbols:[{literal:"struct"},"fieldName",{literal:"{"},"struct$ebnf$1",{literal:"}"}],postprocess:l=>{const E=l[1].name,P=l[3].flat(2).filter(R=>R!==null);return{declarator:"struct",name:E,definitions:P}}},{name:"typedef",symbols:[{literal:"typedef"},"typeDeclarator"],postprocess:([l,E])=>({declarator:"typedef",...E})},{name:"typeDeclarator$subexpression$1",symbols:["allTypes","fieldName","arrayLengths"]},{name:"typeDeclarator$subexpression$1",symbols:["allTypes","fieldName"]},{name:"typeDeclarator$subexpression$1",symbols:["sequenceType","fieldName"]},{name:"typeDeclarator",symbols:["typeDeclarator$subexpression$1"],postprocess:l=>u(l[0])},{name:"constantDcl",symbols:["constType"],postprocess:l=>l[0]},{name:"member",symbols:["fieldWithAnnotation","semi"],postprocess:l=>l[0]},{name:"fieldWithAnnotation",symbols:["multiAnnotations","fieldDcl"],postprocess:l=>{const E=l[0];return l[1].map(g=>u([E,g]))}},{name:"fieldDcl$subexpression$1",symbols:["allTypes","multiFieldNames","arrayLengths"]},{name:"fieldDcl$subexpression$1",symbols:["allTypes","multiFieldNames"]},{name:"fieldDcl$subexpression$1",symbols:["sequenceType","multiFieldNames"]},{name:"fieldDcl",symbols:["fieldDcl$subexpression$1"],postprocess:l=>l[0].splice(1,1)[0].map(R=>({...u([...l[0],R]),declarator:"struct-member"}))},{name:"multiFieldNames$ebnf$1",symbols:[]},{name:"multiFieldNames$ebnf$1$subexpression$1",symbols:[{literal:","},"fieldName"]},{name:"multiFieldNames$ebnf$1",symbols:["multiFieldNames$ebnf$1","multiFieldNames$ebnf$1$subexpression$1"],postprocess:function(E){return E[0].concat([E[1]])}},{name:"multiFieldNames",symbols:["fieldName","multiFieldNames$ebnf$1"],postprocess:l=>l.flat(2).filter(P=>P!==null&&P.name)},{name:"multiAnnotations$ebnf$1",symbols:[]},{name:"multiAnnotations$ebnf$1",symbols:["multiAnnotations$ebnf$1","annotation"],postprocess:function(E){return E[0].concat([E[1]])}},{name:"multiAnnotations",symbols:["multiAnnotations$ebnf$1"],postprocess:l=>l[0].length>0?{annotations:l[0].reduce((E,P)=>(E[P.name]=P,E),{})}:null},{name:"annotation$ebnf$1$subexpression$1",symbols:[{literal:"("},"annotationParams",{literal:")"}]},{name:"annotation$ebnf$1",symbols:["annotation$ebnf$1$subexpression$1"],postprocess:x},{name:"annotation$ebnf$1",symbols:[],postprocess:function(l){return null}},{name:"annotation",symbols:["at",h.has("NAME")?{type:"NAME"}:NAME,"annotation$ebnf$1"],postprocess:l=>{const E=l[1].value,P=l[2]?l[2][1]:void 0;if(P==null)return{type:"no-params",name:E};if(Array.isArray(P)){const R=u(P);return{type:"named-params",name:E,namedParams:R}}return{type:"const-param",value:P,name:E}}},{name:"annotationParams$subexpression$1",symbols:["multipleNamedAnnotationParams"]},{name:"annotationParams$subexpression$1",symbols:["constExpression"]},{name:"annotationParams",symbols:["annotationParams$subexpression$1"],postprocess:l=>l[0][0]},{name:"multipleNamedAnnotationParams$ebnf$1",symbols:[]},{name:"multipleNamedAnnotationParams$ebnf$1$subexpression$1",symbols:[{literal:","},"namedAnnotationParam"]},{name:"multipleNamedAnnotationParams$ebnf$1",symbols:["multipleNamedAnnotationParams$ebnf$1","multipleNamedAnnotationParams$ebnf$1$subexpression$1"],postprocess:function(E){return E[0].concat([E[1]])}},{name:"multipleNamedAnnotationParams",symbols:["namedAnnotationParam","multipleNamedAnnotationParams$ebnf$1"],postprocess:l=>[l[0],...l[1].flatMap(([,E])=>E)]},{name:"constExpression",symbols:[h.has("NAME")?{type:"NAME"}:NAME],postprocess:l=>({usesConstant:!0,name:l[0].value})},{name:"constExpression",symbols:["literal"],postprocess:l=>l[0].value},{name:"namedAnnotationParam$subexpression$1",symbols:[h.has("NAME")?{type:"NAME"}:NAME,"assignment"]},{name:"namedAnnotationParam",symbols:["namedAnnotationParam$subexpression$1"],postprocess:l=>({[l[0][0].value]:l[0][1].value})},{name:"at",symbols:[{literal:"@"}],postprocess:I},{name:"constType$subexpression$1",symbols:["constKeyword","numericType","fieldName","floatAssignment","simple"]},{name:"constType$subexpression$1",symbols:["constKeyword","numericType","fieldName","intAssignment","simple"]},{name:"constType$subexpression$1",symbols:["constKeyword","stringType","fieldName","stringAssignment","simple"]},{name:"constType$subexpression$1",symbols:["constKeyword","booleanType","fieldName","booleanAssignment","simple"]},{name:"constType$subexpression$1",symbols:["constKeyword","customType","fieldName","variableAssignment","simple"]},{name:"constType",symbols:["constType$subexpression$1"],postprocess:l=>u(l[0])},{name:"constKeyword",symbols:[{literal:"const"}],postprocess:l=>({isConstant:!0,declarator:"const"})},{name:"fieldName",symbols:[h.has("NAME")?{type:"NAME"}:NAME],postprocess:l=>({name:l[0].value})},{name:"sequenceType$ebnf$1$subexpression$1$subexpression$1",symbols:["INT"]},{name:"sequenceType$ebnf$1$subexpression$1$subexpression$1",symbols:[h.has("NAME")?{type:"NAME"}:NAME]},{name:"sequenceType$ebnf$1$subexpression$1",symbols:[{literal:","},"sequenceType$ebnf$1$subexpression$1$subexpression$1"]},{name:"sequenceType$ebnf$1",symbols:["sequenceType$ebnf$1$subexpression$1"],postprocess:x},{name:"sequenceType$ebnf$1",symbols:[],postprocess:function(l){return null}},{name:"sequenceType",symbols:[{literal:"sequence"},{literal:"<"},"allTypes","sequenceType$ebnf$1",{literal:">"}],postprocess:l=>{const E=l[3]!==null?L(l[3][1][0]):void 0;return{...l[2],isArray:!0,arrayUpperBound:E}}},{name:"arrayLengths$ebnf$1",symbols:["arrayLength"]},{name:"arrayLengths$ebnf$1",symbols:["arrayLengths$ebnf$1","arrayLength"],postprocess:function(E){return E[0].concat([E[1]])}},{name:"arrayLengths",symbols:["arrayLengths$ebnf$1"],postprocess:l=>{const E={isArray:!0},P=l.flat(2).filter(R=>R!=null);return E.arrayLengths=P,E}},{name:"arrayLength$subexpression$1",symbols:["INT"]},{name:"arrayLength$subexpression$1",symbols:[h.has("NAME")?{type:"NAME"}:NAME]},{name:"arrayLength",symbols:[{literal:"["},"arrayLength$subexpression$1",{literal:"]"}],postprocess:([,l])=>L(l?l[0]:void 0)},{name:"assignment$subexpression$1",symbols:["floatAssignment"]},{name:"assignment$subexpression$1",symbols:["intAssignment"]},{name:"assignment$subexpression$1",symbols:["stringAssignment"]},{name:"assignment$subexpression$1",symbols:["booleanAssignment"]},{name:"assignment$subexpression$1",symbols:["variableAssignment"]},{name:"assignment",symbols:["assignment$subexpression$1"],postprocess:l=>l[0][0]},{name:"floatAssignment$subexpression$1",symbols:["SIGNED_FLOAT"]},{name:"floatAssignment$subexpression$1",symbols:["FLOAT"]},{name:"floatAssignment",symbols:[h.has("EQ")?{type:"EQ"}:EQ,"floatAssignment$subexpression$1"],postprocess:([,l])=>({valueText:l[0],value:parseFloat(l[0])})},{name:"intAssignment$subexpression$1",symbols:["SIGNED_INT"]},{name:"intAssignment$subexpression$1",symbols:["INT"]},{name:"intAssignment",symbols:[h.has("EQ")?{type:"EQ"}:EQ,"intAssignment$subexpression$1"],postprocess:([,l])=>({valueText:l[0],value:parseInt(l[0])})},{name:"stringAssignment",symbols:[h.has("EQ")?{type:"EQ"}:EQ,"STR"],postprocess:([,l])=>({valueText:l,value:l})},{name:"booleanAssignment",symbols:[h.has("EQ")?{type:"EQ"}:EQ,"BOOLEAN"],postprocess:([,l])=>({valueText:l,value:l==="TRUE"})},{name:"variableAssignment",symbols:[h.has("EQ")?{type:"EQ"}:EQ,h.has("NAME")?{type:"NAME"}:NAME],postprocess:([,l])=>({valueText:l.value,value:{usesConstant:!0,name:l.value}})},{name:"allTypes$subexpression$1",symbols:["primitiveTypes"]},{name:"allTypes$subexpression$1",symbols:["customType"]},{name:"allTypes",symbols:["allTypes$subexpression$1"],postprocess:l=>l[0][0]},{name:"primitiveTypes$subexpression$1",symbols:["stringType"]},{name:"primitiveTypes$subexpression$1",symbols:["numericType"]},{name:"primitiveTypes$subexpression$1",symbols:["booleanType"]},{name:"primitiveTypes",symbols:["primitiveTypes$subexpression$1"],postprocess:l=>({...l[0][0],isComplex:!1})},{name:"customType",symbols:[h.has("NAME")?{type:"NAME"}:NAME],postprocess:l=>({type:l[0].value})},{name:"stringType$subexpression$1",symbols:[{literal:"string"}]},{name:"stringType$subexpression$1",symbols:[{literal:"wstring"}]},{name:"stringType$ebnf$1$subexpression$1$subexpression$1",symbols:["INT"]},{name:"stringType$ebnf$1$subexpression$1$subexpression$1",symbols:[h.has("NAME")?{type:"NAME"}:NAME]},{name:"stringType$ebnf$1$subexpression$1",symbols:[{literal:"<"},"stringType$ebnf$1$subexpression$1$subexpression$1",{literal:">"}]},{name:"stringType$ebnf$1",symbols:["stringType$ebnf$1$subexpression$1"],postprocess:x},{name:"stringType$ebnf$1",symbols:[],postprocess:function(l){return null}},{name:"stringType",symbols:["stringType$subexpression$1","stringType$ebnf$1"],postprocess:l=>{let E;return l[1]!==null&&(E=L(l[1][1]?l[1][1][0]:void 0)),{type:"string",upperBound:E}}},{name:"booleanType",symbols:[{literal:"boolean"}],postprocess:l=>({type:"bool"})},{name:"numericType$subexpression$1",symbols:[{literal:"byte"}]},{name:"numericType$subexpression$1",symbols:[{literal:"octet"}]},{name:"numericType$subexpression$1",symbols:[{literal:"wchar"}]},{name:"numericType$subexpression$1",symbols:[{literal:"char"}]},{name:"numericType$subexpression$1",symbols:[{literal:"long"},{literal:"double"}]},{name:"numericType$subexpression$1",symbols:[{literal:"double"}]},{name:"numericType$subexpression$1",symbols:[{literal:"float"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int8"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint8"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int16"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint16"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int32"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint32"}]},{name:"numericType$subexpression$1",symbols:[{literal:"int64"}]},{name:"numericType$subexpression$1",symbols:[{literal:"uint64"}]},{name:"numericType$subexpression$1",symbols:[{literal:"unsigned"},{literal:"short"}]},{name:"numericType$subexpression$1",symbols:[{literal:"short"}]},{name:"numericType$subexpression$1",symbols:[{literal:"unsigned"},{literal:"long"},{literal:"long"}]},{name:"numericType$subexpression$1",symbols:[{literal:"long"},{literal:"long"}]},{name:"numericType$subexpression$1",symbols:[{literal:"unsigned"},{literal:"long"}]},{name:"numericType$subexpression$1",symbols:[{literal:"long"}]},{name:"numericType",symbols:["numericType$subexpression$1"],postprocess:l=>({type:l[0].map(P=>P?.value).filter(P=>!!P).join(" ")})},{name:"literal$subexpression$1",symbols:["booleanLiteral"]},{name:"literal$subexpression$1",symbols:["strLiteral"]},{name:"literal$subexpression$1",symbols:["floatLiteral"]},{name:"literal$subexpression$1",symbols:["intLiteral"]},{name:"literal",symbols:["literal$subexpression$1"],postprocess:l=>l[0][0]},{name:"booleanLiteral",symbols:["BOOLEAN"],postprocess:l=>({value:l[0]==="TRUE"})},{name:"strLiteral",symbols:["STR"],postprocess:l=>({value:l[0]})},{name:"floatLiteral$subexpression$1",symbols:["SIGNED_FLOAT"]},{name:"floatLiteral$subexpression$1",symbols:["FLOAT"]},{name:"floatLiteral",symbols:["floatLiteral$subexpression$1"],postprocess:l=>({value:parseFloat(l[0][0])})},{name:"intLiteral$subexpression$1",symbols:["SIGNED_INT"]},{name:"intLiteral$subexpression$1",symbols:["INT"]},{name:"intLiteral",symbols:["intLiteral$subexpression$1"],postprocess:l=>({value:parseInt(l[0][0])})},{name:"BOOLEAN$subexpression$1",symbols:[{literal:"TRUE"}]},{name:"BOOLEAN$subexpression$1",symbols:[{literal:"FALSE"}]},{name:"BOOLEAN",symbols:["BOOLEAN$subexpression$1"],postprocess:r},{name:"STR$ebnf$1",symbols:[h.has("STRING")?{type:"STRING"}:STRING]},{name:"STR$ebnf$1",symbols:["STR$ebnf$1",h.has("STRING")?{type:"STRING"}:STRING],postprocess:function(E){return E[0].concat([E[1]])}},{name:"STR",symbols:["STR$ebnf$1"],postprocess:l=>r(l.flat(1).filter(E=>E!==null))},{name:"SIGNED_FLOAT$subexpression$1",symbols:[{literal:"+"}]},{name:"SIGNED_FLOAT$subexpression$1",symbols:[{literal:"-"}]},{name:"SIGNED_FLOAT",symbols:["SIGNED_FLOAT$subexpression$1","FLOAT"],postprocess:r},{name:"FLOAT$subexpression$1",symbols:[h.has("DECIMAL")?{type:"DECIMAL"}:DECIMAL]},{name:"FLOAT$subexpression$1",symbols:[h.has("DECIMALEXP")?{type:"DECIMALEXP"}:DECIMALEXP]},{name:"FLOAT",symbols:["FLOAT$subexpression$1"],postprocess:r},{name:"FLOAT$subexpression$2",symbols:[h.has("DECIMAL")?{type:"DECIMAL"}:DECIMAL,{literal:"d"}]},{name:"FLOAT",symbols:["FLOAT$subexpression$2"],postprocess:l=>l[0][0].value},{name:"FLOAT$subexpression$3",symbols:["INT",{literal:"d"}]},{name:"FLOAT",symbols:["FLOAT$subexpression$3"],postprocess:l=>l[0][0]},{name:"SIGNED_INT$subexpression$1",symbols:[{literal:"+"}]},{name:"SIGNED_INT$subexpression$1",symbols:[{literal:"-"}]},{name:"SIGNED_INT",symbols:["SIGNED_INT$subexpression$1","INT"],postprocess:r},{name:"INT",symbols:[h.has("INTEGER")?{type:"INTEGER"}:INTEGER],postprocess:r},{name:"semi",symbols:[{literal:";"}],postprocess:I},{name:"simple",symbols:[],postprocess:()=>({isComplex:!1})}],ParserStart:"main"};typeof D.exports<"u"?D.exports=B:window.grammar=B})()},614:function(D){(function(y,d){D.exports?D.exports=d():y.nearley=d()})(this,function(){function y(r,u,I){return this.id=++y.highestId,this.name=r,this.symbols=u,this.postprocess=I,this}y.highestId=0,y.prototype.toString=function(r){var u=typeof r>"u"?this.symbols.map(w).join(" "):this.symbols.slice(0,r).map(w).join(" ")+" \u25CF "+this.symbols.slice(r).map(w).join(" ");return this.name+" \u2192 "+u};function d(r,u,I,L){this.rule=r,this.dot=u,this.reference=I,this.data=[],this.wantedBy=L,this.isComplete=this.dot===r.symbols.length}d.prototype.toString=function(){return"{"+this.rule.toString(this.dot)+"}, from: "+(this.reference||0)},d.prototype.nextState=function(r){var u=new d(this.rule,this.dot+1,this.reference,this.wantedBy);return u.left=this,u.right=r,u.isComplete&&(u.data=u.build(),u.right=void 0),u},d.prototype.build=function(){var r=[],u=this;do r.push(u.right.data),u=u.left;while(u.left);return r.reverse(),r},d.prototype.finish=function(){this.rule.postprocess&&(this.data=this.rule.postprocess(this.data,this.reference,m.fail))};function x(r,u){this.grammar=r,this.index=u,this.states=[],this.wants={},this.scannable=[],this.completed={}}x.prototype.process=function(r){for(var u=this.states,I=this.wants,L=this.completed,B=0;B<u.length;B++){var l=u[B];if(l.isComplete){if(l.finish(),l.data!==m.fail){for(var E=l.wantedBy,P=E.length;P--;){var R=E[P];this.complete(R,l)}if(l.reference===this.index){var g=l.rule.name;(this.completed[g]=this.completed[g]||[]).push(l)}}}else{var g=l.rule.symbols[l.dot];if(typeof g!="string"){this.scannable.push(l);continue}if(I[g]){if(I[g].push(l),L.hasOwnProperty(g))for(var C=L[g],P=0;P<C.length;P++){var v=C[P];this.complete(l,v)}}else I[g]=[l],this.predict(g)}}},x.prototype.predict=function(r){for(var u=this.grammar.byName[r]||[],I=0;I<u.length;I++){var L=u[I],B=this.wants[r],l=new d(L,0,this.index,B);this.states.push(l)}},x.prototype.complete=function(r,u){var I=r.nextState(u);this.states.push(I)};function c(r,u){this.rules=r,this.start=u||this.rules[0].name;var I=this.byName={};this.rules.forEach(function(L){I.hasOwnProperty(L.name)||(I[L.name]=[]),I[L.name].push(L)})}c.fromCompiled=function(L,u){var I=L.Lexer;L.ParserStart&&(u=L.ParserStart,L=L.ParserRules);var L=L.map(function(l){return new y(l.name,l.symbols,l.postprocess)}),B=new c(L,u);return B.lexer=I,B};function _(){this.reset("")}_.prototype.reset=function(r,u){this.buffer=r,this.index=0,this.line=u?u.line:1,this.lastLineBreak=u?-u.col:0},_.prototype.next=function(){if(this.index<this.buffer.length){var r=this.buffer[this.index++];return r===`
`&&(this.line+=1,this.lastLineBreak=this.index),{value:r}}},_.prototype.save=function(){return{line:this.line,col:this.index-this.lastLineBreak}},_.prototype.formatError=function(r,u){var I=this.buffer;if(typeof I=="string"){var L=I.split(`
`).slice(Math.max(0,this.line-5),this.line),B=I.indexOf(`
`,this.index);B===-1&&(B=I.length);var l=this.index-this.lastLineBreak,E=String(this.line).length;return u+=" at line "+this.line+" col "+l+`:

`,u+=L.map(function(R,g){return P(this.line-L.length+g+1,E)+" "+R},this).join(`
`),u+=`
`+P("",E+l)+`^
`,u}else return u+" at index "+(this.index-1);function P(R,g){var C=String(R);return Array(g-C.length+1).join(" ")+C}};function m(r,u,I){if(r instanceof c)var L=r,I=u;else var L=c.fromCompiled(r,u);this.grammar=L,this.options={keepHistory:!1,lexer:L.lexer||new _};for(var B in I||{})this.options[B]=I[B];this.lexer=this.options.lexer,this.lexerState=void 0;var l=new x(L,0),E=this.table=[l];l.wants[L.start]=[],l.predict(L.start),l.process(),this.current=0}m.fail={},m.prototype.feed=function(r){var u=this.lexer;u.reset(r,this.lexerState);for(var I;;){try{if(I=u.next(),!I)break}catch(s){var E=new x(this.grammar,this.current+1);this.table.push(E);var L=new Error(this.reportLexerError(s));throw L.offset=this.current,L.token=s.token,L}var B=this.table[this.current];this.options.keepHistory||delete this.table[this.current-1];var l=this.current+1,E=new x(this.grammar,l);this.table.push(E);for(var P=I.text!==void 0?I.text:I.value,R=u.constructor===_?I.value:I,g=B.scannable,C=g.length;C--;){var v=g[C],e=v.rule.symbols[v.dot];if(e.test?e.test(R):e.type?e.type===I.type:e.literal===P){var t=v.nextState({data:R,token:I,isToken:!0,reference:l-1});E.states.push(t)}}if(E.process(),E.states.length===0){var L=new Error(this.reportError(I));throw L.offset=this.current,L.token=I,L}this.options.keepHistory&&(B.lexerState=u.save()),this.current++}return B&&(this.lexerState=u.save()),this.results=this.finish(),this},m.prototype.reportLexerError=function(r){var u,I,L=r.token;return L?(u="input "+JSON.stringify(L.text[0])+" (lexer error)",I=this.lexer.formatError(L,"Syntax error")):(u="input (lexer error)",I=r.message),this.reportErrorCommon(I,u)},m.prototype.reportError=function(r){var u=(r.type?r.type+" token: ":"")+JSON.stringify(r.value!==void 0?r.value:r),I=this.lexer.formatError(r,"Syntax error");return this.reportErrorCommon(I,u)},m.prototype.reportErrorCommon=function(r,u){var I=[];I.push(r);var L=this.table.length-2,B=this.table[L],l=B.states.filter(function(P){var R=P.rule.symbols[P.dot];return R&&typeof R!="string"});if(l.length===0)I.push("Unexpected "+u+`. I did not expect any more input. Here is the state of my parse table:
`),this.displayStateStack(B.states,I);else{I.push("Unexpected "+u+`. Instead, I was expecting to see one of the following:
`);var E=l.map(function(P){return this.buildFirstStateStack(P,[])||[P]},this);E.forEach(function(P){var R=P[0],g=R.rule.symbols[R.dot],C=this.getSymbolDisplay(g);I.push("A "+C+" based on:"),this.displayStateStack(P,I)},this)}return I.push(""),I.join(`
`)},m.prototype.displayStateStack=function(r,u){for(var I,L=0,B=0;B<r.length;B++){var l=r[B],E=l.rule.toString(l.dot);E===I?L++:(L>0&&u.push("    ^ "+L+" more lines identical to this"),L=0,u.push("    "+E)),I=E}},m.prototype.getSymbolDisplay=function(r){return h(r)},m.prototype.buildFirstStateStack=function(r,u){if(u.indexOf(r)!==-1)return null;if(r.wantedBy.length===0)return[r];var I=r.wantedBy[0],L=[r].concat(u),B=this.buildFirstStateStack(I,L);return B===null?null:[r].concat(B)},m.prototype.save=function(){var r=this.table[this.current];return r.lexerState=this.lexerState,r},m.prototype.restore=function(r){var u=r.index;this.current=u,this.table[u]=r,this.table.splice(u+1),this.lexerState=r.lexerState,this.results=this.finish()},m.prototype.rewind=function(r){if(!this.options.keepHistory)throw new Error("set option `keepHistory` to enable rewinding");this.restore(this.table[r])},m.prototype.finish=function(){var r=[],u=this.grammar.start,I=this.table[this.table.length-1];return I.states.forEach(function(L){L.rule.name===u&&L.dot===L.rule.symbols.length&&L.reference===0&&L.data!==m.fail&&r.push(L)}),r.map(function(L){return L.data})};function h(r){var u=typeof r;if(u==="string")return r;if(u==="object"){if(r.literal)return JSON.stringify(r.literal);if(r instanceof RegExp)return"character matching "+r;if(r.type)return r.type+" token";if(r.test)return"token matching "+String(r.test);throw new Error("Unknown symbol type: "+r)}}function w(r){var u=typeof r;if(u==="string")return r;if(u==="object"){if(r.literal)return JSON.stringify(r.literal);if(r instanceof RegExp)return r.toString();if(r.type)return"%"+r.type;if(r.test)return"<"+String(r.test)+">";throw new Error("Unknown symbol type: "+r)}}return{Parser:m,Grammar:c,Rule:y}})},549:(D,y,d)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.ConstantIDLNode=void 0;const x=d(561),c=d(76),_=d(205);class m extends c.IDLNode{typeNeedsResolution=!1;constructor(w,r,u){super(w,r,u),_.SIMPLE_TYPES.has(r.type)||(this.typeNeedsResolution=!0)}get type(){return this.typeNeedsResolution?this.getReferencedEnumNode().type:this.astNode.type}referencedEnumNode=void 0;getReferencedEnumNode(){if(this.referencedEnumNode==null){const w=this.getNode(this.scopePath,this.astNode.type);if(!(w instanceof x.EnumIDLNode))throw new Error(`Expected ${this.astNode.type} to be an enum in ${this.scopedIdentifier}`);this.referencedEnumNode=w}return this.referencedEnumNode}get isConstant(){return!0}get value(){return typeof this.astNode.value=="object"?this.getConstantNode(this.astNode.value.name).value:this.astNode.value}toIDLMessageDefinitionField(){return{name:this.name,type:(0,_.normalizeType)(this.type),value:this.value,isConstant:!0,isComplex:!1,...this.astNode.valueText!=null?{valueText:this.astNode.valueText}:void 0}}}y.ConstantIDLNode=m},561:(D,y,d)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.EnumIDLNode=void 0;const x=d(76);class c extends x.IDLNode{constructor(m,h,w){super(m,h,w)}get type(){return"uint32"}enumeratorNodes(){return this.astNode.enumerators.map(m=>this.getConstantNode((0,x.toScopedIdentifier)([...this.scopePath,this.name,m.name])))}toIDLMessageDefinition(){const m=this.enumeratorNodes().map(h=>h.toIDLMessageDefinitionField());return{name:(0,x.toScopedIdentifier)([...this.scopePath,this.name]),definitions:m,aggregatedKind:"module"}}}y.EnumIDLNode=c},76:(D,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.toScopedIdentifier=y.IDLNode=void 0;class d{map;astNode;scopePath;constructor(m,h,w){this.scopePath=m,this.astNode=h,this.map=w}get declarator(){return this.astNode.declarator}get name(){return this.astNode.name}get annotations(){return this.astNode.annotations}get scopedIdentifier(){return c([...this.scopePath,this.name])}getNode(m,h){const w=x({usedIdentifier:h,scopeOfUsage:m,definitionMap:this.map});if(w==null)throw new Error(`Could not find node ${h} in ${m.join("::")} referenced by ${this.scopedIdentifier}`);return w}getConstantNode(m,h=this.scopePath){const w=this.getNode(h,m);if(w.declarator!=="const")throw new Error(`Expected ${this.name} to be a constant in ${this.scopedIdentifier}`);return w}}y.IDLNode=d;function x({usedIdentifier:_,scopeOfUsage:m,definitionMap:h}){let w;const r=[...m],u=[];for(;;){const I=c([...u,_]);if(w=h.get(I),w!=null||r.length===0)break;u.push(r.shift())}return w}function c(_){return _.join("::")}y.toScopedIdentifier=c},667:(D,y,d)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.ModuleIDLNode=void 0;const x=d(549),c=d(76);class _ extends c.IDLNode{constructor(h,w,r){super(h,w,r)}toIDLMessageDefinition(){const h=this.definitions.flatMap(w=>w instanceof x.ConstantIDLNode?[w.toIDLMessageDefinitionField()]:[]);if(h.length!==0)return{name:this.scopedIdentifier,definitions:h,aggregatedKind:"module"}}get definitions(){return this.astNode.definitions.map(h=>this.getNode([...this.scopePath,this.name],h.name))}}y.ModuleIDLNode=_},212:(D,y,d)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.ReferenceTypeIDLNode=void 0;const x=d(76),c=d(205);class _ extends x.IDLNode{typeNeedsResolution=!1;typeRefNode;constructor(h,w,r){super(h,w,r),c.SIMPLE_TYPES.has(w.type)||(this.typeNeedsResolution=!0)}get type(){if(this.typeNeedsResolution){const h=this.typeRef();return h.declarator==="typedef"||h.declarator==="enum"?h.type:h.scopedIdentifier}return this.astNode.type}get isComplex(){if(!this.typeNeedsResolution)return!1;const h=this.typeRef();return h.declarator==="typedef"?h.isComplex:h.declarator==="struct"||h.declarator==="union"}get isArray(){let h=this.astNode.isArray;if(this.typeNeedsResolution){const w=this.typeRef();w.declarator==="typedef"&&(h||=w.isArray)}return h}get arrayLengths(){const h=this.astNode.arrayLengths?[...this.astNode.arrayLengths]:[];if(this.typeNeedsResolution){const r=this.typeRef();r.declarator==="typedef"&&r.arrayLengths&&h.push(...r.arrayLengths)}const w=[];for(const r of h){const u=this.resolvePossibleNumericConstantUsage(r);u!=null&&w.push(u)}return w.length>0?w:void 0}get arrayUpperBound(){let h;if(this.typeNeedsResolution){const w=this.typeRef();w.declarator==="typedef"&&(h=w.arrayUpperBound)}return this.astNode.arrayUpperBound!=null&&(h=this.astNode.arrayUpperBound),this.resolvePossibleNumericConstantUsage(h)}get upperBound(){let h;if(this.typeNeedsResolution){const w=this.typeRef();w.declarator==="typedef"&&(h=w.upperBound)}return this.astNode.upperBound!=null&&(h=this.astNode.upperBound),this.resolvePossibleNumericConstantUsage(h)}get annotations(){let h;if(this.typeNeedsResolution){const w=this.typeRef();w.declarator==="typedef"&&w.annotations!=null&&(h={...w.annotations})}return this.astNode.annotations!=null&&(h={...h,...this.astNode.annotations}),h}resolvePossibleNumericConstantUsage(h){if(typeof h=="number"||h==null)return h;const w=h.name,r=this.getConstantNode(w).value;if(typeof r!="number")throw Error(`Expected constant value ${w} in ${this.scopedIdentifier} to be a number, but got ${r.toString()}`);return r}getValidTypeReference(h){const w=this.getNode(this.scopePath,h);if(w.declarator!=="struct"&&w.declarator!=="typedef"&&w.declarator!=="union"&&w.declarator!=="enum")throw new Error(`Expected ${h} to be non-module, non-constant type in ${this.scopedIdentifier}`);return w}typeRef(){if(this.typeRefNode==null&&(this.typeRefNode=this.getValidTypeReference(this.astNode.type)),!(this.typeRefNode instanceof _))return this.typeRefNode;if(this.astNode.isArray===!0&&this.typeRefNode.isArray===!0){const h=this.astNode.arrayLengths!=null,w=this.typeRefNode.arrayLengths!=null;if(!h||!w)throw new Error(`We do not support composing variable length arrays with typedefs: ${this.scopedIdentifier} referencing ${this.typeRefNode.scopedIdentifier}`)}return this.typeRefNode}}y.ReferenceTypeIDLNode=_},801:(D,y,d)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.StructIDLNode=void 0;const x=d(76);class c extends x.IDLNode{constructor(m,h,w){super(m,h,w)}get type(){return this.astNode.name}get definitions(){return this.astNode.definitions.map(m=>this.getStructMemberNode(m.name))}toIDLMessageDefinition(){const m=this.definitions.map(h=>h.toIDLMessageDefinitionField());return{name:this.scopedIdentifier,definitions:m,aggregatedKind:"struct",...this.astNode.annotations?{annotations:this.astNode.annotations}:void 0}}getStructMemberNode(m){const h=this.getNode([...this.scopePath,this.name],m);if(h.declarator!=="struct-member")throw new Error(`Expected ${m} to be a struct member in ${this.scopedIdentifier}`);return h}}y.StructIDLNode=c},605:(D,y,d)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.StructMemberIDLNode=void 0;const x=d(212),c=d(205);class _ extends x.ReferenceTypeIDLNode{constructor(h,w,r){super(h,w,r)}toIDLMessageDefinitionField(){const h={name:this.name,type:(0,c.normalizeType)(this.type),isComplex:this.isComplex};this.arrayLengths!=null&&(h.arrayLengths=this.arrayLengths),this.arrayUpperBound!=null&&(h.arrayUpperBound=this.arrayUpperBound),this.upperBound!=null&&(h.upperBound=this.upperBound),this.annotations!=null&&(h.annotations=this.annotations),this.isArray!=null&&(h.isArray=this.isArray);const w=this.annotations?.default;if(w&&w.type!=="no-params"){const r=w.type==="const-param"?w.value:w.namedParams.value;typeof r!="object"?h.defaultValue=r:h.defaultValue=this.getConstantNode(r.name).value}return h}}y.StructMemberIDLNode=_},647:(D,y,d)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.TypedefIDLNode=void 0;const x=d(212);class c extends x.ReferenceTypeIDLNode{constructor(m,h,w){super(m,h,w)}}y.TypedefIDLNode=c},57:(D,y,d)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.UnionIDLNode=void 0;const x=d(76),c=d(605),_=d(205);class m extends x.IDLNode{switchTypeNeedsResolution=!1;constructor(r,u,I){super(r,u,I),_.SIMPLE_TYPES.has(this.astNode.switchType)||(this.switchTypeNeedsResolution=!0)}get type(){return this.astNode.name}get isComplex(){return!0}_switchTypeNode;switchTypeNode(){if(this._switchTypeNode)return this._switchTypeNode;const r=this.getNode(this.scopePath,this.astNode.switchType);if(r.declarator!=="enum"&&r.declarator!=="typedef")throw new Error(`Invalid switch type "${r.scopedIdentifier}" ${this.astNode.switchType} in ${this.scopedIdentifier}`);return this._switchTypeNode=r,r}get switchType(){let r=this.astNode.switchType;if(this.switchTypeNeedsResolution&&(r=this.switchTypeNode().type),!h(r))throw new Error(`Invalid resolved switch type ${r} in ${this.scopedIdentifier}`);return r}get cases(){const u=this.switchTypeNeedsResolution&&this.switchTypeNode().declarator==="enum"?this.switchTypeNode().scopedIdentifier.split("::"):this.scopePath;return this.astNode.cases.map(I=>{const L=new c.StructMemberIDLNode([...this.scopePath,this.name],{...I.type,declarator:"struct-member"},this.map),B=I.predicates.map(E=>typeof E=="object"?this.getConstantNode(E.name,u).value:E);return{type:L.toIDLMessageDefinitionField(),predicates:B}})}get defaultCase(){return this.astNode.defaultCase?new c.StructMemberIDLNode([...this.scopePath,this.name],{...this.astNode.defaultCase,declarator:"struct-member"},this.map).toIDLMessageDefinitionField():void 0}toIDLMessageDefinition(){const r=this.annotations;return{name:this.scopedIdentifier,switchType:this.switchType,cases:this.cases,aggregatedKind:"union",...this.astNode.defaultCase?{defaultCase:this.defaultCase}:void 0,...r?{annotations:r}:void 0}}}y.UnionIDLNode=m;function h(w){return _.INTEGER_TYPES.has(w)||w==="bool"}},732:function(D,y,d){"use strict";var x=this&&this.__createBinding||(Object.create?function(_,m,h,w){w===void 0&&(w=h);var r=Object.getOwnPropertyDescriptor(m,h);(!r||("get"in r?!m.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return m[h]}}),Object.defineProperty(_,w,r)}:function(_,m,h,w){w===void 0&&(w=h),_[w]=m[h]}),c=this&&this.__exportStar||function(_,m){for(var h in _)h!=="default"&&!Object.prototype.hasOwnProperty.call(m,h)&&x(m,_,h)};Object.defineProperty(y,"__esModule",{value:!0}),c(d(549),y),c(d(561),y),c(d(76),y),c(d(667),y),c(d(801),y),c(d(605),y),c(d(647),y)},654:function(D,y,d){"use strict";var x=this&&this.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(y,"__esModule",{value:!0}),y.IDL_GRAMMAR=void 0;const c=d(614),_=x(d(461));y.IDL_GRAMMAR=c.Grammar.fromCompiled(_.default)},715:function(D,y,d){"use strict";var x=this&&this.__createBinding||(Object.create?function(_,m,h,w){w===void 0&&(w=h);var r=Object.getOwnPropertyDescriptor(m,h);(!r||("get"in r?!m.__esModule:r.writable||r.configurable))&&(r={enumerable:!0,get:function(){return m[h]}}),Object.defineProperty(_,w,r)}:function(_,m,h,w){w===void 0&&(w=h),_[w]=m[h]}),c=this&&this.__exportStar||function(_,m){for(var h in _)h!=="default"&&!Object.prototype.hasOwnProperty.call(m,h)&&x(m,_,h)};Object.defineProperty(y,"__esModule",{value:!0}),c(d(494),y),c(d(862),y)},494:(D,y,d)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.parseIDL=void 0;const x=d(171),c=d(940);function _(m){const h=(0,x.parseIDLToAST)(m),w=(0,c.buildMap)(h);return(0,c.toIDLMessageDefinitions)(w)}y.parseIDL=_},171:(D,y,d)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.parseIDLToAST=void 0;const x=d(614),c=d(654);function _(m){const h=new x.Parser(c.IDL_GRAMMAR);h.feed(m),h.finish();const w=h.results;if(w.length===0)throw new Error(`Could not parse message definition (unexpected end of input): '${m}'`);if(w.length>1)throw new Error(`Ambiguous grammar: '${m}'`);return w[0]}y.parseIDLToAST=_},205:(D,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.normalizeType=y.SIMPLE_TYPES=y.INTEGER_TYPES=void 0;const d={"unsigned short":"uint16","unsigned long":"uint32","unsigned long long":"uint64",short:"int16",long:"int32","long long":"int64",double:"float64",float:"float32",octet:"uint8",wchar:"uint8",char:"uint8",byte:"int8"};y.INTEGER_TYPES=new Set(["int8","uint8","int16","uint16","int32","uint32","int64","uint64","char","byte","octet","unsigned short","unsigned long","unsigned long long","short","long","long long"]),y.SIMPLE_TYPES=new Set(["bool","string","int8","uint8","int16","uint16","int32","uint32","int64","uint64",...Object.keys(d)]);function x(c){const _=d[c];return _??c}y.normalizeType=x},940:(D,y,d)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0}),y.toIDLMessageDefinitions=y.buildMap=void 0;const x=d(732),c=d(57);function _(u){const I=new Map;for(const L of u)r([L],B=>{const l=B[B.length-1],E=B.map(g=>g.name),P=E.slice(0,-1),R=w(P,l,I);if(I.set(R.scopedIdentifier,R),l.declarator==="enum"){let g=0;const C=l.enumerators.map(v=>({declarator:"const",isConstant:!0,name:v.name,type:"unsigned long",value:m(v.annotations)??g++,isComplex:!1}));for(const v of C){const e=new x.ConstantIDLNode(E,v,I);I.set(e.scopedIdentifier,e)}}});return I}y.buildMap=_;function m(u){if(!u)return;const I=u.value;if(I&&I.type==="const-param")return I.value}function h(u){const I=[],L=[];for(const B of u.values())if(B.declarator==="struct")I.push(B.toIDLMessageDefinition());else if(B.declarator==="module"){const l=B.toIDLMessageDefinition();l!=null&&I.push(l)}else B.declarator==="const"?B.scopePath.length===0&&L.push(B.toIDLMessageDefinitionField()):(B.declarator==="enum"||B.declarator==="union")&&I.push(B.toIDLMessageDefinition());return L.length>0&&I.push({name:"",definitions:L,aggregatedKind:"module"}),I}y.toIDLMessageDefinitions=h;const w=(u,I,L)=>{switch(I.declarator){case"module":return new x.ModuleIDLNode(u,I,L);case"enum":return new x.EnumIDLNode(u,I,L);case"const":return new x.ConstantIDLNode(u,I,L);case"struct":return new x.StructIDLNode(u,I,L);case"struct-member":return new x.StructMemberIDLNode(u,I,L);case"typedef":return new x.TypedefIDLNode(u,I,L);case"union":return new c.UnionIDLNode(u,I,L)}};function r(u,I){const L=u[u.length-1];"definitions"in L&&L.definitions.forEach(B=>r([...u,B],I)),I(u)}},862:(D,y)=>{"use strict";Object.defineProperty(y,"__esModule",{value:!0})}},O={};function F(D){var y=O[D];if(y!==void 0)return y.exports;var d=O[D]={exports:{}};return S[D].call(d.exports,d,d.exports,F),d.exports}var V=F(715);z.exports=V})()}},Q={};function K(z){var S=Q[z];if(S!==void 0)return S.exports;var O=Q[z]={exports:{}};return q[z].call(O.exports,O,O.exports,K),O.exports}var k=K(27);se.exports=k})()},62098:function(se,q,Q){"use strict";var K=this&&this.__createBinding||(Object.create?function(z,S,O,F){F===void 0&&(F=O);var V=Object.getOwnPropertyDescriptor(S,O);(!V||("get"in V?!S.__esModule:V.writable||V.configurable))&&(V={enumerable:!0,get:function(){return S[O]}}),Object.defineProperty(z,F,V)}:function(z,S,O,F){F===void 0&&(F=O),z[F]=S[O]}),k=this&&this.__exportStar||function(z,S){for(var O in z)O!=="default"&&!Object.prototype.hasOwnProperty.call(S,O)&&K(S,z,O)};Object.defineProperty(q,"__esModule",{value:!0}),k(Q(38367),q),k(Q(35135),q)},25811:(se,q,Q)=>{"use strict";Q.d(q,{RS:()=>B,c1:()=>E});function K({polynomial:e,numTables:t}){const s=new Uint32Array(256*t);for(let n=0;n<256;n++){let o=n;o=(o&1)*e^o>>>1,o=(o&1)*e^o>>>1,o=(o&1)*e^o>>>1,o=(o&1)*e^o>>>1,o=(o&1)*e^o>>>1,o=(o&1)*e^o>>>1,o=(o&1)*e^o>>>1,o=(o&1)*e^o>>>1,s[n]=o}for(let n=256;n<s.length;n++){const o=s[n-256];s[n]=s[o&255]^o>>>8}return s}const k=K({polynomial:3988292384,numTables:8});function z(){return-1}function S(e,t){const s=t.byteLength,n=new DataView(t.buffer,t.byteOffset,s);let o=e,i=0;const f=-n.byteOffset&3;for(;i<f&&i<s;i++)o=k[(o^n.getUint8(i))&255]^o>>>8;if(i===s)return o;i=f;let b=s-i;for(;b>=8;i+=8,b-=8){o^=n.getUint32(i,!0);const p=n.getUint32(i+4,!0);o=k[0*256+(p>>>24&255)]^k[1*256+(p>>>16&255)]^k[2*256+(p>>>8&255)]^k[3*256+(p>>>0&255)]^k[4*256+(o>>>24&255)]^k[5*256+(o>>>16&255)]^k[6*256+(o>>>8&255)]^k[7*256+(o>>>0&255)]}for(let p=i;p<s;p++)o=k[(o^n.getUint8(p))&255]^o>>>8;return o}function O(e){return(e^-1)>>>0}function F(e){return O(S(z(),e))}var V=function(e,t){var s={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,f;return f={next:b(0),throw:b(1),return:b(2)},typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function b(T){return function(a){return p([T,a])}}function p(T){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,o&&(i=T[0]&2?o.return:T[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,T[1])).done)return i;switch(o=0,i&&(T=[T[0]&2,i.value]),T[0]){case 0:case 1:i=T;break;case 4:return s.label++,{value:T[1],done:!1};case 5:s.label++,o=T[1],T=[0];continue;case 7:T=s.ops.pop(),s.trys.pop();continue;default:if(i=s.trys,!(i=i.length>0&&i[i.length-1])&&(T[0]===6||T[0]===2)){s=0;continue}if(T[0]===3&&(!i||T[1]>i[0]&&T[1]<i[3])){s.label=T[1];break}if(T[0]===6&&s.label<i[1]){s.label=i[1],i=T;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(T);break}i[2]&&s.ops.pop(),s.trys.pop();continue}T=t.call(e,s)}catch(a){T=[6,a],o=0}finally{n=i=0}if(T[0]&5)throw T[1];return{value:T[0]?T[1]:void 0,done:!0}}},D=function(e,t){var s=typeof Symbol=="function"&&e[Symbol.iterator];if(!s)return e;var n=s.call(e),o,i=[],f;try{for(;(t===void 0||t-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(b){f={error:b}}finally{try{o&&!o.done&&(s=n.return)&&s.call(n)}finally{if(f)throw f.error}}return i},y=function(e,t,s){if(s||arguments.length===2)for(var n=0,o=t.length,i;n<o;n++)(i||!(n in t))&&(i||(i=Array.prototype.slice.call(t,0,n)),i[n]=t[n]);return e.concat(i||Array.prototype.slice.call(t))},d=function(e){return~~e},x=function(){function e(t){t===void 0&&(t=e.minComparator);var s=this;this.compare=t,this.heapArray=[],this._limit=0,this.offer=this.add,this.element=this.peek,this.poll=this.pop,this._invertedCompare=function(n,o){return-1*s.compare(n,o)}}return e.getChildrenIndexOf=function(t){return[t*2+1,t*2+2]},e.getParentIndexOf=function(t){if(t<=0)return-1;var s=t%2?1:2;return Math.floor((t-s)/2)},e.getSiblingIndexOf=function(t){if(t<=0)return-1;var s=t%2?1:-1;return t+s},e.minComparator=function(t,s){return t>s?1:t<s?-1:0},e.maxComparator=function(t,s){return s>t?1:s<t?-1:0},e.minComparatorNumber=function(t,s){return t-s},e.maxComparatorNumber=function(t,s){return s-t},e.defaultIsEqual=function(t,s){return t===s},e.print=function(t){function s(a){var $=e.getParentIndexOf(a);return Math.floor(Math.log2($+1))}function n(a,$){for(var N="";$>0;--$)N+=a;return N}for(var o=0,i=[],f=s(t.length-1)+2,b=0;o<t.length;){var p=s(o)+1;o===0&&(p=0);var T=String(t.get(o));T.length>b&&(b=T.length),i[p]=i[p]||[],i[p].push(T),o+=1}return i.map(function(a,$){var N=Math.pow(2,f-$)-1;return n(" ",Math.floor(N/2)*b)+a.map(function(A){var M=(b-A.length)/2;return n(" ",Math.ceil(M))+A+n(" ",Math.floor(M))}).join(n(" ",N*b))}).join(`
`)},e.heapify=function(t,s){var n=new e(s);return n.heapArray=t,n.init(),n},e.heappop=function(t,s){var n=new e(s);return n.heapArray=t,n.pop()},e.heappush=function(t,s,n){var o=new e(n);o.heapArray=t,o.push(s)},e.heappushpop=function(t,s,n){var o=new e(n);return o.heapArray=t,o.pushpop(s)},e.heapreplace=function(t,s,n){var o=new e(n);return o.heapArray=t,o.replace(s)},e.heaptop=function(t,s,n){s===void 0&&(s=1);var o=new e(n);return o.heapArray=t,o.top(s)},e.heapbottom=function(t,s,n){s===void 0&&(s=1);var o=new e(n);return o.heapArray=t,o.bottom(s)},e.nlargest=function(t,s,n){var o=new e(n);return o.heapArray=y([],D(s),!1),o.init(),o.top(t)},e.nsmallest=function(t,s,n){var o=new e(n);return o.heapArray=y([],D(s),!1),o.init(),o.bottom(t)},e.prototype.add=function(t){return this._sortNodeUp(this.heapArray.push(t)-1),this._applyLimit(),!0},e.prototype.addAll=function(t){var s,n=this.length;(s=this.heapArray).push.apply(s,y([],D(t),!1));for(var o=this.length;n<o;++n)this._sortNodeUp(n);return this._applyLimit(),!0},e.prototype.bottom=function(t){if(t===void 0&&(t=1),this.heapArray.length===0||t<=0)return[];if(this.heapArray.length===1)return[this.heapArray[0]];if(t>=this.heapArray.length)return y([],D(this.heapArray),!1);var s=this._bottomN_push(~~t);return s},e.prototype.check=function(){var t=this;return this.heapArray.find(function(s,n){return!!t.getChildrenOf(n).find(function(o){return t.compare(s,o)>0})})},e.prototype.clear=function(){this.heapArray=[]},e.prototype.clone=function(){var t=new e(this.comparator());return t.heapArray=this.toArray(),t._limit=this._limit,t},e.prototype.comparator=function(){return this.compare},e.prototype.contains=function(t,s){return s===void 0&&(s=e.defaultIsEqual),this.heapArray.findIndex(function(n){return s(n,t)})>=0},e.prototype.init=function(t){t&&(this.heapArray=y([],D(t),!1));for(var s=Math.floor(this.heapArray.length);s>=0;--s)this._sortNodeDown(s);this._applyLimit()},e.prototype.isEmpty=function(){return this.length===0},e.prototype.leafs=function(){if(this.heapArray.length===0)return[];var t=e.getParentIndexOf(this.heapArray.length-1);return this.heapArray.slice(t+1)},Object.defineProperty(e.prototype,"length",{get:function(){return this.heapArray.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"limit",{get:function(){return this._limit},set:function(t){this._limit=~~t,this._applyLimit()},enumerable:!1,configurable:!0}),e.prototype.peek=function(){return this.heapArray[0]},e.prototype.pop=function(){var t=this.heapArray.pop();return this.length>0&&t!==void 0?this.replace(t):t},e.prototype.push=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];return t.length<1?!1:t.length===1?this.add(t[0]):this.addAll(t)},e.prototype.pushpop=function(t){var s;return this.compare(this.heapArray[0],t)<0&&(s=D([this.heapArray[0],t],2),t=s[0],this.heapArray[0]=s[1],this._sortNodeDown(0)),t},e.prototype.remove=function(t,s){if(s===void 0&&(s=e.defaultIsEqual),this.length>0){if(t===void 0)return this.pop(),!0;var n=this.heapArray.findIndex(function(o){return s(o,t)});if(n>=0)return n===0?this.pop():n===this.length-1?this.heapArray.pop():(this.heapArray.splice(n,1,this.heapArray.pop()),this._sortNodeUp(n),this._sortNodeDown(n)),!0}return!1},e.prototype.replace=function(t){var s=this.heapArray[0];return this.heapArray[0]=t,this._sortNodeDown(0),s},e.prototype.size=function(){return this.length},e.prototype.top=function(t){if(t===void 0&&(t=1),this.heapArray.length===0||t<=0)return[];if(this.heapArray.length===1||t===1)return[this.heapArray[0]];if(t>=this.heapArray.length)return y([],D(this.heapArray),!1);var s=this._topN_push(~~t);return s},e.prototype.toArray=function(){return y([],D(this.heapArray),!1)},e.prototype.toString=function(){return this.heapArray.toString()},e.prototype.get=function(t){return this.heapArray[t]},e.prototype.getChildrenOf=function(t){var s=this;return e.getChildrenIndexOf(t).map(function(n){return s.heapArray[n]}).filter(function(n){return n!==void 0})},e.prototype.getParentOf=function(t){var s=e.getParentIndexOf(t);return this.heapArray[s]},e.prototype[Symbol.iterator]=function(){return V(this,function(t){switch(t.label){case 0:return this.length?[4,this.pop()]:[3,2];case 1:return t.sent(),[3,0];case 2:return[2]}})},e.prototype.iterator=function(){return this.toArray()},e.prototype._applyLimit=function(){if(this._limit&&this._limit<this.heapArray.length)for(var t=this.heapArray.length-this._limit;t;)this.heapArray.pop(),--t},e.prototype._bottomN_push=function(t){var s=new e(this.compare);s.limit=t,s.heapArray=this.heapArray.slice(-t),s.init();for(var n=this.heapArray.length-1-t,o=e.getParentIndexOf(n),i=[],f=n;f>o;--f)i.push(f);for(var b=this.heapArray;i.length;){var f=i.shift();this.compare(b[f],s.peek())>0&&(s.replace(b[f]),f%2&&i.push(e.getParentIndexOf(f)))}return s.toArray()},e.prototype._moveNode=function(t,s){var n;n=D([this.heapArray[s],this.heapArray[t]],2),this.heapArray[t]=n[0],this.heapArray[s]=n[1]},e.prototype._sortNodeDown=function(t){for(var s=this,n=t<this.heapArray.length-1,o=this.heapArray[t],i=function(T,a){return s.heapArray.length>a&&s.compare(s.heapArray[a],s.heapArray[T])<0&&(T=a),T};n;){var f=e.getChildrenIndexOf(t),b=f.reduce(i,f[0]),p=this.heapArray[b];typeof p<"u"&&this.compare(o,p)>0?(this._moveNode(t,b),t=b):n=!1}},e.prototype._sortNodeUp=function(t){for(var s=t>0;s;){var n=e.getParentIndexOf(t);n>=0&&this.compare(this.heapArray[n],this.heapArray[t])>0?(this._moveNode(t,n),t=n):s=!1}},e.prototype._topN_push=function(t){var s=new e(this._invertedCompare);s.limit=t;for(var n=[0],o=this.heapArray;n.length;){var i=n.shift();i<o.length&&(s.length<t?(s.push(o[i]),n.push.apply(n,y([],D(e.getChildrenIndexOf(i)),!1))):this.compare(o[i],s.peek())<0&&(s.replace(o[i]),n.push.apply(n,y([],D(e.getChildrenIndexOf(i)),!1))))}return s.toArray()},e.prototype._topN_fill=function(t){var s=this.heapArray,n=new e(this._invertedCompare);n.limit=t,n.heapArray=s.slice(0,t),n.init();for(var o=e.getParentIndexOf(t-1)+1,i=[],f=o;f<t;++f)i.push.apply(i,y([],D(e.getChildrenIndexOf(f).filter(function(b){return b<s.length})),!1));for((t-1)%2&&i.push(t);i.length;){var f=i.shift();f<s.length&&this.compare(s[f],n.peek())<0&&(n.replace(s[f]),i.push.apply(i,y([],D(e.getChildrenIndexOf(f)),!1)))}return n.toArray()},e.prototype._topN_heap=function(t){for(var s=this.clone(),n=[],o=0;o<t;++o)n.push(s.pop());return n},e.prototype._topIdxOf=function(t){if(!t.length)return-1;for(var s=0,n=t[s],o=1;o<t.length;++o){var i=this.compare(t[o],n);i<0&&(s=o,n=t[o])}return s},e.prototype._topOf=function(){for(var t=[],s=0;s<arguments.length;s++)t[s]=arguments[s];var n=new e(this.compare);return n.init(t),n.peek()},e}();const c=typeof DataView.prototype.getBigUint64=="function"?DataView.prototype.getBigUint64:function(e,t){const s=t===!0?this.getUint32(e,t):this.getUint32(e+4,t),n=t===!0?this.getUint32(e+4,t):this.getUint32(e,t);return BigInt(n)<<32n|BigInt(s)};class _{constructor(t,s=0){this.textDecoder=new TextDecoder,this.view=t,this.offset=s}uint8(){const t=this.view.getUint8(this.offset);return this.offset+=1,t}uint16(){const t=this.view.getUint16(this.offset,!0);return this.offset+=2,t}uint32(){const t=this.view.getUint32(this.offset,!0);return this.offset+=4,t}uint64(){const t=c.call(this.view,this.offset,!0);return this.offset+=8,t}string(){const t=this.uint32();if(this.offset+t>this.view.byteLength)throw new Error(`String length ${t} exceeds bounds of buffer`);const s=this.textDecoder.decode(new Uint8Array(this.view.buffer,this.view.byteOffset+this.offset,t));return this.offset+=t,s}keyValuePairs(t,s){const n=this.uint32();if(this.offset+n>this.view.byteLength)throw new Error(`Key-value pairs length ${n} exceeds bounds of buffer`);const o=[],i=this.offset+n;try{for(;this.offset<i;)o.push([t(this),s(this)])}catch(f){throw new Error(`Error reading key-value pairs: ${f.message}`)}if(this.offset!==i)throw new Error(`Key-value pairs length (${this.offset-i+n}) greater than expected (${n})`);return o}map(t,s){const n=this.uint32();if(this.offset+n>this.view.byteLength)throw new Error(`Map length ${n} exceeds bounds of buffer`);const o=new Map,i=this.offset+n;try{for(;this.offset<i;){const f=t(this),b=s(this),p=o.get(f);if(p!=null)throw new Error(`Duplicate key ${String(f)} (${String(p)} vs ${String(b)})`);o.set(f,b)}}catch(f){throw new Error(`Error reading map: ${f.message}`)}if(this.offset!==i)throw new Error(`Map length (${this.offset-i+n}) greater than expected (${n})`);return o}}const m=Object.freeze([137,77,67,65,80,48,13,10]);var h;(function(e){e[e.MIN=1]="MIN",e[e.HEADER=1]="HEADER",e[e.FOOTER=2]="FOOTER",e[e.SCHEMA=3]="SCHEMA",e[e.CHANNEL=4]="CHANNEL",e[e.MESSAGE=5]="MESSAGE",e[e.CHUNK=6]="CHUNK",e[e.MESSAGE_INDEX=7]="MESSAGE_INDEX",e[e.CHUNK_INDEX=8]="CHUNK_INDEX",e[e.ATTACHMENT=9]="ATTACHMENT",e[e.ATTACHMENT_INDEX=10]="ATTACHMENT_INDEX",e[e.STATISTICS=11]="STATISTICS",e[e.METADATA=12]="METADATA",e[e.METADATA_INDEX=13]="METADATA_INDEX",e[e.SUMMARY_OFFSET=14]="SUMMARY_OFFSET",e[e.DATA_END=15]="DATA_END",e[e.MAX=15]="MAX"})(h||(h={}));function w(e){return e>=h.MIN&&e<=h.MAX}function r(e,t){if(t+m.length>e.byteLength)return{usedBytes:0};if(!m.every((s,n)=>s===e.getUint8(t+n)))throw new Error(`Expected MCAP magic '${m.map(s=>s.toString(16).padStart(2,"0")).join(" ")}', found '${Array.from(m,(s,n)=>e.getUint8(t+n).toString(16).padStart(2,"0")).join(" ")}'`);return{magic:{specVersion:"0"},usedBytes:m.length}}function u({view:e,startOffset:t,validateCrcs:s}){if(t+1+8>=e.byteLength)return{usedBytes:0};const n=new _(e,t),o=n.uint8(),i=n.uint64();if(i>Number.MAX_SAFE_INTEGER)throw new Error(`Record content length ${i} is too large`);const f=n.offset+Number(i);if(f>e.byteLength)return{usedBytes:0};if(!w(o))return{record:{type:"Unknown",opcode:o,data:new Uint8Array(e.buffer,e.byteOffset+n.offset,Number(i))},usedBytes:f-t};const b=new DataView(e.buffer,e.byteOffset+n.offset,Number(i)),p=new _(b);switch(o){case h.HEADER:{const T=p.string(),a=p.string();return{record:{type:"Header",profile:T,library:a},usedBytes:f-t}}case h.FOOTER:{const T=p.uint64(),a=p.uint64(),$=p.uint32();return{record:{type:"Footer",summaryStart:T,summaryOffsetStart:a,summaryCrc:$},usedBytes:f-t}}case h.SCHEMA:{const T=p.uint16(),a=p.string(),$=p.string(),N=p.uint32();if(p.offset+N>b.byteLength)throw new Error(`Schema data length ${N} exceeds bounds of record`);const A=new Uint8Array(b.buffer.slice(b.byteOffset+p.offset,b.byteOffset+p.offset+N));return p.offset+=N,{record:{type:"Schema",id:T,encoding:$,name:a,data:A},usedBytes:f-t}}case h.CHANNEL:{const T=p.uint16(),a=p.uint16(),$=p.string(),N=p.string(),A=p.map(U=>U.string(),U=>U.string());return{record:{type:"Channel",id:T,schemaId:a,topic:$,messageEncoding:N,metadata:A},usedBytes:f-t}}case h.MESSAGE:{const T=p.uint16(),a=p.uint32(),$=p.uint64(),N=p.uint64(),A=new Uint8Array(b.buffer.slice(b.byteOffset+p.offset,b.byteOffset+b.byteLength));return{record:{type:"Message",channelId:T,sequence:a,logTime:$,publishTime:N,data:A},usedBytes:f-t}}case h.CHUNK:{const T=p.uint64(),a=p.uint64(),$=p.uint64(),N=p.uint32(),A=p.string(),M=Number(p.uint64());if(M+p.offset>b.byteLength)throw new Error("Chunk records length exceeds remaining record size");const U=new Uint8Array(b.buffer.slice(b.byteOffset+p.offset,b.byteOffset+p.offset+M));return{record:{type:"Chunk",messageStartTime:T,messageEndTime:a,compression:A,uncompressedSize:$,uncompressedCrc:N,records:U},usedBytes:f-t}}case h.MESSAGE_INDEX:{const T=p.uint16(),a=p.keyValuePairs(N=>N.uint64(),N=>N.uint64());return{record:{type:"MessageIndex",channelId:T,records:a},usedBytes:f-t}}case h.CHUNK_INDEX:{const T=p.uint64(),a=p.uint64(),$=p.uint64(),N=p.uint64(),A=p.map(G=>G.uint16(),G=>G.uint64()),M=p.uint64(),U=p.string(),W=p.uint64(),X=p.uint64();return{record:{type:"ChunkIndex",messageStartTime:T,messageEndTime:a,chunkStartOffset:$,chunkLength:N,messageIndexOffsets:A,messageIndexLength:M,compression:U,compressedSize:W,uncompressedSize:X},usedBytes:f-t}}case h.ATTACHMENT:{const T=p.uint64(),a=p.uint64(),$=p.string(),N=p.string(),A=p.uint64();if(BigInt(b.byteOffset+p.offset)+A>Number.MAX_SAFE_INTEGER)throw new Error(`Attachment too large: ${A}`);if(p.offset+Number(A)+4>b.byteLength)throw new Error(`Attachment data length ${A} exceeds bounds of record`);const M=new Uint8Array(b.buffer.slice(b.byteOffset+p.offset,b.byteOffset+p.offset+Number(A)));p.offset+=Number(A);const U=p.offset,W=p.uint32();if(s&&W!==0){const H=F(new DataView(b.buffer,b.byteOffset,U));if(H!==W)throw new Error(`Attachment CRC32 mismatch: expected ${W}, actual ${H}`)}return{record:{type:"Attachment",logTime:T,createTime:a,name:$,mediaType:N,data:M},usedBytes:f-t}}case h.ATTACHMENT_INDEX:{const T=p.uint64(),a=p.uint64(),$=p.uint64(),N=p.uint64(),A=p.uint64(),M=p.string(),U=p.string();return{record:{type:"AttachmentIndex",offset:T,length:a,logTime:$,createTime:N,dataSize:A,name:M,mediaType:U},usedBytes:f-t}}case h.STATISTICS:{const T=p.uint64(),a=p.uint16(),$=p.uint32(),N=p.uint32(),A=p.uint32(),M=p.uint32(),U=p.uint64(),W=p.uint64(),X=p.map(G=>G.uint16(),G=>G.uint64());return{record:{type:"Statistics",messageCount:T,schemaCount:a,channelCount:$,attachmentCount:N,metadataCount:A,chunkCount:M,messageStartTime:U,messageEndTime:W,channelMessageCounts:X},usedBytes:f-t}}case h.METADATA:{const T=p.string();return{record:{type:"Metadata",metadata:p.map(N=>N.string(),N=>N.string()),name:T},usedBytes:f-t}}case h.METADATA_INDEX:{const T=p.uint64(),a=p.uint64(),$=p.string();return{record:{type:"MetadataIndex",offset:T,length:a,name:$},usedBytes:f-t}}case h.SUMMARY_OFFSET:{const T=p.uint8(),a=p.uint64(),$=p.uint64();return{record:{type:"SummaryOffset",groupOpcode:T,groupStart:a,groupLength:$},usedBytes:f-t}}case h.DATA_END:return{record:{type:"DataEnd",dataSectionCrc:p.uint32()},usedBytes:f-t}}}function I(e,t,s){let n=0,o=e.length;if(o===0)return 0;const i=s(t);for(;n<o;){const f=n+o>>>1;s(e[f][0])<i?n=f+1:o=f}return o}class L{constructor(t){if(this.chunkIndex=t.chunkIndex,this.relevantChannels=t.relevantChannels,this.startTime=t.startTime,this.endTime=t.endTime,this.reverse=t.reverse,this.chunkIndex.messageIndexLength===0n)throw new Error("Chunks without message indexes are not currently supported")}compare(t){if(this.reverse!==t.reverse)throw new Error("Cannot compare a reversed ChunkCursor to a non-reversed ChunkCursor");let s=Number(this.getSortTime()-t.getSortTime());return s===0&&(s=Number(this.chunkIndex.chunkStartOffset-t.chunkIndex.chunkStartOffset)),this.reverse?-s:s}hasMoreMessages(){if(!this.messageIndexCursors)throw new Error("loadMessageIndexes() must be called before hasMore()");return this.messageIndexCursors.size()>0}popMessage(){if(!this.messageIndexCursors)throw new Error("loadMessageIndexes() must be called before popMessage()");const t=this.messageIndexCursors.peek();if(!t)throw new Error(`Unexpected popMessage() call when no more messages are available, in chunk at offset ${this.chunkIndex.chunkStartOffset}`);const s=t.records[t.index],[n]=s;if(this.startTime!=null&&n<this.startTime)throw new Error(`Encountered message with logTime (${n}) prior to startTime (${this.startTime}) in chunk at offset ${this.chunkIndex.chunkStartOffset}`);if(this.endTime!=null&&n>this.endTime)throw new Error(`Encountered message with logTime (${n}) after endTime (${this.endTime}) in chunk at offset ${this.chunkIndex.chunkStartOffset}`);const o=t.records[t.index+1];if(o&&this.reverse){if(this.startTime==null||o[0]>=this.startTime)return t.index++,this.messageIndexCursors.replace(t),s}else if(o&&(this.endTime==null||o[0]<=this.endTime))return t.index++,this.messageIndexCursors.replace(t),s;return this.messageIndexCursors.pop(),s}hasMessageIndexes(){return this.messageIndexCursors!=null}async loadMessageIndexes(t){const s=this.reverse;this.messageIndexCursors=new x((T,a)=>{const $=T.records[T.index]?.[0],N=a.records[a.index]?.[0];return s?$==null?-1:N==null?1:Number(N-$):$==null?1:N==null?-1:Number($-N)});let n,o;for(const[T,a]of this.chunkIndex.messageIndexOffsets)(n==null||a<n)&&(n=a),(!this.relevantChannels||this.relevantChannels.has(T))&&(o==null||a<o)&&(o=a);if(n==null||o==null)return;const i=n+this.chunkIndex.messageIndexLength,f=await t.read(o,i-o),b=new DataView(f.buffer,f.byteOffset,f.byteLength);let p=0;for(let T;T=u({view:b,startOffset:p,validateCrcs:!0}),T.record;p+=T.usedBytes){if(T.record.type!=="MessageIndex"||T.record.records.length===0||this.relevantChannels&&!this.relevantChannels.has(T.record.channelId))continue;T.record.records.sort(([$],[N])=>Number($-N)),s&&T.record.records.reverse();for(let $=0;$<T.record.records.length;$++){const[N]=T.record.records[$];if(N<this.chunkIndex.messageStartTime)throw new Error(`Encountered message index entry in channel ${T.record.channelId} with logTime (${N}) earlier than chunk messageStartTime (${this.chunkIndex.messageStartTime}) in chunk at offset ${this.chunkIndex.chunkStartOffset}`);if(N>this.chunkIndex.messageEndTime)throw new Error(`Encountered message index entry in channel ${T.record.channelId} with logTime (${N}) later than chunk messageEndTime (${this.chunkIndex.messageEndTime}) in chunk at offset ${this.chunkIndex.chunkStartOffset}`)}let a=0;if(s?this.endTime!=null&&(a=I(T.record.records,this.endTime,$=>-$)):this.startTime!=null&&(a=I(T.record.records,this.startTime,$=>$)),!(a>=T.record.records.length)){if(s){if(this.startTime!=null&&T.record.records[a][0]<this.startTime)continue}else if(this.endTime!=null&&T.record.records[a][0]>this.endTime)continue;this.messageIndexCursors.push({index:a,channelId:T.record.channelId,records:T.record.records})}}if(p!==b.byteLength)throw new Error(`${b.byteLength-p} bytes remaining in message index section`)}getSortTime(){if(!this.messageIndexCursors)return this.reverse?this.chunkIndex.messageEndTime:this.chunkIndex.messageStartTime;const t=this.messageIndexCursors.peek();if(!t)throw new Error(`Unexpected empty cursor for chunk at offset ${this.chunkIndex.chunkStartOffset}`);return t.records[t.index][0]}}class B{constructor(t){this.metadataIndexes=[],this.readable=t.readable,this.chunkIndexes=t.chunkIndexes,this.attachmentIndexes=t.attachmentIndexes,this.metadataIndexes=t.metadataIndexes,this.statistics=t.statistics,this.decompressHandlers=t.decompressHandlers,this.channelsById=t.channelsById,this.schemasById=t.schemasById,this.summaryOffsetsByOpcode=t.summaryOffsetsByOpcode,this.header=t.header,this.footer=t.footer;for(const s of t.chunkIndexes)(this.messageStartTime==null||s.messageStartTime<this.messageStartTime)&&(this.messageStartTime=s.messageStartTime),(this.messageEndTime==null||s.messageEndTime>this.messageEndTime)&&(this.messageEndTime=s.messageEndTime);for(const s of t.attachmentIndexes)(this.attachmentStartTime==null||s.logTime<this.attachmentStartTime)&&(this.attachmentStartTime=s.logTime),(this.attachmentEndTime==null||s.logTime>this.attachmentEndTime)&&(this.attachmentEndTime=s.logTime)}errorWithLibrary(t){return new Error(`${t} [library=${this.header.library}]`)}static async Initialize({readable:t,decompressHandlers:s}){const n=await t.size();let o;{const j=await t.read(0n,BigInt(m.length+1+8)),Y=new DataView(j.buffer,j.byteOffset,j.byteLength);r(Y,0);const Z=Y.getBigUint64(m.length+1,!0),J=await t.read(BigInt(m.length),1n+8n+Z),ee=u({view:new DataView(J.buffer,J.byteOffset,J.byteLength),startOffset:0,validateCrcs:!0});if(ee.record?.type!=="Header")throw new Error(`Unable to read header at beginning of file; found ${ee.record?.type??"nothing"}`);if(ee.usedBytes!==J.byteLength)throw new Error(`${J.byteLength-ee.usedBytes} bytes remaining after parsing header`);o=ee.record}function i(j){return new Error(`${j} [library=${o.library}]`)}let f,b;{const j=BigInt(m.length+1+8+4+4),Y=BigInt(1+8+8+8+4+m.length);if(n<j+Y)throw i(`File size (${n}) is too small to be valid MCAP`);f=n-Y;const Z=await t.read(f,Y);b=new DataView(Z.buffer,Z.byteOffset,Z.byteLength)}try{r(b,b.byteLength-m.length)}catch(j){throw i(j.message)}let p;{const j=u({view:b,startOffset:0,validateCrcs:!0});if(j.record?.type!=="Footer")throw i(`Unable to read footer from end of file (offset ${f}); found ${j.record?.type??"nothing"}`);if(j.usedBytes!==b.byteLength-m.length)throw i(`${b.byteLength-m.length-j.usedBytes} bytes remaining after parsing footer`);p=j.record}if(p.summaryStart===0n)throw i("File is not indexed");const T=new Uint8Array(1+8+8+8);T.set(new Uint8Array(b.buffer,b.byteOffset,T.byteLength));const a=await t.read(p.summaryStart,f-p.summaryStart);if(p.summaryCrc!==0){let j=z();if(j=S(j,a),j=S(j,T),j=O(j),j!==p.summaryCrc)throw i(`Incorrect summary CRC ${j} (expected ${p.summaryCrc})`)}const $=new DataView(a.buffer,a.byteOffset,a.byteLength),N=new Map,A=new Map,M=[],U=[],W=[],X=new Map;let H,G=0;for(let j;j=u({view:$,startOffset:G,validateCrcs:!0}),j.record;G+=j.usedBytes)switch(j.record.type){case"Schema":A.set(j.record.id,j.record);break;case"Channel":N.set(j.record.id,j.record);break;case"ChunkIndex":M.push(j.record);break;case"AttachmentIndex":U.push(j.record);break;case"MetadataIndex":W.push(j.record);break;case"Statistics":if(H)throw i("Duplicate Statistics record");H=j.record;break;case"SummaryOffset":X.set(j.record.groupOpcode,j.record);break;case"Header":case"Footer":case"Message":case"Chunk":case"MessageIndex":case"Attachment":case"Metadata":case"DataEnd":throw i(`${j.record.type} record not allowed in index section`);case"Unknown":break}if(G!==$.byteLength)throw i(`${$.byteLength-G} bytes remaining in index section`);return new B({readable:t,chunkIndexes:M,attachmentIndexes:U,metadataIndexes:W,statistics:H,decompressHandlers:s,channelsById:N,schemasById:A,summaryOffsetsByOpcode:X,header:o,footer:p})}async*readMessages(t={}){const{topics:s,startTime:n=this.messageStartTime,endTime:o=this.messageEndTime,reverse:i=!1,validateCrcs:f}=t;if(n==null||o==null)return;let b;if(s){b=new Set;for(const a of this.channelsById.values())s.includes(a.topic)&&b.add(a.id)}const p=new x((a,$)=>a.compare($));for(const a of this.chunkIndexes)a.messageStartTime<=o&&a.messageEndTime>=n&&p.push(new L({chunkIndex:a,relevantChannels:b,startTime:n,endTime:o,reverse:i}));const T=new Map;for(let a;a=p.peek();){if(!a.hasMessageIndexes()){await a.loadMessageIndexes(this.readable),a.hasMoreMessages()?p.replace(a):p.pop();continue}let $=T.get(a.chunkIndex.chunkStartOffset);$||($=await this.loadChunkData(a.chunkIndex,{validateCrcs:f??!0}),T.set(a.chunkIndex.chunkStartOffset,$));const[N,A]=a.popMessage();if(A>=BigInt($.byteLength))throw this.errorWithLibrary(`Message offset beyond chunk bounds (log time ${N}, offset ${A}, chunk data length ${$.byteLength}) in chunk at offset ${a.chunkIndex.chunkStartOffset}`);const M=u({view:$,startOffset:Number(A),validateCrcs:f??!0});if(!M.record)throw this.errorWithLibrary(`Unable to parse record at offset ${A} in chunk at offset ${a.chunkIndex.chunkStartOffset}`);if(M.record.type!=="Message")throw this.errorWithLibrary(`Unexpected record type ${M.record.type} in message index (time ${N}, offset ${A} in chunk at offset ${a.chunkIndex.chunkStartOffset})`);if(M.record.logTime!==N)throw this.errorWithLibrary(`Message log time ${M.record.logTime} did not match message index entry (${N} at offset ${A} in chunk at offset ${a.chunkIndex.chunkStartOffset})`);yield M.record,a.hasMoreMessages()?p.replace(a):(p.pop(),T.delete(a.chunkIndex.chunkStartOffset))}}async*readMetadata(t={}){const{name:s}=t;for(const n of this.metadataIndexes){if(s!=null&&n.name!==s)continue;const o=await this.readable.read(n.offset,n.length),i=u({view:new DataView(o.buffer,o.byteOffset,o.byteLength),startOffset:0,validateCrcs:!1});if(i.record?.type!=="Metadata")throw this.errorWithLibrary(`Metadata data at offset ${n.offset} does not point to metadata record (found ${String(i.record?.type)})`);yield i.record}}async*readAttachments(t={}){const{name:s,mediaType:n,startTime:o=this.attachmentStartTime,endTime:i=this.attachmentEndTime,validateCrcs:f}=t;if(!(o==null||i==null))for(const b of this.attachmentIndexes){if(s!=null&&b.name!==s||n!=null&&b.mediaType!==n||b.logTime>i||b.logTime<o)continue;const p=await this.readable.read(b.offset,b.length),T=u({view:new DataView(p.buffer,p.byteOffset,p.byteLength),startOffset:0,validateCrcs:f??!0});if(T.record?.type!=="Attachment")throw this.errorWithLibrary(`Attachment data at offset ${b.offset} does not point to attachment record (found ${String(T.record?.type)})`);yield T.record}}async loadChunkData(t,s){const n=await this.readable.read(t.chunkStartOffset,t.chunkLength),o=u({view:new DataView(n.buffer,n.byteOffset,n.byteLength),startOffset:0,validateCrcs:s?.validateCrcs??!0});if(o.record?.type!=="Chunk")throw this.errorWithLibrary(`Chunk start offset ${t.chunkStartOffset} does not point to chunk record (found ${String(o.record?.type)})`);const i=o.record;let f=i.records;if(i.compression!==""&&f.byteLength>0){const b=this.decompressHandlers?.[i.compression];if(!b)throw this.errorWithLibrary(`Unsupported compression ${i.compression}`);f=b(f,i.uncompressedSize)}if(i.uncompressedCrc!==0&&s?.validateCrcs!==!1){const b=F(f);if(b!==i.uncompressedCrc)throw this.errorWithLibrary(`Incorrect chunk CRC ${b} (expected ${i.uncompressedCrc})`)}return new DataView(f.buffer,f.byteOffset,f.byteLength)}}class l{constructor(t=0){this.buffer=new ArrayBuffer(t),this.view=new DataView(this.buffer,0,0)}bytesRemaining(){return this.view.byteLength}consume(t){this.view=new DataView(this.buffer,this.view.byteOffset+t,this.view.byteLength-t)}append(t){if(this.view.byteOffset+this.view.byteLength+t.byteLength<=this.buffer.byteLength)new Uint8Array(this.view.buffer,this.view.byteOffset).set(t,this.view.byteLength),this.view=new DataView(this.buffer,this.view.byteOffset,this.view.byteLength+t.byteLength);else if(this.view.byteLength+t.byteLength<=this.buffer.byteLength){const s=new Uint8Array(this.buffer,this.view.byteOffset,this.view.byteLength),n=new Uint8Array(this.buffer);n.set(s,0),n.set(t,s.byteLength),this.view=new DataView(this.buffer,0,this.view.byteLength+t.byteLength)}else{const s=new Uint8Array(this.buffer,this.view.byteOffset,this.view.byteLength);this.buffer=new ArrayBuffer((this.view.byteLength+t.byteLength)*2);const n=new Uint8Array(this.buffer);n.set(s,0),n.set(t,s.byteLength),this.view=new DataView(this.buffer,0,this.view.byteLength+t.byteLength)}}}class E{constructor({includeChunks:t=!1,decompressHandlers:s={},validateCrcs:n=!0,noMagicPrefix:o=!1}={}){this.buffer=new l(m.length*2),this.doneReading=!1,this.generator=this.read(),this.channelsById=new Map,this.includeChunks=t,this.decompressHandlers=s,this.validateCrcs=n,this.noMagicPrefix=o}done(){return this.doneReading}bytesRemaining(){return this.buffer.bytesRemaining()}append(t){if(this.doneReading)throw new Error("Already done reading");this.buffer.append(t)}nextRecord(){if(this.doneReading)return;const t=this.generator.next();if(t.value?.type==="Channel"){const s=this.channelsById.get(t.value.id);if(this.channelsById.set(t.value.id,t.value),s&&!P(s,t.value))throw new Error(`Channel record for id ${t.value.id} (topic: ${t.value.topic}) differs from previous channel record of the same id.`)}else if(t.value?.type==="Message"){const s=t.value.channelId;if(!this.channelsById.get(s))throw new Error(`Encountered message on channel ${s} without prior channel record`)}return t.done===!0&&(this.doneReading=!0),t.value}*read(){if(!this.noMagicPrefix){let n,o;for(;{magic:n,usedBytes:o}=r(this.buffer.view,0),!n;)yield;this.buffer.consume(o)}let t;function s(n){return new Error(`${n} ${t?`[library=${t.library}]`:"[no header]"}`)}for(;;){let n;{let o;for(;{record:n,usedBytes:o}=u({view:this.buffer.view,startOffset:0,validateCrcs:this.validateCrcs}),!n;)yield;this.buffer.consume(o)}switch(n.type){case"Unknown":break;case"Header":if(t)throw new Error(`Duplicate Header record: library=${t.library} profile=${t.profile} vs. library=${n.library} profile=${n.profile}`);t=n,yield n;break;case"Schema":case"Channel":case"Message":case"MessageIndex":case"ChunkIndex":case"Attachment":case"AttachmentIndex":case"Statistics":case"Metadata":case"MetadataIndex":case"SummaryOffset":case"DataEnd":yield n;break;case"Chunk":{this.includeChunks&&(yield n);let o=n.records;if(n.compression!==""&&o.byteLength>0){const b=this.decompressHandlers[n.compression];if(!b)throw s(`Unsupported compression ${n.compression}`);o=b(o,n.uncompressedSize)}if(this.validateCrcs&&n.uncompressedCrc!==0){const b=F(o);if(b!==n.uncompressedCrc)throw s(`Incorrect chunk CRC ${b} (expected ${n.uncompressedCrc})`)}const i=new DataView(o.buffer,o.byteOffset,o.byteLength);let f=0;for(let b;b=u({view:i,startOffset:f,validateCrcs:this.validateCrcs}),b.record;f+=b.usedBytes)switch(b.record.type){case"Unknown":break;case"Header":case"Footer":case"Chunk":case"MessageIndex":case"ChunkIndex":case"Attachment":case"AttachmentIndex":case"Statistics":case"Metadata":case"MetadataIndex":case"SummaryOffset":case"DataEnd":throw s(`${b.record.type} record not allowed inside a chunk`);case"Schema":case"Channel":case"Message":yield b.record;break}if(f!==o.byteLength)throw s(`${o.byteLength-f} bytes remaining in chunk`);break}case"Footer":try{let o,i;for(;{magic:o,usedBytes:i}=r(this.buffer.view,0),!o;)yield;this.buffer.consume(i)}catch(o){throw s(o.message)}if(this.buffer.bytesRemaining()!==0)throw s(`${this.buffer.bytesRemaining()} bytes remaining after MCAP footer and trailing magic`);return n}}}}function P(e,t){if(!(e.id===t.id&&e.messageEncoding===t.messageEncoding&&e.schemaId===t.schemaId&&e.topic===t.topic&&e.metadata.size===t.metadata.size))return!1;for(const[s,n]of e.metadata.entries()){const o=t.metadata.get(s);if(n!==o)return!1}return!0}class R{constructor(t){this.options=t,this.bufferBuilder=new BufferBuilder}get length(){return this.bufferBuilder.length}get buffer(){return this.bufferBuilder.buffer}reset(){this.bufferBuilder.reset()}writeMagic(){this.bufferBuilder.bytes(new Uint8Array(MCAP_MAGIC))}writeHeader(t){this.bufferBuilder.uint8(Opcode.HEADER);const s=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).string(t.profile).string(t.library),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const n=this.bufferBuilder.length;return this.bufferBuilder.seek(s).uint64(BigInt(n-s-8)).seek(n),BigInt(n-s+1)}writeFooter(t){return this.bufferBuilder.uint8(Opcode.FOOTER).uint64(20n).uint64(t.summaryStart).uint64(t.summaryOffsetStart).uint32(t.summaryCrc),20n}writeSchema(t){this.bufferBuilder.uint8(Opcode.SCHEMA);const s=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint16(t.id).string(t.name).string(t.encoding).uint32(t.data.byteLength).bytes(t.data),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const n=this.bufferBuilder.length;return this.bufferBuilder.seek(s).uint64(BigInt(n-s-8)).seek(n),BigInt(n-s+1)}writeChannel(t){this.bufferBuilder.uint8(Opcode.CHANNEL);const s=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint16(t.id).uint16(t.schemaId).string(t.topic).string(t.messageEncoding).tupleArray(o=>this.bufferBuilder.string(o),o=>this.bufferBuilder.string(o),t.metadata),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const n=this.bufferBuilder.length;return this.bufferBuilder.seek(s).uint64(BigInt(n-s-8)).seek(n),BigInt(n-s+1)}writeMessage(t){this.bufferBuilder.uint8(Opcode.MESSAGE);const s=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint16(t.channelId).uint32(t.sequence).uint64(t.logTime).uint64(t.publishTime).bytes(t.data);const n=this.bufferBuilder.length;this.bufferBuilder.seek(s).uint64(BigInt(n-s-8)).seek(n)}writeAttachment(t){this.bufferBuilder.uint8(Opcode.ATTACHMENT);const s=this.bufferBuilder.length;this.bufferBuilder.uint64(0n);const n=this.bufferBuilder.length;this.bufferBuilder.uint64(t.logTime).uint64(t.createTime).string(t.name).string(t.mediaType).uint64(BigInt(t.data.byteLength)).bytes(t.data),this.bufferBuilder.uint32(crc32(this.bufferBuilder.bufferView(n,this.bufferBuilder.length-n))),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const o=this.bufferBuilder.length;return this.bufferBuilder.seek(s).uint64(BigInt(o-s-8)).seek(o),BigInt(o-s+1)}writeAttachmentIndex(t){this.bufferBuilder.uint8(Opcode.ATTACHMENT_INDEX);const s=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint64(t.offset).uint64(t.length).uint64(t.logTime).uint64(t.createTime).uint64(t.dataSize).string(t.name).string(t.mediaType),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const n=this.bufferBuilder.length;return this.bufferBuilder.seek(s).uint64(BigInt(n-s-8)).seek(n),BigInt(n-s+1)}writeChunk(t){this.bufferBuilder.uint8(Opcode.CHUNK);const s=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint64(t.messageStartTime).uint64(t.messageEndTime).uint64(t.uncompressedSize).uint32(t.uncompressedCrc).string(t.compression).uint64(BigInt(t.records.byteLength)).bytes(t.records);const n=this.bufferBuilder.length;return this.bufferBuilder.seek(s).uint64(BigInt(n-s-8)).seek(n),BigInt(n-s+1)}writeChunkIndex(t){this.bufferBuilder.uint8(Opcode.CHUNK_INDEX);const s=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint64(t.messageStartTime).uint64(t.messageEndTime).uint64(t.chunkStartOffset).uint64(t.chunkLength).uint32(t.messageIndexOffsets.size*10);for(const[o,i]of t.messageIndexOffsets)this.bufferBuilder.uint16(o).uint64(i);this.bufferBuilder.uint64(t.messageIndexLength).string(t.compression).uint64(t.compressedSize).uint64(t.uncompressedSize),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const n=this.bufferBuilder.length;return this.bufferBuilder.seek(s).uint64(BigInt(n-s-8)).seek(n),BigInt(n-s+1)}writeMessageIndex(t){this.bufferBuilder.uint8(Opcode.MESSAGE_INDEX);const s=this.bufferBuilder.length,n=t.records.length*16;this.bufferBuilder.uint64(0n).uint16(t.channelId).uint32(n);for(const i of t.records)this.bufferBuilder.uint64(i[0]).uint64(i[1]);this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const o=this.bufferBuilder.length;return this.bufferBuilder.seek(s).uint64(BigInt(o-s-8)).seek(o),BigInt(o-s+1)}writeMetadata(t){this.bufferBuilder.uint8(Opcode.METADATA);const s=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).string(t.name).tupleArray(o=>this.bufferBuilder.string(o),o=>this.bufferBuilder.string(o),t.metadata),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const n=this.bufferBuilder.length;return this.bufferBuilder.seek(s).uint64(BigInt(n-s-8)).seek(n),BigInt(n-s+1)}writeMetadataIndex(t){this.bufferBuilder.uint8(Opcode.METADATA_INDEX);const s=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint64(t.offset).uint64(t.length).string(t.name),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const n=this.bufferBuilder.length;return this.bufferBuilder.seek(s).uint64(BigInt(n-s-8)).seek(n),BigInt(n-s+1)}writeSummaryOffset(t){this.bufferBuilder.uint8(Opcode.SUMMARY_OFFSET);const s=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint8(t.groupOpcode).uint64(t.groupStart).uint64(t.groupLength),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const n=this.bufferBuilder.length;return this.bufferBuilder.seek(s).uint64(BigInt(n-s-8)).seek(n),BigInt(n-s+1)}writeStatistics(t){this.bufferBuilder.uint8(Opcode.STATISTICS);const s=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint64(t.messageCount).uint16(t.schemaCount).uint32(t.channelCount).uint32(t.attachmentCount).uint32(t.metadataCount).uint32(t.chunkCount).uint64(t.messageStartTime).uint64(t.messageEndTime).tupleArray(o=>this.bufferBuilder.uint16(o),o=>this.bufferBuilder.uint64(o),t.channelMessageCounts),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const n=this.bufferBuilder.length;return this.bufferBuilder.seek(s).uint64(BigInt(n-s-8)).seek(n),BigInt(n-s+1)}writeDataEnd(t){this.bufferBuilder.uint8(Opcode.DATA_END);const s=this.bufferBuilder.length;this.bufferBuilder.uint64(0n).uint32(t.dataSectionCrc),this.options?.padRecords===!0&&this.bufferBuilder.uint8(1).uint8(255).uint8(255);const n=this.bufferBuilder.length;return this.bufferBuilder.seek(s).uint64(BigInt(n-s-8)).seek(n),BigInt(n-s+1)}}class g{constructor({useMessageIndex:t=!0}){this.recordWriter=new McapRecordBuilder,this.totalMessageCount=0,this.messageStartTime=0n,this.messageEndTime=0n,t&&(this.messageIndices=new Map)}get numMessages(){return this.totalMessageCount}get buffer(){return this.recordWriter.buffer}get byteLength(){return this.recordWriter.length}get indices(){return this.messageIndices?this.messageIndices.values():[]}addSchema(t){this.recordWriter.writeSchema(t)}addChannel(t){this.messageIndices&&!this.messageIndices.has(t.id)&&this.messageIndices.set(t.id,{channelId:t.id,records:[]}),this.recordWriter.writeChannel(t)}addMessage(t){if((this.totalMessageCount===0||t.logTime<this.messageStartTime)&&(this.messageStartTime=t.logTime),(this.totalMessageCount===0||t.logTime>this.messageEndTime)&&(this.messageEndTime=t.logTime),this.messageIndices){let s=this.messageIndices.get(t.channelId);s||(s={channelId:t.channelId,records:[]},this.messageIndices.set(t.channelId,s)),s.records.push([t.logTime,BigInt(this.recordWriter.length)])}this.totalMessageCount+=1,this.recordWriter.writeMessage(t)}reset(){this.messageStartTime=0n,this.messageEndTime=0n,this.totalMessageCount=0,this.messageIndices?.clear(),this.recordWriter.reset()}}class C{constructor(t){this.nextChannelId=0,this.nextSchemaId=1,this.recordWriter=new McapRecordBuilder,this.schemas=new Map,this.channels=new Map,this.writtenSchemaIds=new Set,this.writtenChannelIds=new Set,this.dataSectionCrc=crc32Init();const{writable:s,useStatistics:n=!0,useSummaryOffsets:o=!0,useChunks:i=!0,repeatSchemas:f=!0,repeatChannels:b=!0,useAttachmentIndex:p=!0,useMetadataIndex:T=!0,useMessageIndex:a=!0,useChunkIndex:$=!0,startChannelId:N=0,chunkSize:A=1024*1024,compressChunk:M}=t;this.writable=s,this.useSummaryOffsets=o,n&&(this.statistics={messageCount:0n,schemaCount:0,channelCount:0,attachmentCount:0,metadataCount:0,chunkCount:0,messageStartTime:0n,messageEndTime:0n,channelMessageCounts:new Map}),i&&(this.chunkBuilder=new ChunkBuilder({useMessageIndex:a})),this.repeatSchemas=f,this.repeatChannels=b,p&&(this.attachmentIndices=[]),T&&(this.metadataIndices=[]),$&&(this.chunkIndices=[]),this.nextChannelId=N,this.chunkSize=A,this.compressChunk=M}async start(t){this.recordWriter.writeMagic(),this.recordWriter.writeHeader(t),this.dataSectionCrc=crc32Update(this.dataSectionCrc,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset()}async end(){await this.finalizeChunk(),this.dataSectionCrc=crc32Update(this.dataSectionCrc,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset(),this.recordWriter.writeDataEnd({dataSectionCrc:crc32Final(this.dataSectionCrc)}),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset();const t=[],s=this.writable.position();let n=crc32Init();if(this.repeatSchemas){const p=this.writable.position();let T=0n;for(const a of this.schemas.values())T+=this.recordWriter.writeSchema(a);t.push({groupOpcode:Opcode.SCHEMA,groupStart:p,groupLength:T})}if(this.repeatChannels){n=crc32Update(n,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset();const p=this.writable.position();let T=0n;for(const a of this.channels.values())T+=this.recordWriter.writeChannel(a);t.push({groupOpcode:Opcode.CHANNEL,groupStart:p,groupLength:T})}if(this.statistics){n=crc32Update(n,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset();const p=this.writable.position(),T=this.recordWriter.writeStatistics(this.statistics);t.push({groupOpcode:Opcode.STATISTICS,groupStart:p,groupLength:T})}if(n=crc32Update(n,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset(),this.metadataIndices){n=crc32Update(n,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset();const p=this.writable.position();let T=0n;for(const a of this.metadataIndices)T+=this.recordWriter.writeMetadataIndex(a);t.push({groupOpcode:Opcode.METADATA_INDEX,groupStart:p,groupLength:T})}if(this.attachmentIndices){n=crc32Update(n,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset();const p=this.writable.position();let T=0n;for(const a of this.attachmentIndices)T+=this.recordWriter.writeAttachmentIndex(a);t.push({groupOpcode:Opcode.ATTACHMENT_INDEX,groupStart:p,groupLength:T})}if(this.chunkIndices){n=crc32Update(n,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset();const p=this.writable.position();let T=0n;for(const a of this.chunkIndices)T+=this.recordWriter.writeChunkIndex(a);t.push({groupOpcode:Opcode.CHUNK_INDEX,groupStart:p,groupLength:T})}n=crc32Update(n,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset();const o=this.writable.position(),i=o-s;if(this.useSummaryOffsets)for(const p of t)p.groupLength!==0n&&this.recordWriter.writeSummaryOffset(p);n=crc32Update(n,this.recordWriter.buffer);const f={summaryStart:i===0n?0n:s,summaryOffsetStart:this.useSummaryOffsets?o:0n,summaryCrc:0},b=new DataView(new ArrayBuffer(1+8+8+8));b.setUint8(0,Opcode.FOOTER),b.setBigUint64(1,8n+8n+4n,!0),b.setBigUint64(1+8,f.summaryStart,!0),b.setBigUint64(1+8+8,f.summaryOffsetStart,!0),n=crc32Update(n,b),f.summaryCrc=crc32Final(n),this.recordWriter.writeFooter(f),this.recordWriter.writeMagic(),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset()}async registerSchema(t){const s=this.nextSchemaId++;return this.schemas.set(s,{...t,id:s}),this.statistics&&++this.statistics.schemaCount,s}async registerChannel(t){const s=this.nextChannelId++;return this.channels.set(s,{...t,id:s}),this.statistics&&++this.statistics.channelCount,s}async addMessage(t){if(this.statistics&&(this.statistics.messageCount===0n?(this.statistics.messageStartTime=t.logTime,this.statistics.messageEndTime=t.logTime):(t.logTime<this.statistics.messageStartTime&&(this.statistics.messageStartTime=t.logTime),t.logTime>this.statistics.messageEndTime&&(this.statistics.messageEndTime=t.logTime)),this.statistics.channelMessageCounts.set(t.channelId,(this.statistics.channelMessageCounts.get(t.channelId)??0n)+1n),++this.statistics.messageCount),!this.writtenChannelIds.has(t.channelId)){const s=this.channels.get(t.channelId);if(!s)throw new Error(`McapWriter#addMessage failed: missing channel for id ${t.channelId}`);if(s.schemaId!==0&&!this.writtenSchemaIds.has(s.schemaId)){const n=this.schemas.get(s.schemaId);if(!n)throw new Error(`McapWriter#addMessage failed: missing schema for id ${s.schemaId}`);this.chunkBuilder?this.chunkBuilder.addSchema(n):this.recordWriter.writeSchema(n),this.writtenSchemaIds.add(s.schemaId)}this.chunkBuilder?this.chunkBuilder.addChannel(s):this.recordWriter.writeChannel(s),this.writtenChannelIds.add(t.channelId)}this.chunkBuilder?this.chunkBuilder.addMessage(t):this.recordWriter.writeMessage(t),this.chunkBuilder&&this.chunkBuilder.byteLength>this.chunkSize&&await this.finalizeChunk()}async addAttachment(t){const s=this.recordWriter.writeAttachment(t);if(this.statistics&&++this.statistics.attachmentCount,this.attachmentIndices){const n=this.writable.position();this.attachmentIndices.push({logTime:t.logTime,createTime:t.createTime,name:t.name,mediaType:t.mediaType,offset:n,dataSize:BigInt(t.data.byteLength),length:s})}this.dataSectionCrc=crc32Update(this.dataSectionCrc,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset()}async addMetadata(t){const s=this.recordWriter.writeMetadata(t);if(this.statistics&&++this.statistics.metadataCount,this.metadataIndices){const n=this.writable.position();this.metadataIndices.push({name:t.name,offset:n,length:s})}this.dataSectionCrc=crc32Update(this.dataSectionCrc,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset()}async finalizeChunk(){if(!this.chunkBuilder||this.chunkBuilder.numMessages===0)return;this.statistics&&++this.statistics.chunkCount;const t=this.chunkBuilder.buffer,s=BigInt(t.length),n=crc32(t);let o="",i=t;this.compressChunk&&({compression:o,compressedData:i}=this.compressChunk(t));const f={messageStartTime:this.chunkBuilder.messageStartTime,messageEndTime:this.chunkBuilder.messageEndTime,uncompressedSize:s,uncompressedCrc:n,compression:o,records:i},b=this.writable.position(),p=this.recordWriter.writeChunk(f),T=this.chunkIndices?new Map:void 0;this.dataSectionCrc=crc32Update(this.dataSectionCrc,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset();const a=this.writable.position();let $=0n;for(const N of this.chunkBuilder.indices)T?.set(N.channelId,a+$),$+=this.recordWriter.writeMessageIndex(N);this.chunkIndices&&this.chunkIndices.push({messageStartTime:f.messageStartTime,messageEndTime:f.messageEndTime,chunkStartOffset:b,chunkLength:p,messageIndexOffsets:T,messageIndexLength:$,compression:f.compression,compressedSize:BigInt(f.records.byteLength),uncompressedSize:f.uncompressedSize}),this.chunkBuilder.reset(),this.dataSectionCrc=crc32Update(this.dataSectionCrc,this.recordWriter.buffer),await this.writable.write(this.recordWriter.buffer),this.recordWriter.reset()}}function v(e){return e.byteLength>=MCAP_MAGIC.length&&MCAP_MAGIC.every((t,s)=>t===e.getUint8(s))}},15356:(se,q,Q)=>{"use strict";Q.d(q,{XU:()=>K.XU,cZ:()=>O.c});var K=Q(53037),k=Q(41e3),z=Q(56052),S=Q(94328),O=Q(91245)},98357:(se,q,Q)=>{"use strict";Q.d(q,{rB:()=>k,_b:()=>C,V_:()=>l,iA:()=>g});var K=Q(15356),k;(function(v){v[v.None=0]="None",v[v.UType=1]="UType",v[v.Bool=2]="Bool",v[v.Byte=3]="Byte",v[v.UByte=4]="UByte",v[v.Short=5]="Short",v[v.UShort=6]="UShort",v[v.Int=7]="Int",v[v.UInt=8]="UInt",v[v.Long=9]="Long",v[v.ULong=10]="ULong",v[v.Float=11]="Float",v[v.Double=12]="Double",v[v.String=13]="String",v[v.Vector=14]="Vector",v[v.Obj=15]="Obj",v[v.Union=16]="Union",v[v.Array=17]="Array",v[v.MaxBaseType=18]="MaxBaseType"})(k||(k={}));var z;(function(v){v.AdvancedArrayFeatures="1",v.AdvancedUnionFeatures="2",v.OptionalScalars="4",v.DefaultVectorsAndStrings="8"})(z||(z={}));class S{bb=null;bb_pos=0;__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsType(e,t){return(t||new S).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsType(e,t){return e.setPosition(e.position()+K.XU),(t||new S).__init(e.readInt32(e.position())+e.position(),e)}baseType(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readInt8(this.bb_pos+e):k.None}mutate_base_type(e){const t=this.bb.__offset(this.bb_pos,4);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,e),!0)}element(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt8(this.bb_pos+e):k.None}mutate_element(e){const t=this.bb.__offset(this.bb_pos,6);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,e),!0)}index(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readInt32(this.bb_pos+e):-1}mutate_index(e){const t=this.bb.__offset(this.bb_pos,8);return t===0?!1:(this.bb.writeInt32(this.bb_pos+t,e),!0)}fixedLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint16(this.bb_pos+e):0}mutate_fixed_length(e){const t=this.bb.__offset(this.bb_pos,10);return t===0?!1:(this.bb.writeUint16(this.bb_pos+t,e),!0)}baseSize(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readUint32(this.bb_pos+e):4}mutate_base_size(e){const t=this.bb.__offset(this.bb_pos,12);return t===0?!1:(this.bb.writeUint32(this.bb_pos+t,e),!0)}elementSize(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint32(this.bb_pos+e):0}mutate_element_size(e){const t=this.bb.__offset(this.bb_pos,14);return t===0?!1:(this.bb.writeUint32(this.bb_pos+t,e),!0)}static getFullyQualifiedName(){return"reflection.Type"}static startType(e){e.startObject(6)}static addBaseType(e,t){e.addFieldInt8(0,t,k.None)}static addElement(e,t){e.addFieldInt8(1,t,k.None)}static addIndex(e,t){e.addFieldInt32(2,t,-1)}static addFixedLength(e,t){e.addFieldInt16(3,t,0)}static addBaseSize(e,t){e.addFieldInt32(4,t,4)}static addElementSize(e,t){e.addFieldInt32(5,t,0)}static endType(e){return e.endObject()}static createType(e,t,s,n,o,i,f){return S.startType(e),S.addBaseType(e,t),S.addElement(e,s),S.addIndex(e,n),S.addFixedLength(e,o),S.addBaseSize(e,i),S.addElementSize(e,f),S.endType(e)}unpack(){return new O(this.baseType(),this.element(),this.index(),this.fixedLength(),this.baseSize(),this.elementSize())}unpackTo(e){e.baseType=this.baseType(),e.element=this.element(),e.index=this.index(),e.fixedLength=this.fixedLength(),e.baseSize=this.baseSize(),e.elementSize=this.elementSize()}}class O{baseType;element;index;fixedLength;baseSize;elementSize;constructor(e=k.None,t=k.None,s=-1,n=0,o=4,i=0){this.baseType=e,this.element=t,this.index=s,this.fixedLength=n,this.baseSize=o,this.elementSize=i}pack(e){return S.createType(e,this.baseType,this.element,this.index,this.fixedLength,this.baseSize,this.elementSize)}}class F{bb=null;bb_pos=0;__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsKeyValue(e,t){return(t||new F).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsKeyValue(e,t){return e.setPosition(e.position()+K.XU),(t||new F).__init(e.readInt32(e.position())+e.position(),e)}key(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}value(e){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__string(this.bb_pos+t,e):null}static getFullyQualifiedName(){return"reflection.KeyValue"}static startKeyValue(e){e.startObject(2)}static addKey(e,t){e.addFieldOffset(0,t,0)}static addValue(e,t){e.addFieldOffset(1,t,0)}static endKeyValue(e){const t=e.endObject();return e.requiredField(t,4),t}static createKeyValue(e,t,s){return F.startKeyValue(e),F.addKey(e,t),F.addValue(e,s),F.endKeyValue(e)}unpack(){return new V(this.key(),this.value())}unpackTo(e){e.key=this.key(),e.value=this.value()}}class V{key;value;constructor(e=null,t=null){this.key=e,this.value=t}pack(e){const t=this.key!==null?e.createString(this.key):0,s=this.value!==null?e.createString(this.value):0;return F.createKeyValue(e,t,s)}}class D{bb=null;bb_pos=0;__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsEnumVal(e,t){return(t||new D).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsEnumVal(e,t){return e.setPosition(e.position()+K.XU),(t||new D).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}value(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}mutate_value(e){const t=this.bb.__offset(this.bb_pos,6);return t===0?!1:(this.bb.writeInt64(this.bb_pos+t,e),!0)}unionType(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new S).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}documentation(e,t){const s=this.bb.__offset(this.bb_pos,12);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+e*4,t):null}documentationLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static getFullyQualifiedName(){return"reflection.EnumVal"}static startEnumVal(e){e.startObject(5)}static addName(e,t){e.addFieldOffset(0,t,0)}static addValue(e,t){e.addFieldInt64(1,t,BigInt("0"))}static addUnionType(e,t){e.addFieldOffset(3,t,0)}static addDocumentation(e,t){e.addFieldOffset(4,t,0)}static createDocumentationVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startDocumentationVector(e,t){e.startVector(4,t,4)}static endEnumVal(e){const t=e.endObject();return e.requiredField(t,4),t}unpack(){return new y(this.name(),this.value(),this.unionType()!==null?this.unionType().unpack():null,this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()))}unpackTo(e){e.name=this.name(),e.value=this.value(),e.unionType=this.unionType()!==null?this.unionType().unpack():null,e.documentation=this.bb.createScalarList(this.documentation.bind(this),this.documentationLength())}}class y{name;value;unionType;documentation;constructor(e=null,t=BigInt("0"),s=null,n=[]){this.name=e,this.value=t,this.unionType=s,this.documentation=n}pack(e){const t=this.name!==null?e.createString(this.name):0,s=this.unionType!==null?this.unionType.pack(e):0,n=D.createDocumentationVector(e,e.createObjectOffsetList(this.documentation));return D.startEnumVal(e),D.addName(e,t),D.addValue(e,this.value),D.addUnionType(e,s),D.addDocumentation(e,n),D.endEnumVal(e)}}class d{bb=null;bb_pos=0;__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsEnum(e,t){return(t||new d).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsEnum(e,t){return e.setPosition(e.position()+K.XU),(t||new d).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}values(e,t){const s=this.bb.__offset(this.bb_pos,6);return s?(t||new D).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}valuesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}isUnion(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}mutate_is_union(e){const t=this.bb.__offset(this.bb_pos,8);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,+e),!0)}underlyingType(e){const t=this.bb.__offset(this.bb_pos,10);return t?(e||new S).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}attributes(e,t){const s=this.bb.__offset(this.bb_pos,12);return s?(t||new F).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}attributesLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}documentation(e,t){const s=this.bb.__offset(this.bb_pos,14);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+e*4,t):null}documentationLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}declarationFile(e){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__string(this.bb_pos+t,e):null}static getFullyQualifiedName(){return"reflection.Enum"}static startEnum(e){e.startObject(7)}static addName(e,t){e.addFieldOffset(0,t,0)}static addValues(e,t){e.addFieldOffset(1,t,0)}static createValuesVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startValuesVector(e,t){e.startVector(4,t,4)}static addIsUnion(e,t){e.addFieldInt8(2,+t,0)}static addUnderlyingType(e,t){e.addFieldOffset(3,t,0)}static addAttributes(e,t){e.addFieldOffset(4,t,0)}static createAttributesVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startAttributesVector(e,t){e.startVector(4,t,4)}static addDocumentation(e,t){e.addFieldOffset(5,t,0)}static createDocumentationVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startDocumentationVector(e,t){e.startVector(4,t,4)}static addDeclarationFile(e,t){e.addFieldOffset(6,t,0)}static endEnum(e){const t=e.endObject();return e.requiredField(t,4),e.requiredField(t,6),e.requiredField(t,10),t}unpack(){return new x(this.name(),this.bb.createObjList(this.values.bind(this),this.valuesLength()),this.isUnion(),this.underlyingType()!==null?this.underlyingType().unpack():null,this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()),this.declarationFile())}unpackTo(e){e.name=this.name(),e.values=this.bb.createObjList(this.values.bind(this),this.valuesLength()),e.isUnion=this.isUnion(),e.underlyingType=this.underlyingType()!==null?this.underlyingType().unpack():null,e.attributes=this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),e.documentation=this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()),e.declarationFile=this.declarationFile()}}class x{name;values;isUnion;underlyingType;attributes;documentation;declarationFile;constructor(e=null,t=[],s=!1,n=null,o=[],i=[],f=null){this.name=e,this.values=t,this.isUnion=s,this.underlyingType=n,this.attributes=o,this.documentation=i,this.declarationFile=f}pack(e){const t=this.name!==null?e.createString(this.name):0,s=d.createValuesVector(e,e.createObjectOffsetList(this.values)),n=this.underlyingType!==null?this.underlyingType.pack(e):0,o=d.createAttributesVector(e,e.createObjectOffsetList(this.attributes)),i=d.createDocumentationVector(e,e.createObjectOffsetList(this.documentation)),f=this.declarationFile!==null?e.createString(this.declarationFile):0;return d.startEnum(e),d.addName(e,t),d.addValues(e,s),d.addIsUnion(e,this.isUnion),d.addUnderlyingType(e,n),d.addAttributes(e,o),d.addDocumentation(e,i),d.addDeclarationFile(e,f),d.endEnum(e)}}class c{bb=null;bb_pos=0;__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsField(e,t){return(t||new c).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsField(e,t){return e.setPosition(e.position()+K.XU),(t||new c).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}type(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new S).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}id(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readUint16(this.bb_pos+e):0}mutate_id(e){const t=this.bb.__offset(this.bb_pos,8);return t===0?!1:(this.bb.writeUint16(this.bb_pos+t,e),!0)}offset(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readUint16(this.bb_pos+e):0}mutate_offset(e){const t=this.bb.__offset(this.bb_pos,10);return t===0?!1:(this.bb.writeUint16(this.bb_pos+t,e),!0)}defaultInteger(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt64(this.bb_pos+e):BigInt("0")}mutate_default_integer(e){const t=this.bb.__offset(this.bb_pos,12);return t===0?!1:(this.bb.writeInt64(this.bb_pos+t,e),!0)}defaultReal(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readFloat64(this.bb_pos+e):0}mutate_default_real(e){const t=this.bb.__offset(this.bb_pos,14);return t===0?!1:(this.bb.writeFloat64(this.bb_pos+t,e),!0)}deprecated(){const e=this.bb.__offset(this.bb_pos,16);return e?!!this.bb.readInt8(this.bb_pos+e):!1}mutate_deprecated(e){const t=this.bb.__offset(this.bb_pos,16);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,+e),!0)}required(){const e=this.bb.__offset(this.bb_pos,18);return e?!!this.bb.readInt8(this.bb_pos+e):!1}mutate_required(e){const t=this.bb.__offset(this.bb_pos,18);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,+e),!0)}key(){const e=this.bb.__offset(this.bb_pos,20);return e?!!this.bb.readInt8(this.bb_pos+e):!1}mutate_key(e){const t=this.bb.__offset(this.bb_pos,20);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,+e),!0)}attributes(e,t){const s=this.bb.__offset(this.bb_pos,22);return s?(t||new F).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}attributesLength(){const e=this.bb.__offset(this.bb_pos,22);return e?this.bb.__vector_len(this.bb_pos+e):0}documentation(e,t){const s=this.bb.__offset(this.bb_pos,24);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+e*4,t):null}documentationLength(){const e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__vector_len(this.bb_pos+e):0}optional(){const e=this.bb.__offset(this.bb_pos,26);return e?!!this.bb.readInt8(this.bb_pos+e):!1}mutate_optional(e){const t=this.bb.__offset(this.bb_pos,26);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,+e),!0)}padding(){const e=this.bb.__offset(this.bb_pos,28);return e?this.bb.readUint16(this.bb_pos+e):0}mutate_padding(e){const t=this.bb.__offset(this.bb_pos,28);return t===0?!1:(this.bb.writeUint16(this.bb_pos+t,e),!0)}static getFullyQualifiedName(){return"reflection.Field"}static startField(e){e.startObject(13)}static addName(e,t){e.addFieldOffset(0,t,0)}static addType(e,t){e.addFieldOffset(1,t,0)}static addId(e,t){e.addFieldInt16(2,t,0)}static addOffset(e,t){e.addFieldInt16(3,t,0)}static addDefaultInteger(e,t){e.addFieldInt64(4,t,BigInt("0"))}static addDefaultReal(e,t){e.addFieldFloat64(5,t,0)}static addDeprecated(e,t){e.addFieldInt8(6,+t,0)}static addRequired(e,t){e.addFieldInt8(7,+t,0)}static addKey(e,t){e.addFieldInt8(8,+t,0)}static addAttributes(e,t){e.addFieldOffset(9,t,0)}static createAttributesVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startAttributesVector(e,t){e.startVector(4,t,4)}static addDocumentation(e,t){e.addFieldOffset(10,t,0)}static createDocumentationVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startDocumentationVector(e,t){e.startVector(4,t,4)}static addOptional(e,t){e.addFieldInt8(11,+t,0)}static addPadding(e,t){e.addFieldInt16(12,t,0)}static endField(e){const t=e.endObject();return e.requiredField(t,4),e.requiredField(t,6),t}unpack(){return new _(this.name(),this.type()!==null?this.type().unpack():null,this.id(),this.offset(),this.defaultInteger(),this.defaultReal(),this.deprecated(),this.required(),this.key(),this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()),this.optional(),this.padding())}unpackTo(e){e.name=this.name(),e.type=this.type()!==null?this.type().unpack():null,e.id=this.id(),e.offset=this.offset(),e.defaultInteger=this.defaultInteger(),e.defaultReal=this.defaultReal(),e.deprecated=this.deprecated(),e.required=this.required(),e.key=this.key(),e.attributes=this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),e.documentation=this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()),e.optional=this.optional(),e.padding=this.padding()}}class _{name;type;id;offset;defaultInteger;defaultReal;deprecated;required;key;attributes;documentation;optional;padding;constructor(e=null,t=null,s=0,n=0,o=BigInt("0"),i=0,f=!1,b=!1,p=!1,T=[],a=[],$=!1,N=0){this.name=e,this.type=t,this.id=s,this.offset=n,this.defaultInteger=o,this.defaultReal=i,this.deprecated=f,this.required=b,this.key=p,this.attributes=T,this.documentation=a,this.optional=$,this.padding=N}pack(e){const t=this.name!==null?e.createString(this.name):0,s=this.type!==null?this.type.pack(e):0,n=c.createAttributesVector(e,e.createObjectOffsetList(this.attributes)),o=c.createDocumentationVector(e,e.createObjectOffsetList(this.documentation));return c.startField(e),c.addName(e,t),c.addType(e,s),c.addId(e,this.id),c.addOffset(e,this.offset),c.addDefaultInteger(e,this.defaultInteger),c.addDefaultReal(e,this.defaultReal),c.addDeprecated(e,this.deprecated),c.addRequired(e,this.required),c.addKey(e,this.key),c.addAttributes(e,n),c.addDocumentation(e,o),c.addOptional(e,this.optional),c.addPadding(e,this.padding),c.endField(e)}}class m{bb=null;bb_pos=0;__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsObject(e,t){return(t||new m).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsObject(e,t){return e.setPosition(e.position()+K.XU),(t||new m).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}fields(e,t){const s=this.bb.__offset(this.bb_pos,6);return s?(t||new c).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}fieldsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}isStruct(){const e=this.bb.__offset(this.bb_pos,8);return e?!!this.bb.readInt8(this.bb_pos+e):!1}mutate_is_struct(e){const t=this.bb.__offset(this.bb_pos,8);return t===0?!1:(this.bb.writeInt8(this.bb_pos+t,+e),!0)}minalign(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt32(this.bb_pos+e):0}mutate_minalign(e){const t=this.bb.__offset(this.bb_pos,10);return t===0?!1:(this.bb.writeInt32(this.bb_pos+t,e),!0)}bytesize(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readInt32(this.bb_pos+e):0}mutate_bytesize(e){const t=this.bb.__offset(this.bb_pos,12);return t===0?!1:(this.bb.writeInt32(this.bb_pos+t,e),!0)}attributes(e,t){const s=this.bb.__offset(this.bb_pos,14);return s?(t||new F).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}attributesLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}documentation(e,t){const s=this.bb.__offset(this.bb_pos,16);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+e*4,t):null}documentationLength(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.__vector_len(this.bb_pos+e):0}declarationFile(e){const t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__string(this.bb_pos+t,e):null}static getFullyQualifiedName(){return"reflection.Object"}static startObject(e){e.startObject(8)}static addName(e,t){e.addFieldOffset(0,t,0)}static addFields(e,t){e.addFieldOffset(1,t,0)}static createFieldsVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startFieldsVector(e,t){e.startVector(4,t,4)}static addIsStruct(e,t){e.addFieldInt8(2,+t,0)}static addMinalign(e,t){e.addFieldInt32(3,t,0)}static addBytesize(e,t){e.addFieldInt32(4,t,0)}static addAttributes(e,t){e.addFieldOffset(5,t,0)}static createAttributesVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startAttributesVector(e,t){e.startVector(4,t,4)}static addDocumentation(e,t){e.addFieldOffset(6,t,0)}static createDocumentationVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startDocumentationVector(e,t){e.startVector(4,t,4)}static addDeclarationFile(e,t){e.addFieldOffset(7,t,0)}static endObject(e){const t=e.endObject();return e.requiredField(t,4),e.requiredField(t,6),t}static createObject(e,t,s,n,o,i,f,b,p){return m.startObject(e),m.addName(e,t),m.addFields(e,s),m.addIsStruct(e,n),m.addMinalign(e,o),m.addBytesize(e,i),m.addAttributes(e,f),m.addDocumentation(e,b),m.addDeclarationFile(e,p),m.endObject(e)}unpack(){return new h(this.name(),this.bb.createObjList(this.fields.bind(this),this.fieldsLength()),this.isStruct(),this.minalign(),this.bytesize(),this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()),this.declarationFile())}unpackTo(e){e.name=this.name(),e.fields=this.bb.createObjList(this.fields.bind(this),this.fieldsLength()),e.isStruct=this.isStruct(),e.minalign=this.minalign(),e.bytesize=this.bytesize(),e.attributes=this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),e.documentation=this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()),e.declarationFile=this.declarationFile()}}class h{name;fields;isStruct;minalign;bytesize;attributes;documentation;declarationFile;constructor(e=null,t=[],s=!1,n=0,o=0,i=[],f=[],b=null){this.name=e,this.fields=t,this.isStruct=s,this.minalign=n,this.bytesize=o,this.attributes=i,this.documentation=f,this.declarationFile=b}pack(e){const t=this.name!==null?e.createString(this.name):0,s=m.createFieldsVector(e,e.createObjectOffsetList(this.fields)),n=m.createAttributesVector(e,e.createObjectOffsetList(this.attributes)),o=m.createDocumentationVector(e,e.createObjectOffsetList(this.documentation)),i=this.declarationFile!==null?e.createString(this.declarationFile):0;return m.createObject(e,t,s,this.isStruct,this.minalign,this.bytesize,n,o,i)}}class w{bb=null;bb_pos=0;__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsRPCCall(e,t){return(t||new w).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsRPCCall(e,t){return e.setPosition(e.position()+K.XU),(t||new w).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}request(e){const t=this.bb.__offset(this.bb_pos,6);return t?(e||new m).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}response(e){const t=this.bb.__offset(this.bb_pos,8);return t?(e||new m).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}attributes(e,t){const s=this.bb.__offset(this.bb_pos,10);return s?(t||new F).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}attributesLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}documentation(e,t){const s=this.bb.__offset(this.bb_pos,12);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+e*4,t):null}documentationLength(){const e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__vector_len(this.bb_pos+e):0}static getFullyQualifiedName(){return"reflection.RPCCall"}static startRPCCall(e){e.startObject(5)}static addName(e,t){e.addFieldOffset(0,t,0)}static addRequest(e,t){e.addFieldOffset(1,t,0)}static addResponse(e,t){e.addFieldOffset(2,t,0)}static addAttributes(e,t){e.addFieldOffset(3,t,0)}static createAttributesVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startAttributesVector(e,t){e.startVector(4,t,4)}static addDocumentation(e,t){e.addFieldOffset(4,t,0)}static createDocumentationVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startDocumentationVector(e,t){e.startVector(4,t,4)}static endRPCCall(e){const t=e.endObject();return e.requiredField(t,4),e.requiredField(t,6),e.requiredField(t,8),t}unpack(){return new r(this.name(),this.request()!==null?this.request().unpack():null,this.response()!==null?this.response().unpack():null,this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()))}unpackTo(e){e.name=this.name(),e.request=this.request()!==null?this.request().unpack():null,e.response=this.response()!==null?this.response().unpack():null,e.attributes=this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),e.documentation=this.bb.createScalarList(this.documentation.bind(this),this.documentationLength())}}class r{name;request;response;attributes;documentation;constructor(e=null,t=null,s=null,n=[],o=[]){this.name=e,this.request=t,this.response=s,this.attributes=n,this.documentation=o}pack(e){const t=this.name!==null?e.createString(this.name):0,s=this.request!==null?this.request.pack(e):0,n=this.response!==null?this.response.pack(e):0,o=w.createAttributesVector(e,e.createObjectOffsetList(this.attributes)),i=w.createDocumentationVector(e,e.createObjectOffsetList(this.documentation));return w.startRPCCall(e),w.addName(e,t),w.addRequest(e,s),w.addResponse(e,n),w.addAttributes(e,o),w.addDocumentation(e,i),w.endRPCCall(e)}}class u{bb=null;bb_pos=0;__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsService(e,t){return(t||new u).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsService(e,t){return e.setPosition(e.position()+K.XU),(t||new u).__init(e.readInt32(e.position())+e.position(),e)}name(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}calls(e,t){const s=this.bb.__offset(this.bb_pos,6);return s?(t||new w).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}callsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}attributes(e,t){const s=this.bb.__offset(this.bb_pos,8);return s?(t||new F).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}attributesLength(){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__vector_len(this.bb_pos+e):0}documentation(e,t){const s=this.bb.__offset(this.bb_pos,10);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+e*4,t):null}documentationLength(){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__vector_len(this.bb_pos+e):0}declarationFile(e){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__string(this.bb_pos+t,e):null}static getFullyQualifiedName(){return"reflection.Service"}static startService(e){e.startObject(5)}static addName(e,t){e.addFieldOffset(0,t,0)}static addCalls(e,t){e.addFieldOffset(1,t,0)}static createCallsVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startCallsVector(e,t){e.startVector(4,t,4)}static addAttributes(e,t){e.addFieldOffset(2,t,0)}static createAttributesVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startAttributesVector(e,t){e.startVector(4,t,4)}static addDocumentation(e,t){e.addFieldOffset(3,t,0)}static createDocumentationVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startDocumentationVector(e,t){e.startVector(4,t,4)}static addDeclarationFile(e,t){e.addFieldOffset(4,t,0)}static endService(e){const t=e.endObject();return e.requiredField(t,4),t}static createService(e,t,s,n,o,i){return u.startService(e),u.addName(e,t),u.addCalls(e,s),u.addAttributes(e,n),u.addDocumentation(e,o),u.addDeclarationFile(e,i),u.endService(e)}unpack(){return new I(this.name(),this.bb.createObjList(this.calls.bind(this),this.callsLength()),this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()),this.declarationFile())}unpackTo(e){e.name=this.name(),e.calls=this.bb.createObjList(this.calls.bind(this),this.callsLength()),e.attributes=this.bb.createObjList(this.attributes.bind(this),this.attributesLength()),e.documentation=this.bb.createScalarList(this.documentation.bind(this),this.documentationLength()),e.declarationFile=this.declarationFile()}}class I{name;calls;attributes;documentation;declarationFile;constructor(e=null,t=[],s=[],n=[],o=null){this.name=e,this.calls=t,this.attributes=s,this.documentation=n,this.declarationFile=o}pack(e){const t=this.name!==null?e.createString(this.name):0,s=u.createCallsVector(e,e.createObjectOffsetList(this.calls)),n=u.createAttributesVector(e,e.createObjectOffsetList(this.attributes)),o=u.createDocumentationVector(e,e.createObjectOffsetList(this.documentation)),i=this.declarationFile!==null?e.createString(this.declarationFile):0;return u.createService(e,t,s,n,o,i)}}class L{bb=null;bb_pos=0;__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSchemaFile(e,t){return(t||new L).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchemaFile(e,t){return e.setPosition(e.position()+K.XU),(t||new L).__init(e.readInt32(e.position())+e.position(),e)}filename(e){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__string(this.bb_pos+t,e):null}includedFilenames(e,t){const s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__string(this.bb.__vector(this.bb_pos+s)+e*4,t):null}includedFilenamesLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}static getFullyQualifiedName(){return"reflection.SchemaFile"}static startSchemaFile(e){e.startObject(2)}static addFilename(e,t){e.addFieldOffset(0,t,0)}static addIncludedFilenames(e,t){e.addFieldOffset(1,t,0)}static createIncludedFilenamesVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startIncludedFilenamesVector(e,t){e.startVector(4,t,4)}static endSchemaFile(e){const t=e.endObject();return e.requiredField(t,4),t}static createSchemaFile(e,t,s){return L.startSchemaFile(e),L.addFilename(e,t),L.addIncludedFilenames(e,s),L.endSchemaFile(e)}unpack(){return new B(this.filename(),this.bb.createScalarList(this.includedFilenames.bind(this),this.includedFilenamesLength()))}unpackTo(e){e.filename=this.filename(),e.includedFilenames=this.bb.createScalarList(this.includedFilenames.bind(this),this.includedFilenamesLength())}}class B{filename;includedFilenames;constructor(e=null,t=[]){this.filename=e,this.includedFilenames=t}pack(e){const t=this.filename!==null?e.createString(this.filename):0,s=L.createIncludedFilenamesVector(e,e.createObjectOffsetList(this.includedFilenames));return L.createSchemaFile(e,t,s)}}class l{bb=null;bb_pos=0;__init(e,t){return this.bb_pos=e,this.bb=t,this}static getRootAsSchema(e,t){return(t||new l).__init(e.readInt32(e.position())+e.position(),e)}static getSizePrefixedRootAsSchema(e,t){return e.setPosition(e.position()+K.XU),(t||new l).__init(e.readInt32(e.position())+e.position(),e)}static bufferHasIdentifier(e){return e.__has_identifier("BFBS")}objects(e,t){const s=this.bb.__offset(this.bb_pos,4);return s?(t||new m).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}objectsLength(){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__vector_len(this.bb_pos+e):0}enums(e,t){const s=this.bb.__offset(this.bb_pos,6);return s?(t||new d).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}enumsLength(){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__vector_len(this.bb_pos+e):0}fileIdent(e){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__string(this.bb_pos+t,e):null}fileExt(e){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__string(this.bb_pos+t,e):null}rootTable(e){const t=this.bb.__offset(this.bb_pos,12);return t?(e||new m).__init(this.bb.__indirect(this.bb_pos+t),this.bb):null}services(e,t){const s=this.bb.__offset(this.bb_pos,14);return s?(t||new u).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}servicesLength(){const e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__vector_len(this.bb_pos+e):0}advancedFeatures(){const e=this.bb.__offset(this.bb_pos,16);return e?this.bb.readUint64(this.bb_pos+e):BigInt("0")}mutate_advanced_features(e){const t=this.bb.__offset(this.bb_pos,16);return t===0?!1:(this.bb.writeUint64(this.bb_pos+t,e),!0)}fbsFiles(e,t){const s=this.bb.__offset(this.bb_pos,18);return s?(t||new L).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+s)+e*4),this.bb):null}fbsFilesLength(){const e=this.bb.__offset(this.bb_pos,18);return e?this.bb.__vector_len(this.bb_pos+e):0}static getFullyQualifiedName(){return"reflection.Schema"}static startSchema(e){e.startObject(8)}static addObjects(e,t){e.addFieldOffset(0,t,0)}static createObjectsVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startObjectsVector(e,t){e.startVector(4,t,4)}static addEnums(e,t){e.addFieldOffset(1,t,0)}static createEnumsVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startEnumsVector(e,t){e.startVector(4,t,4)}static addFileIdent(e,t){e.addFieldOffset(2,t,0)}static addFileExt(e,t){e.addFieldOffset(3,t,0)}static addRootTable(e,t){e.addFieldOffset(4,t,0)}static addServices(e,t){e.addFieldOffset(5,t,0)}static createServicesVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startServicesVector(e,t){e.startVector(4,t,4)}static addAdvancedFeatures(e,t){e.addFieldInt64(6,t,BigInt("0"))}static addFbsFiles(e,t){e.addFieldOffset(7,t,0)}static createFbsFilesVector(e,t){e.startVector(4,t.length,4);for(let s=t.length-1;s>=0;s--)e.addOffset(t[s]);return e.endVector()}static startFbsFilesVector(e,t){e.startVector(4,t,4)}static endSchema(e){const t=e.endObject();return e.requiredField(t,4),e.requiredField(t,6),t}static finishSchemaBuffer(e,t){e.finish(t,"BFBS")}static finishSizePrefixedSchemaBuffer(e,t){e.finish(t,"BFBS",!0)}unpack(){return new E(this.bb.createObjList(this.objects.bind(this),this.objectsLength()),this.bb.createObjList(this.enums.bind(this),this.enumsLength()),this.fileIdent(),this.fileExt(),this.rootTable()!==null?this.rootTable().unpack():null,this.bb.createObjList(this.services.bind(this),this.servicesLength()),this.advancedFeatures(),this.bb.createObjList(this.fbsFiles.bind(this),this.fbsFilesLength()))}unpackTo(e){e.objects=this.bb.createObjList(this.objects.bind(this),this.objectsLength()),e.enums=this.bb.createObjList(this.enums.bind(this),this.enumsLength()),e.fileIdent=this.fileIdent(),e.fileExt=this.fileExt(),e.rootTable=this.rootTable()!==null?this.rootTable().unpack():null,e.services=this.bb.createObjList(this.services.bind(this),this.servicesLength()),e.advancedFeatures=this.advancedFeatures(),e.fbsFiles=this.bb.createObjList(this.fbsFiles.bind(this),this.fbsFilesLength())}}class E{objects;enums;fileIdent;fileExt;rootTable;services;advancedFeatures;fbsFiles;constructor(e=[],t=[],s=null,n=null,o=null,i=[],f=BigInt("0"),b=[]){this.objects=e,this.enums=t,this.fileIdent=s,this.fileExt=n,this.rootTable=o,this.services=i,this.advancedFeatures=f,this.fbsFiles=b}pack(e){const t=l.createObjectsVector(e,e.createObjectOffsetList(this.objects)),s=l.createEnumsVector(e,e.createObjectOffsetList(this.enums)),n=this.fileIdent!==null?e.createString(this.fileIdent):0,o=this.fileExt!==null?e.createString(this.fileExt):0,i=this.rootTable!==null?this.rootTable.pack(e):0,f=l.createServicesVector(e,e.createObjectOffsetList(this.services)),b=l.createFbsFilesVector(e,e.createObjectOffsetList(this.fbsFiles));return l.startSchema(e),l.addObjects(e,t),l.addEnums(e,s),l.addFileIdent(e,n),l.addFileExt(e,o),l.addRootTable(e,i),l.addServices(e,f),l.addAdvancedFeatures(e,this.advancedFeatures),l.addFbsFiles(e,b),l.endSchema(e)}}function P(v){switch(v){case k.None:case k.UType:case k.Bool:case k.Byte:case k.UByte:return 1;case k.Short:case k.UShort:return 2;case k.Int:case k.UInt:return 4;case k.Long:case k.ULong:return 8;case k.Float:return 4;case k.Double:return 8;case k.String:case k.Vector:case k.Obj:case k.Union:case k.Array:return 4}return NaN}function R(v){switch(v){case k.UType:case k.Bool:case k.Byte:case k.UByte:case k.Short:case k.UShort:case k.Int:case k.UInt:case k.Long:case k.ULong:case k.Float:case k.Double:return!0;case k.None:case k.String:case k.Vector:case k.Obj:case k.Union:case k.Array:return!1}return!1}class g{bb;typeIndex;offset;isStruct;constructor(e,t,s,n){if(this.bb=e,this.typeIndex=t,this.offset=s,this.isStruct=n,s<0||s+4>e.capacity())throw new Error(`Attempt to construct Table with offset ${s}, which would extend beyond ByteBuffer (capacity ${e.capacity()})`);if(n)return;const o=e.readInt32(s),i=s-o,f=2*2;if(i<0||i+f>e.capacity())throw new Error(`Table at offset ${s} points to vtable at ${i} (${s} - ${o}), which would extend beyond the ByteBuffer (capacity ${e.capacity()})`);const b=e.readUint16(i);if(b<4)throw new Error(`Table at offset ${s} points to vtable at ${i} (${s} - ${o}), which specifies vtable size ${b}, which should be at least 4 (vtable size + object size)`);if(i+b>e.capacity())throw new Error(`Table at offset ${s} points to vtable at ${i} (${s} - ${o}), which specifies vtable size ${b}, which would extend beyond the ByteBuffer (capacity ${e.capacity()})`);const p=e.readUint16(i+2);if(p<4)throw new Error(`Table at offset ${s} points to vtable at ${i} (${s} - ${o}), which specifies inline object size ${p}, which should be at least 4 (vtable offset)`);if(s+p>e.capacity())throw new Error(`Table at offset ${s} points to vtable at ${i} (${s} - ${o}), which specifies inline object size ${p}, which would extend beyond the ByteBuffer (capacity ${e.capacity()})`)}static getRootTable(e){if(e.position()+4>e.capacity())throw new Error(`Attempt to parse root table offset from ${e.position()}, which would extend beyond ByteBuffer (capacity ${e.capacity()})`);return new g(e,-1,e.readUint32(e.position())+e.position(),!1)}static getNamedTable(e,t,s,n){for(let o=0;o<t.objectsLength();++o){const i=t.objects(o);if(i!==null&&i.name()===s)return new g(e,o,n===void 0?e.readUint32(e.position())+e.position():n,i.isStruct())}throw new Error("Unable to find type "+s+" in schema.")}readScalar(e,t){const s=P(e);if(t<0||t+s>this.bb.capacity())throw new Error(`Attempt to read scalar type ${e} (size ${s}) at offset ${t}, which would extend beyond ByteBuffer (capacity ${this.bb.capacity()})`);switch(e){case k.Bool:return this.bb.readUint8(t)!==0;case k.Byte:return this.bb.readInt8(t);case k.UType:case k.UByte:return this.bb.readUint8(t);case k.Short:return this.bb.readInt16(t);case k.UShort:return this.bb.readUint16(t);case k.Int:return this.bb.readInt32(t);case k.UInt:return this.bb.readUint32(t);case k.Long:return this.bb.readInt64(t);case k.ULong:return this.bb.readUint64(t);case k.Float:return this.bb.readFloat32(t);case k.Double:return this.bb.readFloat64(t)}throw new Error(`Unsupported message type ${e}`)}}class C{schema;constructor(e){this.schema=e}toObjectLambda(e,t=!1){const s={},n=this.getType(e),o=n.fieldsLength();for(let i=0;i<o;++i){const f=n.fields(i);if(f===null)throw new Error("Malformed schema: field at index "+i+" not populated.");const b=f.type();if(b===null)throw new Error('Malformed schema: "type" field of Field not populated.');const p=f.name();if(p===null)throw new Error('Malformed schema: "name" field of Field not populated.');const T=b.baseType();if(R(T))s[p]=this.readScalarLambda(e,p,t);else if(T===k.String)s[p]=this.readStringLambda(e,p);else if(T===k.Obj){const a=this.readTableLambda(e,p),$=this.toObjectLambda(b.index(),t);s[p]=N=>{const A=a(N);return A===null?null:$(A)}}else if(T===k.Vector){const a=b.element();if(R(a))s[p]=this.readVectorOfScalarsLambda(e,p);else if(a===k.String)s[p]=this.readVectorOfStringsLambda(e,p);else if(a===k.Obj){const $=this.readVectorOfTablesLambda(e,p),N=this.toObjectLambda(b.index(),t);s[p]=A=>{const M=$(A);if(M===null)return null;const U=[];for(const W of M)U.push(N(W));return U}}else throw new Error("Vectors of Unions and Arrays are not supported.")}else throw new Error("Unions and Arrays are not supported in field "+f.name())}return i=>{const f={};for(const b in s){const p=s[b](i);p!==null&&(f[b]=p)}return f}}toObject(e,t=!1){return this.toObjectLambda(e.typeIndex,t)(e)}getType(e){if(e===-1){const s=this.schema.rootTable();if(s===null)throw new Error("Malformed schema: No root table.");return s}if(e<0||e>this.schema.objectsLength())throw new Error("Type index out-of-range.");const t=this.schema.objects(e);if(t===null)throw new Error("Malformed schema: No object at index "+e+".");return t}getField(e,t){const s=this.getType(t),n=s.fieldsLength();for(let o=0;o<n;++o){const i=s.fields(o);if(i===null)throw new Error("Malformed schema: Missing Field table at index "+o+".");const f=i.name();if(e===f)return i}throw new Error("Couldn't find field "+e+" in object "+s.name()+".")}readScalar(e,t,s=!1){return this.readScalarLambda(e.typeIndex,t,s)(e)}readScalarLambda(e,t,s=!1){const n=this.getField(t,e),o=n.type();if(o===null)throw new Error('Malformed schema: "type" field of Field not populated.');const i=this.getType(e).isStruct();if(!R(o.baseType()))throw new Error("Field "+t+" is not a scalar type.");if(i){const f=o.baseType();return b=>b.readScalar(f,b.offset+n.offset())}return f=>{const b=f.offset+f.bb.__offset(f.offset,n.offset());if(b===f.offset){if(!s)return null;switch(o.baseType()){case k.Bool:return n.defaultInteger()!==0n;case k.Long:case k.ULong:return n.defaultInteger();case k.UType:case k.Byte:case k.UByte:case k.Short:case k.UShort:case k.Int:case k.UInt:return Number(n.defaultInteger());case k.Float:case k.Double:return n.defaultReal();default:throw new Error(`Expected scalar type, found ${o.baseType()}`)}}return f.readScalar(o.baseType(),b)}}readString(e,t){return this.readStringLambda(e.typeIndex,t)(e)}readStringLambda(e,t){const s=this.getField(t,e),n=s.type();if(n===null)throw new Error('Malformed schema: "type" field of Field not populated.');if(n.baseType()!==k.String)throw new Error("Field "+t+" is not a string.");return o=>{const i=o.offset+o.bb.__offset(o.offset,s.offset());return i===o.offset?null:o.bb.__string(i)}}readTable(e,t){return this.readTableLambda(e.typeIndex,t)(e)}readTableLambda(e,t){const s=this.getField(t,e),n=s.type();if(n===null)throw new Error('Malformed schema: "type" field of Field not populated.');const o=this.getType(e).isStruct();if(n.baseType()!==k.Obj)throw new Error("Field "+t+" is not an object type.");const i=this.getType(n.index()).isStruct();return o?f=>new g(f.bb,n.index(),f.offset+s.offset(),i):f=>{const b=f.offset+f.bb.__offset(f.offset,s.offset());if(b===f.offset)return null;const p=i?b:f.bb.__indirect(b);return new g(f.bb,n.index(),p,i)}}readVectorOfScalars(e,t){return this.readVectorOfScalarsLambda(e.typeIndex,t)(e)}readVectorOfScalarsLambda(e,t){const s=this.getField(t,e),n=s.type();if(n===null)throw new Error('Malformed schema: "type" field of Field not populated.');if(n.baseType()!==k.Vector)throw new Error("Field "+t+" is not an vector.");const o=n.element();if(!R(o))throw new Error("Field "+t+" is not an vector of scalars.");const i=o===k.UByte;return f=>{const b=f.offset+f.bb.__offset(f.offset,s.offset());if(b===f.offset)return null;const p=f.bb.__vector_len(b),T=f.bb.__vector(b),a=P(n.element());let $;if(i)$=new Uint8Array(f.bb.bytes().buffer,f.bb.bytes().byteOffset+T,p);else{$=[];for(let N=0;N<p;++N)$.push(f.readScalar(n.element(),T+a*N))}return $}}readVectorOfTables(e,t){return this.readVectorOfTablesLambda(e.typeIndex,t)(e)}readVectorOfTablesLambda(e,t){const s=this.getField(t,e),n=s.type();if(n===null)throw new Error('Malformed schema: "type" field of Field not populated.');if(n.baseType()!==k.Vector)throw new Error("Field "+t+" is not an vector.");if(n.element()!==k.Obj)throw new Error("Field "+t+" is not an vector of objects.");const o=this.getType(n.index()),i=o.isStruct(),f=i?o.bytesize():P(n.element());return b=>{const p=b.offset+b.bb.__offset(b.offset,s.offset());if(p===b.offset)return null;const T=b.bb.__vector_len(p),a=[],$=b.bb.__vector(p);for(let N=0;N<T;++N){const A=$+f*N;a.push(new g(b.bb,n.index(),i?A:b.bb.__indirect(A),i))}return a}}readVectorOfStrings(e,t){return this.readVectorOfStringsLambda(e.typeIndex,t)(e)}readVectorOfStringsLambda(e,t){const s=this.getField(t,e),n=s.type();if(n===null)throw new Error('Malformed schema: "type" field of Field not populated.');if(n.baseType()!==k.Vector)throw new Error("Field "+t+" is not an vector.");if(n.element()!==k.String)throw new Error("Field "+t+" is not an vector of strings.");return o=>{const i=o.offset+o.bb.__offset(o.offset,s.offset());if(i===o.offset)return null;const f=o.bb.__vector_len(i),b=[],p=o.bb.__vector(i),T=P(n.element());for(let a=0;a<f;++a)b.push(o.bb.__string(p+T*a));return b}}}},70943:(se,q,Q)=>{"use strict";var K=Q(11168);se.exports=q=K.descriptor=K.Root.fromJSON(Q(63460)).lookup(".google.protobuf");var k=K.Namespace,z=K.Root,S=K.Enum,O=K.Type,F=K.Field,V=K.MapField,D=K.OneOf,y=K.Service,d=K.Method;z.fromDescriptor=function(g){typeof g.length=="number"&&(g=q.FileDescriptorSet.decode(g));var C=new z;if(g.file)for(var v,e,t=0,s;t<g.file.length;++t){if(e=C,(v=g.file[t]).package&&v.package.length&&(e=C.define(v.package)),v.name&&v.name.length&&C.files.push(e.filename=v.name),v.messageType)for(s=0;s<v.messageType.length;++s)e.add(O.fromDescriptor(v.messageType[s],v.syntax));if(v.enumType)for(s=0;s<v.enumType.length;++s)e.add(S.fromDescriptor(v.enumType[s]));if(v.extension)for(s=0;s<v.extension.length;++s)e.add(F.fromDescriptor(v.extension[s]));if(v.service)for(s=0;s<v.service.length;++s)e.add(y.fromDescriptor(v.service[s]));var n=B(v.options,q.FileOptions);if(n){var o=Object.keys(n);for(s=0;s<o.length;++s)e.setOption(o[s],n[o[s]])}}return C},z.prototype.toDescriptor=function(g){var C=q.FileDescriptorSet.create();return x(this,C.file,g),C};function x(R,g,C){var v=q.FileDescriptorProto.create({name:R.filename||(R.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});C&&(v.syntax=C),R instanceof z||(v.package=R.fullName.substring(1));for(var e=0,t;e<R.nestedArray.length;++e)(t=R._nestedArray[e])instanceof O?v.messageType.push(t.toDescriptor(C)):t instanceof S?v.enumType.push(t.toDescriptor()):t instanceof F?v.extension.push(t.toDescriptor(C)):t instanceof y?v.service.push(t.toDescriptor()):t instanceof k&&x(t,g,C);v.options=l(R.options,q.FileOptions),v.messageType.length+v.enumType.length+v.extension.length+v.service.length&&g.push(v)}var c=0;O.fromDescriptor=function(g,C){typeof g.length=="number"&&(g=q.DescriptorProto.decode(g));var v=new O(g.name.length?g.name:"Type"+c++,B(g.options,q.MessageOptions)),e;if(g.oneofDecl)for(e=0;e<g.oneofDecl.length;++e)v.add(D.fromDescriptor(g.oneofDecl[e]));if(g.field)for(e=0;e<g.field.length;++e){var t=F.fromDescriptor(g.field[e],C);v.add(t),g.field[e].hasOwnProperty("oneofIndex")&&v.oneofsArray[g.field[e].oneofIndex].add(t)}if(g.extension)for(e=0;e<g.extension.length;++e)v.add(F.fromDescriptor(g.extension[e],C));if(g.nestedType)for(e=0;e<g.nestedType.length;++e)v.add(O.fromDescriptor(g.nestedType[e],C)),g.nestedType[e].options&&g.nestedType[e].options.mapEntry&&v.setOption("map_entry",!0);if(g.enumType)for(e=0;e<g.enumType.length;++e)v.add(S.fromDescriptor(g.enumType[e]));if(g.extensionRange&&g.extensionRange.length)for(v.extensions=[],e=0;e<g.extensionRange.length;++e)v.extensions.push([g.extensionRange[e].start,g.extensionRange[e].end]);if(g.reservedRange&&g.reservedRange.length||g.reservedName&&g.reservedName.length){if(v.reserved=[],g.reservedRange)for(e=0;e<g.reservedRange.length;++e)v.reserved.push([g.reservedRange[e].start,g.reservedRange[e].end]);if(g.reservedName)for(e=0;e<g.reservedName.length;++e)v.reserved.push(g.reservedName[e])}return v},O.prototype.toDescriptor=function(g){var C=q.DescriptorProto.create({name:this.name}),v;for(v=0;v<this.fieldsArray.length;++v){var e;if(C.field.push(e=this._fieldsArray[v].toDescriptor(g)),this._fieldsArray[v]instanceof V){var t=L(this._fieldsArray[v].keyType,this._fieldsArray[v].resolvedKeyType),s=L(this._fieldsArray[v].type,this._fieldsArray[v].resolvedType),n=s===11||s===14?this._fieldsArray[v].resolvedType&&E(this.parent,this._fieldsArray[v].resolvedType)||this._fieldsArray[v].type:void 0;C.nestedType.push(q.DescriptorProto.create({name:e.typeName,field:[q.FieldDescriptorProto.create({name:"key",number:1,label:1,type:t}),q.FieldDescriptorProto.create({name:"value",number:2,label:1,type:s,typeName:n})],options:q.MessageOptions.create({mapEntry:!0})}))}}for(v=0;v<this.oneofsArray.length;++v)C.oneofDecl.push(this._oneofsArray[v].toDescriptor());for(v=0;v<this.nestedArray.length;++v)this._nestedArray[v]instanceof F?C.field.push(this._nestedArray[v].toDescriptor(g)):this._nestedArray[v]instanceof O?C.nestedType.push(this._nestedArray[v].toDescriptor(g)):this._nestedArray[v]instanceof S&&C.enumType.push(this._nestedArray[v].toDescriptor());if(this.extensions)for(v=0;v<this.extensions.length;++v)C.extensionRange.push(q.DescriptorProto.ExtensionRange.create({start:this.extensions[v][0],end:this.extensions[v][1]}));if(this.reserved)for(v=0;v<this.reserved.length;++v)typeof this.reserved[v]=="string"?C.reservedName.push(this.reserved[v]):C.reservedRange.push(q.DescriptorProto.ReservedRange.create({start:this.reserved[v][0],end:this.reserved[v][1]}));return C.options=l(this.options,q.MessageOptions),C};var _=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;F.fromDescriptor=function(g,C){if(typeof g.length=="number"&&(g=q.DescriptorProto.decode(g)),typeof g.number!="number")throw Error("missing field id");var v;g.typeName&&g.typeName.length?v=g.typeName:v=u(g.type);var e;switch(g.label){case 1:e=void 0;break;case 2:e="required";break;case 3:e="repeated";break;default:throw Error("illegal label: "+g.label)}var t=g.extendee;g.extendee!==void 0&&(t=t.length?t:void 0);var s=new F(g.name.length?g.name:"field"+g.number,g.number,v,e,t);if(s.options=B(g.options,q.FieldOptions),g.defaultValue&&g.defaultValue.length){var n=g.defaultValue;switch(n){case"true":case"TRUE":n=!0;break;case"false":case"FALSE":n=!1;break;default:var o=_.exec(n);o&&(n=parseInt(n));break}s.setOption("default",n)}return I(g.type)&&(C==="proto3"?g.options&&!g.options.packed&&s.setOption("packed",!1):g.options&&g.options.packed||s.setOption("packed",!1)),s},F.prototype.toDescriptor=function(g){var C=q.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)C.type=11,C.typeName=K.util.ucFirst(this.name),C.label=3;else{switch(C.type=L(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:C.typeName=this.resolvedType?E(this.parent,this.resolvedType):this.type;break}switch(this.rule){case"repeated":C.label=3;break;case"required":C.label=2;break;default:C.label=1;break}}if(C.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(C.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(C.options=l(this.options,q.FieldOptions),this.options.default!=null&&(C.defaultValue=String(this.options.default))),g==="proto3"?this.packed||((C.options||(C.options=q.FieldOptions.create())).packed=!1):this.packed&&((C.options||(C.options=q.FieldOptions.create())).packed=!0),C};var m=0;S.fromDescriptor=function(g){typeof g.length=="number"&&(g=q.EnumDescriptorProto.decode(g));var C={};if(g.value)for(var v=0;v<g.value.length;++v){var e=g.value[v].name,t=g.value[v].number||0;C[e&&e.length?e:"NAME"+t]=t}return new S(g.name&&g.name.length?g.name:"Enum"+m++,C,B(g.options,q.EnumOptions))},S.prototype.toDescriptor=function(){for(var g=[],C=0,v=Object.keys(this.values);C<v.length;++C)g.push(q.EnumValueDescriptorProto.create({name:v[C],number:this.values[v[C]]}));return q.EnumDescriptorProto.create({name:this.name,value:g,options:l(this.options,q.EnumOptions)})};var h=0;D.fromDescriptor=function(g){return typeof g.length=="number"&&(g=q.OneofDescriptorProto.decode(g)),new D(g.name&&g.name.length?g.name:"oneof"+h++)},D.prototype.toDescriptor=function(){return q.OneofDescriptorProto.create({name:this.name})};var w=0;y.fromDescriptor=function(g){typeof g.length=="number"&&(g=q.ServiceDescriptorProto.decode(g));var C=new y(g.name&&g.name.length?g.name:"Service"+w++,B(g.options,q.ServiceOptions));if(g.method)for(var v=0;v<g.method.length;++v)C.add(d.fromDescriptor(g.method[v]));return C},y.prototype.toDescriptor=function(){for(var g=[],C=0;C<this.methodsArray.length;++C)g.push(this._methodsArray[C].toDescriptor());return q.ServiceDescriptorProto.create({name:this.name,method:g,options:l(this.options,q.ServiceOptions)})};var r=0;d.fromDescriptor=function(g){return typeof g.length=="number"&&(g=q.MethodDescriptorProto.decode(g)),new d(g.name&&g.name.length?g.name:"Method"+r++,"rpc",g.inputType,g.outputType,Boolean(g.clientStreaming),Boolean(g.serverStreaming),B(g.options,q.MethodOptions))},d.prototype.toDescriptor=function(){return q.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:l(this.options,q.MethodOptions)})};function u(R){switch(R){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+R)}function I(R){switch(R){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function L(R,g){switch(R){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(g instanceof S)return 14;if(g instanceof O)return g.group?10:11;throw Error("illegal type: "+R)}function B(R,g){if(R){for(var C=[],v=0,e,t,s;v<g.fieldsArray.length;++v)(t=(e=g._fieldsArray[v]).name)!=="uninterpretedOption"&&R.hasOwnProperty(t)&&(s=R[t],e.resolvedType instanceof S&&typeof s=="number"&&e.resolvedType.valuesById[s]!==void 0&&(s=e.resolvedType.valuesById[s]),C.push(P(t),s));return C.length?K.util.toObject(C):void 0}}function l(R,g){if(R){for(var C=[],v=0,e=Object.keys(R),t,s;v<e.length;++v)if(s=R[t=e[v]],t!=="default"){var n=g.fields[t];!n&&!(n=g.fields[t=K.util.camelCase(t)])||C.push(t,s)}return C.length?g.fromObject(K.util.toObject(C)):void 0}}function E(R,g){var C=R.fullName.split("."),v=g.fullName.split("."),e=0,t=0,s=v.length-1;if(!(R instanceof z)&&g instanceof k)for(;e<C.length&&t<s&&C[e]===v[t];){var n=g.lookup(C[e++],!0);if(n!==null&&n!==g)break;++t}else for(;e<C.length&&t<s&&C[e]===v[t];++e,++t);return v.slice(t).join(".")}function P(R){return R.substring(0,1)+R.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(g,C){return"_"+C.toLowerCase()})}}}]);

//# sourceMappingURL=9091.6c540e5932b0238e89a1.js.map