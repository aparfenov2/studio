"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7986],{47986:(U,y,l)=>{l.r(y),l.d(y,{default:()=>O});var i=l(52322),b=l(68434),w=l(82228),C=l(47426);function M(e,n){for(var a,s=-1,t=e.length;++s<t;){var c=n(e[s]);c!==void 0&&(a=a===void 0?c:a+c)}return a}const Z=M;function k(e,n){return e&&e.length?Z(e,(0,C.Z)(n,2)):0}const B=k;var j=l(44668),E=l(85026),I=l(75017),A=l(76479),h=l(2784),L=l(72970),D=l(62515);const z=({draw:e,overrideDevicePixelRatioForTest:n})=>{const{width:a,height:s,ref:t}=(0,D.NB)({refreshRate:0,refreshMode:"debounce"}),[c,m]=(0,h.useState)(window.devicePixelRatio);(0,h.useLayoutEffect)(()=>{const r=()=>{m(window.devicePixelRatio)},u=window.matchMedia(`(resolution: ${c}dppx)`);return u.addEventListener("change",r,{once:!0}),()=>{u.removeEventListener("change",r)}},[c]);const d=n??c,f=d*(a??0),o=d*(s??0);return(0,h.useLayoutEffect)(()=>{const r=t.current;if(!r||a==null||s==null)return;const u=r.getContext("2d");u&&(u.setTransform(d,0,0,d,0,0),e(u,a,s))}),(0,i.jsx)("canvas",{ref:t,width:f,height:o,style:{width:"100%",height:"100%"}})},F=(0,L.ZL)()(e=>({root:{flex:"none",backgroundColor:e.palette.grey[300]}}));function N(e,n,a,s,t,c,m,d){const f=Math.max(n,...e.map(({value:r})=>r));t.clearRect(0,0,c,m),t.beginPath(),t.strokeStyle=d;let o=!0;for(const{value:r,timestamp:u}of e){const S=(a+u-s)/a*c,T=(1-r/f)*m;o?(t.moveTo(S,T),o=!1):t.lineTo(S,T)}t.stroke()}function G(e){const{classes:n,theme:a}=F(),s=(0,h.useCallback)((t,c,m)=>{N(e.points,e.maximum??0,e.timeRange,e.nowStamp??Date.now(),t,c,m,a.palette.text.primary)},[e.maximum,e.nowStamp,e.points,e.timeRange,a.palette]);return(0,i.jsx)("div",{className:n.root,style:{height:e.height,width:e.width},children:(0,i.jsx)(z,{draw:s})})}var v=l(93812),x=l(2784);const R=5e3;function g(e){return(0,i.jsxs)(v.Z,{direction:"row",alignItems:"center",gap:1,children:[(0,i.jsx)(G,{points:e.points,maximum:e.maximum,width:100,height:30,timeRange:R}),(0,i.jsxs)(v.Z,{children:[(0,i.jsxs)(b.Z,{variant:"body2",children:[(w.Z(e.points)??{value:0}).value.toFixed(e.decimalPlaces),e.label]}),(0,i.jsxs)(b.Z,{variant:"body2",color:"text.secondary",children:[(B(e.points,"value")/e.points.length).toFixed(e.decimalPlaces)," avg"]})]})]})}function H({timestamp:e,activeData:n}){const a=x.useRef(),s=a.current;n&&(!a.current||a.current.activeData!==n)&&(a.current={timestamp:e,activeData:n});const t=x.useRef({speed:[],framerate:[],bagTimeMs:[],megabitsPerSecond:[]});if(n&&a.current&&s&&s.activeData!==n){const c=e-s.timestamp;if(s.activeData.isPlaying&&n.isPlaying&&s.activeData.lastSeekTime===n.lastSeekTime&&s.activeData.currentTime!==n.currentTime){const o=(0,j.toSec)((0,j.subtract)(n.currentTime,s.activeData.currentTime))*1e3;t.current.speed.push({value:o/c,timestamp:e}),t.current.framerate.push({value:1e3/c,timestamp:e}),t.current.bagTimeMs.push({value:o,timestamp:e})}const f=8*(n.totalBytesReceived-s.activeData.totalBytesReceived)/1e6/(c/1e3);t.current.megabitsPerSecond.push({value:f,timestamp:e});for(const o of Object.values(t.current))for(;o[0]&&o[0].timestamp<e-R;)o.shift()}return(0,i.jsxs)(v.Z,{flex:"auto",children:[(0,i.jsx)(A.Z,{}),(0,i.jsxs)(v.Z,{flex:"auto",justifyContent:"center",gap:2,padding:1,children:[(0,i.jsx)(g,{points:t.current.speed,maximum:1.6,decimalPlaces:2,label:(0,i.jsx)(i.Fragment,{children:"\xD7 realtime"})}),(0,i.jsx)(g,{points:t.current.framerate,maximum:30,decimalPlaces:1,label:"fps"}),(0,i.jsx)(g,{points:t.current.bagTimeMs,maximum:300,decimalPlaces:0,label:"ms bag frame"}),(0,i.jsx)(g,{points:t.current.megabitsPerSecond,maximum:100,decimalPlaces:1,label:"Mbps"})]})]})}function P(){const e=Date.now(),n=(0,E.An)(x.useCallback(({playerState:a})=>a.activeData,[]));return(0,i.jsx)(H,{timestamp:e,activeData:n})}P.panelType="PlaybackPerformance",P.defaultConfig={};const O=(0,I.Z)(P)}}]);

//# sourceMappingURL=7986.687b4e755330ccd8a4ea.js.map